{"meta":{"filename":"03_nbdev_create_clean_publish","title":"nbdev create clean publish","summary":"A simple, clean notebook to do just that.","toc":"true"},"content":"<p><a href=\"https://mybinder.org/v2/gh/bnia/datalabs/main?filepath=%2Fnotebooks%2F03_nbdev_create_clean_publish.ipynb\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://mybinder.org/badge_logo.svg\" alt=\"Binder\"></a>\n <a href=\"https://colab.research.google.com/github/bnia/datalabs/blob/main/notebooks/03_nbdev_create_clean_publish.ipynb\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://pete88b.github.io/fastpages/assets/badges/colab.svg\" alt=\"Binder\"></a>\n <a href=\"https://github.com/bnia/datalabs/tree/main/notebooks/03_nbdev_create_clean_publish.ipynb\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://pete88b.github.io/fastpages/assets/badges/github.svg\" alt=\"Binder\"></a>\n <a href=\"https://github.com/ellerbrock/open-source-badges/\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://badges.frapsoft.com/os/v3/open-source.svg?v=103\" alt=\"Open Source Love svg3\"></a></p>\n<p> <a href=\"https://github.com/bnia/datalabs/blob/main/LICENSE\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/npm/l/all-contributors.svg?style=flat\" alt=\"NPM License\"></a>\n <a href=\"https://bnia.github.io\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"http://img.shields.io/badge/Status-Active-green.svg\" alt=\"Active\"></a> \n <a href=\"\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/github/last-commit/bnia/datalabs.svg?style=flat\" alt=\"GitHub last commit\"></a>  </p>\n<p> <a href=\"https://github.com/bnia/datalabs\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/github/stars/bnia/datalabs.svg?style=social&label=Star\" alt=\"GitHub stars\"></a> \n <a href=\"https://github.com/bnia/datalabs\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/github/watchers/bnia/datalabs.svg?style=social&label=Watch\" alt=\"GitHub watchers\"></a> \n <a href=\"https://github.com/bnia/datalabs\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/github/forks/bnia/datalabs.svg?style=social&label=Fork\" alt=\"GitHub forks\"></a> \n <a href=\"https://github.com/bnia/datalabs\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/github/followers/bnia.svg?style=social&label=Follow\" alt=\"GitHub followers\"></a> </p>\n<p> <a href=\"https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/datalabs%20%F0%9F%A4%97\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/twitter/url/https/github.com/bnia/datalabs.svg?style=social\" alt=\"Tweet\"></a> \n <a href=\"https://twitter.com/bniajfi\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/twitter/follow/bniajfi.svg?style=social\" alt=\"Twitter Follow\"></a></p>\n <h2 id=\"creating-the-notebook\">Creating the Notebook</h2>\n <p>First I created a <a href=\"https://nbdev.fast.ai/export.html\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">template</a></p>\n <p>Then I cloned it</p>\n  ! git clone https://github.com/bnia/VitalSigns.git   /content/drive/My Drive/VitalSigns\n <p>Established some 1-time git hooks for frictionless commits into the future</p>\n  00_core.ipynb    docker-compose.yml  index.ipynb  MANIFEST.in  settings.ini\nCONTRIBUTING.md  \u001b[0m\u001b[01;34mdocs\u001b[0m/               LICENSE      README.md    setup.py\n <p>Then changed its Settings.ini file with my settings</p>\n <details > <summary>Click to toggle</summary> #@title Example form fields\n #@markdown Forms support many types of fields.\n \n # Name of the project\n folder_name = \"VitalSigns\"  #@param {type:\"string\"}\n company_name = \"BNIA-JFI\" #@param {type:\"string\"}\n # GitHub Username\n github_username = 'bniajfi'  #@param {type:\"string\"}\n description = \"Python Scripts for BNIA-JFI's Vital Signs Data\"  #@param {type:\"string\"}\n keywords = \"Community Data\"  #@param {type:\"string\"}\n # Who are you?\n author = \"Charles Karpati\"  #@param {type:\"string\"}\n author_email = 'charles.karpati@gmail.com' #@param {type:\"string\"}\n # Where are your notebooks? They are currently at the basepath.\n path_to_locate_notebooks = \".\"  #@param {type:\"string\"}\n # Where should your documentation be put? {type:\"string\"}\n path_to_place_documentation = \"docs\" #@param {type:\"string\"}\n #@markdown ---\n \n user=github_username\n nbs_path=path_to_locate_notebooks\n doc_path=path_to_place_documentation\n lib_name=folder_name\n \n # Now let's rewrite the settings.ini file.\n \n innertext = \"\"\"\n [DEFAULT]\n # All sections below are required unless otherwise specified\n host = github\n lib_name = \"\"\"+lib_name+\"\"\"\n company_name = \"\"\"+company_name+\"\"\"\n \n user = \"\"\"+user+\"\"\"\n description = \"\"\"+description+\"\"\"\n keywords = \"\"\"+keywords+\"\"\"\n author = \"\"\"+author+\"\"\"\n author_email = \"\"\"+author_email+\"\"\"\n copyright = MIT\n branch = master\n version = 0.0.1\n min_python = 3.6\n audience = Developers\n language = English\n # Set to True if you want to create a more fancy sidebar.json than the default\n custom_sidebar = False\n # Add licenses and see current list in `setup.py`\n license = apache2\n # From 1-7: Planning Pre-Alpha Alpha Beta Production Mature Inactive\n status = 2\n \n # Optional. Same format as setuptools requirements\n # requirements = \n # Optional. Same format as setuptools console_scripts\n # console_scripts = \n # Optional. Same format as setuptools dependency-links\n # dep_links = \n \n ###\n # You probably won't need to change anything under here,\n #   unless you have some special requirements\n ###\n \n # Change to, e.g. \"nbs\", to put your notebooks in nbs dir instead of repo root\n nbs_path = \"\"\"+nbs_path+\"\"\"\n doc_path = \"\"\"+doc_path+\"\"\"\n \n # Whether to look for library notebooks recursively in the `nbs_path` dir\n recursive = False\n \n # Anything shown as '%(...)s' is substituted with that setting automatically\n doc_host =  https://%(user)s.github.io\n #For Enterprise Git pages use:  \n #doc_host = https://pages.github.%(company_name)s.com.  \n \n \n doc_baseurl = /%(lib_name)s/\n # For Enterprise Github pages docs use:\n # doc_baseurl = /%(repo_name)s/%(lib_name)s/\n \n git_url = https://github.com/%(user)s/%(lib_name)s/tree/%(branch)s/\n # For Enterprise Github use:\n #git_url = https://github.%(company_name)s.com/%(repo_name)s/%(lib_name)s/tree/%(branch)s/\n \n \n \n lib_path = %(lib_name)s\n title = %(lib_name)s\n \n #Optional advanced parameters\n #Monospace docstings: adds <pre> tags around the doc strings, preserving newlines/indentation.\n #monospace_docstrings = False\n #Test flags: introduce here the test flags you want to use separated by |\n #tst_flags = \n #Custom sidebar: customize sidebar.json yourself for advanced sidebars (False/True)\n #custom_sidebar = \n #Cell spacing: if you want cell blocks in code separated by more than one new line\n #cell_spacing = \n #Custom jekyll styles: if you want more jekyll styles than tip/important/warning, set them here\n #jekyll_styles = note,warning,tip,important\n \"\"\"\n \n # Write-Overwrites \n file1 = open(\"settings.ini\", \"w\")  # write mode \n file1.write(innertext) \n file1.close() </details> <p>And then were set to test publish</p>\n !nbdev_build_lib Converted 00_core.ipynb.\nConverted index.ipynb.\n  00_core.ipynb       \u001b[0m\u001b[01;34mdocs\u001b[0m/        Makefile     README.md     \u001b[01;34mVitalSigns\u001b[0m/\nCONTRIBUTING.md     index.ipynb  MANIFEST.in  settings.ini\ndocker-compose.yml  LICENSE      \u001b[01;34mnotebooks\u001b[0m/   setup.py\n # ! nbdev_build_lib --fname RBIntel.ipynb from VitalSigns.core import *  'hi hi ' <h2 id=\"managing-it\">Managing it</h2>\n # https://karpatic.github.io/datalabs/nbdev/\n %cd /content/drive/My Drive/'Software Development Documents'/\n %ls\n # this will reload imported modules whenever the .py file changes. \n # whenever the .py file changes via nbdev_build_lib or _update_lib. \n %load_ext autoreload\n %autoreload 2 /content/drive/My Drive/Software Development Documents\n 0000_READ.ME.gdoc   \u001b[0m\u001b[01;34mDevelopersDocumentation\u001b[0m/  \u001b[01;34m'Site - Project_VItal'\u001b[0m/\n \u001b[01;34mdataguide\u001b[0m/         \u001b[01;34m'Site - BPM'\u001b[0m/               \u001b[01;34mtemp_misc\u001b[0m/\n \u001b[01;34mdatalabs\u001b[0m/          \u001b[01;34m'Site - DLLR'\u001b[0m/              \u001b[01;34mVitalSigns\u001b[0m/\n \u001b[01;34mdataplay\u001b[0m/          \u001b[01;34m'Site - Green Patterns'\u001b[0m/\n # https://nbdev.fast.ai/tutorial.html#Add-in-notebook-export-cell\n # https://nbdev.fast.ai/sync#nbdev_update_lib\n # first. builds the .py files from from .ipynbs\n !nbdev_build_lib #  --fname filename.ipynb\n # second. Push .pu changes back to their original .ipynbs\n !nbdev_update_lib \n # sometimes. Update .ipynb import statements if the .py filename.classname changes. \n !relimport2name\n # nbdev_build_docs builds the documentation from the notebooks\n !nbdev_build_docs --force_all True --mk_readme True  ! git add *\n ! git config --global user.name \"karpatic\"\n ! git config --global user.email \"charles.karpati@gmail.com\"\n ! git commit -m \"Collapse Experiments P2\"\n # git push -f origin master \n ! git push -u ORIGIN main # ! pip install twine\n # ! nbdev_bump_version\n # ! make pypi"}