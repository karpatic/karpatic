"use strict";(self.webpackChunkkarpatic=self.webpackChunkkarpatic||[]).push([[72],{720:function(e,t,l){l.r(t),l.d(t,{convertNb:function(){return convertNb},get_metadata:function(){return get_metadata},nb2json:function(){return nb2json}});var n=l(952);function makeDetails(e,t){return"<details "+(t?"open":"")+"> <summary>Click to toggle</summary> "+e+"</details>"}function replaceAndLog(e,t,l){return e.replace(t,(function(e,t){return l.replace?.("$1",t)||l(e,t)}))}let o=!1,r=[];async function nb2json(e,t=!1){r=[],o=!1;let l=e;"undefined"==typeof process||e.startsWith("http")||(l=`http://localhost:8085/${e}.ipynb`);let n=await fetch(l,{headers:{"Content-Type":"application/json; charset=utf-8"}});const s=await n.json(),a=get_metadata(s.cells[0]);a.filename=e.split("/")[e.split("/").length-1].toLowerCase().replaceAll(" ","_"),t&&console.log("- get_metadata",a,"\n");let c=convertNb(s.cells.slice(1),a).flat().join(" ");t&&r.length&&console.log({pyCode:r}),a.pyCode=r,(a.prettify||o)&&(c+='\n  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"><\/script>\n  <link rel="stylesheet" href="https://cdn.rawgit.com/google/code-prettify/master/styles/desert.css"/>\n  '),t&&console.log("- - content Ran ~~~~~~~~~~~",c,"~~~~~~~~~~~\n");let p=function replaceEmojis(e){return(e=(e=(e=(e=(e=e.replaceAll("ðŸ™‚","&#1F642")).replaceAll("ðŸ˜³","&#128563")).replaceAll("â€ƒ","&#8195")).replaceAll("ðŸ‘·","&#128119")).replaceAll("ðŸ§¡","&#129505")).replaceAll("ðŸ’–","&#128150")}(c);return t&&console.log("- - replaceEmojis Ran","\n"),{meta:a,content:p}}function get_metadata(e){const t={};for(const l of e.source)if(l.startsWith("#"))t.title=l.replaceAll("\n","").replaceAll("# ","",2);else if(l.startsWith(">"))t.summary=l.replaceAll("\n","").replaceAll("> ","",1);else if(l.startsWith("-")){const e=l.slice(l.indexOf("- ")+2,l.indexOf(": ")),n=l.slice(l.indexOf(": ")+2).replaceAll("\n","").trim();t[e]=n}return t}function convertNb(e,t,l=!1){return l&&console.log("- convertNb Running"),e.map((e=>function cleanCell(e,t,l=!1){let s;l&&console.log("- - cleanCell Running"),"markdown"==e.cell_type?(l&&console.log("- - - Parsing Markdown"),s=function processMarkdown(e){return e=e.replace(/\(\(\((.*?)::(.*?)\)\)\)/g,(function(e,t,l){return"note"==t?e:`<aside class="${t}">${l}</aside>`})),e=n.xI.parse(e),e=e.replace(/<li>(.*?)<\/li>/g,((e,t)=>`<li>${/<(p|div|blockquote|pre|hr|form)/.test(t)?`<div>${t}</div>`:`<p>${t}</p>`}</li>`)),e=replaceAndLog(e,/<pre><code>([\s\S]*?)<\/code><\/pre>/g,(()=>{o=!0})),e=replaceAndLog(e,/<code>([\s\S]*?)<\/code>/g,(()=>{o=!0})),e=replaceAndLog(e,/<a\s+(?:[^>]*?\s+)?href="(.*?)"/g,((e,t)=>(t.startsWith("./")||(e+=' onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow"'),e))),e=function convertNotes(e){let t=0;return e.replace(/(<p)(.*?)\(\(\((.*?)::(.*?)\)\)\)(.*?)(<\/p>)/g,((e,l,n,o,r,s,a)=>{t++;let c=`<label  tabindex="0" for='note${t}' class='notelbl'>[${t}]</label>`;return`<div>\n      <input type='checkbox' id='note${t}' class='notebox'>\n      ${l}${n}${c}${s}${a}\n      <aside>${c} ${r} </aside> \n    </div>`}))}(e),e}(e.source.join(" "))):s=function processCode(e,t,l=!1){l&&console.log("- - - processCode Running");let n=[],o=[];if(e.source.length){l&&console.log("- - - - Raw Input Source",e.source);let s=e.source;o=function getFlags(e){const t=["#collapse_input_open","#collapse_input","#collapse_output_open","#collapse_output","#hide_input","#hide_output","#hide","%%capture","%%javascript","%%html","#export"],l=e.split(/\s+/);return t.filter((e=>l.includes(e)))}(s[0]),l&&console.log("- - - - - Flags: ",o),o.length>0&&(s=s.slice(1)),s=function processSource(e,t,l,n=!1){"#export"==t[t.length-1]&&r.push(e);for(let e of t){if(["#hide","#hide_input","%%javascript","%%html","%%capture"].includes(e))return""}l.prettify&&(e=`<pre class='prettyprint'>${e}</pre>`);let o=t&&!!t.includes("#collapse_input_open");if(o){n&&console.log(t);for(let l of t)e=(e=e.replaceAll(l+"\r\n","")).replaceAll(l+"\n",""),"#collapse_input_open"==l?e=makeDetails(e,!0):"#collapse_input"==l&&(e=makeDetails(e,!1));return e}}(s.join(" "),o,t),n.push(s)}if(e.outputs.length){l&&console.log("- - - - Raw Process Outputs",e.outputs);for(let t of e.outputs)n.push(processOutput(t,o));l&&console.log("- - - - - processOutput: ",n)}return l&&console.log("- - - processCode Ran"),n}(e,t);return s}(e,t)))}function processOutput(e,t,l=!1){if("error"==e.output_type)return"";if("stream"==e.output_type){if("stderr"==e.name)return"";e.data={"text/html":e.text}}const n=Object.keys(e.data);n.includes("text/html")?e=(e=e.data["text/html"]).join(""):n.includes("application/javascript")?e="<script>"+e.data["application/javascript"]+"<\/script>":n.includes("image/png")?e='<img src="data:image/png;base64,'+e.data["image/png"]+"\" alt='Image Alt Text'>":n.includes("text/plain")&&(e=/<Figure/.test(e.data["text/plain"])?"":e.data["text/plain"]);for(let n of t){try{e=(e=e.replaceAll(n+"\r\n","")).replaceAll(n+"\n","")}catch{l&&console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!processOutput... ",typeof e,e)}"#collapse_output_open"==n&&(e=makeDetails(e,!0)),"#collapse_output"==n&&(e=makeDetails(e,!1)),"#hide_output"==n&&(e=""),"#hide"==n&&(e="")}return e}}}]);