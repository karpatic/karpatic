/*! For license information please see turf.min.js.LICENSE.txt */
!function(O,J){"object"==typeof exports&&"undefined"!=typeof module?J(exports):"function"==typeof define&&define.amd?define(["exports"],J):J((O="undefined"!=typeof globalThis?globalThis:O||self).turf={})}(this,(function(O){"use strict";var J=6371008.8,ot={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*J,kilometers:6371.0088,kilometres:6371.0088,meters:J,metres:J,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:J/1852,radians:1,yards:6967335.223679999},st={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/J,yards:1.0936133},at={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function o(O,J,ot){void 0===ot&&(ot={});var st={type:"Feature"};return(0===ot.id||ot.id)&&(st.id=ot.id),ot.bbox&&(st.bbox=ot.bbox),st.properties=J||{},st.geometry=O,st}function s(O,J,ot){switch(O){case"Point":return a(J).geometry;case"LineString":return h(J).geometry;case"Polygon":return l(J).geometry;case"MultiPoint":return d(J).geometry;case"MultiLineString":return g(J).geometry;case"MultiPolygon":return y(J).geometry;default:throw new Error(O+" is invalid")}}function a(O,J,ot){if(void 0===ot&&(ot={}),!O)throw new Error("coordinates is required");if(!Array.isArray(O))throw new Error("coordinates must be an Array");if(O.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!C(O[0])||!C(O[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:O},J,ot)}function u(O,J,ot){return void 0===ot&&(ot={}),f(O.map((function(O){return a(O,J)})),ot)}function l(O,J,ot){void 0===ot&&(ot={});for(var st=0,at=O;st<at.length;st++){var ut=at[st];if(ut.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ct=0;ct<ut[ut.length-1].length;ct++)if(ut[ut.length-1][ct]!==ut[0][ct])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:O},J,ot)}function c(O,J,ot){return void 0===ot&&(ot={}),f(O.map((function(O){return l(O,J)})),ot)}function h(O,J,ot){if(void 0===ot&&(ot={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:O},J,ot)}function p(O,J,ot){return void 0===ot&&(ot={}),f(O.map((function(O){return h(O,J)})),ot)}function f(O,J){void 0===J&&(J={});var ot={type:"FeatureCollection"};return J.id&&(ot.id=J.id),J.bbox&&(ot.bbox=J.bbox),ot.features=O,ot}function g(O,J,ot){return void 0===ot&&(ot={}),o({type:"MultiLineString",coordinates:O},J,ot)}function d(O,J,ot){return void 0===ot&&(ot={}),o({type:"MultiPoint",coordinates:O},J,ot)}function y(O,J,ot){return void 0===ot&&(ot={}),o({type:"MultiPolygon",coordinates:O},J,ot)}function v(O,J,ot){return void 0===ot&&(ot={}),o({type:"GeometryCollection",geometries:O},J,ot)}function _(O,J){if(void 0===J&&(J=0),J&&!(J>=0))throw new Error("precision must be a positive number");var ot=Math.pow(10,J||0);return Math.round(O*ot)/ot}function m(O,J){void 0===J&&(J="kilometers");var st=ot[J];if(!st)throw new Error(J+" units is invalid");return O*st}function x(O,J){void 0===J&&(J="kilometers");var st=ot[J];if(!st)throw new Error(J+" units is invalid");return O/st}function E(O,J){return w(x(O,J))}function b(O){var J=O%360;return J<0&&(J+=360),J}function w(O){return O%(2*Math.PI)*180/Math.PI}function I(O){return O%360*Math.PI/180}function N(O,J,ot){if(void 0===J&&(J="kilometers"),void 0===ot&&(ot="kilometers"),!(O>=0))throw new Error("length must be a positive number");return m(x(O,J),ot)}function S(O,J,ot){if(void 0===J&&(J="meters"),void 0===ot&&(ot="kilometers"),!(O>=0))throw new Error("area must be a positive number");var st=at[J];if(!st)throw new Error("invalid original units");var ut=at[ot];if(!ut)throw new Error("invalid final units");return O/st*ut}function C(O){return!isNaN(O)&&null!==O&&!Array.isArray(O)}function P(O){return!!O&&O.constructor===Object}function M(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(4!==O.length&&6!==O.length)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach((function(O){if(!C(O))throw new Error("bbox must only contain numbers")}))}function L(O){if(!O)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof O))throw new Error("id must be a number or a string")}var ut=Object.freeze({__proto__:null,earthRadius:J,factors:ot,unitsFactors:st,areaFactors:at,feature:o,geometry:s,point:a,points:u,polygon:l,polygons:c,lineString:h,lineStrings:p,featureCollection:f,multiLineString:g,multiPoint:d,multiPolygon:y,geometryCollection:v,round:_,radiansToLength:m,lengthToRadians:x,lengthToDegrees:E,bearingToAzimuth:b,radiansToDegrees:w,degreesToRadians:I,convertLength:N,convertArea:S,isNumber:C,isObject:P,validateBBox:M,validateId:L});function R(O,J,ot){if(null!==O)for(var st,at,ut,ct,ht,pt,mt,xt,Nt=0,St=0,jt=O.type,Wt="FeatureCollection"===jt,Ht="Feature"===jt,Zt=Wt?O.features.length:1,Kt=0;Kt<Zt;Kt++){ht=(xt=!!(mt=Wt?O.features[Kt].geometry:Ht?O.geometry:O)&&"GeometryCollection"===mt.type)?mt.geometries.length:1;for(var Jt=0;Jt<ht;Jt++){var ee=0,ne=0;if(null!==(ct=xt?mt.geometries[Jt]:mt)){pt=ct.coordinates;var re=ct.type;switch(Nt=!ot||"Polygon"!==re&&"MultiPolygon"!==re?0:1,re){case null:break;case"Point":if(!1===J(pt,St,Kt,ee,ne))return!1;St++,ee++;break;case"LineString":case"MultiPoint":for(st=0;st<pt.length;st++){if(!1===J(pt[st],St,Kt,ee,ne))return!1;St++,"MultiPoint"===re&&ee++}"LineString"===re&&ee++;break;case"Polygon":case"MultiLineString":for(st=0;st<pt.length;st++){for(at=0;at<pt[st].length-Nt;at++){if(!1===J(pt[st][at],St,Kt,ee,ne))return!1;St++}"MultiLineString"===re&&ee++,"Polygon"===re&&ne++}"Polygon"===re&&ee++;break;case"MultiPolygon":for(st=0;st<pt.length;st++){for(ne=0,at=0;at<pt[st].length;at++){for(ut=0;ut<pt[st][at].length-Nt;ut++){if(!1===J(pt[st][at][ut],St,Kt,ee,ne))return!1;St++}ne++}ee++}break;case"GeometryCollection":for(st=0;st<ct.geometries.length;st++)if(!1===R(ct.geometries[st],J,ot))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(O,J,ot,st){var at=ot;return R(O,(function(O,st,ut,ct,ht){at=0===st&&void 0===ot?O:J(at,O,st,ut,ct,ht)}),st),at}function A(O,J){var ot;switch(O.type){case"FeatureCollection":for(ot=0;ot<O.features.length&&!1!==J(O.features[ot].properties,ot);ot++);break;case"Feature":J(O.properties,0)}}function D(O,J,ot){var st=ot;return A(O,(function(O,at){st=0===at&&void 0===ot?O:J(st,O,at)})),st}function F(O,J){if("Feature"===O.type)J(O,0);else if("FeatureCollection"===O.type)for(var ot=0;ot<O.features.length&&!1!==J(O.features[ot],ot);ot++);}function k(O,J,ot){var st=ot;return F(O,(function(O,at){st=0===at&&void 0===ot?O:J(st,O,at)})),st}function G(O){var J=[];return R(O,(function(O){J.push(O)})),J}function q(O,J){var ot,st,at,ut,ct,ht,pt,mt,xt,Nt,St=0,jt="FeatureCollection"===O.type,Wt="Feature"===O.type,Ht=jt?O.features.length:1;for(ot=0;ot<Ht;ot++){for(ht=jt?O.features[ot].geometry:Wt?O.geometry:O,mt=jt?O.features[ot].properties:Wt?O.properties:{},xt=jt?O.features[ot].bbox:Wt?O.bbox:void 0,Nt=jt?O.features[ot].id:Wt?O.id:void 0,ct=(pt=!!ht&&"GeometryCollection"===ht.type)?ht.geometries.length:1,at=0;at<ct;at++)if(null!==(ut=pt?ht.geometries[at]:ht))switch(ut.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===J(ut,St,mt,xt,Nt))return!1;break;case"GeometryCollection":for(st=0;st<ut.geometries.length;st++)if(!1===J(ut.geometries[st],St,mt,xt,Nt))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===J(null,St,mt,xt,Nt))return!1;St++}}function B(O,J,ot){var st=ot;return q(O,(function(O,at,ut,ct,ht){st=0===at&&void 0===ot?O:J(st,O,at,ut,ct,ht)})),st}function z(O,J){q(O,(function(O,ot,st,at,ut){var ct,ht=null===O?null:O.type;switch(ht){case null:case"Point":case"LineString":case"Polygon":return!1!==J(o(O,st,{bbox:at,id:ut}),ot,0)&&void 0}switch(ht){case"MultiPoint":ct="Point";break;case"MultiLineString":ct="LineString";break;case"MultiPolygon":ct="Polygon"}for(var pt=0;pt<O.coordinates.length;pt++){var mt=O.coordinates[pt];if(!1===J(o({type:ct,coordinates:mt},st),ot,pt))return!1}}))}function j(O,J,ot){var st=ot;return z(O,(function(O,at,ut){st=0===at&&0===ut&&void 0===ot?O:J(st,O,at,ut)})),st}function U(O,J){z(O,(function(O,ot,st){var at=0;if(O.geometry){var ut=O.geometry.type;if("Point"!==ut&&"MultiPoint"!==ut){var ct,ht=0,pt=0,mt=0;return!1!==R(O,(function(ut,xt,Nt,St,jt){if(void 0===ct||ot>ht||St>pt||jt>mt)return ct=ut,ht=ot,pt=St,mt=jt,void(at=0);var Wt=h([ct,ut],O.properties);if(!1===J(Wt,ot,st,jt,at))return!1;at++,ct=ut}))&&void 0}}}))}function V(O,J,ot){var st=ot,at=!1;return U(O,(function(O,ut,ct,ht,pt){st=!1===at&&void 0===ot?O:J(st,O,ut,ct,ht,pt),at=!0})),st}function X(O,J){if(!O)throw new Error("geojson is required");z(O,(function(O,ot,st){if(null!==O.geometry){var at=O.geometry.type,ut=O.geometry.coordinates;switch(at){case"LineString":if(!1===J(O,ot,st,0,0))return!1;break;case"Polygon":for(var ct=0;ct<ut.length;ct++)if(!1===J(h(ut[ct],O.properties),ot,st,ct))return!1}}}))}function Y(O,J,ot){var st=ot;return X(O,(function(O,at,ut,ct){st=0===at&&void 0===ot?O:J(st,O,at,ut,ct)})),st}function H(O,J){if(!P(J=J||{}))throw new Error("options is invalid");var ot,st=J.featureIndex||0,at=J.multiFeatureIndex||0,ut=J.geometryIndex||0,ct=J.segmentIndex||0,ht=J.properties;switch(O.type){case"FeatureCollection":st<0&&(st=O.features.length+st),ht=ht||O.features[st].properties,ot=O.features[st].geometry;break;case"Feature":ht=ht||O.properties,ot=O.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ot=O;break;default:throw new Error("geojson is invalid")}if(null===ot)return null;var pt=ot.coordinates;switch(ot.type){case"Point":case"MultiPoint":return null;case"LineString":return ct<0&&(ct=pt.length+ct-1),h([pt[ct],pt[ct+1]],ht,J);case"Polygon":return ut<0&&(ut=pt.length+ut),ct<0&&(ct=pt[ut].length+ct-1),h([pt[ut][ct],pt[ut][ct+1]],ht,J);case"MultiLineString":return at<0&&(at=pt.length+at),ct<0&&(ct=pt[at].length+ct-1),h([pt[at][ct],pt[at][ct+1]],ht,J);case"MultiPolygon":return at<0&&(at=pt.length+at),ut<0&&(ut=pt[at].length+ut),ct<0&&(ct=pt[at][ut].length-ct-1),h([pt[at][ut][ct],pt[at][ut][ct+1]],ht,J)}throw new Error("geojson is invalid")}function W(O,J){if(!P(J=J||{}))throw new Error("options is invalid");var ot,st=J.featureIndex||0,at=J.multiFeatureIndex||0,ut=J.geometryIndex||0,ct=J.coordIndex||0,ht=J.properties;switch(O.type){case"FeatureCollection":st<0&&(st=O.features.length+st),ht=ht||O.features[st].properties,ot=O.features[st].geometry;break;case"Feature":ht=ht||O.properties,ot=O.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ot=O;break;default:throw new Error("geojson is invalid")}if(null===ot)return null;var pt=ot.coordinates;switch(ot.type){case"Point":return a(pt,ht,J);case"MultiPoint":return at<0&&(at=pt.length+at),a(pt[at],ht,J);case"LineString":return ct<0&&(ct=pt.length+ct),a(pt[ct],ht,J);case"Polygon":return ut<0&&(ut=pt.length+ut),ct<0&&(ct=pt[ut].length+ct),a(pt[ut][ct],ht,J);case"MultiLineString":return at<0&&(at=pt.length+at),ct<0&&(ct=pt[at].length+ct),a(pt[at][ct],ht,J);case"MultiPolygon":return at<0&&(at=pt.length+at),ut<0&&(ut=pt[at].length+ut),ct<0&&(ct=pt[at][ut].length-ct),a(pt[at][ut][ct],ht,J)}throw new Error("geojson is invalid")}var ct=Object.freeze({__proto__:null,coordAll:G,coordEach:R,coordReduce:T,featureEach:F,featureReduce:k,findPoint:W,findSegment:H,flattenEach:z,flattenReduce:j,geomEach:q,geomReduce:B,lineEach:X,lineReduce:Y,propEach:A,propReduce:D,segmentEach:U,segmentReduce:V});function Z(O){var J=[1/0,1/0,-1/0,-1/0];return R(O,(function(O){J[0]>O[0]&&(J[0]=O[0]),J[1]>O[1]&&(J[1]=O[1]),J[2]<O[0]&&(J[2]=O[0]),J[3]<O[1]&&(J[3]=O[1])})),J}function K(O){if(!O)throw new Error("coord is required");if(!Array.isArray(O)){if("Feature"===O.type&&null!==O.geometry&&"Point"===O.geometry.type)return O.geometry.coordinates;if("Point"===O.type)return O.coordinates}if(Array.isArray(O)&&O.length>=2&&!Array.isArray(O[0])&&!Array.isArray(O[1]))return O;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Q(O){if(Array.isArray(O))return O;if("Feature"===O.type){if(null!==O.geometry)return O.geometry.coordinates}else if(O.coordinates)return O.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function $(O){if(O.length>1&&C(O[0])&&C(O[1]))return!0;if(Array.isArray(O[0])&&O[0].length)return $(O[0]);throw new Error("coordinates must only contain numbers")}function tt(O,J,ot){if(!J||!ot)throw new Error("type and name required");if(!O||O.type!==J)throw new Error("Invalid input to "+ot+": must be a "+J+", given "+O.type)}function et(O,J,ot){if(!O)throw new Error("No feature passed");if(!ot)throw new Error(".featureOf() requires a name");if(!O||"Feature"!==O.type||!O.geometry)throw new Error("Invalid input to "+ot+", Feature with geometry required");if(!O.geometry||O.geometry.type!==J)throw new Error("Invalid input to "+ot+": must be a "+J+", given "+O.geometry.type)}function nt(O,J,ot){if(!O)throw new Error("No featureCollection passed");if(!ot)throw new Error(".collectionOf() requires a name");if(!O||"FeatureCollection"!==O.type)throw new Error("Invalid input to "+ot+", FeatureCollection required");for(var st=0,at=O.features;st<at.length;st++){var ut=at[st];if(!ut||"Feature"!==ut.type||!ut.geometry)throw new Error("Invalid input to "+ot+", Feature with geometry required");if(!ut.geometry||ut.geometry.type!==J)throw new Error("Invalid input to "+ot+": must be a "+J+", given "+ut.geometry.type)}}function rt(O){return"Feature"===O.type?O.geometry:O}function it(O,J){return"FeatureCollection"===O.type?"FeatureCollection":"GeometryCollection"===O.type?"GeometryCollection":"Feature"===O.type&&null!==O.geometry?O.geometry.type:O.type}Z.default=Z;var ht=Object.freeze({__proto__:null,getCoord:K,getCoords:Q,containsNumber:$,geojsonType:tt,featureOf:et,collectionOf:nt,getGeom:rt,getType:it}),pt=Object.getOwnPropertySymbols,mt=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable;var Nt=function(){try{if(!Object.assign)return!1;var O=new String("abc");if(O[5]="de","5"===Object.getOwnPropertyNames(O)[0])return!1;for(var J={},ot=0;ot<10;ot++)J["_"+String.fromCharCode(ot)]=ot;if("0123456789"!==Object.getOwnPropertyNames(J).map((function(O){return J[O]})).join(""))return!1;var st={};return"abcdefghijklmnopqrst".split("").forEach((function(O){st[O]=O})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},st)).join("")}catch(O){return!1}}()?Object.assign:function(O,J){for(var ot,st,at=function lt(O){if(null==O)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(O)}(O),ut=1;ut<arguments.length;ut++){for(var ct in ot=Object(arguments[ut]))mt.call(ot,ct)&&(at[ct]=ot[ct]);if(pt){st=pt(ot);for(var ht=0;ht<st.length;ht++)xt.call(ot,st[ht])&&(at[st[ht]]=ot[st[ht]])}}return at},St={successCallback:null,verbose:!1},jt={};function ft(O,J,ot){ot=ot||{};for(var st=Object.keys(St),at=0;at<st.length;at++){var ut=st[at],ct=ot[ut];ct=null!=ct?ct:St[ut],jt[ut]=ct}jt.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+J);var ht=function(O){var J=[],ot=0;return O.cells.forEach((function(st,at){st.forEach((function(st,ut){if(void 0!==st&&5!==(St=st).cval&&10!==St.cval&&!dt(st)){var ct=function(O,J,ot){var st,at,ut=O.length,ct=[],ht=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],pt=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],mt=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],xt=O[J][ot],Nt=xt.cval,St=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][Nt],jt=vt(xt,St);ct.push([ot+jt[0],J+jt[1]]),jt=vt(xt,St=mt[Nt]),ct.push([ot+jt[0],J+jt[1]]),yt(xt);for(var Wt=ot+ht[Nt],Ht=J+pt[Nt],Zt=Nt;Wt>=0&&Ht>=0&&Ht<ut&&(Wt!=ot||Ht!=J)&&void 0!==(xt=O[Ht][Wt]);){if(0===(Nt=xt.cval)||15===Nt)return{path:ct,info:"mergeable"};St=mt[Nt],st=ht[Nt],at=pt[Nt],5!==Nt&&10!==Nt||(5===Nt?xt.flipped?-1===pt[Zt]?(St="left",st=-1,at=0):(St="right",st=1,at=0):-1===ht[Zt]&&(St="bottom",st=0,at=-1):10===Nt&&(xt.flipped?-1===ht[Zt]?(St="top",st=0,at=1):(St="bottom",st=0,at=-1):1===pt[Zt]&&(St="left",st=-1,at=0))),jt=vt(xt,St),ct.push([Wt+jt[0],Ht+jt[1]]),yt(xt),Wt+=st,Ht+=at,Zt=Nt}return{path:ct,info:"closed"}}(O.cells,at,ut),ht=!1;if("mergeable"===ct.info)for(var pt=ct.path[ct.path.length-1][0],mt=ct.path[ct.path.length-1][1],xt=ot-1;xt>=0;xt--)if(Math.abs(J[xt][0][0]-pt)<=1e-7&&Math.abs(J[xt][0][1]-mt)<=1e-7){for(var Nt=ct.path.length-2;Nt>=0;--Nt)J[xt].unshift(ct.path[Nt]);ht=!0;break}ht||(J[ot++]=ct.path)}var St}))})),J}(function(O,J){for(var ot=O.length-1,st=O[0].length-1,at={rows:ot,cols:st,cells:[]},ut=0;ut<ot;++ut){at.cells[ut]=[];for(var ct=0;ct<st;++ct){var ht=0,pt=O[ut+1][ct],mt=O[ut+1][ct+1],xt=O[ut][ct+1],Nt=O[ut][ct];if(!(isNaN(pt)||isNaN(mt)||isNaN(xt)||isNaN(Nt))){ht|=pt>=J?8:0,ht|=mt>=J?4:0,ht|=xt>=J?2:0;var St,jt,Wt,Ht,Zt=!1;if(5==(ht|=Nt>=J?1:0)||10===ht){var Kt=(pt+mt+xt+Nt)/4;5===ht&&Kt<J?(ht=10,Zt=!0):10===ht&&Kt<J&&(ht=5,Zt=!0)}0!==ht&&15!==ht&&(St=jt=Wt=Ht=.5,1===ht?(Wt=1-gt(J,pt,Nt),jt=1-gt(J,xt,Nt)):2===ht?(jt=gt(J,Nt,xt),Ht=1-gt(J,mt,xt)):3===ht?(Wt=1-gt(J,pt,Nt),Ht=1-gt(J,mt,xt)):4===ht?(St=gt(J,pt,mt),Ht=gt(J,xt,mt)):5===ht?(St=gt(J,pt,mt),Ht=gt(J,xt,mt),jt=1-gt(J,xt,Nt),Wt=1-gt(J,pt,Nt)):6===ht?(jt=gt(J,Nt,xt),St=gt(J,pt,mt)):7===ht?(Wt=1-gt(J,pt,Nt),St=gt(J,pt,mt)):8===ht?(Wt=gt(J,Nt,pt),St=1-gt(J,mt,pt)):9===ht?(jt=1-gt(J,xt,Nt),St=1-gt(J,mt,pt)):10===ht?(St=1-gt(J,mt,pt),Ht=1-gt(J,mt,xt),jt=gt(J,Nt,xt),Wt=gt(J,Nt,pt)):11===ht?(St=1-gt(J,mt,pt),Ht=1-gt(J,mt,xt)):12===ht?(Wt=gt(J,Nt,pt),Ht=gt(J,xt,mt)):13===ht?(jt=1-gt(J,xt,Nt),Ht=gt(J,xt,mt)):14===ht?(Wt=gt(J,Nt,pt),jt=gt(J,Nt,xt)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+ht),at.cells[ut][ct]={cval:ht,flipped:Zt,top:St,right:Ht,bottom:jt,left:Wt})}}}return at}(O,J));return"function"==typeof jt.successCallback&&jt.successCallback(ht),ht}function gt(O,J,ot){return(O-J)/(ot-J)}function dt(O){return 0===O.cval||15===O.cval}function yt(O){dt(O)||5===O.cval||10===O.cval||(O.cval=15)}function vt(O,J){return"top"===J?[O.top,1]:"bottom"===J?[O.bottom,0]:"right"===J?[1,O.right]:"left"===J?[0,O.left]:void 0}var Wt=Et,Ht=Et;function Et(O,J,ot,st,at){bt(O,J,ot||0,st||O.length-1,at||It)}function bt(O,J,ot,st,at){for(;st>ot;){if(st-ot>600){var ut=st-ot+1,ct=J-ot+1,ht=Math.log(ut),pt=.5*Math.exp(2*ht/3),mt=.5*Math.sqrt(ht*pt*(ut-pt)/ut)*(ct-ut/2<0?-1:1);bt(O,J,Math.max(ot,Math.floor(J-ct*pt/ut+mt)),Math.min(st,Math.floor(J+(ut-ct)*pt/ut+mt)),at)}var xt=O[J],Nt=ot,St=st;for(wt(O,ot,J),at(O[st],xt)>0&&wt(O,ot,st);Nt<St;){for(wt(O,Nt,St),Nt++,St--;at(O[Nt],xt)<0;)Nt++;for(;at(O[St],xt)>0;)St--}0===at(O[ot],xt)?wt(O,ot,St):wt(O,++St,st),St<=J&&(ot=St+1),J<=St&&(st=St-1)}}function wt(O,J,ot){var st=O[J];O[J]=O[ot],O[ot]=st}function It(O,J){return O<J?-1:O>J?1:0}Wt.default=Ht;var Zt=Ct,Kt=Ct;function Ct(O,J){if(!(this instanceof Ct))return new Ct(O,J);this._maxEntries=Math.max(4,O||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),J&&this._initFormat(J),this.clear()}function Pt(O,J,ot){if(!ot)return J.indexOf(O);for(var st=0;st<J.length;st++)if(ot(O,J[st]))return st;return-1}function Mt(O,J){Lt(O,0,O.children.length,J,O)}function Lt(O,J,ot,st,at){at||(at=Gt(null)),at.minX=1/0,at.minY=1/0,at.maxX=-1/0,at.maxY=-1/0;for(var ut,ct=J;ct<ot;ct++)ut=O.children[ct],Ot(at,O.leaf?st(ut):ut);return at}function Ot(O,J){return O.minX=Math.min(O.minX,J.minX),O.minY=Math.min(O.minY,J.minY),O.maxX=Math.max(O.maxX,J.maxX),O.maxY=Math.max(O.maxY,J.maxY),O}function Rt(O,J){return O.minX-J.minX}function Tt(O,J){return O.minY-J.minY}function At(O){return(O.maxX-O.minX)*(O.maxY-O.minY)}function Dt(O){return O.maxX-O.minX+(O.maxY-O.minY)}function Ft(O,J){return O.minX<=J.minX&&O.minY<=J.minY&&J.maxX<=O.maxX&&J.maxY<=O.maxY}function kt(O,J){return J.minX<=O.maxX&&J.minY<=O.maxY&&J.maxX>=O.minX&&J.maxY>=O.minY}function Gt(O){return{children:O,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function qt(O,J,ot,st,at){for(var ut,ct=[J,ot];ct.length;)(ot=ct.pop())-(J=ct.pop())<=st||(ut=J+Math.ceil((ot-J)/st/2)*st,Wt(O,ut,J,ot,at),ct.push(J,ut,ut,ot))}function Bt(O){var J={exports:{}};return O(J,J.exports),J.exports}Ct.prototype={all:function(){return this._all(this.data,[])},search:function(O){var J=this.data,ot=[],st=this.toBBox;if(!kt(O,J))return ot;for(var at,ut,ct,ht,pt=[];J;){for(at=0,ut=J.children.length;at<ut;at++)ct=J.children[at],kt(O,ht=J.leaf?st(ct):ct)&&(J.leaf?ot.push(ct):Ft(O,ht)?this._all(ct,ot):pt.push(ct));J=pt.pop()}return ot},collides:function(O){var J=this.data,ot=this.toBBox;if(!kt(O,J))return!1;for(var st,at,ut,ct,ht=[];J;){for(st=0,at=J.children.length;st<at;st++)if(ut=J.children[st],kt(O,ct=J.leaf?ot(ut):ut)){if(J.leaf||Ft(O,ct))return!0;ht.push(ut)}J=ht.pop()}return!1},load:function(O){if(!O||!O.length)return this;if(O.length<this._minEntries){for(var J=0,ot=O.length;J<ot;J++)this.insert(O[J]);return this}var st=this._build(O.slice(),0,O.length-1,0);if(this.data.children.length)if(this.data.height===st.height)this._splitRoot(this.data,st);else{if(this.data.height<st.height){var at=this.data;this.data=st,st=at}this._insert(st,this.data.height-st.height-1,!0)}else this.data=st;return this},insert:function(O){return O&&this._insert(O,this.data.height-1),this},clear:function(){return this.data=Gt([]),this},remove:function(O,J){if(!O)return this;for(var ot,st,at,ut,ct=this.data,ht=this.toBBox(O),pt=[],mt=[];ct||pt.length;){if(ct||(ct=pt.pop(),st=pt[pt.length-1],ot=mt.pop(),ut=!0),ct.leaf&&-1!==(at=Pt(O,ct.children,J)))return ct.children.splice(at,1),pt.push(ct),this._condense(pt),this;ut||ct.leaf||!Ft(ct,ht)?st?(ot++,ct=st.children[ot],ut=!1):ct=null:(pt.push(ct),mt.push(ot),ot=0,st=ct,ct=ct.children[0])}return this},toBBox:function(O){return O},compareMinX:Rt,compareMinY:Tt,toJSON:function(){return this.data},fromJSON:function(O){return this.data=O,this},_all:function(O,J){for(var ot=[];O;)O.leaf?J.push.apply(J,O.children):ot.push.apply(ot,O.children),O=ot.pop();return J},_build:function(O,J,ot,st){var at,ut=ot-J+1,ct=this._maxEntries;if(ut<=ct)return Mt(at=Gt(O.slice(J,ot+1)),this.toBBox),at;st||(st=Math.ceil(Math.log(ut)/Math.log(ct)),ct=Math.ceil(ut/Math.pow(ct,st-1))),(at=Gt([])).leaf=!1,at.height=st;var ht,pt,mt,xt,Nt=Math.ceil(ut/ct),St=Nt*Math.ceil(Math.sqrt(ct));for(qt(O,J,ot,St,this.compareMinX),ht=J;ht<=ot;ht+=St)for(qt(O,ht,mt=Math.min(ht+St-1,ot),Nt,this.compareMinY),pt=ht;pt<=mt;pt+=Nt)xt=Math.min(pt+Nt-1,mt),at.children.push(this._build(O,pt,xt,st-1));return Mt(at,this.toBBox),at},_chooseSubtree:function(O,J,ot,st){for(var at,ut,ct,ht,pt,mt,xt,Nt,St,jt;st.push(J),!J.leaf&&st.length-1!==ot;){for(xt=Nt=1/0,at=0,ut=J.children.length;at<ut;at++)pt=At(ct=J.children[at]),St=O,jt=ct,(mt=(Math.max(jt.maxX,St.maxX)-Math.min(jt.minX,St.minX))*(Math.max(jt.maxY,St.maxY)-Math.min(jt.minY,St.minY))-pt)<Nt?(Nt=mt,xt=pt<xt?pt:xt,ht=ct):mt===Nt&&pt<xt&&(xt=pt,ht=ct);J=ht||J.children[0]}return J},_insert:function(O,J,ot){var st=this.toBBox,at=ot?O:st(O),ut=[],ct=this._chooseSubtree(at,this.data,J,ut);for(ct.children.push(O),Ot(ct,at);J>=0&&ut[J].children.length>this._maxEntries;)this._split(ut,J),J--;this._adjustParentBBoxes(at,ut,J)},_split:function(O,J){var ot=O[J],st=ot.children.length,at=this._minEntries;this._chooseSplitAxis(ot,at,st);var ut=this._chooseSplitIndex(ot,at,st),ct=Gt(ot.children.splice(ut,ot.children.length-ut));ct.height=ot.height,ct.leaf=ot.leaf,Mt(ot,this.toBBox),Mt(ct,this.toBBox),J?O[J-1].children.push(ct):this._splitRoot(ot,ct)},_splitRoot:function(O,J){this.data=Gt([O,J]),this.data.height=O.height+1,this.data.leaf=!1,Mt(this.data,this.toBBox)},_chooseSplitIndex:function(O,J,ot){var st,at,ut,ct,ht,pt,mt,xt,Nt,St,jt,Wt,Ht,Zt;for(pt=mt=1/0,st=J;st<=ot-J;st++)Nt=at=Lt(O,0,st,this.toBBox),St=ut=Lt(O,st,ot,this.toBBox),void 0,void 0,void 0,void 0,jt=Math.max(Nt.minX,St.minX),Wt=Math.max(Nt.minY,St.minY),Ht=Math.min(Nt.maxX,St.maxX),Zt=Math.min(Nt.maxY,St.maxY),ct=Math.max(0,Ht-jt)*Math.max(0,Zt-Wt),ht=At(at)+At(ut),ct<pt?(pt=ct,xt=st,mt=ht<mt?ht:mt):ct===pt&&ht<mt&&(mt=ht,xt=st);return xt},_chooseSplitAxis:function(O,J,ot){var st=O.leaf?this.compareMinX:Rt,at=O.leaf?this.compareMinY:Tt;this._allDistMargin(O,J,ot,st)<this._allDistMargin(O,J,ot,at)&&O.children.sort(st)},_allDistMargin:function(O,J,ot,st){O.children.sort(st);var at,ut,ct=this.toBBox,ht=Lt(O,0,J,ct),pt=Lt(O,ot-J,ot,ct),mt=Dt(ht)+Dt(pt);for(at=J;at<ot-J;at++)ut=O.children[at],Ot(ht,O.leaf?ct(ut):ut),mt+=Dt(ht);for(at=ot-J-1;at>=J;at--)ut=O.children[at],Ot(pt,O.leaf?ct(ut):ut),mt+=Dt(pt);return mt},_adjustParentBBoxes:function(O,J,ot){for(var st=ot;st>=0;st--)Ot(J[st],O)},_condense:function(O){for(var J,ot=O.length-1;ot>=0;ot--)0===O[ot].children.length?ot>0?(J=O[ot-1].children).splice(J.indexOf(O[ot]),1):this.clear():Mt(O[ot],this.toBBox)},_initFormat:function(O){var J=["return a"," - b",";"];this.compareMinX=new Function("a","b",J.join(O[0])),this.compareMinY=new Function("a","b",J.join(O[1])),this.toBBox=new Function("a","return {minX: a"+O[0]+", minY: a"+O[1]+", maxX: a"+O[2]+", maxY: a"+O[3]+"};")}},Zt.default=Kt;var zt=function(O,J,ot){var st=O*J,at=Jt*O,ut=at-(at-O),ct=O-ut,ht=Jt*J,pt=ht-(ht-J),mt=J-pt,xt=ct*mt-(st-ut*pt-ct*pt-ut*mt);return ot?(ot[0]=xt,ot[1]=st,ot):[xt,st]},Jt=+(Math.pow(2,27)+1),Ut=function(O,J){var ot=0|O.length,st=0|J.length;if(1===ot&&1===st)return function(O,J){var ot=O+J,st=ot-O,at=O-(ot-st)+(J-st);return at?[at,ot]:[ot]}(O[0],J[0]);var at,ut,ct=new Array(ot+st),ht=0,pt=0,mt=0,xt=Math.abs,Nt=O[pt],St=xt(Nt),jt=J[mt],Wt=xt(jt);St<Wt?(ut=Nt,(pt+=1)<ot&&(St=xt(Nt=O[pt]))):(ut=jt,(mt+=1)<st&&(Wt=xt(jt=J[mt]))),pt<ot&&St<Wt||mt>=st?(at=Nt,(pt+=1)<ot&&(St=xt(Nt=O[pt]))):(at=jt,(mt+=1)<st&&(Wt=xt(jt=J[mt])));for(var Ht,Zt,Kt=at+ut,Jt=Kt-at,ee=ut-Jt,ne=ee,re=Kt;pt<ot&&mt<st;)St<Wt?(at=Nt,(pt+=1)<ot&&(St=xt(Nt=O[pt]))):(at=jt,(mt+=1)<st&&(Wt=xt(jt=J[mt]))),(ee=(ut=ne)-(Jt=(Kt=at+ut)-at))&&(ct[ht++]=ee),ne=re-((Ht=re+Kt)-(Zt=Ht-re))+(Kt-Zt),re=Ht;for(;pt<ot;)(ee=(ut=ne)-(Jt=(Kt=(at=Nt)+ut)-at))&&(ct[ht++]=ee),ne=re-((Ht=re+Kt)-(Zt=Ht-re))+(Kt-Zt),re=Ht,(pt+=1)<ot&&(Nt=O[pt]);for(;mt<st;)(ee=(ut=ne)-(Jt=(Kt=(at=jt)+ut)-at))&&(ct[ht++]=ee),ne=re-((Ht=re+Kt)-(Zt=Ht-re))+(Kt-Zt),re=Ht,(mt+=1)<st&&(jt=J[mt]);return ne&&(ct[ht++]=ne),re&&(ct[ht++]=re),ht||(ct[ht++]=0),ct.length=ht,ct},Vt=function(O,J,ot){var st=O+J,at=st-O,ut=J-at,ct=O-(st-at);return ot?(ot[0]=ct+ut,ot[1]=st,ot):[ct+ut,st]},Xt=function(O,J){var ot=O.length;if(1===ot){var st=zt(O[0],J);return st[0]?st:[st[1]]}var at=new Array(2*ot),ut=[.1,.1],ct=[.1,.1],ht=0;zt(O[0],J,ut),ut[0]&&(at[ht++]=ut[0]);for(var pt=1;pt<ot;++pt){zt(O[pt],J,ct);var mt=ut[1];Vt(mt,ct[0],ut),ut[0]&&(at[ht++]=ut[0]);var xt=ct[1],Nt=ut[1],St=xt+Nt,jt=Nt-(St-xt);ut[1]=St,jt&&(at[ht++]=jt)}return ut[1]&&(at[ht++]=ut[1]),0===ht&&(at[ht++]=0),at.length=ht,at},Yt=function(O,J){var ot=0|O.length,st=0|J.length;if(1===ot&&1===st)return function(O,J){var ot=O+J,st=ot-O,at=O-(ot-st)+(J-st);return at?[at,ot]:[ot]}(O[0],-J[0]);var at,ut,ct=new Array(ot+st),ht=0,pt=0,mt=0,xt=Math.abs,Nt=O[pt],St=xt(Nt),jt=-J[mt],Wt=xt(jt);St<Wt?(ut=Nt,(pt+=1)<ot&&(St=xt(Nt=O[pt]))):(ut=jt,(mt+=1)<st&&(Wt=xt(jt=-J[mt]))),pt<ot&&St<Wt||mt>=st?(at=Nt,(pt+=1)<ot&&(St=xt(Nt=O[pt]))):(at=jt,(mt+=1)<st&&(Wt=xt(jt=-J[mt])));for(var Ht,Zt,Kt=at+ut,Jt=Kt-at,ee=ut-Jt,ne=ee,re=Kt;pt<ot&&mt<st;)St<Wt?(at=Nt,(pt+=1)<ot&&(St=xt(Nt=O[pt]))):(at=jt,(mt+=1)<st&&(Wt=xt(jt=-J[mt]))),(ee=(ut=ne)-(Jt=(Kt=at+ut)-at))&&(ct[ht++]=ee),ne=re-((Ht=re+Kt)-(Zt=Ht-re))+(Kt-Zt),re=Ht;for(;pt<ot;)(ee=(ut=ne)-(Jt=(Kt=(at=Nt)+ut)-at))&&(ct[ht++]=ee),ne=re-((Ht=re+Kt)-(Zt=Ht-re))+(Kt-Zt),re=Ht,(pt+=1)<ot&&(Nt=O[pt]);for(;mt<st;)(ee=(ut=ne)-(Jt=(Kt=(at=jt)+ut)-at))&&(ct[ht++]=ee),ne=re-((Ht=re+Kt)-(Zt=Ht-re))+(Kt-Zt),re=Ht,(mt+=1)<st&&(jt=-J[mt]);return ne&&(ct[ht++]=ne),re&&(ct[ht++]=re),ht||(ct[ht++]=0),ct.length=ht,ct},ee=Bt((function(O){function e(O,J){for(var ot=new Array(O.length-1),st=1;st<O.length;++st)for(var at=ot[st-1]=new Array(O.length-1),ut=0,ct=0;ut<O.length;++ut)ut!==J&&(at[ct++]=O[st][ut]);return ot}function n(O){if(1===O.length)return O[0];if(2===O.length)return["sum(",O[0],",",O[1],")"].join("");var J=O.length>>1;return["sum(",n(O.slice(0,J)),",",n(O.slice(J)),")"].join("")}function r(O){if(2===O.length)return[["sum(prod(",O[0][0],",",O[1][1],"),prod(-",O[0][1],",",O[1][0],"))"].join("")];for(var J=[],ot=0;ot<O.length;++ot)J.push(["scale(",n(r(e(O,ot))),",",(st=ot,1&st?"-":""),O[0][ot],")"].join(""));return J;var st}function i(O){for(var J=[],ot=[],st=function(O){for(var J=new Array(O),ot=0;ot<O;++ot){J[ot]=new Array(O);for(var st=0;st<O;++st)J[ot][st]=["m",st,"[",O-ot-1,"]"].join("")}return J}(O),at=[],ut=0;ut<O;++ut)1&ut?ot.push.apply(ot,r(e(st,ut))):J.push.apply(J,r(e(st,ut))),at.push("m"+ut);var ct=n(J),ht=n(ot),pt="orientation"+O+"Exact",mt=["function ",pt,"(",at.join(),"){var p=",ct,",n=",ht,",d=sub(p,n);return d[d.length-1];};return ",pt].join("");return new Function("sum","prod","scale","sub",mt)(Ut,zt,Xt,Yt)}var J=i(3),ot=i(4),st=[function(){return 0},function(){return 0},function(O,J){return J[0]-O[0]},function(O,ot,st){var at,ut=(O[1]-st[1])*(ot[0]-st[0]),ct=(O[0]-st[0])*(ot[1]-st[1]),ht=ut-ct;if(ut>0){if(ct<=0)return ht;at=ut+ct}else{if(!(ut<0))return ht;if(ct>=0)return ht;at=-(ut+ct)}var pt=33306690738754716e-32*at;return ht>=pt||ht<=-pt?ht:J(O,ot,st)},function(O,J,st,at){var ut=O[0]-at[0],ct=J[0]-at[0],ht=st[0]-at[0],pt=O[1]-at[1],mt=J[1]-at[1],xt=st[1]-at[1],Nt=O[2]-at[2],St=J[2]-at[2],jt=st[2]-at[2],Wt=ct*xt,Ht=ht*mt,Zt=ht*pt,Kt=ut*xt,Jt=ut*mt,ee=ct*pt,ne=Nt*(Wt-Ht)+St*(Zt-Kt)+jt*(Jt-ee),re=7771561172376103e-31*((Math.abs(Wt)+Math.abs(Ht))*Math.abs(Nt)+(Math.abs(Zt)+Math.abs(Kt))*Math.abs(St)+(Math.abs(Jt)+Math.abs(ee))*Math.abs(jt));return ne>re||-ne>re?ne:ot(O,J,st,at)}];function u(O){var J=st[O.length];return J||(J=st[O.length]=i(O.length)),J.apply(void 0,O)}!function(){for(;st.length<=5;)st.push(i(st.length));for(var J=[],ot=["slow"],at=0;at<=5;++at)J.push("a"+at),ot.push("o"+at);var ut=["function getOrientation(",J.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(at=2;at<=5;++at)ut.push("case ",at,":return o",at,"(",J.slice(0,at).join(),");");ut.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),ot.push(ut.join(""));var ct=Function.apply(void 0,ot);for(O.exports=ct.apply(void 0,[u].concat(st)),at=0;at<=5;++at)O.exports[at]=st[at]}()})),ne=ee[3],re=Qt,De=Qt;function Qt(O,J){if(!(this instanceof Qt))return new Qt(O,J);if(this.data=O||[],this.length=this.data.length,this.compare=J||$t,this.length>0)for(var ot=(this.length>>1)-1;ot>=0;ot--)this._down(ot)}function $t(O,J){return O<J?-1:O>J?1:0}Qt.prototype={push:function(O){this.data.push(O),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var O=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),O}},peek:function(){return this.data[0]},_up:function(O){for(var J=this.data,ot=this.compare,st=J[O];O>0;){var at=O-1>>1,ut=J[at];if(ot(st,ut)>=0)break;J[O]=ut,O=at}J[O]=st},_down:function(O){for(var J=this.data,ot=this.compare,st=this.length>>1,at=J[O];O<st;){var ut=1+(O<<1),ct=ut+1,ht=J[ut];if(ct<this.length&&ot(J[ct],ht)<0&&(ut=ct,ht=J[ct]),ot(ht,at)>=0)break;J[O]=ht,O=ut}J[O]=at}},re.default=De;var te=function(O,J){for(var ot=O[0],st=O[1],at=!1,ut=0,ct=J.length-1;ut<J.length;ct=ut++){var ht=J[ut][0],pt=J[ut][1],mt=J[ct][0],xt=J[ct][1];pt>st!=xt>st&&ot<(mt-ht)*(st-pt)/(xt-pt)+ht&&(at=!at)}return at},qe=ee[3],Ge=ie,Be=ie;function ie(O,J,ot){J=Math.max(0,void 0===J?2:J),ot=ot||0;for(var st,at=function(O){for(var J=O[0],ot=O[0],st=O[0],at=O[0],ut=0;ut<O.length;ut++){var ct=O[ut];ct[0]<J[0]&&(J=ct),ct[0]>st[0]&&(st=ct),ct[1]<ot[1]&&(ot=ct),ct[1]>at[1]&&(at=ct)}var ht=[J,ot,st,at],pt=ht.slice();for(ut=0;ut<O.length;ut++)te(O[ut],ht)||pt.push(O[ut]);var mt=function(O){var J=O.length;if(J<3){for(var ot=new Array(J),st=0;st<J;++st)ot[st]=st;return 2===J&&O[0][0]===O[1][0]&&O[0][1]===O[1][1]?[0]:ot}var at=new Array(J);for(st=0;st<J;++st)at[st]=st;at.sort((function(J,ot){return O[J][0]-O[ot][0]||O[J][1]-O[ot][1]}));var ut=[at[0],at[1]],ct=[at[0],at[1]];for(st=2;st<J;++st){for(var ht=at[st],pt=O[ht],mt=ut.length;mt>1&&ne(O[ut[mt-2]],O[ut[mt-1]],pt)<=0;)mt-=1,ut.pop();for(ut.push(ht),mt=ct.length;mt>1&&ne(O[ct[mt-2]],O[ct[mt-1]],pt)>=0;)mt-=1,ct.pop();ct.push(ht)}ot=new Array(ct.length+ut.length-2);for(var xt=0,Nt=(st=0,ut.length);st<Nt;++st)ot[xt++]=ut[st];for(var St=ct.length-2;St>0;--St)ot[xt++]=ct[St];return ot}(pt),xt=[];for(ut=0;ut<mt.length;ut++)xt.push(pt[mt[ut]]);return xt}(O),ut=Zt(16,["[0]","[1]","[0]","[1]"]).load(O),ct=[],ht=0;ht<at.length;ht++){var pt=at[ht];ut.remove(pt),st=he(pt,st),ct.push(st)}var mt=Zt(16);for(ht=0;ht<ct.length;ht++)mt.insert(ce(ct[ht]));for(var xt=J*J,Nt=ot*ot;ct.length;){var St=ct.shift(),jt=St.p,Wt=St.next.p,Ht=pe(jt,Wt);if(!(Ht<Nt)){var Kt=Ht/xt;(pt=oe(ut,St.prev.p,jt,Wt,St.next.next.p,Kt,mt))&&Math.min(pe(pt,jt),pe(pt,Wt))<=Kt&&(ct.push(St),ct.push(he(pt,St)),ut.remove(pt),mt.remove(St),mt.insert(ce(St)),mt.insert(ce(St.next)))}}St=st;var Jt=[];do{Jt.push(St.p),St=St.next}while(St!==st);return Jt.push(St.p),Jt}function oe(O,J,ot,st,at,ut,ct){for(var ht=new re(null,se),pt=O.data;pt;){for(var mt=0;mt<pt.children.length;mt++){var xt=pt.children[mt],Nt=pt.leaf?fe(xt,ot,st):ae(ot,st,xt);Nt>ut||ht.push({node:xt,dist:Nt})}for(;ht.length&&!ht.peek().node.children;){var St=ht.pop(),jt=St.node,Wt=fe(jt,J,ot),Ht=fe(jt,st,at);if(St.dist<Wt&&St.dist<Ht&&le(ot,jt,ct)&&le(st,jt,ct))return jt}(pt=ht.pop())&&(pt=pt.node)}return null}function se(O,J){return O.dist-J.dist}function ae(O,J,ot){if(ue(O,ot)||ue(J,ot))return 0;var st=ge(O[0],O[1],J[0],J[1],ot.minX,ot.minY,ot.maxX,ot.minY);if(0===st)return 0;var at=ge(O[0],O[1],J[0],J[1],ot.minX,ot.minY,ot.minX,ot.maxY);if(0===at)return 0;var ut=ge(O[0],O[1],J[0],J[1],ot.maxX,ot.minY,ot.maxX,ot.maxY);if(0===ut)return 0;var ct=ge(O[0],O[1],J[0],J[1],ot.minX,ot.maxY,ot.maxX,ot.maxY);return 0===ct?0:Math.min(st,at,ut,ct)}function ue(O,J){return O[0]>=J.minX&&O[0]<=J.maxX&&O[1]>=J.minY&&O[1]<=J.maxY}function le(O,J,ot){for(var st,at,ut,ct,ht=Math.min(O[0],J[0]),pt=Math.min(O[1],J[1]),mt=Math.max(O[0],J[0]),xt=Math.max(O[1],J[1]),Nt=ot.search({minX:ht,minY:pt,maxX:mt,maxY:xt}),St=0;St<Nt.length;St++)if(st=Nt[St].p,at=Nt[St].next.p,ut=O,st!==(ct=J)&&at!==ut&&qe(st,at,ut)>0!=qe(st,at,ct)>0&&qe(ut,ct,st)>0!=qe(ut,ct,at)>0)return!1;return!0}function ce(O){var J=O.p,ot=O.next.p;return O.minX=Math.min(J[0],ot[0]),O.minY=Math.min(J[1],ot[1]),O.maxX=Math.max(J[0],ot[0]),O.maxY=Math.max(J[1],ot[1]),O}function he(O,J){var ot={p:O,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return J?(ot.next=J.next,ot.prev=J,J.next.prev=ot,J.next=ot):(ot.prev=ot,ot.next=ot),ot}function pe(O,J){var ot=O[0]-J[0],st=O[1]-J[1];return ot*ot+st*st}function fe(O,J,ot){var st=J[0],at=J[1],ut=ot[0]-st,ct=ot[1]-at;if(0!==ut||0!==ct){var ht=((O[0]-st)*ut+(O[1]-at)*ct)/(ut*ut+ct*ct);ht>1?(st=ot[0],at=ot[1]):ht>0&&(st+=ut*ht,at+=ct*ht)}return(ut=O[0]-st)*ut+(ct=O[1]-at)*ct}function ge(O,J,ot,st,at,ut,ct,ht){var pt,mt,xt,Nt,St=ot-O,jt=st-J,Wt=ct-at,Ht=ht-ut,Zt=O-at,Kt=J-ut,Jt=St*St+jt*jt,ee=St*Wt+jt*Ht,ne=Wt*Wt+Ht*Ht,re=St*Zt+jt*Kt,De=Wt*Zt+Ht*Kt,qe=Jt*ne-ee*ee,Ge=qe,Be=qe;0===qe?(mt=0,Ge=1,Nt=De,Be=ne):(Nt=Jt*De-ee*re,(mt=ee*De-ne*re)<0?(mt=0,Nt=De,Be=ne):mt>Ge&&(mt=Ge,Nt=De+ee,Be=ne)),Nt<0?(Nt=0,-re<0?mt=0:-re>Jt?mt=Ge:(mt=-re,Ge=Jt)):Nt>Be&&(Nt=Be,-re+ee<0?mt=0:-re+ee>Jt?mt=Ge:(mt=-re+ee,Ge=Jt));var pn=(1-(xt=0===Nt?0:Nt/Be))*at+xt*ct-((1-(pt=0===mt?0:mt/Ge))*O+pt*ot),wn=(1-xt)*ut+xt*ht-((1-pt)*J+pt*st);return pn*pn+wn*wn}function de(O,J){void 0===J&&(J={}),J.concavity=J.concavity||1/0;var ot=[];if(R(O,(function(O){ot.push([O[0],O[1]])})),!ot.length)return null;var st=Ge(ot,J.concavity);return st.length>3?l([st]):null}function ye(O,J,ot){if(void 0===ot&&(ot={}),!O)throw new Error("point is required");if(!J)throw new Error("polygon is required");var st=K(O),at=rt(J),ut=at.type,ct=J.bbox,ht=at.coordinates;if(ct&&!1===function(O,J){return J[0]<=O[0]&&J[1]<=O[1]&&J[2]>=O[0]&&J[3]>=O[1]}(st,ct))return!1;"Polygon"===ut&&(ht=[ht]);for(var pt=!1,mt=0;mt<ht.length&&!pt;mt++)if(ve(st,ht[mt][0],ot.ignoreBoundary)){for(var xt=!1,Nt=1;Nt<ht[mt].length&&!xt;)ve(st,ht[mt][Nt],!ot.ignoreBoundary)&&(xt=!0),Nt++;xt||(pt=!0)}return pt}function ve(O,J,ot){var st=!1;J[0][0]===J[J.length-1][0]&&J[0][1]===J[J.length-1][1]&&(J=J.slice(0,J.length-1));for(var at=0,ut=J.length-1;at<J.length;ut=at++){var ct=J[at][0],ht=J[at][1],pt=J[ut][0],mt=J[ut][1];if(O[1]*(ct-pt)+ht*(pt-O[0])+mt*(O[0]-ct)==0&&(ct-O[0])*(pt-O[0])<=0&&(ht-O[1])*(mt-O[1])<=0)return!ot;ht>O[1]!=mt>O[1]&&O[0]<(pt-ct)*(O[1]-ht)/(mt-ht)+ct&&(st=!st)}return st}function _e(O,J){var ot=[];return F(O,(function(O){var st=!1;if("Point"===O.geometry.type)q(J,(function(J){ye(O,J)&&(st=!0)})),st&&ot.push(O);else{if("MultiPoint"!==O.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var at=[];q(J,(function(J){R(O,(function(O){ye(O,J)&&(st=!0,at.push(O))}))})),st&&ot.push(d(at))}})),f(ot)}function me(O,J,ot){void 0===ot&&(ot={});var st=K(O),at=K(J),ut=I(at[1]-st[1]),ct=I(at[0]-st[0]),ht=I(st[1]),pt=I(at[1]),mt=Math.pow(Math.sin(ut/2),2)+Math.pow(Math.sin(ct/2),2)*Math.cos(ht)*Math.cos(pt);return m(2*Math.atan2(Math.sqrt(mt),Math.sqrt(1-mt)),ot.units)}function xe(O,J){var ot=!1;return f(function(O){if(O.length<3)return[];O.sort(be);for(var J,ot,st,at,ut,ct,ht=O.length-1,pt=O[ht].x,mt=O[0].x,xt=O[ht].y,Nt=xt;ht--;)O[ht].y<xt&&(xt=O[ht].y),O[ht].y>Nt&&(Nt=O[ht].y);var St,jt=mt-pt,Wt=Nt-xt,Ht=jt>Wt?jt:Wt,Zt=.5*(mt+pt),Kt=.5*(Nt+xt),Jt=[new Ee({__sentinel:!0,x:Zt-20*Ht,y:Kt-Ht},{__sentinel:!0,x:Zt,y:Kt+20*Ht},{__sentinel:!0,x:Zt+20*Ht,y:Kt-Ht})],ee=[],ne=[];for(ht=O.length;ht--;){for(ne.length=0,St=Jt.length;St--;)(jt=O[ht].x-Jt[St].x)>0&&jt*jt>Jt[St].r?(ee.push(Jt[St]),Jt.splice(St,1)):jt*jt+(Wt=O[ht].y-Jt[St].y)*Wt>Jt[St].r||(ne.push(Jt[St].a,Jt[St].b,Jt[St].b,Jt[St].c,Jt[St].c,Jt[St].a),Jt.splice(St,1));for(we(ne),St=ne.length;St;)ot=ne[--St],J=ne[--St],st=O[ht],at=ot.x-J.x,ut=ot.y-J.y,ct=2*(at*(st.y-ot.y)-ut*(st.x-ot.x)),Math.abs(ct)>1e-12&&Jt.push(new Ee(J,ot,st))}for(Array.prototype.push.apply(ee,Jt),ht=ee.length;ht--;)(ee[ht].a.__sentinel||ee[ht].b.__sentinel||ee[ht].c.__sentinel)&&ee.splice(ht,1);return ee}(O.features.map((function(O){var st={x:O.geometry.coordinates[0],y:O.geometry.coordinates[1]};return J?st.z=O.properties[J]:3===O.geometry.coordinates.length&&(ot=!0,st.z=O.geometry.coordinates[2]),st}))).map((function(O){var J=[O.a.x,O.a.y],st=[O.b.x,O.b.y],at=[O.c.x,O.c.y],ut={};return ot?(J.push(O.a.z),st.push(O.b.z),at.push(O.c.z)):ut={a:O.a.z,b:O.b.z,c:O.c.z},l([[J,st,at,J]],ut)})))}Ge.default=Be;var Ee=function(O,J,ot){this.a=O,this.b=J,this.c=ot;var st,at,ut=J.x-O.x,ct=J.y-O.y,ht=ot.x-O.x,pt=ot.y-O.y,mt=ut*(O.x+J.x)+ct*(O.y+J.y),xt=ht*(O.x+ot.x)+pt*(O.y+ot.y),Nt=2*(ut*(ot.y-J.y)-ct*(ot.x-J.x));this.x=(pt*mt-ct*xt)/Nt,this.y=(ut*xt-ht*mt)/Nt,st=this.x-O.x,at=this.y-O.y,this.r=st*st+at*at};function be(O,J){return J.x-O.x}function we(O){var J,ot,st,at,ut,ct=O.length;t:for(;ct;)for(ot=O[--ct],J=O[--ct],st=ct;st;)if(ut=O[--st],J===(at=O[--st])&&ot===ut||J===ut&&ot===at){O.splice(ct,2),O.splice(st,2),ct-=2;continue t}}function Ie(O){if(!O)throw new Error("geojson is required");switch(O.type){case"Feature":return Ne(O);case"FeatureCollection":return function(O){var J={type:"FeatureCollection"};return Object.keys(O).forEach((function(ot){switch(ot){case"type":case"features":return;default:J[ot]=O[ot]}})),J.features=O.features.map((function(O){return Ne(O)})),J}(O);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ce(O);default:throw new Error("unknown GeoJSON type")}}function Ne(O){var J={type:"Feature"};return Object.keys(O).forEach((function(ot){switch(ot){case"type":case"properties":case"geometry":return;default:J[ot]=O[ot]}})),J.properties=Se(O.properties),J.geometry=Ce(O.geometry),J}function Se(O){var J={};return O?(Object.keys(O).forEach((function(ot){var st=O[ot];"object"==typeof st?null===st?J[ot]=null:Array.isArray(st)?J[ot]=st.map((function(O){return O})):J[ot]=Se(st):J[ot]=st})),J):J}function Ce(O){var J={type:O.type};return O.bbox&&(J.bbox=O.bbox),"GeometryCollection"===O.type?(J.geometries=O.geometries.map((function(O){return Ce(O)})),J):(J.coordinates=Pe(O.coordinates),J)}function Pe(O){var J=O;return"object"!=typeof J[0]?J.slice():J.map((function(O){return Pe(O)}))}function Le(O){return O[0].toString()+","+O[1].toString()}function Oe(O){return O}function Re(O,J){var ot=function(O){if(null==O)return Oe;var J,ot,st=O.scale[0],at=O.scale[1],ut=O.translate[0],ct=O.translate[1];return function(O,ht){ht||(J=ot=0);var pt=2,mt=O.length,xt=new Array(mt);for(xt[0]=(J+=O[0])*st+ut,xt[1]=(ot+=O[1])*at+ct;pt<mt;)xt[pt]=O[pt],++pt;return xt}}(O.transform),st=O.arcs;function i(O,J){J.length&&J.pop();for(var at=st[O<0?~O:O],ut=0,ct=at.length;ut<ct;++ut)J.push(ot(at[ut],ut));O<0&&function(O,J){for(var ot,st=O.length,at=st-J;at<--st;)ot=O[at],O[at++]=O[st],O[st]=ot}(J,ct)}function o(O){return ot(O)}function s(O){for(var J=[],ot=0,st=O.length;ot<st;++ot)i(O[ot],J);return J.length<2&&J.push(J[0]),J}function a(O){for(var J=s(O);J.length<4;)J.push(J[0]);return J}function u(O){return O.map(a)}return function t(O){var J,ot=O.type;switch(ot){case"GeometryCollection":return{type:ot,geometries:O.geometries.map(t)};case"Point":J=o(O.coordinates);break;case"MultiPoint":J=O.coordinates.map(o);break;case"LineString":J=s(O.arcs);break;case"MultiLineString":J=O.arcs.map(s);break;case"Polygon":J=u(O.arcs);break;case"MultiPolygon":J=O.arcs.map(u);break;default:return null}return{type:ot,coordinates:J}}(J)}function Ae(O,J){var ot={},st=[],at=[];function o(O){O.forEach((function(J){J.forEach((function(J){(ot[J=J<0?~J:J]||(ot[J]=[])).push(O)}))})),st.push(O)}function s(J){return function(O){for(var J,ot=-1,st=O.length,at=O[st-1],ut=0;++ot<st;)J=at,at=O[ot],ut+=J[0]*at[1]-J[1]*at[0];return Math.abs(ut)}(Re(O,{type:"Polygon",arcs:[J]}).coordinates[0])}return J.forEach((function t(O){switch(O.type){case"GeometryCollection":O.geometries.forEach(t);break;case"Polygon":o(O.arcs);break;case"MultiPolygon":O.arcs.forEach(o)}})),st.forEach((function(O){if(!O._){var J=[],st=[O];for(O._=1,at.push(J);O=st.pop();)J.push(O),O.forEach((function(O){O.forEach((function(O){ot[O<0?~O:O].forEach((function(O){O._||(O._=1,st.push(O))}))}))}))}})),st.forEach((function(O){delete O._})),{type:"MultiPolygon",arcs:at.map((function(J){var st,at=[];if(J.forEach((function(O){O.forEach((function(O){O.forEach((function(O){ot[O<0?~O:O].length<2&&at.push(O)}))}))})),(st=(at=function Te(O,J){var ot={},st={},at={},ut=[],ct=-1;function a(O,J){for(var st in O){var at=O[st];delete J[at.start],delete at.start,delete at.end,at.forEach((function(O){ot[O<0?~O:O]=1})),ut.push(at)}}return J.forEach((function(ot,st){var at,ut=O.arcs[ot<0?~ot:ot];ut.length<3&&!ut[1][0]&&!ut[1][1]&&(at=J[++ct],J[ct]=ot,J[st]=at)})),J.forEach((function(J){var ot,ut,ct=function(J){var ot,st=O.arcs[J<0?~J:J],at=st[0];return O.transform?(ot=[0,0],st.forEach((function(O){ot[0]+=O[0],ot[1]+=O[1]}))):ot=st[st.length-1],J<0?[ot,at]:[at,ot]}(J),ht=ct[0],pt=ct[1];if(ot=at[ht])if(delete at[ot.end],ot.push(J),ot.end=pt,ut=st[pt]){delete st[ut.start];var mt=ut===ot?ot:ot.concat(ut);st[mt.start=ot.start]=at[mt.end=ut.end]=mt}else st[ot.start]=at[ot.end]=ot;else if(ot=st[pt])if(delete st[ot.start],ot.unshift(J),ot.start=ht,ut=at[ht]){delete at[ut.end];var xt=ut===ot?ot:ut.concat(ot);st[xt.start=ut.start]=at[xt.end=ot.end]=xt}else st[ot.start]=at[ot.end]=ot;else st[(ot=[J]).start=ht]=at[ot.end=pt]=ot})),a(at,st),a(st,at),J.forEach((function(O){ot[O<0?~O:O]||ut.push([O])})),ut}(O,at)).length)>1)for(var ut,ct,ht=1,pt=s(at[0]);ht<st;++ht)(ut=s(at[ht]))>pt&&(ct=at[0],at[0]=at[ht],at[ht]=ct,pt=ut);return at})).filter((function(O){return O.length>0}))}}var pn=Object.prototype.hasOwnProperty;function Fe(O,J,ot,st,at,ut){3===arguments.length&&(st=ut=Array,at=null);for(var ct=new st(O=1<<Math.max(4,Math.ceil(Math.log(O)/Math.LN2))),ht=new ut(O),pt=O-1,mt=0;mt<O;++mt)ct[mt]=at;return{set:function c(st,ut){for(var mt=J(st)&pt,xt=ct[mt],Nt=0;xt!=at;){if(ot(xt,st))return ht[mt]=ut;if(++Nt>=O)throw new Error("full hashmap");xt=ct[mt=mt+1&pt]}return ct[mt]=st,ht[mt]=ut,ut},maybeSet:function h(st,ut){for(var mt=J(st)&pt,xt=ct[mt],Nt=0;xt!=at;){if(ot(xt,st))return ht[mt];if(++Nt>=O)throw new Error("full hashmap");xt=ct[mt=mt+1&pt]}return ct[mt]=st,ht[mt]=ut,ut},get:function p(st,ut){for(var mt=J(st)&pt,xt=ct[mt],Nt=0;xt!=at;){if(ot(xt,st))return ht[mt];if(++Nt>=O)break;xt=ct[mt=mt+1&pt]}return ut},keys:function f(){for(var O=[],J=0,ot=ct.length;J<ot;++J){var st=ct[J];st!=at&&O.push(st)}return O}}}function ke(O,J){return O[0]===J[0]&&O[1]===J[1]}var wn=new ArrayBuffer(16),In=new Float64Array(wn),Kn=new Uint32Array(wn);function ze(O){In[0]=O[0],In[1]=O[1];var J=Kn[0]^Kn[1];return 2147483647&(J<<5^J>>7^Kn[2]^Kn[3])}function Ue(O,J,ot,st){Ve(O,J,ot),Ve(O,J,J+st),Ve(O,J+st,ot)}function Ve(O,J,ot){for(var st,at=J+(ot---J>>1);J<at;++J,--ot)st=O[J],O[J]=O[ot],O[ot]=st}function Ye(O){var J={type:"GeometryCollection",geometries:O.features.map(He)};return null!=O.bbox&&(J.bbox=O.bbox),J}function He(O){var J,ot=We(O.geometry);for(J in null!=O.id&&(ot.id=O.id),null!=O.bbox&&(ot.bbox=O.bbox),O.properties){ot.properties=O.properties;break}return ot}function We(O){if(null==O)return{type:null};var J="GeometryCollection"===O.type?{type:"GeometryCollection",geometries:O.geometries.map(We)}:"Point"===O.type||"MultiPoint"===O.type?{type:O.type,coordinates:O.coordinates}:{type:O.type,arcs:O.coordinates};return null!=O.bbox&&(J.bbox=O.bbox),J}function Je(O,J){var ot=function(O){var J=1/0,ot=1/0,st=-1/0,at=-1/0;function o(O){null!=O&&pn.call(ut,O.type)&&ut[O.type](O)}var ut={GeometryCollection:function(O){O.geometries.forEach(o)},Point:function(O){a(O.coordinates)},MultiPoint:function(O){O.coordinates.forEach(a)},LineString:function(O){u(O.arcs)},MultiLineString:function(O){O.arcs.forEach(u)},Polygon:function(O){O.arcs.forEach(u)},MultiPolygon:function(O){O.arcs.forEach(l)}};function a(O){var ut=O[0],ct=O[1];ut<J&&(J=ut),ut>st&&(st=ut),ct<ot&&(ot=ct),ct>at&&(at=ct)}function u(O){O.forEach(a)}function l(O){O.forEach(u)}for(var ct in O)o(O[ct]);return st>=J&&at>=ot?[J,ot,st,at]:void 0}(O=function Xe(O){var J,ot,st={};for(J in O)st[J]=null==(ot=O[J])?{type:null}:("FeatureCollection"===ot.type?Ye:"Feature"===ot.type?He:We)(ot);return st}(O)),st=J>0&&ot&&function(O,J,ot){var st=J[0],at=J[1],ut=J[2],ct=J[3],ht=ut-st?(ot-1)/(ut-st):1,pt=ct-at?(ot-1)/(ct-at):1;function l(O){return[Math.round((O[0]-st)*ht),Math.round((O[1]-at)*pt)]}function c(O,J){for(var ot,ut,ct,mt,xt,Nt=-1,St=0,jt=O.length,Wt=new Array(jt);++Nt<jt;)ot=O[Nt],mt=Math.round((ot[0]-st)*ht),xt=Math.round((ot[1]-at)*pt),mt===ut&&xt===ct||(Wt[St++]=[ut=mt,ct=xt]);for(Wt.length=St;St<J;)St=Wt.push([Wt[0][0],Wt[0][1]]);return Wt}function h(O){return c(O,2)}function p(O){return c(O,4)}function f(O){return O.map(p)}function g(O){null!=O&&pn.call(mt,O.type)&&mt[O.type](O)}var mt={GeometryCollection:function(O){O.geometries.forEach(g)},Point:function(O){O.coordinates=l(O.coordinates)},MultiPoint:function(O){O.coordinates=O.coordinates.map(l)},LineString:function(O){O.arcs=h(O.arcs)},MultiLineString:function(O){O.arcs=O.arcs.map(h)},Polygon:function(O){O.arcs=f(O.arcs)},MultiPolygon:function(O){O.arcs=O.arcs.map(f)}};for(var xt in O)g(O[xt]);return{scale:[1/ht,1/pt],translate:[st,at]}}(O,ot,J),at=function(O){var J,ot,st,at,ut=O.coordinates,ct=O.lines,ht=O.rings,pt=ct.length+ht.length;for(delete O.lines,delete O.rings,st=0,at=ct.length;st<at;++st)for(J=ct[st];J=J.next;)++pt;for(st=0,at=ht.length;st<at;++st)for(ot=ht[st];ot=ot.next;)++pt;var mt=Fe(2*pt*1.4,ze,ke),xt=O.arcs=[];for(st=0,at=ct.length;st<at;++st){J=ct[st];do{h(J)}while(J=J.next)}for(st=0,at=ht.length;st<at;++st)if((ot=ht[st]).next)do{h(ot)}while(ot=ot.next);else p(ot);function h(O){var J,ot,st,at,ct,ht,pt,Nt;if(st=mt.get(J=ut[O[0]]))for(pt=0,Nt=st.length;pt<Nt;++pt)if(f(at=st[pt],O))return O[0]=at[0],void(O[1]=at[1]);if(ct=mt.get(ot=ut[O[1]]))for(pt=0,Nt=ct.length;pt<Nt;++pt)if(g(ht=ct[pt],O))return O[1]=ht[0],void(O[0]=ht[1]);st?st.push(O):mt.set(J,[O]),ct?ct.push(O):mt.set(ot,[O]),xt.push(O)}function p(O){var J,ot,st,at,ct;if(ot=mt.get(ut[O[0]]))for(at=0,ct=ot.length;at<ct;++at){if(d(st=ot[at],O))return O[0]=st[0],void(O[1]=st[1]);if(y(st,O))return O[0]=st[1],void(O[1]=st[0])}if(ot=mt.get(J=ut[O[0]+v(O)]))for(at=0,ct=ot.length;at<ct;++at){if(d(st=ot[at],O))return O[0]=st[0],void(O[1]=st[1]);if(y(st,O))return O[0]=st[1],void(O[1]=st[0])}ot?ot.push(O):mt.set(J,[O]),xt.push(O)}function f(O,J){var ot=O[0],st=J[0],at=O[1];if(ot-at!=st-J[1])return!1;for(;ot<=at;++ot,++st)if(!ke(ut[ot],ut[st]))return!1;return!0}function g(O,J){var ot=O[0],st=J[0],at=O[1],ct=J[1];if(ot-at!=st-ct)return!1;for(;ot<=at;++ot,--ct)if(!ke(ut[ot],ut[ct]))return!1;return!0}function d(O,J){var ot=O[0],st=J[0],at=O[1]-ot;if(at!==J[1]-st)return!1;for(var ct=v(O),ht=v(J),pt=0;pt<at;++pt)if(!ke(ut[ot+(pt+ct)%at],ut[st+(pt+ht)%at]))return!1;return!0}function y(O,J){var ot=O[0],st=J[0],at=O[1],ct=J[1],ht=at-ot;if(ht!==ct-st)return!1;for(var pt=v(O),mt=ht-v(J),xt=0;xt<ht;++xt)if(!ke(ut[ot+(xt+pt)%ht],ut[ct-(xt+mt)%ht]))return!1;return!0}function v(O){for(var J=O[0],ot=O[1],st=J,at=st,ct=ut[st];++st<ot;){var ht=ut[st];(ht[0]<ct[0]||ht[0]===ct[0]&&ht[1]<ct[1])&&(at=st,ct=ht)}return at-J}return O}(function(O){var J,ot,st,at=function je(O){var J,ot,st,at,ut=O.coordinates,ct=O.lines,ht=O.rings,pt=function(){for(var O=Fe(1.4*ut.length,E,b,Int32Array,-1,Int32Array),J=new Int32Array(ut.length),ot=0,st=ut.length;ot<st;++ot)J[ot]=O.maybeSet(ot,ot);return J}(),mt=new Int32Array(ut.length),xt=new Int32Array(ut.length),Nt=new Int32Array(ut.length),St=new Int8Array(ut.length),jt=0;for(J=0,ot=ut.length;J<ot;++J)mt[J]=xt[J]=Nt[J]=-1;for(J=0,ot=ct.length;J<ot;++J){var Wt=ct[J],Ht=Wt[0],Zt=Wt[1];for(st=pt[Ht],at=pt[++Ht],++jt,St[st]=1;++Ht<=Zt;)x(J,st,st=at,at=pt[Ht]);++jt,St[at]=1}for(J=0,ot=ut.length;J<ot;++J)mt[J]=-1;for(J=0,ot=ht.length;J<ot;++J){var Kt=ht[J],Jt=Kt[0]+1,ee=Kt[1];for(x(J,pt[ee-1],st=pt[Jt-1],at=pt[Jt]);++Jt<=ee;)x(J,st,st=at,at=pt[Jt])}function x(O,J,ot,st){if(mt[ot]!==O){mt[ot]=O;var at=xt[ot];if(at>=0){var ut=Nt[ot];at===J&&ut===st||at===st&&ut===J||(++jt,St[ot]=1)}else xt[ot]=J,Nt[ot]=st}}function E(O){return ze(ut[O])}function b(O,J){return ke(ut[O],ut[J])}mt=xt=Nt=null;var ne,re=function(O,J,ot,st,at){3===arguments.length&&(st=Array,at=null);for(var ut=new st(O=1<<Math.max(4,Math.ceil(Math.log(O)/Math.LN2))),ct=O-1,ht=0;ht<O;++ht)ut[ht]=at;return{add:function u(st){for(var ht=J(st)&ct,pt=ut[ht],mt=0;pt!=at;){if(ot(pt,st))return!0;if(++mt>=O)throw new Error("full hashset");pt=ut[ht=ht+1&ct]}return ut[ht]=st,!0},has:function l(st){for(var ht=J(st)&ct,pt=ut[ht],mt=0;pt!=at;){if(ot(pt,st))return!0;if(++mt>=O)break;pt=ut[ht=ht+1&ct]}return!1},values:function c(){for(var O=[],J=0,ot=ut.length;J<ot;++J){var st=ut[J];st!=at&&O.push(st)}return O}}}(1.4*jt,ze,ke);for(J=0,ot=ut.length;J<ot;++J)St[ne=pt[J]]&&re.add(ut[ne]);return re}(O),ut=O.coordinates,ct=O.lines,ht=O.rings;for(ot=0,st=ct.length;ot<st;++ot)for(var pt=ct[ot],mt=pt[0],xt=pt[1];++mt<xt;)at.has(ut[mt])&&(J={0:mt,1:pt[1]},pt[1]=mt,pt=pt.next=J);for(ot=0,st=ht.length;ot<st;++ot)for(var Nt=ht[ot],St=Nt[0],jt=St,Wt=Nt[1],Ht=at.has(ut[St]);++jt<Wt;)at.has(ut[jt])&&(Ht?(J={0:jt,1:Nt[1]},Nt[1]=jt,Nt=Nt.next=J):(Ue(ut,St,Wt,Wt-jt),ut[Wt]=ut[St],Ht=!0,jt=St));return O}(function(O){var J=-1,ot=[],st=[],at=[];function o(O){O&&pn.call(ut,O.type)&&ut[O.type](O)}var ut={GeometryCollection:function(O){O.geometries.forEach(o)},LineString:function(O){O.arcs=a(O.arcs)},MultiLineString:function(O){O.arcs=O.arcs.map(a)},Polygon:function(O){O.arcs=O.arcs.map(u)},MultiPolygon:function(O){O.arcs=O.arcs.map(l)}};function a(O){for(var st=0,ut=O.length;st<ut;++st)at[++J]=O[st];var ct={0:J-ut+1,1:J};return ot.push(ct),ct}function u(O){for(var ot=0,ut=O.length;ot<ut;++ot)at[++J]=O[ot];var ct={0:J-ut+1,1:J};return st.push(ct),ct}function l(O){return O.map(u)}for(var ct in O)o(O[ct]);return{type:"Topology",coordinates:at,lines:ot,rings:st,objects:O}}(O))),ut=at.coordinates,ct=Fe(1.4*at.arcs.length,Ze,Ke);function a(O){O&&pn.call(ht,O.type)&&ht[O.type](O)}O=at.objects,at.bbox=ot,at.arcs=at.arcs.map((function(O,J){return ct.set(O,J),ut.slice(O[0],O[1]+1)})),delete at.coordinates,ut=null;var ht={GeometryCollection:function(O){O.geometries.forEach(a)},LineString:function(O){O.arcs=l(O.arcs)},MultiLineString:function(O){O.arcs=O.arcs.map(l)},Polygon:function(O){O.arcs=O.arcs.map(l)},MultiPolygon:function(O){O.arcs=O.arcs.map(c)}};function l(O){var J=[];do{var ot=ct.get(O);J.push(O[0]<O[1]?ot:~ot)}while(O=O.next);return J}function c(O){return O.map(l)}for(var pt in O)a(O[pt]);return st&&(at.transform=st,at.arcs=function(O){for(var J=-1,ot=O.length;++J<ot;){for(var st,at,ut=O[J],ct=0,ht=1,pt=ut.length,mt=ut[0],xt=mt[0],Nt=mt[1];++ct<pt;)st=(mt=ut[ct])[0],at=mt[1],st===xt&&at===Nt||(ut[ht++]=[st-xt,at-Nt],xt=st,Nt=at);1===ht&&(ut[ht++]=[0,0]),ut.length=ht}return O}(at.arcs)),at}function Ze(O){var J,ot=O[0],st=O[1];return st<ot&&(J=ot,ot=st,st=J),ot+31*st}function Ke(O,J){var ot,st=O[0],at=O[1],ut=J[0],ct=J[1];return at<st&&(ot=st,st=at,at=ot),ct<ut&&(ot=ut,ut=ct,ct=ot),st===ut&&at===ct}function Qe(O,J){if(void 0===J&&(J={}),"FeatureCollection"!==it(O))throw new Error("geojson must be a FeatureCollection");if(!O.features.length)throw new Error("geojson is empty");!1!==J.mutate&&void 0!==J.mutate||(O=Ie(O));var ot=[];z(O,(function(O){ot.push(O.geometry)}));var st=Je({geoms:v(ot).geometry});return function(O){return Re(O,Ae.apply(this,arguments))}(st,st.objects.geoms.geometries)}function $e(O,J){if(void 0===J&&(J={}),!P(J=J||{}))throw new Error("options is invalid");var ot=J.mutate;if("FeatureCollection"!==it(O))throw new Error("geojson must be a FeatureCollection");if(!O.features.length)throw new Error("geojson is empty");!1!==ot&&void 0!==ot||(O=Ie(O));var st=function(O){var J={};z(O,(function(O){J[O.geometry.type]=!0}));var ot=Object.keys(J);return 1===ot.length?ot[0]:null}(O);if(!st)throw new Error("geojson must be homogenous");var at=O;switch(st){case"LineString":return function Me(O,J){if(void 0===J&&(J={}),!P(J=J||{}))throw new Error("options is invalid");var ot=J.mutate;if("FeatureCollection"!==it(O))throw new Error("geojson must be a FeatureCollection");if(!O.features.length)throw new Error("geojson is empty");!1!==ot&&void 0!==ot||(O=Ie(O));var st=[],at=Y(O,(function(O,J){var ot=function(O,J){var ot,st=O.geometry.coordinates,at=J.geometry.coordinates,ut=Le(st[0]),ct=Le(st[st.length-1]),ht=Le(at[0]),pt=Le(at[at.length-1]);if(ut===pt)ot=at.concat(st.slice(1));else if(ht===ct)ot=st.concat(at.slice(1));else if(ut===ht)ot=st.slice(1).reverse().concat(at);else{if(ct!==pt)return null;ot=st.concat(at.reverse().slice(1))}return h(ot)}(O,J);return ot||(st.push(O),J)}));return at&&st.push(at),st.length?1===st.length?st[0]:g(st.map((function(O){return O.coordinates}))):null}(at,J);case"Polygon":return Qe(at,J);default:throw new Error(st+" is not supported")}}function tn(O,J){void 0===J&&(J={});var ot="object"==typeof J?J.mutate:J;if(!O)throw new Error("geojson is required");var st=it(O),at=[];switch(st){case"LineString":at=en(O);break;case"MultiLineString":case"Polygon":Q(O).forEach((function(O){at.push(en(O))}));break;case"MultiPolygon":Q(O).forEach((function(O){var J=[];O.forEach((function(O){J.push(en(O))})),at.push(J)}));break;case"Point":return O;case"MultiPoint":var ut={};Q(O).forEach((function(O){var J=O.join("-");Object.prototype.hasOwnProperty.call(ut,J)||(at.push(O),ut[J]=!0)}));break;default:throw new Error(st+" geometry not supported")}return O.coordinates?!0===ot?(O.coordinates=at,O):{type:st,coordinates:at}:!0===ot?(O.geometry.coordinates=at,O):o({type:st,coordinates:at},O.properties,{bbox:O.bbox,id:O.id})}function en(O){var J=Q(O);if(2===J.length&&!nn(J[0],J[1]))return J;var ot=[],st=J.length-1,at=ot.length;ot.push(J[0]);for(var ut=1;ut<st;ut++){var ct=ot[ot.length-1];J[ut][0]===ct[0]&&J[ut][1]===ct[1]||(ot.push(J[ut]),(at=ot.length)>2&&rn(ot[at-3],ot[at-1],ot[at-2])&&ot.splice(ot.length-2,1))}if(ot.push(J[J.length-1]),at=ot.length,nn(J[0],J[J.length-1])&&at<4)throw new Error("invalid polygon");return rn(ot[at-3],ot[at-1],ot[at-2])&&ot.splice(ot.length-2,1),ot}function nn(O,J){return O[0]===J[0]&&O[1]===J[1]}function rn(O,J,ot){var st=ot[0],at=ot[1],ut=O[0],ct=O[1],ht=J[0],pt=J[1],mt=ht-ut,xt=pt-ct;return 0==(st-ut)*xt-(at-ct)*mt&&(Math.abs(mt)>=Math.abs(xt)?mt>0?ut<=st&&st<=ht:ht<=st&&st<=ut:xt>0?ct<=at&&at<=pt:pt<=at&&at<=ct)}function on(O,J,ot){var st=J.x,at=J.y,ut=ot.x-st,ct=ot.y-at;if(0!==ut||0!==ct){var ht=((O.x-st)*ut+(O.y-at)*ct)/(ut*ut+ct*ct);ht>1?(st=ot.x,at=ot.y):ht>0&&(st+=ut*ht,at+=ct*ht)}return(ut=O.x-st)*ut+(ct=O.y-at)*ct}function sn(O,J,ot,st,at){for(var ut,ct=st,ht=J+1;ht<ot;ht++){var pt=on(O[ht],O[J],O[ot]);pt>ct&&(ut=ht,ct=pt)}ct>st&&(ut-J>1&&sn(O,J,ut,st,at),at.push(O[ut]),ot-ut>1&&sn(O,ut,ot,st,at))}function an(O,J){var ot=O.length-1,st=[O[0]];return sn(O,0,ot,J,st),st.push(O[ot]),st}function un(O,J,ot){if(O.length<=2)return O;var st=void 0!==J?J*J:1;return an(O=ot?O:function(O,J){for(var ot,st,at,ut,ct,ht=O[0],pt=[ht],mt=1,xt=O.length;mt<xt;mt++)at=ht,void 0,void 0,(ut=(st=ot=O[mt]).x-at.x)*ut+(ct=st.y-at.y)*ct>J&&(pt.push(ot),ht=ot);return ht!==ot&&pt.push(ot),pt}(O,st),st)}function ln(O,J,ot){return un(O.map((function(O){return{x:O[0],y:O[1],z:O[2]}})),J,ot).map((function(O){return O.z?[O.x,O.y,O.z]:[O.x,O.y]}))}function cn(O,J,ot){return O.map((function(O){var st=O.map((function(O){return{x:O[0],y:O[1]}}));if(st.length<4)throw new Error("invalid polygon");for(var at=un(st,J,ot).map((function(O){return[O.x,O.y]}));!hn(at);)at=un(st,J-=.01*J,ot).map((function(O){return[O.x,O.y]}));return at[at.length-1][0]===at[0][0]&&at[at.length-1][1]===at[0][1]||at.push(at[0]),at}))}function hn(O){return!(O.length<3||3===O.length&&O[2][0]===O[0][0]&&O[2][1]===O[0][1])}var or=function(){function t(O){this.points=O.points||[],this.duration=O.duration||1e4,this.sharpness=O.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=O.stepLength||60,this.length=this.points.length,this.delay=0;for(var J=0;J<this.length;J++)this.points[J].z=this.points[J].z||0;for(J=0;J<this.length-1;J++){var ot=this.points[J],st=this.points[J+1];this.centers.push({x:(ot.x+st.x)/2,y:(ot.y+st.y)/2,z:(ot.z+st.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),J=0;J<this.centers.length-1;J++){var at=this.points[J+1].x-(this.centers[J].x+this.centers[J+1].x)/2,ut=this.points[J+1].y-(this.centers[J].y+this.centers[J+1].y)/2,ct=this.points[J+1].z-(this.centers[J].y+this.centers[J+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[J+1].x+this.sharpness*(this.centers[J].x+at),y:(1-this.sharpness)*this.points[J+1].y+this.sharpness*(this.centers[J].y+ut),z:(1-this.sharpness)*this.points[J+1].z+this.sharpness*(this.centers[J].z+ct)},{x:(1-this.sharpness)*this.points[J+1].x+this.sharpness*(this.centers[J+1].x+at),y:(1-this.sharpness)*this.points[J+1].y+this.sharpness*(this.centers[J+1].y+ut),z:(1-this.sharpness)*this.points[J+1].z+this.sharpness*(this.centers[J+1].z+ct)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(O){var J=[],ot=this.pos(0);J.push(0);for(var st=0;st<this.duration;st+=10){var at=this.pos(st);Math.sqrt((at.x-ot.x)*(at.x-ot.x)+(at.y-ot.y)*(at.y-ot.y)+(at.z-ot.z)*(at.z-ot.z))>O&&(J.push(st),ot=at)}return J},t.prototype.vector=function(O){var J=this.pos(O+10),ot=this.pos(O-10);return{angle:180*Math.atan2(J.y-ot.y,J.x-ot.x)/3.14,speed:Math.sqrt((ot.x-J.x)*(ot.x-J.x)+(ot.y-J.y)*(ot.y-J.y)+(ot.z-J.z)*(ot.z-J.z))}},t.prototype.pos=function(O){var J=O-this.delay;J<0&&(J=0),J>this.duration&&(J=this.duration-1);var ot=J/this.duration;if(ot>=1)return this.points[this.length-1];var st=Math.floor((this.points.length-1)*ot);return function(O,J,ot,st,at){var ut=function(O){var J=O*O;return[J*O,3*J*(1-O),3*O*(1-O)*(1-O),(1-O)*(1-O)*(1-O)]}(O);return{x:at.x*ut[0]+st.x*ut[1]+ot.x*ut[2]+J.x*ut[3],y:at.y*ut[0]+st.y*ut[1]+ot.y*ut[2]+J.y*ut[3],z:at.z*ut[0]+st.z*ut[1]+ot.z*ut[2]+J.z*ut[3]}}((this.length-1)*ot-st,this.points[st],this.controls[st][1],this.controls[st+1][0],this.points[st+1])},t}();function fn(O,J){void 0===J&&(J={});for(var ot=J.resolution||1e4,st=J.sharpness||.85,at=[],ut=rt(O).coordinates.map((function(O){return{x:O[0],y:O[1]}})),ct=new or({duration:ot,points:ut,sharpness:st}),a=function(O){var J=ct.pos(O);Math.floor(O/100)%2==0&&at.push([J.x,J.y])},ht=0;ht<ct.duration;ht+=10)a(ht);return a(ct.duration),h(at,J.properties)}function gn(O,J){void 0===J&&(J={});var ot=Number(O[0]),st=Number(O[1]),at=Number(O[2]),ut=Number(O[3]);if(6===O.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var ct=[ot,st];return l([[ct,[at,st],[at,ut],[ot,ut],ct]],J.properties,{bbox:O,id:J.id})}function dn(O){return gn(Z(O))}function yn(O){var J=O[0],ot=O[1],st=O[2],at=O[3];if(me(O.slice(0,2),[st,ot])>=me(O.slice(0,2),[J,at])){var ut=(ot+at)/2;return[J,ut-(st-J)/2,st,ut+(st-J)/2]}var ct=(J+st)/2;return[ct-(at-ot)/2,ot,ct+(at-ot)/2,at]}function vn(O,J,ot,st){void 0===st&&(st={});var at=K(O),ut=I(at[0]),ct=I(at[1]),ht=I(ot),pt=x(J,st.units),mt=Math.asin(Math.sin(ct)*Math.cos(pt)+Math.cos(ct)*Math.sin(pt)*Math.cos(ht));return a([w(ut+Math.atan2(Math.sin(ht)*Math.sin(pt)*Math.cos(ct),Math.cos(pt)-Math.sin(ct)*Math.sin(mt))),w(mt)],st.properties)}function _n(O,J,ot){void 0===ot&&(ot={});for(var st=ot.steps||64,at=ot.properties?ot.properties:!Array.isArray(O)&&"Feature"===O.type&&O.properties?O.properties:{},ut=[],ct=0;ct<st;ct++)ut.push(vn(O,J,-360*ct/st,ot).geometry.coordinates);return ut.push(ut[0]),l([ut],at)}function mn(O,J,ot){if(void 0===ot&&(ot={}),!0===ot.final)return function(O,J){var ot=mn(J,O);return(ot+180)%360}(O,J);var st=K(O),at=K(J),ut=I(st[0]),ct=I(at[0]),ht=I(st[1]),pt=I(at[1]),mt=Math.sin(ct-ut)*Math.cos(pt),xt=Math.cos(ht)*Math.sin(pt)-Math.sin(ht)*Math.cos(pt)*Math.cos(ct-ut);return w(Math.atan2(mt,xt))}function xn(O,J){void 0===J&&(J={});var ot=Z(O);return a([(ot[0]+ot[2])/2,(ot[1]+ot[3])/2],J.properties,J)}function En(O,J){void 0===J&&(J={});var ot=0,st=0,at=0;return R(O,(function(O){ot+=O[0],st+=O[1],at++}),!0),a([ot/at,st/at],J.properties)}function bn(O){var J=[];return"FeatureCollection"===O.type?F(O,(function(O){R(O,(function(ot){J.push(a(ot,O.properties))}))})):R(O,(function(ot){J.push(a(ot,O.properties))})),f(J)}var sr=Nn,ar=Nn;function Nn(O,J,ot){ot=ot||2;var st,at,ut,ct,ht,pt,mt,xt=J&&J.length,Nt=xt?J[0]*ot:O.length,St=Sn(O,0,Nt,ot,!0),jt=[];if(!St)return jt;if(xt&&(St=function(O,J,ot,st){var at,ut,ct,ht=[];for(at=0,ut=J.length;at<ut;at++)(ct=Sn(O,J[at]*st,at<ut-1?J[at+1]*st:O.length,st,!1))===ct.next&&(ct.steiner=!0),ht.push(Fn(ct));for(ht.sort(Tn),at=0;at<ht.length;at++)An(ht[at],ot),ot=Cn(ot,ot.next);return ot}(O,J,St,ot)),O.length>80*ot){st=ut=O[0],at=ct=O[1];for(var Wt=ot;Wt<Nt;Wt+=ot)(ht=O[Wt])<st&&(st=ht),(pt=O[Wt+1])<at&&(at=pt),ht>ut&&(ut=ht),pt>ct&&(ct=pt);mt=0!==(mt=Math.max(ut-st,ct-at))?1/mt:0}return Pn(St,jt,ot,st,at,mt),jt}function Sn(O,J,ot,st,at){var ut,ct;if(at===Hn(O,J,ot,st)>0)for(ut=J;ut<ot;ut+=st)ct=Vn(ut,O[ut],O[ut+1],ct);else for(ut=ot-st;ut>=J;ut-=st)ct=Vn(ut,O[ut],O[ut+1],ct);return ct&&Bn(ct,ct.next)&&(Xn(ct),ct=ct.next),ct}function Cn(O,J){if(!O)return O;J||(J=O);var ot,st=O;do{if(ot=!1,st.steiner||!Bn(st,st.next)&&0!==qn(st.prev,st,st.next))st=st.next;else{if(Xn(st),(st=J=st.prev)===st.next)break;ot=!0}}while(ot||st!==J);return J}function Pn(O,J,ot,st,at,ut,ct){if(O){!ct&&ut&&function(O,J,ot,st){var at=O;do{null===at.z&&(at.z=Dn(at.x,at.y,J,ot,st)),at.prevZ=at.prev,at.nextZ=at.next,at=at.next}while(at!==O);at.prevZ.nextZ=null,at.prevZ=null,function(O){var J,ot,st,at,ut,ct,ht,pt,mt=1;do{for(ot=O,O=null,ut=null,ct=0;ot;){for(ct++,st=ot,ht=0,J=0;J<mt&&(ht++,st=st.nextZ);J++);for(pt=mt;ht>0||pt>0&&st;)0!==ht&&(0===pt||!st||ot.z<=st.z)?(at=ot,ot=ot.nextZ,ht--):(at=st,st=st.nextZ,pt--),ut?ut.nextZ=at:O=at,at.prevZ=ut,ut=at;ot=st}ut.nextZ=null,mt*=2}while(ct>1)}(at)}(O,st,at,ut);for(var ht,pt,mt=O;O.prev!==O.next;)if(ht=O.prev,pt=O.next,ut?Ln(O,st,at,ut):Mn(O))J.push(ht.i/ot),J.push(O.i/ot),J.push(pt.i/ot),Xn(O),O=pt.next,mt=pt.next;else if((O=pt)===mt){ct?1===ct?Pn(O=On(O,J,ot),J,ot,st,at,ut,2):2===ct&&Rn(O,J,ot,st,at,ut):Pn(Cn(O),J,ot,st,at,ut,1);break}}}function Mn(O){var J=O.prev,ot=O,st=O.next;if(qn(J,ot,st)>=0)return!1;for(var at=O.next.next;at!==O.prev;){if(kn(J.x,J.y,ot.x,ot.y,st.x,st.y,at.x,at.y)&&qn(at.prev,at,at.next)>=0)return!1;at=at.next}return!0}function Ln(O,J,ot,st){var at=O.prev,ut=O,ct=O.next;if(qn(at,ut,ct)>=0)return!1;for(var ht=at.x<ut.x?at.x<ct.x?at.x:ct.x:ut.x<ct.x?ut.x:ct.x,pt=at.y<ut.y?at.y<ct.y?at.y:ct.y:ut.y<ct.y?ut.y:ct.y,mt=at.x>ut.x?at.x>ct.x?at.x:ct.x:ut.x>ct.x?ut.x:ct.x,xt=at.y>ut.y?at.y>ct.y?at.y:ct.y:ut.y>ct.y?ut.y:ct.y,Nt=Dn(ht,pt,J,ot,st),St=Dn(mt,xt,J,ot,st),jt=O.prevZ,Wt=O.nextZ;jt&&jt.z>=Nt&&Wt&&Wt.z<=St;){if(jt!==O.prev&&jt!==O.next&&kn(at.x,at.y,ut.x,ut.y,ct.x,ct.y,jt.x,jt.y)&&qn(jt.prev,jt,jt.next)>=0)return!1;if(jt=jt.prevZ,Wt!==O.prev&&Wt!==O.next&&kn(at.x,at.y,ut.x,ut.y,ct.x,ct.y,Wt.x,Wt.y)&&qn(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.nextZ}for(;jt&&jt.z>=Nt;){if(jt!==O.prev&&jt!==O.next&&kn(at.x,at.y,ut.x,ut.y,ct.x,ct.y,jt.x,jt.y)&&qn(jt.prev,jt,jt.next)>=0)return!1;jt=jt.prevZ}for(;Wt&&Wt.z<=St;){if(Wt!==O.prev&&Wt!==O.next&&kn(at.x,at.y,ut.x,ut.y,ct.x,ct.y,Wt.x,Wt.y)&&qn(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.nextZ}return!0}function On(O,J,ot){var st=O;do{var at=st.prev,ut=st.next.next;!Bn(at,ut)&&zn(at,st,st.next,ut)&&jn(at,ut)&&jn(ut,at)&&(J.push(at.i/ot),J.push(st.i/ot),J.push(ut.i/ot),Xn(st),Xn(st.next),st=O=ut),st=st.next}while(st!==O);return st}function Rn(O,J,ot,st,at,ut){var ct=O;do{for(var ht=ct.next.next;ht!==ct.prev;){if(ct.i!==ht.i&&Gn(ct,ht)){var pt=Un(ct,ht);return ct=Cn(ct,ct.next),pt=Cn(pt,pt.next),Pn(ct,J,ot,st,at,ut),void Pn(pt,J,ot,st,at,ut)}ht=ht.next}ct=ct.next}while(ct!==O)}function Tn(O,J){return O.x-J.x}function An(O,J){if(J=function(O,J){var ot,st=J,at=O.x,ut=O.y,ct=-1/0;do{if(ut<=st.y&&ut>=st.next.y&&st.next.y!==st.y){var ht=st.x+(ut-st.y)*(st.next.x-st.x)/(st.next.y-st.y);if(ht<=at&&ht>ct){if(ct=ht,ht===at){if(ut===st.y)return st;if(ut===st.next.y)return st.next}ot=st.x<st.next.x?st:st.next}}st=st.next}while(st!==J);if(!ot)return null;if(at===ct)return ot.prev;var pt,mt=ot,xt=ot.x,Nt=ot.y,St=1/0;for(st=ot.next;st!==mt;)at>=st.x&&st.x>=xt&&at!==st.x&&kn(ut<Nt?at:ct,ut,xt,Nt,ut<Nt?ct:at,ut,st.x,st.y)&&((pt=Math.abs(ut-st.y)/(at-st.x))<St||pt===St&&st.x>ot.x)&&jn(st,O)&&(ot=st,St=pt),st=st.next;return ot}(O,J)){var ot=Un(J,O);Cn(ot,ot.next)}}function Dn(O,J,ot,st,at){return(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ot)*at)|O<<8))|O<<4))|O<<2))|O<<1))|(J=1431655765&((J=858993459&((J=252645135&((J=16711935&((J=32767*(J-st)*at)|J<<8))|J<<4))|J<<2))|J<<1))<<1}function Fn(O){var J=O,ot=O;do{J.x<ot.x&&(ot=J),J=J.next}while(J!==O);return ot}function kn(O,J,ot,st,at,ut,ct,ht){return(at-ct)*(J-ht)-(O-ct)*(ut-ht)>=0&&(O-ct)*(st-ht)-(ot-ct)*(J-ht)>=0&&(ot-ct)*(ut-ht)-(at-ct)*(st-ht)>=0}function Gn(O,J){return O.next.i!==J.i&&O.prev.i!==J.i&&!function(O,J){var ot=O;do{if(ot.i!==O.i&&ot.next.i!==O.i&&ot.i!==J.i&&ot.next.i!==J.i&&zn(ot,ot.next,O,J))return!0;ot=ot.next}while(ot!==O);return!1}(O,J)&&jn(O,J)&&jn(J,O)&&function(O,J){var ot=O,st=!1,at=(O.x+J.x)/2,ut=(O.y+J.y)/2;do{ot.y>ut!=ot.next.y>ut&&ot.next.y!==ot.y&&at<(ot.next.x-ot.x)*(ut-ot.y)/(ot.next.y-ot.y)+ot.x&&(st=!st),ot=ot.next}while(ot!==O);return st}(O,J)}function qn(O,J,ot){return(J.y-O.y)*(ot.x-J.x)-(J.x-O.x)*(ot.y-J.y)}function Bn(O,J){return O.x===J.x&&O.y===J.y}function zn(O,J,ot,st){return!!(Bn(O,J)&&Bn(ot,st)||Bn(O,st)&&Bn(ot,J))||qn(O,J,ot)>0!=qn(O,J,st)>0&&qn(ot,st,O)>0!=qn(ot,st,J)>0}function jn(O,J){return qn(O.prev,O,O.next)<0?qn(O,J,O.next)>=0&&qn(O,O.prev,J)>=0:qn(O,J,O.prev)<0||qn(O,O.next,J)<0}function Un(O,J){var ot=new Yn(O.i,O.x,O.y),st=new Yn(J.i,J.x,J.y),at=O.next,ut=J.prev;return O.next=J,J.prev=O,ot.next=at,at.prev=ot,st.next=ot,ot.prev=st,ut.next=st,st.prev=ut,st}function Vn(O,J,ot,st){var at=new Yn(O,J,ot);return st?(at.next=st.next,at.prev=st,st.next.prev=at,st.next=at):(at.prev=at,at.next=at),at}function Xn(O){O.next.prev=O.prev,O.prev.next=O.next,O.prevZ&&(O.prevZ.nextZ=O.nextZ),O.nextZ&&(O.nextZ.prevZ=O.prevZ)}function Yn(O,J,ot){this.i=O,this.x=J,this.y=ot,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hn(O,J,ot,st){for(var at=0,ut=J,ct=ot-st;ut<ot;ut+=st)at+=(O[ct]-O[ut])*(O[ut+1]+O[ct+1]),ct=ut;return at}function Wn(O){var J=function(O){for(var J=O[0][0].length,ot={vertices:[],holes:[],dimensions:J},st=0,at=0;at<O.length;at++){for(var ut=0;ut<O[at].length;ut++)for(var ct=0;ct<J;ct++)ot.vertices.push(O[at][ut][ct]);at>0&&(st+=O[at-1].length,ot.holes.push(st))}return ot}(O),ot=sr(J.vertices,J.holes,2),st=[],at=[];ot.forEach((function(O,st){var ut=ot[st];at.push([J.vertices[2*ut],J.vertices[2*ut+1]])}));for(var ut=0;ut<at.length;ut+=3){var ct=at.slice(ut,ut+3);ct.push(at[ut]),st.push(l([ct]))}return st}function Jn(O,J){if(!O)throw new Error("targetPoint is required");if(!J)throw new Error("points is required");var ot,st=1/0,at=0;return F(J,(function(J,ot){var ut=me(O,J);ut<st&&(at=ot,st=ut)})),(ot=Ie(J.features[at])).properties.featureIndex=at,ot.properties.distanceToPoint=st,ot}function Zn(O){if(!O)throw new Error("geojson is required");var J=[];return z(O,(function(O){!function(O,J){var ot=[],st=O.geometry;if(null!==st){switch(st.type){case"Polygon":ot=Q(st);break;case"LineString":ot=[Q(st)]}ot.forEach((function(ot){(function(O,J){var ot=[];return O.reduce((function(O,st){var at=h([O,st],J);return at.bbox=function(O,J){var ot=O[0],st=O[1],at=J[0],ut=J[1];return[ot<at?ot:at,st<ut?st:ut,ot>at?ot:at,st>ut?st:ut]}(O,st),ot.push(at),st})),ot})(ot,O.properties).forEach((function(O){O.id=J.length,J.push(O)}))}))}}(O,J)})),f(J)}Nn.deviation=function(O,J,ot,st){var at=J&&J.length,ut=at?J[0]*ot:O.length,ct=Math.abs(Hn(O,0,ut,ot));if(at)for(var ht=0,pt=J.length;ht<pt;ht++){var mt=J[ht]*ot,xt=ht<pt-1?J[ht+1]*ot:O.length;ct-=Math.abs(Hn(O,mt,xt,ot))}var Nt=0;for(ht=0;ht<st.length;ht+=3){var St=st[ht]*ot,jt=st[ht+1]*ot,Wt=st[ht+2]*ot;Nt+=Math.abs((O[St]-O[Wt])*(O[jt+1]-O[St+1])-(O[St]-O[jt])*(O[Wt+1]-O[St+1]))}return 0===ct&&0===Nt?0:Math.abs((Nt-ct)/ct)},Nn.flatten=function(O){for(var J=O[0][0].length,ot={vertices:[],holes:[],dimensions:J},st=0,at=0;at<O.length;at++){for(var ut=0;ut<O[at].length;ut++)for(var ct=0;ct<J;ct++)ot.vertices.push(O[at][ut][ct]);at>0&&(st+=O[at-1].length,ot.holes.push(st))}return ot},sr.default=ar;var ur=Bt((function(O,J){function n(O,J,ot){void 0===ot&&(ot={});var st={type:"Feature"};return(0===ot.id||ot.id)&&(st.id=ot.id),ot.bbox&&(st.bbox=ot.bbox),st.properties=J||{},st.geometry=O,st}function r(O,J,ot){if(void 0===ot&&(ot={}),!O)throw new Error("coordinates is required");if(!Array.isArray(O))throw new Error("coordinates must be an Array");if(O.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(O[0])||!f(O[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:O},J,ot)}function i(O,J,ot){void 0===ot&&(ot={});for(var st=0,at=O;st<at.length;st++){var ut=at[st];if(ut.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ct=0;ct<ut[ut.length-1].length;ct++)if(ut[ut.length-1][ct]!==ut[0][ct])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:O},J,ot)}function o(O,J,ot){if(void 0===ot&&(ot={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:O},J,ot)}function s(O,J){void 0===J&&(J={});var ot={type:"FeatureCollection"};return J.id&&(ot.id=J.id),J.bbox&&(ot.bbox=J.bbox),ot.features=O,ot}function a(O,J,ot){return void 0===ot&&(ot={}),n({type:"MultiLineString",coordinates:O},J,ot)}function u(O,J,ot){return void 0===ot&&(ot={}),n({type:"MultiPoint",coordinates:O},J,ot)}function l(O,J,ot){return void 0===ot&&(ot={}),n({type:"MultiPolygon",coordinates:O},J,ot)}function c(O,ot){void 0===ot&&(ot="kilometers");var st=J.factors[ot];if(!st)throw new Error(ot+" units is invalid");return O*st}function h(O,ot){void 0===ot&&(ot="kilometers");var st=J.factors[ot];if(!st)throw new Error(ot+" units is invalid");return O/st}function p(O){return O%(2*Math.PI)*180/Math.PI}function f(O){return!isNaN(O)&&null!==O&&!Array.isArray(O)}Object.defineProperty(J,"__esModule",{value:!0}),J.earthRadius=6371008.8,J.factors={centimeters:100*J.earthRadius,centimetres:100*J.earthRadius,degrees:J.earthRadius/111325,feet:3.28084*J.earthRadius,inches:39.37*J.earthRadius,kilometers:J.earthRadius/1e3,kilometres:J.earthRadius/1e3,meters:J.earthRadius,metres:J.earthRadius,miles:J.earthRadius/1609.344,millimeters:1e3*J.earthRadius,millimetres:1e3*J.earthRadius,nauticalmiles:J.earthRadius/1852,radians:1,yards:1.0936*J.earthRadius},J.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/J.earthRadius,yards:1.0936133},J.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},J.feature=n,J.geometry=function(O,J,ot){switch(O){case"Point":return r(J).geometry;case"LineString":return o(J).geometry;case"Polygon":return i(J).geometry;case"MultiPoint":return u(J).geometry;case"MultiLineString":return a(J).geometry;case"MultiPolygon":return l(J).geometry;default:throw new Error(O+" is invalid")}},J.point=r,J.points=function(O,J,ot){return void 0===ot&&(ot={}),s(O.map((function(O){return r(O,J)})),ot)},J.polygon=i,J.polygons=function(O,J,ot){return void 0===ot&&(ot={}),s(O.map((function(O){return i(O,J)})),ot)},J.lineString=o,J.lineStrings=function(O,J,ot){return void 0===ot&&(ot={}),s(O.map((function(O){return o(O,J)})),ot)},J.featureCollection=s,J.multiLineString=a,J.multiPoint=u,J.multiPolygon=l,J.geometryCollection=function(O,J,ot){return void 0===ot&&(ot={}),n({type:"GeometryCollection",geometries:O},J,ot)},J.round=function(O,J){if(void 0===J&&(J=0),J&&!(J>=0))throw new Error("precision must be a positive number");var ot=Math.pow(10,J||0);return Math.round(O*ot)/ot},J.radiansToLength=c,J.lengthToRadians=h,J.lengthToDegrees=function(O,J){return p(h(O,J))},J.bearingToAzimuth=function(O){var J=O%360;return J<0&&(J+=360),J},J.radiansToDegrees=p,J.degreesToRadians=function(O){return O%360*Math.PI/180},J.convertLength=function(O,J,ot){if(void 0===J&&(J="kilometers"),void 0===ot&&(ot="kilometers"),!(O>=0))throw new Error("length must be a positive number");return c(h(O,J),ot)},J.convertArea=function(O,ot,st){if(void 0===ot&&(ot="meters"),void 0===st&&(st="kilometers"),!(O>=0))throw new Error("area must be a positive number");var at=J.areaFactors[ot];if(!at)throw new Error("invalid original units");var ut=J.areaFactors[st];if(!ut)throw new Error("invalid final units");return O/at*ut},J.isNumber=f,J.isObject=function(O){return!!O&&O.constructor===Object},J.validateBBox=function(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(4!==O.length&&6!==O.length)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach((function(O){if(!f(O))throw new Error("bbox must only contain numbers")}))},J.validateId=function(O){if(!O)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof O))throw new Error("id must be a number or a string")}}));function Qn(O,J,ot){if(null!==O)for(var st,at,ut,ct,ht,pt,mt,xt,Nt=0,St=0,jt=O.type,Wt="FeatureCollection"===jt,Ht="Feature"===jt,Zt=Wt?O.features.length:1,Kt=0;Kt<Zt;Kt++){ht=(xt=!!(mt=Wt?O.features[Kt].geometry:Ht?O.geometry:O)&&"GeometryCollection"===mt.type)?mt.geometries.length:1;for(var Jt=0;Jt<ht;Jt++){var ee=0,ne=0;if(null!==(ct=xt?mt.geometries[Jt]:mt)){pt=ct.coordinates;var re=ct.type;switch(Nt=!ot||"Polygon"!==re&&"MultiPolygon"!==re?0:1,re){case null:break;case"Point":if(!1===J(pt,St,Kt,ee,ne))return!1;St++,ee++;break;case"LineString":case"MultiPoint":for(st=0;st<pt.length;st++){if(!1===J(pt[st],St,Kt,ee,ne))return!1;St++,"MultiPoint"===re&&ee++}"LineString"===re&&ee++;break;case"Polygon":case"MultiLineString":for(st=0;st<pt.length;st++){for(at=0;at<pt[st].length-Nt;at++){if(!1===J(pt[st][at],St,Kt,ee,ne))return!1;St++}"MultiLineString"===re&&ee++,"Polygon"===re&&ne++}"Polygon"===re&&ee++;break;case"MultiPolygon":for(st=0;st<pt.length;st++){for(ne=0,at=0;at<pt[st].length;at++){for(ut=0;ut<pt[st][at].length-Nt;ut++){if(!1===J(pt[st][at][ut],St,Kt,ee,ne))return!1;St++}ne++}ee++}break;case"GeometryCollection":for(st=0;st<ct.geometries.length;st++)if(!1===Qn(ct.geometries[st],J,ot))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $n(O,J){var ot;switch(O.type){case"FeatureCollection":for(ot=0;ot<O.features.length&&!1!==J(O.features[ot].properties,ot);ot++);break;case"Feature":J(O.properties,0)}}function tr(O,J){if("Feature"===O.type)J(O,0);else if("FeatureCollection"===O.type)for(var ot=0;ot<O.features.length&&!1!==J(O.features[ot],ot);ot++);}function er(O,J){var ot,st,at,ut,ct,ht,pt,mt,xt,Nt,St=0,jt="FeatureCollection"===O.type,Wt="Feature"===O.type,Ht=jt?O.features.length:1;for(ot=0;ot<Ht;ot++){for(ht=jt?O.features[ot].geometry:Wt?O.geometry:O,mt=jt?O.features[ot].properties:Wt?O.properties:{},xt=jt?O.features[ot].bbox:Wt?O.bbox:void 0,Nt=jt?O.features[ot].id:Wt?O.id:void 0,ct=(pt=!!ht&&"GeometryCollection"===ht.type)?ht.geometries.length:1,at=0;at<ct;at++)if(null!==(ut=pt?ht.geometries[at]:ht))switch(ut.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===J(ut,St,mt,xt,Nt))return!1;break;case"GeometryCollection":for(st=0;st<ut.geometries.length;st++)if(!1===J(ut.geometries[st],St,mt,xt,Nt))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===J(null,St,mt,xt,Nt))return!1;St++}}function nr(O,J){er(O,(function(O,ot,st,at,ut){var ct,ht=null===O?null:O.type;switch(ht){case null:case"Point":case"LineString":case"Polygon":return!1!==J(ur.feature(O,st,{bbox:at,id:ut}),ot,0)&&void 0}switch(ht){case"MultiPoint":ct="Point";break;case"MultiLineString":ct="LineString";break;case"MultiPolygon":ct="Polygon"}for(var pt=0;pt<O.coordinates.length;pt++){var mt={type:ct,coordinates:O.coordinates[pt]};if(!1===J(ur.feature(mt,st),ot,pt))return!1}}))}function rr(O,J){nr(O,(function(O,ot,st){var at=0;if(O.geometry){var ut=O.geometry.type;if("Point"!==ut&&"MultiPoint"!==ut){var ct,ht=0,pt=0,mt=0;return!1!==Qn(O,(function(ut,xt,Nt,St,jt){if(void 0===ct||ot>ht||St>pt||jt>mt)return ct=ut,ht=ot,pt=St,mt=jt,void(at=0);var Wt=ur.lineString([ct,ut],O.properties);if(!1===J(Wt,ot,st,jt,at))return!1;at++,ct=ut}))&&void 0}}}))}function ir(O,J){if(!O)throw new Error("geojson is required");nr(O,(function(O,ot,st){if(null!==O.geometry){var at=O.geometry.type,ut=O.geometry.coordinates;switch(at){case"LineString":if(!1===J(O,ot,st,0,0))return!1;break;case"Polygon":for(var ct=0;ct<ut.length;ct++)if(!1===J(ur.lineString(ut[ct],O.properties),ot,st,ct))return!1}}}))}var lr=Qn,cr=tr,hr=nr,pr=er,fr=ir,gr=$n,dr=rr,yr=Object.defineProperty({coordAll:function(O){var J=[];return Qn(O,(function(O){J.push(O)})),J},coordEach:lr,coordReduce:function(O,J,ot,st){var at=ot;return Qn(O,(function(O,st,ut,ct,ht){at=0===st&&void 0===ot?O:J(at,O,st,ut,ct,ht)}),st),at},featureEach:cr,featureReduce:function(O,J,ot){var st=ot;return tr(O,(function(O,at){st=0===at&&void 0===ot?O:J(st,O,at)})),st},findPoint:function(O,J){if(J=J||{},!ur.isObject(J))throw new Error("options is invalid");var ot,st=J.featureIndex||0,at=J.multiFeatureIndex||0,ut=J.geometryIndex||0,ct=J.coordIndex||0,ht=J.properties;switch(O.type){case"FeatureCollection":st<0&&(st=O.features.length+st),ht=ht||O.features[st].properties,ot=O.features[st].geometry;break;case"Feature":ht=ht||O.properties,ot=O.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ot=O;break;default:throw new Error("geojson is invalid")}if(null===ot)return null;var pt=ot.coordinates;switch(ot.type){case"Point":return ur.point(pt,ht,J);case"MultiPoint":return at<0&&(at=pt.length+at),ur.point(pt[at],ht,J);case"LineString":return ct<0&&(ct=pt.length+ct),ur.point(pt[ct],ht,J);case"Polygon":return ut<0&&(ut=pt.length+ut),ct<0&&(ct=pt[ut].length+ct),ur.point(pt[ut][ct],ht,J);case"MultiLineString":return at<0&&(at=pt.length+at),ct<0&&(ct=pt[at].length+ct),ur.point(pt[at][ct],ht,J);case"MultiPolygon":return at<0&&(at=pt.length+at),ut<0&&(ut=pt[at].length+ut),ct<0&&(ct=pt[at][ut].length-ct),ur.point(pt[at][ut][ct],ht,J)}throw new Error("geojson is invalid")},findSegment:function(O,J){if(J=J||{},!ur.isObject(J))throw new Error("options is invalid");var ot,st=J.featureIndex||0,at=J.multiFeatureIndex||0,ut=J.geometryIndex||0,ct=J.segmentIndex||0,ht=J.properties;switch(O.type){case"FeatureCollection":st<0&&(st=O.features.length+st),ht=ht||O.features[st].properties,ot=O.features[st].geometry;break;case"Feature":ht=ht||O.properties,ot=O.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ot=O;break;default:throw new Error("geojson is invalid")}if(null===ot)return null;var pt=ot.coordinates;switch(ot.type){case"Point":case"MultiPoint":return null;case"LineString":return ct<0&&(ct=pt.length+ct-1),ur.lineString([pt[ct],pt[ct+1]],ht,J);case"Polygon":return ut<0&&(ut=pt.length+ut),ct<0&&(ct=pt[ut].length+ct-1),ur.lineString([pt[ut][ct],pt[ut][ct+1]],ht,J);case"MultiLineString":return at<0&&(at=pt.length+at),ct<0&&(ct=pt[at].length+ct-1),ur.lineString([pt[at][ct],pt[at][ct+1]],ht,J);case"MultiPolygon":return at<0&&(at=pt.length+at),ut<0&&(ut=pt[at].length+ut),ct<0&&(ct=pt[at][ut].length-ct-1),ur.lineString([pt[at][ut][ct],pt[at][ut][ct+1]],ht,J)}throw new Error("geojson is invalid")},flattenEach:hr,flattenReduce:function(O,J,ot){var st=ot;return nr(O,(function(O,at,ut){st=0===at&&0===ut&&void 0===ot?O:J(st,O,at,ut)})),st},geomEach:pr,geomReduce:function(O,J,ot){var st=ot;return er(O,(function(O,at,ut,ct,ht){st=0===at&&void 0===ot?O:J(st,O,at,ut,ct,ht)})),st},lineEach:fr,lineReduce:function(O,J,ot){var st=ot;return ir(O,(function(O,at,ut,ct){st=0===at&&void 0===ot?O:J(st,O,at,ut,ct)})),st},propEach:gr,propReduce:function(O,J,ot){var st=ot;return $n(O,(function(O,at){st=0===at&&void 0===ot?O:J(st,O,at)})),st},segmentEach:dr,segmentReduce:function(O,J,ot){var st=ot,at=!1;return rr(O,(function(O,ut,ct,ht,pt){st=!1===at&&void 0===ot?O:J(st,O,ut,ct,ht,pt),at=!0})),st}},"__esModule",{value:!0});function wr(O){var J=[1/0,1/0,-1/0,-1/0];return yr.coordEach(O,(function(O){J[0]>O[0]&&(J[0]=O[0]),J[1]>O[1]&&(J[1]=O[1]),J[2]<O[0]&&(J[2]=O[0]),J[3]<O[1]&&(J[3]=O[1])})),J}wr.default=wr;var vr=wr,_r=Object.defineProperty({default:vr},"__esModule",{value:!0}).default,mr=yr.featureEach,xr=(yr.coordEach,ur.polygon,ur.featureCollection);function Pr(O){var J=Zt(O);return J.insert=function(O){if("Feature"!==O.type)throw new Error("invalid feature");return O.bbox=O.bbox?O.bbox:_r(O),Zt.prototype.insert.call(this,O)},J.load=function(O){var J=[];return Array.isArray(O)?O.forEach((function(O){if("Feature"!==O.type)throw new Error("invalid features");O.bbox=O.bbox?O.bbox:_r(O),J.push(O)})):mr(O,(function(O){if("Feature"!==O.type)throw new Error("invalid features");O.bbox=O.bbox?O.bbox:_r(O),J.push(O)})),Zt.prototype.load.call(this,J)},J.remove=function(O,J){if("Feature"!==O.type)throw new Error("invalid feature");return O.bbox=O.bbox?O.bbox:_r(O),Zt.prototype.remove.call(this,O,J)},J.clear=function(){return Zt.prototype.clear.call(this)},J.search=function(O){var J=Zt.prototype.search.call(this,this.toBBox(O));return xr(J)},J.collides=function(O){return Zt.prototype.collides.call(this,this.toBBox(O))},J.all=function(){var O=Zt.prototype.all.call(this);return xr(O)},J.toJSON=function(){return Zt.prototype.toJSON.call(this)},J.fromJSON=function(O){return Zt.prototype.fromJSON.call(this,O)},J.toBBox=function(O){var J;if(O.bbox)J=O.bbox;else if(Array.isArray(O)&&4===O.length)J=O;else if(Array.isArray(O)&&6===O.length)J=[O[0],O[1],O[3],O[4]];else if("Feature"===O.type)J=_r(O);else{if("FeatureCollection"!==O.type)throw new Error("invalid geojson");J=_r(O)}return{minX:J[0],minY:J[1],maxX:J[2],maxY:J[3]}},J}var Er=Pr,br=Pr;function Or(O,J){var ot={},st=[];if("LineString"===O.type&&(O=o(O)),"LineString"===J.type&&(J=o(J)),"Feature"===O.type&&"Feature"===J.type&&null!==O.geometry&&null!==J.geometry&&"LineString"===O.geometry.type&&"LineString"===J.geometry.type&&2===O.geometry.coordinates.length&&2===J.geometry.coordinates.length){var at=Rr(O,J);return at&&st.push(at),f(st)}var ut=Er();return ut.load(Zn(J)),F(Zn(O),(function(O){F(ut.search(O),(function(J){var at=Rr(O,J);if(at){var ut=Q(at).join(",");ot[ut]||(ot[ut]=!0,st.push(at))}}))})),f(st)}function Rr(O,J){var ot=Q(O),st=Q(J);if(2!==ot.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==st.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var at=ot[0][0],ut=ot[0][1],ct=ot[1][0],ht=ot[1][1],pt=st[0][0],mt=st[0][1],xt=st[1][0],Nt=st[1][1],St=(Nt-mt)*(ct-at)-(xt-pt)*(ht-ut);if(0===St)return null;var jt=((xt-pt)*(ut-mt)-(Nt-mt)*(at-pt))/St,Wt=((ct-at)*(ut-mt)-(ht-ut)*(at-pt))/St;return jt>=0&&jt<=1&&Wt>=0&&Wt<=1?a([at+jt*(ct-at),ut+jt*(ht-ut)]):null}function Tr(O,J,ot){void 0===ot&&(ot={});var st=a([1/0,1/0],{dist:1/0}),at=0;return z(O,(function(O){for(var ut=Q(O),ct=0;ct<ut.length-1;ct++){var ht=a(ut[ct]);ht.properties.dist=me(J,ht,ot);var pt=a(ut[ct+1]);pt.properties.dist=me(J,pt,ot);var mt=me(ht,pt,ot),xt=Math.max(ht.properties.dist,pt.properties.dist),Nt=mn(ht,pt),St=vn(J,xt,Nt+90,ot),jt=vn(J,xt,Nt-90,ot),Wt=Or(h([St.geometry.coordinates,jt.geometry.coordinates]),h([ht.geometry.coordinates,pt.geometry.coordinates])),Ht=null;Wt.features.length>0&&((Ht=Wt.features[0]).properties.dist=me(J,Ht,ot),Ht.properties.location=at+me(ht,Ht,ot)),ht.properties.dist<st.properties.dist&&((st=ht).properties.index=ct,st.properties.location=at),pt.properties.dist<st.properties.dist&&((st=pt).properties.index=ct+1,st.properties.location=at+mt),Ht&&Ht.properties.dist<st.properties.dist&&((st=Ht).properties.index=ct),at+=mt}})),st}function Ar(O,ot,st){void 0===st&&(st={});var at=K(O),ut=K(ot);return ut[0]+=ut[0]-at[0]>180?-360:at[0]-ut[0]>180?360:0,N(function(O,ot,st){var at=st=void 0===st?J:Number(st),ut=O[1]*Math.PI/180,ct=ot[1]*Math.PI/180,ht=ct-ut,pt=Math.abs(ot[0]-O[0])*Math.PI/180;pt>Math.PI&&(pt-=2*Math.PI);var mt=Math.log(Math.tan(ct/2+Math.PI/4)/Math.tan(ut/2+Math.PI/4)),xt=Math.abs(mt)>1e-11?ht/mt:Math.cos(ut);return Math.sqrt(ht*ht+xt*xt*pt*pt)*at}(at,ut),"meters",st.units)}function Dr(O,J,ot){if(void 0===ot&&(ot={}),ot.method||(ot.method="geodesic"),ot.units||(ot.units="kilometers"),!O)throw new Error("pt is required");if(Array.isArray(O)?O=a(O):"Point"===O.type?O=o(O):et(O,"Point","point"),!J)throw new Error("line is required");Array.isArray(J)?J=h(J):"LineString"===J.type?J=o(J):et(J,"LineString","line");var st=1/0,at=O.geometry.coordinates;return U(J,(function(O){var J=O.geometry.coordinates[0],ut=O.geometry.coordinates[1],ct=function(O,J,ot,st){var at=[ot[0]-J[0],ot[1]-J[1]],ut=Fr([O[0]-J[0],O[1]-J[1]],at);if(ut<=0)return kr(O,J,{method:st.method,units:"degrees"});var ct=Fr(at,at);if(ct<=ut)return kr(O,ot,{method:st.method,units:"degrees"});var ht=ut/ct;return kr(O,[J[0]+ht*at[0],J[1]+ht*at[1]],{method:st.method,units:"degrees"})}(at,J,ut,ot);ct<st&&(st=ct)})),N(st,"degrees",ot.units)}function Fr(O,J){return O[0]*J[0]+O[1]*J[1]}function kr(O,J,ot){return"planar"===ot.method?Ar(O,J,ot):me(O,J,ot)}function Gr(O,J,ot,st,at,ut,ct,ht){var pt,mt,xt,Nt,St={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(pt=(ht-ut)*(ot-O)-(ct-at)*(st-J))?null!==St.x&&null!==St.y&&St:(Nt=(ot-O)*(mt=J-ut)-(st-J)*(xt=O-at),mt=((ct-at)*mt-(ht-ut)*xt)/pt,xt=Nt/pt,St.x=O+mt*(ot-O),St.y=J+mt*(st-J),mt>=0&&mt<=1&&(St.onLine1=!0),xt>=0&&xt<=1&&(St.onLine2=!0),!(!St.onLine1||!St.onLine2)&&[St.x,St.y])}function qr(O){for(var J=function(O){return"FeatureCollection"!==O.type?"Feature"!==O.type?f([o(O)]):f([O]):O}(O),ot=xn(J),st=!1,at=0;!st&&at<J.features.length;){var ut,ct=J.features[at].geometry,ht=!1;if("Point"===ct.type)ot.geometry.coordinates[0]===ct.coordinates[0]&&ot.geometry.coordinates[1]===ct.coordinates[1]&&(st=!0);else if("MultiPoint"===ct.type){var pt=!1;for(ut=0;!pt&&ut<ct.coordinates.length;)ot.geometry.coordinates[0]===ct.coordinates[ut][0]&&ot.geometry.coordinates[1]===ct.coordinates[ut][1]&&(st=!0,pt=!0),ut++}else if("LineString"===ct.type)for(ut=0;!ht&&ut<ct.coordinates.length-1;)Br(ot.geometry.coordinates[0],ot.geometry.coordinates[1],ct.coordinates[ut][0],ct.coordinates[ut][1],ct.coordinates[ut+1][0],ct.coordinates[ut+1][1])&&(ht=!0,st=!0),ut++;else if("MultiLineString"===ct.type)for(var mt=0;mt<ct.coordinates.length;){ht=!1,ut=0;for(var xt=ct.coordinates[mt];!ht&&ut<xt.length-1;)Br(ot.geometry.coordinates[0],ot.geometry.coordinates[1],xt[ut][0],xt[ut][1],xt[ut+1][0],xt[ut+1][1])&&(ht=!0,st=!0),ut++;mt++}else"Polygon"!==ct.type&&"MultiPolygon"!==ct.type||ye(ot,ct)&&(st=!0);at++}if(st)return ot;var Nt=f([]);for(at=0;at<J.features.length;at++)Nt.features=Nt.features.concat(bn(J.features[at]).features);return a(Jn(ot,Nt).geometry.coordinates)}function Br(O,J,ot,st,at,ut){return Math.sqrt((at-ot)*(at-ot)+(ut-st)*(ut-st))===Math.sqrt((O-ot)*(O-ot)+(J-st)*(J-st))+Math.sqrt((at-O)*(at-O)+(ut-J)*(ut-J))}Er.default=br;var Ir=6378137;function jr(O){return B(O,(function(O,J){return O+function(O){var J,ot=0;switch(O.type){case"Polygon":return Ur(O.coordinates);case"MultiPolygon":for(J=0;J<O.coordinates.length;J++)ot+=Ur(O.coordinates[J]);return ot;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(J)}),0)}function Ur(O){var J=0;if(O&&O.length>0){J+=Math.abs(Vr(O[0]));for(var ot=1;ot<O.length;ot++)J-=Math.abs(Vr(O[ot]))}return J}function Vr(O){var J,ot,st,at,ut,ct,ht=0,pt=O.length;if(pt>2){for(ct=0;ct<pt;ct++)ct===pt-2?(st=pt-2,at=pt-1,ut=0):ct===pt-1?(st=pt-1,at=0,ut=1):(st=ct,at=ct+1,ut=ct+2),J=O[st],ot=O[at],ht+=(Xr(O[ut][0])-Xr(J[0]))*Math.sin(Xr(ot[1]));ht=ht*Ir*Ir/2}return ht}function Xr(O){return O*Math.PI/180}function Yr(O,J){return void 0===J&&(J={}),V(O,(function(O,ot){var st=ot.geometry.coordinates;return O+me(st[0],st[1],J)}),0)}function Hr(O,J,ot,st){if(!P(st=st||{}))throw new Error("options is invalid");var at,ut=[];if("Feature"===O.type)at=O.geometry.coordinates;else{if("LineString"!==O.type)throw new Error("input must be a LineString Feature or Geometry");at=O.coordinates}for(var ct,ht,pt,mt=at.length,xt=0,Nt=0;Nt<at.length&&!(J>=xt&&Nt===at.length-1);Nt++){if(xt>J&&0===ut.length){if(!(ct=J-xt))return ut.push(at[Nt]),h(ut);ht=mn(at[Nt],at[Nt-1])-180,pt=vn(at[Nt],ct,ht,st),ut.push(pt.geometry.coordinates)}if(xt>=ot)return(ct=ot-xt)?(ht=mn(at[Nt],at[Nt-1])-180,pt=vn(at[Nt],ct,ht,st),ut.push(pt.geometry.coordinates),h(ut)):(ut.push(at[Nt]),h(ut));if(xt>=J&&ut.push(at[Nt]),Nt===at.length-1)return h(ut);xt+=me(at[Nt],at[Nt+1],st)}if(xt<J&&at.length===mt)throw new Error("Start position is beyond line");var St=at[at.length-1];return h([St,St])}function Wr(O,J,ot){void 0===ot&&(ot={});for(var st=K(O),at=Q(J),ut=0;ut<at.length-1;ut++){var ct=!1;if(ot.ignoreEndVertices&&(0===ut&&(ct="start"),ut===at.length-2&&(ct="end"),0===ut&&ut+1===at.length-1&&(ct="both")),Jr(at[ut],at[ut+1],st,ct,void 0===ot.epsilon?null:ot.epsilon))return!0}return!1}function Jr(O,J,ot,st,at){var ut=ot[0],ct=ot[1],ht=O[0],pt=O[1],mt=J[0],xt=J[1],Nt=mt-ht,St=xt-pt,jt=(ot[0]-ht)*St-(ot[1]-pt)*Nt;if(null!==at){if(Math.abs(jt)>at)return!1}else if(0!==jt)return!1;return st?"start"===st?Math.abs(Nt)>=Math.abs(St)?Nt>0?ht<ut&&ut<=mt:mt<=ut&&ut<ht:St>0?pt<ct&&ct<=xt:xt<=ct&&ct<pt:"end"===st?Math.abs(Nt)>=Math.abs(St)?Nt>0?ht<=ut&&ut<mt:mt<ut&&ut<=ht:St>0?pt<=ct&&ct<xt:xt<ct&&ct<=pt:"both"===st&&(Math.abs(Nt)>=Math.abs(St)?Nt>0?ht<ut&&ut<mt:mt<ut&&ut<ht:St>0?pt<ct&&ct<xt:xt<ct&&ct<pt):Math.abs(Nt)>=Math.abs(St)?Nt>0?ht<=ut&&ut<=mt:mt<=ut&&ut<=ht:St>0?pt<=ct&&ct<=xt:xt<=ct&&ct<=pt}function Zr(O,J){var ot=rt(O),st=rt(J),at=ot.type,ut=st.type;switch(at){case"Point":switch(ut){case"MultiPoint":return function(O,J){var ot,st=!1;for(ot=0;ot<J.coordinates.length;ot++)if(Qr(J.coordinates[ot],O.coordinates)){st=!0;break}return st}(ot,st);case"LineString":return Wr(ot,st,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ye(ot,st,{ignoreBoundary:!0});default:throw new Error("feature2 "+ut+" geometry not supported")}case"MultiPoint":switch(ut){case"MultiPoint":return function(O,J){for(var ot=0;ot<O.coordinates.length;ot++){for(var st=!1,at=0;at<J.coordinates.length;at++)Qr(O.coordinates[ot],J.coordinates[at])&&(st=!0);if(!st)return!1}return!0}(ot,st);case"LineString":return function(O,J){for(var ot=!1,st=0;st<O.coordinates.length;st++){if(!Wr(O.coordinates[st],J))return!1;ot||(ot=Wr(O.coordinates[st],J,{ignoreEndVertices:!0}))}return ot}(ot,st);case"Polygon":case"MultiPolygon":return function(O,J){for(var ot=!0,st=!1,at=0;at<O.coordinates.length;at++){if(!(st=ye(O.coordinates[1],J))){ot=!1;break}st=ye(O.coordinates[1],J,{ignoreBoundary:!0})}return ot&&st}(ot,st);default:throw new Error("feature2 "+ut+" geometry not supported")}case"LineString":switch(ut){case"LineString":return function(O,J){for(var ot=0;ot<O.coordinates.length;ot++)if(!Wr(O.coordinates[ot],J))return!1;return!0}(ot,st);case"Polygon":case"MultiPolygon":return function(O,J){if(!Kr(Z(J),Z(O)))return!1;for(var ot=!1,st=0;st<O.coordinates.length-1;st++){if(!ye(O.coordinates[st],J))return!1;ot||(ot=ye(O.coordinates[st],J,{ignoreBoundary:!0})),ot||(ot=ye($r(O.coordinates[st],O.coordinates[st+1]),J,{ignoreBoundary:!0}))}return ot}(ot,st);default:throw new Error("feature2 "+ut+" geometry not supported")}case"Polygon":switch(ut){case"Polygon":case"MultiPolygon":return function(O,J){var ot=Z(O);if(!Kr(Z(J),ot))return!1;for(var st=0;st<O.coordinates[0].length;st++)if(!ye(O.coordinates[0][st],J))return!1;return!0}(ot,st);default:throw new Error("feature2 "+ut+" geometry not supported")}default:throw new Error("feature1 "+at+" geometry not supported")}}function Kr(O,J){return!(O[0]>J[0]||O[2]<J[2]||O[1]>J[1]||O[3]<J[3])}function Qr(O,J){return O[0]===J[0]&&O[1]===J[1]}function $r(O,J){return[(O[0]+J[0])/2,(O[1]+J[1])/2]}function ti(O,J,ot){void 0===ot&&(ot={}),ot.mask&&!ot.units&&(ot.units="kilometers");for(var st=[],at=O[0],ut=O[1],ct=O[2],ht=O[3],pt=J/me([at,ut],[ct,ut],ot)*(ct-at),mt=J/me([at,ut],[at,ht],ot)*(ht-ut),xt=ct-at,Nt=ht-ut,St=Math.floor(xt/pt),jt=(Nt-Math.floor(Nt/mt)*mt)/2,Wt=at+(xt-St*pt)/2;Wt<=ct;){for(var Ht=ut+jt;Ht<=ht;){var Zt=a([Wt,Ht],ot.properties);ot.mask?Zr(Zt,ot.mask)&&st.push(Zt):st.push(Zt),Ht+=mt}Wt+=pt}return f(st)}function ei(O,J){void 0===J&&(J={});var ot=J.precision,st=J.coordinates,at=J.mutate;if(ot=null==ot||isNaN(ot)?6:ot,st=null==st||isNaN(st)?3:st,!O)throw new Error("<geojson> is required");if("number"!=typeof ot)throw new Error("<precision> must be a number");if("number"!=typeof st)throw new Error("<coordinates> must be a number");!1!==at&&void 0!==at||(O=JSON.parse(JSON.stringify(O)));var ut=Math.pow(10,ot);return R(O,(function(O){!function(O,J,ot){O.length>ot&&O.splice(ot,O.length);for(var st=0;st<O.length;st++)O[st]=Math.round(O[st]*J)/J}(O,ut,st)})),O}function ni(O){if(!O)throw new Error("geojson is required");var J=[];return z(O,(function(O){J.push(O)})),f(J)}function ii(O,J){if(!O||!J)return!1;if(O.length!==J.length)return!1;for(var ot=0,st=O.length;ot<st;ot++)if(O[ot]instanceof Array&&J[ot]instanceof Array){if(!ii(O[ot],J[ot]))return!1}else if(O[ot]!==J[ot])return!1;return!0}function oi(O){if("Feature"!=O.type)throw new Error("The input must a geojson object of type Feature");if(void 0===O.geometry||null==O.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=O.geometry.type)throw new Error("The input must be a geojson Polygon");for(var J=O.geometry.coordinates.length,ot=[],st=0;st<J;st++){var at=O.geometry.coordinates[st];ci(at[0],at[at.length-1])||at.push(at[0]),ot.push.apply(ot,at.slice(0,at.length-1))}if(!function(O){for(var J={},ot=1,st=0,at=O.length;st<at;++st){if(Object.prototype.hasOwnProperty.call(J,O[st])){ot=0;break}J[O[st]]=1}return ot}(ot))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var ut=ot.length,ct=function ri(O,J,ot){if("Polygon"!==O.geometry.type)throw new Error("The input feature must be a Polygon");void 0===ot&&(ot=1);var st=O.geometry.coordinates,at=[],ut={};if(ot){for(var ct=[],ht=0;ht<st.length;ht++)for(var pt=0;pt<st[ht].length-1;pt++)ct.push(d(ht,pt));var mt=Zt();mt.load(ct)}for(var xt=0;xt<st.length;xt++)for(var Nt=0;Nt<st[xt].length-1;Nt++)if(ot)mt.search(d(xt,Nt)).forEach((function(O){var J=O.ring,ot=O.edge;g(xt,Nt,J,ot)}));else for(var St=0;St<st.length;St++)for(var jt=0;jt<st[St].length-1;jt++)g(xt,Nt,St,jt);return J||(at={type:"Feature",geometry:{type:"MultiPoint",coordinates:at}}),at;function g(O,ot,ct,ht){var pt,mt,xt=st[O][ot],Nt=st[O][ot+1],St=st[ct][ht],jt=st[ct][ht+1],Wt=function(O,J,ot,st){if(ii(O,ot)||ii(O,st)||ii(J,ot)||ii(st,ot))return null;var at=O[0],ut=O[1],ct=J[0],ht=J[1],pt=ot[0],mt=ot[1],xt=st[0],Nt=st[1],St=(at-ct)*(mt-Nt)-(ut-ht)*(pt-xt);return 0===St?null:[((at*ht-ut*ct)*(pt-xt)-(at-ct)*(pt*Nt-mt*xt))/St,((at*ht-ut*ct)*(mt-Nt)-(ut-ht)*(pt*Nt-mt*xt))/St]}(xt,Nt,St,jt);if(null!==Wt&&(pt=Nt[0]!==xt[0]?(Wt[0]-xt[0])/(Nt[0]-xt[0]):(Wt[1]-xt[1])/(Nt[1]-xt[1]),mt=jt[0]!==St[0]?(Wt[0]-St[0])/(jt[0]-St[0]):(Wt[1]-St[1])/(jt[1]-St[1]),!(pt>=1||pt<=0||mt>=1||mt<=0))){var Ht=Wt,Zt=!ut[Ht];Zt&&(ut[Ht]=!0),J?at.push(J(Wt,O,ot,xt,Nt,pt,ct,ht,St,jt,mt,Zt)):at.push(Wt)}}function d(O,J){var ot,at,ut,ct,ht=st[O][J],pt=st[O][J+1];return ht[0]<pt[0]?(ot=ht[0],at=pt[0]):(ot=pt[0],at=ht[0]),ht[1]<pt[1]?(ut=ht[1],ct=pt[1]):(ut=pt[1],ct=ht[1]),{minX:ot,minY:ut,maxX:at,maxY:ct,ring:O,edge:J}}}(O,(function(O,J,ot,st,at,ut,ct,ht,pt,mt,xt,Nt){return[O,J,ot,st,at,ut,ct,ht,pt,mt,xt,Nt]})),ht=ct.length;if(0==ht){var pt=[];for(st=0;st<J;st++)pt.push(l([O.geometry.coordinates[st]],{parent:-1,winding:li(O.geometry.coordinates[st])}));var mt=f(pt);return G(),q(),mt}var xt=[],Nt=[];for(st=0;st<J;st++){xt.push([]);for(var St=0;St<O.geometry.coordinates[st].length-1;St++)xt[st].push([new si(O.geometry.coordinates[st][hi(St+1,O.geometry.coordinates[st].length-1)],1,[st,St],[st,hi(St+1,O.geometry.coordinates[st].length-1)],void 0)]),Nt.push(new ai(O.geometry.coordinates[st][St],[st,hi(St-1,O.geometry.coordinates[st].length-1)],[st,St],void 0,void 0,!1,!0))}for(st=0;st<ht;st++)xt[ct[st][1]][ct[st][2]].push(new si(ct[st][0],ct[st][5],[ct[st][1],ct[st][2]],[ct[st][6],ct[st][7]],void 0)),ct[st][11]&&Nt.push(new ai(ct[st][0],[ct[st][1],ct[st][2]],[ct[st][6],ct[st][7]],void 0,void 0,!0,!0));var jt=Nt.length;for(st=0;st<xt.length;st++)for(St=0;St<xt[st].length;St++)xt[st][St].sort((function(O,J){return O.param<J.param?-1:1}));var Wt=[];for(st=0;st<jt;st++)Wt.push({minX:Nt[st].coord[0],minY:Nt[st].coord[1],maxX:Nt[st].coord[0],maxY:Nt[st].coord[1],index:st});var Ht=Zt();for(Ht.load(Wt),st=0;st<xt.length;st++)for(St=0;St<xt[st].length;St++)for(var Kt=0;Kt<xt[st][St].length;Kt++){ee=Kt==xt[st][St].length-1?xt[st][hi(St+1,O.geometry.coordinates[st].length-1)][0].coord:xt[st][St][Kt+1].coord;var Jt=Ht.search({minX:ee[0],minY:ee[1],maxX:ee[0],maxY:ee[1]})[0];xt[st][St][Kt].nxtIsectAlongEdgeIn=Jt.index}for(st=0;st<xt.length;st++)for(St=0;St<xt[st].length;St++)for(Kt=0;Kt<xt[st][St].length;Kt++){var ee=xt[st][St][Kt].coord,ne=(Jt=Ht.search({minX:ee[0],minY:ee[1],maxX:ee[0],maxY:ee[1]})[0]).index;ne<ut?Nt[ne].nxtIsectAlongRingAndEdge2=xt[st][St][Kt].nxtIsectAlongEdgeIn:ci(Nt[ne].ringAndEdge1,xt[st][St][Kt].ringAndEdgeIn)?Nt[ne].nxtIsectAlongRingAndEdge1=xt[st][St][Kt].nxtIsectAlongEdgeIn:Nt[ne].nxtIsectAlongRingAndEdge2=xt[st][St][Kt].nxtIsectAlongEdgeIn}var re=[];for(st=0,St=0;St<J;St++){var De=st;for(Kt=0;Kt<O.geometry.coordinates[St].length-1;Kt++)Nt[st].coord[0]<Nt[De].coord[0]&&(De=st),st++;var qe=Nt[De].nxtIsectAlongRingAndEdge2;for(Kt=0;Kt<Nt.length;Kt++)if(Nt[Kt].nxtIsectAlongRingAndEdge1==De||Nt[Kt].nxtIsectAlongRingAndEdge2==De){var Ge=Kt;break}var Be=ui([Nt[Ge].coord,Nt[De].coord,Nt[qe].coord],!0)?1:-1;re.push({isect:De,parent:-1,winding:Be})}for(re.sort((function(O,J){return Nt[O.isect].coord>Nt[J.isect].coord?-1:1})),pt=[];re.length>0;){var pn=re.pop(),wn=pn.isect,In=pn.parent,Kn=pn.winding,or=pt.length,sr=[Nt[wn].coord],ar=wn;if(Nt[wn].ringAndEdge1Walkable)var ur=Nt[wn].ringAndEdge1,lr=Nt[wn].nxtIsectAlongRingAndEdge1;else ur=Nt[wn].ringAndEdge2,lr=Nt[wn].nxtIsectAlongRingAndEdge2;for(;!ci(Nt[wn].coord,Nt[lr].coord);){sr.push(Nt[lr].coord);var cr=void 0;for(st=0;st<re.length;st++)if(re[st].isect==lr){cr=st;break}if(null!=cr&&re.splice(cr,1),ci(ur,Nt[lr].ringAndEdge1)){if(ur=Nt[lr].ringAndEdge2,Nt[lr].ringAndEdge2Walkable=!1,Nt[lr].ringAndEdge1Walkable){var hr={isect:lr};ui([Nt[ar].coord,Nt[lr].coord,Nt[Nt[lr].nxtIsectAlongRingAndEdge2].coord],1==Kn)?(hr.parent=In,hr.winding=-Kn):(hr.parent=or,hr.winding=Kn),re.push(hr)}ar=lr,lr=Nt[lr].nxtIsectAlongRingAndEdge2}else ur=Nt[lr].ringAndEdge1,Nt[lr].ringAndEdge1Walkable=!1,Nt[lr].ringAndEdge2Walkable&&(hr={isect:lr},ui([Nt[ar].coord,Nt[lr].coord,Nt[Nt[lr].nxtIsectAlongRingAndEdge1].coord],1==Kn)?(hr.parent=In,hr.winding=-Kn):(hr.parent=or,hr.winding=Kn),re.push(hr)),ar=lr,lr=Nt[lr].nxtIsectAlongRingAndEdge1}sr.push(Nt[lr].coord),pt.push(l([sr],{index:or,parent:In,winding:Kn,netWinding:void 0}))}function G(){for(var O=[],J=0;J<mt.features.length;J++)-1==mt.features[J].properties.parent&&O.push(J);if(O.length>1)for(J=0;J<O.length;J++){for(var ot=-1,st=0;st<mt.features.length;st++)O[J]!=st&&ye(mt.features[O[J]].geometry.coordinates[0][0],mt.features[st],{ignoreBoundary:!0})&&jr(mt.features[st])<1/0&&(ot=st);mt.features[O[J]].properties.parent=ot}}function q(){for(var O=0;O<mt.features.length;O++)if(-1==mt.features[O].properties.parent){var J=mt.features[O].properties.winding;mt.features[O].properties.netWinding=J,B(O,J)}}function B(O,J){for(var ot=0;ot<mt.features.length;ot++)if(mt.features[ot].properties.parent==O){var st=J+mt.features[ot].properties.winding;mt.features[ot].properties.netWinding=st,B(ot,st)}}return mt=f(pt),G(),q(),mt}var si=function(O,J,ot,st,at){this.coord=O,this.param=J,this.ringAndEdgeIn=ot,this.ringAndEdgeOut=st,this.nxtIsectAlongEdgeIn=at},ai=function(O,J,ot,st,at,ut,ct){this.coord=O,this.ringAndEdge1=J,this.ringAndEdge2=ot,this.nxtIsectAlongRingAndEdge1=st,this.nxtIsectAlongRingAndEdge2=at,this.ringAndEdge1Walkable=ut,this.ringAndEdge2Walkable=ct};function ui(O,J){if(void 0===J&&(J=!0),3!=O.length)throw new Error("This function requires an array of three points [x,y]");return(O[1][0]-O[0][0])*(O[2][1]-O[0][1])-(O[1][1]-O[0][1])*(O[2][0]-O[0][0])>=0==J}function li(O){for(var J=0,ot=0;ot<O.length-1;ot++)O[ot][0]<O[J][0]&&(J=ot);if(ui([O[hi(J-1,O.length-1)],O[J],O[hi(J+1,O.length-1)]],!0))var st=1;else st=-1;return st}function ci(O,J){if(!O||!J)return!1;if(O.length!=J.length)return!1;for(var ot=0,st=O.length;ot<st;ot++)if(O[ot]instanceof Array&&J[ot]instanceof Array){if(!ci(O[ot],J[ot]))return!1}else if(O[ot]!=J[ot])return!1;return!0}function hi(O,J){return(O%J+J)%J}var Nr=Math.PI/180,Cr=180/Math.PI,gi=function(O,J){this.lon=O,this.lat=J,this.x=Nr*O,this.y=Nr*J};gi.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},gi.prototype.antipode=function(){var O=-1*this.lat,J=this.lon<0?180+this.lon:-1*(180-this.lon);return new gi(J,O)};var di=function(){this.coords=[],this.length=0};di.prototype.move_to=function(O){this.length++,this.coords.push(O)};var yi=function(O){this.properties=O||{},this.geometries=[]};yi.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var O=[],J=0;J<this.geometries.length;J++)O.push(this.geometries[J].coords);return{geometry:{type:"MultiLineString",coordinates:O},type:"Feature",properties:this.properties}},yi.prototype.wkt=function(){for(var O="",J="LINESTRING(",n=function(O){J+=O[0]+" "+O[1]+","},ot=0;ot<this.geometries.length;ot++){if(0===this.geometries[ot].coords.length)return"LINESTRING(empty)";this.geometries[ot].coords.forEach(n),O+=J.substring(0,J.length-1)+")"}return O};var vi=function(O,J,ot){if(!O||void 0===O.x||void 0===O.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!J||void 0===J.x||void 0===J.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new gi(O.x,O.y),this.end=new gi(J.x,J.y),this.properties=ot||{};var st=this.start.x-this.end.x,at=this.start.y-this.end.y,ut=Math.pow(Math.sin(at/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(st/2),2);if(this.g=2*Math.asin(Math.sqrt(ut)),this.g===Math.PI)throw new Error("it appears "+O.view()+" and "+J.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+O+" and "+J)};function _i(O,J){var ot=[],st=Er();return z(J,(function(J){if(ot.forEach((function(O,J){O.id=J})),ot.length){var at=st.search(J);if(at.features.length){var ut=xi(J,at);ot=ot.filter((function(O){return O.id!==ut.id})),st.remove(ut),F(mi(ut,J),(function(O){ot.push(O),st.insert(O)}))}}else(ot=mi(O,J).features).forEach((function(O){O.bbox||(O.bbox=yn(Z(O)))})),st.load(f(ot))})),f(ot)}function mi(O,J){var ot=[],st=Q(O)[0],at=Q(O)[O.geometry.coordinates.length-1];if(Ei(st,K(J))||Ei(at,K(J)))return f([O]);var ut=Er(),ct=Zn(O);ut.load(ct);var ht=ut.search(J);if(!ht.features.length)return f([O]);var pt=xi(J,ht),mt=k(ct,(function(O,st,at){var ut=Q(st)[1],ct=K(J);return at===pt.id?(O.push(ct),ot.push(h(O)),Ei(ct,ut)?[ct]:[ct,ut]):(O.push(ut),O)}),[st]);return mt.length>1&&ot.push(h(mt)),f(ot)}function xi(O,J){if(!J.features.length)throw new Error("lines must contain features");if(1===J.features.length)return J.features[0];var ot,st=1/0;return F(J,(function(J){var at=Tr(J,O).properties.dist;at<st&&(ot=J,st=at)})),ot}function Ei(O,J){return O[0]===J[0]&&O[1]===J[1]}function bi(O,J,ot,st,at){void 0===at&&(at={});var ut=at.steps||64,ct=wi(ot),ht=wi(st),pt=Array.isArray(O)||"Feature"!==O.type?{}:O.properties;if(ct===ht)return h(_n(O,J,at).geometry.coordinates[0],pt);for(var mt=ct,xt=ct<ht?ht:ht+360,Nt=mt,St=[],jt=0;Nt<xt;)St.push(vn(O,J,Nt,at).geometry.coordinates),Nt=mt+360*++jt/ut;return Nt>xt&&St.push(vn(O,J,xt,at).geometry.coordinates),h(St,pt)}function wi(O){var J=O%360;return J<0&&(J+=360),J}function Ii(O,J){void 0===J&&(J={});var ot=rt(O);switch(J.properties||"Feature"!==O.type||(J.properties=O.properties),ot.type){case"Polygon":return Ni(ot,J);case"MultiPolygon":return function(O,J){void 0===J&&(J={});var ot=rt(O).coordinates,st=J.properties?J.properties:"Feature"===O.type?O.properties:{},at=[];return ot.forEach((function(O){at.push(Si(O,st))})),f(at)}(ot,J);default:throw new Error("invalid poly")}}function Ni(O,J){return void 0===J&&(J={}),Si(rt(O).coordinates,J.properties?J.properties:"Feature"===O.type?O.properties:{})}function Si(O,J){return O.length>1?g(O,J):h(O[0],J)}function Ci(O,J){var ot,st,at;void 0===J&&(J={});var ut=J.properties,ct=null===(ot=J.autoComplete)||void 0===ot||ot,ht=null===(st=J.orderCoords)||void 0===st||st;if("FeatureCollection"===(null!==(at=J.mutate)&&void 0!==at&&at||(O=Ie(O)),O.type)){var pt=[];return O.features.forEach((function(O){pt.push(Q(Pi(O,{},ct,ht)))})),y(pt,ut)}return Pi(O,ut,ct,ht)}function Pi(O,J,ot,st){J=J||("Feature"===O.type?O.properties:{});var at=rt(O),ut=at.coordinates,ct=at.type;if(!ut.length)throw new Error("line must contain coordinates");switch(ct){case"LineString":return ot&&(ut=Mi(ut)),l([ut],J);case"MultiLineString":var ht=[],pt=0;return ut.forEach((function(O){if(ot&&(O=Mi(O)),st){var J=function(O){var J=O[0],ot=O[1],st=O[2],at=O[3];return Math.abs(J-st)*Math.abs(ot-at)}(Z(h(O)));J>pt?(ht.unshift(O),pt=J):ht.push(O)}else ht.push(O)})),l(ht,J);default:throw new Error("geometry type "+ct+" is not supported")}}function Mi(O){var J=O[0],ot=J[0],st=J[1],at=O[O.length-1],ut=at[0],ct=at[1];return ot===ut&&st===ct||O.push(J),O}function Li(O,J){var ot,st,at,ut,ct,ht,pt;for(st=1;st<=8;st*=2){for(ot=[],ut=!(Ri(at=O[O.length-1],J)&st),ct=0;ct<O.length;ct++)(pt=!(Ri(ht=O[ct],J)&st))!==ut&&ot.push(Oi(at,ht,st,J)),pt&&ot.push(ht),at=ht,ut=pt;if(!(O=ot).length)break}return ot}function Oi(O,J,ot,st){return 8&ot?[O[0]+(J[0]-O[0])*(st[3]-O[1])/(J[1]-O[1]),st[3]]:4&ot?[O[0]+(J[0]-O[0])*(st[1]-O[1])/(J[1]-O[1]),st[1]]:2&ot?[st[2],O[1]+(J[1]-O[1])*(st[2]-O[0])/(J[0]-O[0])]:1&ot?[st[0],O[1]+(J[1]-O[1])*(st[0]-O[0])/(J[0]-O[0])]:null}function Ri(O,J){var ot=0;return O[0]<J[0]?ot|=1:O[0]>J[2]&&(ot|=2),O[1]<J[1]?ot|=4:O[1]>J[3]&&(ot|=8),ot}function Ti(O,J){for(var ot=[],st=0,at=O;st<at.length;st++){var ut=Li(at[st],J);ut.length>0&&(ut[0][0]===ut[ut.length-1][0]&&ut[0][1]===ut[ut.length-1][1]||ut.push(ut[0]),ut.length>=4&&ot.push(ut))}return ot}vi.prototype.interpolate=function(O){var J=Math.sin((1-O)*this.g)/Math.sin(this.g),ot=Math.sin(O*this.g)/Math.sin(this.g),st=J*Math.cos(this.start.y)*Math.cos(this.start.x)+ot*Math.cos(this.end.y)*Math.cos(this.end.x),at=J*Math.cos(this.start.y)*Math.sin(this.start.x)+ot*Math.cos(this.end.y)*Math.sin(this.end.x),ut=J*Math.sin(this.start.y)+ot*Math.sin(this.end.y),ct=Cr*Math.atan2(ut,Math.sqrt(Math.pow(st,2)+Math.pow(at,2)));return[Cr*Math.atan2(at,st),ct]},vi.prototype.Arc=function(O,J){var ot=[];if(!O||O<=2)ot.push([this.start.lon,this.start.lat]),ot.push([this.end.lon,this.end.lat]);else for(var st=1/(O-1),at=0;at<O;++at){var ut=st*at,ct=this.interpolate(ut);ot.push(ct)}for(var ht=!1,pt=0,mt=J&&J.offset?J.offset:10,xt=180-mt,Nt=-180+mt,St=360-mt,jt=1;jt<ot.length;++jt){var Wt=ot[jt-1][0],Ht=ot[jt][0],Zt=Math.abs(Ht-Wt);Zt>St&&(Ht>xt&&Wt<Nt||Wt>xt&&Ht<Nt)?ht=!0:Zt>pt&&(pt=Zt)}var Kt=[];if(ht&&pt<mt){var Jt=[];Kt.push(Jt);for(var ee=0;ee<ot.length;++ee){var ne=parseFloat(ot[ee][0]);if(ee>0&&Math.abs(ne-ot[ee-1][0])>St){var re=parseFloat(ot[ee-1][0]),De=parseFloat(ot[ee-1][1]),qe=parseFloat(ot[ee][0]),Ge=parseFloat(ot[ee][1]);if(re>-180&&re<Nt&&180===qe&&ee+1<ot.length&&ot[ee-1][0]>-180&&ot[ee-1][0]<Nt){Jt.push([-180,ot[ee][1]]),ee++,Jt.push([ot[ee][0],ot[ee][1]]);continue}if(re>xt&&re<180&&-180===qe&&ee+1<ot.length&&ot[ee-1][0]>xt&&ot[ee-1][0]<180){Jt.push([180,ot[ee][1]]),ee++,Jt.push([ot[ee][0],ot[ee][1]]);continue}if(re<Nt&&qe>xt){var Be=re;re=qe,qe=Be;var pn=De;De=Ge,Ge=pn}if(re>xt&&qe<Nt&&(qe+=360),re<=180&&qe>=180&&re<qe){var wn=(180-re)/(qe-re),In=wn*Ge+(1-wn)*De;Jt.push([ot[ee-1][0]>xt?180:-180,In]),(Jt=[]).push([ot[ee-1][0]>xt?-180:180,In]),Kt.push(Jt)}else Jt=[],Kt.push(Jt);Jt.push([ne,ot[ee][1]])}else Jt.push([ot[ee][0],ot[ee][1]])}}else{var Kn=[];Kt.push(Kn);for(var or=0;or<ot.length;++or)Kn.push([ot[or][0],ot[or][1]])}for(var sr=new yi(this.properties),ar=0;ar<Kt.length;++ar){var ur=new di;sr.geometries.push(ur);for(var lr=Kt[ar],cr=0;cr<lr.length;++cr)ur.move_to(lr[cr])}return sr};var Sr=Bt((function(O,J){function n(O){var J=[];for(var ot in O)J.push(ot);return J}(O.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),Mr=Bt((function(O,J){var ot="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(O){return"[object Arguments]"==Object.prototype.toString.call(O)}function i(O){return O&&"object"==typeof O&&"number"==typeof O.length&&Object.prototype.hasOwnProperty.call(O,"callee")&&!Object.prototype.propertyIsEnumerable.call(O,"callee")||!1}(J=O.exports=ot?r:i).supported=r,J.unsupported=i})),Lr=Bt((function(O){var J=Array.prototype.slice,ot=O.exports=function(O,st,at){return at||(at={}),O===st||(O instanceof Date&&st instanceof Date?O.getTime()===st.getTime():!O||!st||"object"!=typeof O&&"object"!=typeof st?at.strict?O===st:O==st:function(O,st,at){var ut,ct;if(r(O)||r(st))return!1;if(O.prototype!==st.prototype)return!1;if(Mr(O))return!!Mr(st)&&(O=J.call(O),st=J.call(st),ot(O,st,at));if(i(O)){if(!i(st))return!1;if(O.length!==st.length)return!1;for(ut=0;ut<O.length;ut++)if(O[ut]!==st[ut])return!1;return!0}try{var ht=Sr(O),pt=Sr(st)}catch(O){return!1}if(ht.length!=pt.length)return!1;for(ht.sort(),pt.sort(),ut=ht.length-1;ut>=0;ut--)if(ht[ut]!=pt[ut])return!1;for(ut=ht.length-1;ut>=0;ut--)if(ct=ht[ut],!ot(O[ct],st[ct],at))return!1;return typeof O==typeof st}(O,st,at))};function r(O){return null==O}function i(O){return!(!O||"object"!=typeof O||"number"!=typeof O.length||"function"!=typeof O.copy||"function"!=typeof O.slice||O.length>0&&"number"!=typeof O[0])}}));function ki(O,J,ot){if(void 0===ot&&(ot={}),!P(ot=ot||{}))throw new Error("options is invalid");var st,at=ot.tolerance||0,ut=[],ct=Er(),ht=Zn(O);return ct.load(ht),U(J,(function(O){var J=!1;O&&(F(ct.search(O),(function(ot){if(!1===J){var ut=Q(O).sort(),ct=Q(ot).sort();Lr(ut,ct)||(0===at?Wr(ut[0],ot)&&Wr(ut[1],ot):Tr(ot,ut[0]).properties.dist<=at&&Tr(ot,ut[1]).properties.dist<=at)?(J=!0,st=st?Gi(st,O):O):(0===at?Wr(ct[0],O)&&Wr(ct[1],O):Tr(O,ct[0]).properties.dist<=at&&Tr(O,ct[1]).properties.dist<=at)&&(st=st?Gi(st,ot):ot)}})),!1===J&&st&&(ut.push(st),st=void 0))})),st&&ut.push(st),f(ut)}function Gi(O,J){var ot=Q(J),st=Q(O),at=st[0],ut=st[st.length-1],ct=O.geometry.coordinates;return Lr(ot[0],at)?ct.unshift(ot[1]):Lr(ot[0],ut)?ct.push(ot[1]):Lr(ot[1],at)?ct.unshift(ot[0]):Lr(ot[1],ut)&&ct.push(ot[0]),O}function qi(O){var J=O%360;return J<0&&(J+=360),J}function Bi(O,J,ot){var st;return void 0===ot&&(ot={}),(st=ot.final?zi(K(J),K(O)):zi(K(O),K(J)))>180?-(360-st):st}function zi(O,J){var ot=I(O[1]),st=I(J[1]),at=I(J[0]-O[0]);at>Math.PI&&(at-=2*Math.PI),at<-Math.PI&&(at+=2*Math.PI);var ut=Math.log(Math.tan(st/2+Math.PI/4)/Math.tan(ot/2+Math.PI/4));return(w(Math.atan2(at,ut))+360)%360}function ji(O,ot,st,at){void 0===at&&(at={});var ut=ot<0,ct=N(Math.abs(ot),at.units,"meters");ut&&(ct=-Math.abs(ct));var ht=K(O),pt=function(O,ot,st,at){var ut=ot/(at=void 0===at?J:Number(at)),ct=O[0]*Math.PI/180,ht=I(O[1]),pt=I(st),mt=ut*Math.cos(pt),xt=ht+mt;Math.abs(xt)>Math.PI/2&&(xt=xt>0?Math.PI-xt:-Math.PI-xt);var Nt=Math.log(Math.tan(xt/2+Math.PI/4)/Math.tan(ht/2+Math.PI/4)),St=Math.abs(Nt)>1e-11?mt/Nt:Math.cos(ht);return[(180*(ct+ut*Math.sin(pt)/St)/Math.PI+540)%360-180,180*xt/Math.PI]}(ht,ct,st);return pt[0]+=pt[0]-ht[0]>180?-360:ht[0]-pt[0]>180?360:0,a(pt,at.properties)}function Ui(O,J,ot,st,at,ut){for(var ct=0;ct<O.length;ct++){var ht=O[ct],pt=O[ct+1];ct===O.length-1&&(pt=O[0]),st=Xi(ht,pt,J),ot<=0&&st>0?Xi(J,ht,at)<0||(at=ht):ot>0&&st<=0&&(Vi(J,ht,ut)||(ut=ht)),ot=st}return[at,ut]}function Vi(O,J,ot){return Xi(O,J,ot)>0}function Xi(O,J,ot){return(J[0]-O[0])*(ot[1]-O[1])-(ot[0]-O[0])*(J[1]-O[1])}function Yi(O){for(var J,ot,st=Q(O),at=0,ut=1;ut<st.length;)J=ot||st[0],at+=((ot=st[ut])[0]-J[0])*(ot[1]+J[1]),ut++;return at>0}function Hi(O,J){switch("Feature"===O.type?O.geometry.type:O.type){case"GeometryCollection":return q(O,(function(O){Hi(O,J)})),O;case"LineString":return Wi(Q(O),J),O;case"Polygon":return Ji(Q(O),J),O;case"MultiLineString":return Q(O).forEach((function(O){Wi(O,J)})),O;case"MultiPolygon":return Q(O).forEach((function(O){Ji(O,J)})),O;case"Point":case"MultiPoint":return O}}function Wi(O,J){Yi(O)===J&&O.reverse()}function Ji(O,J){Yi(O[0])!==J&&O[0].reverse();for(var ot=1;ot<O.length;ot++)Yi(O[ot])===J&&O[ot].reverse()}var zr={successCallback:null,verbose:!1,polygons:!1},pi={};function $i(O,J,ot,st){st=st||{};for(var at=Object.keys(zr),ut=0;ut<at.length;ut++){var ct=at[ut],ht=st[ct];ht=null!=ht?ht:zr[ct],pi[ct]=ht}pi.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+J+":"+(J+ot)+"]");var pt,mt=function(O,J,ot){for(var st=O.length-1,at=O[0].length-1,ut={rows:st,cols:at,cells:[]},ct=J+Math.abs(ot),ht=0;ht<st;++ht){ut.cells[ht]=[];for(var pt=0;pt<at;++pt){var mt=0,xt=O[ht+1][pt],Nt=O[ht+1][pt+1],St=O[ht][pt+1],jt=O[ht][pt];if(!(isNaN(xt)||isNaN(Nt)||isNaN(St)||isNaN(jt))){mt|=xt<J?0:xt>ct?128:64,mt|=Nt<J?0:Nt>ct?32:16,mt|=St<J?0:St>ct?8:4;var Wt=+(mt|=jt<J?0:jt>ct?2:1),Ht=0;if(17===mt||18===mt||33===mt||34===mt||38===mt||68===mt||72===mt||98===mt||102===mt||132===mt||136===mt||137===mt||152===mt||153===mt){var Zt=(xt+Nt+St+jt)/4;Ht=Zt>ct?2:Zt<J?0:1,34===mt?1===Ht?mt=35:0===Ht&&(mt=136):136===mt?1===Ht?(mt=35,Ht=4):0===Ht&&(mt=34):17===mt?1===Ht?(mt=155,Ht=4):0===Ht&&(mt=153):68===mt?1===Ht?(mt=103,Ht=4):0===Ht&&(mt=102):153===mt?1===Ht&&(mt=155):102===mt?1===Ht&&(mt=103):152===mt?Ht<2&&(mt=156,Ht=1):137===mt?Ht<2&&(mt=139,Ht=1):98===mt?Ht<2&&(mt=99,Ht=1):38===mt?Ht<2&&(mt=39,Ht=1):18===mt?Ht>0?(mt=156,Ht=4):mt=152:33===mt?Ht>0?(mt=139,Ht=4):mt=137:72===mt?Ht>0?(mt=99,Ht=4):mt=98:132===mt&&(Ht>0?(mt=39,Ht=4):mt=38)}if(0!=mt&&170!=mt){var Kt,Jt,ee,ne,re,De,qe,Ge;Kt=Jt=ee=ne=re=De=qe=Ge=.5;var Be=[];1===mt?(ee=1-Vo(J,St,jt),Ge=1-Vo(J,xt,jt),Be.push(Io[mt])):169===mt?(ee=Vo(ct,jt,St),Ge=Vo(ct,jt,xt),Be.push(Io[mt])):4===mt?(De=1-Vo(J,Nt,St),ne=Vo(J,jt,St),Be.push(bo[mt])):166===mt?(De=Vo(ct,St,Nt),ne=1-Vo(ct,St,jt),Be.push(bo[mt])):16===mt?(re=Vo(J,St,Nt),Jt=Vo(J,xt,Nt),Be.push(Eo[mt])):154===mt?(re=1-Vo(ct,Nt,St),Jt=1-Vo(ct,Nt,xt),Be.push(Eo[mt])):64===mt?(qe=Vo(J,jt,xt),Kt=1-Vo(J,Nt,xt),Be.push(So[mt])):106===mt?(qe=1-Vo(ct,xt,jt),Kt=Vo(ct,xt,Nt),Be.push(So[mt])):168===mt?(ne=Vo(ct,jt,St),ee=Vo(J,jt,St),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Be.push(wo[mt]),Be.push(Io[mt])):2===mt?(ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Be.push(wo[mt]),Be.push(Io[mt])):162===mt?(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),Be.push(wo[mt]),Be.push(Io[mt])):8===mt?(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),ne=Vo(ct,jt,St),ee=Vo(J,jt,St),Be.push(Eo[mt]),Be.push(bo[mt])):138===mt?(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt),Be.push(Eo[mt]),Be.push(bo[mt])):32===mt?(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt),Be.push(Eo[mt]),Be.push(bo[mt])):42===mt?(Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt),Be.push(No[mt]),Be.push(So[mt])):128===mt&&(Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt),Be.push(No[mt]),Be.push(So[mt])),5===mt?(De=1-Vo(J,Nt,St),Ge=1-Vo(J,xt,jt),Be.push(bo[mt])):165===mt?(De=Vo(ct,St,Nt),Ge=Vo(ct,jt,xt),Be.push(bo[mt])):20===mt?(ne=Vo(J,jt,St),Jt=Vo(J,xt,Nt),Be.push(wo[mt])):150===mt?(ne=1-Vo(ct,St,jt),Jt=1-Vo(ct,Nt,xt),Be.push(wo[mt])):80===mt?(re=Vo(J,St,Nt),qe=Vo(J,jt,xt),Be.push(Eo[mt])):90===mt?(re=1-Vo(ct,Nt,St),qe=1-Vo(ct,xt,jt),Be.push(Eo[mt])):65===mt?(ee=1-Vo(J,St,jt),Kt=1-Vo(J,Nt,xt),Be.push(Io[mt])):105===mt?(ee=Vo(ct,jt,St),Kt=Vo(ct,xt,Nt),Be.push(Io[mt])):160===mt?(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Be.push(Eo[mt]),Be.push(bo[mt])):10===mt?(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Be.push(Eo[mt]),Be.push(bo[mt])):130===mt?(ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt),Be.push(wo[mt]),Be.push(Io[mt])):40===mt?(ne=Vo(ct,jt,St),ee=Vo(J,jt,St),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt),Be.push(wo[mt]),Be.push(Io[mt])):101===mt?(De=Vo(ct,St,Nt),Kt=Vo(ct,xt,Nt),Be.push(bo[mt])):69===mt?(De=1-Vo(J,Nt,St),Kt=1-Vo(J,Nt,xt),Be.push(bo[mt])):149===mt?(Ge=Vo(ct,jt,xt),Jt=1-Vo(ct,Nt,xt),Be.push(No[mt])):21===mt?(Ge=1-Vo(J,xt,jt),Jt=Vo(J,xt,Nt),Be.push(No[mt])):86===mt?(ne=1-Vo(ct,St,jt),qe=1-Vo(ct,xt,jt),Be.push(wo[mt])):84===mt?(ne=Vo(J,jt,St),qe=Vo(J,jt,xt),Be.push(wo[mt])):89===mt?(re=1-Vo(ct,Nt,St),ee=Vo(ct,jt,St),Be.push(Io[mt])):81===mt?(re=Vo(J,St,Nt),ee=1-Vo(J,St,jt),Be.push(Io[mt])):96===mt?(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),qe=Vo(J,jt,xt),Kt=Vo(ct,xt,Nt),Be.push(Eo[mt]),Be.push(bo[mt])):74===mt?(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),qe=1-Vo(ct,xt,jt),Kt=1-Vo(J,Nt,xt),Be.push(Eo[mt]),Be.push(bo[mt])):24===mt?(re=1-Vo(ct,Nt,St),ne=Vo(ct,jt,St),ee=Vo(J,jt,St),Jt=Vo(J,xt,Nt),Be.push(Eo[mt]),Be.push(Io[mt])):146===mt?(re=Vo(J,St,Nt),ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),Jt=1-Vo(ct,Nt,xt),Be.push(Eo[mt]),Be.push(Io[mt])):6===mt?(De=1-Vo(J,Nt,St),ne=1-Vo(ct,St,jt),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Be.push(bo[mt]),Be.push(wo[mt])):164===mt?(De=Vo(ct,St,Nt),ne=Vo(J,jt,St),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Be.push(bo[mt]),Be.push(wo[mt])):129===mt?(ee=1-Vo(J,St,jt),Ge=Vo(ct,jt,xt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt),Be.push(Io[mt]),Be.push(No[mt])):41===mt?(ee=Vo(ct,jt,St),Ge=1-Vo(J,xt,jt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt),Be.push(Io[mt]),Be.push(No[mt])):66===mt?(ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),qe=1-Vo(ct,xt,jt),Kt=1-Vo(J,Nt,xt),Be.push(wo[mt]),Be.push(Io[mt])):104===mt?(ne=Vo(ct,jt,St),ee=Vo(J,jt,St),qe=Vo(J,jt,xt),Kt=Vo(ct,xt,Nt),Be.push(Io[mt]),Be.push(Do[mt])):144===mt?(re=Vo(J,St,Nt),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Jt=1-Vo(ct,Nt,xt),Be.push(Eo[mt]),Be.push(So[mt])):26===mt?(re=1-Vo(ct,Nt,St),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Jt=Vo(J,xt,Nt),Be.push(Eo[mt]),Be.push(So[mt])):36===mt?(De=Vo(ct,St,Nt),ne=Vo(J,jt,St),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt),Be.push(bo[mt]),Be.push(wo[mt])):134===mt?(De=1-Vo(J,Nt,St),ne=1-Vo(ct,St,jt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt),Be.push(bo[mt]),Be.push(wo[mt])):9===mt?(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),ee=Vo(ct,jt,St),Ge=1-Vo(J,xt,jt),Be.push(Eo[mt]),Be.push(bo[mt])):161===mt?(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),ee=1-Vo(J,St,jt),Ge=Vo(ct,jt,xt),Be.push(Eo[mt]),Be.push(bo[mt])):37===mt?(De=Vo(ct,St,Nt),Ge=1-Vo(J,xt,jt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt),Be.push(bo[mt]),Be.push(No[mt])):133===mt?(De=1-Vo(J,Nt,St),Ge=Vo(ct,jt,xt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt),Be.push(bo[mt]),Be.push(No[mt])):148===mt?(ne=Vo(J,jt,St),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Jt=1-Vo(ct,Nt,xt),Be.push(wo[mt]),Be.push(So[mt])):22===mt?(ne=1-Vo(ct,St,jt),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Jt=Vo(J,xt,Nt),Be.push(wo[mt]),Be.push(So[mt])):82===mt?(re=Vo(J,St,Nt),ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),qe=1-Vo(ct,xt,jt),Be.push(Eo[mt]),Be.push(Io[mt])):88===mt?(re=1-Vo(ct,Nt,St),ne=Vo(ct,jt,St),ee=Vo(J,jt,St),qe=Vo(J,jt,xt),Be.push(Eo[mt]),Be.push(Io[mt])):73===mt?(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),ee=Vo(ct,jt,St),Kt=1-Vo(J,Nt,xt),Be.push(Eo[mt]),Be.push(bo[mt])):97===mt?(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),ee=1-Vo(J,St,jt),Kt=Vo(ct,xt,Nt),Be.push(Eo[mt]),Be.push(bo[mt])):145===mt?(re=Vo(J,St,Nt),ee=1-Vo(J,St,jt),Ge=Vo(ct,jt,xt),Jt=1-Vo(ct,Nt,xt),Be.push(Eo[mt]),Be.push(No[mt])):25===mt?(re=1-Vo(ct,Nt,St),ee=Vo(ct,jt,St),Ge=1-Vo(J,xt,jt),Jt=Vo(J,xt,Nt),Be.push(Eo[mt]),Be.push(No[mt])):70===mt?(De=1-Vo(J,Nt,St),ne=1-Vo(ct,St,jt),qe=1-Vo(ct,xt,jt),Kt=1-Vo(J,Nt,xt),Be.push(bo[mt]),Be.push(wo[mt])):100===mt?(De=Vo(ct,St,Nt),ne=Vo(J,jt,St),qe=Vo(J,jt,xt),Kt=Vo(ct,xt,Nt),Be.push(bo[mt]),Be.push(wo[mt])):34===mt?(0===Ht?(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),ne=Vo(ct,jt,St),ee=Vo(J,jt,St),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt)):(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt)),Be.push(Eo[mt]),Be.push(bo[mt]),Be.push(No[mt]),Be.push(So[mt])):35===mt?(4===Ht?(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),ne=Vo(ct,jt,St),ee=Vo(J,jt,St),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt)):(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt)),Be.push(Eo[mt]),Be.push(bo[mt]),Be.push(Io[mt]),Be.push(So[mt])):136===mt?(0===Ht?(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt)):(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),ne=Vo(ct,jt,St),ee=Vo(J,jt,St),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt)),Be.push(Eo[mt]),Be.push(bo[mt]),Be.push(No[mt]),Be.push(So[mt])):153===mt?(0===Ht?(re=Vo(J,St,Nt),ee=1-Vo(J,St,jt),Ge=1-Vo(J,xt,jt),Jt=Vo(J,xt,Nt)):(re=1-Vo(ct,Nt,St),ee=Vo(ct,jt,St),Ge=Vo(ct,jt,xt),Jt=1-Vo(ct,Nt,xt)),Be.push(Eo[mt]),Be.push(Io[mt])):102===mt?(0===Ht?(De=1-Vo(J,Nt,St),ne=Vo(J,jt,St),qe=Vo(J,jt,xt),Kt=1-Vo(J,Nt,xt)):(De=Vo(ct,St,Nt),ne=1-Vo(ct,St,jt),qe=1-Vo(ct,xt,jt),Kt=Vo(ct,xt,Nt)),Be.push(bo[mt]),Be.push(So[mt])):155===mt?(4===Ht?(re=Vo(J,St,Nt),ee=1-Vo(J,St,jt),Ge=1-Vo(J,xt,jt),Jt=Vo(J,xt,Nt)):(re=1-Vo(ct,Nt,St),ee=Vo(ct,jt,St),Ge=Vo(ct,jt,xt),Jt=1-Vo(ct,Nt,xt)),Be.push(Eo[mt]),Be.push(No[mt])):103===mt?(4===Ht?(De=1-Vo(J,Nt,St),ne=Vo(J,jt,St),qe=Vo(J,jt,xt),Kt=1-Vo(J,Nt,xt)):(De=Vo(ct,St,Nt),ne=1-Vo(ct,St,jt),qe=1-Vo(ct,xt,jt),Kt=Vo(ct,xt,Nt)),Be.push(bo[mt]),Be.push(wo[mt])):152===mt?(0===Ht?(re=Vo(J,St,Nt),ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Jt=Vo(J,xt,Nt)):(re=1-Vo(ct,Nt,St),ne=Vo(ct,jt,St),ee=Vo(J,jt,St),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Jt=1-Vo(ct,Nt,xt)),Be.push(Eo[mt]),Be.push(wo[mt]),Be.push(Io[mt])):156===mt?(4===Ht?(re=Vo(J,St,Nt),ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Jt=Vo(J,xt,Nt)):(re=1-Vo(ct,Nt,St),ne=Vo(ct,jt,St),ee=Vo(J,jt,St),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Jt=1-Vo(ct,Nt,xt)),Be.push(Eo[mt]),Be.push(Io[mt]),Be.push(So[mt])):137===mt?(0===Ht?(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),ee=1-Vo(J,St,jt),Ge=1-Vo(J,xt,jt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt)):(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),ee=Vo(ct,jt,St),Ge=Vo(ct,jt,xt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt)),Be.push(Eo[mt]),Be.push(bo[mt]),Be.push(Io[mt])):139===mt?(4===Ht?(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),ee=1-Vo(J,St,jt),Ge=1-Vo(J,xt,jt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt)):(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),ee=Vo(ct,jt,St),Ge=Vo(ct,jt,xt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt)),Be.push(Eo[mt]),Be.push(bo[mt]),Be.push(No[mt])):98===mt?(0===Ht?(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),ne=Vo(ct,jt,St),ee=Vo(J,jt,St),qe=Vo(J,jt,xt),Kt=1-Vo(J,Nt,xt)):(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),qe=1-Vo(ct,xt,jt),Kt=Vo(ct,xt,Nt)),Be.push(Eo[mt]),Be.push(bo[mt]),Be.push(So[mt])):99===mt?(4===Ht?(re=1-Vo(J,Nt,St),De=1-Vo(ct,Nt,St),ne=Vo(ct,jt,St),ee=Vo(J,jt,St),qe=Vo(J,jt,xt),Kt=1-Vo(J,Nt,xt)):(re=Vo(ct,St,Nt),De=Vo(J,St,Nt),ne=1-Vo(J,St,jt),ee=1-Vo(ct,St,jt),qe=1-Vo(ct,xt,jt),Kt=Vo(ct,xt,Nt)),Be.push(Eo[mt]),Be.push(bo[mt]),Be.push(Io[mt])):38===mt?(0===Ht?(De=1-Vo(J,Nt,St),ne=Vo(J,jt,St),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt)):(De=Vo(ct,St,Nt),ne=1-Vo(ct,St,jt),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt)),Be.push(bo[mt]),Be.push(No[mt]),Be.push(So[mt])):39===mt?(4===Ht?(De=1-Vo(J,Nt,St),ne=Vo(J,jt,St),Ge=Vo(J,jt,xt),qe=Vo(ct,jt,xt),Kt=1-Vo(ct,Nt,xt),Jt=1-Vo(J,Nt,xt)):(De=Vo(ct,St,Nt),ne=1-Vo(ct,St,jt),Ge=1-Vo(ct,xt,jt),qe=1-Vo(J,xt,jt),Kt=Vo(J,xt,Nt),Jt=Vo(ct,xt,Nt)),Be.push(bo[mt]),Be.push(wo[mt]),Be.push(So[mt])):85===mt&&(re=1,De=0,ne=1,ee=0,Ge=0,qe=1,Kt=0,Jt=1),(Kt<0||Kt>1||Jt<0||Jt>1||re<0||re>1||ne<0||ne>1||Ge<0||Ge>1||qe<0||qe>1)&&console.log("MarchingSquaresJS-isoBands: "+mt+" "+Wt+" "+xt+","+Nt+","+St+","+jt+" "+Ht+" "+Kt+" "+Jt+" "+re+" "+De+" "+ne+" "+ee+" "+Ge+" "+qe),ut.cells[ht][pt]={cval:mt,cval_real:Wt,flipped:Ht,topleft:Kt,topright:Jt,righttop:re,rightbottom:De,bottomright:ne,bottomleft:ee,leftbottom:Ge,lefttop:qe,edges:Be}}}}}return ut}(O,J,ot);return pi.polygons?(pi.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),pt=function(O){var J=[],ot=0;return O.cells.forEach((function(O,st){O.forEach((function(O,at){if(void 0!==O){var ut=ko[O.cval](O);"object"==typeof ut&&Xo(ut)?"object"==typeof ut[0]&&Xo(ut[0])?"object"==typeof ut[0][0]&&Xo(ut[0][0])?ut.forEach((function(O){O.forEach((function(O){O[0]+=at,O[1]+=st})),J[ot++]=O})):(ut.forEach((function(O){O[0]+=at,O[1]+=st})),J[ot++]=ut):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),J}(mt)):(pi.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),pt=function(O){for(var J=[],ot=O.rows,st=O.cols,at=[],ut=0;ut<ot;ut++)for(var ct=0;ct<st;ct++)if(void 0!==O.cells[ut][ct]&&O.cells[ut][ct].edges.length>0){var ht=Ho(O.cells[ut][ct]),pt=null,mt=ct,xt=ut;null!==ht&&at.push([ht.p[0]+mt,ht.p[1]+xt]);do{if(null===(pt=Wo(O.cells[xt][mt],ht.x,ht.y,ht.o)))break;if(at.push([pt.p[0]+mt,pt.p[1]+xt]),mt+=pt.x,ht=pt,(xt+=pt.y)<0||xt>=ot||mt<0||mt>=st||void 0===O.cells[xt][mt]){var Nt=Yo(O,mt-=pt.x,xt-=pt.y,pt.x,pt.y,pt.o);if(null===Nt)break;Nt.path.forEach((function(O){at.push(O)})),mt=Nt.i,xt=Nt.j,ht=Nt}}while(void 0!==O.cells[xt][mt]&&O.cells[xt][mt].edges.length>0);J.push(at),at=[],O.cells[ut][ct].edges.length>0&&ct--}return J}(mt)),"function"==typeof pi.successCallback&&pi.successCallback(pt),pt}var fi=64,Ai=16,Di=[],Fi=[],Qi=[],Ki=[],to=[],eo=[],no=[],ro=[],io=[],oo=[],so=[],ao=[],uo=[],lo=[],co=[],ho=[],po=[],fo=[],go=[],yo=[],vo=[],_o=[],mo=[],xo=[];no[85]=oo[85]=-1,ro[85]=so[85]=0,io[85]=ao[85]=1,go[85]=_o[85]=1,yo[85]=mo[85]=0,vo[85]=xo[85]=1,Di[85]=Ki[85]=0,Fi[85]=to[85]=-1,Qi[85]=co[85]=0,ho[85]=uo[85]=0,po[85]=lo[85]=1,eo[85]=fo[85]=1,_o[1]=_o[169]=0,mo[1]=mo[169]=-1,xo[1]=xo[169]=0,uo[1]=uo[169]=-1,lo[1]=lo[169]=0,co[1]=co[169]=0,oo[4]=oo[166]=0,so[4]=so[166]=-1,ao[4]=ao[166]=1,ho[4]=ho[166]=1,po[4]=po[166]=0,fo[4]=fo[166]=0,no[16]=no[154]=0,ro[16]=ro[154]=1,io[16]=io[154]=1,Ki[16]=Ki[154]=1,to[16]=to[154]=0,eo[16]=eo[154]=1,go[64]=go[106]=0,yo[64]=yo[106]=1,vo[64]=vo[106]=0,Di[64]=Di[106]=-1,Fi[64]=Fi[106]=0,Qi[64]=Qi[106]=1,go[2]=go[168]=0,yo[2]=yo[168]=-1,vo[2]=vo[168]=1,_o[2]=_o[168]=0,mo[2]=mo[168]=-1,xo[2]=xo[168]=0,uo[2]=uo[168]=-1,lo[2]=lo[168]=0,co[2]=co[168]=0,ho[2]=ho[168]=-1,po[2]=po[168]=0,fo[2]=fo[168]=1,no[8]=no[162]=0,ro[8]=ro[162]=-1,io[8]=io[162]=0,oo[8]=oo[162]=0,so[8]=so[162]=-1,ao[8]=ao[162]=1,uo[8]=uo[162]=1,lo[8]=lo[162]=0,co[8]=co[162]=1,ho[8]=ho[162]=1,po[8]=po[162]=0,fo[8]=fo[162]=0,no[32]=no[138]=0,ro[32]=ro[138]=1,io[32]=io[138]=1,oo[32]=oo[138]=0,so[32]=so[138]=1,ao[32]=ao[138]=0,Di[32]=Di[138]=1,Fi[32]=Fi[138]=0,Qi[32]=Qi[138]=0,Ki[32]=Ki[138]=1,to[32]=to[138]=0,eo[32]=eo[138]=1,_o[128]=_o[42]=0,mo[128]=mo[42]=1,xo[128]=xo[42]=1,go[128]=go[42]=0,yo[128]=yo[42]=1,vo[128]=vo[42]=0,Di[128]=Di[42]=-1,Fi[128]=Fi[42]=0,Qi[128]=Qi[42]=1,Ki[128]=Ki[42]=-1,to[128]=to[42]=0,eo[128]=eo[42]=0,oo[5]=oo[165]=-1,so[5]=so[165]=0,ao[5]=ao[165]=0,_o[5]=_o[165]=1,mo[5]=mo[165]=0,xo[5]=xo[165]=0,ho[20]=ho[150]=0,po[20]=po[150]=1,fo[20]=fo[150]=1,Ki[20]=Ki[150]=0,to[20]=to[150]=-1,eo[20]=eo[150]=1,no[80]=no[90]=-1,ro[80]=ro[90]=0,io[80]=io[90]=1,go[80]=go[90]=1,yo[80]=yo[90]=0,vo[80]=vo[90]=1,uo[65]=uo[105]=0,lo[65]=lo[105]=1,co[65]=co[105]=0,Di[65]=Di[105]=0,Fi[65]=Fi[105]=-1,Qi[65]=Qi[105]=0,no[160]=no[10]=-1,ro[160]=ro[10]=0,io[160]=io[10]=1,oo[160]=oo[10]=-1,so[160]=so[10]=0,ao[160]=ao[10]=0,_o[160]=_o[10]=1,mo[160]=mo[10]=0,xo[160]=xo[10]=0,go[160]=go[10]=1,yo[160]=yo[10]=0,vo[160]=vo[10]=1,ho[130]=ho[40]=0,po[130]=po[40]=1,fo[130]=fo[40]=1,uo[130]=uo[40]=0,lo[130]=lo[40]=1,co[130]=co[40]=0,Di[130]=Di[40]=0,Fi[130]=Fi[40]=-1,Qi[130]=Qi[40]=0,Ki[130]=Ki[40]=0,to[130]=to[40]=-1,eo[130]=eo[40]=1,oo[37]=oo[133]=0,so[37]=so[133]=1,ao[37]=ao[133]=1,_o[37]=_o[133]=0,mo[37]=mo[133]=1,xo[37]=xo[133]=0,Di[37]=Di[133]=-1,Fi[37]=Fi[133]=0,Qi[37]=Qi[133]=0,Ki[37]=Ki[133]=1,to[37]=to[133]=0,eo[37]=eo[133]=0,ho[148]=ho[22]=-1,po[148]=po[22]=0,fo[148]=fo[22]=0,_o[148]=_o[22]=0,mo[148]=mo[22]=-1,xo[148]=xo[22]=1,go[148]=go[22]=0,yo[148]=yo[22]=1,vo[148]=vo[22]=1,Ki[148]=Ki[22]=-1,to[148]=to[22]=0,eo[148]=eo[22]=1,no[82]=no[88]=0,ro[82]=ro[88]=-1,io[82]=io[88]=1,ho[82]=ho[88]=1,po[82]=po[88]=0,fo[82]=fo[88]=1,uo[82]=uo[88]=-1,lo[82]=lo[88]=0,co[82]=co[88]=1,go[82]=go[88]=0,yo[82]=yo[88]=-1,vo[82]=vo[88]=0,no[73]=no[97]=0,ro[73]=ro[97]=1,io[73]=io[97]=0,oo[73]=oo[97]=0,so[73]=so[97]=-1,ao[73]=ao[97]=0,uo[73]=uo[97]=1,lo[73]=lo[97]=0,co[73]=co[97]=0,Di[73]=Di[97]=1,Fi[73]=Fi[97]=0,Qi[73]=Qi[97]=1,no[145]=no[25]=0,ro[145]=ro[25]=-1,io[145]=io[25]=0,uo[145]=uo[25]=1,lo[145]=lo[25]=0,co[145]=co[25]=1,_o[145]=_o[25]=0,mo[145]=mo[25]=1,xo[145]=xo[25]=1,Ki[145]=Ki[25]=-1,to[145]=to[25]=0,eo[145]=eo[25]=0,oo[70]=oo[100]=0,so[70]=so[100]=1,ao[70]=ao[100]=0,ho[70]=ho[100]=-1,po[70]=po[100]=0,fo[70]=fo[100]=1,go[70]=go[100]=0,yo[70]=yo[100]=-1,vo[70]=vo[100]=1,Di[70]=Di[100]=1,Fi[70]=Fi[100]=0,Qi[70]=Qi[100]=0,oo[101]=oo[69]=0,so[101]=so[69]=1,ao[101]=ao[69]=0,Di[101]=Di[69]=1,Fi[101]=Fi[69]=0,Qi[101]=Qi[69]=0,_o[149]=_o[21]=0,mo[149]=mo[21]=1,xo[149]=xo[21]=1,Ki[149]=Ki[21]=-1,to[149]=to[21]=0,eo[149]=eo[21]=0,ho[86]=ho[84]=-1,po[86]=po[84]=0,fo[86]=fo[84]=1,go[86]=go[84]=0,yo[86]=yo[84]=-1,vo[86]=vo[84]=1,no[89]=no[81]=0,ro[89]=ro[81]=-1,io[89]=io[81]=0,uo[89]=uo[81]=1,lo[89]=lo[81]=0,co[89]=co[81]=1,no[96]=no[74]=0,ro[96]=ro[74]=1,io[96]=io[74]=0,oo[96]=oo[74]=-1,so[96]=so[74]=0,ao[96]=ao[74]=1,go[96]=go[74]=1,yo[96]=yo[74]=0,vo[96]=vo[74]=0,Di[96]=Di[74]=1,Fi[96]=Fi[74]=0,Qi[96]=Qi[74]=1,no[24]=no[146]=0,ro[24]=ro[146]=-1,io[24]=io[146]=1,ho[24]=ho[146]=1,po[24]=po[146]=0,fo[24]=fo[146]=1,uo[24]=uo[146]=0,lo[24]=lo[146]=1,co[24]=co[146]=1,Ki[24]=Ki[146]=0,to[24]=to[146]=-1,eo[24]=eo[146]=0,oo[6]=oo[164]=-1,so[6]=so[164]=0,ao[6]=ao[164]=1,ho[6]=ho[164]=-1,po[6]=po[164]=0,fo[6]=fo[164]=0,_o[6]=_o[164]=0,mo[6]=mo[164]=-1,xo[6]=xo[164]=1,go[6]=go[164]=1,yo[6]=yo[164]=0,vo[6]=vo[164]=0,uo[129]=uo[41]=0,lo[129]=lo[41]=1,co[129]=co[41]=1,_o[129]=_o[41]=0,mo[129]=mo[41]=1,xo[129]=xo[41]=0,Di[129]=Di[41]=-1,Fi[129]=Fi[41]=0,Qi[129]=Qi[41]=0,Ki[129]=Ki[41]=0,to[129]=to[41]=-1,eo[129]=eo[41]=0,ho[66]=ho[104]=0,po[66]=po[104]=1,fo[66]=fo[104]=0,uo[66]=uo[104]=-1,lo[66]=lo[104]=0,co[66]=co[104]=1,go[66]=go[104]=0,yo[66]=yo[104]=-1,vo[66]=vo[104]=0,Di[66]=Di[104]=0,Fi[66]=Fi[104]=-1,Qi[66]=Qi[104]=1,no[144]=no[26]=-1,ro[144]=ro[26]=0,io[144]=io[26]=0,_o[144]=_o[26]=1,mo[144]=mo[26]=0,xo[144]=xo[26]=1,go[144]=go[26]=0,yo[144]=yo[26]=1,vo[144]=vo[26]=1,Ki[144]=Ki[26]=-1,to[144]=to[26]=0,eo[144]=eo[26]=1,oo[36]=oo[134]=0,so[36]=so[134]=1,ao[36]=ao[134]=1,ho[36]=ho[134]=0,po[36]=po[134]=1,fo[36]=fo[134]=0,Di[36]=Di[134]=0,Fi[36]=Fi[134]=-1,Qi[36]=Qi[134]=1,Ki[36]=Ki[134]=1,to[36]=to[134]=0,eo[36]=eo[134]=0,no[9]=no[161]=-1,ro[9]=ro[161]=0,io[9]=io[161]=0,oo[9]=oo[161]=0,so[9]=so[161]=-1,ao[9]=ao[161]=0,uo[9]=uo[161]=1,lo[9]=lo[161]=0,co[9]=co[161]=0,_o[9]=_o[161]=1,mo[9]=mo[161]=0,xo[9]=xo[161]=1,no[136]=0,ro[136]=1,io[136]=1,oo[136]=0,so[136]=1,ao[136]=0,ho[136]=-1,po[136]=0,fo[136]=1,uo[136]=-1,lo[136]=0,co[136]=0,_o[136]=0,mo[136]=-1,xo[136]=0,go[136]=0,yo[136]=-1,vo[136]=1,Di[136]=1,Fi[136]=0,Qi[136]=0,Ki[136]=1,to[136]=0,eo[136]=1,no[34]=0,ro[34]=-1,io[34]=0,oo[34]=0,so[34]=-1,ao[34]=1,ho[34]=1,po[34]=0,fo[34]=0,uo[34]=1,lo[34]=0,co[34]=1,_o[34]=0,mo[34]=1,xo[34]=1,go[34]=0,yo[34]=1,vo[34]=0,Di[34]=-1,Fi[34]=0,Qi[34]=1,Ki[34]=-1,to[34]=0,eo[34]=0,no[35]=0,ro[35]=1,io[35]=1,oo[35]=0,so[35]=-1,ao[35]=1,ho[35]=1,po[35]=0,fo[35]=0,uo[35]=-1,lo[35]=0,co[35]=0,_o[35]=0,mo[35]=-1,xo[35]=0,go[35]=0,yo[35]=1,vo[35]=0,Di[35]=-1,Fi[35]=0,Qi[35]=1,Ki[35]=1,to[35]=0,eo[35]=1,no[153]=0,ro[153]=1,io[153]=1,uo[153]=-1,lo[153]=0,co[153]=0,_o[153]=0,mo[153]=-1,xo[153]=0,Ki[153]=1,to[153]=0,eo[153]=1,oo[102]=0,so[102]=-1,ao[102]=1,ho[102]=1,po[102]=0,fo[102]=0,go[102]=0,yo[102]=1,vo[102]=0,Di[102]=-1,Fi[102]=0,Qi[102]=1,no[155]=0,ro[155]=-1,io[155]=0,uo[155]=1,lo[155]=0,co[155]=1,_o[155]=0,mo[155]=1,xo[155]=1,Ki[155]=-1,to[155]=0,eo[155]=0,oo[103]=0,so[103]=1,ao[103]=0,ho[103]=-1,po[103]=0,fo[103]=1,go[103]=0,yo[103]=-1,vo[103]=1,Di[103]=1,Fi[103]=0,Qi[103]=0,no[152]=0,ro[152]=1,io[152]=1,ho[152]=-1,po[152]=0,fo[152]=1,uo[152]=-1,lo[152]=0,co[152]=0,_o[152]=0,mo[152]=-1,xo[152]=0,go[152]=0,yo[152]=-1,vo[152]=1,Ki[152]=1,to[152]=0,eo[152]=1,no[156]=0,ro[156]=-1,io[156]=1,ho[156]=1,po[156]=0,fo[156]=1,uo[156]=-1,lo[156]=0,co[156]=0,_o[156]=0,mo[156]=-1,xo[156]=0,go[156]=0,yo[156]=1,vo[156]=1,Ki[156]=-1,to[156]=0,eo[156]=1,no[137]=0,ro[137]=1,io[137]=1,oo[137]=0,so[137]=1,ao[137]=0,uo[137]=-1,lo[137]=0,co[137]=0,_o[137]=0,mo[137]=-1,xo[137]=0,Di[137]=1,Fi[137]=0,Qi[137]=0,Ki[137]=1,to[137]=0,eo[137]=1,no[139]=0,ro[139]=1,io[139]=1,oo[139]=0,so[139]=-1,ao[139]=0,uo[139]=1,lo[139]=0,co[139]=0,_o[139]=0,mo[139]=1,xo[139]=0,Di[139]=-1,Fi[139]=0,Qi[139]=0,Ki[139]=1,to[139]=0,eo[139]=1,no[98]=0,ro[98]=-1,io[98]=0,oo[98]=0,so[98]=-1,ao[98]=1,ho[98]=1,po[98]=0,fo[98]=0,uo[98]=1,lo[98]=0,co[98]=1,go[98]=0,yo[98]=1,vo[98]=0,Di[98]=-1,Fi[98]=0,Qi[98]=1,no[99]=0,ro[99]=1,io[99]=0,oo[99]=0,so[99]=-1,ao[99]=1,ho[99]=1,po[99]=0,fo[99]=0,uo[99]=-1,lo[99]=0,co[99]=1,go[99]=0,yo[99]=-1,vo[99]=0,Di[99]=1,Fi[99]=0,Qi[99]=1,oo[38]=0,so[38]=-1,ao[38]=1,ho[38]=1,po[38]=0,fo[38]=0,_o[38]=0,mo[38]=1,xo[38]=1,go[38]=0,yo[38]=1,vo[38]=0,Di[38]=-1,Fi[38]=0,Qi[38]=1,Ki[38]=-1,to[38]=0,eo[38]=0,oo[39]=0,so[39]=1,ao[39]=1,ho[39]=-1,po[39]=0,fo[39]=0,_o[39]=0,mo[39]=-1,xo[39]=1,go[39]=0,yo[39]=1,vo[39]=0,Di[39]=-1,Fi[39]=0,Qi[39]=1,Ki[39]=1,to[39]=0,eo[39]=0;var Co=function(O){return[[O.bottomleft,0],[0,0],[0,O.leftbottom]]},Po=function(O){return[[1,O.rightbottom],[1,0],[O.bottomright,0]]},Mo=function(O){return[[O.topright,1],[1,1],[1,O.righttop]]},Lo=function(O){return[[0,O.lefttop],[0,1],[O.topleft,1]]},Oo=function(O){return[[O.bottomright,0],[O.bottomleft,0],[0,O.leftbottom],[0,O.lefttop]]},Ro=function(O){return[[O.bottomright,0],[O.bottomleft,0],[1,O.righttop],[1,O.rightbottom]]},To=function(O){return[[1,O.righttop],[1,O.rightbottom],[O.topleft,1],[O.topright,1]]},Ao=function(O){return[[0,O.leftbottom],[0,O.lefttop],[O.topleft,1],[O.topright,1]]},Eo=[],bo=[],wo=[],Io=[],No=[],So=[],Do=[],Fo=[];Io[1]=No[1]=18,Io[169]=No[169]=18,wo[4]=bo[4]=12,wo[166]=bo[166]=12,Eo[16]=Fo[16]=4,Eo[154]=Fo[154]=4,So[64]=Do[64]=22,So[106]=Do[106]=22,wo[2]=So[2]=17,Io[2]=No[2]=18,wo[168]=So[168]=17,Io[168]=No[168]=18,Eo[8]=Io[8]=9,bo[8]=wo[8]=12,Eo[162]=Io[162]=9,bo[162]=wo[162]=12,Eo[32]=Fo[32]=4,bo[32]=Do[32]=1,Eo[138]=Fo[138]=4,bo[138]=Do[138]=1,No[128]=Fo[128]=21,So[128]=Do[128]=22,No[42]=Fo[42]=21,So[42]=Do[42]=22,bo[5]=No[5]=14,bo[165]=No[165]=14,wo[20]=Fo[20]=6,wo[150]=Fo[150]=6,Eo[80]=So[80]=11,Eo[90]=So[90]=11,Io[65]=Do[65]=3,Io[105]=Do[105]=3,Eo[160]=So[160]=11,bo[160]=No[160]=14,Eo[10]=So[10]=11,bo[10]=No[10]=14,wo[130]=Fo[130]=6,Io[130]=Do[130]=3,wo[40]=Fo[40]=6,Io[40]=Do[40]=3,bo[101]=Do[101]=1,bo[69]=Do[69]=1,No[149]=Fo[149]=21,No[21]=Fo[21]=21,wo[86]=So[86]=17,wo[84]=So[84]=17,Eo[89]=Io[89]=9,Eo[81]=Io[81]=9,Eo[96]=Do[96]=0,bo[96]=So[96]=15,Eo[74]=Do[74]=0,bo[74]=So[74]=15,Eo[24]=wo[24]=8,Io[24]=Fo[24]=7,Eo[146]=wo[146]=8,Io[146]=Fo[146]=7,bo[6]=So[6]=15,wo[6]=No[6]=16,bo[164]=So[164]=15,wo[164]=No[164]=16,Io[129]=Fo[129]=7,No[129]=Do[129]=20,Io[41]=Fo[41]=7,No[41]=Do[41]=20,wo[66]=Do[66]=2,Io[66]=So[66]=19,wo[104]=Do[104]=2,Io[104]=So[104]=19,Eo[144]=No[144]=10,So[144]=Fo[144]=23,Eo[26]=No[26]=10,So[26]=Fo[26]=23,bo[36]=Fo[36]=5,wo[36]=Do[36]=2,bo[134]=Fo[134]=5,wo[134]=Do[134]=2,Eo[9]=No[9]=10,bo[9]=Io[9]=13,Eo[161]=No[161]=10,bo[161]=Io[161]=13,bo[37]=Fo[37]=5,No[37]=Do[37]=20,bo[133]=Fo[133]=5,No[133]=Do[133]=20,wo[148]=No[148]=16,So[148]=Fo[148]=23,wo[22]=No[22]=16,So[22]=Fo[22]=23,Eo[82]=wo[82]=8,Io[82]=So[82]=19,Eo[88]=wo[88]=8,Io[88]=So[88]=19,Eo[73]=Do[73]=0,bo[73]=Io[73]=13,Eo[97]=Do[97]=0,bo[97]=Io[97]=13,Eo[145]=Io[145]=9,No[145]=Fo[145]=21,Eo[25]=Io[25]=9,No[25]=Fo[25]=21,bo[70]=Do[70]=1,wo[70]=So[70]=17,bo[100]=Do[100]=1,wo[100]=So[100]=17,Eo[34]=Io[34]=9,bo[34]=wo[34]=12,No[34]=Fo[34]=21,So[34]=Do[34]=22,Eo[136]=Fo[136]=4,bo[136]=Do[136]=1,wo[136]=So[136]=17,Io[136]=No[136]=18,Eo[35]=Fo[35]=4,bo[35]=wo[35]=12,Io[35]=No[35]=18,So[35]=Do[35]=22,Eo[153]=Fo[153]=4,Io[153]=No[153]=18,bo[102]=wo[102]=12,So[102]=Do[102]=22,Eo[155]=Io[155]=9,No[155]=Fo[155]=23,bo[103]=Do[103]=1,wo[103]=So[103]=17,Eo[152]=Fo[152]=4,wo[152]=So[152]=17,Io[152]=No[152]=18,Eo[156]=wo[156]=8,Io[156]=No[156]=18,So[156]=Fo[156]=23,Eo[137]=Fo[137]=4,bo[137]=Do[137]=1,Io[137]=No[137]=18,Eo[139]=Fo[139]=4,bo[139]=Io[139]=13,No[139]=Do[139]=20,Eo[98]=Io[98]=9,bo[98]=wo[98]=12,So[98]=Do[98]=22,Eo[99]=Do[99]=0,bo[99]=wo[99]=12,Io[99]=So[99]=19,bo[38]=wo[38]=12,No[38]=Fo[38]=21,So[38]=Do[38]=22,bo[39]=Fo[39]=5,wo[39]=No[39]=16,So[39]=Do[39]=22;var ko=[];function Vo(O,J,ot){return(O-J)/(ot-J)}function Xo(O){return O.constructor.toString().indexOf("Array")>-1}function Yo(O,J,ot,st,at,ut){for(var ct=O.cells[ot][J],ht=ct.cval_real,pt=J+st,mt=ot+at,xt=[],Nt=!1;!Nt;){if(void 0===O.cells[mt]||void 0===O.cells[mt][pt])if(mt-=at,pt-=st,ht=(ct=O.cells[mt][pt]).cval_real,-1===at)if(0===ut)if(1&ht)xt.push([pt,mt]),st=-1,at=0,ut=0;else{if(!(4&ht)){xt.push([pt+ct.bottomright,mt]),st=0,at=1,ut=1,Nt=!0;break}xt.push([pt+1,mt]),st=1,at=0,ut=0}else{if(!(1&ht)){if(4&ht){xt.push([pt+ct.bottomright,mt]),st=0,at=1,ut=1,Nt=!0;break}xt.push([pt+ct.bottomleft,mt]),st=0,at=1,ut=0,Nt=!0;break}xt.push([pt,mt]),st=-1,at=0,ut=0}else if(1===at)if(0===ut){if(!(ht&Ai)){if(ht&fi){xt.push([pt+ct.topleft,mt+1]),st=0,at=-1,ut=0,Nt=!0;break}xt.push([pt+ct.topright,mt+1]),st=0,at=-1,ut=1,Nt=!0;break}xt.push([pt+1,mt+1]),st=1,at=0,ut=1}else xt.push([pt+1,mt+1]),st=1,at=0,ut=1;else if(-1===st)if(0===ut){if(!(ht&fi)){if(1&ht){xt.push([pt,mt+ct.leftbottom]),st=1,at=0,ut=0,Nt=!0;break}xt.push([pt,mt+ct.lefttop]),st=1,at=0,ut=1,Nt=!0;break}xt.push([pt,mt+1]),st=0,at=1,ut=0}else{if(!(ht&fi)){console.log("MarchingSquaresJS-isoBands: wtf");break}xt.push([pt,mt+1]),st=0,at=1,ut=0}else{if(1!==st){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===ut){if(!(4&ht)){xt.push([pt+1,mt+ct.rightbottom]),st=-1,at=0,ut=0,Nt=!0;break}xt.push([pt+1,mt]),st=0,at=-1,ut=1}else{if(!(4&ht)){if(ht&Ai){xt.push([pt+1,mt+ct.righttop]),st=-1,at=0,ut=1;break}xt.push([pt+1,mt+ct.rightbottom]),st=-1,at=0,ut=0,Nt=!0;break}xt.push([pt+1,mt]),st=0,at=-1,ut=1}}else if(ht=(ct=O.cells[mt][pt]).cval_real,-1===st)if(0===ut)if(void 0!==O.cells[mt-1]&&void 0!==O.cells[mt-1][pt])st=0,at=-1,ut=1;else{if(!(1&ht)){xt.push([pt+ct.bottomright,mt]),st=0,at=1,ut=1,Nt=!0;break}xt.push([pt,mt])}else{if(!(ht&fi)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+pt+","+mt);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===st){if(0===ut){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==O.cells[mt+1]&&void 0!==O.cells[mt+1][pt])st=0,at=1,ut=0;else{if(!(ht&Ai)){xt.push([pt+ct.topleft,mt+1]),st=0,at=-1,ut=0,Nt=!0;break}xt.push([pt+1,mt+1]),st=1,at=0,ut=1}}else if(-1===at){if(1!==ut){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==O.cells[mt][pt+1])st=1,at=0,ut=1;else{if(!(4&ht)){xt.push([pt+1,mt+ct.righttop]),st=-1,at=0,ut=1,Nt=!0;break}xt.push([pt+1,mt]),st=0,at=-1,ut=1}}else{if(1!==at){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==ut){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==O.cells[mt][pt-1])st=-1,at=0,ut=0;else{if(!(ht&fi)){xt.push([pt,mt+ct.leftbottom]),st=1,at=0,ut=0,Nt=!0;break}xt.push([pt,mt+1]),st=0,at=1,ut=0}}if(mt+=at,(pt+=st)===J&&mt===ot)break}return{path:xt,i:pt,j:mt,x:st,y:at,o:ut}}function Ho(O){if(O.edges.length>0){var J=O.edges[O.edges.length-1],ot=O.cval_real;switch(J){case 0:return ot&Ai?{p:[1,O.righttop],x:-1,y:0,o:1}:{p:[O.topleft,1],x:0,y:-1,o:0};case 1:return 4&ot?{p:[O.topleft,1],x:0,y:-1,o:0}:{p:[1,O.rightbottom],x:-1,y:0,o:0};case 2:return 4&ot?{p:[O.bottomright,0],x:0,y:1,o:1}:{p:[O.topleft,1],x:0,y:-1,o:0};case 3:return 1&ot?{p:[O.topleft,1],x:0,y:-1,o:0}:{p:[O.bottomleft,0],x:0,y:1,o:0};case 4:return ot&Ai?{p:[1,O.righttop],x:-1,y:0,o:1}:{p:[O.topright,1],x:0,y:-1,o:1};case 5:return 4&ot?{p:[O.topright,1],x:0,y:-1,o:1}:{p:[1,O.rightbottom],x:-1,y:0,o:0};case 6:return 4&ot?{p:[O.bottomright,0],x:0,y:1,o:1}:{p:[O.topright,1],x:0,y:-1,o:1};case 7:return 1&ot?{p:[O.topright,1],x:0,y:-1,o:1}:{p:[O.bottomleft,0],x:0,y:1,o:0};case 8:return 4&ot?{p:[O.bottomright,0],x:0,y:1,o:1}:{p:[1,O.righttop],x:-1,y:0,o:1};case 9:return 1&ot?{p:[1,O.righttop],x:-1,y:0,o:1}:{p:[O.bottomleft,0],x:0,y:1,o:0};case 10:return 1&ot?{p:[0,O.leftbottom],x:1,y:0,o:0}:{p:[1,O.righttop],x:-1,y:0,o:1};case 11:return ot&fi?{p:[1,O.righttop],x:-1,y:0,o:1}:{p:[0,O.lefttop],x:1,y:0,o:1};case 12:return 4&ot?{p:[O.bottomright,0],x:0,y:1,o:1}:{p:[1,O.rightbottom],x:-1,y:0,o:0};case 13:return 1&ot?{p:[1,O.rightbottom],x:-1,y:0,o:0}:{p:[O.bottomleft,0],x:0,y:1,o:0};case 14:return 1&ot?{p:[0,O.leftbottom],x:1,y:0,o:0}:{p:[1,O.rightbottom],x:-1,y:0,o:0};case 15:return ot&fi?{p:[1,O.rightbottom],x:-1,y:0,o:0}:{p:[0,O.lefttop],x:1,y:0,o:1};case 16:return 4&ot?{p:[O.bottomright,0],x:0,y:1,o:1}:{p:[0,O.leftbottom],x:1,y:0,o:0};case 17:return ot&fi?{p:[O.bottomright,0],x:0,y:1,o:1}:{p:[0,O.lefttop],x:1,y:0,o:1};case 18:return 1&ot?{p:[0,O.leftbottom],x:1,y:0,o:0}:{p:[O.bottomleft,0],x:0,y:1,o:0};case 19:return ot&fi?{p:[O.bottomleft,0],x:0,y:1,o:0}:{p:[0,O.lefttop],x:1,y:0,o:1};case 20:return ot&fi?{p:[O.topleft,1],x:0,y:-1,o:0}:{p:[0,O.leftbottom],x:1,y:0,o:0};case 21:return ot&Ai?{p:[0,O.leftbottom],x:1,y:0,o:0}:{p:[O.topright,1],x:0,y:-1,o:1};case 22:return ot&fi?{p:[O.topleft,1],x:0,y:-1,o:0}:{p:[0,O.lefttop],x:1,y:0,o:1};case 23:return ot&Ai?{p:[0,O.lefttop],x:1,y:0,o:1}:{p:[O.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(O)}}return null}function Wo(O,J,ot,st){var at,ut,ct,ht,pt,mt=O.cval;switch(J){case-1:if(0===st)at=bo[mt],ct=oo[mt],ht=so[mt],pt=ao[mt];else at=Eo[mt],ct=no[mt],ht=ro[mt],pt=io[mt];break;case 1:if(0===st)at=No[mt],ct=_o[mt],ht=mo[mt],pt=xo[mt];else at=So[mt],ct=go[mt],ht=yo[mt],pt=vo[mt];break;default:switch(ot){case-1:if(0===st)at=Do[mt],ct=Di[mt],ht=Fi[mt],pt=Qi[mt];else at=Fo[mt],ct=Ki[mt],ht=to[mt],pt=eo[mt];break;case 1:if(0===st)at=Io[mt],ct=uo[mt],ht=lo[mt],pt=co[mt];else at=wo[mt],ct=ho[mt],ht=po[mt],pt=fo[mt]}}if(ut=O.edges.indexOf(at),void 0===O.edges[ut])return null;switch(function(O,J){delete O.edges[J];for(var ot=J+1;ot<O.edges.length;ot++)O.edges[ot-1]=O.edges[ot];O.edges.pop()}(O,ut),mt=O.cval_real,at){case 0:mt&Ai?(J=O.topleft,ot=1):(J=1,ot=O.righttop);break;case 1:4&mt?(J=1,ot=O.rightbottom):(J=O.topleft,ot=1);break;case 2:4&mt?(J=O.topleft,ot=1):(J=O.bottomright,ot=0);break;case 3:1&mt?(J=O.bottomleft,ot=0):(J=O.topleft,ot=1);break;case 4:mt&Ai?(J=O.topright,ot=1):(J=1,ot=O.righttop);break;case 5:4&mt?(J=1,ot=O.rightbottom):(J=O.topright,ot=1);break;case 6:4&mt?(J=O.topright,ot=1):(J=O.bottomright,ot=0);break;case 7:1&mt?(J=O.bottomleft,ot=0):(J=O.topright,ot=1);break;case 8:4&mt?(J=1,ot=O.righttop):(J=O.bottomright,ot=0);break;case 9:1&mt?(J=O.bottomleft,ot=0):(J=1,ot=O.righttop);break;case 10:1&mt?(J=1,ot=O.righttop):(J=0,ot=O.leftbottom);break;case 11:mt&fi?(J=0,ot=O.lefttop):(J=1,ot=O.righttop);break;case 12:4&mt?(J=1,ot=O.rightbottom):(J=O.bottomright,ot=0);break;case 13:1&mt?(J=O.bottomleft,ot=0):(J=1,ot=O.rightbottom);break;case 14:1&mt?(J=1,ot=O.rightbottom):(J=0,ot=O.leftbottom);break;case 15:mt&fi?(J=0,ot=O.lefttop):(J=1,ot=O.rightbottom);break;case 16:4&mt?(J=0,ot=O.leftbottom):(J=O.bottomright,ot=0);break;case 17:mt&fi?(J=0,ot=O.lefttop):(J=O.bottomright,ot=0);break;case 18:1&mt?(J=O.bottomleft,ot=0):(J=0,ot=O.leftbottom);break;case 19:mt&fi?(J=0,ot=O.lefttop):(J=O.bottomleft,ot=0);break;case 20:mt&fi?(J=0,ot=O.leftbottom):(J=O.topleft,ot=1);break;case 21:mt&Ai?(J=O.topright,ot=1):(J=0,ot=O.leftbottom);break;case 22:mt&fi?(J=0,ot=O.lefttop):(J=O.topleft,ot=1);break;case 23:mt&Ai?(J=O.topright,ot=1):(J=0,ot=O.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(O),null}return void 0!==J&&void 0!==ot&&void 0!==ct&&void 0!==ht&&void 0!==pt||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(O),console.log(J+" "+ot+" "+ct+" "+ht+" "+pt)),{p:[J,ot],x:ct,y:ht,o:pt}}function Jo(O){var J=[],ot=[];O.forEach((function(O){var st=jr(l([O]));ot.push(st),J.push({ring:O,area:st})})),ot.sort((function(O,J){return J-O}));var st=[];return ot.forEach((function(O){for(var ot=0;ot<J.length;ot++)if(J[ot].area===O){st.push(J[ot].ring),J.splice(ot,1);break}})),st}function Zo(O){for(var J=O.map((function(O){return{lrCoordinates:O,grouped:!1}})),ot=[];!Qo(J);)for(var st=0;st<J.length;st++)if(!J[st].grouped){var at=[];at.push(J[st].lrCoordinates),J[st].grouped=!0;for(var ut=l([J[st].lrCoordinates]),ct=st+1;ct<J.length;ct++)J[ct].grouped||Ko(l([J[ct].lrCoordinates]),ut)&&(at.push(J[ct].lrCoordinates),J[ct].grouped=!0);ot.push(at)}return ot}function Ko(O,J){for(var ot=bn(O),st=0;st<ot.features.length;st++)if(!ye(ot.features[st],J))return!1;return!0}function Qo(O){for(var J=0;J<O.length;J++)if(!1===O[J].grouped)return!1;return!0}function $o(O,J,ot){if(!P(ot=ot||{}))throw new Error("options is invalid");var st=ot.pivot,at=ot.mutate;if(!O)throw new Error("geojson is required");if(null==J||isNaN(J))throw new Error("angle is required");return 0===J||(st||(st=En(O)),!1!==at&&void 0!==at||(O=Ie(O)),R(O,(function(O){var ot=Bi(st,O)+J,at=Ar(st,O),ut=Q(ji(st,at,ot));O[0]=ut[0],O[1]=ut[1]}))),O}function ts(O,J,ot){if(!P(ot=ot||{}))throw new Error("options is invalid");var st=ot.origin,at=ot.mutate;if(!O)throw new Error("geojson required");if("number"!=typeof J||0===J)throw new Error("invalid factor");var ut=Array.isArray(st)||"object"==typeof st;return!0!==at&&(O=Ie(O)),"FeatureCollection"!==O.type||ut?es(O,J,st):(F(O,(function(ot,at){O.features[at]=es(ot,J,st)})),O)}function es(O,J,ot){var st="Point"===it(O);return ot=function(O,J){if(null==J&&(J="centroid"),Array.isArray(J)||"object"==typeof J)return K(J);var ot=O.bbox?O.bbox:Z(O),st=ot[0],at=ot[1],ut=ot[2],ct=ot[3];switch(J){case"sw":case"southwest":case"westsouth":case"bottomleft":return a([st,at]);case"se":case"southeast":case"eastsouth":case"bottomright":return a([ut,at]);case"nw":case"northwest":case"westnorth":case"topleft":return a([st,ct]);case"ne":case"northeast":case"eastnorth":case"topright":return a([ut,ct]);case"center":return xn(O);case void 0:case null:case"centroid":return En(O);default:throw new Error("invalid origin")}}(O,ot),1===J||st||R(O,(function(O){var st=Ar(ot,O),at=Bi(ot,O),ut=Q(ji(ot,st*J,at));O[0]=ut[0],O[1]=ut[1],3===O.length&&(O[2]*=J)})),O}function ns(O){var J=O[0],ot=O[1];return[ot[0]-J[0],ot[1]-J[1]]}function rs(O,J){return O[0]*J[1]-J[0]*O[1]}function os(O,J,ot){var st=[],at=E(J,ot),ut=Q(O),ct=[];return ut.forEach((function(O,J){if(J!==ut.length-1){var ot=(mt=O,xt=ut[J+1],Nt=at,St=Math.sqrt((mt[0]-xt[0])*(mt[0]-xt[0])+(mt[1]-xt[1])*(mt[1]-xt[1])),jt=mt[0]+Nt*(xt[1]-mt[1])/St,Wt=xt[0]+Nt*(xt[1]-mt[1])/St,[[jt,mt[1]+Nt*(mt[0]-xt[0])/St],[Wt,xt[1]+Nt*(mt[0]-xt[0])/St]]);if(st.push(ot),J>0){var ht=st[J-1],pt=function is(O,J){return!function(O,J){return 0===rs(ns(O),ns(J))}(O,J)&&function(O,J){var ot,st,at=O[0],ut=ns(O),ct=J[0],ht=ns(J),pt=rs(ut,ht);return function(O,J){return[O[0]+J[0],O[1]+J[1]]}(at,function(O,J){return[O*J[0],O*J[1]]}(rs((st=at,[(ot=ct)[0]-st[0],ot[1]-st[1]]),ht)/pt,ut))}(O,J)}(ot,ht);!1!==pt&&(ht[1]=pt,ot[0]=pt),ct.push(ht[0]),J===ut.length-2&&(ct.push(ot[0]),ct.push(ot[1]))}2===ut.length&&(ct.push(ot[0]),ct.push(ot[1]))}var mt,xt,Nt,St,jt,Wt})),h(ct,O.properties)}function ss(O,J,ot){var st=J[0]-O[0],at=J[1]-O[1],ut=ot[0]-J[0];return function(O){return(O>0)-(O<0)||+O}(st*(ot[1]-J[1])-ut*at)}function as(O,J){return J.geometry.coordinates[0].every((function(J){return ye(a(J),O)}))}ko[1]=ko[169]=Co,ko[4]=ko[166]=Po,ko[16]=ko[154]=Mo,ko[64]=ko[106]=Lo,ko[168]=ko[2]=Oo,ko[162]=ko[8]=Ro,ko[138]=ko[32]=To,ko[42]=ko[128]=Ao,ko[5]=ko[165]=function(O){return[[0,0],[0,O.leftbottom],[1,O.rightbottom],[1,0]]},ko[20]=ko[150]=function(O){return[[1,0],[O.bottomright,0],[O.topright,1],[1,1]]},ko[80]=ko[90]=function(O){return[[1,1],[1,O.righttop],[0,O.lefttop],[0,1]]},ko[65]=ko[105]=function(O){return[[O.bottomleft,0],[0,0],[0,1],[O.topleft,1]]},ko[160]=ko[10]=function(O){return[[1,O.righttop],[1,O.rightbottom],[0,O.leftbottom],[0,O.lefttop]]},ko[130]=ko[40]=function(O){return[[O.topleft,1],[O.topright,1],[O.bottomright,0],[O.bottomleft,0]]},ko[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},ko[101]=ko[69]=function(O){return[[1,O.rightbottom],[1,0],[0,0],[0,1],[O.topleft,1]]},ko[149]=ko[21]=function(O){return[[O.topright,1],[1,1],[1,0],[0,0],[0,O.leftbottom]]},ko[86]=ko[84]=function(O){return[[1,0],[O.bottomright,0],[0,O.lefttop],[0,1],[1,1]]},ko[89]=ko[81]=function(O){return[[1,1],[1,O.righttop],[O.bottomleft,0],[0,0],[0,1]]},ko[96]=ko[74]=function(O){return[[1,O.righttop],[1,O.rightbottom],[0,O.lefttop],[0,1],[O.topleft,1]]},ko[24]=ko[146]=function(O){return[[1,1],[1,O.righttop],[O.bottomright,0],[O.bottomleft,0],[O.topright,1]]},ko[6]=ko[164]=function(O){return[[1,O.rightbottom],[1,0],[O.bottomright,0],[0,O.leftbottom],[0,O.lefttop]]},ko[129]=ko[41]=function(O){return[[O.topright,1],[O.bottomleft,0],[0,0],[0,O.leftbottom],[O.topleft,1]]},ko[66]=ko[104]=function(O){return[[O.bottomright,0],[O.bottomleft,0],[0,O.lefttop],[0,1],[O.topleft,1]]},ko[144]=ko[26]=function(O){return[[1,1],[1,O.righttop],[0,O.leftbottom],[0,O.lefttop],[O.topright,1]]},ko[36]=ko[134]=function(O){return[[1,O.rightbottom],[1,0],[O.bottomright,0],[O.topleft,1],[O.topright,1]]},ko[9]=ko[161]=function(O){return[[1,O.righttop],[1,O.rightbottom],[O.bottomleft,0],[0,0],[0,O.leftbottom]]},ko[37]=ko[133]=function(O){return[[1,O.rightbottom],[1,0],[0,0],[0,O.leftbottom],[O.topleft,1],[O.topright,1]]},ko[148]=ko[22]=function(O){return[[1,1],[1,0],[O.bottomright,0],[0,O.leftbottom],[0,O.lefttop],[O.topright,1]]},ko[82]=ko[88]=function(O){return[[1,1],[1,O.righttop],[O.bottomright,0],[O.bottomleft,0],[0,O.lefttop],[0,1]]},ko[73]=ko[97]=function(O){return[[1,O.righttop],[1,O.rightbottom],[O.bottomleft,0],[0,0],[0,1],[O.topleft,1]]},ko[145]=ko[25]=function(O){return[[1,1],[1,O.righttop],[O.bottomleft,0],[0,0],[0,O.leftbottom],[O.topright,1]]},ko[70]=ko[100]=function(O){return[[1,O.rightbottom],[1,0],[O.bottomright,0],[0,O.lefttop],[0,1],[O.topleft,1]]},ko[34]=function(O){return[Ao(O),Ro(O)]},ko[35]=function(O){return[[1,O.righttop],[1,O.rightbottom],[O.bottomright,0],[O.bottomleft,0],[0,O.leftbottom],[0,O.lefttop],[O.topleft,1],[O.topright,1]]},ko[136]=function(O){return[To(O),Oo(O)]},ko[153]=function(O){return[Mo(O),Co(O)]},ko[102]=function(O){return[Po(O),Lo(O)]},ko[155]=function(O){return[[1,1],[1,O.righttop],[O.bottomleft,0],[0,0],[0,O.leftbottom],[O.topright,1]]},ko[103]=function(O){return[[1,O.rightbottom],[1,0],[O.bottomright,0],[0,O.lefttop],[0,1],[O.topleft,1]]},ko[152]=function(O){return[Mo(O),Oo(O)]},ko[156]=function(O){return[[1,1],[1,O.righttop],[O.bottomright,0],[O.bottomleft,0],[0,O.leftbottom],[0,O.lefttop],[O.topright,1]]},ko[137]=function(O){return[To(O),Co(O)]},ko[139]=function(O){return[[1,O.righttop],[1,O.rightbottom],[O.bottomleft,0],[0,0],[0,O.leftbottom],[O.topleft,1],[O.topright,1]]},ko[98]=function(O){return[Ro(O),Lo(O)]},ko[99]=function(O){return[[1,O.righttop],[1,O.rightbottom],[O.bottomright,0],[O.bottomleft,0],[0,O.lefttop],[0,1],[O.topleft,1]]},ko[38]=function(O){return[Po(O),Ao(O)]},ko[39]=function(O){return[[1,O.rightbottom],[1,0],[O.bottomright,0],[0,O.leftbottom],[0,O.lefttop],[O.topleft,1],[O.topright,1]]};var qo=function(){function t(O){this.id=t.buildId(O),this.coordinates=O,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(O){return O.join(",")},t.prototype.removeInnerEdge=function(O){this.innerEdges=this.innerEdges.filter((function(J){return J.from.id!==O.from.id}))},t.prototype.removeOuterEdge=function(O){this.outerEdges=this.outerEdges.filter((function(J){return J.to.id!==O.to.id}))},t.prototype.addOuterEdge=function(O){this.outerEdges.push(O),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var O=this;this.outerEdgesSorted||(this.outerEdges.sort((function(J,ot){var st=J.to,at=ot.to;if(st.coordinates[0]-O.coordinates[0]>=0&&at.coordinates[0]-O.coordinates[0]<0)return 1;if(st.coordinates[0]-O.coordinates[0]<0&&at.coordinates[0]-O.coordinates[0]>=0)return-1;if(st.coordinates[0]-O.coordinates[0]==0&&at.coordinates[0]-O.coordinates[0]==0)return st.coordinates[1]-O.coordinates[1]>=0||at.coordinates[1]-O.coordinates[1]>=0?st.coordinates[1]-at.coordinates[1]:at.coordinates[1]-st.coordinates[1];var ut=ss(O.coordinates,st.coordinates,at.coordinates);return ut<0?1:ut>0?-1:Math.pow(st.coordinates[0]-O.coordinates[0],2)+Math.pow(st.coordinates[1]-O.coordinates[1],2)-(Math.pow(at.coordinates[0]-O.coordinates[0],2)+Math.pow(at.coordinates[1]-O.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(O){return this.sortOuterEdges(),this.outerEdges[O]},t.prototype.addInnerEdge=function(O){this.innerEdges.push(O)},t}(),Go=function(){function t(O,J){this.from=O,this.to=J,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(O){return this.from.id===O.from.id&&this.to.id===O.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return h([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(O){return ss(O.from.coordinates,O.to.coordinates,this.to.coordinates)},t}(),Bo=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(O){this.edges.push(O),this.polygon=this.envelope=void 0},t.prototype.get=function(O){return this.edges[O]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(O){this.edges.forEach(O)},t.prototype.map=function(O){return this.edges.map(O)},t.prototype.some=function(O){return this.edges.some(O)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var O=this,J=this.edges.reduce((function(J,ot,st){return ot.from.coordinates[1]>O.edges[J].from.coordinates[1]&&(J=st),J}),0),ot=(0===J?this.length:J)-1,st=(J+1)%this.length,at=ss(this.edges[ot].from.coordinates,this.edges[J].from.coordinates,this.edges[st].from.coordinates);return 0===at?this.edges[ot].from.coordinates[0]>this.edges[st].from.coordinates[0]:at>0},t.prototype.toMultiPoint=function(){return d(this.edges.map((function(O){return O.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var O=this.edges.map((function(O){return O.from.coordinates}));return O.push(this.edges[0].from.coordinates),this.polygon=l([O])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=dn(this.toPolygon())},t.findEdgeRingContaining=function(O,J){var ot,st,at=O.getEnvelope();return J.forEach((function(J){var ut,ct,ht,pt,mt,xt,Nt=J.getEnvelope();if(st&&(ot=st.getEnvelope()),ct=at,ht=(ut=Nt).geometry.coordinates[0].map((function(O){return O[0]})),pt=ut.geometry.coordinates[0].map((function(O){return O[1]})),mt=ct.geometry.coordinates[0].map((function(O){return O[0]})),xt=ct.geometry.coordinates[0].map((function(O){return O[1]})),(Math.max.apply(null,ht)!==Math.max.apply(null,mt)||Math.max.apply(null,pt)!==Math.max.apply(null,xt)||Math.min.apply(null,ht)!==Math.min.apply(null,mt)||Math.min.apply(null,pt)!==Math.min.apply(null,xt))&&as(Nt,at)){for(var St=O.map((function(O){return O.from.coordinates})),jt=void 0,d=function(O){J.some((function(J){return ot=O,st=J.from.coordinates,ot[0]===st[0]&&ot[1]===st[1];var ot,st}))||(jt=O)},Wt=0,Ht=St;Wt<Ht.length;Wt++)d(Ht[Wt]);jt&&J.inside(a(jt))&&(st&&!as(ot,Nt)||(st=J))}})),st},t.prototype.inside=function(O){return ye(O,this.toPolygon())},t}(),zo=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(O){!function(O){if(!O)throw new Error("No geojson passed");if("FeatureCollection"!==O.type&&"GeometryCollection"!==O.type&&"MultiLineString"!==O.type&&"LineString"!==O.type&&"Feature"!==O.type)throw new Error("Invalid input type '"+O.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(O);var J=new t;return z(O,(function(O){et(O,"LineString","Graph::fromGeoJson"),T(O,(function(O,ot){if(O){var st=J.getNode(O),at=J.getNode(ot);J.addEdge(st,at)}return ot}))})),J},t.prototype.getNode=function(O){var J=qo.buildId(O),ot=this.nodes[J];return ot||(ot=this.nodes[J]=new qo(O)),ot},t.prototype.addEdge=function(O,J){var ot=new Go(O,J),st=ot.getSymetric();this.edges.push(ot),this.edges.push(st)},t.prototype.deleteDangles=function(){var O=this;Object.keys(this.nodes).map((function(J){return O.nodes[J]})).forEach((function(J){return O._removeIfDangle(J)}))},t.prototype._removeIfDangle=function(O){var J=this;if(O.innerEdges.length<=1){var ot=O.getOuterEdges().map((function(O){return O.to}));this.removeNode(O),ot.forEach((function(O){return J._removeIfDangle(O)}))}},t.prototype.deleteCutEdges=function(){var O=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(J){J.label===J.symetric.label&&(O.removeEdge(J.symetric),O.removeEdge(J))}))},t.prototype._computeNextCWEdges=function(O){var J=this;void 0===O?Object.keys(this.nodes).forEach((function(O){return J._computeNextCWEdges(J.nodes[O])})):O.getOuterEdges().forEach((function(J,ot){O.getOuterEdge((0===ot?O.getOuterEdges().length:ot)-1).symetric.next=J}))},t.prototype._computeNextCCWEdges=function(O,J){for(var ot,st,at=O.getOuterEdges(),ut=at.length-1;ut>=0;--ut){var ct=at[ut],ht=ct.symetric,pt=void 0,mt=void 0;ct.label===J&&(pt=ct),ht.label===J&&(mt=ht),pt&&mt&&(mt&&(st=mt),pt&&(st&&(st.next=pt,st=void 0),ot||(ot=pt)))}st&&(st.next=ot)},t.prototype._findLabeledEdgeRings=function(){var O=[],J=0;return this.edges.forEach((function(ot){if(!(ot.label>=0)){O.push(ot);var st=ot;do{st.label=J,st=st.next}while(!ot.isEqual(st));J++}})),O},t.prototype.getEdgeRings=function(){var O=this;this._computeNextCWEdges(),this.edges.forEach((function(O){O.label=void 0})),this._findLabeledEdgeRings().forEach((function(J){O._findIntersectionNodes(J).forEach((function(ot){O._computeNextCCWEdges(ot,J.label)}))}));var J=[];return this.edges.forEach((function(ot){ot.ring||J.push(O._findEdgeRing(ot))})),J},t.prototype._findIntersectionNodes=function(O){var J=[],ot=O,r=function(){var st=0;ot.from.getOuterEdges().forEach((function(J){J.label===O.label&&++st})),st>1&&J.push(ot.from),ot=ot.next};do{r()}while(!O.isEqual(ot));return J},t.prototype._findEdgeRing=function(O){var J=O,ot=new Bo;do{ot.push(J),J.ring=ot,J=J.next}while(!O.isEqual(J));return ot},t.prototype.removeNode=function(O){var J=this;O.getOuterEdges().forEach((function(O){return J.removeEdge(O)})),O.innerEdges.forEach((function(O){return J.removeEdge(O)})),delete this.nodes[O.id]},t.prototype.removeEdge=function(O){this.edges=this.edges.filter((function(J){return!J.isEqual(O)})),O.deleteEdge()},t}();function ps(O,J){var ot=!0;return z(O,(function(O){z(J,(function(J){if(!1===ot)return!1;ot=function(O,J){switch(O.type){case"Point":switch(J.type){case"Point":return ot=O.coordinates,st=J.coordinates,!(ot[0]===st[0]&&ot[1]===st[1]);case"LineString":return!fs(J,O);case"Polygon":return!ye(O,J)}break;case"LineString":switch(J.type){case"Point":return!fs(O,J);case"LineString":return!function(O,J){return Or(O,J).features.length>0}(O,J);case"Polygon":return!gs(J,O)}break;case"Polygon":switch(J.type){case"Point":return!ye(J,O);case"LineString":return!gs(O,J);case"Polygon":return!function(O,J){for(var ot=0,st=O.coordinates[0];ot<st.length;ot++)if(ye(st[ot],J))return!0;for(var at=0,ut=J.coordinates[0];at<ut.length;at++)if(ye(ut[at],O))return!0;return Or(Ii(O),Ii(J)).features.length>0}(J,O)}}var ot,st;return!1}(O.geometry,J.geometry)}))})),ot}function fs(O,J){for(var ot=0;ot<O.coordinates.length-1;ot++)if(ds(O.coordinates[ot],O.coordinates[ot+1],J.coordinates))return!0;return!1}function gs(O,J){for(var ot=0,st=J.coordinates;ot<st.length;ot++)if(ye(st[ot],O))return!0;return Or(J,Ii(O)).features.length>0}function ds(O,J,ot){var st=ot[0]-O[0],at=ot[1]-O[1],ut=J[0]-O[0],ct=J[1]-O[1];return 0==st*ct-at*ut&&(Math.abs(ut)>=Math.abs(ct)?ut>0?O[0]<=ot[0]&&ot[0]<=J[0]:J[0]<=ot[0]&&ot[0]<=O[0]:ct>0?O[1]<=ot[1]&&ot[1]<=J[1]:J[1]<=ot[1]&&ot[1]<=O[1])}function ys(O,J){return!(O[0]>J[0]||O[2]<J[2]||O[1]>J[1]||O[3]<J[3])}function vs(O,J){return O[0]===J[0]&&O[1]===J[1]}function _s(O,J){return[(O[0]+J[0])/2,(O[1]+J[1])/2]}function ms(O,J){for(var ot=!1,st=!1,at=O.coordinates.length,ut=0;ut<at&&!ot&&!st;){for(var ct=0;ct<J.coordinates.length-1;ct++){var ht=!0;0!==ct&&ct!==J.coordinates.length-2||(ht=!1),bs(J.coordinates[ct],J.coordinates[ct+1],O.coordinates[ut],ht)?ot=!0:st=!0}ut++}return ot&&st}function xs(O,J){return Or(O,Ni(J)).features.length>0}function Es(O,J){for(var ot=!1,st=!1,at=O.coordinates.length,ut=0;ut<at&&(!ot||!st);ut++)ye(a(O.coordinates[ut]),J)?ot=!0:st=!0;return st&&ot}function bs(O,J,ot,st){var at=ot[0]-O[0],ut=ot[1]-O[1],ct=J[0]-O[0],ht=J[1]-O[1];return 0==at*ht-ut*ct&&(st?Math.abs(ct)>=Math.abs(ht)?ct>0?O[0]<=ot[0]&&ot[0]<=J[0]:J[0]<=ot[0]&&ot[0]<=O[0]:ht>0?O[1]<=ot[1]&&ot[1]<=J[1]:J[1]<=ot[1]&&ot[1]<=O[1]:Math.abs(ct)>=Math.abs(ht)?ct>0?O[0]<ot[0]&&ot[0]<J[0]:J[0]<ot[0]&&ot[0]<O[0]:ht>0?O[1]<ot[1]&&ot[1]<J[1]:J[1]<ot[1]&&ot[1]<O[1])}var ws=function(O){this.precision=O&&O.precision?O.precision:17,this.direction=!(!O||!O.direction)&&O.direction,this.pseudoNode=!(!O||!O.pseudoNode)&&O.pseudoNode,this.objectComparator=O&&O.objectComparator?O.objectComparator:Ss};function Is(O){return O.coordinates.map((function(J){return{type:O.type.replace("Multi",""),coordinates:J}}))}function Ns(O,J){return O.hasOwnProperty("coordinates")?O.coordinates.length===J.coordinates.length:O.length===J.length}function Ss(O,J){return Lr(O,J,{strict:!0})}ws.prototype.compare=function(O,J){if(O.type!==J.type||!Ns(O,J))return!1;switch(O.type){case"Point":return this.compareCoord(O.coordinates,J.coordinates);case"LineString":return this.compareLine(O.coordinates,J.coordinates,0,!1);case"Polygon":return this.comparePolygon(O,J);case"Feature":return this.compareFeature(O,J);default:if(0===O.type.indexOf("Multi")){var ot=this,st=Is(O),at=Is(J);return st.every((function(O){return this.some((function(J){return ot.compare(O,J)}))}),at)}}return!1},ws.prototype.compareCoord=function(O,J){if(O.length!==J.length)return!1;for(var ot=0;ot<O.length;ot++)if(O[ot].toFixed(this.precision)!==J[ot].toFixed(this.precision))return!1;return!0},ws.prototype.compareLine=function(O,J,ot,st){if(!Ns(O,J))return!1;var at=this.pseudoNode?O:this.removePseudo(O),ut=this.pseudoNode?J:this.removePseudo(J);if(!st||this.compareCoord(at[0],ut[0])||(ut=this.fixStartIndex(ut,at))){var ct=this.compareCoord(at[ot],ut[ot]);return this.direction||ct?this.comparePath(at,ut):!!this.compareCoord(at[ot],ut[ut.length-(1+ot)])&&this.comparePath(at.slice().reverse(),ut)}},ws.prototype.fixStartIndex=function(O,J){for(var ot,st=-1,at=0;at<O.length;at++)if(this.compareCoord(O[at],J[0])){st=at;break}return st>=0&&(ot=[].concat(O.slice(st,O.length),O.slice(1,st+1))),ot},ws.prototype.comparePath=function(O,J){var ot=this;return O.every((function(O,J){return ot.compareCoord(O,this[J])}),J)},ws.prototype.comparePolygon=function(O,J){if(this.compareLine(O.coordinates[0],J.coordinates[0],1,!0)){var ot=O.coordinates.slice(1,O.coordinates.length),st=J.coordinates.slice(1,J.coordinates.length),at=this;return ot.every((function(O){return this.some((function(J){return at.compareLine(O,J,1,!0)}))}),st)}return!1},ws.prototype.compareFeature=function(O,J){return!(O.id!==J.id||!this.objectComparator(O.properties,J.properties)||!this.compareBBox(O,J))&&this.compare(O.geometry,J.geometry)},ws.prototype.compareBBox=function(O,J){return!!(!O.bbox&&!J.bbox||O.bbox&&J.bbox&&this.compareCoord(O.bbox,J.bbox))},ws.prototype.removePseudo=function(O){return O};var jo=ws;function Ps(O,J){var ot=!1;return z(O,(function(O){z(J,(function(J){if(!0===ot)return!0;ot=!ps(O.geometry,J.geometry)}))})),ot}var Uo=Bt((function(O){function e(O,J,ot,st){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(O,J,ot,st)}e.prototype.run=function(O,J,ot,st){this._init(O,J,ot,st);for(var at=0;at<this._datasetLength;at++)if(1!==this._visited[at]){this._visited[at]=1;var ut=this._regionQuery(at);if(ut.length<this.minPts)this.noise.push(at);else{var ct=this.clusters.length;this.clusters.push([]),this._addToCluster(at,ct),this._expandCluster(ct,ut)}}return this.clusters},e.prototype._init=function(O,J,ot,st){if(O){if(!(O instanceof Array))throw Error("Dataset must be of type array, "+typeof O+" given");this.dataset=O,this.clusters=[],this.noise=[],this._datasetLength=O.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}J&&(this.epsilon=J),ot&&(this.minPts=ot),st&&(this.distance=st)},e.prototype._expandCluster=function(O,J){for(var ot=0;ot<J.length;ot++){var st=J[ot];if(1!==this._visited[st]){this._visited[st]=1;var at=this._regionQuery(st);at.length>=this.minPts&&(J=this._mergeArrays(J,at))}1!==this._assigned[st]&&this._addToCluster(st,O)}},e.prototype._addToCluster=function(O,J){this.clusters[J].push(O),this._assigned[O]=1},e.prototype._regionQuery=function(O){for(var J=[],ot=0;ot<this._datasetLength;ot++)this.distance(this.dataset[O],this.dataset[ot])<this.epsilon&&J.push(ot);return J},e.prototype._mergeArrays=function(O,J){for(var ot=J.length,st=0;st<ot;st++){var at=J[st];O.indexOf(at)<0&&O.push(at)}return O},e.prototype._euclideanDistance=function(O,J){for(var ot=0,st=Math.min(O.length,J.length);st--;)ot+=(O[st]-J[st])*(O[st]-J[st]);return Math.sqrt(ot)},O.exports&&(O.exports=e)})),us=Bt((function(O){function e(O,J,ot){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(O,J,ot)}e.prototype.init=function(O,J,ot){this.assignments=[],this.centroids=[],void 0!==O&&(this.dataset=O),void 0!==J&&(this.k=J),void 0!==ot&&(this.distance=ot)},e.prototype.run=function(O,J){this.init(O,J);for(var ot=this.dataset.length,st=0;st<this.k;st++)this.centroids[st]=this.randomCentroid();for(var at=!0;at;){at=this.assign();for(var ut=0;ut<this.k;ut++){for(var ct=new Array(xt),ht=0,pt=0;pt<xt;pt++)ct[pt]=0;for(var mt=0;mt<ot;mt++){var xt=this.dataset[mt].length;if(ut===this.assignments[mt]){for(pt=0;pt<xt;pt++)ct[pt]+=this.dataset[mt][pt];ht++}}if(ht>0){for(pt=0;pt<xt;pt++)ct[pt]/=ht;this.centroids[ut]=ct}else this.centroids[ut]=this.randomCentroid(),at=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var O,J,ot=this.dataset.length-1;do{J=Math.round(Math.random()*ot),O=this.dataset[J]}while(this.centroids.indexOf(O)>=0);return O},e.prototype.assign=function(){for(var O,J=!1,ot=this.dataset.length,st=0;st<ot;st++)(O=this.argmin(this.dataset[st],this.centroids,this.distance))!=this.assignments[st]&&(this.assignments[st]=O,J=!0);return J},e.prototype.getClusters=function(){for(var O,J=new Array(this.k),ot=0;ot<this.assignments.length;ot++)void 0===J[O=this.assignments[ot]]&&(J[O]=[]),J[O].push(ot);return J},e.prototype.argmin=function(O,J,ot){for(var st,at=Number.MAX_VALUE,ut=0,ct=J.length,ht=0;ht<ct;ht++)(st=ot(O,J[ht]))<at&&(at=st,ut=ht);return ut},e.prototype.distance=function(O,J){for(var ot=0,st=Math.min(O.length,J.length);st--;){var at=O[st]-J[st];ot+=at*at}return Math.sqrt(ot)},O.exports&&(O.exports=e)})),ls=Bt((function(O){function e(O,J,ot){this._queue=[],this._priorities=[],this._sorting="desc",this._init(O,J,ot)}e.prototype.insert=function(O,J){for(var ot=this._queue.length,st=ot;st--;){var at=this._priorities[st];"desc"===this._sorting?J>at&&(ot=st):J<at&&(ot=st)}this._insertAt(O,J,ot)},e.prototype.remove=function(O){for(var J=this._queue.length;J--;)if(O===this._queue[J]){this._queue.splice(J,1),this._priorities.splice(J,1);break}},e.prototype.forEach=function(O){this._queue.forEach(O)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(O){return this._priorities[O]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var O=[],J=0,ot=this._queue.length;J<ot;J++)O.push([this._queue[J],this._priorities[J]]);return O},e.prototype._init=function(O,J,ot){if(O&&J){if(this._queue=[],this._priorities=[],O.length!==J.length)throw new Error("Arrays must have the same length");for(var st=0;st<O.length;st++)this.insert(O[st],J[st])}ot&&(this._sorting=ot)},e.prototype._insertAt=function(O,J,ot){this._queue.length===ot?(this._queue.push(O),this._priorities.push(J)):(this._queue.splice(ot,0,O),this._priorities.splice(ot,0,J))},O.exports&&(O.exports=e)})),cs=Bt((function(O){if(O.exports)var J=ls;function n(O,J,ot,st){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(O,J,ot,st)}n.prototype.run=function(O,ot,st,at){this._init(O,ot,st,at);for(var ut=0,ct=this.dataset.length;ut<ct;ut++)if(1!==this._processed[ut]){this._processed[ut]=1,this.clusters.push([ut]);var ht=this.clusters.length-1;this._orderedList.push(ut);var pt=new J(null,null,"asc"),mt=this._regionQuery(ut);void 0!==this._distanceToCore(ut)&&(this._updateQueue(ut,mt,pt),this._expandCluster(ht,pt))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var O=[],J=0,ot=this._orderedList.length;J<ot;J++){var st=this._orderedList[J],at=this._reachability[st];O.push([st,at])}return O},n.prototype._init=function(O,J,ot,st){if(O){if(!(O instanceof Array))throw Error("Dataset must be of type array, "+typeof O+" given");this.dataset=O,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}J&&(this.epsilon=J),ot&&(this.minPts=ot),st&&(this.distance=st)},n.prototype._updateQueue=function(O,J,ot){var st=this;this._coreDistance=this._distanceToCore(O),J.forEach((function(J){if(void 0===st._processed[J]){var at=st.distance(st.dataset[O],st.dataset[J]),ut=Math.max(st._coreDistance,at);void 0===st._reachability[J]?(st._reachability[J]=ut,ot.insert(J,ut)):ut<st._reachability[J]&&(st._reachability[J]=ut,ot.remove(J),ot.insert(J,ut))}}))},n.prototype._expandCluster=function(O,J){for(var ot=J.getElements(),st=0,at=ot.length;st<at;st++){var ut=ot[st];if(void 0===this._processed[ut]){var ct=this._regionQuery(ut);this._processed[ut]=1,this.clusters[O].push(ut),this._orderedList.push(ut),void 0!==this._distanceToCore(ut)&&(this._updateQueue(ut,ct,J),this._expandCluster(O,J))}}},n.prototype._distanceToCore=function(O){for(var J=this.epsilon,ot=0;ot<J;ot++)if(this._regionQuery(O,ot).length>=this.minPts)return ot},n.prototype._regionQuery=function(O,J){J=J||this.epsilon;for(var ot=[],st=0,at=this.dataset.length;st<at;st++)this.distance(this.dataset[O],this.dataset[st])<J&&ot.push(st);return ot},n.prototype._euclideanDistance=function(O,J){for(var ot=0,st=Math.min(O.length,J.length);st--;)ot+=(O[st]-J[st])*(O[st]-J[st]);return Math.sqrt(ot)},O.exports&&(O.exports=n)})),hs=Bt((function(O){O.exports&&(O.exports={DBSCAN:Uo,KMEANS:us,OPTICS:cs,PriorityQueue:ls})})),As=function(O,J,ot){for(var st=O.length,at=0,ut=0;ut<st;ut++){var ct=(O[ut]||0)-(J[ut]||0);at+=ct*ct}return ot?Math.sqrt(at):at},Cs=As,Fs=function(O,J,ot){var st=Math.abs(O-J);return ot?st:st*st},Ms=As;function Bs(O,J,ot){ot=ot||[];for(var st=0;st<O;st++)ot[st]=J;return ot}var zs=function(O,J,ot,st){var at=[],ut=[],ct=[],ht=[],pt=!1,mt=st||1e4,xt=O.length,Nt=O[0].length,St=Nt>0,jt=[];if(ot)at="kmrand"==ot?function(O,J){for(var ot={},st=[],at=J<<2,ut=O.length,ct=O[0].length>0;st.length<J&&at-- >0;){var ht=O[Math.floor(Math.random()*ut)],pt=ct?ht.join("_"):""+ht;ot[pt]||(ot[pt]=!0,st.push(ht))}if(st.length<J)throw new Error("Error initializating clusters");return st}(O,J):"kmpp"==ot?function(O,J){var ot=O[0].length?Cs:Fs,st=[],at=O.length,ut=O[0].length>0,ct=O[Math.floor(Math.random()*at)];for(ut&&ct.join("_"),st.push(ct);st.length<J;){for(var ht=[],pt=st.length,mt=0,xt=[],Nt=0;Nt<at;Nt++){for(var St=1/0,jt=0;jt<pt;jt++){var Wt=ot(O[Nt],st[jt]);Wt<=St&&(St=Wt)}ht[Nt]=St}for(var Ht=0;Ht<at;Ht++)mt+=ht[Ht];for(var Zt=0;Zt<at;Zt++)xt[Zt]={i:Zt,v:O[Zt],pr:ht[Zt]/mt,cs:0};xt.sort((function(O,J){return O.pr-J.pr})),xt[0].cs=xt[0].pr;for(var Kt=1;Kt<at;Kt++)xt[Kt].cs=xt[Kt-1].cs+xt[Kt].pr;for(var Jt=Math.random(),ee=0;ee<at-1&&xt[ee++].cs<Jt;);st.push(xt[ee-1].v)}return st}(O,J):ot;else for(var Wt={};at.length<J;){var Ht=Math.floor(Math.random()*xt);Wt[Ht]||(Wt[Ht]=!0,at.push(O[Ht]))}do{Bs(J,0,jt);for(var Zt=0;Zt<xt;Zt++){for(var Kt=1/0,Jt=0,ee=0;ee<J;ee++)(ht=St?Ms(O[Zt],at[ee]):Math.abs(O[Zt]-at[ee]))<=Kt&&(Kt=ht,Jt=ee);ct[Zt]=Jt,jt[Jt]++}for(var ne=[],re=(ut=[],0);re<J;re++)ne[re]=St?Bs(Nt,0,ne[re]):0,ut[re]=at[re];if(St){for(var De=0;De<J;De++)at[De]=[];for(var qe=0;qe<xt;qe++)for(var Ge=ne[ct[qe]],Be=O[qe],pn=0;pn<Nt;pn++)Ge[pn]+=Be[pn];pt=!0;for(var wn=0;wn<J;wn++){for(var In=at[wn],Kn=ne[wn],or=ut[wn],sr=jt[wn],ar=0;ar<Nt;ar++)In[ar]=Kn[ar]/sr||0;if(pt)for(var ur=0;ur<Nt;ur++)if(or[ur]!=In[ur]){pt=!1;break}}}else{for(var lr=0;lr<xt;lr++)ne[ct[lr]]+=O[lr];for(var cr=0;cr<J;cr++)at[cr]=ne[cr]/jt[cr]||0;pt=!0;for(var hr=0;hr<J;hr++)if(ut[hr]!=at[hr]){pt=!1;break}}pt=pt||--mt<=0}while(!pt);return{it:1e4-mt,k:J,idxs:ct,centroids:at}};function js(O,J){return b(Bi(O[0],O[1]))===b(Bi(J[0],J[1]))}function Us(O,J){if(O.geometry&&O.geometry.type)return O.geometry.type;if(O.type)return O.type;throw new Error("Invalid GeoJSON object for "+J)}function Vs(O){for(var J=O,ot=[];J.parent;)ot.unshift(J),J=J.parent;return ot}var Ls={search:function(O,J,ot,st){O.cleanDirty();var at=(st=st||{}).heuristic||Ls.heuristics.manhattan,ut=st.closest||!1,ct=new Ws((function(O){return O.f})),ht=J;for(J.h=at(J,ot),ct.push(J);ct.size()>0;){var pt=ct.pop();if(pt===ot)return Vs(pt);pt.closed=!0;for(var mt=O.neighbors(pt),xt=0,Nt=mt.length;xt<Nt;++xt){var St=mt[xt];if(!St.closed&&!St.isWall()){var jt=pt.g+St.getCost(pt),Wt=St.visited;(!Wt||jt<St.g)&&(St.visited=!0,St.parent=pt,St.h=St.h||at(St,ot),St.g=jt,St.f=St.g+St.h,O.markDirty(St),ut&&(St.h<ht.h||St.h===ht.h&&St.g<ht.g)&&(ht=St),Wt?ct.rescoreElement(St):ct.push(St))}}}return ut?Vs(ht):[]},heuristics:{manhattan:function(O,J){return Math.abs(J.x-O.x)+Math.abs(J.y-O.y)},diagonal:function(O,J){var ot=Math.sqrt(2),st=Math.abs(J.x-O.x),at=Math.abs(J.y-O.y);return 1*(st+at)+(ot-2)*Math.min(st,at)}},cleanNode:function(O){O.f=0,O.g=0,O.h=0,O.visited=!1,O.closed=!1,O.parent=null}};function Ys(O,J){J=J||{},this.nodes=[],this.diagonal=!!J.diagonal,this.grid=[];for(var ot=0;ot<O.length;ot++){this.grid[ot]=[];for(var st=0,at=O[ot];st<at.length;st++){var ut=new Hs(ot,st,at[st]);this.grid[ot][st]=ut,this.nodes.push(ut)}}this.init()}function Hs(O,J,ot){this.x=O,this.y=J,this.weight=ot}function Ws(O){this.content=[],this.scoreFunction=O}function Js(O,J){for(var ot=0;ot<J.features.length;ot++)if(ye(O,J.features[ot]))return!0;return!1}function Zs(O){return function(){return O}}function Ks(O){return O[0]}function Qs(O){return O[1]}function $s(){this._=null}function ta(O){O.U=O.C=O.L=O.R=O.P=O.N=null}function ea(O,J){var ot=J,st=J.R,at=ot.U;at?at.L===ot?at.L=st:at.R=st:O._=st,st.U=at,ot.U=st,ot.R=st.L,ot.R&&(ot.R.U=ot),st.L=ot}function na(O,J){var ot=J,st=J.L,at=ot.U;at?at.L===ot?at.L=st:at.R=st:O._=st,st.U=at,ot.U=st,ot.L=st.R,ot.L&&(ot.L.U=ot),st.R=ot}function ra(O){for(;O.L;)O=O.L;return O}function ia(O,J,ot,st){var at=[null,null],ut=Gs.push(at)-1;return at.left=O,at.right=J,ot&&sa(at,O,J,ot),st&&sa(at,J,O,st),ks[O.index].halfedges.push(ut),ks[J.index].halfedges.push(ut),at}function oa(O,J,ot){var st=[J,ot];return st.left=O,st}function sa(O,J,ot,st){O[0]||O[1]?O.left===ot?O[1]=st:O[0]=st:(O[0]=st,O.left=J,O.right=ot)}function aa(O,J,ot,st,at){var ut,ct=O[0],ht=O[1],pt=ct[0],mt=ct[1],xt=0,Nt=1,St=ht[0]-pt,jt=ht[1]-mt;if(ut=J-pt,St||!(ut>0)){if(ut/=St,St<0){if(ut<xt)return;ut<Nt&&(Nt=ut)}else if(St>0){if(ut>Nt)return;ut>xt&&(xt=ut)}if(ut=st-pt,St||!(ut<0)){if(ut/=St,St<0){if(ut>Nt)return;ut>xt&&(xt=ut)}else if(St>0){if(ut<xt)return;ut<Nt&&(Nt=ut)}if(ut=ot-mt,jt||!(ut>0)){if(ut/=jt,jt<0){if(ut<xt)return;ut<Nt&&(Nt=ut)}else if(jt>0){if(ut>Nt)return;ut>xt&&(xt=ut)}if(ut=at-mt,jt||!(ut<0)){if(ut/=jt,jt<0){if(ut>Nt)return;ut>xt&&(xt=ut)}else if(jt>0){if(ut<xt)return;ut<Nt&&(Nt=ut)}return!(xt>0||Nt<1)||(xt>0&&(O[0]=[pt+xt*St,mt+xt*jt]),Nt<1&&(O[1]=[pt+Nt*St,mt+Nt*jt]),!0)}}}}}function ua(O,J,ot,st,at){var ut=O[1];if(ut)return!0;var ct,ht,pt=O[0],mt=O.left,xt=O.right,Nt=mt[0],St=mt[1],jt=xt[0],Wt=xt[1],Ht=(Nt+jt)/2,Zt=(St+Wt)/2;if(Wt===St){if(Ht<J||Ht>=st)return;if(Nt>jt){if(pt){if(pt[1]>=at)return}else pt=[Ht,ot];ut=[Ht,at]}else{if(pt){if(pt[1]<ot)return}else pt=[Ht,at];ut=[Ht,ot]}}else if(ht=Zt-(ct=(Nt-jt)/(Wt-St))*Ht,ct<-1||ct>1)if(Nt>jt){if(pt){if(pt[1]>=at)return}else pt=[(ot-ht)/ct,ot];ut=[(at-ht)/ct,at]}else{if(pt){if(pt[1]<ot)return}else pt=[(at-ht)/ct,at];ut=[(ot-ht)/ct,ot]}else if(St<Wt){if(pt){if(pt[0]>=st)return}else pt=[J,ct*J+ht];ut=[st,ct*st+ht]}else{if(pt){if(pt[0]<J)return}else pt=[st,ct*st+ht];ut=[J,ct*J+ht]}return O[0]=pt,O[1]=ut,!0}function la(O,J){var ot=O.site,st=J.left,at=J.right;return ot===at&&(at=st,st=ot),at?Math.atan2(at[1]-st[1],at[0]-st[0]):(ot===st?(st=J[1],at=J[0]):(st=J[0],at=J[1]),Math.atan2(st[0]-at[0],at[1]-st[1]))}function ca(O,J){return J[+(J.left!==O.site)]}function ha(O,J){return J[+(J.left===O.site)]}Ys.prototype.init=function(){this.dirtyNodes=[];for(var O=0;O<this.nodes.length;O++)Ls.cleanNode(this.nodes[O])},Ys.prototype.cleanDirty=function(){for(var O=0;O<this.dirtyNodes.length;O++)Ls.cleanNode(this.dirtyNodes[O]);this.dirtyNodes=[]},Ys.prototype.markDirty=function(O){this.dirtyNodes.push(O)},Ys.prototype.neighbors=function(O){var J=[],ot=O.x,st=O.y,at=this.grid;return at[ot-1]&&at[ot-1][st]&&J.push(at[ot-1][st]),at[ot+1]&&at[ot+1][st]&&J.push(at[ot+1][st]),at[ot]&&at[ot][st-1]&&J.push(at[ot][st-1]),at[ot]&&at[ot][st+1]&&J.push(at[ot][st+1]),this.diagonal&&(at[ot-1]&&at[ot-1][st-1]&&J.push(at[ot-1][st-1]),at[ot+1]&&at[ot+1][st-1]&&J.push(at[ot+1][st-1]),at[ot-1]&&at[ot-1][st+1]&&J.push(at[ot-1][st+1]),at[ot+1]&&at[ot+1][st+1]&&J.push(at[ot+1][st+1])),J},Ys.prototype.toString=function(){for(var O,J,ot,st,at=[],ut=this.grid,ct=0,ht=ut.length;ct<ht;ct++){for(O=[],ot=0,st=(J=ut[ct]).length;ot<st;ot++)O.push(J[ot].weight);at.push(O.join(" "))}return at.join("\n")},Hs.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Hs.prototype.getCost=function(O){return O&&O.x!==this.x&&O.y!==this.y?1.41421*this.weight:this.weight},Hs.prototype.isWall=function(){return 0===this.weight},Ws.prototype={push:function(O){this.content.push(O),this.sinkDown(this.content.length-1)},pop:function(){var O=this.content[0],J=this.content.pop();return this.content.length>0&&(this.content[0]=J,this.bubbleUp(0)),O},remove:function(O){var J=this.content.indexOf(O),ot=this.content.pop();J!==this.content.length-1&&(this.content[J]=ot,this.scoreFunction(ot)<this.scoreFunction(O)?this.sinkDown(J):this.bubbleUp(J))},size:function(){return this.content.length},rescoreElement:function(O){this.sinkDown(this.content.indexOf(O))},sinkDown:function(O){for(var J=this.content[O];O>0;){var ot=(O+1>>1)-1,st=this.content[ot];if(!(this.scoreFunction(J)<this.scoreFunction(st)))break;this.content[ot]=J,this.content[O]=st,O=ot}},bubbleUp:function(O){for(var J=this.content.length,ot=this.content[O],st=this.scoreFunction(ot);;){var at,ut=O+1<<1,ct=ut-1,ht=null;if(ct<J){var pt=this.content[ct];(at=this.scoreFunction(pt))<st&&(ht=ct)}if(ut<J){var mt=this.content[ut];this.scoreFunction(mt)<(null===ht?st:at)&&(ht=ut)}if(null===ht)break;this.content[O]=this.content[ht],this.content[ht]=ot,O=ht}}},$s.prototype={constructor:$s,insert:function(O,J){var ot,st,at;if(O){if(J.P=O,J.N=O.N,O.N&&(O.N.P=J),O.N=J,O.R){for(O=O.R;O.L;)O=O.L;O.L=J}else O.R=J;ot=O}else this._?(O=ra(this._),J.P=null,J.N=O,O.P=O.L=J,ot=O):(J.P=J.N=null,this._=J,ot=null);for(J.L=J.R=null,J.U=ot,J.C=!0,O=J;ot&&ot.C;)ot===(st=ot.U).L?(at=st.R)&&at.C?(ot.C=at.C=!1,st.C=!0,O=st):(O===ot.R&&(ea(this,ot),ot=(O=ot).U),ot.C=!1,st.C=!0,na(this,st)):(at=st.L)&&at.C?(ot.C=at.C=!1,st.C=!0,O=st):(O===ot.L&&(na(this,ot),ot=(O=ot).U),ot.C=!1,st.C=!0,ea(this,st)),ot=O.U;this._.C=!1},remove:function(O){O.N&&(O.N.P=O.P),O.P&&(O.P.N=O.N),O.N=O.P=null;var J,ot,st,at=O.U,ut=O.L,ct=O.R;if(ot=ut?ct?ra(ct):ut:ct,at?at.L===O?at.L=ot:at.R=ot:this._=ot,ut&&ct?(st=ot.C,ot.C=O.C,ot.L=ut,ut.U=ot,ot!==ct?(at=ot.U,ot.U=O.U,O=ot.R,at.L=O,ot.R=ct,ct.U=ot):(ot.U=at,at=ot,O=ot.R)):(st=O.C,O=ot),O&&(O.U=at),!st)if(O&&O.C)O.C=!1;else{do{if(O===this._)break;if(O===at.L){if((J=at.R).C&&(J.C=!1,at.C=!0,ea(this,at),J=at.R),J.L&&J.L.C||J.R&&J.R.C){J.R&&J.R.C||(J.L.C=!1,J.C=!0,na(this,J),J=at.R),J.C=at.C,at.C=J.R.C=!1,ea(this,at),O=this._;break}}else if((J=at.L).C&&(J.C=!1,at.C=!0,na(this,at),J=at.L),J.L&&J.L.C||J.R&&J.R.C){J.L&&J.L.C||(J.R.C=!1,J.C=!0,ea(this,J),J=at.L),J.C=at.C,at.C=J.L.C=!1,na(this,at),O=this._;break}J.C=!0,O=at,at=at.U}while(!O.C);O&&(O.C=!1)}}};var Rs,Os=[];function ga(){ta(this),this.x=this.y=this.arc=this.site=this.cy=null}function da(O){var J=O.P,ot=O.N;if(J&&ot){var st=J.site,at=O.site,ut=ot.site;if(st!==ut){var ct=at[0],ht=at[1],pt=st[0]-ct,mt=st[1]-ht,xt=ut[0]-ct,Nt=ut[1]-ht,St=2*(pt*Nt-mt*xt);if(!(St>=-pa)){var jt=pt*pt+mt*mt,Wt=xt*xt+Nt*Nt,Ht=(Nt*jt-mt*Wt)/St,Zt=(pt*Wt-xt*jt)/St,Kt=Os.pop()||new ga;Kt.arc=O,Kt.site=at,Kt.x=Ht+ct,Kt.y=(Kt.cy=Zt+ht)+Math.sqrt(Ht*Ht+Zt*Zt),O.circle=Kt;for(var Jt=null,ee=qs._;ee;)if(Kt.y<ee.y||Kt.y===ee.y&&Kt.x<=ee.x){if(!ee.L){Jt=ee.P;break}ee=ee.L}else{if(!ee.R){Jt=ee;break}ee=ee.R}qs.insert(Jt,Kt),Jt||(Rs=Kt)}}}}function ya(O){var J=O.circle;J&&(J.P||(Rs=J.N),qs.remove(J),Os.push(J),ta(J),O.circle=null)}var Ts=[];function _a(){ta(this),this.edge=this.site=this.circle=null}function ma(O){var J=Ts.pop()||new _a;return J.site=O,J}function xa(O){ya(O),Ds.remove(O),Ts.push(O),ta(O)}function Ea(O){var J=O.circle,ot=J.x,st=J.cy,at=[ot,st],ut=O.P,ct=O.N,ht=[O];xa(O);for(var pt=ut;pt.circle&&Math.abs(ot-pt.circle.x)<Xs&&Math.abs(st-pt.circle.cy)<Xs;)ut=pt.P,ht.unshift(pt),xa(pt),pt=ut;ht.unshift(pt),ya(pt);for(var mt=ct;mt.circle&&Math.abs(ot-mt.circle.x)<Xs&&Math.abs(st-mt.circle.cy)<Xs;)ct=mt.N,ht.push(mt),xa(mt),mt=ct;ht.push(mt),ya(mt);var xt,Nt=ht.length;for(xt=1;xt<Nt;++xt)mt=ht[xt],pt=ht[xt-1],sa(mt.edge,pt.site,mt.site,at);pt=ht[0],(mt=ht[Nt-1]).edge=ia(pt.site,mt.site,null,at),da(pt),da(mt)}function ba(O){for(var J,ot,st,at,ut=O[0],ct=O[1],ht=Ds._;ht;)if((st=wa(ht,ct)-ut)>Xs)ht=ht.L;else{if(!((at=ut-Ia(ht,ct))>Xs)){st>-Xs?(J=ht.P,ot=ht):at>-Xs?(J=ht,ot=ht.N):J=ot=ht;break}if(!ht.R){J=ht;break}ht=ht.R}!function(O){ks[O.index]={site:O,halfedges:[]}}(O);var pt=ma(O);if(Ds.insert(J,pt),J||ot){if(J===ot)return ya(J),ot=ma(J.site),Ds.insert(pt,ot),pt.edge=ot.edge=ia(J.site,pt.site),da(J),void da(ot);if(ot){ya(J),ya(ot);var mt=J.site,xt=mt[0],Nt=mt[1],St=O[0]-xt,jt=O[1]-Nt,Wt=ot.site,Ht=Wt[0]-xt,Zt=Wt[1]-Nt,Kt=2*(St*Zt-jt*Ht),Jt=St*St+jt*jt,ee=Ht*Ht+Zt*Zt,ne=[(Zt*Jt-jt*ee)/Kt+xt,(St*ee-Ht*Jt)/Kt+Nt];sa(ot.edge,mt,Wt,ne),pt.edge=ia(mt,O,null,ne),ot.edge=ia(O,Wt,null,ne),da(J),da(ot)}else pt.edge=ia(J.site,pt.site)}}function wa(O,J){var ot=O.site,st=ot[0],at=ot[1],ut=at-J;if(!ut)return st;var ct=O.P;if(!ct)return-1/0;var ht=(ot=ct.site)[0],pt=ot[1],mt=pt-J;if(!mt)return ht;var xt=ht-st,Nt=1/ut-1/mt,St=xt/mt;return Nt?(-St+Math.sqrt(St*St-2*Nt*(xt*xt/(-2*mt)-pt+mt/2+at-ut/2)))/Nt+st:(st+ht)/2}function Ia(O,J){var ot=O.N;if(ot)return wa(ot,J);var st=O.site;return st[1]===J?st[0]:1/0}var Ds,ks,qs,Gs,Xs=1e-6,pa=1e-12;function Oa(O,J){return J[1]-O[1]||J[0]-O[0]}function Ra(O,J){var ot,st,at,ut=O.sort(Oa).pop();for(Gs=[],ks=new Array(O.length),Ds=new $s,qs=new $s;;)if(at=Rs,ut&&(!at||ut[1]<at.y||ut[1]===at.y&&ut[0]<at.x))ut[0]===ot&&ut[1]===st||(ba(ut),ot=ut[0],st=ut[1]),ut=O.pop();else{if(!at)break;Ea(at.arc)}if(function(){for(var O,J,ot,st,at=0,ut=ks.length;at<ut;++at)if((O=ks[at])&&(st=(J=O.halfedges).length)){var ct=new Array(st),ht=new Array(st);for(ot=0;ot<st;++ot)ct[ot]=ot,ht[ot]=la(O,Gs[J[ot]]);for(ct.sort((function(O,J){return ht[J]-ht[O]})),ot=0;ot<st;++ot)ht[ot]=J[ct[ot]];for(ot=0;ot<st;++ot)J[ot]=ht[ot]}}(),J){var ct=+J[0][0],ht=+J[0][1],pt=+J[1][0],mt=+J[1][1];!function(O,J,ot,st){for(var at,ut=Gs.length;ut--;)ua(at=Gs[ut],O,J,ot,st)&&aa(at,O,J,ot,st)&&(Math.abs(at[0][0]-at[1][0])>Xs||Math.abs(at[0][1]-at[1][1])>Xs)||delete Gs[ut]}(ct,ht,pt,mt),function(O,J,ot,st){var at,ut,ct,ht,pt,mt,xt,Nt,St,jt,Wt,Ht,Zt=ks.length,Kt=!0;for(at=0;at<Zt;++at)if(ut=ks[at]){for(ct=ut.site,ht=(pt=ut.halfedges).length;ht--;)Gs[pt[ht]]||pt.splice(ht,1);for(ht=0,mt=pt.length;ht<mt;)Wt=(jt=ha(ut,Gs[pt[ht]]))[0],Ht=jt[1],Nt=(xt=ca(ut,Gs[pt[++ht%mt]]))[0],St=xt[1],(Math.abs(Wt-Nt)>Xs||Math.abs(Ht-St)>Xs)&&(pt.splice(ht,0,Gs.push(oa(ct,jt,Math.abs(Wt-O)<Xs&&st-Ht>Xs?[O,Math.abs(Nt-O)<Xs?St:st]:Math.abs(Ht-st)<Xs&&ot-Wt>Xs?[Math.abs(St-st)<Xs?Nt:ot,st]:Math.abs(Wt-ot)<Xs&&Ht-J>Xs?[ot,Math.abs(Nt-ot)<Xs?St:J]:Math.abs(Ht-J)<Xs&&Wt-O>Xs?[Math.abs(St-J)<Xs?Nt:O,J]:null))-1),++mt);mt&&(Kt=!1)}if(Kt){var Jt,ee,ne,re=1/0;for(at=0,Kt=null;at<Zt;++at)(ut=ks[at])&&(ne=(Jt=(ct=ut.site)[0]-O)*Jt+(ee=ct[1]-J)*ee)<re&&(re=ne,Kt=ut);if(Kt){var De=[O,J],qe=[O,st],Ge=[ot,st],Be=[ot,J];Kt.halfedges.push(Gs.push(oa(ct=Kt.site,De,qe))-1,Gs.push(oa(ct,qe,Ge))-1,Gs.push(oa(ct,Ge,Be))-1,Gs.push(oa(ct,Be,De))-1)}}for(at=0;at<Zt;++at)(ut=ks[at])&&(ut.halfedges.length||delete ks[at])}(ct,ht,pt,mt)}this.edges=Gs,this.cells=ks,Ds=qs=Gs=ks=null}function Ta(O){return(O=O.slice()).push(O[0]),l([O])}function Aa(O,J,ot,st){var at=(st=st||{}).steps||64,ut=st.units||"kilometers",ct=st.angle||0,ht=st.pivot||O,pt=st.properties||O.properties||{};if(!O)throw new Error("center is required");if(!J)throw new Error("xSemiAxis is required");if(!ot)throw new Error("ySemiAxis is required");if(!P(st))throw new Error("options must be an object");if(!C(at))throw new Error("steps must be a number");if(!C(ct))throw new Error("angle must be a number");var mt=K(O);if("degrees"===ut)var xt=I(ct);else J=ji(O,J,90,{units:ut}),ot=ji(O,ot,0,{units:ut}),J=K(J)[0]-mt[0],ot=K(ot)[1]-mt[1];for(var Nt=[],St=0;St<at;St+=1){var jt=-360*St/at,Wt=J*ot/Math.sqrt(Math.pow(ot,2)+Math.pow(J,2)*Math.pow(Da(jt),2)),Ht=J*ot/Math.sqrt(Math.pow(J,2)+Math.pow(ot,2)/Math.pow(Da(jt),2));if(jt<-90&&jt>=-270&&(Wt=-Wt),jt<-180&&jt>=-360&&(Ht=-Ht),"degrees"===ut){var Zt=Wt*Math.cos(xt)+Ht*Math.sin(xt),Kt=Ht*Math.cos(xt)-Wt*Math.sin(xt);Wt=Zt,Ht=Kt}Nt.push([Wt+mt[0],Ht+mt[1]])}return Nt.push(Nt[0]),"degrees"===ut?l([Nt],pt):$o(l([Nt],pt),ct,{pivot:ht})}function Da(O){var J=O*Math.PI/180;return Math.tan(J)}function Fa(O,J){void 0===J&&(J={});var ot=0,st=0,at=0;return q(O,(function(O,ut,ct){var ht=J.weight?null==ct?void 0:ct[J.weight]:void 0;if(!C(ht=null==ht?1:ht))throw new Error("weight value must be a number for feature index "+ut);(ht=Number(ht))>0&&R(O,(function(O){ot+=O[0]*ht,st+=O[1]*ht,at+=ht}))})),a([ot/at,st/at],J.properties,J)}function ka(O,J,ot,st,at){var ut=st.tolerance||.001,ct=0,ht=0,pt=0,mt=0;if(F(ot,(function(J){var ot,st=null===(ot=J.properties)||void 0===ot?void 0:ot.weight,at=null==st?1:st;if(!C(at=Number(at)))throw new Error("weight value must be a number");if(at>0){mt+=1;var ut=at*me(J,O);0===ut&&(ut=1);var xt=at/ut;ct+=J.geometry.coordinates[0]*xt,ht+=J.geometry.coordinates[1]*xt,pt+=xt}})),mt<1)throw new Error("no features to measure");var xt=ct/pt,Nt=ht/pt;return 1===mt||0===at||Math.abs(xt-J[0])<ut&&Math.abs(Nt-J[1])<ut?a([xt,Nt],{medianCandidates:st.medianCandidates}):(st.medianCandidates.push([xt,Nt]),ka([xt,Nt],O,ot,st,at-1))}function Ga(O,J){return{x:O[0]-J[0],y:O[1]-J[1]}}function qa(O,J){var ot=0,st=0;R(O,(function(at,ut,ct,ht,pt){pt>ot&&(ot=pt,st=ut,J.push([]));var mt=ut-st,xt=O.coordinates[pt][mt+1],Nt=at[0],St=at[1],jt=xt[0],Wt=xt[1];J[pt].push([.75*Nt+.25*jt,.75*St+.25*Wt]),J[pt].push([.25*Nt+.75*jt,.25*St+.75*Wt])}),!0),J.forEach((function(O){O.push(O[0])}))}function Ba(O,J){var ot=0,st=0,at=0;R(O,(function(ut,ct,ht,pt,mt){pt>at&&(at=pt,st=ct,J.push([[]])),mt>ot&&(ot=mt,st=ct,J[pt].push([]));var xt=ct-st,Nt=O.coordinates[pt][mt][xt+1],St=ut[0],jt=ut[1],Wt=Nt[0],Ht=Nt[1];J[pt][mt].push([.75*St+.25*Wt,.75*jt+.25*Ht]),J[pt][mt].push([.25*St+.75*Wt,.25*jt+.75*Ht])}),!0),J.forEach((function(O){O.forEach((function(O){O.push(O[0])}))}))}function za(O,J,ot){void 0===ot&&(ot=2);var st=K(O),at=K(J),ut=st[0]-at[0],ct=st[1]-at[1];return 1===ot?Math.abs(ut)+Math.abs(ct):Math.pow(Math.pow(ut,ot)+Math.pow(ct,ot),1/ot)}function ja(O,J){var ot=(J=J||{}).threshold||1e4,st=J.p||2,at=J.binary||!1,ut=J.alpha||-1,ct=J.standardization||!1,ht=[];F(O,(function(O){ht.push(En(O))}));for(var pt=[],mt=0;mt<ht.length;mt++)pt[mt]=[];for(mt=0;mt<ht.length;mt++)for(var xt=mt;xt<ht.length;xt++){mt===xt&&(pt[mt][xt]=0);var Nt=za(ht[mt],ht[xt],st);pt[mt][xt]=Nt,pt[xt][mt]=Nt}for(mt=0;mt<ht.length;mt++)for(xt=0;xt<ht.length;xt++)0!==(Nt=pt[mt][xt])&&(pt[mt][xt]=at?Nt<=ot?1:0:Nt<=ot?Math.pow(Nt,ut):0);if(ct)for(mt=0;mt<ht.length;mt++){var St=pt[mt].reduce((function(O,J){return O+J}),0);for(xt=0;xt<ht.length;xt++)pt[mt][xt]=pt[mt][xt]/St}return pt}function Ua(O){for(var J=0,ot=0,st=O;ot<st.length;ot++)J+=st[ot];return J/O.length}function Va(O,J){return void 0===J&&(J={}),Ya(O,"mercator",J)}function Xa(O,J){return void 0===J&&(J={}),Ya(O,"wgs84",J)}function Ya(O,J,ot){void 0===ot&&(ot={});var st=(ot=ot||{}).mutate;if(!O)throw new Error("geojson is required");return Array.isArray(O)&&C(O[0])?O="mercator"===J?Ha(O):Wa(O):(!0!==st&&(O=Ie(O)),R(O,(function(O){var ot="mercator"===J?Ha(O):Wa(O);O[0]=ot[0],O[1]=ot[1]}))),O}function Ha(O){var J=Math.PI/180,ot=6378137,st=20037508.342789244,at=[ot*(Math.abs(O[0])<=180?O[0]:O[0]-360*function(O){return O<0?-1:O>0?1:0}(O[0]))*J,ot*Math.log(Math.tan(.25*Math.PI+.5*O[1]*J))];return at[0]>st&&(at[0]=st),at[0]<-st&&(at[0]=-st),at[1]>st&&(at[1]=st),at[1]<-st&&(at[1]=-st),at}function Wa(O){var J=180/Math.PI,ot=6378137;return[O[0]*J/ot,(.5*Math.PI-2*Math.atan(Math.exp(-O[1]/ot)))*J]}Ra.prototype={constructor:Ra,polygons:function(){var O=this.edges;return this.cells.map((function(J){var ot=J.halfedges.map((function(ot){return ca(J,O[ot])}));return ot.data=J.site.data,ot}))},triangles:function(){var O=[],J=this.edges;return this.cells.forEach((function(ot,st){if(ut=(at=ot.halfedges).length)for(var at,ut,ct,ht,pt,mt,xt=ot.site,Nt=-1,St=J[at[ut-1]],jt=St.left===xt?St.right:St.left;++Nt<ut;)ct=jt,jt=(St=J[at[Nt]]).left===xt?St.right:St.left,ct&&jt&&st<ct.index&&st<jt.index&&(pt=ct,mt=jt,((ht=xt)[0]-mt[0])*(pt[1]-ht[1])-(ht[0]-pt[0])*(mt[1]-ht[1])<0)&&O.push([xt.data,ct.data,jt.data])})),O},links:function(){return this.edges.filter((function(O){return O.right})).map((function(O){return{source:O.left.data,target:O.right.data}}))},find:function(O,J,ot){for(var st,at,ut=this,ct=ut._found||0,ht=ut.cells.length;!(at=ut.cells[ct]);)if(++ct>=ht)return null;var pt=O-at.site[0],mt=J-at.site[1],xt=pt*pt+mt*mt;do{at=ut.cells[st=ct],ct=null,at.halfedges.forEach((function(ot){var st=ut.edges[ot],ht=st.left;if(ht!==at.site&&ht||(ht=st.right)){var pt=O-ht[0],mt=J-ht[1],Nt=pt*pt+mt*mt;Nt<xt&&(xt=Nt,ct=ht.index)}}))}while(null!==ct);return ut._found=st,null==ot||xt<=ot*ot?at.site:null}};var fa=Object.freeze({__proto__:null,toMercator:Va,toWgs84:Xa});function Ka(O){return Array.isArray(O)?nu(O):O&&O.bbox?nu(O.bbox):[360*eu(),180*eu()]}function Qa(O,J){void 0===J&&(J={}),null==O&&(O=1);for(var ot=[],st=0;st<O;st++)ot.push(a(Ka(J.bbox)));return f(ot)}function $a(O,J){void 0===J&&(J={}),null==O&&(O=1),C(J.num_vertices)&&void 0!==J.num_vertices||(J.num_vertices=10),C(J.max_radial_length)&&void 0!==J.max_radial_length||(J.max_radial_length=10);for(var ot=[],r=function(O){var st,at=[],ut=function(){for(var O=0,J=0,ot=arguments.length;J<ot;J++)O+=arguments[J].length;var st=Array(O),at=0;for(J=0;J<ot;J++)for(var ut=arguments[J],ct=0,ht=ut.length;ct<ht;ct++,at++)st[at]=ut[ct];return st}(Array(J.num_vertices+1)).map(Math.random);ut.forEach((function(O,J,ot){ot[J]=J>0?O+ot[J-1]:O})),ut.forEach((function(O){O=2*O*Math.PI/ut[ut.length-1];var ot=Math.random();at.push([ot*(J.max_radial_length||10)*Math.sin(O),ot*(J.max_radial_length||10)*Math.cos(O)])})),at[at.length-1]=at[0],at=at.map((st=Ka(J.bbox),function(O){return[O[0]+st[0],O[1]+st[1]]})),ot.push(l([at]))},st=0;st<O;st++)r();return f(ot)}function tu(O,J){if(void 0===J&&(J={}),!P(J=J||{}))throw new Error("options is invalid");var ot=J.bbox,st=J.num_vertices,at=J.max_length,ut=J.max_rotation;null==O&&(O=1),(!C(st)||void 0===st||st<2)&&(st=10),C(at)&&void 0!==at||(at=1e-4),C(ut)&&void 0!==ut||(ut=Math.PI/8);for(var ct=[],ht=0;ht<O;ht++){for(var pt=[Ka(ot)],mt=0;mt<st-1;mt++){var xt=(0===mt?2*Math.random()*Math.PI:Math.tan((pt[mt][1]-pt[mt-1][1])/(pt[mt][0]-pt[mt-1][0])))+(Math.random()-.5)*ut*2,Nt=Math.random()*at;pt.push([pt[mt][0]+Nt*Math.cos(xt),pt[mt][1]+Nt*Math.sin(xt)])}ct.push(h(pt))}return f(ct)}function eu(){return Math.random()-.5}function nu(O){return[Math.random()*(O[2]-O[0])+O[0],Math.random()*(O[3]-O[1])+O[1]]}var va=Object.freeze({__proto__:null,randomPosition:Ka,randomPoint:Qa,randomPolygon:$a,randomLineString:tu});function iu(O,J){if(!O)throw new Error("geojson is required");if("FeatureCollection"!==O.type)throw new Error("geojson must be a FeatureCollection");if(null==J)throw new Error("filter is required");var ot=[];return F(O,(function(O){uu(O.properties,J)&&ot.push(O)})),f(ot)}function ou(O,J,ot){if(!O)throw new Error("geojson is required");if("FeatureCollection"!==O.type)throw new Error("geojson must be a FeatureCollection");if(null==J)throw new Error("property is required");for(var st=au(O,J),at=Object.keys(st),ut=0;ut<at.length;ut++){for(var ct=at[ut],ht=st[ct],pt=[],mt=0;mt<ht.length;mt++)pt.push(O.features[ht[mt]]);ot(f(pt),ct,ut)}}function su(O,J,ot,st){var at=st;return ou(O,J,(function(O,J,ut){at=0===ut&&void 0===st?O:ot(at,O,J,ut)})),at}function au(O,J){var ot={};return F(O,(function(O,st){var at=O.properties||{};if(Object.prototype.hasOwnProperty.call(at,String(J))){var ut=at[J];Object.prototype.hasOwnProperty.call(ot,ut)?ot[ut].push(st):ot[ut]=[st]}})),ot}function uu(O,J){if(void 0===O)return!1;var ot=typeof J;if("number"===ot||"string"===ot)return Object.prototype.hasOwnProperty.call(O,J);if(Array.isArray(J)){for(var st=0;st<J.length;st++)if(!uu(O,J[st]))return!1;return!0}return lu(O,J)}function lu(O,J){for(var ot=Object.keys(J),st=0;st<ot.length;st++){var at=ot[st];if(O[at]!==J[at])return!1}return!0}function cu(O,J){if(!J)return{};if(!J.length)return{};for(var ot={},st=0;st<J.length;st++){var at=J[st];Object.prototype.hasOwnProperty.call(O,at)&&(ot[at]=O[at])}return ot}var Na=Object.freeze({__proto__:null,getCluster:iu,clusterEach:ou,clusterReduce:su,createBins:au,applyFilter:uu,propertiesContainsFilter:lu,filterProperties:cu}),pu=function(O,J){this.next=null,this.key=O,this.data=J,this.left=null,this.right=null};function fu(O,J){return O>J?1:O<J?-1:0}function gu(O,J,ot){for(var st=new pu(null,null),at=st,ut=st;;){var ct=ot(O,J.key);if(ct<0){if(null===J.left)break;if(ot(O,J.left.key)<0){var ht=J.left;if(J.left=ht.right,ht.right=J,null===(J=ht).left)break}ut.left=J,ut=J,J=J.left}else{if(!(ct>0))break;if(null===J.right)break;if(ot(O,J.right.key)>0&&(ht=J.right,J.right=ht.left,ht.left=J,null===(J=ht).right))break;at.right=J,at=J,J=J.right}}return at.right=J.left,ut.left=J.right,J.left=st.right,J.right=st.left,J}function du(O,J,ot,st){var at=new pu(O,J);if(null===ot)return at.left=at.right=null,at;var ut=st(O,(ot=gu(O,ot,st)).key);return ut<0?(at.left=ot.left,at.right=ot,ot.left=null):ut>=0&&(at.right=ot.right,at.left=ot,ot.right=null),at}function yu(O,J,ot){var st=null,at=null;if(J){var ut=ot((J=gu(O,J,ot)).key,O);0===ut?(st=J.left,at=J.right):ut<0?(at=J.right,J.right=null,st=J):(st=J.left,J.left=null,at=J)}return{left:st,right:at}}function vu(O,J,ot,st,at){if(O){st(J+(ot?"└── ":"├── ")+at(O)+"\n");var ut=J+(ot?"    ":"│   ");O.left&&vu(O.left,ut,!1,st,at),O.right&&vu(O.right,ut,!0,st,at)}}var Ca=function(){function t(O){void 0===O&&(O=fu),this._root=null,this._size=0,this._comparator=O}return t.prototype.insert=function(O,J){return this._size++,this._root=du(O,J,this._root,this._comparator)},t.prototype.add=function(O,J){var ot=new pu(O,J);null===this._root&&(ot.left=ot.right=null,this._size++,this._root=ot);var st=this._comparator,at=gu(O,this._root,st),ut=st(O,at.key);return 0===ut?this._root=at:(ut<0?(ot.left=at.left,ot.right=at,at.left=null):ut>0&&(ot.right=at.right,ot.left=at,at.right=null),this._size++,this._root=ot),this._root},t.prototype.remove=function(O){this._root=this._remove(O,this._root,this._comparator)},t.prototype._remove=function(O,J,ot){var st;return null===J?null:0===ot(O,(J=gu(O,J,ot)).key)?(null===J.left?st=J.right:(st=gu(O,J.left,ot)).right=J.right,this._size--,st):J},t.prototype.pop=function(){var O=this._root;if(O){for(;O.left;)O=O.left;return this._root=gu(O.key,this._root,this._comparator),this._root=this._remove(O.key,this._root,this._comparator),{key:O.key,data:O.data}}return null},t.prototype.findStatic=function(O){for(var J=this._root,ot=this._comparator;J;){var st=ot(O,J.key);if(0===st)return J;J=st<0?J.left:J.right}return null},t.prototype.find=function(O){return this._root&&(this._root=gu(O,this._root,this._comparator),0!==this._comparator(O,this._root.key))?null:this._root},t.prototype.contains=function(O){for(var J=this._root,ot=this._comparator;J;){var st=ot(O,J.key);if(0===st)return!0;J=st<0?J.left:J.right}return!1},t.prototype.forEach=function(O,J){for(var ot=this._root,st=[],at=!1;!at;)null!==ot?(st.push(ot),ot=ot.left):0!==st.length?(ot=st.pop(),O.call(J,ot),ot=ot.right):at=!0;return this},t.prototype.range=function(O,J,ot,st){for(var at=[],ut=this._comparator,ct=this._root;0!==at.length||ct;)if(ct)at.push(ct),ct=ct.left;else{if(ut((ct=at.pop()).key,J)>0)break;if(ut(ct.key,O)>=0&&ot.call(st,ct))return this;ct=ct.right}return this},t.prototype.keys=function(){var O=[];return this.forEach((function(J){var ot=J.key;return O.push(ot)})),O},t.prototype.values=function(){var O=[];return this.forEach((function(J){var ot=J.data;return O.push(ot)})),O},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(O){if(void 0===O&&(O=this._root),O)for(;O.left;)O=O.left;return O},t.prototype.maxNode=function(O){if(void 0===O&&(O=this._root),O)for(;O.right;)O=O.right;return O},t.prototype.at=function(O){for(var J=this._root,ot=!1,st=0,at=[];!ot;)if(J)at.push(J),J=J.left;else if(at.length>0){if(J=at.pop(),st===O)return J;st++,J=J.right}else ot=!0;return null},t.prototype.next=function(O){var J=this._root,ot=null;if(O.right){for(ot=O.right;ot.left;)ot=ot.left;return ot}for(var st=this._comparator;J;){var at=st(O.key,J.key);if(0===at)break;at<0?(ot=J,J=J.left):J=J.right}return ot},t.prototype.prev=function(O){var J=this._root,ot=null;if(null!==O.left){for(ot=O.left;ot.right;)ot=ot.right;return ot}for(var st=this._comparator;J;){var at=st(O.key,J.key);if(0===at)break;at<0?J=J.left:(ot=J,J=J.right)}return ot},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(O){for(var J=O,ot=[],st=!1,at=new pu(null,null),ut=at;!st;)J?(ot.push(J),J=J.left):ot.length>0?J=(J=ut=ut.next=ot.pop()).right:st=!0;return ut.next=null,at.next}(this._root)},t.prototype.load=function(O,J,ot){void 0===J&&(J=[]),void 0===ot&&(ot=!1);var st=O.length,at=this._comparator;if(ot&&Eu(O,J,0,st-1,at),null===this._root)this._root=mu(O,J,0,st),this._size=st;else{var ut=function(O,J,ot){for(var st=new pu(null,null),at=st,ut=O,ct=J;null!==ut&&null!==ct;)ot(ut.key,ct.key)<0?(at.next=ut,ut=ut.next):(at.next=ct,ct=ct.next),at=at.next;return null!==ut?at.next=ut:null!==ct&&(at.next=ct),st.next}(this.toList(),function(O,J){for(var ot=new pu(null,null),st=ot,at=0;at<O.length;at++)st=st.next=new pu(O[at],J[at]);return st.next=null,ot.next}(O,J),at);st=this._size+st,this._root=xu({head:ut},0,st)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(O){void 0===O&&(O=function(O){return String(O.key)});var J=[];return vu(this._root,"",!0,(function(O){return J.push(O)}),O),J.join("")},t.prototype.update=function(O,J,ot){var st=this._comparator,at=yu(O,this._root,st),ut=at.left,ct=at.right;st(O,J)<0?ct=du(J,ot,ct,st):ut=du(J,ot,ut,st),this._root=function(O,J,ot){return null===J?O:(null===O||((J=gu(O.key,J,ot)).left=O),J)}(ut,ct,st)},t.prototype.split=function(O){return yu(O,this._root,this._comparator)},t}();function mu(O,J,ot,st){var at=st-ot;if(at>0){var ut=ot+Math.floor(at/2),ct=O[ut],ht=J[ut],pt=new pu(ct,ht);return pt.left=mu(O,J,ot,ut),pt.right=mu(O,J,ut+1,st),pt}return null}function xu(O,J,ot){var st=ot-J;if(st>0){var at=J+Math.floor(st/2),ut=xu(O,J,at),ct=O.head;return ct.left=ut,O.head=O.head.next,ct.right=xu(O,at+1,ot),ct}return null}function Eu(O,J,ot,st,at){if(!(ot>=st)){for(var ut=O[ot+st>>1],ct=ot-1,ht=st+1;;){do{ct++}while(at(O[ct],ut)<0);do{ht--}while(at(O[ht],ut)>0);if(ct>=ht)break;var pt=O[ct];O[ct]=O[ht],O[ht]=pt,pt=J[ct],J[ct]=J[ht],J[ht]=pt}Eu(O,J,ot,ht,at),Eu(O,J,ht+1,st,at)}}function bu(O,J){if(!(O instanceof J))throw new TypeError("Cannot call a class as a function")}function wu(O,J){for(var ot=0;ot<J.length;ot++){var st=J[ot];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(O,st.key,st)}}function Iu(O,J,ot){return J&&wu(O.prototype,J),ot&&wu(O,ot),O}var Nu=function(O,J){return O.ll.x<=J.x&&J.x<=O.ur.x&&O.ll.y<=J.y&&J.y<=O.ur.y},Su=function(O,J){if(J.ur.x<O.ll.x||O.ur.x<J.ll.x||J.ur.y<O.ll.y||O.ur.y<J.ll.y)return null;var ot=O.ll.x<J.ll.x?J.ll.x:O.ll.x,st=O.ur.x<J.ur.x?O.ur.x:J.ur.x;return{ll:{x:ot,y:O.ll.y<J.ll.y?J.ll.y:O.ll.y},ur:{x:st,y:O.ur.y<J.ur.y?O.ur.y:J.ur.y}}},Sa=Number.EPSILON;void 0===Sa&&(Sa=Math.pow(2,-52));var Pa=Sa*Sa,Mu=function(O,J){if(-Sa<O&&O<Sa&&-Sa<J&&J<Sa)return 0;var ot=O-J;return ot*ot<Pa*O*J?0:O<J?-1:1},Ma=function(){function t(){bu(this,t),this.reset()}return Iu(t,[{key:"reset",value:function(){this.xRounder=new La,this.yRounder=new La}},{key:"round",value:function(O,J){return{x:this.xRounder.round(O),y:this.yRounder.round(J)}}}]),t}(),La=function(){function t(){bu(this,t),this.tree=new Ca,this.round(0)}return Iu(t,[{key:"round",value:function(O){var J=this.tree.add(O),ot=this.tree.prev(J);if(null!==ot&&0===Mu(J.key,ot.key))return this.tree.remove(O),ot.key;var st=this.tree.next(J);return null!==st&&0===Mu(J.key,st.key)?(this.tree.remove(O),st.key):O}}]),t}(),Za=new Ma,Tu=function(O,J){return O.x*J.y-O.y*J.x},Au=function(O,J){return O.x*J.x+O.y*J.y},Du=function(O,J,ot){var st={x:J.x-O.x,y:J.y-O.y},at={x:ot.x-O.x,y:ot.y-O.y},ut=Tu(st,at);return Mu(ut,0)},Fu=function(O){return Math.sqrt(Au(O,O))},ku=function(O,J,ot){var st={x:J.x-O.x,y:J.y-O.y},at={x:ot.x-O.x,y:ot.y-O.y};return Au(at,st)/Fu(at)/Fu(st)},Gu=function(O,J,ot){return 0===J.y?null:{x:O.x+J.x/J.y*(ot-O.y),y:ot}},qu=function(O,J,ot){return 0===J.x?null:{x:ot,y:O.y+J.y/J.x*(ot-O.x)}},Ja=function(){function t(O,J){bu(this,t),void 0===O.events?O.events=[this]:O.events.push(this),this.point=O,this.isLeft=J}return Iu(t,null,[{key:"compare",value:function(O,J){var ot=t.comparePoints(O.point,J.point);return 0!==ot?ot:(O.point!==J.point&&O.link(J),O.isLeft!==J.isLeft?O.isLeft?1:-1:hu.compare(O.segment,J.segment))}},{key:"comparePoints",value:function(O,J){return O.x<J.x?-1:O.x>J.x?1:O.y<J.y?-1:O.y>J.y?1:0}}]),Iu(t,[{key:"link",value:function(O){if(O.point===this.point)throw new Error("Tried to link already linked events");for(var J=O.point.events,ot=0,st=J.length;ot<st;ot++){var at=J[ot];this.point.events.push(at),at.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var O=this.point.events.length,J=0;J<O;J++){var ot=this.point.events[J];if(void 0===ot.segment.consumedBy)for(var st=J+1;st<O;st++){var at=this.point.events[st];void 0===at.consumedBy&&ot.otherSE.point.events===at.otherSE.point.events&&ot.segment.consume(at.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var O=[],J=0,ot=this.point.events.length;J<ot;J++){var st=this.point.events[J];st!==this&&!st.segment.ringOut&&st.segment.isInResult()&&O.push(st)}return O}},{key:"getLeftmostComparator",value:function(O){var J=this,ot=new Map,r=function(st){var at,ut,ct,ht,pt,mt=st.otherSE;ot.set(st,{sine:(at=J.point,ut=O.point,ct=mt.point,ht={x:ut.x-at.x,y:ut.y-at.y},pt={x:ct.x-at.x,y:ct.y-at.y},Tu(pt,ht)/Fu(pt)/Fu(ht)),cosine:ku(J.point,O.point,mt.point)})};return function(O,J){ot.has(O)||r(O),ot.has(J)||r(J);var st=ot.get(O),at=st.sine,ut=st.cosine,ct=ot.get(J),ht=ct.sine,pt=ct.cosine;return at>=0&&ht>=0?ut<pt?1:ut>pt?-1:0:at<0&&ht<0?ut<pt?-1:ut>pt?1:0:ht<at?-1:ht>at?1:0}}}]),t}(),ru=0,hu=function(){function t(O,J,ot,st){bu(this,t),this.id=++ru,this.leftSE=O,O.segment=this,O.otherSE=J,this.rightSE=J,J.segment=this,J.otherSE=O,this.rings=ot,this.windings=st}return Iu(t,null,[{key:"compare",value:function(O,J){var ot=O.leftSE.point.x,st=J.leftSE.point.x,at=O.rightSE.point.x,ut=J.rightSE.point.x;if(ut<ot)return 1;if(at<st)return-1;var ct=O.leftSE.point.y,ht=J.leftSE.point.y,pt=O.rightSE.point.y,mt=J.rightSE.point.y;if(ot<st){if(ht<ct&&ht<pt)return 1;if(ht>ct&&ht>pt)return-1;var xt=O.comparePoint(J.leftSE.point);if(xt<0)return 1;if(xt>0)return-1;var Nt=J.comparePoint(O.rightSE.point);return 0!==Nt?Nt:-1}if(ot>st){if(ct<ht&&ct<mt)return-1;if(ct>ht&&ct>mt)return 1;var St=J.comparePoint(O.leftSE.point);if(0!==St)return St;var jt=O.comparePoint(J.rightSE.point);return jt<0?1:jt>0?-1:1}if(ct<ht)return-1;if(ct>ht)return 1;if(at<ut){var Wt=J.comparePoint(O.rightSE.point);if(0!==Wt)return Wt}if(at>ut){var Ht=O.comparePoint(J.rightSE.point);if(Ht<0)return 1;if(Ht>0)return-1}if(at!==ut){var Zt=pt-ct,Kt=at-ot,Jt=mt-ht,ee=ut-st;if(Zt>Kt&&Jt<ee)return 1;if(Zt<Kt&&Jt>ee)return-1}return at>ut?1:at<ut||pt<mt?-1:pt>mt?1:O.id<J.id?-1:O.id>J.id?1:0}}]),Iu(t,[{key:"replaceRightSE",value:function(O){this.rightSE=O,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var O=this.leftSE.point.y,J=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:O<J?O:J},ur:{x:this.rightSE.point.x,y:O>J?O:J}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(O){return O.x===this.leftSE.point.x&&O.y===this.leftSE.point.y||O.x===this.rightSE.point.x&&O.y===this.rightSE.point.y}},{key:"comparePoint",value:function(O){if(this.isAnEndpoint(O))return 0;var J=this.leftSE.point,ot=this.rightSE.point,st=this.vector();if(J.x===ot.x)return O.x===J.x?0:O.x<J.x?1:-1;var at=(O.y-J.y)/st.y,ut=J.x+at*st.x;if(O.x===ut)return 0;var ct=(O.x-J.x)/st.x,ht=J.y+ct*st.y;return O.y===ht?0:O.y<ht?-1:1}},{key:"getIntersection",value:function(O){var J=this.bbox(),ot=O.bbox(),st=Su(J,ot);if(null===st)return null;var at=this.leftSE.point,ut=this.rightSE.point,ct=O.leftSE.point,ht=O.rightSE.point,pt=Nu(J,ct)&&0===this.comparePoint(ct),mt=Nu(ot,at)&&0===O.comparePoint(at),xt=Nu(J,ht)&&0===this.comparePoint(ht),Nt=Nu(ot,ut)&&0===O.comparePoint(ut);if(mt&&pt)return Nt&&!xt?ut:!Nt&&xt?ht:null;if(mt)return xt&&at.x===ht.x&&at.y===ht.y?null:at;if(pt)return Nt&&ut.x===ct.x&&ut.y===ct.y?null:ct;if(Nt&&xt)return null;if(Nt)return ut;if(xt)return ht;var St=function(O,J,ot,st){if(0===J.x)return qu(ot,st,O.x);if(0===st.x)return qu(O,J,ot.x);if(0===J.y)return Gu(ot,st,O.y);if(0===st.y)return Gu(O,J,ot.y);var at=Tu(J,st);if(0==at)return null;var ut={x:ot.x-O.x,y:ot.y-O.y},ct=Tu(ut,J)/at,ht=Tu(ut,st)/at;return{x:(O.x+ht*J.x+(ot.x+ct*st.x))/2,y:(O.y+ht*J.y+(ot.y+ct*st.y))/2}}(at,this.vector(),ct,O.vector());return null===St?null:Nu(st,St)?Za.round(St.x,St.y):null}},{key:"split",value:function(O){var J=[],ot=void 0!==O.events,st=new Ja(O,!0),at=new Ja(O,!1),ut=this.rightSE;this.replaceRightSE(at),J.push(at),J.push(st);var ct=new t(st,ut,this.rings.slice(),this.windings.slice());return Ja.comparePoints(ct.leftSE.point,ct.rightSE.point)>0&&ct.swapEvents(),Ja.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),ot&&(st.checkForConsuming(),at.checkForConsuming()),J}},{key:"swapEvents",value:function(){var O=this.rightSE;this.rightSE=this.leftSE,this.leftSE=O,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var J=0,ot=this.windings.length;J<ot;J++)this.windings[J]*=-1}},{key:"consume",value:function(O){for(var J=this,ot=O;J.consumedBy;)J=J.consumedBy;for(;ot.consumedBy;)ot=ot.consumedBy;var st=t.compare(J,ot);if(0!==st){if(st>0){var at=J;J=ot,ot=at}if(J.prev===ot){var ut=J;J=ot,ot=ut}for(var ct=0,ht=ot.rings.length;ct<ht;ct++){var pt=ot.rings[ct],mt=ot.windings[ct],xt=J.rings.indexOf(pt);-1===xt?(J.rings.push(pt),J.windings.push(mt)):J.windings[xt]+=mt}ot.rings=null,ot.windings=null,ot.consumedBy=J,ot.leftSE.consumedBy=J.leftSE,ot.rightSE.consumedBy=J.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var O=this.prev.consumedBy||this.prev;this._beforeState=O.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var O=this.beforeState();this._afterState={rings:O.rings.slice(0),windings:O.windings.slice(0),multiPolys:[]};for(var J=this._afterState.rings,ot=this._afterState.windings,st=this._afterState.multiPolys,at=0,ut=this.rings.length;at<ut;at++){var ct=this.rings[at],ht=this.windings[at],pt=J.indexOf(ct);-1===pt?(J.push(ct),ot.push(ht)):ot[pt]+=ht}for(var mt=[],xt=[],Nt=0,St=J.length;Nt<St;Nt++)if(0!==ot[Nt]){var jt=J[Nt],Wt=jt.poly;if(-1===xt.indexOf(Wt))if(jt.isExterior)mt.push(Wt);else{-1===xt.indexOf(Wt)&&xt.push(Wt);var Ht=mt.indexOf(jt.poly);-1!==Ht&&mt.splice(Ht,1)}}for(var Zt=0,Kt=mt.length;Zt<Kt;Zt++){var Jt=mt[Zt].multiPoly;-1===st.indexOf(Jt)&&st.push(Jt)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var O=this.beforeState().multiPolys,J=this.afterState().multiPolys;switch(ju.type){case"union":var ot=0===O.length,st=0===J.length;this._isInResult=ot!==st;break;case"intersection":var at,ut;O.length<J.length?(at=O.length,ut=J.length):(at=J.length,ut=O.length),this._isInResult=ut===ju.numMultiPolys&&at<ut;break;case"xor":var ct=Math.abs(O.length-J.length);this._isInResult=ct%2==1;break;case"difference":var a=function(O){return 1===O.length&&O[0].isSubject};this._isInResult=a(O)!==a(J);break;default:throw new Error("Unrecognized operation type found ".concat(ju.type))}return this._isInResult}}],[{key:"fromRing",value:function(O,J,ot){var st,at,ut,ct=Ja.comparePoints(O,J);if(ct<0)st=O,at=J,ut=1;else{if(!(ct>0))throw new Error("Tried to create degenerate segment at [".concat(O.x,", ").concat(O.y,"]"));st=J,at=O,ut=-1}return new t(new Ja(st,!0),new Ja(at,!1),[ot],[ut])}}]),t}(),_u=function(){function t(O,J,ot){if(bu(this,t),!Array.isArray(O)||0===O.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=J,this.isExterior=ot,this.segments=[],"number"!=typeof O[0][0]||"number"!=typeof O[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var st=Za.round(O[0][0],O[0][1]);this.bbox={ll:{x:st.x,y:st.y},ur:{x:st.x,y:st.y}};for(var at=st,ut=1,ct=O.length;ut<ct;ut++){if("number"!=typeof O[ut][0]||"number"!=typeof O[ut][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var ht=Za.round(O[ut][0],O[ut][1]);ht.x===at.x&&ht.y===at.y||(this.segments.push(hu.fromRing(at,ht,this)),ht.x<this.bbox.ll.x&&(this.bbox.ll.x=ht.x),ht.y<this.bbox.ll.y&&(this.bbox.ll.y=ht.y),ht.x>this.bbox.ur.x&&(this.bbox.ur.x=ht.x),ht.y>this.bbox.ur.y&&(this.bbox.ur.y=ht.y),at=ht)}st.x===at.x&&st.y===at.y||this.segments.push(hu.fromRing(at,st,this))}return Iu(t,[{key:"getSweepEvents",value:function(){for(var O=[],J=0,ot=this.segments.length;J<ot;J++){var st=this.segments[J];O.push(st.leftSE),O.push(st.rightSE)}return O}}]),t}(),Cu=function(){function t(O,J){if(bu(this,t),!Array.isArray(O))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new _u(O[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var ot=1,st=O.length;ot<st;ot++){var at=new _u(O[ot],this,!1);at.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=at.bbox.ll.x),at.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=at.bbox.ll.y),at.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=at.bbox.ur.x),at.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=at.bbox.ur.y),this.interiorRings.push(at)}this.multiPoly=J}return Iu(t,[{key:"getSweepEvents",value:function(){for(var O=this.exteriorRing.getSweepEvents(),J=0,ot=this.interiorRings.length;J<ot;J++)for(var st=this.interiorRings[J].getSweepEvents(),at=0,ut=st.length;at<ut;at++)O.push(st[at]);return O}}]),t}(),Pu=function(){function t(O,J){if(bu(this,t),!Array.isArray(O))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof O[0][0][0]&&(O=[O])}catch(O){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var ot=0,st=O.length;ot<st;ot++){var at=new Cu(O[ot],this);at.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=at.bbox.ll.x),at.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=at.bbox.ll.y),at.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=at.bbox.ur.x),at.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=at.bbox.ur.y),this.polys.push(at)}this.isSubject=J}return Iu(t,[{key:"getSweepEvents",value:function(){for(var O=[],J=0,ot=this.polys.length;J<ot;J++)for(var st=this.polys[J].getSweepEvents(),at=0,ut=st.length;at<ut;at++)O.push(st[at]);return O}}]),t}(),Lu=function(){function t(O){bu(this,t),this.events=O;for(var J=0,ot=O.length;J<ot;J++)O[J].segment.ringOut=this;this.poly=null}return Iu(t,null,[{key:"factory",value:function(O){for(var J=[],ot=0,st=O.length;ot<st;ot++){var at=O[ot];if(at.isInResult()&&!at.ringOut){for(var ut=null,ct=at.leftSE,ht=at.rightSE,pt=[ct],mt=ct.point,xt=[];ut=ct,ct=ht,pt.push(ct),ct.point!==mt;)for(;;){var Nt=ct.getAvailableLinkedEvents();if(0===Nt.length){var St=pt[0].point,jt=pt[pt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(St.x,",")+" ".concat(St.y,"]. Last matching segment found ends at")+" [".concat(jt.x,", ").concat(jt.y,"]."))}if(1===Nt.length){ht=Nt[0].otherSE;break}for(var Wt=null,Ht=0,Zt=xt.length;Ht<Zt;Ht++)if(xt[Ht].point===ct.point){Wt=Ht;break}if(null===Wt){xt.push({index:pt.length,point:ct.point});var Kt=ct.getLeftmostComparator(ut);ht=Nt.sort(Kt)[0].otherSE;break}var Jt=xt.splice(Wt)[0],ee=pt.splice(Jt.index);ee.unshift(ee[0].otherSE),J.push(new t(ee.reverse()))}J.push(new t(pt))}}return J}}]),Iu(t,[{key:"getGeom",value:function(){for(var O=this.events[0].point,J=[O],ot=1,st=this.events.length-1;ot<st;ot++){var at=this.events[ot].point,ut=this.events[ot+1].point;0!==Du(at,O,ut)&&(J.push(at),O=at)}if(1===J.length)return null;var ct=J[0],ht=J[1];0===Du(ct,O,ht)&&J.shift(),J.push(J[0]);for(var pt=this.isExteriorRing()?1:-1,mt=this.isExteriorRing()?0:J.length-1,xt=this.isExteriorRing()?J.length:-1,Nt=[],St=mt;St!=xt;St+=pt)Nt.push([J[St].x,J[St].y]);return Nt}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var O=this.enclosingRing();this._isExteriorRing=!O||!O.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var O=this.events[0],J=1,ot=this.events.length;J<ot;J++){var st=this.events[J];Ja.compare(O,st)>0&&(O=st)}for(var at=O.segment.prevInResult(),ut=at?at.prevInResult():null;;){if(!at)return null;if(!ut)return at.ringOut;if(ut.ringOut!==at.ringOut)return ut.ringOut.enclosingRing()!==at.ringOut?at.ringOut:at.ringOut.enclosingRing();at=ut.prevInResult(),ut=at?at.prevInResult():null}}}]),t}(),Ru=function(){function t(O){bu(this,t),this.exteriorRing=O,O.poly=this,this.interiorRings=[]}return Iu(t,[{key:"addInterior",value:function(O){this.interiorRings.push(O),O.poly=this}},{key:"getGeom",value:function(){var O=[this.exteriorRing.getGeom()];if(null===O[0])return null;for(var J=0,ot=this.interiorRings.length;J<ot;J++){var st=this.interiorRings[J].getGeom();null!==st&&O.push(st)}return O}}]),t}(),Ou=function(){function t(O){bu(this,t),this.rings=O,this.polys=this._composePolys(O)}return Iu(t,[{key:"getGeom",value:function(){for(var O=[],J=0,ot=this.polys.length;J<ot;J++){var st=this.polys[J].getGeom();null!==st&&O.push(st)}return O}},{key:"_composePolys",value:function(O){for(var J=[],ot=0,st=O.length;ot<st;ot++){var at=O[ot];if(!at.poly)if(at.isExteriorRing())J.push(new Ru(at));else{var ut=at.enclosingRing();ut.poly||J.push(new Ru(ut)),ut.poly.addInterior(at)}}return J}}]),t}(),Vu=function(){function t(O){var J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hu.compare;bu(this,t),this.queue=O,this.tree=new Ca(J),this.segments=[]}return Iu(t,[{key:"process",value:function(O){var J=O.segment,ot=[];if(O.consumedBy)return O.isLeft?this.queue.remove(O.otherSE):this.tree.remove(J),ot;var st=O.isLeft?this.tree.insert(J):this.tree.find(J);if(!st)throw new Error("Unable to find segment #".concat(J.id," ")+"[".concat(J.leftSE.point.x,", ").concat(J.leftSE.point.y,"] -> ")+"[".concat(J.rightSE.point.x,", ").concat(J.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var at=st,ut=st,ct=void 0,ht=void 0;void 0===ct;)null===(at=this.tree.prev(at))?ct=null:void 0===at.key.consumedBy&&(ct=at.key);for(;void 0===ht;)null===(ut=this.tree.next(ut))?ht=null:void 0===ut.key.consumedBy&&(ht=ut.key);if(O.isLeft){var pt=null;if(ct){var mt=ct.getIntersection(J);if(null!==mt&&(J.isAnEndpoint(mt)||(pt=mt),!ct.isAnEndpoint(mt)))for(var xt=this._splitSafely(ct,mt),Nt=0,St=xt.length;Nt<St;Nt++)ot.push(xt[Nt])}var jt=null;if(ht){var Wt=ht.getIntersection(J);if(null!==Wt&&(J.isAnEndpoint(Wt)||(jt=Wt),!ht.isAnEndpoint(Wt)))for(var Ht=this._splitSafely(ht,Wt),Zt=0,Kt=Ht.length;Zt<Kt;Zt++)ot.push(Ht[Zt])}if(null!==pt||null!==jt){var Jt=null;Jt=null===pt?jt:null===jt||Ja.comparePoints(pt,jt)<=0?pt:jt,this.queue.remove(J.rightSE),ot.push(J.rightSE);for(var ee=J.split(Jt),ne=0,re=ee.length;ne<re;ne++)ot.push(ee[ne])}ot.length>0?(this.tree.remove(J),ot.push(O)):(this.segments.push(J),J.prev=ct)}else{if(ct&&ht){var De=ct.getIntersection(ht);if(null!==De){if(!ct.isAnEndpoint(De))for(var qe=this._splitSafely(ct,De),Ge=0,Be=qe.length;Ge<Be;Ge++)ot.push(qe[Ge]);if(!ht.isAnEndpoint(De))for(var pn=this._splitSafely(ht,De),wn=0,In=pn.length;wn<In;wn++)ot.push(pn[wn])}}this.tree.remove(J)}return ot}},{key:"_splitSafely",value:function(O,J){this.tree.remove(O);var ot=O.rightSE;this.queue.remove(ot);var st=O.split(J);return st.push(ot),void 0===O.consumedBy&&this.tree.insert(O),st}}]),t}(),Bu="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,zu="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,ju=new(function(){function t(){bu(this,t)}return Iu(t,[{key:"run",value:function(O,J,ot){ju.type=O,Za.reset();for(var st=[new Pu(J,!0)],at=0,ut=ot.length;at<ut;at++)st.push(new Pu(ot[at],!1));if(ju.numMultiPolys=st.length,"difference"===ju.type)for(var ct=st[0],ht=1;ht<st.length;)null!==Su(st[ht].bbox,ct.bbox)?ht++:st.splice(ht,1);if("intersection"===ju.type)for(var pt=0,mt=st.length;pt<mt;pt++)for(var xt=st[pt],Nt=pt+1,St=st.length;Nt<St;Nt++)if(null===Su(xt.bbox,st[Nt].bbox))return[];for(var jt=new Ca(Ja.compare),Wt=0,Ht=st.length;Wt<Ht;Wt++)for(var Zt=st[Wt].getSweepEvents(),Kt=0,Jt=Zt.length;Kt<Jt;Kt++)if(jt.insert(Zt[Kt]),jt.size>Bu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var ee=new Vu(jt),ne=jt.size,re=jt.pop();re;){var De=re.key;if(jt.size===ne){var qe=De.segment;throw new Error("Unable to pop() ".concat(De.isLeft?"left":"right"," SweepEvent ")+"[".concat(De.point.x,", ").concat(De.point.y,"] from segment #").concat(qe.id," ")+"[".concat(qe.leftSE.point.x,", ").concat(qe.leftSE.point.y,"] -> ")+"[".concat(qe.rightSE.point.x,", ").concat(qe.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(jt.size>Bu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(ee.segments.length>zu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Ge=ee.process(De),Be=0,pn=Ge.length;Be<pn;Be++){var wn=Ge[Be];void 0===wn.consumedBy&&jt.insert(wn)}ne=jt.size,re=jt.pop()}Za.reset();var In=Lu.factory(ee.segments);return new Ou(In).getGeom()}}]),t}()),Uu={union:function(O){for(var J=arguments.length,ot=new Array(J>1?J-1:0),st=1;st<J;st++)ot[st-1]=arguments[st];return ju.run("union",O,ot)},intersection:function(O){for(var J=arguments.length,ot=new Array(J>1?J-1:0),st=1;st<J;st++)ot[st-1]=arguments[st];return ju.run("intersection",O,ot)},xor:function(O){for(var J=arguments.length,ot=new Array(J>1?J-1:0),st=1;st<J;st++)ot[st-1]=arguments[st];return ju.run("xor",O,ot)},difference:function(O){for(var J=arguments.length,ot=new Array(J>1?J-1:0),st=1;st<J;st++)ot[st-1]=arguments[st];return ju.run("difference",O,ot)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(O){if(null==this)throw new TypeError(this+" is not an object");var J=Object(this),ot=Math.max(Math.min(J.length,9007199254740991),0)||0,st=1 in arguments&&parseInt(Number(arguments[1]),10)||0;st=st<0?Math.max(ot+st,0):Math.min(st,ot);var at=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:ot;for(at=at<0?Math.max(ot+arguments[2],0):Math.min(at,ot);st<at;)J[st]=O,++st;return J},writable:!0}),Number.isFinite=Number.isFinite||function(O){return"number"==typeof O&&isFinite(O)},Number.isInteger=Number.isInteger||function(O){return"number"==typeof O&&isFinite(O)&&Math.floor(O)===O},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(O){return O!=O},Math.trunc=Math.trunc||function(O){return O<0?Math.ceil(O):Math.floor(O)};var tl=function(){};tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl},tl.prototype.equalsWithTolerance=function(O,J,ot){return Math.abs(O-J)<=ot};var Xu=function(O){function e(J){O.call(this,J),this.name="IllegalArgumentException",this.message=J,this.stack=(new O).stack}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e}(Error),nl=function(){},Yu={MAX_VALUE:{configurable:!0}};nl.isNaN=function(O){return Number.isNaN(O)},nl.doubleToLongBits=function(O){return O},nl.longBitsToDouble=function(O){return O},nl.isInfinite=function(O){return!Number.isFinite(O)},Yu.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(nl,Yu);var il=function(){},ol=function(){},sl=function(){};function al(){}var Wu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var O=arguments[0];this.x=O.x,this.y=O.y,this.z=O.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Hu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Wu.prototype.setOrdinate=function(O,J){switch(O){case Wu.X:this.x=J;break;case Wu.Y:this.y=J;break;case Wu.Z:this.z=J;break;default:throw new Xu("Invalid ordinate index: "+O)}},Wu.prototype.equals2D=function(){if(1===arguments.length){var O=arguments[0];return this.x===O.x&&this.y===O.y}if(2===arguments.length){var J=arguments[0],ot=arguments[1];return!!tl.equalsWithTolerance(this.x,J.x,ot)&&!!tl.equalsWithTolerance(this.y,J.y,ot)}},Wu.prototype.getOrdinate=function(O){switch(O){case Wu.X:return this.x;case Wu.Y:return this.y;case Wu.Z:return this.z}throw new Xu("Invalid ordinate index: "+O)},Wu.prototype.equals3D=function(O){return this.x===O.x&&this.y===O.y&&(this.z===O.z||nl.isNaN(this.z))&&nl.isNaN(O.z)},Wu.prototype.equals=function(O){return O instanceof Wu&&this.equals2D(O)},Wu.prototype.equalInZ=function(O,J){return tl.equalsWithTolerance(this.z,O.z,J)},Wu.prototype.compareTo=function(O){var J=O;return this.x<J.x?-1:this.x>J.x?1:this.y<J.y?-1:this.y>J.y?1:0},Wu.prototype.clone=function(){},Wu.prototype.copy=function(){return new Wu(this)},Wu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Wu.prototype.distance3D=function(O){var J=this.x-O.x,ot=this.y-O.y,st=this.z-O.z;return Math.sqrt(J*J+ot*ot+st*st)},Wu.prototype.distance=function(O){var J=this.x-O.x,ot=this.y-O.y;return Math.sqrt(J*J+ot*ot)},Wu.prototype.hashCode=function(){var O=17;return 37*(O=37*O+Wu.hashCode(this.x))+Wu.hashCode(this.y)},Wu.prototype.setCoordinate=function(O){this.x=O.x,this.y=O.y,this.z=O.z},Wu.prototype.interfaces_=function(){return[il,ol,al]},Wu.prototype.getClass=function(){return Wu},Wu.hashCode=function(){if(1===arguments.length){nl.doubleToLongBits(arguments[0]);return Math.trunc(0)}},Hu.DimensionalComparator.get=function(){return cl},Hu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Hu.NULL_ORDINATE.get=function(){return nl.NaN},Hu.X.get=function(){return 0},Hu.Y.get=function(){return 1},Hu.Z.get=function(){return 2},Object.defineProperties(Wu,Hu);var cl=function(O){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var J=arguments[0];if(2!==J&&3!==J)throw new Xu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=J}};cl.prototype.compare=function(O,J){var ot=O,st=J,at=cl.compare(ot.x,st.x);if(0!==at)return at;var ut=cl.compare(ot.y,st.y);return 0!==ut?ut:this._dimensionsToTest<=2?0:cl.compare(ot.z,st.z)},cl.prototype.interfaces_=function(){return[sl]},cl.prototype.getClass=function(){return cl},cl.compare=function(O,J){return O<J?-1:O>J?1:nl.isNaN(O)?nl.isNaN(J)?0:-1:nl.isNaN(J)?1:0};var hl=function(){};hl.prototype.create=function(){},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl};var pl=function(){},Qu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.toLocationSymbol=function(O){switch(O){case pl.EXTERIOR:return"e";case pl.BOUNDARY:return"b";case pl.INTERIOR:return"i";case pl.NONE:return"-"}throw new Xu("Unknown location value: "+O)},Qu.INTERIOR.get=function(){return 0},Qu.BOUNDARY.get=function(){return 1},Qu.EXTERIOR.get=function(){return 2},Qu.NONE.get=function(){return-1},Object.defineProperties(pl,Qu);var gl=function(O,J){return O.interfaces_&&O.interfaces_().indexOf(J)>-1},dl=function(){},Zu={LOG_10:{configurable:!0}};dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl},dl.log10=function(O){var J=Math.log(O);return nl.isInfinite(J)||nl.isNaN(J)?J:J/dl.LOG_10},dl.min=function(O,J,ot,st){var at=O;return J<at&&(at=J),ot<at&&(at=ot),st<at&&(at=st),at},dl.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var O=arguments[0],J=arguments[1],ot=arguments[2];return O<J?J:O>ot?ot:O}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var st=arguments[0],at=arguments[1],ut=arguments[2];return st<at?at:st>ut?ut:st}},dl.wrap=function(O,J){return O<0?J- -O%J:O%J},dl.max=function(){if(3===arguments.length){var O=arguments[1],J=arguments[2],ot=arguments[0];return O>ot&&(ot=O),J>ot&&(ot=J),ot}if(4===arguments.length){var st=arguments[1],at=arguments[2],ut=arguments[3],ct=arguments[0];return st>ct&&(ct=st),at>ct&&(ct=at),ut>ct&&(ct=ut),ct}},dl.average=function(O,J){return(O+J)/2},Zu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(dl,Zu);var vl=function(O){this.str=O};vl.prototype.append=function(O){this.str+=O},vl.prototype.setCharAt=function(O,J){this.str=this.str.substr(0,O)+J+this.str.substr(O+1)},vl.prototype.toString=function(O){return this.str};var _l=function(O){this.value=O};_l.prototype.intValue=function(){return this.value},_l.prototype.compareTo=function(O){return this.value<O?-1:this.value>O?1:0},_l.isNaN=function(O){return Number.isNaN(O)};var ml=function(){};ml.isWhitespace=function(O){return O<=32&&O>=0||127===O},ml.toUpperCase=function(O){return O.toUpperCase()};var Ku=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var O=arguments[0];this.init(O)}else if(arguments[0]instanceof t){var J=arguments[0];this.init(J)}else if("string"==typeof arguments[0]){t.call(this,t.parse(arguments[0]))}}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];this.init(ot,st)}},Ju={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Ku.prototype.le=function(O){return(this._hi<O._hi||this._hi===O._hi)&&this._lo<=O._lo},Ku.prototype.extractSignificantDigits=function(O,J){var ot=this.abs(),st=Ku.magnitude(ot._hi),at=Ku.TEN.pow(st);(ot=ot.divide(at)).gt(Ku.TEN)?(ot=ot.divide(Ku.TEN),st+=1):ot.lt(Ku.ONE)&&(ot=ot.multiply(Ku.TEN),st-=1);for(var ut=st+1,ct=new vl,ht=Ku.MAX_PRINT_DIGITS-1,pt=0;pt<=ht;pt++){O&&pt===ut&&ct.append(".");var mt=Math.trunc(ot._hi);if(mt<0)break;var xt=!1,Nt=0;mt>9?(xt=!0,Nt="9"):Nt="0"+mt,ct.append(Nt),ot=ot.subtract(Ku.valueOf(mt)).multiply(Ku.TEN),xt&&ot.selfAdd(Ku.TEN);var St=!0,jt=Ku.magnitude(ot._hi);if(jt<0&&Math.abs(jt)>=ht-pt&&(St=!1),!St)break}return J[0]=st,ct.toString()},Ku.prototype.sqr=function(){return this.multiply(this)},Ku.prototype.doubleValue=function(){return this._hi+this._lo},Ku.prototype.subtract=function(){if(arguments[0]instanceof Ku){var O=arguments[0];return this.add(O.negate())}if("number"==typeof arguments[0]){var J=arguments[0];return this.add(-J)}},Ku.prototype.equals=function(){if(1===arguments.length){var O=arguments[0];return this._hi===O._hi&&this._lo===O._lo}},Ku.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Ku.prototype.selfSubtract=function(){if(arguments[0]instanceof Ku){var O=arguments[0];return this.isNaN()?this:this.selfAdd(-O._hi,-O._lo)}if("number"==typeof arguments[0]){var J=arguments[0];return this.isNaN()?this:this.selfAdd(-J,0)}},Ku.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Ku.prototype.min=function(O){return this.le(O)?this:O},Ku.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Ku){var O=arguments[0];return this.selfDivide(O._hi,O._lo)}if("number"==typeof arguments[0]){var J=arguments[0];return this.selfDivide(J,0)}}else if(2===arguments.length){var ot,st,at,ut,ct=arguments[0],ht=arguments[1],pt=null,mt=null,xt=null,Nt=null;return at=this._hi/ct,Nt=(pt=(xt=Ku.SPLIT*at)-(pt=xt-at))*(mt=(Nt=Ku.SPLIT*ct)-(mt=Nt-ct))-(ut=at*ct)+pt*(st=ct-mt)+(ot=at-pt)*mt+ot*st,Nt=at+(xt=(this._hi-ut-Nt+this._lo-at*ht)/ct),this._hi=Nt,this._lo=at-Nt+xt,this}},Ku.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Ku.prototype.divide=function(){if(arguments[0]instanceof Ku){var O,J,ot,st,at=arguments[0],ut=null,ct=null,ht=null,pt=null;O=(ot=this._hi/at._hi)-(ut=(ht=Ku.SPLIT*ot)-(ut=ht-ot)),pt=ut*(ct=(pt=Ku.SPLIT*at._hi)-(ct=pt-at._hi))-(st=ot*at._hi)+ut*(J=at._hi-ct)+O*ct+O*J;var mt=pt=ot+(ht=(this._hi-st-pt+this._lo-ot*at._lo)/at._hi);return new Ku(mt,ot-pt+ht)}if("number"==typeof arguments[0]){var xt=arguments[0];return nl.isNaN(xt)?Ku.createNaN():Ku.copy(this).selfDivide(xt,0)}},Ku.prototype.ge=function(O){return(this._hi>O._hi||this._hi===O._hi)&&this._lo>=O._lo},Ku.prototype.pow=function(O){if(0===O)return Ku.valueOf(1);var J=new Ku(this),ot=Ku.valueOf(1),st=Math.abs(O);if(st>1)for(;st>0;)st%2==1&&ot.selfMultiply(J),(st/=2)>0&&(J=J.sqr());else ot=J;return O<0?ot.reciprocal():ot},Ku.prototype.ceil=function(){if(this.isNaN())return Ku.NaN;var O=Math.ceil(this._hi),J=0;return O===this._hi&&(J=Math.ceil(this._lo)),new Ku(O,J)},Ku.prototype.compareTo=function(O){var J=O;return this._hi<J._hi?-1:this._hi>J._hi?1:this._lo<J._lo?-1:this._lo>J._lo?1:0},Ku.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Ku.prototype.setValue=function(){if(arguments[0]instanceof Ku){var O=arguments[0];return this.init(O),this}if("number"==typeof arguments[0]){var J=arguments[0];return this.init(J),this}},Ku.prototype.max=function(O){return this.ge(O)?this:O},Ku.prototype.sqrt=function(){if(this.isZero())return Ku.valueOf(0);if(this.isNegative())return Ku.NaN;var O=1/Math.sqrt(this._hi),J=this._hi*O,ot=Ku.valueOf(J),st=this.subtract(ot.sqr())._hi*(.5*O);return ot.add(st)},Ku.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Ku){var O=arguments[0];return this.selfAdd(O._hi,O._lo)}if("number"==typeof arguments[0]){var J,ot,st,at,ut,ct=arguments[0],ht=null;return ht=(st=this._hi+ct)-(at=st-this._hi),ot=(ut=(ht=ct-at+(this._hi-ht))+this._lo)+(st-(J=st+ut)),this._hi=J+ot,this._lo=ot+(J-this._hi),this}}else if(2===arguments.length){var pt,mt,xt,Nt,St=arguments[0],jt=arguments[1],Wt=null,Ht=null,Zt=null;xt=this._hi+St,mt=this._lo+jt,Ht=xt-(Zt=xt-this._hi),Wt=mt-(Nt=mt-this._lo);var Kt=(pt=xt+(Zt=(Ht=St-Zt+(this._hi-Ht))+mt))+(Zt=(Wt=jt-Nt+(this._lo-Wt))+(Zt+(xt-pt))),Jt=Zt+(pt-Kt);return this._hi=Kt,this._lo=Jt,this}},Ku.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Ku){var O=arguments[0];return this.selfMultiply(O._hi,O._lo)}if("number"==typeof arguments[0]){var J=arguments[0];return this.selfMultiply(J,0)}}else if(2===arguments.length){var ot,st,at=arguments[0],ut=arguments[1],ct=null,ht=null,pt=null,mt=null;ct=(pt=Ku.SPLIT*this._hi)-this._hi,mt=Ku.SPLIT*at,ct=pt-ct,ot=this._hi-ct,ht=mt-at;var xt=(pt=this._hi*at)+(mt=ct*(ht=mt-ht)-pt+ct*(st=at-ht)+ot*ht+ot*st+(this._hi*ut+this._lo*at)),Nt=mt+(ct=pt-xt);return this._hi=xt,this._lo=Nt,this}},Ku.prototype.selfSqr=function(){return this.selfMultiply(this)},Ku.prototype.floor=function(){if(this.isNaN())return Ku.NaN;var O=Math.floor(this._hi),J=0;return O===this._hi&&(J=Math.floor(this._lo)),new Ku(O,J)},Ku.prototype.negate=function(){return this.isNaN()?this:new Ku(-this._hi,-this._lo)},Ku.prototype.clone=function(){},Ku.prototype.multiply=function(){if(arguments[0]instanceof Ku){var O=arguments[0];return O.isNaN()?Ku.createNaN():Ku.copy(this).selfMultiply(O)}if("number"==typeof arguments[0]){var J=arguments[0];return nl.isNaN(J)?Ku.createNaN():Ku.copy(this).selfMultiply(J,0)}},Ku.prototype.isNaN=function(){return nl.isNaN(this._hi)},Ku.prototype.intValue=function(){return Math.trunc(this._hi)},Ku.prototype.toString=function(){var O=Ku.magnitude(this._hi);return O>=-3&&O<=20?this.toStandardNotation():this.toSciNotation()},Ku.prototype.toStandardNotation=function(){var O=this.getSpecialNumberString();if(null!==O)return O;var J=new Array(1).fill(null),ot=this.extractSignificantDigits(!0,J),st=J[0]+1,at=ot;if("."===ot.charAt(0))at="0"+ot;else if(st<0)at="0."+Ku.stringOfChar("0",-st)+ot;else if(-1===ot.indexOf(".")){var ut=st-ot.length;at=ot+Ku.stringOfChar("0",ut)+".0"}return this.isNegative()?"-"+at:at},Ku.prototype.reciprocal=function(){var O,J,ot,st,at=null,ut=null,ct=null,ht=null;O=(ot=1/this._hi)-(at=(ct=Ku.SPLIT*ot)-(at=ct-ot)),ut=(ht=Ku.SPLIT*this._hi)-this._hi;var pt=ot+(ct=(1-(st=ot*this._hi)-(ht=at*(ut=ht-ut)-st+at*(J=this._hi-ut)+O*ut+O*J)-ot*this._lo)/this._hi);return new Ku(pt,ot-pt+ct)},Ku.prototype.toSciNotation=function(){if(this.isZero())return Ku.SCI_NOT_ZERO;var O=this.getSpecialNumberString();if(null!==O)return O;var J=new Array(1).fill(null),ot=this.extractSignificantDigits(!1,J),st=Ku.SCI_NOT_EXPONENT_CHAR+J[0];if("0"===ot.charAt(0))throw new Error("Found leading zero: "+ot);var at="";ot.length>1&&(at=ot.substring(1));var ut=ot.charAt(0)+"."+at;return this.isNegative()?"-"+ut+st:ut+st},Ku.prototype.abs=function(){return this.isNaN()?Ku.NaN:this.isNegative()?this.negate():new Ku(this)},Ku.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Ku.prototype.lt=function(O){return(this._hi<O._hi||this._hi===O._hi)&&this._lo<O._lo},Ku.prototype.add=function(){if(arguments[0]instanceof Ku){var O=arguments[0];return Ku.copy(this).selfAdd(O)}if("number"==typeof arguments[0]){var J=arguments[0];return Ku.copy(this).selfAdd(J)}},Ku.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var O=arguments[0];this._hi=O,this._lo=0}else if(arguments[0]instanceof Ku){var J=arguments[0];this._hi=J._hi,this._lo=J._lo}}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];this._hi=ot,this._lo=st}},Ku.prototype.gt=function(O){return(this._hi>O._hi||this._hi===O._hi)&&this._lo>O._lo},Ku.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Ku.prototype.trunc=function(){return this.isNaN()?Ku.NaN:this.isPositive()?this.floor():this.ceil()},Ku.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Ku.prototype.interfaces_=function(){return[al,il,ol]},Ku.prototype.getClass=function(){return Ku},Ku.sqr=function(O){return Ku.valueOf(O).selfMultiply(O)},Ku.valueOf=function(){return"string"==typeof arguments[0]?Ku.parse(arguments[0]):"number"==typeof arguments[0]?new Ku(arguments[0]):void 0},Ku.sqrt=function(O){return Ku.valueOf(O).sqrt()},Ku.parse=function(O){for(var J=0,ot=O.length;ml.isWhitespace(O.charAt(J));)J++;var st=!1;if(J<ot){var at=O.charAt(J);"-"!==at&&"+"!==at||(J++,"-"===at&&(st=!0))}for(var ut=new Ku,ct=0,ht=0,pt=0;!(J>=ot);){var mt=O.charAt(J);if(J++,ml.isDigit(mt)){var xt=mt-"0";ut.selfMultiply(Ku.TEN),ut.selfAdd(xt),ct++}else{if("."!==mt){if("e"===mt||"E"===mt){var Nt=O.substring(J);try{pt=_l.parseInt(Nt)}catch(J){throw J instanceof Error?new Error("Invalid exponent "+Nt+" in string "+O):J}break}throw new Error("Unexpected character '"+mt+"' at position "+J+" in string "+O)}ht=ct}}var St=ut,jt=ct-ht-pt;if(0===jt)St=ut;else if(jt>0){var Wt=Ku.TEN.pow(jt);St=ut.divide(Wt)}else if(jt<0){var Ht=Ku.TEN.pow(-jt);St=ut.multiply(Ht)}return st?St.negate():St},Ku.createNaN=function(){return new Ku(nl.NaN,nl.NaN)},Ku.copy=function(O){return new Ku(O)},Ku.magnitude=function(O){var J=Math.abs(O),ot=Math.log(J)/Math.log(10),st=Math.trunc(Math.floor(ot));return 10*Math.pow(10,st)<=J&&(st+=1),st},Ku.stringOfChar=function(O,J){for(var ot=new vl,st=0;st<J;st++)ot.append(O);return ot.toString()},Ju.PI.get=function(){return new Ku(3.141592653589793,12246467991473532e-32)},Ju.TWO_PI.get=function(){return new Ku(6.283185307179586,24492935982947064e-32)},Ju.PI_2.get=function(){return new Ku(1.5707963267948966,6123233995736766e-32)},Ju.E.get=function(){return new Ku(2.718281828459045,14456468917292502e-32)},Ju.NaN.get=function(){return new Ku(nl.NaN,nl.NaN)},Ju.EPS.get=function(){return 123259516440783e-46},Ju.SPLIT.get=function(){return 134217729},Ju.MAX_PRINT_DIGITS.get=function(){return 32},Ju.TEN.get=function(){return Ku.valueOf(10)},Ju.ONE.get=function(){return Ku.valueOf(1)},Ju.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Ju.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Ku,Ju);var bl=function(){},$u={DP_SAFE_EPSILON:{configurable:!0}};bl.prototype.interfaces_=function(){return[]},bl.prototype.getClass=function(){return bl},bl.orientationIndex=function(O,J,ot){var st=bl.orientationIndexFilter(O,J,ot);if(st<=1)return st;var at=Ku.valueOf(J.x).selfAdd(-O.x),ut=Ku.valueOf(J.y).selfAdd(-O.y),ct=Ku.valueOf(ot.x).selfAdd(-J.x),ht=Ku.valueOf(ot.y).selfAdd(-J.y);return at.selfMultiply(ht).selfSubtract(ut.selfMultiply(ct)).signum()},bl.signOfDet2x2=function(O,J,ot,st){return O.multiply(st).selfSubtract(J.multiply(ot)).signum()},bl.intersection=function(O,J,ot,st){var at=Ku.valueOf(st.y).selfSubtract(ot.y).selfMultiply(Ku.valueOf(J.x).selfSubtract(O.x)),ut=Ku.valueOf(st.x).selfSubtract(ot.x).selfMultiply(Ku.valueOf(J.y).selfSubtract(O.y)),ct=at.subtract(ut),ht=Ku.valueOf(st.x).selfSubtract(ot.x).selfMultiply(Ku.valueOf(O.y).selfSubtract(ot.y)),pt=Ku.valueOf(st.y).selfSubtract(ot.y).selfMultiply(Ku.valueOf(O.x).selfSubtract(ot.x)),mt=ht.subtract(pt).selfDivide(ct).doubleValue(),xt=Ku.valueOf(O.x).selfAdd(Ku.valueOf(J.x).selfSubtract(O.x).selfMultiply(mt)).doubleValue(),Nt=Ku.valueOf(J.x).selfSubtract(O.x).selfMultiply(Ku.valueOf(O.y).selfSubtract(ot.y)),St=Ku.valueOf(J.y).selfSubtract(O.y).selfMultiply(Ku.valueOf(O.x).selfSubtract(ot.x)),jt=Nt.subtract(St).selfDivide(ct).doubleValue(),Wt=Ku.valueOf(ot.y).selfAdd(Ku.valueOf(st.y).selfSubtract(ot.y).selfMultiply(jt)).doubleValue();return new Wu(xt,Wt)},bl.orientationIndexFilter=function(O,J,ot){var st=null,at=(O.x-ot.x)*(J.y-ot.y),ut=(O.y-ot.y)*(J.x-ot.x),ct=at-ut;if(at>0){if(ut<=0)return bl.signum(ct);st=at+ut}else{if(!(at<0))return bl.signum(ct);if(ut>=0)return bl.signum(ct);st=-at-ut}var ht=bl.DP_SAFE_EPSILON*st;return ct>=ht||-ct>=ht?bl.signum(ct):2},bl.signum=function(O){return O>0?1:O<0?-1:0},$u.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(bl,$u);var Il=function(){},el={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};el.X.get=function(){return 0},el.Y.get=function(){return 1},el.Z.get=function(){return 2},el.M.get=function(){return 3},Il.prototype.setOrdinate=function(O,J,ot){},Il.prototype.size=function(){},Il.prototype.getOrdinate=function(O,J){},Il.prototype.getCoordinate=function(){},Il.prototype.getCoordinateCopy=function(O){},Il.prototype.getDimension=function(){},Il.prototype.getX=function(O){},Il.prototype.clone=function(){},Il.prototype.expandEnvelope=function(O){},Il.prototype.copy=function(){},Il.prototype.getY=function(O){},Il.prototype.toCoordinateArray=function(){},Il.prototype.interfaces_=function(){return[ol]},Il.prototype.getClass=function(){return Il},Object.defineProperties(Il,el);var Sl=function(){},rl=function(O){function e(){O.call(this,"Projective point not representable on the Cartesian plane.")}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sl),Pl=function(){};Pl.arraycopy=function(O,J,ot,st,at){for(var ut=0,ct=J;ct<J+at;ct++)ot[st+ut]=O[ct],ut++},Pl.getProperty=function(O){return{"line.separator":"\n"}[O]};var ul=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var O=arguments[0];this.x=O.x,this.y=O.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var J=arguments[0],ot=arguments[1];this.x=J,this.y=ot,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var st=arguments[0],at=arguments[1];this.x=st.y*at.w-at.y*st.w,this.y=at.x*st.w-st.x*at.w,this.w=st.x*at.y-at.x*st.y}else if(arguments[0]instanceof Wu&&arguments[1]instanceof Wu){var ut=arguments[0],ct=arguments[1];this.x=ut.y-ct.y,this.y=ct.x-ut.x,this.w=ut.x*ct.y-ct.x*ut.y}}else if(3===arguments.length){var ht=arguments[0],pt=arguments[1],mt=arguments[2];this.x=ht,this.y=pt,this.w=mt}else if(4===arguments.length){var xt=arguments[0],Nt=arguments[1],St=arguments[2],jt=arguments[3],Wt=xt.y-Nt.y,Ht=Nt.x-xt.x,Zt=xt.x*Nt.y-Nt.x*xt.y,Kt=St.y-jt.y,Jt=jt.x-St.x,ee=St.x*jt.y-jt.x*St.y;this.x=Ht*ee-Jt*Zt,this.y=Kt*Zt-Wt*ee,this.w=Wt*Jt-Kt*Ht}};ul.prototype.getY=function(){var O=this.y/this.w;if(nl.isNaN(O)||nl.isInfinite(O))throw new rl;return O},ul.prototype.getX=function(){var O=this.x/this.w;if(nl.isNaN(O)||nl.isInfinite(O))throw new rl;return O},ul.prototype.getCoordinate=function(){var O=new Wu;return O.x=this.getX(),O.y=this.getY(),O},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul},ul.intersection=function(O,J,ot,st){var at=O.y-J.y,ut=J.x-O.x,ct=O.x*J.y-J.x*O.y,ht=ot.y-st.y,pt=st.x-ot.x,mt=ot.x*st.y-st.x*ot.y,xt=at*pt-ht*ut,Nt=(ut*mt-pt*ct)/xt,St=(ht*ct-at*mt)/xt;if(nl.isNaN(Nt)||nl.isInfinite(Nt)||nl.isNaN(St)||nl.isInfinite(St))throw new rl;return new Wu(Nt,St)};var ll=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Wu){var O=arguments[0];this.init(O.x,O.x,O.y,O.y)}else if(arguments[0]instanceof t){var J=arguments[0];this.init(J)}}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];this.init(ot.x,st.x,ot.y,st.y)}else if(4===arguments.length){var at=arguments[0],ut=arguments[1],ct=arguments[2],ht=arguments[3];this.init(at,ut,ct,ht)}},fl={serialVersionUID:{configurable:!0}};ll.prototype.getArea=function(){return this.getWidth()*this.getHeight()},ll.prototype.equals=function(O){if(!(O instanceof ll))return!1;var J=O;return this.isNull()?J.isNull():this._maxx===J.getMaxX()&&this._maxy===J.getMaxY()&&this._minx===J.getMinX()&&this._miny===J.getMinY()},ll.prototype.intersection=function(O){if(this.isNull()||O.isNull()||!this.intersects(O))return new ll;var J=this._minx>O._minx?this._minx:O._minx,ot=this._miny>O._miny?this._miny:O._miny,st=this._maxx<O._maxx?this._maxx:O._maxx,at=this._maxy<O._maxy?this._maxy:O._maxy;return new ll(J,st,ot,at)},ll.prototype.isNull=function(){return this._maxx<this._minx},ll.prototype.getMaxX=function(){return this._maxx},ll.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Wu){var O=arguments[0];return this.covers(O.x,O.y)}if(arguments[0]instanceof ll){var J=arguments[0];return!this.isNull()&&!J.isNull()&&J.getMinX()>=this._minx&&J.getMaxX()<=this._maxx&&J.getMinY()>=this._miny&&J.getMaxY()<=this._maxy}}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];return!this.isNull()&&ot>=this._minx&&ot<=this._maxx&&st>=this._miny&&st<=this._maxy}},ll.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var O=arguments[0];return!this.isNull()&&!O.isNull()&&!(O._minx>this._maxx||O._maxx<this._minx||O._miny>this._maxy||O._maxy<this._miny)}if(arguments[0]instanceof Wu){var J=arguments[0];return this.intersects(J.x,J.y)}}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];return!this.isNull()&&!(ot>this._maxx||ot<this._minx||st>this._maxy||st<this._miny)}},ll.prototype.getMinY=function(){return this._miny},ll.prototype.getMinX=function(){return this._minx},ll.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Wu){var O=arguments[0];this.expandToInclude(O.x,O.y)}else if(arguments[0]instanceof ll){var J=arguments[0];if(J.isNull())return null;this.isNull()?(this._minx=J.getMinX(),this._maxx=J.getMaxX(),this._miny=J.getMinY(),this._maxy=J.getMaxY()):(J._minx<this._minx&&(this._minx=J._minx),J._maxx>this._maxx&&(this._maxx=J._maxx),J._miny<this._miny&&(this._miny=J._miny),J._maxy>this._maxy&&(this._maxy=J._maxy))}}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];this.isNull()?(this._minx=ot,this._maxx=ot,this._miny=st,this._maxy=st):(ot<this._minx&&(this._minx=ot),ot>this._maxx&&(this._maxx=ot),st<this._miny&&(this._miny=st),st>this._maxy&&(this._maxy=st))}},ll.prototype.minExtent=function(){if(this.isNull())return 0;var O=this.getWidth(),J=this.getHeight();return O<J?O:J},ll.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},ll.prototype.compareTo=function(O){var J=O;return this.isNull()?J.isNull()?0:-1:J.isNull()?1:this._minx<J._minx?-1:this._minx>J._minx?1:this._miny<J._miny?-1:this._miny>J._miny?1:this._maxx<J._maxx?-1:this._maxx>J._maxx?1:this._maxy<J._maxy?-1:this._maxy>J._maxy?1:0},ll.prototype.translate=function(O,J){if(this.isNull())return null;this.init(this.getMinX()+O,this.getMaxX()+O,this.getMinY()+J,this.getMaxY()+J)},ll.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},ll.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},ll.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},ll.prototype.maxExtent=function(){if(this.isNull())return 0;var O=this.getWidth(),J=this.getHeight();return O>J?O:J},ll.prototype.expandBy=function(){if(1===arguments.length){var O=arguments[0];this.expandBy(O,O)}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];if(this.isNull())return null;this._minx-=J,this._maxx+=J,this._miny-=ot,this._maxy+=ot,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},ll.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var O=arguments[0];return this.covers(O)}if(arguments[0]instanceof Wu){var J=arguments[0];return this.covers(J)}}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];return this.covers(ot,st)}},ll.prototype.centre=function(){return this.isNull()?null:new Wu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},ll.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Wu){var O=arguments[0];this.init(O.x,O.x,O.y,O.y)}else if(arguments[0]instanceof ll){var J=arguments[0];this._minx=J._minx,this._maxx=J._maxx,this._miny=J._miny,this._maxy=J._maxy}}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];this.init(ot.x,st.x,ot.y,st.y)}else if(4===arguments.length){var at=arguments[0],ut=arguments[1],ct=arguments[2],ht=arguments[3];at<ut?(this._minx=at,this._maxx=ut):(this._minx=ut,this._maxx=at),ct<ht?(this._miny=ct,this._maxy=ht):(this._miny=ht,this._maxy=ct)}},ll.prototype.getMaxY=function(){return this._maxy},ll.prototype.distance=function(O){if(this.intersects(O))return 0;var J=0;this._maxx<O._minx?J=O._minx-this._maxx:this._minx>O._maxx&&(J=this._minx-O._maxx);var ot=0;return this._maxy<O._miny?ot=O._miny-this._maxy:this._miny>O._maxy&&(ot=this._miny-O._maxy),0===J?ot:0===ot?J:Math.sqrt(J*J+ot*ot)},ll.prototype.hashCode=function(){var O=17;return 37*(O=37*(O=37*(O=37*O+Wu.hashCode(this._minx))+Wu.hashCode(this._maxx))+Wu.hashCode(this._miny))+Wu.hashCode(this._maxy)},ll.prototype.interfaces_=function(){return[il,al]},ll.prototype.getClass=function(){return ll},ll.intersects=function(){if(3===arguments.length){var O=arguments[0],J=arguments[1],ot=arguments[2];return ot.x>=(O.x<J.x?O.x:J.x)&&ot.x<=(O.x>J.x?O.x:J.x)&&ot.y>=(O.y<J.y?O.y:J.y)&&ot.y<=(O.y>J.y?O.y:J.y)}if(4===arguments.length){var st=arguments[0],at=arguments[1],ut=arguments[2],ct=arguments[3],ht=Math.min(ut.x,ct.x),pt=Math.max(ut.x,ct.x),mt=Math.min(st.x,at.x),xt=Math.max(st.x,at.x);return!(mt>pt||xt<ht||(ht=Math.min(ut.y,ct.y),pt=Math.max(ut.y,ct.y),mt=Math.min(st.y,at.y),xt=Math.max(st.y,at.y),mt>pt||xt<ht))}},fl.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(ll,fl);var yl={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Tl=function(O){this.geometryFactory=O||new rh};Tl.prototype.read=function(O){var J,ot,st;O=O.replace(/[\n\r]/g," ");var at=yl.typeStr.exec(O);if(-1!==O.search("EMPTY")&&((at=yl.emptyTypeStr.exec(O))[2]=void 0),at&&(ot=at[1].toLowerCase(),st=at[2],El[ot]&&(J=El[ot].apply(this,[st]))),void 0===J)throw new Error("Could not parse WKT "+O);return J},Tl.prototype.write=function(O){return this.extractGeometry(O)},Tl.prototype.extractGeometry=function(O){var J=O.getGeometryType().toLowerCase();if(!xl[J])return null;var ot=J.toUpperCase();return O.isEmpty()?ot+" EMPTY":ot+"("+xl[J].apply(this,[O])+")"};var xl={coordinate:function(O){return O.x+" "+O.y},point:function(O){return xl.coordinate.call(this,O._coordinates._coordinates[0])},multipoint:function(O){for(var J=[],ot=0,st=O._geometries.length;ot<st;++ot)J.push("("+xl.point.apply(this,[O._geometries[ot]])+")");return J.join(",")},linestring:function(O){for(var J=[],ot=0,st=O._points._coordinates.length;ot<st;++ot)J.push(xl.coordinate.apply(this,[O._points._coordinates[ot]]));return J.join(",")},linearring:function(O){for(var J=[],ot=0,st=O._points._coordinates.length;ot<st;++ot)J.push(xl.coordinate.apply(this,[O._points._coordinates[ot]]));return J.join(",")},multilinestring:function(O){for(var J=[],ot=0,st=O._geometries.length;ot<st;++ot)J.push("("+xl.linestring.apply(this,[O._geometries[ot]])+")");return J.join(",")},polygon:function(O){var J=[];J.push("("+xl.linestring.apply(this,[O._shell])+")");for(var ot=0,st=O._holes.length;ot<st;++ot)J.push("("+xl.linestring.apply(this,[O._holes[ot]])+")");return J.join(",")},multipolygon:function(O){for(var J=[],ot=0,st=O._geometries.length;ot<st;++ot)J.push("("+xl.polygon.apply(this,[O._geometries[ot]])+")");return J.join(",")},geometrycollection:function(O){for(var J=[],ot=0,st=O._geometries.length;ot<st;++ot)J.push(this.extractGeometry(O._geometries[ot]));return J.join(",")}},El={point:function(O){if(void 0===O)return this.geometryFactory.createPoint();var J=O.trim().split(yl.spaces);return this.geometryFactory.createPoint(new Wu(Number.parseFloat(J[0]),Number.parseFloat(J[1])))},multipoint:function(O){var J;if(void 0===O)return this.geometryFactory.createMultiPoint();for(var ot=O.trim().split(","),st=[],at=0,ut=ot.length;at<ut;++at)J=ot[at].replace(yl.trimParens,"$1"),st.push(El.point.apply(this,[J]));return this.geometryFactory.createMultiPoint(st)},linestring:function(O){if(void 0===O)return this.geometryFactory.createLineString();for(var J,ot=O.trim().split(","),st=[],at=0,ut=ot.length;at<ut;++at)J=ot[at].trim().split(yl.spaces),st.push(new Wu(Number.parseFloat(J[0]),Number.parseFloat(J[1])));return this.geometryFactory.createLineString(st)},linearring:function(O){if(void 0===O)return this.geometryFactory.createLinearRing();for(var J,ot=O.trim().split(","),st=[],at=0,ut=ot.length;at<ut;++at)J=ot[at].trim().split(yl.spaces),st.push(new Wu(Number.parseFloat(J[0]),Number.parseFloat(J[1])));return this.geometryFactory.createLinearRing(st)},multilinestring:function(O){var J;if(void 0===O)return this.geometryFactory.createMultiLineString();for(var ot=O.trim().split(yl.parenComma),st=[],at=0,ut=ot.length;at<ut;++at)J=ot[at].replace(yl.trimParens,"$1"),st.push(El.linestring.apply(this,[J]));return this.geometryFactory.createMultiLineString(st)},polygon:function(O){var J,ot,st;if(void 0===O)return this.geometryFactory.createPolygon();for(var at,ut=O.trim().split(yl.parenComma),ct=[],ht=0,pt=ut.length;ht<pt;++ht)J=ut[ht].replace(yl.trimParens,"$1"),ot=El.linestring.apply(this,[J]),st=this.geometryFactory.createLinearRing(ot._points),0===ht?at=st:ct.push(st);return this.geometryFactory.createPolygon(at,ct)},multipolygon:function(O){var J;if(void 0===O)return this.geometryFactory.createMultiPolygon();for(var ot=O.trim().split(yl.doubleParenComma),st=[],at=0,ut=ot.length;at<ut;++at)J=ot[at].replace(yl.trimParens,"$1"),st.push(El.polygon.apply(this,[J]));return this.geometryFactory.createMultiPolygon(st)},geometrycollection:function(O){if(void 0===O)return this.geometryFactory.createGeometryCollection();for(var J=(O=O.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),ot=[],st=0,at=J.length;st<at;++st)ot.push(this.read(J[st]));return this.geometryFactory.createGeometryCollection(ot)}},Fl=function(O){this.parser=new Tl(O)};Fl.prototype.write=function(O){return this.parser.write(O)},Fl.toLineString=function(O,J){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+O.x+" "+O.y+", "+J.x+" "+J.y+" )"};var wl=function(O){function e(J){O.call(this,J),this.name="RuntimeException",this.message=J,this.stack=(new O).stack}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e}(Error),Nl=function(O){function e(){if(O.call(this),0===arguments.length)O.call(this);else if(1===arguments.length){var J=arguments[0];O.call(this,J)}}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(wl),ql=function(){};ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},ql.shouldNeverReachHere=function(){if(0===arguments.length)ql.shouldNeverReachHere(null);else if(1===arguments.length){var O=arguments[0];throw new Nl("Should never reach here"+(null!==O?": "+O:""))}},ql.isTrue=function(){var O;if(1===arguments.length)ql.isTrue(arguments[0],null);else if(2===arguments.length&&(O=arguments[1],!arguments[0]))throw null===O?new Nl:new Nl(O)},ql.equals=function(){var O,J,ot;if(2===arguments.length)ql.equals(O=arguments[0],J=arguments[1],null);else if(3===arguments.length&&(O=arguments[0],ot=arguments[2],!(J=arguments[1]).equals(O)))throw new Nl("Expected "+O+" but encountered "+J+(null!==ot?": "+ot:""))};var Bl=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Wu,this._intPt[1]=new Wu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Cl={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Bl.prototype.getIndexAlongSegment=function(O,J){return this.computeIntLineIndex(),this._intLineIndex[O][J]},Bl.prototype.getTopologySummary=function(){var O=new vl;return this.isEndPoint()&&O.append(" endpoint"),this._isProper&&O.append(" proper"),this.isCollinear()&&O.append(" collinear"),O.toString()},Bl.prototype.computeIntersection=function(O,J,ot,st){this._inputLines[0][0]=O,this._inputLines[0][1]=J,this._inputLines[1][0]=ot,this._inputLines[1][1]=st,this._result=this.computeIntersect(O,J,ot,st)},Bl.prototype.getIntersectionNum=function(){return this._result},Bl.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var O=arguments[0];this.getEdgeDistance(O,0)>this.getEdgeDistance(O,1)?(this._intLineIndex[O][0]=0,this._intLineIndex[O][1]=1):(this._intLineIndex[O][0]=1,this._intLineIndex[O][1]=0)}},Bl.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Bl.prototype.setPrecisionModel=function(O){this._precisionModel=O},Bl.prototype.isInteriorIntersection=function(){var O=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var J=arguments[0],ot=0;ot<this._result;ot++)if(!O._intPt[ot].equals2D(O._inputLines[J][0])&&!O._intPt[ot].equals2D(O._inputLines[J][1]))return!0;return!1}},Bl.prototype.getIntersection=function(O){return this._intPt[O]},Bl.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Bl.prototype.hasIntersection=function(){return this._result!==Bl.NO_INTERSECTION},Bl.prototype.getEdgeDistance=function(O,J){return Bl.computeEdgeDistance(this._intPt[J],this._inputLines[O][0],this._inputLines[O][1])},Bl.prototype.isCollinear=function(){return this._result===Bl.COLLINEAR_INTERSECTION},Bl.prototype.toString=function(){return Fl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Fl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Bl.prototype.getEndpoint=function(O,J){return this._inputLines[O][J]},Bl.prototype.isIntersection=function(O){for(var J=0;J<this._result;J++)if(this._intPt[J].equals2D(O))return!0;return!1},Bl.prototype.getIntersectionAlongSegment=function(O,J){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[O][J]]},Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl},Bl.computeEdgeDistance=function(O,J,ot){var st=Math.abs(ot.x-J.x),at=Math.abs(ot.y-J.y),ut=-1;if(O.equals(J))ut=0;else if(O.equals(ot))ut=st>at?st:at;else{var ct=Math.abs(O.x-J.x),ht=Math.abs(O.y-J.y);0!==(ut=st>at?ct:ht)||O.equals(J)||(ut=Math.max(ct,ht))}return ql.isTrue(!(0===ut&&!O.equals(J)),"Bad distance calculation"),ut},Bl.nonRobustComputeEdgeDistance=function(O,J,ot){var st=O.x-J.x,at=O.y-J.y,ut=Math.sqrt(st*st+at*at);return ql.isTrue(!(0===ut&&!O.equals(J)),"Invalid distance calculation"),ut},Cl.DONT_INTERSECT.get=function(){return 0},Cl.DO_INTERSECT.get=function(){return 1},Cl.COLLINEAR.get=function(){return 2},Cl.NO_INTERSECTION.get=function(){return 0},Cl.POINT_INTERSECTION.get=function(){return 1},Cl.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Bl,Cl);var Ml=function(O){function e(){O.apply(this,arguments)}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(O){var J=new ll(this._inputLines[0][0],this._inputLines[0][1]),ot=new ll(this._inputLines[1][0],this._inputLines[1][1]);return J.contains(O)&&ot.contains(O)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return O.prototype.computeIntersection.apply(this,arguments);var J=arguments[0],ot=arguments[1],st=arguments[2];if(this._isProper=!1,ll.intersects(ot,st,J)&&0===Xl.orientationIndex(ot,st,J)&&0===Xl.orientationIndex(st,ot,J))return this._isProper=!0,(J.equals(ot)||J.equals(st))&&(this._isProper=!1),this._result=O.POINT_INTERSECTION,null;this._result=O.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(O,J,ot,st,at){at.x=this.smallestInAbsValue(O.x,J.x,ot.x,st.x),at.y=this.smallestInAbsValue(O.y,J.y,ot.y,st.y),O.x-=at.x,O.y-=at.y,J.x-=at.x,J.y-=at.y,ot.x-=at.x,ot.y-=at.y,st.x-=at.x,st.y-=at.y},e.prototype.safeHCoordinateIntersection=function(O,J,ot,st){var at=null;try{at=ul.intersection(O,J,ot,st)}catch(ut){if(!(ut instanceof rl))throw ut;at=e.nearestEndpoint(O,J,ot,st)}return at},e.prototype.intersection=function(O,J,ot,st){var at=this.intersectionWithNormalization(O,J,ot,st);return this.isInSegmentEnvelopes(at)||(at=new Wu(e.nearestEndpoint(O,J,ot,st))),null!==this._precisionModel&&this._precisionModel.makePrecise(at),at},e.prototype.smallestInAbsValue=function(O,J,ot,st){var at=O,ut=Math.abs(at);return Math.abs(J)<ut&&(at=J,ut=Math.abs(J)),Math.abs(ot)<ut&&(at=ot,ut=Math.abs(ot)),Math.abs(st)<ut&&(at=st),at},e.prototype.checkDD=function(O,J,ot,st,at){var ut=bl.intersection(O,J,ot,st),ct=this.isInSegmentEnvelopes(ut);Pl.out.println("DD in env = "+ct+"  --------------------- "+ut),at.distance(ut)>1e-4&&Pl.out.println("Distance = "+at.distance(ut))},e.prototype.intersectionWithNormalization=function(O,J,ot,st){var at=new Wu(O),ut=new Wu(J),ct=new Wu(ot),ht=new Wu(st),pt=new Wu;this.normalizeToEnvCentre(at,ut,ct,ht,pt);var mt=this.safeHCoordinateIntersection(at,ut,ct,ht);return mt.x+=pt.x,mt.y+=pt.y,mt},e.prototype.computeCollinearIntersection=function(J,ot,st,at){var ut=ll.intersects(J,ot,st),ct=ll.intersects(J,ot,at),ht=ll.intersects(st,at,J),pt=ll.intersects(st,at,ot);return ut&&ct?(this._intPt[0]=st,this._intPt[1]=at,O.COLLINEAR_INTERSECTION):ht&&pt?(this._intPt[0]=J,this._intPt[1]=ot,O.COLLINEAR_INTERSECTION):ut&&ht?(this._intPt[0]=st,this._intPt[1]=J,!st.equals(J)||ct||pt?O.COLLINEAR_INTERSECTION:O.POINT_INTERSECTION):ut&&pt?(this._intPt[0]=st,this._intPt[1]=ot,!st.equals(ot)||ct||ht?O.COLLINEAR_INTERSECTION:O.POINT_INTERSECTION):ct&&ht?(this._intPt[0]=at,this._intPt[1]=J,!at.equals(J)||ut||pt?O.COLLINEAR_INTERSECTION:O.POINT_INTERSECTION):ct&&pt?(this._intPt[0]=at,this._intPt[1]=ot,!at.equals(ot)||ut||ht?O.COLLINEAR_INTERSECTION:O.POINT_INTERSECTION):O.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(O,J,ot,st,at){var ut=O.x<J.x?O.x:J.x,ct=O.y<J.y?O.y:J.y,ht=O.x>J.x?O.x:J.x,pt=O.y>J.y?O.y:J.y,mt=ot.x<st.x?ot.x:st.x,xt=ot.y<st.y?ot.y:st.y,Nt=ot.x>st.x?ot.x:st.x,St=ot.y>st.y?ot.y:st.y,jt=((ut>mt?ut:mt)+(ht<Nt?ht:Nt))/2,Wt=((ct>xt?ct:xt)+(pt<St?pt:St))/2;at.x=jt,at.y=Wt,O.x-=at.x,O.y-=at.y,J.x-=at.x,J.y-=at.y,ot.x-=at.x,ot.y-=at.y,st.x-=at.x,st.y-=at.y},e.prototype.computeIntersect=function(J,ot,st,at){if(this._isProper=!1,!ll.intersects(J,ot,st,at))return O.NO_INTERSECTION;var ut=Xl.orientationIndex(J,ot,st),ct=Xl.orientationIndex(J,ot,at);if(ut>0&&ct>0||ut<0&&ct<0)return O.NO_INTERSECTION;var ht=Xl.orientationIndex(st,at,J),pt=Xl.orientationIndex(st,at,ot);return ht>0&&pt>0||ht<0&&pt<0?O.NO_INTERSECTION:0===ut&&0===ct&&0===ht&&0===pt?this.computeCollinearIntersection(J,ot,st,at):(0===ut||0===ct||0===ht||0===pt?(this._isProper=!1,J.equals2D(st)||J.equals2D(at)?this._intPt[0]=J:ot.equals2D(st)||ot.equals2D(at)?this._intPt[0]=ot:0===ut?this._intPt[0]=new Wu(st):0===ct?this._intPt[0]=new Wu(at):0===ht?this._intPt[0]=new Wu(J):0===pt&&(this._intPt[0]=new Wu(ot))):(this._isProper=!0,this._intPt[0]=this.intersection(J,ot,st,at)),O.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(O,J,ot,st){var at=O,ut=Xl.distancePointLine(O,ot,st),ct=Xl.distancePointLine(J,ot,st);return ct<ut&&(ut=ct,at=J),(ct=Xl.distancePointLine(ot,O,J))<ut&&(ut=ct,at=ot),(ct=Xl.distancePointLine(st,O,J))<ut&&(ut=ct,at=st),at},e}(Bl),Ul=function(){};Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.orientationIndex=function(O,J,ot){var st=J.x-O.x,at=J.y-O.y,ut=ot.x-J.x,ct=ot.y-J.y;return Ul.signOfDet2x2(st,at,ut,ct)},Ul.signOfDet2x2=function(O,J,ot,st){var at=null,ut=null,ct=null;if(at=1,0===O||0===st)return 0===J||0===ot?0:J>0?ot>0?-at:at:ot>0?at:-at;if(0===J||0===ot)return st>0?O>0?at:-at:O>0?-at:at;if(J>0?st>0?J<=st||(at=-at,ut=O,O=ot,ot=ut,ut=J,J=st,st=ut):J<=-st?(at=-at,ot=-ot,st=-st):(ut=O,O=-ot,ot=ut,ut=J,J=-st,st=ut):st>0?-J<=st?(at=-at,O=-O,J=-J):(ut=-O,O=ot,ot=ut,ut=-J,J=st,st=ut):J>=st?(O=-O,J=-J,ot=-ot,st=-st):(at=-at,ut=-O,O=-ot,ot=ut,ut=-J,J=-st,st=ut),O>0){if(!(ot>0))return at;if(!(O<=ot))return at}else{if(ot>0)return-at;if(!(O>=ot))return-at;at=-at,O=-O,ot=-ot}for(;;){if((st-=(ct=Math.floor(ot/O))*J)<0)return-at;if(st>J)return at;if(O>(ot-=ct*O)+ot){if(J<st+st)return at}else{if(J>st+st)return-at;ot=O-ot,st=J-st,at=-at}if(0===st)return 0===ot?0:-at;if(0===ot)return at;if((J-=(ct=Math.floor(O/ot))*st)<0)return at;if(J>st)return-at;if(ot>(O-=ct*ot)+O){if(st<J+J)return-at}else{if(st>J+J)return at;O=ot-O,J=st-J,at=-at}if(0===J)return 0===O?0:at;if(0===O)return-at}};var Vl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var O=arguments[0];this._p=O};Vl.prototype.countSegment=function(O,J){if(O.x<this._p.x&&J.x<this._p.x)return null;if(this._p.x===J.x&&this._p.y===J.y)return this._isPointOnSegment=!0,null;if(O.y===this._p.y&&J.y===this._p.y){var ot=O.x,st=J.x;return ot>st&&(ot=J.x,st=O.x),this._p.x>=ot&&this._p.x<=st&&(this._isPointOnSegment=!0),null}if(O.y>this._p.y&&J.y<=this._p.y||J.y>this._p.y&&O.y<=this._p.y){var at=O.x-this._p.x,ut=O.y-this._p.y,ct=J.x-this._p.x,ht=J.y-this._p.y,pt=Ul.signOfDet2x2(at,ut,ct,ht);if(0===pt)return this._isPointOnSegment=!0,null;ht<ut&&(pt=-pt),pt>0&&this._crossingCount++}},Vl.prototype.isPointInPolygon=function(){return this.getLocation()!==pl.EXTERIOR},Vl.prototype.getLocation=function(){return this._isPointOnSegment?pl.BOUNDARY:this._crossingCount%2==1?pl.INTERIOR:pl.EXTERIOR},Vl.prototype.isOnSegment=function(){return this._isPointOnSegment},Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl},Vl.locatePointInRing=function(){if(arguments[0]instanceof Wu&&gl(arguments[1],Il)){for(var O=arguments[1],J=new Vl(arguments[0]),ot=new Wu,st=new Wu,at=1;at<O.size();at++)if(O.getCoordinate(at,ot),O.getCoordinate(at-1,st),J.countSegment(ot,st),J.isOnSegment())return J.getLocation();return J.getLocation()}if(arguments[0]instanceof Wu&&arguments[1]instanceof Array){for(var ut=arguments[1],ct=new Vl(arguments[0]),ht=1;ht<ut.length;ht++){var pt=ut[ht],mt=ut[ht-1];if(ct.countSegment(pt,mt),ct.isOnSegment())return ct.getLocation()}return ct.getLocation()}};var Xl=function(){},Ll={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl},Xl.orientationIndex=function(O,J,ot){return bl.orientationIndex(O,J,ot)},Xl.signedArea=function(){if(arguments[0]instanceof Array){var O=arguments[0];if(O.length<3)return 0;for(var J=0,ot=O[0].x,st=1;st<O.length-1;st++){var at=O[st].x-ot,ut=O[st+1].y;J+=at*(O[st-1].y-ut)}return J/2}if(gl(arguments[0],Il)){var ct=arguments[0],ht=ct.size();if(ht<3)return 0;var pt=new Wu,mt=new Wu,xt=new Wu;ct.getCoordinate(0,mt),ct.getCoordinate(1,xt);var Nt=mt.x;xt.x-=Nt;for(var St=0,jt=1;jt<ht-1;jt++)pt.y=mt.y,mt.x=xt.x,mt.y=xt.y,ct.getCoordinate(jt+1,xt),xt.x-=Nt,St+=mt.x*(pt.y-xt.y);return St/2}},Xl.distanceLineLine=function(O,J,ot,st){if(O.equals(J))return Xl.distancePointLine(O,ot,st);if(ot.equals(st))return Xl.distancePointLine(st,O,J);var at=!1;if(ll.intersects(O,J,ot,st)){var ut=(J.x-O.x)*(st.y-ot.y)-(J.y-O.y)*(st.x-ot.x);if(0===ut)at=!0;else{var ct=(O.y-ot.y)*(st.x-ot.x)-(O.x-ot.x)*(st.y-ot.y),ht=((O.y-ot.y)*(J.x-O.x)-(O.x-ot.x)*(J.y-O.y))/ut,pt=ct/ut;(pt<0||pt>1||ht<0||ht>1)&&(at=!0)}}else at=!0;return at?dl.min(Xl.distancePointLine(O,ot,st),Xl.distancePointLine(J,ot,st),Xl.distancePointLine(ot,O,J),Xl.distancePointLine(st,O,J)):0},Xl.isPointInRing=function(O,J){return Xl.locatePointInRing(O,J)!==pl.EXTERIOR},Xl.computeLength=function(O){var J=O.size();if(J<=1)return 0;var ot=0,st=new Wu;O.getCoordinate(0,st);for(var at=st.x,ut=st.y,ct=1;ct<J;ct++){O.getCoordinate(ct,st);var ht=st.x,pt=st.y,mt=ht-at,xt=pt-ut;ot+=Math.sqrt(mt*mt+xt*xt),at=ht,ut=pt}return ot},Xl.isCCW=function(O){var J=O.length-1;if(J<3)throw new Xu("Ring has fewer than 4 points, so orientation cannot be determined");for(var ot=O[0],st=0,at=1;at<=J;at++){var ut=O[at];ut.y>ot.y&&(ot=ut,st=at)}var ct=st;do{(ct-=1)<0&&(ct=J)}while(O[ct].equals2D(ot)&&ct!==st);var ht=st;do{ht=(ht+1)%J}while(O[ht].equals2D(ot)&&ht!==st);var pt=O[ct],mt=O[ht];if(pt.equals2D(ot)||mt.equals2D(ot)||pt.equals2D(mt))return!1;var xt=Xl.computeOrientation(pt,ot,mt);return 0===xt?pt.x>mt.x:xt>0},Xl.locatePointInRing=function(O,J){return Vl.locatePointInRing(O,J)},Xl.distancePointLinePerpendicular=function(O,J,ot){var st=(ot.x-J.x)*(ot.x-J.x)+(ot.y-J.y)*(ot.y-J.y),at=((J.y-O.y)*(ot.x-J.x)-(J.x-O.x)*(ot.y-J.y))/st;return Math.abs(at)*Math.sqrt(st)},Xl.computeOrientation=function(O,J,ot){return Xl.orientationIndex(O,J,ot)},Xl.distancePointLine=function(){if(2===arguments.length){var O=arguments[0],J=arguments[1];if(0===J.length)throw new Xu("Line array must contain at least one vertex");for(var ot=O.distance(J[0]),st=0;st<J.length-1;st++){var at=Xl.distancePointLine(O,J[st],J[st+1]);at<ot&&(ot=at)}return ot}if(3===arguments.length){var ut=arguments[0],ct=arguments[1],ht=arguments[2];if(ct.x===ht.x&&ct.y===ht.y)return ut.distance(ct);var pt=(ht.x-ct.x)*(ht.x-ct.x)+(ht.y-ct.y)*(ht.y-ct.y),mt=((ut.x-ct.x)*(ht.x-ct.x)+(ut.y-ct.y)*(ht.y-ct.y))/pt;if(mt<=0)return ut.distance(ct);if(mt>=1)return ut.distance(ht);var xt=((ct.y-ut.y)*(ht.x-ct.x)-(ct.x-ut.x)*(ht.y-ct.y))/pt;return Math.abs(xt)*Math.sqrt(pt)}},Xl.isOnLine=function(O,J){for(var ot=new Ml,st=1;st<J.length;st++){var at=J[st-1],ut=J[st];if(ot.computeIntersection(O,at,ut),ot.hasIntersection())return!0}return!1},Ll.CLOCKWISE.get=function(){return-1},Ll.RIGHT.get=function(){return Xl.CLOCKWISE},Ll.COUNTERCLOCKWISE.get=function(){return 1},Ll.LEFT.get=function(){return Xl.COUNTERCLOCKWISE},Ll.COLLINEAR.get=function(){return 0},Ll.STRAIGHT.get=function(){return Xl.COLLINEAR},Object.defineProperties(Xl,Ll);var Hl=function(){};Hl.prototype.filter=function(O){},Hl.prototype.interfaces_=function(){return[]},Hl.prototype.getClass=function(){return Hl};var Wl=function(){var O=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=O,this._SRID=O.getSRID()},Rl={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Wl.prototype.isGeometryCollection=function(){return this.getSortIndex()===Wl.SORTINDEX_GEOMETRYCOLLECTION},Wl.prototype.getFactory=function(){return this._factory},Wl.prototype.getGeometryN=function(O){return this},Wl.prototype.getArea=function(){return 0},Wl.prototype.isRectangle=function(){return!1},Wl.prototype.equals=function(){if(arguments[0]instanceof Wl){var O=arguments[0];return null!==O&&this.equalsTopo(O)}if(arguments[0]instanceof Object){var J=arguments[0];if(!(J instanceof Wl))return!1;var ot=J;return this.equalsExact(ot)}},Wl.prototype.equalsExact=function(O){return this===O||this.equalsExact(O,0)},Wl.prototype.geometryChanged=function(){this.apply(Wl.geometryChangedFilter)},Wl.prototype.geometryChangedAction=function(){this._envelope=null},Wl.prototype.equalsNorm=function(O){return null!==O&&this.norm().equalsExact(O.norm())},Wl.prototype.getLength=function(){return 0},Wl.prototype.getNumGeometries=function(){return 1},Wl.prototype.compareTo=function(){if(1===arguments.length){var O=arguments[0],J=O;return this.getSortIndex()!==J.getSortIndex()?this.getSortIndex()-J.getSortIndex():this.isEmpty()&&J.isEmpty()?0:this.isEmpty()?-1:J.isEmpty()?1:this.compareToSameClass(O)}if(2===arguments.length){var ot=arguments[0],st=arguments[1];return this.getSortIndex()!==ot.getSortIndex()?this.getSortIndex()-ot.getSortIndex():this.isEmpty()&&ot.isEmpty()?0:this.isEmpty()?-1:ot.isEmpty()?1:this.compareToSameClass(ot,st)}},Wl.prototype.getUserData=function(){return this._userData},Wl.prototype.getSRID=function(){return this._SRID},Wl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Wl.prototype.checkNotGeometryCollection=function(O){if(O.getSortIndex()===Wl.SORTINDEX_GEOMETRYCOLLECTION)throw new Xu("This method does not support GeometryCollection arguments")},Wl.prototype.equal=function(O,J,ot){return 0===ot?O.equals(J):O.distance(J)<=ot},Wl.prototype.norm=function(){var O=this.copy();return O.normalize(),O},Wl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Wl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new ll(this._envelope)},Wl.prototype.setSRID=function(O){this._SRID=O},Wl.prototype.setUserData=function(O){this._userData=O},Wl.prototype.compare=function(O,J){for(var ot=O.iterator(),st=J.iterator();ot.hasNext()&&st.hasNext();){var at=ot.next(),ut=st.next(),ct=at.compareTo(ut);if(0!==ct)return ct}return ot.hasNext()?1:st.hasNext()?-1:0},Wl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Wl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Wl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Wl.SORTINDEX_MULTIPOINT||this.getSortIndex()===Wl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Wl.SORTINDEX_MULTIPOLYGON},Wl.prototype.interfaces_=function(){return[ol,il,al]},Wl.prototype.getClass=function(){return Wl},Wl.hasNonEmptyElements=function(O){for(var J=0;J<O.length;J++)if(!O[J].isEmpty())return!0;return!1},Wl.hasNullElements=function(O){for(var J=0;J<O.length;J++)if(null===O[J])return!0;return!1},Rl.serialVersionUID.get=function(){return 0x799ea46522854c00},Rl.SORTINDEX_POINT.get=function(){return 0},Rl.SORTINDEX_MULTIPOINT.get=function(){return 1},Rl.SORTINDEX_LINESTRING.get=function(){return 2},Rl.SORTINDEX_LINEARRING.get=function(){return 3},Rl.SORTINDEX_MULTILINESTRING.get=function(){return 4},Rl.SORTINDEX_POLYGON.get=function(){return 5},Rl.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Rl.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Rl.geometryChangedFilter.get=function(){return Zl},Object.defineProperties(Wl,Rl);var Zl=function(){};Zl.interfaces_=function(){return[Hl]},Zl.filter=function(O){O.geometryChangedAction()};var Kl=function(){};Kl.prototype.filter=function(O){},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var Ql=function(){},Ol={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Ql.prototype.isInBoundary=function(O){},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql},Ol.Mod2BoundaryNodeRule.get=function(){return tc},Ol.EndPointBoundaryNodeRule.get=function(){return ec},Ol.MultiValentEndPointBoundaryNodeRule.get=function(){return nc},Ol.MonoValentEndPointBoundaryNodeRule.get=function(){return rc},Ol.MOD2_BOUNDARY_RULE.get=function(){return new tc},Ol.ENDPOINT_BOUNDARY_RULE.get=function(){return new ec},Ol.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new nc},Ol.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new rc},Ol.OGC_SFS_BOUNDARY_RULE.get=function(){return Ql.MOD2_BOUNDARY_RULE},Object.defineProperties(Ql,Ol);var tc=function(){};tc.prototype.isInBoundary=function(O){return O%2==1},tc.prototype.interfaces_=function(){return[Ql]},tc.prototype.getClass=function(){return tc};var ec=function(){};ec.prototype.isInBoundary=function(O){return O>0},ec.prototype.interfaces_=function(){return[Ql]},ec.prototype.getClass=function(){return ec};var nc=function(){};nc.prototype.isInBoundary=function(O){return O>1},nc.prototype.interfaces_=function(){return[Ql]},nc.prototype.getClass=function(){return nc};var rc=function(){};rc.prototype.isInBoundary=function(O){return 1===O},rc.prototype.interfaces_=function(){return[Ql]},rc.prototype.getClass=function(){return rc};var ic=function(){};function oc(O){this.message=O||""}ic.prototype.add=function(){},ic.prototype.addAll=function(){},ic.prototype.isEmpty=function(){},ic.prototype.iterator=function(){},ic.prototype.size=function(){},ic.prototype.toArray=function(){},ic.prototype.remove=function(){},oc.prototype=new Error,oc.prototype.name="IndexOutOfBoundsException";var sc=function(){};sc.prototype.hasNext=function(){},sc.prototype.next=function(){},sc.prototype.remove=function(){};var Al=function(O){function e(){O.apply(this,arguments)}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(ic);function uc(O){this.message=O||""}uc.prototype=new Error,uc.prototype.name="NoSuchElementException";var Dl=function(O){function e(){O.call(this),this.array_=[],arguments[0]instanceof ic&&this.addAll(arguments[0])}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[O,ic]},e.prototype.add=function(O){return 1===arguments.length?this.array_.push(O):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(O){for(var J=O.iterator();J.hasNext();)this.add(J.next());return!0},e.prototype.set=function(O,J){var ot=this.array_[O];return this.array_[O]=J,ot},e.prototype.iterator=function(){return new kl(this)},e.prototype.get=function(O){if(O<0||O>=this.size())throw new oc;return this.array_[O]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var O=[],J=0,ot=this.array_.length;J<ot;J++)O.push(this.array_[J]);return O},e.prototype.remove=function(O){for(var J=!1,ot=0,st=this.array_.length;ot<st;ot++)if(this.array_[ot]===O){this.array_.splice(ot,1),J=!0;break}return J},e}(Al),kl=function(O){function e(J){O.call(this),this.arrayList_=J,this.position_=0}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new uc;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(O){return this.arrayList_.set(this.position_-1,O)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(sc),Gl=function(O){function e(){if(O.call(this),0===arguments.length);else if(1===arguments.length){var J=arguments[0];this.ensureCapacity(J.length),this.add(J,!0)}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];this.ensureCapacity(ot.length),this.add(ot,st)}}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={coordArrayType:{configurable:!0}};return J.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(O){return this.get(O)},e.prototype.addAll=function(){if(2===arguments.length){for(var J=arguments[1],ot=!1,st=arguments[0].iterator();st.hasNext();)this.add(st.next(),J),ot=!0;return ot}return O.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var J=O.prototype.clone.call(this),ot=0;ot<this.size();ot++)J.add(ot,this.get(ot).copy());return J},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var J=this;if(1===arguments.length){var ot=arguments[0];O.prototype.add.call(this,ot)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var st=arguments[0],at=arguments[1];return this.add(st,at,!0),!0}if(arguments[0]instanceof Wu&&"boolean"==typeof arguments[1]){var ut=arguments[0];if(!arguments[1]&&this.size()>=1)if(this.get(this.size()-1).equals2D(ut))return null;O.prototype.add.call(this,ut)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var ct=arguments[0],ht=arguments[1];return this.add(ct,ht),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var pt=arguments[0],mt=arguments[1];if(arguments[2])for(var xt=0;xt<pt.length;xt++)J.add(pt[xt],mt);else for(var Nt=pt.length-1;Nt>=0;Nt--)J.add(pt[Nt],mt);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Wu){var St=arguments[0],jt=arguments[1];if(!arguments[2]){var Wt=this.size();if(Wt>0){if(St>0)if(this.get(St-1).equals2D(jt))return null;if(St<Wt)if(this.get(St).equals2D(jt))return null}}O.prototype.add.call(this,St,jt)}}else if(4===arguments.length){var Ht=arguments[0],Zt=arguments[1],Kt=arguments[2],Jt=arguments[3],ee=1;Kt>Jt&&(ee=-1);for(var ne=Kt;ne!==Jt;ne+=ee)J.add(Ht[ne],Zt);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Wu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,J),e}(Dl),pc=function(){},zl={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};zl.ForwardComparator.get=function(){return gc},zl.BidirectionalComparator.get=function(){return dc},zl.coordArrayType.get=function(){return new Array(0).fill(null)},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc},pc.isRing=function(O){return!(O.length<4||!O[0].equals2D(O[O.length-1]))},pc.ptNotInList=function(O,J){for(var ot=0;ot<O.length;ot++){var st=O[ot];if(pc.indexOf(st,J)<0)return st}return null},pc.scroll=function(O,J){var ot=pc.indexOf(J,O);if(ot<0)return null;var st=new Array(O.length).fill(null);Pl.arraycopy(O,ot,st,0,O.length-ot),Pl.arraycopy(O,0,st,O.length-ot,ot),Pl.arraycopy(st,0,O,0,O.length)},pc.equals=function(){if(2===arguments.length){var O=arguments[0],J=arguments[1];if(O===J)return!0;if(null===O||null===J)return!1;if(O.length!==J.length)return!1;for(var ot=0;ot<O.length;ot++)if(!O[ot].equals(J[ot]))return!1;return!0}if(3===arguments.length){var st=arguments[0],at=arguments[1],ut=arguments[2];if(st===at)return!0;if(null===st||null===at)return!1;if(st.length!==at.length)return!1;for(var ct=0;ct<st.length;ct++)if(0!==ut.compare(st[ct],at[ct]))return!1;return!0}},pc.intersection=function(O,J){for(var ot=new Gl,st=0;st<O.length;st++)J.intersects(O[st])&&ot.add(O[st],!0);return ot.toCoordinateArray()},pc.hasRepeatedPoints=function(O){for(var J=1;J<O.length;J++)if(O[J-1].equals(O[J]))return!0;return!1},pc.removeRepeatedPoints=function(O){return pc.hasRepeatedPoints(O)?new Gl(O,!1).toCoordinateArray():O},pc.reverse=function(O){for(var J=O.length-1,ot=Math.trunc(J/2),st=0;st<=ot;st++){var at=O[st];O[st]=O[J-st],O[J-st]=at}},pc.removeNull=function(O){for(var J=0,ot=0;ot<O.length;ot++)null!==O[ot]&&J++;var st=new Array(J).fill(null);if(0===J)return st;for(var at=0,ut=0;ut<O.length;ut++)null!==O[ut]&&(st[at++]=O[ut]);return st},pc.copyDeep=function(){if(1===arguments.length){for(var O=arguments[0],J=new Array(O.length).fill(null),ot=0;ot<O.length;ot++)J[ot]=new Wu(O[ot]);return J}if(5===arguments.length)for(var st=arguments[0],at=arguments[1],ut=arguments[2],ct=arguments[3],ht=arguments[4],pt=0;pt<ht;pt++)ut[ct+pt]=new Wu(st[at+pt])},pc.isEqualReversed=function(O,J){for(var ot=0;ot<O.length;ot++){var st=O[ot],at=J[O.length-ot-1];if(0!==st.compareTo(at))return!1}return!0},pc.envelope=function(O){for(var J=new ll,ot=0;ot<O.length;ot++)J.expandToInclude(O[ot]);return J},pc.toCoordinateArray=function(O){return O.toArray(pc.coordArrayType)},pc.atLeastNCoordinatesOrNothing=function(O,J){return J.length>=O?J:[]},pc.indexOf=function(O,J){for(var ot=0;ot<J.length;ot++)if(O.equals(J[ot]))return ot;return-1},pc.increasingDirection=function(O){for(var J=0;J<Math.trunc(O.length/2);J++){var ot=O.length-1-J,st=O[J].compareTo(O[ot]);if(0!==st)return st}return 1},pc.compare=function(O,J){for(var ot=0;ot<O.length&&ot<J.length;){var st=O[ot].compareTo(J[ot]);if(0!==st)return st;ot++}return ot<J.length?-1:ot<O.length?1:0},pc.minCoordinate=function(O){for(var J=null,ot=0;ot<O.length;ot++)(null===J||J.compareTo(O[ot])>0)&&(J=O[ot]);return J},pc.extract=function(O,J,ot){J=dl.clamp(J,0,O.length);var st=(ot=dl.clamp(ot,-1,O.length))-J+1;ot<0&&(st=0),J>=O.length&&(st=0),ot<J&&(st=0);var at=new Array(st).fill(null);if(0===st)return at;for(var ut=0,ct=J;ct<=ot;ct++)at[ut++]=O[ct];return at},Object.defineProperties(pc,zl);var gc=function(){};gc.prototype.compare=function(O,J){return pc.compare(O,J)},gc.prototype.interfaces_=function(){return[sl]},gc.prototype.getClass=function(){return gc};var dc=function(){};dc.prototype.compare=function(O,J){var ot=O,st=J;if(ot.length<st.length)return-1;if(ot.length>st.length)return 1;if(0===ot.length)return 0;var at=pc.compare(ot,st);return pc.isEqualReversed(ot,st)?0:at},dc.prototype.OLDcompare=function(O,J){var ot=O,st=J;if(ot.length<st.length)return-1;if(ot.length>st.length)return 1;if(0===ot.length)return 0;for(var at=pc.increasingDirection(ot),ut=pc.increasingDirection(st),ct=at>0?0:ot.length-1,ht=ut>0?0:ot.length-1,pt=0;pt<ot.length;pt++){var mt=ot[ct].compareTo(st[ht]);if(0!==mt)return mt;ct+=at,ht+=ut}return 0},dc.prototype.interfaces_=function(){return[sl]},dc.prototype.getClass=function(){return dc};var yc=function(){};yc.prototype.get=function(){},yc.prototype.put=function(){},yc.prototype.size=function(){},yc.prototype.values=function(){},yc.prototype.entrySet=function(){};var jl=function(O){function e(){O.apply(this,arguments)}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e}(yc);function _c(O){this.message=O||""}function mc(){}_c.prototype=new Error,_c.prototype.name="OperationNotSupported",mc.prototype=new ic,mc.prototype.contains=function(){};var Yl=function(O){function e(){O.call(this),this.array_=[],arguments[0]instanceof ic&&this.addAll(arguments[0])}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.contains=function(O){for(var J=0,ot=this.array_.length;J<ot;J++)if(this.array_[J]===O)return!0;return!1},e.prototype.add=function(O){return!this.contains(O)&&(this.array_.push(O),!0)},e.prototype.addAll=function(O){for(var J=O.iterator();J.hasNext();)this.add(J.next());return!0},e.prototype.remove=function(O){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var O=[],J=0,ot=this.array_.length;J<ot;J++)O.push(this.array_[J]);return O},e.prototype.iterator=function(){return new Jl(this)},e}(mc),Jl=function(O){function e(J){O.call(this),this.hashSet_=J,this.position_=0}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new uc;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new _c},e}(sc);function bc(O){return null===O?0:O.color}function wc(O){return null===O?null:O.parent}function Ic(O,J){null!==O&&(O.color=J)}function Nc(O){return null===O?null:O.left}function Sc(O){return null===O?null:O.right}function Cc(){this.root_=null,this.size_=0}Cc.prototype=new jl,Cc.prototype.get=function(O){for(var J=this.root_;null!==J;){var ot=O.compareTo(J.key);if(ot<0)J=J.left;else{if(!(ot>0))return J.value;J=J.right}}return null},Cc.prototype.put=function(O,J){if(null===this.root_)return this.root_={key:O,value:J,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var ot,st,at=this.root_;do{if(ot=at,(st=O.compareTo(at.key))<0)at=at.left;else{if(!(st>0)){var ut=at.value;return at.value=J,ut}at=at.right}}while(null!==at);var ct={key:O,left:null,right:null,value:J,parent:ot,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return st<0?ot.left=ct:ot.right=ct,this.fixAfterInsertion(ct),this.size_++,null},Cc.prototype.fixAfterInsertion=function(O){var J=this;for(O.color=1;null!=O&&O!==this.root_&&1===O.parent.color;)if(wc(O)===Nc(wc(wc(O)))){var ot=Sc(wc(wc(O)));1===bc(ot)?(Ic(wc(O),0),Ic(ot,0),Ic(wc(wc(O)),1),O=wc(wc(O))):(O===Sc(wc(O))&&(O=wc(O),J.rotateLeft(O)),Ic(wc(O),0),Ic(wc(wc(O)),1),J.rotateRight(wc(wc(O))))}else{var st=Nc(wc(wc(O)));1===bc(st)?(Ic(wc(O),0),Ic(st,0),Ic(wc(wc(O)),1),O=wc(wc(O))):(O===Nc(wc(O))&&(O=wc(O),J.rotateRight(O)),Ic(wc(O),0),Ic(wc(wc(O)),1),J.rotateLeft(wc(wc(O))))}this.root_.color=0},Cc.prototype.values=function(){var O=new Dl,J=this.getFirstEntry();if(null!==J)for(O.add(J.value);null!==(J=Cc.successor(J));)O.add(J.value);return O},Cc.prototype.entrySet=function(){var O=new Yl,J=this.getFirstEntry();if(null!==J)for(O.add(J);null!==(J=Cc.successor(J));)O.add(J);return O},Cc.prototype.rotateLeft=function(O){if(null!=O){var J=O.right;O.right=J.left,null!=J.left&&(J.left.parent=O),J.parent=O.parent,null===O.parent?this.root_=J:O.parent.left===O?O.parent.left=J:O.parent.right=J,J.left=O,O.parent=J}},Cc.prototype.rotateRight=function(O){if(null!=O){var J=O.left;O.left=J.right,null!=J.right&&(J.right.parent=O),J.parent=O.parent,null===O.parent?this.root_=J:O.parent.right===O?O.parent.right=J:O.parent.left=J,J.right=O,O.parent=J}},Cc.prototype.getFirstEntry=function(){var O=this.root_;if(null!=O)for(;null!=O.left;)O=O.left;return O},Cc.successor=function(O){if(null===O)return null;if(null!==O.right){for(var J=O.right;null!==J.left;)J=J.left;return J}for(var ot=O.parent,st=O;null!==ot&&st===ot.right;)st=ot,ot=ot.parent;return ot},Cc.prototype.size=function(){return this.size_};var Pc=function(){};function Mc(){}function Lc(){this.array_=[],arguments[0]instanceof ic&&this.addAll(arguments[0])}Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc},Mc.prototype=new mc,Lc.prototype=new Mc,Lc.prototype.contains=function(O){for(var J=0,ot=this.array_.length;J<ot;J++)if(0===this.array_[J].compareTo(O))return!0;return!1},Lc.prototype.add=function(O){if(this.contains(O))return!1;for(var J=0,ot=this.array_.length;J<ot;J++)if(1===this.array_[J].compareTo(O))return this.array_.splice(J,0,O),!0;return this.array_.push(O),!0},Lc.prototype.addAll=function(O){for(var J=O.iterator();J.hasNext();)this.add(J.next());return!0},Lc.prototype.remove=function(O){throw new _c},Lc.prototype.size=function(){return this.array_.length},Lc.prototype.isEmpty=function(){return 0===this.array_.length},Lc.prototype.toArray=function(){for(var O=[],J=0,ot=this.array_.length;J<ot;J++)O.push(this.array_[J]);return O},Lc.prototype.iterator=function(){return new Oc(this)};var Oc=function(O){this.treeSet_=O,this.position_=0};Oc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new uc;return this.treeSet_.array_[this.position_++]},Oc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Oc.prototype.remove=function(){throw new _c};var Rc=function(){};Rc.sort=function(){var O,J,ot,st,at=arguments[0];if(1===arguments.length)st=function(O,J){return O.compareTo(J)},at.sort(st);else if(2===arguments.length)ot=arguments[1],st=function(O,J){return ot.compare(O,J)},at.sort(st);else if(3===arguments.length){(J=at.slice(arguments[1],arguments[2])).sort();var ut=at.slice(0,arguments[1]).concat(J,at.slice(arguments[2],at.length));for(at.splice(0,at.length),O=0;O<ut.length;O++)at.push(ut[O])}else if(4===arguments.length)for(J=at.slice(arguments[1],arguments[2]),ot=arguments[3],st=function(O,J){return ot.compare(O,J)},J.sort(st),ut=at.slice(0,arguments[1]).concat(J,at.slice(arguments[2],at.length)),at.splice(0,at.length),O=0;O<ut.length;O++)at.push(ut[O])},Rc.asList=function(O){for(var J=new Dl,ot=0,st=O.length;ot<st;ot++)J.add(O[ot]);return J};var Tc=function(){},$l={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};$l.P.get=function(){return 0},$l.L.get=function(){return 1},$l.A.get=function(){return 2},$l.FALSE.get=function(){return-1},$l.TRUE.get=function(){return-2},$l.DONTCARE.get=function(){return-3},$l.SYM_FALSE.get=function(){return"F"},$l.SYM_TRUE.get=function(){return"T"},$l.SYM_DONTCARE.get=function(){return"*"},$l.SYM_P.get=function(){return"0"},$l.SYM_L.get=function(){return"1"},$l.SYM_A.get=function(){return"2"},Tc.prototype.interfaces_=function(){return[]},Tc.prototype.getClass=function(){return Tc},Tc.toDimensionSymbol=function(O){switch(O){case Tc.FALSE:return Tc.SYM_FALSE;case Tc.TRUE:return Tc.SYM_TRUE;case Tc.DONTCARE:return Tc.SYM_DONTCARE;case Tc.P:return Tc.SYM_P;case Tc.L:return Tc.SYM_L;case Tc.A:return Tc.SYM_A}throw new Xu("Unknown dimension value: "+O)},Tc.toDimensionValue=function(O){switch(ml.toUpperCase(O)){case Tc.SYM_FALSE:return Tc.FALSE;case Tc.SYM_TRUE:return Tc.TRUE;case Tc.SYM_DONTCARE:return Tc.DONTCARE;case Tc.SYM_P:return Tc.P;case Tc.SYM_L:return Tc.L;case Tc.SYM_A:return Tc.A}throw new Xu("Unknown dimension symbol: "+O)},Object.defineProperties(Tc,$l);var Dc=function(){};Dc.prototype.filter=function(O){},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Fc=function(){};Fc.prototype.filter=function(O,J){},Fc.prototype.isDone=function(){},Fc.prototype.isGeometryChanged=function(){},Fc.prototype.interfaces_=function(){return[]},Fc.prototype.getClass=function(){return Fc};var ac=function(O){function e(J,ot){if(O.call(this,ot),this._geometries=J||[],O.hasNullElements(this._geometries))throw new Xu("geometries must not contain null elements")}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var O=new ll,J=0;J<this._geometries.length;J++)O.expandToInclude(this._geometries[J].getEnvelopeInternal());return O},e.prototype.getGeometryN=function(O){return this._geometries[O]},e.prototype.getSortIndex=function(){return O.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var O=new Array(this.getNumPoints()).fill(null),J=-1,ot=0;ot<this._geometries.length;ot++)for(var st=this._geometries[ot].getCoordinates(),at=0;at<st.length;at++)O[++J]=st[at];return O},e.prototype.getArea=function(){for(var O=0,J=0;J<this._geometries.length;J++)O+=this._geometries[J].getArea();return O},e.prototype.equalsExact=function(){if(2===arguments.length){var J=arguments[0],ot=arguments[1];if(!this.isEquivalentClass(J))return!1;var st=J;if(this._geometries.length!==st._geometries.length)return!1;for(var at=0;at<this._geometries.length;at++)if(!this._geometries[at].equalsExact(st._geometries[at],ot))return!1;return!0}return O.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var O=0;O<this._geometries.length;O++)this._geometries[O].normalize();Rc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var O=Tc.FALSE,J=0;J<this._geometries.length;J++)O=Math.max(O,this._geometries[J].getBoundaryDimension());return O},e.prototype.getDimension=function(){for(var O=Tc.FALSE,J=0;J<this._geometries.length;J++)O=Math.max(O,this._geometries[J].getDimension());return O},e.prototype.getLength=function(){for(var O=0,J=0;J<this._geometries.length;J++)O+=this._geometries[J].getLength();return O},e.prototype.getNumPoints=function(){for(var O=0,J=0;J<this._geometries.length;J++)O+=this._geometries[J].getNumPoints();return O},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var O=this._geometries.length,J=new Array(O).fill(null),ot=0;ot<this._geometries.length;ot++)J[ot]=this._geometries[ot].reverse();return this.getFactory().createGeometryCollection(J)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var O=arguments[0],J=new Lc(Rc.asList(this._geometries)),ot=new Lc(Rc.asList(O._geometries));return this.compare(J,ot)}if(2===arguments.length){for(var st=arguments[1],at=arguments[0],ut=this.getNumGeometries(),ct=at.getNumGeometries(),ht=0;ht<ut&&ht<ct;){var pt=this.getGeometryN(ht),mt=at.getGeometryN(ht),xt=pt.compareToSameClass(mt,st);if(0!==xt)return xt;ht++}return ht<ut?1:ht<ct?-1:0}},e.prototype.apply=function(){var O=this;if(gl(arguments[0],Kl))for(var J=arguments[0],ot=0;ot<this._geometries.length;ot++)O._geometries[ot].apply(J);else if(gl(arguments[0],Fc)){var st=arguments[0];if(0===this._geometries.length)return null;for(var at=0;at<this._geometries.length&&(O._geometries[at].apply(st),!st.isDone());at++);st.isGeometryChanged()&&this.geometryChanged()}else if(gl(arguments[0],Dc)){var ut=arguments[0];ut.filter(this);for(var ct=0;ct<this._geometries.length;ct++)O._geometries[ct].apply(ut)}else if(gl(arguments[0],Hl)){var ht=arguments[0];ht.filter(this);for(var pt=0;pt<this._geometries.length;pt++)O._geometries[pt].apply(ht)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),ql.shouldNeverReachHere(),null},e.prototype.clone=function(){var J=O.prototype.clone.call(this);J._geometries=new Array(this._geometries.length).fill(null);for(var ot=0;ot<this._geometries.length;ot++)J._geometries[ot]=this._geometries[ot].clone();return J},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var O=new Array(this._geometries.length).fill(null),J=0;J<O.length;J++)O[J]=this._geometries[J].copy();return new e(O,this._factory)},e.prototype.isEmpty=function(){for(var O=0;O<this._geometries.length;O++)if(!this._geometries[O].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},J.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,J),e}(Wl),lc=function(O){function e(){O.apply(this,arguments)}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Wl.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var J=arguments[0],ot=arguments[1];return!!this.isEquivalentClass(J)&&O.prototype.equalsExact.call(this,J,ot)}return O.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Tc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var O=0;O<this._geometries.length;O++)if(!this._geometries[O].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var O=this._geometries.length,J=new Array(O).fill(null),ot=0;ot<this._geometries.length;ot++)J[O-1-ot]=this._geometries[ot].reverse();return this.getFactory().createMultiLineString(J)},e.prototype.getBoundary=function(){return new qc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var O=new Array(this._geometries.length).fill(null),J=0;J<O.length;J++)O[J]=this._geometries[J].copy();return new e(O,this._factory)},e.prototype.interfaces_=function(){return[Pc]},e.prototype.getClass=function(){return e},J.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,J),e}(ac),qc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var O=arguments[0],J=Ql.MOD2_BOUNDARY_RULE;this._geom=O,this._geomFact=O.getFactory(),this._bnRule=J}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];this._geom=ot,this._geomFact=ot.getFactory(),this._bnRule=st}};qc.prototype.boundaryMultiLineString=function(O){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var J=this.computeBoundaryCoordinates(O);return 1===J.length?this._geomFact.createPoint(J[0]):this._geomFact.createMultiPointFromCoords(J)},qc.prototype.getBoundary=function(){return this._geom instanceof hc?this.boundaryLineString(this._geom):this._geom instanceof lc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},qc.prototype.boundaryLineString=function(O){return this._geom.isEmpty()?this.getEmptyMultiPoint():O.isClosed()?this._bnRule.isInBoundary(2)?O.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([O.getStartPoint(),O.getEndPoint()])},qc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},qc.prototype.computeBoundaryCoordinates=function(O){var J=this,ot=new Dl;this._endpointMap=new Cc;for(var st=0;st<O.getNumGeometries();st++){var at=O.getGeometryN(st);0!==at.getNumPoints()&&(J.addEndpoint(at.getCoordinateN(0)),J.addEndpoint(at.getCoordinateN(at.getNumPoints()-1)))}for(var ut=this._endpointMap.entrySet().iterator();ut.hasNext();){var ct=ut.next(),ht=ct.getValue().count;J._bnRule.isInBoundary(ht)&&ot.add(ct.getKey())}return pc.toCoordinateArray(ot)},qc.prototype.addEndpoint=function(O){var J=this._endpointMap.get(O);null===J&&(J=new Bc,this._endpointMap.put(O,J)),J.count++},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc},qc.getBoundary=function(){return 1===arguments.length?new qc(arguments[0]).getBoundary():2===arguments.length?new qc(arguments[0],arguments[1]).getBoundary():void 0};var Bc=function(){this.count=null};function zc(){}function jc(){}Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc};var Uc=function(){};function Vc(){}function Xc(){}function Yc(){}var Hc=function(){},cc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Hc.prototype.interfaces_=function(){return[]},Hc.prototype.getClass=function(){return Hc},Hc.chars=function(O,J){for(var ot=new Array(J).fill(null),st=0;st<J;st++)ot[st]=O;return String(ot)},Hc.getStackTrace=function(){if(1===arguments.length){var O=arguments[0],J=new Vc,ot=new zc(J);return O.printStackTrace(ot),J.toString()}if(2===arguments.length){for(var st=arguments[1],at="",ut=new Yc(new jc(Hc.getStackTrace(arguments[0]))),ct=0;ct<st;ct++)try{at+=ut.readLine()+Hc.NEWLINE}catch(O){if(!(O instanceof Xc))throw O;ql.shouldNeverReachHere()}return at}},Hc.split=function(O,J){for(var ot=J.length,st=new Dl,at=""+O,ut=at.indexOf(J);ut>=0;){var ct=at.substring(0,ut);st.add(ct),ut=(at=at.substring(ut+ot)).indexOf(J)}at.length>0&&st.add(at);for(var ht=new Array(st.size()).fill(null),pt=0;pt<ht.length;pt++)ht[pt]=st.get(pt);return ht},Hc.toString=function(){if(1===arguments.length){var O=arguments[0];return Hc.SIMPLE_ORDINATE_FORMAT.format(O)}},Hc.spaces=function(O){return Hc.chars(" ",O)},cc.NEWLINE.get=function(){return Pl.getProperty("line.separator")},cc.SIMPLE_ORDINATE_FORMAT.get=function(){return new Uc("0.#")},Object.defineProperties(Hc,cc);var Jc=function(){};Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc},Jc.copyCoord=function(O,J,ot,st){for(var at=Math.min(O.getDimension(),ot.getDimension()),ut=0;ut<at;ut++)ot.setOrdinate(st,ut,O.getOrdinate(J,ut))},Jc.isRing=function(O){var J=O.size();return 0===J||!(J<=3)&&O.getOrdinate(0,Il.X)===O.getOrdinate(J-1,Il.X)&&O.getOrdinate(0,Il.Y)===O.getOrdinate(J-1,Il.Y)},Jc.isEqual=function(O,J){var ot=O.size();if(ot!==J.size())return!1;for(var st=Math.min(O.getDimension(),J.getDimension()),at=0;at<ot;at++)for(var ut=0;ut<st;ut++){var ct=O.getOrdinate(at,ut),ht=J.getOrdinate(at,ut);if(!(O.getOrdinate(at,ut)===J.getOrdinate(at,ut)||nl.isNaN(ct)&&nl.isNaN(ht)))return!1}return!0},Jc.extend=function(O,J,ot){var st=O.create(ot,J.getDimension()),at=J.size();if(Jc.copy(J,0,st,0,at),at>0)for(var ut=at;ut<ot;ut++)Jc.copy(J,at-1,st,ut,1);return st},Jc.reverse=function(O){for(var J=O.size()-1,ot=Math.trunc(J/2),st=0;st<=ot;st++)Jc.swap(O,st,J-st)},Jc.swap=function(O,J,ot){if(J===ot)return null;for(var st=0;st<O.getDimension();st++){var at=O.getOrdinate(J,st);O.setOrdinate(J,st,O.getOrdinate(ot,st)),O.setOrdinate(ot,st,at)}},Jc.copy=function(O,J,ot,st,at){for(var ut=0;ut<at;ut++)Jc.copyCoord(O,J+ut,ot,st+ut)},Jc.toString=function(){if(1===arguments.length){var O=arguments[0],J=O.size();if(0===J)return"()";var ot=O.getDimension(),st=new vl;st.append("(");for(var at=0;at<J;at++){at>0&&st.append(" ");for(var ut=0;ut<ot;ut++)ut>0&&st.append(","),st.append(Hc.toString(O.getOrdinate(at,ut)))}return st.append(")"),st.toString()}},Jc.ensureValidRing=function(O,J){var ot=J.size();return 0===ot?J:ot<=3?Jc.createClosedRing(O,J,4):J.getOrdinate(0,Il.X)===J.getOrdinate(ot-1,Il.X)&&J.getOrdinate(0,Il.Y)===J.getOrdinate(ot-1,Il.Y)?J:Jc.createClosedRing(O,J,ot+1)},Jc.createClosedRing=function(O,J,ot){var st=O.create(ot,J.getDimension()),at=J.size();Jc.copy(J,0,st,0,at);for(var ut=at;ut<ot;ut++)Jc.copy(J,0,st,ut,1);return st};var hc=function(O){function e(J,ot){O.call(this,ot),this._points=null,this.init(J)}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new ll:this._points.expandEnvelope(new ll)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return O.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var J=arguments[0],ot=arguments[1];if(!this.isEquivalentClass(J))return!1;var st=J;if(this._points.size()!==st._points.size())return!1;for(var at=0;at<this._points.size();at++)if(!this.equal(this._points.getCoordinate(at),st._points.getCoordinate(at),ot))return!1;return!0}return O.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var O=this,J=0;J<Math.trunc(this._points.size()/2);J++){var ot=O._points.size()-1-J;if(!O._points.getCoordinate(J).equals(O._points.getCoordinate(ot)))return O._points.getCoordinate(J).compareTo(O._points.getCoordinate(ot))>0&&Jc.reverse(O._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Tc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Xl.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var O=this._points.copy();return Jc.reverse(O),this.getFactory().createLineString(O)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var O=arguments[0],J=0,ot=0;J<this._points.size()&&ot<O._points.size();){var st=this._points.getCoordinate(J).compareTo(O._points.getCoordinate(ot));if(0!==st)return st;J++,ot++}return J<this._points.size()?1:ot<O._points.size()?-1:0}if(2===arguments.length){var at=arguments[0];return arguments[1].compare(this._points,at._points)}},e.prototype.apply=function(){if(gl(arguments[0],Kl))for(var O=arguments[0],J=0;J<this._points.size();J++)O.filter(this._points.getCoordinate(J));else if(gl(arguments[0],Fc)){var ot=arguments[0];if(0===this._points.size())return null;for(var st=0;st<this._points.size()&&(ot.filter(this._points,st),!ot.isDone());st++);ot.isGeometryChanged()&&this.geometryChanged()}else if(gl(arguments[0],Dc)){arguments[0].filter(this)}else if(gl(arguments[0],Hl)){arguments[0].filter(this)}},e.prototype.getBoundary=function(){return new qc(this).getBoundary()},e.prototype.isEquivalentClass=function(O){return O instanceof e},e.prototype.clone=function(){var J=O.prototype.clone.call(this);return J._points=this._points.clone(),J},e.prototype.getCoordinateN=function(O){return this._points.getCoordinate(O)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(O){if(null===O&&(O=this.getFactory().getCoordinateSequenceFactory().create([])),1===O.size())throw new Xu("Invalid number of points in LineString (found "+O.size()+" - must be 0 or >= 2)");this._points=O},e.prototype.isCoordinate=function(O){for(var J=0;J<this._points.size();J++)if(this._points.getCoordinate(J).equals(O))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(O){return this.getFactory().createPoint(this._points.getCoordinate(O))},e.prototype.interfaces_=function(){return[Pc]},e.prototype.getClass=function(){return e},J.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,J),e}(Wl),Kc=function(){};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var fc=function(O){function e(J,ot){O.call(this,ot),this._coordinates=J||null,this.init(this._coordinates)}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new ll;var O=new ll;return O.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),O},e.prototype.getSortIndex=function(){return O.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var J=arguments[0],ot=arguments[1];return!!this.isEquivalentClass(J)&&(!(!this.isEmpty()||!J.isEmpty())||this.isEmpty()===J.isEmpty()&&this.equal(J.getCoordinate(),this.getCoordinate(),ot))}return O.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Tc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var O=arguments[0];return this.getCoordinate().compareTo(O.getCoordinate())}if(2===arguments.length){var J=arguments[0];return arguments[1].compare(this._coordinates,J._coordinates)}},e.prototype.apply=function(){if(gl(arguments[0],Kl)){var O=arguments[0];if(this.isEmpty())return null;O.filter(this.getCoordinate())}else if(gl(arguments[0],Fc)){var J=arguments[0];if(this.isEmpty())return null;J.filter(this._coordinates,0),J.isGeometryChanged()&&this.geometryChanged()}else if(gl(arguments[0],Dc)){arguments[0].filter(this)}else if(gl(arguments[0],Hl)){arguments[0].filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var J=O.prototype.clone.call(this);return J._coordinates=this._coordinates.clone(),J},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(O){null===O&&(O=this.getFactory().getCoordinateSequenceFactory().create([])),ql.isTrue(O.size()<=1),this._coordinates=O},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},J.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,J),e}(Wl),$c=function(){};$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c};var vc=function(O){function e(J,ot,st){if(O.call(this,st),this._shell=null,this._holes=null,null===J&&(J=this.getFactory().createLinearRing()),null===ot&&(ot=[]),O.hasNullElements(ot))throw new Xu("holes must not contain null elements");if(J.isEmpty()&&O.hasNonEmptyElements(ot))throw new Xu("shell is empty but holes are not");this._shell=J,this._holes=ot}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return O.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var O=new Array(this.getNumPoints()).fill(null),J=-1,ot=this._shell.getCoordinates(),st=0;st<ot.length;st++)O[++J]=ot[st];for(var at=0;at<this._holes.length;at++)for(var ut=this._holes[at].getCoordinates(),ct=0;ct<ut.length;ct++)O[++J]=ut[ct];return O},e.prototype.getArea=function(){var O=0;O+=Math.abs(Xl.signedArea(this._shell.getCoordinateSequence()));for(var J=0;J<this._holes.length;J++)O-=Math.abs(Xl.signedArea(this._holes[J].getCoordinateSequence()));return O},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var O=this._shell.getCoordinateSequence(),J=this.getEnvelopeInternal(),ot=0;ot<5;ot++){var st=O.getX(ot);if(st!==J.getMinX()&&st!==J.getMaxX())return!1;var at=O.getY(ot);if(at!==J.getMinY()&&at!==J.getMaxY())return!1}for(var ut=O.getX(0),ct=O.getY(0),ht=1;ht<=4;ht++){var pt=O.getX(ht),mt=O.getY(ht);if(pt!==ut==(mt!==ct))return!1;ut=pt,ct=mt}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var J=arguments[0],ot=arguments[1];if(!this.isEquivalentClass(J))return!1;var st=J,at=this._shell,ut=st._shell;if(!at.equalsExact(ut,ot))return!1;if(this._holes.length!==st._holes.length)return!1;for(var ct=0;ct<this._holes.length;ct++)if(!this._holes[ct].equalsExact(st._holes[ct],ot))return!1;return!0}return O.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var O=0;O<this._holes.length;O++)this.normalize(this._holes[O],!1);Rc.sort(this._holes)}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];if(J.isEmpty())return null;var st=new Array(J.getCoordinates().length-1).fill(null);Pl.arraycopy(J.getCoordinates(),0,st,0,st.length);var at=pc.minCoordinate(J.getCoordinates());pc.scroll(st,at),Pl.arraycopy(st,0,J.getCoordinates(),0,st.length),J.getCoordinates()[st.length]=st[0],Xl.isCCW(J.getCoordinates())===ot&&pc.reverse(J.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var O=0;O+=this._shell.getLength();for(var J=0;J<this._holes.length;J++)O+=this._holes[J].getLength();return O},e.prototype.getNumPoints=function(){for(var O=this._shell.getNumPoints(),J=0;J<this._holes.length;J++)O+=this._holes[J].getNumPoints();return O},e.prototype.reverse=function(){var O=this.copy();O._shell=this._shell.copy().reverse(),O._holes=new Array(this._holes.length).fill(null);for(var J=0;J<this._holes.length;J++)O._holes[J]=this._holes[J].copy().reverse();return O},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var O=arguments[0],J=this._shell,ot=O._shell;return J.compareToSameClass(ot)}if(2===arguments.length){var st=arguments[1],at=arguments[0],ut=this._shell,ct=at._shell,ht=ut.compareToSameClass(ct,st);if(0!==ht)return ht;for(var pt=this.getNumInteriorRing(),mt=at.getNumInteriorRing(),xt=0;xt<pt&&xt<mt;){var Nt=this.getInteriorRingN(xt),St=at.getInteriorRingN(xt),jt=Nt.compareToSameClass(St,st);if(0!==jt)return jt;xt++}return xt<pt?1:xt<mt?-1:0}},e.prototype.apply=function(O){var J=this;if(gl(O,Kl)){this._shell.apply(O);for(var ot=0;ot<this._holes.length;ot++)J._holes[ot].apply(O)}else if(gl(O,Fc)){if(this._shell.apply(O),!O.isDone())for(var st=0;st<this._holes.length&&(J._holes[st].apply(O),!O.isDone());st++);O.isGeometryChanged()&&this.geometryChanged()}else if(gl(O,Dc))O.filter(this);else if(gl(O,Hl)){O.filter(this),this._shell.apply(O);for(var at=0;at<this._holes.length;at++)J._holes[at].apply(O)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var O=new Array(this._holes.length+1).fill(null);O[0]=this._shell;for(var J=0;J<this._holes.length;J++)O[J+1]=this._holes[J];return O.length<=1?this.getFactory().createLinearRing(O[0].getCoordinateSequence()):this.getFactory().createMultiLineString(O)},e.prototype.clone=function(){var J=O.prototype.clone.call(this);J._shell=this._shell.clone(),J._holes=new Array(this._holes.length).fill(null);for(var ot=0;ot<this._holes.length;ot++)J._holes[ot]=this._holes[ot].clone();return J},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var O=this._shell.copy(),J=new Array(this._holes.length).fill(null),ot=0;ot<J.length;ot++)J[ot]=this._holes[ot].copy();return new e(O,J,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(O){return this._holes[O]},e.prototype.interfaces_=function(){return[$c]},e.prototype.getClass=function(){return e},J.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,J),e}(Wl),xc=function(O){function e(){O.apply(this,arguments)}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Wl.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var J=arguments[0],ot=arguments[1];return!!this.isEquivalentClass(J)&&O.prototype.equalsExact.call(this,J,ot)}return O.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var J=arguments[0];return this._geometries[J].getCoordinate()}return O.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Tc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var O=new Array(this._geometries.length).fill(null),J=0;J<O.length;J++)O[J]=this._geometries[J].copy();return new e(O,this._factory)},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},J.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,J),e}(ac),Ec=function(O){function e(J,ot){J instanceof Wu&&ot instanceof rh&&(J=ot.getCoordinateSequenceFactory().create(J)),O.call(this,J,ot),this.validateConstruction()}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Wl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Tc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||O.prototype.isClosed.call(this)},e.prototype.reverse=function(){var O=this._points.copy();return Jc.reverse(O),this.getFactory().createLinearRing(O)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!O.prototype.isClosed.call(this))throw new Xu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new Xu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},J.MINIMUM_VALID_SIZE.get=function(){return 4},J.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,J),e}(hc),Ac=function(O){function e(){O.apply(this,arguments)}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Wl.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var J=arguments[0],ot=arguments[1];return!!this.isEquivalentClass(J)&&O.prototype.equalsExact.call(this,J,ot)}return O.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var O=this._geometries.length,J=new Array(O).fill(null),ot=0;ot<this._geometries.length;ot++)J[ot]=this._geometries[ot].reverse();return this.getFactory().createMultiPolygon(J)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var O=new Dl,J=0;J<this._geometries.length;J++)for(var ot=this._geometries[J].getBoundary(),st=0;st<ot.getNumGeometries();st++)O.add(ot.getGeometryN(st));var at=new Array(O.size()).fill(null);return this.getFactory().createMultiLineString(O.toArray(at))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var O=new Array(this._geometries.length).fill(null),J=0;J<O.length;J++)O[J]=this._geometries[J].copy();return new e(O,this._factory)},e.prototype.interfaces_=function(){return[$c]},e.prototype.getClass=function(){return e},J.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,J),e}(ac),ih=function(O){this._factory=O||null,this._isUserDataCopied=!1},kc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ih.prototype.setCopyUserData=function(O){this._isUserDataCopied=O},ih.prototype.edit=function(O,J){if(null===O)return null;var ot=this.editInternal(O,J);return this._isUserDataCopied&&ot.setUserData(O.getUserData()),ot},ih.prototype.editInternal=function(O,J){return null===this._factory&&(this._factory=O.getFactory()),O instanceof ac?this.editGeometryCollection(O,J):O instanceof vc?this.editPolygon(O,J):O instanceof fc||O instanceof hc?J.edit(O,this._factory):(ql.shouldNeverReachHere("Unsupported Geometry class: "+O.getClass().getName()),null)},ih.prototype.editGeometryCollection=function(O,J){for(var ot=J.edit(O,this._factory),st=new Dl,at=0;at<ot.getNumGeometries();at++){var ut=this.edit(ot.getGeometryN(at),J);null===ut||ut.isEmpty()||st.add(ut)}return ot.getClass()===xc?this._factory.createMultiPoint(st.toArray([])):ot.getClass()===lc?this._factory.createMultiLineString(st.toArray([])):ot.getClass()===Ac?this._factory.createMultiPolygon(st.toArray([])):this._factory.createGeometryCollection(st.toArray([]))},ih.prototype.editPolygon=function(O,J){var ot=J.edit(O,this._factory);if(null===ot&&(ot=this._factory.createPolygon(null)),ot.isEmpty())return ot;var st=this.edit(ot.getExteriorRing(),J);if(null===st||st.isEmpty())return this._factory.createPolygon();for(var at=new Dl,ut=0;ut<ot.getNumInteriorRing();ut++){var ct=this.edit(ot.getInteriorRingN(ut),J);null===ct||ct.isEmpty()||at.add(ct)}return this._factory.createPolygon(st,at.toArray([]))},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.GeometryEditorOperation=function(){},kc.NoOpGeometryOperation.get=function(){return sh},kc.CoordinateOperation.get=function(){return ah},kc.CoordinateSequenceOperation.get=function(){return uh},Object.defineProperties(ih,kc);var sh=function(){};sh.prototype.edit=function(O,J){return O},sh.prototype.interfaces_=function(){return[ih.GeometryEditorOperation]},sh.prototype.getClass=function(){return sh};var ah=function(){};ah.prototype.edit=function(O,J){var ot=this.editCoordinates(O.getCoordinates(),O);return null===ot?O:O instanceof Ec?J.createLinearRing(ot):O instanceof hc?J.createLineString(ot):O instanceof fc?ot.length>0?J.createPoint(ot[0]):J.createPoint():O},ah.prototype.interfaces_=function(){return[ih.GeometryEditorOperation]},ah.prototype.getClass=function(){return ah};var uh=function(){};uh.prototype.edit=function(O,J){return O instanceof Ec?J.createLinearRing(this.edit(O.getCoordinateSequence(),O)):O instanceof hc?J.createLineString(this.edit(O.getCoordinateSequence(),O)):O instanceof fc?J.createPoint(this.edit(O.getCoordinateSequence(),O)):O},uh.prototype.interfaces_=function(){return[ih.GeometryEditorOperation]},uh.prototype.getClass=function(){return uh};var lh=function(){var O=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var J=arguments[0];this._coordinates=new Array(J).fill(null);for(var ot=0;ot<J;ot++)O._coordinates[ot]=new Wu}else if(gl(arguments[0],Il)){var st=arguments[0];if(null===st)return this._coordinates=new Array(0).fill(null),null;this._dimension=st.getDimension(),this._coordinates=new Array(st.size()).fill(null);for(var at=0;at<this._coordinates.length;at++)O._coordinates[at]=st.getCoordinateCopy(at)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var ut=arguments[0],ct=arguments[1];this._coordinates=ut,this._dimension=ct,null===ut&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var ht=arguments[0],pt=arguments[1];this._coordinates=new Array(ht).fill(null),this._dimension=pt;for(var mt=0;mt<ht;mt++)O._coordinates[mt]=new Wu}},Gc={serialVersionUID:{configurable:!0}};lh.prototype.setOrdinate=function(O,J,ot){switch(J){case Il.X:this._coordinates[O].x=ot;break;case Il.Y:this._coordinates[O].y=ot;break;case Il.Z:this._coordinates[O].z=ot;break;default:throw new Xu("invalid ordinateIndex")}},lh.prototype.size=function(){return this._coordinates.length},lh.prototype.getOrdinate=function(O,J){switch(J){case Il.X:return this._coordinates[O].x;case Il.Y:return this._coordinates[O].y;case Il.Z:return this._coordinates[O].z}return nl.NaN},lh.prototype.getCoordinate=function(){if(1===arguments.length){var O=arguments[0];return this._coordinates[O]}if(2===arguments.length){var J=arguments[0],ot=arguments[1];ot.x=this._coordinates[J].x,ot.y=this._coordinates[J].y,ot.z=this._coordinates[J].z}},lh.prototype.getCoordinateCopy=function(O){return new Wu(this._coordinates[O])},lh.prototype.getDimension=function(){return this._dimension},lh.prototype.getX=function(O){return this._coordinates[O].x},lh.prototype.clone=function(){for(var O=new Array(this.size()).fill(null),J=0;J<this._coordinates.length;J++)O[J]=this._coordinates[J].clone();return new lh(O,this._dimension)},lh.prototype.expandEnvelope=function(O){for(var J=0;J<this._coordinates.length;J++)O.expandToInclude(this._coordinates[J]);return O},lh.prototype.copy=function(){for(var O=new Array(this.size()).fill(null),J=0;J<this._coordinates.length;J++)O[J]=this._coordinates[J].copy();return new lh(O,this._dimension)},lh.prototype.toString=function(){if(this._coordinates.length>0){var O=new vl(17*this._coordinates.length);O.append("("),O.append(this._coordinates[0]);for(var J=1;J<this._coordinates.length;J++)O.append(", "),O.append(this._coordinates[J]);return O.append(")"),O.toString()}return"()"},lh.prototype.getY=function(O){return this._coordinates[O].y},lh.prototype.toCoordinateArray=function(){return this._coordinates},lh.prototype.interfaces_=function(){return[Il,al]},lh.prototype.getClass=function(){return lh},Gc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(lh,Gc);var hh=function(){},Wc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};hh.prototype.readResolve=function(){return hh.instance()},hh.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new lh(arguments[0]);if(gl(arguments[0],Il))return new lh(arguments[0])}else if(2===arguments.length){var O=arguments[0],J=arguments[1];return J>3&&(J=3),J<2?new lh(O):new lh(O,J)}},hh.prototype.interfaces_=function(){return[hl,al]},hh.prototype.getClass=function(){return hh},hh.instance=function(){return hh.instanceObject},Wc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Wc.instanceObject.get=function(){return new hh},Object.defineProperties(hh,Wc);var Qc=function(O){function e(){O.call(this),this.map_=new Map}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.get=function(O){return this.map_.get(O)||null},e.prototype.put=function(O,J){return this.map_.set(O,J),J},e.prototype.values=function(){for(var O=new Dl,J=this.map_.values(),ot=J.next();!ot.done;)O.add(ot.value),ot=J.next();return O},e.prototype.entrySet=function(){var O=new Yl;return this.map_.entries().forEach((function(J){return O.add(J)})),O},e.prototype.size=function(){return this.map_.size()},e}(yc),Zc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof eh){var O=arguments[0];this._modelType=O,O===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var J=arguments[0];this._modelType=t.FIXED,this.setScale(J)}else if(arguments[0]instanceof t){var ot=arguments[0];this._modelType=ot._modelType,this._scale=ot._scale}},th={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Zc.prototype.equals=function(O){if(!(O instanceof Zc))return!1;var J=O;return this._modelType===J._modelType&&this._scale===J._scale},Zc.prototype.compareTo=function(O){var J=O,ot=this.getMaximumSignificantDigits(),st=J.getMaximumSignificantDigits();return new _l(ot).compareTo(new _l(st))},Zc.prototype.getScale=function(){return this._scale},Zc.prototype.isFloating=function(){return this._modelType===Zc.FLOATING||this._modelType===Zc.FLOATING_SINGLE},Zc.prototype.getType=function(){return this._modelType},Zc.prototype.toString=function(){var O="UNKNOWN";return this._modelType===Zc.FLOATING?O="Floating":this._modelType===Zc.FLOATING_SINGLE?O="Floating-Single":this._modelType===Zc.FIXED&&(O="Fixed (Scale="+this.getScale()+")"),O},Zc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var O=arguments[0];return nl.isNaN(O)||this._modelType===Zc.FLOATING_SINGLE?O:this._modelType===Zc.FIXED?Math.round(O*this._scale)/this._scale:O}if(arguments[0]instanceof Wu){var J=arguments[0];if(this._modelType===Zc.FLOATING)return null;J.x=this.makePrecise(J.x),J.y=this.makePrecise(J.y)}},Zc.prototype.getMaximumSignificantDigits=function(){var O=16;return this._modelType===Zc.FLOATING?O=16:this._modelType===Zc.FLOATING_SINGLE?O=6:this._modelType===Zc.FIXED&&(O=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),O},Zc.prototype.setScale=function(O){this._scale=Math.abs(O)},Zc.prototype.interfaces_=function(){return[al,il]},Zc.prototype.getClass=function(){return Zc},Zc.mostPrecise=function(O,J){return O.compareTo(J)>=0?O:J},th.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},th.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Zc,th);var eh=function t(O){this._name=O||null,t.nameToTypeMap.put(O,this)},nh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};eh.prototype.readResolve=function(){return eh.nameToTypeMap.get(this._name)},eh.prototype.toString=function(){return this._name},eh.prototype.interfaces_=function(){return[al]},eh.prototype.getClass=function(){return eh},nh.serialVersionUID.get=function(){return-552860263173159e4},nh.nameToTypeMap.get=function(){return new Qc},Object.defineProperties(eh,nh),Zc.Type=eh,Zc.FIXED=new eh("FIXED"),Zc.FLOATING=new eh("FLOATING"),Zc.FLOATING_SINGLE=new eh("FLOATING SINGLE");var rh=function t(){this._precisionModel=new Zc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?gl(arguments[0],hl)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Zc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},oh={serialVersionUID:{configurable:!0}};rh.prototype.toGeometry=function(O){return O.isNull()?this.createPoint(null):O.getMinX()===O.getMaxX()&&O.getMinY()===O.getMaxY()?this.createPoint(new Wu(O.getMinX(),O.getMinY())):O.getMinX()===O.getMaxX()||O.getMinY()===O.getMaxY()?this.createLineString([new Wu(O.getMinX(),O.getMinY()),new Wu(O.getMaxX(),O.getMaxY())]):this.createPolygon(this.createLinearRing([new Wu(O.getMinX(),O.getMinY()),new Wu(O.getMinX(),O.getMaxY()),new Wu(O.getMaxX(),O.getMaxY()),new Wu(O.getMaxX(),O.getMinY()),new Wu(O.getMinX(),O.getMinY())]),null)},rh.prototype.createLineString=function(O){return O?O instanceof Array?new hc(this.getCoordinateSequenceFactory().create(O),this):gl(O,Il)?new hc(O,this):void 0:new hc(this.getCoordinateSequenceFactory().create([]),this)},rh.prototype.createMultiLineString=function(){return 0===arguments.length?new lc(null,this):1===arguments.length?new lc(arguments[0],this):void 0},rh.prototype.buildGeometry=function(O){for(var J=null,ot=!1,st=!1,at=O.iterator();at.hasNext();){var ut=at.next(),ct=ut.getClass();null===J&&(J=ct),ct!==J&&(ot=!0),ut.isGeometryCollectionOrDerived()&&(st=!0)}if(null===J)return this.createGeometryCollection();if(ot||st)return this.createGeometryCollection(rh.toGeometryArray(O));var ht=O.iterator().next();if(O.size()>1){if(ht instanceof vc)return this.createMultiPolygon(rh.toPolygonArray(O));if(ht instanceof hc)return this.createMultiLineString(rh.toLineStringArray(O));if(ht instanceof fc)return this.createMultiPoint(rh.toPointArray(O));ql.shouldNeverReachHere("Unhandled class: "+ht.getClass().getName())}return ht},rh.prototype.createMultiPointFromCoords=function(O){return this.createMultiPoint(null!==O?this.getCoordinateSequenceFactory().create(O):null)},rh.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Wu){var O=arguments[0];return this.createPoint(null!==O?this.getCoordinateSequenceFactory().create([O]):null)}if(gl(arguments[0],Il))return new fc(arguments[0],this)}},rh.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},rh.prototype.createPolygon=function(){if(0===arguments.length)return new vc(null,null,this);if(1===arguments.length){if(gl(arguments[0],Il)){var O=arguments[0];return this.createPolygon(this.createLinearRing(O))}if(arguments[0]instanceof Array){var J=arguments[0];return this.createPolygon(this.createLinearRing(J))}if(arguments[0]instanceof Ec){var ot=arguments[0];return this.createPolygon(ot,null)}}else if(2===arguments.length){return new vc(arguments[0],arguments[1],this)}},rh.prototype.getSRID=function(){return this._SRID},rh.prototype.createGeometryCollection=function(){return 0===arguments.length?new ac(null,this):1===arguments.length?new ac(arguments[0],this):void 0},rh.prototype.createGeometry=function(O){return new ih(this).edit(O,{edit:function(){if(2===arguments.length){var O=arguments[0];return this._coordinateSequenceFactory.create(O)}}})},rh.prototype.getPrecisionModel=function(){return this._precisionModel},rh.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var O=arguments[0];return this.createLinearRing(null!==O?this.getCoordinateSequenceFactory().create(O):null)}if(gl(arguments[0],Il))return new Ec(arguments[0],this)}},rh.prototype.createMultiPolygon=function(){return 0===arguments.length?new Ac(null,this):1===arguments.length?new Ac(arguments[0],this):void 0},rh.prototype.createMultiPoint=function(){if(0===arguments.length)return new xc(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new xc(arguments[0],this);if(arguments[0]instanceof Array){var O=arguments[0];return this.createMultiPoint(null!==O?this.getCoordinateSequenceFactory().create(O):null)}if(gl(arguments[0],Il)){var J=arguments[0];if(null===J)return this.createMultiPoint(new Array(0).fill(null));for(var ot=new Array(J.size()).fill(null),st=0;st<J.size();st++){var at=this.getCoordinateSequenceFactory().create(1,J.getDimension());Jc.copy(J,st,at,0,1),ot[st]=this.createPoint(at)}return this.createMultiPoint(ot)}}},rh.prototype.interfaces_=function(){return[al]},rh.prototype.getClass=function(){return rh},rh.toMultiPolygonArray=function(O){var J=new Array(O.size()).fill(null);return O.toArray(J)},rh.toGeometryArray=function(O){if(null===O)return null;var J=new Array(O.size()).fill(null);return O.toArray(J)},rh.getDefaultCoordinateSequenceFactory=function(){return hh.instance()},rh.toMultiLineStringArray=function(O){var J=new Array(O.size()).fill(null);return O.toArray(J)},rh.toLineStringArray=function(O){var J=new Array(O.size()).fill(null);return O.toArray(J)},rh.toMultiPointArray=function(O){var J=new Array(O.size()).fill(null);return O.toArray(J)},rh.toLinearRingArray=function(O){var J=new Array(O.size()).fill(null);return O.toArray(J)},rh.toPointArray=function(O){var J=new Array(O.size()).fill(null);return O.toArray(J)},rh.toPolygonArray=function(O){var J=new Array(O.size()).fill(null);return O.toArray(J)},rh.createPointFromInternalCoord=function(O,J){return J.getPrecisionModel().makePrecise(O),J.getFactory().createPoint(O)},oh.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(rh,oh);var ch=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Eh=function(O){this.geometryFactory=O||new rh};Eh.prototype.read=function(O){var J,ot=(J="string"==typeof O?JSON.parse(O):O).type;if(!ph[ot])throw new Error("Unknown GeoJSON type: "+J.type);return-1!==ch.indexOf(ot)?ph[ot].apply(this,[J.coordinates]):"GeometryCollection"===ot?ph[ot].apply(this,[J.geometries]):ph[ot].apply(this,[J])},Eh.prototype.write=function(O){var J=O.getGeometryType();if(!fh[J])throw new Error("Geometry is not supported");return fh[J].apply(this,[O])};var ph={Feature:function(O){var J={};for(var ot in O)J[ot]=O[ot];if(O.geometry){var st=O.geometry.type;if(!ph[st])throw new Error("Unknown GeoJSON type: "+O.type);J.geometry=this.read(O.geometry)}return O.bbox&&(J.bbox=ph.bbox.apply(this,[O.bbox])),J},FeatureCollection:function(O){var J={};if(O.features){J.features=[];for(var ot=0;ot<O.features.length;++ot)J.features.push(this.read(O.features[ot]))}return O.bbox&&(J.bbox=this.parse.bbox.apply(this,[O.bbox])),J},coordinates:function(O){for(var J=[],ot=0;ot<O.length;++ot){var st=O[ot];J.push(new Wu(st[0],st[1]))}return J},bbox:function(O){return this.geometryFactory.createLinearRing([new Wu(O[0],O[1]),new Wu(O[2],O[1]),new Wu(O[2],O[3]),new Wu(O[0],O[3]),new Wu(O[0],O[1])])},Point:function(O){var J=new Wu(O[0],O[1]);return this.geometryFactory.createPoint(J)},MultiPoint:function(O){for(var J=[],ot=0;ot<O.length;++ot)J.push(ph.Point.apply(this,[O[ot]]));return this.geometryFactory.createMultiPoint(J)},LineString:function(O){var J=ph.coordinates.apply(this,[O]);return this.geometryFactory.createLineString(J)},MultiLineString:function(O){for(var J=[],ot=0;ot<O.length;++ot)J.push(ph.LineString.apply(this,[O[ot]]));return this.geometryFactory.createMultiLineString(J)},Polygon:function(O){for(var J=ph.coordinates.apply(this,[O[0]]),ot=this.geometryFactory.createLinearRing(J),st=[],at=1;at<O.length;++at){var ut=O[at],ct=ph.coordinates.apply(this,[ut]),ht=this.geometryFactory.createLinearRing(ct);st.push(ht)}return this.geometryFactory.createPolygon(ot,st)},MultiPolygon:function(O){for(var J=[],ot=0;ot<O.length;++ot){var st=O[ot];J.push(ph.Polygon.apply(this,[st]))}return this.geometryFactory.createMultiPolygon(J)},GeometryCollection:function(O){for(var J=[],ot=0;ot<O.length;++ot){var st=O[ot];J.push(this.read(st))}return this.geometryFactory.createGeometryCollection(J)}},fh={coordinate:function(O){return[O.x,O.y]},Point:function(O){return{type:"Point",coordinates:fh.coordinate.apply(this,[O.getCoordinate()])}},MultiPoint:function(O){for(var J=[],ot=0;ot<O._geometries.length;++ot){var st=O._geometries[ot],at=fh.Point.apply(this,[st]);J.push(at.coordinates)}return{type:"MultiPoint",coordinates:J}},LineString:function(O){for(var J=[],ot=O.getCoordinates(),st=0;st<ot.length;++st){var at=ot[st];J.push(fh.coordinate.apply(this,[at]))}return{type:"LineString",coordinates:J}},MultiLineString:function(O){for(var J=[],ot=0;ot<O._geometries.length;++ot){var st=O._geometries[ot],at=fh.LineString.apply(this,[st]);J.push(at.coordinates)}return{type:"MultiLineString",coordinates:J}},Polygon:function(O){var J=[],ot=fh.LineString.apply(this,[O._shell]);J.push(ot.coordinates);for(var st=0;st<O._holes.length;++st){var at=O._holes[st],ut=fh.LineString.apply(this,[at]);J.push(ut.coordinates)}return{type:"Polygon",coordinates:J}},MultiPolygon:function(O){for(var J=[],ot=0;ot<O._geometries.length;++ot){var st=O._geometries[ot],at=fh.Polygon.apply(this,[st]);J.push(at.coordinates)}return{type:"MultiPolygon",coordinates:J}},GeometryCollection:function(O){for(var J=[],ot=0;ot<O._geometries.length;++ot){var st=O._geometries[ot],at=st.getGeometryType();J.push(fh[at].apply(this,[st]))}return{type:"GeometryCollection",geometries:J}}},Ih=function(O){this.geometryFactory=O||new rh,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Eh(this.geometryFactory)};Ih.prototype.read=function(O){var J=this.parser.read(O);return this.precisionModel.getType()===Zc.FIXED&&this.reducePrecision(J),J},Ih.prototype.reducePrecision=function(O){var J,ot;if(O.coordinate)this.precisionModel.makePrecise(O.coordinate);else if(O.points)for(J=0,ot=O.points.length;J<ot;J++)this.precisionModel.makePrecise(O.points[J]);else if(O.geometries)for(J=0,ot=O.geometries.length;J<ot;J++)this.reducePrecision(O.geometries[J])};var Nh=function(){this.parser=new Eh(this.geometryFactory)};Nh.prototype.write=function(O){return this.parser.write(O)};var Sh=function(){},gh={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Ph(O){this.message=O||""}function Mh(){this.array_=[]}Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh},Sh.opposite=function(O){return O===Sh.LEFT?Sh.RIGHT:O===Sh.RIGHT?Sh.LEFT:O},gh.ON.get=function(){return 0},gh.LEFT.get=function(){return 1},gh.RIGHT.get=function(){return 2},Object.defineProperties(Sh,gh),Ph.prototype=new Error,Ph.prototype.name="EmptyStackException",Mh.prototype=new Al,Mh.prototype.add=function(O){return this.array_.push(O),!0},Mh.prototype.get=function(O){if(O<0||O>=this.size())throw new Error;return this.array_[O]},Mh.prototype.push=function(O){return this.array_.push(O),O},Mh.prototype.pop=function(O){if(0===this.array_.length)throw new Ph;return this.array_.pop()},Mh.prototype.peek=function(){if(0===this.array_.length)throw new Ph;return this.array_[this.array_.length-1]},Mh.prototype.empty=function(){return 0===this.array_.length},Mh.prototype.isEmpty=function(){return this.empty()},Mh.prototype.search=function(O){return this.array_.indexOf(O)},Mh.prototype.size=function(){return this.array_.length},Mh.prototype.toArray=function(){for(var O=[],J=0,ot=this.array_.length;J<ot;J++)O.push(this.array_[J]);return O};var Lh=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Lh.prototype.getCoordinate=function(){return this._minCoord},Lh.prototype.getRightmostSide=function(O,J){var ot=this.getRightmostSideOfSegment(O,J);return ot<0&&(ot=this.getRightmostSideOfSegment(O,J-1)),ot<0&&(this._minCoord=null,this.checkForRightmostCoordinate(O)),ot},Lh.prototype.findRightmostEdgeAtVertex=function(){var O=this._minDe.getEdge().getCoordinates();ql.isTrue(this._minIndex>0&&this._minIndex<O.length,"rightmost point expected to be interior vertex of edge");var J=O[this._minIndex-1],ot=O[this._minIndex+1],st=Xl.computeOrientation(this._minCoord,ot,J),at=!1;(J.y<this._minCoord.y&&ot.y<this._minCoord.y&&st===Xl.COUNTERCLOCKWISE||J.y>this._minCoord.y&&ot.y>this._minCoord.y&&st===Xl.CLOCKWISE)&&(at=!0),at&&(this._minIndex=this._minIndex-1)},Lh.prototype.getRightmostSideOfSegment=function(O,J){var ot=O.getEdge().getCoordinates();if(J<0||J+1>=ot.length)return-1;if(ot[J].y===ot[J+1].y)return-1;var st=Sh.LEFT;return ot[J].y<ot[J+1].y&&(st=Sh.RIGHT),st},Lh.prototype.getEdge=function(){return this._orientedDe},Lh.prototype.checkForRightmostCoordinate=function(O){for(var J=this,ot=O.getEdge().getCoordinates(),st=0;st<ot.length-1;st++)(null===J._minCoord||ot[st].x>J._minCoord.x)&&(J._minDe=O,J._minIndex=st,J._minCoord=ot[st])},Lh.prototype.findRightmostEdgeAtNode=function(){var O=this._minDe.getNode().getEdges();this._minDe=O.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Lh.prototype.findEdge=function(O){for(var J=O.iterator();J.hasNext();){var ot=J.next();ot.isForward()&&this.checkForRightmostCoordinate(ot)}ql.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Sh.LEFT&&(this._orientedDe=this._minDe.getSym())},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh};var dh=function(O){function e(J,ot){O.call(this,e.msgWithCoord(J,ot)),this.pt=ot?new Wu(ot):null,this.name="TopologyException"}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(O,J){return J?O:O+" [ "+J+" ]"},e}(wl),Rh=function(){this.array_=[]};Rh.prototype.addLast=function(O){this.array_.push(O)},Rh.prototype.removeFirst=function(){return this.array_.shift()},Rh.prototype.isEmpty=function(){return 0===this.array_.length};var Th=function(){this._finder=null,this._dirEdgeList=new Dl,this._nodes=new Dl,this._rightMostCoord=null,this._env=null,this._finder=new Lh};Th.prototype.clearVisitedEdges=function(){for(var O=this._dirEdgeList.iterator();O.hasNext();)O.next().setVisited(!1)},Th.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Th.prototype.computeNodeDepth=function(O){for(var J=null,ot=O.getEdges().iterator();ot.hasNext();){var st=ot.next();if(st.isVisited()||st.getSym().isVisited()){J=st;break}}if(null===J)throw new dh("unable to find edge to compute depths at "+O.getCoordinate());O.getEdges().computeDepths(J);for(var at=O.getEdges().iterator();at.hasNext();){var ut=at.next();ut.setVisited(!0),this.copySymDepths(ut)}},Th.prototype.computeDepth=function(O){this.clearVisitedEdges();var J=this._finder.getEdge();J.setEdgeDepths(Sh.RIGHT,O),this.copySymDepths(J),this.computeDepths(J)},Th.prototype.create=function(O){this.addReachable(O),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Th.prototype.findResultEdges=function(){for(var O=this._dirEdgeList.iterator();O.hasNext();){var J=O.next();J.getDepth(Sh.RIGHT)>=1&&J.getDepth(Sh.LEFT)<=0&&!J.isInteriorAreaEdge()&&J.setInResult(!0)}},Th.prototype.computeDepths=function(O){var J=new Yl,ot=new Rh,st=O.getNode();for(ot.addLast(st),J.add(st),O.setVisited(!0);!ot.isEmpty();){var at=ot.removeFirst();J.add(at),this.computeNodeDepth(at);for(var ut=at.getEdges().iterator();ut.hasNext();){var ct=ut.next().getSym();if(!ct.isVisited()){var ht=ct.getNode();J.contains(ht)||(ot.addLast(ht),J.add(ht))}}}},Th.prototype.compareTo=function(O){var J=O;return this._rightMostCoord.x<J._rightMostCoord.x?-1:this._rightMostCoord.x>J._rightMostCoord.x?1:0},Th.prototype.getEnvelope=function(){if(null===this._env){for(var O=new ll,J=this._dirEdgeList.iterator();J.hasNext();)for(var ot=J.next().getEdge().getCoordinates(),st=0;st<ot.length-1;st++)O.expandToInclude(ot[st]);this._env=O}return this._env},Th.prototype.addReachable=function(O){var J=new Mh;for(J.add(O);!J.empty();){var ot=J.pop();this.add(ot,J)}},Th.prototype.copySymDepths=function(O){var J=O.getSym();J.setDepth(Sh.LEFT,O.getDepth(Sh.RIGHT)),J.setDepth(Sh.RIGHT,O.getDepth(Sh.LEFT))},Th.prototype.add=function(O,J){O.setVisited(!0),this._nodes.add(O);for(var ot=O.getEdges().iterator();ot.hasNext();){var st=ot.next();this._dirEdgeList.add(st);var at=st.getSym().getNode();at.isVisited()||J.push(at)}},Th.prototype.getNodes=function(){return this._nodes},Th.prototype.getDirectedEdges=function(){return this._dirEdgeList},Th.prototype.interfaces_=function(){return[il]},Th.prototype.getClass=function(){return Th};var yh=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var O=arguments[0];this.init(O.length)}else if(Number.isInteger(arguments[0])){var J=arguments[0];this.init(1),this.location[Sh.ON]=J}else if(arguments[0]instanceof t){var ot=arguments[0];if(this.init(ot.location.length),null!==ot)for(var st=0;st<this.location.length;st++)this.location[st]=ot.location[st]}}else if(3===arguments.length){var at=arguments[0],ut=arguments[1],ct=arguments[2];this.init(3),this.location[Sh.ON]=at,this.location[Sh.LEFT]=ut,this.location[Sh.RIGHT]=ct}};yh.prototype.setAllLocations=function(O){for(var J=0;J<this.location.length;J++)this.location[J]=O},yh.prototype.isNull=function(){for(var O=0;O<this.location.length;O++)if(this.location[O]!==pl.NONE)return!1;return!0},yh.prototype.setAllLocationsIfNull=function(O){for(var J=0;J<this.location.length;J++)this.location[J]===pl.NONE&&(this.location[J]=O)},yh.prototype.isLine=function(){return 1===this.location.length},yh.prototype.merge=function(O){if(O.location.length>this.location.length){var J=new Array(3).fill(null);J[Sh.ON]=this.location[Sh.ON],J[Sh.LEFT]=pl.NONE,J[Sh.RIGHT]=pl.NONE,this.location=J}for(var ot=0;ot<this.location.length;ot++)this.location[ot]===pl.NONE&&ot<O.location.length&&(this.location[ot]=O.location[ot])},yh.prototype.getLocations=function(){return this.location},yh.prototype.flip=function(){if(this.location.length<=1)return null;var O=this.location[Sh.LEFT];this.location[Sh.LEFT]=this.location[Sh.RIGHT],this.location[Sh.RIGHT]=O},yh.prototype.toString=function(){var O=new vl;return this.location.length>1&&O.append(pl.toLocationSymbol(this.location[Sh.LEFT])),O.append(pl.toLocationSymbol(this.location[Sh.ON])),this.location.length>1&&O.append(pl.toLocationSymbol(this.location[Sh.RIGHT])),O.toString()},yh.prototype.setLocations=function(O,J,ot){this.location[Sh.ON]=O,this.location[Sh.LEFT]=J,this.location[Sh.RIGHT]=ot},yh.prototype.get=function(O){return O<this.location.length?this.location[O]:pl.NONE},yh.prototype.isArea=function(){return this.location.length>1},yh.prototype.isAnyNull=function(){for(var O=0;O<this.location.length;O++)if(this.location[O]===pl.NONE)return!0;return!1},yh.prototype.setLocation=function(){if(1===arguments.length){var O=arguments[0];this.setLocation(Sh.ON,O)}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];this.location[J]=ot}},yh.prototype.init=function(O){this.location=new Array(O).fill(null),this.setAllLocations(pl.NONE)},yh.prototype.isEqualOnSide=function(O,J){return this.location[J]===O.location[J]},yh.prototype.allPositionsEqual=function(O){for(var J=0;J<this.location.length;J++)if(this.location[J]!==O)return!1;return!0},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var vh=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var O=arguments[0];this.elt[0]=new yh(O),this.elt[1]=new yh(O)}else if(arguments[0]instanceof t){var J=arguments[0];this.elt[0]=new yh(J.elt[0]),this.elt[1]=new yh(J.elt[1])}}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];this.elt[0]=new yh(pl.NONE),this.elt[1]=new yh(pl.NONE),this.elt[ot].setLocation(st)}else if(3===arguments.length){var at=arguments[0],ut=arguments[1],ct=arguments[2];this.elt[0]=new yh(at,ut,ct),this.elt[1]=new yh(at,ut,ct)}else if(4===arguments.length){var ht=arguments[0],pt=arguments[1],mt=arguments[2],xt=arguments[3];this.elt[0]=new yh(pl.NONE,pl.NONE,pl.NONE),this.elt[1]=new yh(pl.NONE,pl.NONE,pl.NONE),this.elt[ht].setLocations(pt,mt,xt)}};vh.prototype.getGeometryCount=function(){var O=0;return this.elt[0].isNull()||O++,this.elt[1].isNull()||O++,O},vh.prototype.setAllLocations=function(O,J){this.elt[O].setAllLocations(J)},vh.prototype.isNull=function(O){return this.elt[O].isNull()},vh.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var O=arguments[0];this.setAllLocationsIfNull(0,O),this.setAllLocationsIfNull(1,O)}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];this.elt[J].setAllLocationsIfNull(ot)}},vh.prototype.isLine=function(O){return this.elt[O].isLine()},vh.prototype.merge=function(O){for(var J=this,ot=0;ot<2;ot++)null===J.elt[ot]&&null!==O.elt[ot]?J.elt[ot]=new yh(O.elt[ot]):J.elt[ot].merge(O.elt[ot])},vh.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},vh.prototype.getLocation=function(){if(1===arguments.length){var O=arguments[0];return this.elt[O].get(Sh.ON)}if(2===arguments.length){var J=arguments[0],ot=arguments[1];return this.elt[J].get(ot)}},vh.prototype.toString=function(){var O=new vl;return null!==this.elt[0]&&(O.append("A:"),O.append(this.elt[0].toString())),null!==this.elt[1]&&(O.append(" B:"),O.append(this.elt[1].toString())),O.toString()},vh.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var O=arguments[0];return this.elt[O].isArea()}},vh.prototype.isAnyNull=function(O){return this.elt[O].isAnyNull()},vh.prototype.setLocation=function(){if(2===arguments.length){var O=arguments[0],J=arguments[1];this.elt[O].setLocation(Sh.ON,J)}else if(3===arguments.length){var ot=arguments[0],st=arguments[1],at=arguments[2];this.elt[ot].setLocation(st,at)}},vh.prototype.isEqualOnSide=function(O,J){return this.elt[0].isEqualOnSide(O.elt[0],J)&&this.elt[1].isEqualOnSide(O.elt[1],J)},vh.prototype.allPositionsEqual=function(O,J){return this.elt[O].allPositionsEqual(J)},vh.prototype.toLine=function(O){this.elt[O].isArea()&&(this.elt[O]=new yh(this.elt[O].location[0]))},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh},vh.toLineLabel=function(O){for(var J=new vh(pl.NONE),ot=0;ot<2;ot++)J.setLocation(ot,O.getLocation(ot));return J};var Fh=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Dl,this._pts=new Dl,this._label=new vh(pl.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Dl,this._geometryFactory=null;var O=arguments[0],J=arguments[1];this._geometryFactory=J,this.computePoints(O),this.computeRing()};Fh.prototype.computeRing=function(){if(null!==this._ring)return null;for(var O=new Array(this._pts.size()).fill(null),J=0;J<this._pts.size();J++)O[J]=this._pts.get(J);this._ring=this._geometryFactory.createLinearRing(O),this._isHole=Xl.isCCW(this._ring.getCoordinates())},Fh.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Fh.prototype.computePoints=function(O){var J=this;this._startDe=O;var ot=O,st=!0;do{if(null===ot)throw new dh("Found null DirectedEdge");if(ot.getEdgeRing()===J)throw new dh("Directed Edge visited twice during ring-building at "+ot.getCoordinate());J._edges.add(ot);var at=ot.getLabel();ql.isTrue(at.isArea()),J.mergeLabel(at),J.addPoints(ot.getEdge(),ot.isForward(),st),st=!1,J.setEdgeRing(ot,J),ot=J.getNext(ot)}while(ot!==this._startDe)},Fh.prototype.getLinearRing=function(){return this._ring},Fh.prototype.getCoordinate=function(O){return this._pts.get(O)},Fh.prototype.computeMaxNodeDegree=function(){var O=this;this._maxNodeDegree=0;var J=this._startDe;do{var ot=J.getNode().getEdges().getOutgoingDegree(O);ot>O._maxNodeDegree&&(O._maxNodeDegree=ot),J=O.getNext(J)}while(J!==this._startDe);this._maxNodeDegree*=2},Fh.prototype.addPoints=function(O,J,ot){var st=O.getCoordinates();if(J){var at=1;ot&&(at=0);for(var ut=at;ut<st.length;ut++)this._pts.add(st[ut])}else{var ct=st.length-2;ot&&(ct=st.length-1);for(var ht=ct;ht>=0;ht--)this._pts.add(st[ht])}},Fh.prototype.isHole=function(){return this._isHole},Fh.prototype.setInResult=function(){var O=this._startDe;do{O.getEdge().setInResult(!0),O=O.getNext()}while(O!==this._startDe)},Fh.prototype.containsPoint=function(O){var J=this.getLinearRing();if(!J.getEnvelopeInternal().contains(O))return!1;if(!Xl.isPointInRing(O,J.getCoordinates()))return!1;for(var ot=this._holes.iterator();ot.hasNext();)if(ot.next().containsPoint(O))return!1;return!0},Fh.prototype.addHole=function(O){this._holes.add(O)},Fh.prototype.isShell=function(){return null===this._shell},Fh.prototype.getLabel=function(){return this._label},Fh.prototype.getEdges=function(){return this._edges},Fh.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Fh.prototype.getShell=function(){return this._shell},Fh.prototype.mergeLabel=function(){if(1===arguments.length){var O=arguments[0];this.mergeLabel(O,0),this.mergeLabel(O,1)}else if(2===arguments.length){var J=arguments[1],ot=arguments[0].getLocation(J,Sh.RIGHT);if(ot===pl.NONE)return null;if(this._label.getLocation(J)===pl.NONE)return this._label.setLocation(J,ot),null}},Fh.prototype.setShell=function(O){this._shell=O,null!==O&&O.addHole(this)},Fh.prototype.toPolygon=function(O){for(var J=new Array(this._holes.size()).fill(null),ot=0;ot<this._holes.size();ot++)J[ot]=this._holes.get(ot).getLinearRing();return O.createPolygon(this.getLinearRing(),J)},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh};var _h=function(O){function e(){var J=arguments[0],ot=arguments[1];O.call(this,J,ot)}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(O,J){O.setMinEdgeRing(J)},e.prototype.getNext=function(O){return O.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fh),mh=function(O){function e(){var J=arguments[0],ot=arguments[1];O.call(this,J,ot)}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var O=new Dl,J=this._startDe;do{if(null===J.getMinEdgeRing()){var ot=new _h(J,this._geometryFactory);O.add(ot)}J=J.getNext()}while(J!==this._startDe);return O},e.prototype.setEdgeRing=function(O,J){O.setEdgeRing(J)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var O=this._startDe;do{O.getNode().getEdges().linkMinimalDirectedEdges(this),O=O.getNext()}while(O!==this._startDe)},e.prototype.getNext=function(O){return O.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fh),qh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var O=arguments[0];this._label=O}};qh.prototype.setVisited=function(O){this._isVisited=O},qh.prototype.setInResult=function(O){this._isInResult=O},qh.prototype.isCovered=function(){return this._isCovered},qh.prototype.isCoveredSet=function(){return this._isCoveredSet},qh.prototype.setLabel=function(O){this._label=O},qh.prototype.getLabel=function(){return this._label},qh.prototype.setCovered=function(O){this._isCovered=O,this._isCoveredSet=!0},qh.prototype.updateIM=function(O){ql.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(O)},qh.prototype.isInResult=function(){return this._isInResult},qh.prototype.isVisited=function(){return this._isVisited},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var xh=function(O){function e(){O.call(this),this._coord=null,this._edges=null;var J=arguments[0],ot=arguments[1];this._coord=J,this._edges=ot,this._label=new vh(0,pl.NONE)}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var O=this.getEdges().getEdges().iterator();O.hasNext();)if(O.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(O){O.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(O){},e.prototype.computeMergedLocation=function(O,J){var ot=pl.NONE;if(ot=this._label.getLocation(J),!O.isNull(J)){var st=O.getLocation(J);ot!==pl.BOUNDARY&&(ot=st)}return ot},e.prototype.setLabel=function(){if(2!==arguments.length)return O.prototype.setLabel.apply(this,arguments);var J=arguments[0],ot=arguments[1];null===this._label?this._label=new vh(J,ot):this._label.setLocation(J,ot)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var O=this;if(arguments[0]instanceof e){var J=arguments[0];this.mergeLabel(J._label)}else if(arguments[0]instanceof vh)for(var ot=arguments[0],st=0;st<2;st++){var at=O.computeMergedLocation(ot,st);O._label.getLocation(st)===pl.NONE&&O._label.setLocation(st,at)}},e.prototype.add=function(O){this._edges.insert(O),O.setNode(this)},e.prototype.setLabelBoundary=function(O){if(null===this._label)return null;var J=pl.NONE;null!==this._label&&(J=this._label.getLocation(O));var ot=null;if(J===pl.BOUNDARY)ot=pl.INTERIOR;else ot=pl.BOUNDARY;this._label.setLocation(O,ot)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qh),zh=function(){this.nodeMap=new Cc,this.nodeFact=null;var O=arguments[0];this.nodeFact=O};zh.prototype.find=function(O){return this.nodeMap.get(O)},zh.prototype.addNode=function(){if(arguments[0]instanceof Wu){var O=arguments[0],J=this.nodeMap.get(O);return null===J&&(J=this.nodeFact.createNode(O),this.nodeMap.put(O,J)),J}if(arguments[0]instanceof xh){var ot=arguments[0],st=this.nodeMap.get(ot.getCoordinate());return null===st?(this.nodeMap.put(ot.getCoordinate(),ot),ot):(st.mergeLabel(ot),st)}},zh.prototype.print=function(O){for(var J=this.iterator();J.hasNext();)J.next().print(O)},zh.prototype.iterator=function(){return this.nodeMap.values().iterator()},zh.prototype.values=function(){return this.nodeMap.values()},zh.prototype.getBoundaryNodes=function(O){for(var J=new Dl,ot=this.iterator();ot.hasNext();){var st=ot.next();st.getLabel().getLocation(O)===pl.BOUNDARY&&J.add(st)}return J},zh.prototype.add=function(O){var J=O.getCoordinate();this.addNode(J).add(O)},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh};var jh=function(){},bh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},jh.isNorthern=function(O){return O===jh.NE||O===jh.NW},jh.isOpposite=function(O,J){return O!==J&&2==(O-J+4)%4},jh.commonHalfPlane=function(O,J){if(O===J)return O;if(2==(O-J+4)%4)return-1;var ot=O<J?O:J;return 0===ot&&3===(O>J?O:J)?3:ot},jh.isInHalfPlane=function(O,J){return J===jh.SE?O===jh.SE||O===jh.SW:O===J||O===J+1},jh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var O=arguments[0],J=arguments[1];if(0===O&&0===J)throw new Xu("Cannot compute the quadrant for point ( "+O+", "+J+" )");return O>=0?J>=0?jh.NE:jh.SE:J>=0?jh.NW:jh.SW}if(arguments[0]instanceof Wu&&arguments[1]instanceof Wu){var ot=arguments[0],st=arguments[1];if(st.x===ot.x&&st.y===ot.y)throw new Xu("Cannot compute the quadrant for two identical points "+ot);return st.x>=ot.x?st.y>=ot.y?jh.NE:jh.SE:st.y>=ot.y?jh.NW:jh.SW}},bh.NE.get=function(){return 0},bh.NW.get=function(){return 1},bh.SW.get=function(){return 2},bh.SE.get=function(){return 3},Object.defineProperties(jh,bh);var Vh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var O=arguments[0];this._edge=O}else if(3===arguments.length){var J=arguments[0],ot=arguments[1],st=arguments[2];this._edge=J,this.init(ot,st),this._label=null}else if(4===arguments.length){var at=arguments[0],ut=arguments[1],ct=arguments[2],ht=arguments[3];this._edge=at,this.init(ut,ct),this._label=ht}};Vh.prototype.compareDirection=function(O){return this._dx===O._dx&&this._dy===O._dy?0:this._quadrant>O._quadrant?1:this._quadrant<O._quadrant?-1:Xl.computeOrientation(O._p0,O._p1,this._p1)},Vh.prototype.getDy=function(){return this._dy},Vh.prototype.getCoordinate=function(){return this._p0},Vh.prototype.setNode=function(O){this._node=O},Vh.prototype.print=function(O){var J=Math.atan2(this._dy,this._dx),ot=this.getClass().getName(),st=ot.lastIndexOf("."),at=ot.substring(st+1);O.print("  "+at+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+J+"   "+this._label)},Vh.prototype.compareTo=function(O){var J=O;return this.compareDirection(J)},Vh.prototype.getDirectedCoordinate=function(){return this._p1},Vh.prototype.getDx=function(){return this._dx},Vh.prototype.getLabel=function(){return this._label},Vh.prototype.getEdge=function(){return this._edge},Vh.prototype.getQuadrant=function(){return this._quadrant},Vh.prototype.getNode=function(){return this._node},Vh.prototype.toString=function(){var O=Math.atan2(this._dy,this._dx),J=this.getClass().getName(),ot=J.lastIndexOf(".");return"  "+J.substring(ot+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+O+"   "+this._label},Vh.prototype.computeLabel=function(O){},Vh.prototype.init=function(O,J){this._p0=O,this._p1=J,this._dx=J.x-O.x,this._dy=J.y-O.y,this._quadrant=jh.quadrant(this._dx,this._dy),ql.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Vh.prototype.interfaces_=function(){return[il]},Vh.prototype.getClass=function(){return Vh};var wh=function(O){function e(){var J=arguments[0],ot=arguments[1];if(O.call(this,J),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=ot,ot)this.init(J.getCoordinate(0),J.getCoordinate(1));else{var st=J.getNumPoints()-1;this.init(J.getCoordinate(st),J.getCoordinate(st-1))}this.computeDirectedLabel()}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(O){return this._depth[O]},e.prototype.setVisited=function(O){this._isVisited=O},e.prototype.computeDirectedLabel=function(){this._label=new vh(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(O,J){if(-999!==this._depth[O]&&this._depth[O]!==J)throw new dh("assigned depths do not match",this.getCoordinate());this._depth[O]=J},e.prototype.isInteriorAreaEdge=function(){for(var O=this,J=!0,ot=0;ot<2;ot++)O._label.isArea(ot)&&O._label.getLocation(ot,Sh.LEFT)===pl.INTERIOR&&O._label.getLocation(ot,Sh.RIGHT)===pl.INTERIOR||(J=!1);return J},e.prototype.setNextMin=function(O){this._nextMin=O},e.prototype.print=function(J){O.prototype.print.call(this,J),J.print(" "+this._depth[Sh.LEFT]+"/"+this._depth[Sh.RIGHT]),J.print(" ("+this.getDepthDelta()+")"),this._isInResult&&J.print(" inResult")},e.prototype.setMinEdgeRing=function(O){this._minEdgeRing=O},e.prototype.isLineEdge=function(){var O=this._label.isLine(0)||this._label.isLine(1),J=!this._label.isArea(0)||this._label.allPositionsEqual(0,pl.EXTERIOR),ot=!this._label.isArea(1)||this._label.allPositionsEqual(1,pl.EXTERIOR);return O&&J&&ot},e.prototype.setEdgeRing=function(O){this._edgeRing=O},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var O=this._edge.getDepthDelta();return this._isForward||(O=-O),O},e.prototype.setInResult=function(O){this._isInResult=O},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(O){this.print(O),O.print(" "),this._isForward?this._edge.print(O):this._edge.printReverse(O)},e.prototype.setSym=function(O){this._sym=O},e.prototype.setVisitedEdge=function(O){this.setVisited(O),this._sym.setVisited(O)},e.prototype.setEdgeDepths=function(O,J){var ot=this.getEdge().getDepthDelta();this._isForward||(ot=-ot);var st=1;O===Sh.LEFT&&(st=-1);var at=Sh.opposite(O),ut=J+ot*st;this.setDepth(O,J),this.setDepth(at,ut)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(O){this._next=O},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(O,J){return O===pl.EXTERIOR&&J===pl.INTERIOR?1:O===pl.INTERIOR&&J===pl.EXTERIOR?-1:0},e}(Vh),Yh=function(){};Yh.prototype.createNode=function(O){return new xh(O,null)},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Hh=function(){if(this._edges=new Dl,this._nodes=null,this._edgeEndList=new Dl,0===arguments.length)this._nodes=new zh(new Yh);else if(1===arguments.length){var O=arguments[0];this._nodes=new zh(O)}};Hh.prototype.printEdges=function(O){O.println("Edges:");for(var J=0;J<this._edges.size();J++){O.println("edge "+J+":");var ot=this._edges.get(J);ot.print(O),ot.eiList.print(O)}},Hh.prototype.find=function(O){return this._nodes.find(O)},Hh.prototype.addNode=function(){if(arguments[0]instanceof xh){var O=arguments[0];return this._nodes.addNode(O)}if(arguments[0]instanceof Wu){var J=arguments[0];return this._nodes.addNode(J)}},Hh.prototype.getNodeIterator=function(){return this._nodes.iterator()},Hh.prototype.linkResultDirectedEdges=function(){for(var O=this._nodes.iterator();O.hasNext();)O.next().getEdges().linkResultDirectedEdges()},Hh.prototype.debugPrintln=function(O){Pl.out.println(O)},Hh.prototype.isBoundaryNode=function(O,J){var ot=this._nodes.find(J);if(null===ot)return!1;var st=ot.getLabel();return null!==st&&st.getLocation(O)===pl.BOUNDARY},Hh.prototype.linkAllDirectedEdges=function(){for(var O=this._nodes.iterator();O.hasNext();)O.next().getEdges().linkAllDirectedEdges()},Hh.prototype.matchInSameDirection=function(O,J,ot,st){return!!O.equals(ot)&&Xl.computeOrientation(O,J,st)===Xl.COLLINEAR&&jh.quadrant(O,J)===jh.quadrant(ot,st)},Hh.prototype.getEdgeEnds=function(){return this._edgeEndList},Hh.prototype.debugPrint=function(O){Pl.out.print(O)},Hh.prototype.getEdgeIterator=function(){return this._edges.iterator()},Hh.prototype.findEdgeInSameDirection=function(O,J){for(var ot=this,st=0;st<this._edges.size();st++){var at=ot._edges.get(st),ut=at.getCoordinates();if(ot.matchInSameDirection(O,J,ut[0],ut[1]))return at;if(ot.matchInSameDirection(O,J,ut[ut.length-1],ut[ut.length-2]))return at}return null},Hh.prototype.insertEdge=function(O){this._edges.add(O)},Hh.prototype.findEdgeEnd=function(O){for(var J=this.getEdgeEnds().iterator();J.hasNext();){var ot=J.next();if(ot.getEdge()===O)return ot}return null},Hh.prototype.addEdges=function(O){for(var J=this,ot=O.iterator();ot.hasNext();){var st=ot.next();J._edges.add(st);var at=new wh(st,!0),ut=new wh(st,!1);at.setSym(ut),ut.setSym(at),J.add(at),J.add(ut)}},Hh.prototype.add=function(O){this._nodes.add(O),this._edgeEndList.add(O)},Hh.prototype.getNodes=function(){return this._nodes.values()},Hh.prototype.findEdge=function(O,J){for(var ot=0;ot<this._edges.size();ot++){var st=this._edges.get(ot),at=st.getCoordinates();if(O.equals(at[0])&&J.equals(at[1]))return st}return null},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh},Hh.linkResultDirectedEdges=function(O){for(var J=O.iterator();J.hasNext();)J.next().getEdges().linkResultDirectedEdges()};var Wh=function(){this._geometryFactory=null,this._shellList=new Dl;var O=arguments[0];this._geometryFactory=O};Wh.prototype.sortShellsAndHoles=function(O,J,ot){for(var st=O.iterator();st.hasNext();){var at=st.next();at.isHole()?ot.add(at):J.add(at)}},Wh.prototype.computePolygons=function(O){for(var J=new Dl,ot=O.iterator();ot.hasNext();){var st=ot.next().toPolygon(this._geometryFactory);J.add(st)}return J},Wh.prototype.placeFreeHoles=function(O,J){for(var ot=J.iterator();ot.hasNext();){var st=ot.next();if(null===st.getShell()){var at=this.findEdgeRingContaining(st,O);if(null===at)throw new dh("unable to assign hole to a shell",st.getCoordinate(0));st.setShell(at)}}},Wh.prototype.buildMinimalEdgeRings=function(O,J,ot){for(var st=new Dl,at=O.iterator();at.hasNext();){var ut=at.next();if(ut.getMaxNodeDegree()>2){ut.linkDirectedEdgesForMinimalEdgeRings();var ct=ut.buildMinimalRings(),ht=this.findShell(ct);null!==ht?(this.placePolygonHoles(ht,ct),J.add(ht)):ot.addAll(ct)}else st.add(ut)}return st},Wh.prototype.containsPoint=function(O){for(var J=this._shellList.iterator();J.hasNext();)if(J.next().containsPoint(O))return!0;return!1},Wh.prototype.buildMaximalEdgeRings=function(O){for(var J=new Dl,ot=O.iterator();ot.hasNext();){var st=ot.next();if(st.isInResult()&&st.getLabel().isArea()&&null===st.getEdgeRing()){var at=new mh(st,this._geometryFactory);J.add(at),at.setInResult()}}return J},Wh.prototype.placePolygonHoles=function(O,J){for(var ot=J.iterator();ot.hasNext();){var st=ot.next();st.isHole()&&st.setShell(O)}},Wh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Wh.prototype.findEdgeRingContaining=function(O,J){for(var ot=O.getLinearRing(),st=ot.getEnvelopeInternal(),at=ot.getCoordinateN(0),ut=null,ct=null,ht=J.iterator();ht.hasNext();){var pt=ht.next(),mt=pt.getLinearRing(),xt=mt.getEnvelopeInternal();null!==ut&&(ct=ut.getLinearRing().getEnvelopeInternal());var Nt=!1;xt.contains(st)&&Xl.isPointInRing(at,mt.getCoordinates())&&(Nt=!0),Nt&&(null===ut||ct.contains(xt))&&(ut=pt)}return ut},Wh.prototype.findShell=function(O){for(var J=0,ot=null,st=O.iterator();st.hasNext();){var at=st.next();at.isHole()||(ot=at,J++)}return ql.isTrue(J<=1,"found two shells in MinimalEdgeRing list"),ot},Wh.prototype.add=function(){if(1===arguments.length){var O=arguments[0];this.add(O.getEdgeEnds(),O.getNodes())}else if(2===arguments.length){var J=arguments[0];Hh.linkResultDirectedEdges(arguments[1]);var ot=this.buildMaximalEdgeRings(J),st=new Dl,at=this.buildMinimalEdgeRings(ot,this._shellList,st);this.sortShellsAndHoles(at,this._shellList,st),this.placeFreeHoles(this._shellList,st)}},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh};var Jh=function(){};Jh.prototype.getBounds=function(){},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Zh=function(){this._bounds=null,this._item=null;var O=arguments[0],J=arguments[1];this._bounds=O,this._item=J};Zh.prototype.getItem=function(){return this._item},Zh.prototype.getBounds=function(){return this._bounds},Zh.prototype.interfaces_=function(){return[Jh,al]},Zh.prototype.getClass=function(){return Zh};var Kh=function(){this._size=null,this._items=null,this._size=0,this._items=new Dl,this._items.add(null)};Kh.prototype.poll=function(){if(this.isEmpty())return null;var O=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),O},Kh.prototype.size=function(){return this._size},Kh.prototype.reorder=function(O){for(var J=this,ot=null,st=this._items.get(O);2*O<=this._size&&((ot=2*O)!==J._size&&J._items.get(ot+1).compareTo(J._items.get(ot))<0&&ot++,J._items.get(ot).compareTo(st)<0);O=ot)J._items.set(O,J._items.get(ot));this._items.set(O,st)},Kh.prototype.clear=function(){this._size=0,this._items.clear()},Kh.prototype.isEmpty=function(){return 0===this._size},Kh.prototype.add=function(O){this._items.add(null),this._size+=1;var J=this._size;for(this._items.set(0,O);O.compareTo(this._items.get(Math.trunc(J/2)))<0;J/=2)this._items.set(J,this._items.get(Math.trunc(J/2)));this._items.set(J,O)},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var Qh=function(){};Qh.prototype.visitItem=function(O){},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var $h=function(){};$h.prototype.insert=function(O,J){},$h.prototype.remove=function(O,J){},$h.prototype.query=function(){},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h};var tp=function(){if(this._childBoundables=new Dl,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var O=arguments[0];this._level=O}},Ch={serialVersionUID:{configurable:!0}};tp.prototype.getLevel=function(){return this._level},tp.prototype.size=function(){return this._childBoundables.size()},tp.prototype.getChildBoundables=function(){return this._childBoundables},tp.prototype.addChildBoundable=function(O){ql.isTrue(null===this._bounds),this._childBoundables.add(O)},tp.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},tp.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},tp.prototype.interfaces_=function(){return[Jh,al]},tp.prototype.getClass=function(){return tp},Ch.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(tp,Ch);var np=function(){};np.reverseOrder=function(){return{compare:function(O,J){return J.compareTo(O)}}},np.min=function(O){return np.sort(O),O.get(0)},np.sort=function(O,J){var ot=O.toArray();J?Rc.sort(ot,J):Rc.sort(ot);for(var st=O.iterator(),at=0,ut=ot.length;at<ut;at++)st.next(),st.set(ot[at])},np.singletonList=function(O){var J=new Dl;return J.add(O),J};var rp=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var O=arguments[0],J=arguments[1],ot=arguments[2];this._boundable1=O,this._boundable2=J,this._itemDistance=ot,this._distance=this.distance()};rp.prototype.expandToQueue=function(O,J){var ot=rp.isComposite(this._boundable1),st=rp.isComposite(this._boundable2);if(ot&&st)return rp.area(this._boundable1)>rp.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,O,J),null):(this.expand(this._boundable2,this._boundable1,O,J),null);if(ot)return this.expand(this._boundable1,this._boundable2,O,J),null;if(st)return this.expand(this._boundable2,this._boundable1,O,J),null;throw new Xu("neither boundable is composite")},rp.prototype.isLeaves=function(){return!(rp.isComposite(this._boundable1)||rp.isComposite(this._boundable2))},rp.prototype.compareTo=function(O){var J=O;return this._distance<J._distance?-1:this._distance>J._distance?1:0},rp.prototype.expand=function(O,J,ot,st){for(var at=O.getChildBoundables().iterator();at.hasNext();){var ut=at.next(),ct=new rp(ut,J,this._itemDistance);ct.getDistance()<st&&ot.add(ct)}},rp.prototype.getBoundable=function(O){return 0===O?this._boundable1:this._boundable2},rp.prototype.getDistance=function(){return this._distance},rp.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},rp.prototype.interfaces_=function(){return[il]},rp.prototype.getClass=function(){return rp},rp.area=function(O){return O.getBounds().getArea()},rp.isComposite=function(O){return O instanceof tp};var Oh=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Dl,this._nodeCapacity=null,0===arguments.length){var O=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=O}else if(1===arguments.length){var J=arguments[0];ql.isTrue(J>1,"Node capacity must be greater than 1"),this._nodeCapacity=J}},Ah={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Oh.prototype.getNodeCapacity=function(){return this._nodeCapacity},Oh.prototype.lastNode=function(O){return O.get(O.size()-1)},Oh.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var O=0,J=arguments[0].getChildBoundables().iterator();J.hasNext();){var ot=J.next();ot instanceof tp?O+=this.size(ot):ot instanceof Zh&&(O+=1)}return O}},Oh.prototype.removeItem=function(O,J){for(var ot=null,st=O.getChildBoundables().iterator();st.hasNext();){var at=st.next();at instanceof Zh&&at.getItem()===J&&(ot=at)}return null!==ot&&(O.getChildBoundables().remove(ot),!0)},Oh.prototype.itemsTree=function(){if(0===arguments.length){this.build();var O=this.itemsTree(this._root);return null===O?new Dl:O}if(1===arguments.length){for(var J=arguments[0],ot=new Dl,st=J.getChildBoundables().iterator();st.hasNext();){var at=st.next();if(at instanceof tp){var ut=this.itemsTree(at);null!==ut&&ot.add(ut)}else at instanceof Zh?ot.add(at.getItem()):ql.shouldNeverReachHere()}return ot.size()<=0?null:ot}},Oh.prototype.insert=function(O,J){ql.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Zh(O,J))},Oh.prototype.boundablesAtLevel=function(){if(1===arguments.length){var O=arguments[0],J=new Dl;return this.boundablesAtLevel(O,this._root,J),J}if(3===arguments.length){var ot=arguments[0],st=arguments[1],at=arguments[2];if(ql.isTrue(ot>-2),st.getLevel()===ot)return at.add(st),null;for(var ut=st.getChildBoundables().iterator();ut.hasNext();){var ct=ut.next();ct instanceof tp?this.boundablesAtLevel(ot,ct,at):(ql.isTrue(ct instanceof Zh),-1===ot&&at.add(ct))}return null}},Oh.prototype.query=function(){var O=this;if(1===arguments.length){var J=arguments[0];this.build();var ot=new Dl;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),J)&&this.query(J,this._root,ot),ot}if(2===arguments.length){var st=arguments[0],at=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),st)&&this.query(st,this._root,at)}else if(3===arguments.length)if(gl(arguments[2],Qh)&&arguments[0]instanceof Object&&arguments[1]instanceof tp)for(var ut=arguments[0],ct=arguments[2],ht=arguments[1].getChildBoundables(),pt=0;pt<ht.size();pt++){var mt=ht.get(pt);O.getIntersectsOp().intersects(mt.getBounds(),ut)&&(mt instanceof tp?O.query(ut,mt,ct):mt instanceof Zh?ct.visitItem(mt.getItem()):ql.shouldNeverReachHere())}else if(gl(arguments[2],Al)&&arguments[0]instanceof Object&&arguments[1]instanceof tp)for(var xt=arguments[0],Nt=arguments[2],St=arguments[1].getChildBoundables(),jt=0;jt<St.size();jt++){var Wt=St.get(jt);O.getIntersectsOp().intersects(Wt.getBounds(),xt)&&(Wt instanceof tp?O.query(xt,Wt,Nt):Wt instanceof Zh?Nt.add(Wt.getItem()):ql.shouldNeverReachHere())}},Oh.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Oh.prototype.getRoot=function(){return this.build(),this._root},Oh.prototype.remove=function(){if(2===arguments.length){var O=arguments[0],J=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),O)&&this.remove(O,this._root,J)}if(3===arguments.length){var ot=arguments[0],st=arguments[1],at=arguments[2],ut=this.removeItem(st,at);if(ut)return!0;for(var ct=null,ht=st.getChildBoundables().iterator();ht.hasNext();){var pt=ht.next();if(this.getIntersectsOp().intersects(pt.getBounds(),ot)&&pt instanceof tp&&(ut=this.remove(ot,pt,at))){ct=pt;break}}return null!==ct&&ct.getChildBoundables().isEmpty()&&st.getChildBoundables().remove(ct),ut}},Oh.prototype.createHigherLevels=function(O,J){ql.isTrue(!O.isEmpty());var ot=this.createParentBoundables(O,J+1);return 1===ot.size()?ot.get(0):this.createHigherLevels(ot,J+1)},Oh.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var O=0,J=arguments[0].getChildBoundables().iterator();J.hasNext();){var ot=J.next();if(ot instanceof tp){var st=this.depth(ot);st>O&&(O=st)}}return O+1}},Oh.prototype.createParentBoundables=function(O,J){var ot=this;ql.isTrue(!O.isEmpty());var st=new Dl;st.add(this.createNode(J));var at=new Dl(O);np.sort(at,this.getComparator());for(var ut=at.iterator();ut.hasNext();){var ct=ut.next();ot.lastNode(st).getChildBoundables().size()===ot.getNodeCapacity()&&st.add(ot.createNode(J)),ot.lastNode(st).addChildBoundable(ct)}return st},Oh.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Oh.prototype.interfaces_=function(){return[al]},Oh.prototype.getClass=function(){return Oh},Oh.compareDoubles=function(O,J){return O>J?1:O<J?-1:0},Ah.IntersectsOp.get=function(){return sp},Ah.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Ah.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Oh,Ah);var sp=function(){},ap=function(){};ap.prototype.distance=function(O,J){},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap};var Dh=function(O){function e(J){J=J||e.DEFAULT_NODE_CAPACITY,O.call(this,J)}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(O,J){ql.isTrue(O.length>0);for(var ot=new Dl,st=0;st<O.length;st++)ot.addAll(this.createParentBoundablesFromVerticalSlice(O[st],J));return ot},e.prototype.createNode=function(O){return new kh(O)},e.prototype.size=function(){return 0===arguments.length?O.prototype.size.call(this):O.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return O.prototype.insert.apply(this,arguments);var J=arguments[0],ot=arguments[1];if(J.isNull())return null;O.prototype.insert.call(this,J,ot)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(O,J){for(var ot=Math.trunc(Math.ceil(O.size()/J)),st=new Array(J).fill(null),at=O.iterator(),ut=0;ut<J;ut++){st[ut]=new Dl;for(var ct=0;at.hasNext()&&ct<ot;){var ht=at.next();st[ut].add(ht),ct++}}return st},e.prototype.query=function(){if(1===arguments.length){var J=arguments[0];return O.prototype.query.call(this,J)}if(2===arguments.length){var ot=arguments[0],st=arguments[1];O.prototype.query.call(this,ot,st)}else if(3===arguments.length)if(gl(arguments[2],Qh)&&arguments[0]instanceof Object&&arguments[1]instanceof tp){var at=arguments[0],ut=arguments[1],ct=arguments[2];O.prototype.query.call(this,at,ut,ct)}else if(gl(arguments[2],Al)&&arguments[0]instanceof Object&&arguments[1]instanceof tp){var ht=arguments[0],pt=arguments[1],mt=arguments[2];O.prototype.query.call(this,ht,pt,mt)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(J,ot){return O.prototype.createParentBoundables.call(this,J,ot)},e.prototype.remove=function(){if(2===arguments.length){var J=arguments[0],ot=arguments[1];return O.prototype.remove.call(this,J,ot)}return O.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?O.prototype.depth.call(this):O.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(O,J){ql.isTrue(!O.isEmpty());var ot=Math.trunc(Math.ceil(O.size()/this.getNodeCapacity())),st=new Dl(O);np.sort(st,e.xComparator);var at=this.verticalSlices(st,Math.trunc(Math.ceil(Math.sqrt(ot))));return this.createParentBoundablesFromVerticalSlices(at,J)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(gl(arguments[0],ap)){var O=arguments[0],J=new rp(this.getRoot(),this.getRoot(),O);return this.nearestNeighbour(J)}if(arguments[0]instanceof rp){var ot=arguments[0];return this.nearestNeighbour(ot,nl.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&gl(arguments[1],ap)){var st=arguments[0],at=arguments[1],ut=new rp(this.getRoot(),st.getRoot(),at);return this.nearestNeighbour(ut)}if(arguments[0]instanceof rp&&"number"==typeof arguments[1]){var ct=arguments[0],ht=arguments[1],pt=null,mt=new Kh;for(mt.add(ct);!mt.isEmpty()&&ht>0;){var xt=mt.poll(),Nt=xt.getDistance();if(Nt>=ht)break;xt.isLeaves()?(ht=Nt,pt=xt):xt.expandToQueue(mt,ht)}return[pt.getBoundable(0).getItem(),pt.getBoundable(1).getItem()]}}else if(3===arguments.length){var St=arguments[2],jt=new Zh(arguments[0],arguments[1]),Wt=new rp(this.getRoot(),jt,St);return this.nearestNeighbour(Wt)[0]}},e.prototype.interfaces_=function(){return[$h,al]},e.prototype.getClass=function(){return e},e.centreX=function(O){return e.avg(O.getMinX(),O.getMaxX())},e.avg=function(O,J){return(O+J)/2},e.centreY=function(O){return e.avg(O.getMinY(),O.getMaxY())},J.STRtreeNode.get=function(){return kh},J.serialVersionUID.get=function(){return 0x39920f7d5f261e0},J.xComparator.get=function(){return{interfaces_:function(){return[sl]},compare:function(J,ot){return O.compareDoubles(e.centreX(J.getBounds()),e.centreX(ot.getBounds()))}}},J.yComparator.get=function(){return{interfaces_:function(){return[sl]},compare:function(J,ot){return O.compareDoubles(e.centreY(J.getBounds()),e.centreY(ot.getBounds()))}}},J.intersectsOp.get=function(){return{interfaces_:function(){return[O.IntersectsOp]},intersects:function(O,J){return O.intersects(J)}}},J.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,J),e}(Oh),kh=function(O){function e(){var J=arguments[0];O.call(this,J)}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var O=null,J=this.getChildBoundables().iterator();J.hasNext();){var ot=J.next();null===O?O=new ll(ot.getBounds()):O.expandToInclude(ot.getBounds())}return O},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tp),cp=function(){};cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},cp.relativeSign=function(O,J){return O<J?-1:O>J?1:0},cp.compare=function(O,J,ot){if(J.equals2D(ot))return 0;var st=cp.relativeSign(J.x,ot.x),at=cp.relativeSign(J.y,ot.y);switch(O){case 0:return cp.compareValue(st,at);case 1:return cp.compareValue(at,st);case 2:return cp.compareValue(at,-st);case 3:return cp.compareValue(-st,at);case 4:return cp.compareValue(-st,-at);case 5:return cp.compareValue(-at,-st);case 6:return cp.compareValue(-at,st);case 7:return cp.compareValue(st,-at)}return ql.shouldNeverReachHere("invalid octant value"),0},cp.compareValue=function(O,J){return O<0?-1:O>0?1:J<0?-1:J>0?1:0};var hp=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var O=arguments[0],J=arguments[1],ot=arguments[2],st=arguments[3];this._segString=O,this.coord=new Wu(J),this.segmentIndex=ot,this._segmentOctant=st,this._isInterior=!J.equals2D(O.getCoordinate(ot))};hp.prototype.getCoordinate=function(){return this.coord},hp.prototype.print=function(O){O.print(this.coord),O.print(" seg # = "+this.segmentIndex)},hp.prototype.compareTo=function(O){var J=O;return this.segmentIndex<J.segmentIndex?-1:this.segmentIndex>J.segmentIndex?1:this.coord.equals2D(J.coord)?0:cp.compare(this._segmentOctant,this.coord,J.coord)},hp.prototype.isEndPoint=function(O){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===O},hp.prototype.isInterior=function(){return this._isInterior},hp.prototype.interfaces_=function(){return[il]},hp.prototype.getClass=function(){return hp};var pp=function(){this._nodeMap=new Cc,this._edge=null;var O=arguments[0];this._edge=O};pp.prototype.getSplitCoordinates=function(){var O=new Gl;this.addEndpoints();for(var J=this.iterator(),ot=J.next();J.hasNext();){var st=J.next();this.addEdgeCoordinates(ot,st,O),ot=st}return O.toCoordinateArray()},pp.prototype.addCollapsedNodes=function(){var O=new Dl;this.findCollapsesFromInsertedNodes(O),this.findCollapsesFromExistingVertices(O);for(var J=O.iterator();J.hasNext();){var ot=J.next().intValue();this.add(this._edge.getCoordinate(ot),ot)}},pp.prototype.print=function(O){O.println("Intersections:");for(var J=this.iterator();J.hasNext();)J.next().print(O)},pp.prototype.findCollapsesFromExistingVertices=function(O){for(var J=0;J<this._edge.size()-2;J++){var ot=this._edge.getCoordinate(J),st=this._edge.getCoordinate(J+2);ot.equals2D(st)&&O.add(new _l(J+1))}},pp.prototype.addEdgeCoordinates=function(O,J,ot){var st=this._edge.getCoordinate(J.segmentIndex),at=J.isInterior()||!J.coord.equals2D(st);ot.add(new Wu(O.coord),!1);for(var ut=O.segmentIndex+1;ut<=J.segmentIndex;ut++)ot.add(this._edge.getCoordinate(ut));at&&ot.add(new Wu(J.coord))},pp.prototype.iterator=function(){return this._nodeMap.values().iterator()},pp.prototype.addSplitEdges=function(O){this.addEndpoints(),this.addCollapsedNodes();for(var J=this.iterator(),ot=J.next();J.hasNext();){var st=J.next(),at=this.createSplitEdge(ot,st);O.add(at),ot=st}},pp.prototype.findCollapseIndex=function(O,J,ot){if(!O.coord.equals2D(J.coord))return!1;var st=J.segmentIndex-O.segmentIndex;return J.isInterior()||st--,1===st&&(ot[0]=O.segmentIndex+1,!0)},pp.prototype.findCollapsesFromInsertedNodes=function(O){for(var J=new Array(1).fill(null),ot=this.iterator(),st=ot.next();ot.hasNext();){var at=ot.next();this.findCollapseIndex(st,at,J)&&O.add(new _l(J[0])),st=at}},pp.prototype.getEdge=function(){return this._edge},pp.prototype.addEndpoints=function(){var O=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(O),O)},pp.prototype.createSplitEdge=function(O,J){var ot=J.segmentIndex-O.segmentIndex+2,st=this._edge.getCoordinate(J.segmentIndex),at=J.isInterior()||!J.coord.equals2D(st);at||ot--;var ut=new Array(ot).fill(null),ct=0;ut[ct++]=new Wu(O.coord);for(var ht=O.segmentIndex+1;ht<=J.segmentIndex;ht++)ut[ct++]=this._edge.getCoordinate(ht);return at&&(ut[ct]=new Wu(J.coord)),new yp(ut,this._edge.getData())},pp.prototype.add=function(O,J){var ot=new hp(this._edge,O,J,this._edge.getSegmentOctant(J)),st=this._nodeMap.get(ot);return null!==st?(ql.isTrue(st.coord.equals2D(O),"Found equal nodes with different coordinates"),st):(this._nodeMap.put(ot,ot),ot)},pp.prototype.checkSplitEdgesCorrectness=function(O){var J=this._edge.getCoordinates(),ot=O.get(0).getCoordinate(0);if(!ot.equals2D(J[0]))throw new wl("bad split edge start point at "+ot);var st=O.get(O.size()-1).getCoordinates(),at=st[st.length-1];if(!at.equals2D(J[J.length-1]))throw new wl("bad split edge end point at "+at)},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var fp=function(){};fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp},fp.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var O=arguments[0],J=arguments[1];if(0===O&&0===J)throw new Xu("Cannot compute the octant for point ( "+O+", "+J+" )");var ot=Math.abs(O),st=Math.abs(J);return O>=0?J>=0?ot>=st?0:1:ot>=st?7:6:J>=0?ot>=st?3:2:ot>=st?4:5}if(arguments[0]instanceof Wu&&arguments[1]instanceof Wu){var at=arguments[0],ut=arguments[1],ct=ut.x-at.x,ht=ut.y-at.y;if(0===ct&&0===ht)throw new Xu("Cannot compute the octant for two identical points "+at);return fp.octant(ct,ht)}};var gp=function(){};gp.prototype.getCoordinates=function(){},gp.prototype.size=function(){},gp.prototype.getCoordinate=function(O){},gp.prototype.isClosed=function(){},gp.prototype.setData=function(O){},gp.prototype.getData=function(){},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp};var dp=function(){};dp.prototype.addIntersection=function(O,J){},dp.prototype.interfaces_=function(){return[gp]},dp.prototype.getClass=function(){return dp};var yp=function(){this._nodeList=new pp(this),this._pts=null,this._data=null;var O=arguments[0],J=arguments[1];this._pts=O,this._data=J};yp.prototype.getCoordinates=function(){return this._pts},yp.prototype.size=function(){return this._pts.length},yp.prototype.getCoordinate=function(O){return this._pts[O]},yp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},yp.prototype.getSegmentOctant=function(O){return O===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(O),this.getCoordinate(O+1))},yp.prototype.setData=function(O){this._data=O},yp.prototype.safeOctant=function(O,J){return O.equals2D(J)?0:fp.octant(O,J)},yp.prototype.getData=function(){return this._data},yp.prototype.addIntersection=function(){if(2===arguments.length){var O=arguments[0],J=arguments[1];this.addIntersectionNode(O,J)}else if(4===arguments.length){var ot=arguments[1],st=arguments[3],at=new Wu(arguments[0].getIntersection(st));this.addIntersection(at,ot)}},yp.prototype.toString=function(){return Fl.toLineString(new lh(this._pts))},yp.prototype.getNodeList=function(){return this._nodeList},yp.prototype.addIntersectionNode=function(O,J){var ot=J,st=ot+1;if(st<this._pts.length){var at=this._pts[st];O.equals2D(at)&&(ot=st)}return this._nodeList.add(O,ot)},yp.prototype.addIntersections=function(O,J,ot){for(var st=0;st<O.getIntersectionNum();st++)this.addIntersection(O,J,ot,st)},yp.prototype.interfaces_=function(){return[dp]},yp.prototype.getClass=function(){return yp},yp.getNodedSubstrings=function(){if(1===arguments.length){var O=arguments[0],J=new Dl;return yp.getNodedSubstrings(O,J),J}if(2===arguments.length)for(var ot=arguments[1],st=arguments[0].iterator();st.hasNext();){st.next().getNodeList().addSplitEdges(ot)}};var vp=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Wu,this.p1=new Wu;else if(1===arguments.length){var O=arguments[0];this.p0=new Wu(O.p0),this.p1=new Wu(O.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var J=arguments[0],ot=arguments[1],st=arguments[2],at=arguments[3];this.p0=new Wu(J,ot),this.p1=new Wu(st,at)}},Gh={serialVersionUID:{configurable:!0}};vp.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},vp.prototype.orientationIndex=function(){if(arguments[0]instanceof vp){var O=arguments[0],J=Xl.orientationIndex(this.p0,this.p1,O.p0),ot=Xl.orientationIndex(this.p0,this.p1,O.p1);return J>=0&&ot>=0||J<=0&&ot<=0?Math.max(J,ot):0}if(arguments[0]instanceof Wu){var st=arguments[0];return Xl.orientationIndex(this.p0,this.p1,st)}},vp.prototype.toGeometry=function(O){return O.createLineString([this.p0,this.p1])},vp.prototype.isVertical=function(){return this.p0.x===this.p1.x},vp.prototype.equals=function(O){if(!(O instanceof vp))return!1;var J=O;return this.p0.equals(J.p0)&&this.p1.equals(J.p1)},vp.prototype.intersection=function(O){var J=new Ml;return J.computeIntersection(this.p0,this.p1,O.p0,O.p1),J.hasIntersection()?J.getIntersection(0):null},vp.prototype.project=function(){if(arguments[0]instanceof Wu){var O=arguments[0];if(O.equals(this.p0)||O.equals(this.p1))return new Wu(O);var J=this.projectionFactor(O),ot=new Wu;return ot.x=this.p0.x+J*(this.p1.x-this.p0.x),ot.y=this.p0.y+J*(this.p1.y-this.p0.y),ot}if(arguments[0]instanceof vp){var st=arguments[0],at=this.projectionFactor(st.p0),ut=this.projectionFactor(st.p1);if(at>=1&&ut>=1)return null;if(at<=0&&ut<=0)return null;var ct=this.project(st.p0);at<0&&(ct=this.p0),at>1&&(ct=this.p1);var ht=this.project(st.p1);return ut<0&&(ht=this.p0),ut>1&&(ht=this.p1),new vp(ct,ht)}},vp.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},vp.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},vp.prototype.getCoordinate=function(O){return 0===O?this.p0:this.p1},vp.prototype.distancePerpendicular=function(O){return Xl.distancePointLinePerpendicular(O,this.p0,this.p1)},vp.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},vp.prototype.midPoint=function(){return vp.midPoint(this.p0,this.p1)},vp.prototype.projectionFactor=function(O){if(O.equals(this.p0))return 0;if(O.equals(this.p1))return 1;var J=this.p1.x-this.p0.x,ot=this.p1.y-this.p0.y,st=J*J+ot*ot;return st<=0?nl.NaN:((O.x-this.p0.x)*J+(O.y-this.p0.y)*ot)/st},vp.prototype.closestPoints=function(O){var J=this.intersection(O);if(null!==J)return[J,J];var ot=new Array(2).fill(null),st=nl.MAX_VALUE,at=null,ut=this.closestPoint(O.p0);st=ut.distance(O.p0),ot[0]=ut,ot[1]=O.p0;var ct=this.closestPoint(O.p1);(at=ct.distance(O.p1))<st&&(st=at,ot[0]=ct,ot[1]=O.p1);var ht=O.closestPoint(this.p0);(at=ht.distance(this.p0))<st&&(st=at,ot[0]=this.p0,ot[1]=ht);var pt=O.closestPoint(this.p1);return(at=pt.distance(this.p1))<st&&(st=at,ot[0]=this.p1,ot[1]=pt),ot},vp.prototype.closestPoint=function(O){var J=this.projectionFactor(O);return J>0&&J<1?this.project(O):this.p0.distance(O)<this.p1.distance(O)?this.p0:this.p1},vp.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},vp.prototype.getLength=function(){return this.p0.distance(this.p1)},vp.prototype.compareTo=function(O){var J=O,ot=this.p0.compareTo(J.p0);return 0!==ot?ot:this.p1.compareTo(J.p1)},vp.prototype.reverse=function(){var O=this.p0;this.p0=this.p1,this.p1=O},vp.prototype.equalsTopo=function(O){return this.p0.equals(O.p0)&&(this.p1.equals(O.p1)||this.p0.equals(O.p1))&&this.p1.equals(O.p0)},vp.prototype.lineIntersection=function(O){try{return ul.intersection(this.p0,this.p1,O.p0,O.p1)}catch(O){if(!(O instanceof rl))throw O}return null},vp.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},vp.prototype.pointAlongOffset=function(O,J){var ot=this.p0.x+O*(this.p1.x-this.p0.x),st=this.p0.y+O*(this.p1.y-this.p0.y),at=this.p1.x-this.p0.x,ut=this.p1.y-this.p0.y,ct=Math.sqrt(at*at+ut*ut),ht=0,pt=0;if(0!==J){if(ct<=0)throw new Error("Cannot compute offset from zero-length line segment");ht=J*at/ct,pt=J*ut/ct}return new Wu(ot-pt,st+ht)},vp.prototype.setCoordinates=function(){if(1===arguments.length){var O=arguments[0];this.setCoordinates(O.p0,O.p1)}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];this.p0.x=J.x,this.p0.y=J.y,this.p1.x=ot.x,this.p1.y=ot.y}},vp.prototype.segmentFraction=function(O){var J=this.projectionFactor(O);return J<0?J=0:(J>1||nl.isNaN(J))&&(J=1),J},vp.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},vp.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},vp.prototype.distance=function(){if(arguments[0]instanceof vp){var O=arguments[0];return Xl.distanceLineLine(this.p0,this.p1,O.p0,O.p1)}if(arguments[0]instanceof Wu){var J=arguments[0];return Xl.distancePointLine(J,this.p0,this.p1)}},vp.prototype.pointAlong=function(O){var J=new Wu;return J.x=this.p0.x+O*(this.p1.x-this.p0.x),J.y=this.p0.y+O*(this.p1.y-this.p0.y),J},vp.prototype.hashCode=function(){var O=nl.doubleToLongBits(this.p0.x);O^=31*nl.doubleToLongBits(this.p0.y);var J=Math.trunc(O)^Math.trunc(O>>32),ot=nl.doubleToLongBits(this.p1.x);return ot^=31*nl.doubleToLongBits(this.p1.y),J^Math.trunc(ot)^Math.trunc(ot>>32)},vp.prototype.interfaces_=function(){return[il,al]},vp.prototype.getClass=function(){return vp},vp.midPoint=function(O,J){return new Wu((O.x+J.x)/2,(O.y+J.y)/2)},Gh.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(vp,Gh);var mp=function(){this.tempEnv1=new ll,this.tempEnv2=new ll,this._overlapSeg1=new vp,this._overlapSeg2=new vp};mp.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var O=arguments[1],J=arguments[2],ot=arguments[3];arguments[0].getLineSegment(O,this._overlapSeg1),J.getLineSegment(ot,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp};var xp=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var O=arguments[0],J=arguments[1],ot=arguments[2],st=arguments[3];this._pts=O,this._start=J,this._end=ot,this._context=st};xp.prototype.getLineSegment=function(O,J){J.p0=this._pts[O],J.p1=this._pts[O+1]},xp.prototype.computeSelect=function(O,J,ot,st){var at=this._pts[J],ut=this._pts[ot];if(st.tempEnv1.init(at,ut),ot-J==1)return st.select(this,J),null;if(!O.intersects(st.tempEnv1))return null;var ct=Math.trunc((J+ot)/2);J<ct&&this.computeSelect(O,J,ct,st),ct<ot&&this.computeSelect(O,ct,ot,st)},xp.prototype.getCoordinates=function(){for(var O=new Array(this._end-this._start+1).fill(null),J=0,ot=this._start;ot<=this._end;ot++)O[J++]=this._pts[ot];return O},xp.prototype.computeOverlaps=function(O,J){this.computeOverlapsInternal(this._start,this._end,O,O._start,O._end,J)},xp.prototype.setId=function(O){this._id=O},xp.prototype.select=function(O,J){this.computeSelect(O,this._start,this._end,J)},xp.prototype.getEnvelope=function(){if(null===this._env){var O=this._pts[this._start],J=this._pts[this._end];this._env=new ll(O,J)}return this._env},xp.prototype.getEndIndex=function(){return this._end},xp.prototype.getStartIndex=function(){return this._start},xp.prototype.getContext=function(){return this._context},xp.prototype.getId=function(){return this._id},xp.prototype.computeOverlapsInternal=function(O,J,ot,st,at,ut){var ct=this._pts[O],ht=this._pts[J],pt=ot._pts[st],mt=ot._pts[at];if(J-O==1&&at-st==1)return ut.overlap(this,O,ot,st),null;if(ut.tempEnv1.init(ct,ht),ut.tempEnv2.init(pt,mt),!ut.tempEnv1.intersects(ut.tempEnv2))return null;var xt=Math.trunc((O+J)/2),Nt=Math.trunc((st+at)/2);O<xt&&(st<Nt&&this.computeOverlapsInternal(O,xt,ot,st,Nt,ut),Nt<at&&this.computeOverlapsInternal(O,xt,ot,Nt,at,ut)),xt<J&&(st<Nt&&this.computeOverlapsInternal(xt,J,ot,st,Nt,ut),Nt<at&&this.computeOverlapsInternal(xt,J,ot,Nt,at,ut))},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp};var Ep=function(){};Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep},Ep.getChainStartIndices=function(O){var J=0,ot=new Dl;ot.add(new _l(J));do{var st=Ep.findChainEnd(O,J);ot.add(new _l(st)),J=st}while(J<O.length-1);return Ep.toIntArray(ot)},Ep.findChainEnd=function(O,J){for(var ot=J;ot<O.length-1&&O[ot].equals2D(O[ot+1]);)ot++;if(ot>=O.length-1)return O.length-1;for(var st=jh.quadrant(O[ot],O[ot+1]),at=J+1;at<O.length&&(O[at-1].equals2D(O[at])||jh.quadrant(O[at-1],O[at])===st);)at++;return at-1},Ep.getChains=function(){if(1===arguments.length)return Ep.getChains(arguments[0],null);if(2===arguments.length){for(var O=arguments[0],J=arguments[1],ot=new Dl,st=Ep.getChainStartIndices(O),at=0;at<st.length-1;at++){var ut=new xp(O,st[at],st[at+1],J);ot.add(ut)}return ot}},Ep.toIntArray=function(O){for(var J=new Array(O.size()).fill(null),ot=0;ot<J.length;ot++)J[ot]=O.get(ot).intValue();return J};var bp=function(){};bp.prototype.computeNodes=function(O){},bp.prototype.getNodedSubstrings=function(){},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp};var wp=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var O=arguments[0];this.setSegmentIntersector(O)}};wp.prototype.setSegmentIntersector=function(O){this._segInt=O},wp.prototype.interfaces_=function(){return[bp]},wp.prototype.getClass=function(){return wp};var Bh=function(O){function e(J){J?O.call(this,J):O.call(this),this._monoChains=new Dl,this._index=new Dh,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e;var J={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return yp.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(O){for(var J=this,ot=Ep.getChains(O.getCoordinates(),O).iterator();ot.hasNext();){var st=ot.next();st.setId(J._idCounter++),J._index.insert(st.getEnvelope(),st),J._monoChains.add(st)}},e.prototype.computeNodes=function(O){this._nodedSegStrings=O;for(var J=O.iterator();J.hasNext();)this.add(J.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var O=this,J=new Uh(this._segInt),ot=this._monoChains.iterator();ot.hasNext();)for(var st=ot.next(),at=O._index.query(st.getEnvelope()).iterator();at.hasNext();){var ut=at.next();if(ut.getId()>st.getId()&&(st.computeOverlaps(ut,J),O._nOverlaps++),O._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},J.SegmentOverlapAction.get=function(){return Uh},Object.defineProperties(e,J),e}(wp),Uh=function(O){function e(){O.call(this),this._si=null;var J=arguments[0];this._si=J}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return O.prototype.overlap.apply(this,arguments);var J=arguments[1],ot=arguments[2],st=arguments[3],at=arguments[0].getContext(),ut=ot.getContext();this._si.processIntersections(at,J,ut,st)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mp),Xh=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var O=arguments[0];this.setQuadrantSegments(O)}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];this.setQuadrantSegments(J),this.setEndCapStyle(ot)}else if(4===arguments.length){var st=arguments[0],at=arguments[1],ut=arguments[2],ct=arguments[3];this.setQuadrantSegments(st),this.setEndCapStyle(at),this.setJoinStyle(ut),this.setMitreLimit(ct)}},ep={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Xh.prototype.getEndCapStyle=function(){return this._endCapStyle},Xh.prototype.isSingleSided=function(){return this._isSingleSided},Xh.prototype.setQuadrantSegments=function(O){this._quadrantSegments=O,0===this._quadrantSegments&&(this._joinStyle=Xh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Xh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),O<=0&&(this._quadrantSegments=1),this._joinStyle!==Xh.JOIN_ROUND&&(this._quadrantSegments=Xh.DEFAULT_QUADRANT_SEGMENTS)},Xh.prototype.getJoinStyle=function(){return this._joinStyle},Xh.prototype.setJoinStyle=function(O){this._joinStyle=O},Xh.prototype.setSimplifyFactor=function(O){this._simplifyFactor=O<0?0:O},Xh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Xh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Xh.prototype.setEndCapStyle=function(O){this._endCapStyle=O},Xh.prototype.getMitreLimit=function(){return this._mitreLimit},Xh.prototype.setMitreLimit=function(O){this._mitreLimit=O},Xh.prototype.setSingleSided=function(O){this._isSingleSided=O},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh},Xh.bufferDistanceError=function(O){var J=Math.PI/2/O;return 1-Math.cos(J/2)},ep.CAP_ROUND.get=function(){return 1},ep.CAP_FLAT.get=function(){return 2},ep.CAP_SQUARE.get=function(){return 3},ep.JOIN_ROUND.get=function(){return 1},ep.JOIN_MITRE.get=function(){return 2},ep.JOIN_BEVEL.get=function(){return 3},ep.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},ep.DEFAULT_MITRE_LIMIT.get=function(){return 5},ep.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Xh,ep);var Pp=function(O){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Xl.COUNTERCLOCKWISE,this._inputLine=O||null},ip={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Pp.prototype.isDeletable=function(O,J,ot,st){var at=this._inputLine[O],ut=this._inputLine[J],ct=this._inputLine[ot];return!!this.isConcave(at,ut,ct)&&!!this.isShallow(at,ut,ct,st)&&this.isShallowSampled(at,ut,O,ot,st)},Pp.prototype.deleteShallowConcavities=function(){for(var O=this,J=1,ot=this.findNextNonDeletedIndex(J),st=this.findNextNonDeletedIndex(ot),at=!1;st<this._inputLine.length;){var ut=!1;O.isDeletable(J,ot,st,O._distanceTol)&&(O._isDeleted[ot]=Pp.DELETE,ut=!0,at=!0),J=ut?st:ot,ot=O.findNextNonDeletedIndex(J),st=O.findNextNonDeletedIndex(ot)}return at},Pp.prototype.isShallowConcavity=function(O,J,ot,st){return Xl.computeOrientation(O,J,ot)===this._angleOrientation&&Xl.distancePointLine(J,O,ot)<st},Pp.prototype.isShallowSampled=function(O,J,ot,st,at){var ut=Math.trunc((st-ot)/Pp.NUM_PTS_TO_CHECK);ut<=0&&(ut=1);for(var ct=ot;ct<st;ct+=ut)if(!this.isShallow(O,J,this._inputLine[ct],at))return!1;return!0},Pp.prototype.isConcave=function(O,J,ot){return Xl.computeOrientation(O,J,ot)===this._angleOrientation},Pp.prototype.simplify=function(O){this._distanceTol=Math.abs(O),O<0&&(this._angleOrientation=Xl.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var J=!1;do{J=this.deleteShallowConcavities()}while(J);return this.collapseLine()},Pp.prototype.findNextNonDeletedIndex=function(O){for(var J=O+1;J<this._inputLine.length&&this._isDeleted[J]===Pp.DELETE;)J++;return J},Pp.prototype.isShallow=function(O,J,ot,st){return Xl.distancePointLine(J,O,ot)<st},Pp.prototype.collapseLine=function(){for(var O=new Gl,J=0;J<this._inputLine.length;J++)this._isDeleted[J]!==Pp.DELETE&&O.add(this._inputLine[J]);return O.toCoordinateArray()},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Pp.simplify=function(O,J){return new Pp(O).simplify(J)},ip.INIT.get=function(){return 0},ip.DELETE.get=function(){return 1},ip.KEEP.get=function(){return 1},ip.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Pp,ip);var Lp=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Dl},op={COORDINATE_ARRAY_TYPE:{configurable:!0}};Lp.prototype.getCoordinates=function(){return this._ptList.toArray(Lp.COORDINATE_ARRAY_TYPE)},Lp.prototype.setPrecisionModel=function(O){this._precisionModel=O},Lp.prototype.addPt=function(O){var J=new Wu(O);if(this._precisionModel.makePrecise(J),this.isRedundant(J))return null;this._ptList.add(J)},Lp.prototype.revere=function(){},Lp.prototype.addPts=function(O,J){if(J)for(var ot=0;ot<O.length;ot++)this.addPt(O[ot]);else for(var st=O.length-1;st>=0;st--)this.addPt(O[st])},Lp.prototype.isRedundant=function(O){if(this._ptList.size()<1)return!1;var J=this._ptList.get(this._ptList.size()-1);return O.distance(J)<this._minimimVertexDistance},Lp.prototype.toString=function(){return(new rh).createLineString(this.getCoordinates()).toString()},Lp.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var O=new Wu(this._ptList.get(0)),J=this._ptList.get(this._ptList.size()-1);if(O.equals(J))return null;this._ptList.add(O)},Lp.prototype.setMinimumVertexDistance=function(O){this._minimimVertexDistance=O},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},op.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Lp,op);var Rp=function(){},up={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Rp.toDegrees=function(O){return 180*O/Math.PI},Rp.normalize=function(O){for(;O>Math.PI;)O-=Rp.PI_TIMES_2;for(;O<=-Math.PI;)O+=Rp.PI_TIMES_2;return O},Rp.angle=function(){if(1===arguments.length){var O=arguments[0];return Math.atan2(O.y,O.x)}if(2===arguments.length){var J=arguments[0],ot=arguments[1],st=ot.x-J.x,at=ot.y-J.y;return Math.atan2(at,st)}},Rp.isAcute=function(O,J,ot){var st=O.x-J.x,at=O.y-J.y;return st*(ot.x-J.x)+at*(ot.y-J.y)>0},Rp.isObtuse=function(O,J,ot){var st=O.x-J.x,at=O.y-J.y;return st*(ot.x-J.x)+at*(ot.y-J.y)<0},Rp.interiorAngle=function(O,J,ot){var st=Rp.angle(J,O),at=Rp.angle(J,ot);return Math.abs(at-st)},Rp.normalizePositive=function(O){if(O<0){for(;O<0;)O+=Rp.PI_TIMES_2;O>=Rp.PI_TIMES_2&&(O=0)}else{for(;O>=Rp.PI_TIMES_2;)O-=Rp.PI_TIMES_2;O<0&&(O=0)}return O},Rp.angleBetween=function(O,J,ot){var st=Rp.angle(J,O),at=Rp.angle(J,ot);return Rp.diff(st,at)},Rp.diff=function(O,J){var ot=null;return(ot=O<J?J-O:O-J)>Math.PI&&(ot=2*Math.PI-ot),ot},Rp.toRadians=function(O){return O*Math.PI/180},Rp.getTurn=function(O,J){var ot=Math.sin(J-O);return ot>0?Rp.COUNTERCLOCKWISE:ot<0?Rp.CLOCKWISE:Rp.NONE},Rp.angleBetweenOriented=function(O,J,ot){var st=Rp.angle(J,O),at=Rp.angle(J,ot)-st;return at<=-Math.PI?at+Rp.PI_TIMES_2:at>Math.PI?at-Rp.PI_TIMES_2:at},up.PI_TIMES_2.get=function(){return 2*Math.PI},up.PI_OVER_2.get=function(){return Math.PI/2},up.PI_OVER_4.get=function(){return Math.PI/4},up.COUNTERCLOCKWISE.get=function(){return Xl.COUNTERCLOCKWISE},up.CLOCKWISE.get=function(){return Xl.CLOCKWISE},up.NONE.get=function(){return Xl.COLLINEAR},Object.defineProperties(Rp,up);var lp=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new vp,this._seg1=new vp,this._offset0=new vp,this._offset1=new vp,this._side=0,this._hasNarrowConcaveAngle=!1;var O=arguments[0],J=arguments[1],ot=arguments[2];this._precisionModel=O,this._bufParams=J,this._li=new Ml,this._filletAngleQuantum=Math.PI/2/J.getQuadrantSegments(),J.getQuadrantSegments()>=8&&J.getJoinStyle()===Xh.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(ot)},_p={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};lp.prototype.addNextSegment=function(O,J){if(this._s0=this._s1,this._s1=this._s2,this._s2=O,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var ot=Xl.computeOrientation(this._s0,this._s1,this._s2),st=ot===Xl.CLOCKWISE&&this._side===Sh.LEFT||ot===Xl.COUNTERCLOCKWISE&&this._side===Sh.RIGHT;0===ot?this.addCollinear(J):st?this.addOutsideTurn(ot,J):this.addInsideTurn(ot,J)},lp.prototype.addLineEndCap=function(O,J){var ot=new vp(O,J),st=new vp;this.computeOffsetSegment(ot,Sh.LEFT,this._distance,st);var at=new vp;this.computeOffsetSegment(ot,Sh.RIGHT,this._distance,at);var ut=J.x-O.x,ct=J.y-O.y,ht=Math.atan2(ct,ut);switch(this._bufParams.getEndCapStyle()){case Xh.CAP_ROUND:this._segList.addPt(st.p1),this.addFilletArc(J,ht+Math.PI/2,ht-Math.PI/2,Xl.CLOCKWISE,this._distance),this._segList.addPt(at.p1);break;case Xh.CAP_FLAT:this._segList.addPt(st.p1),this._segList.addPt(at.p1);break;case Xh.CAP_SQUARE:var pt=new Wu;pt.x=Math.abs(this._distance)*Math.cos(ht),pt.y=Math.abs(this._distance)*Math.sin(ht);var mt=new Wu(st.p1.x+pt.x,st.p1.y+pt.y),xt=new Wu(at.p1.x+pt.x,at.p1.y+pt.y);this._segList.addPt(mt),this._segList.addPt(xt)}},lp.prototype.getCoordinates=function(){return this._segList.getCoordinates()},lp.prototype.addMitreJoin=function(O,J,ot,st){var at=!0,ut=null;try{ut=ul.intersection(J.p0,J.p1,ot.p0,ot.p1),(st<=0?1:ut.distance(O)/Math.abs(st))>this._bufParams.getMitreLimit()&&(at=!1)}catch(O){if(!(O instanceof rl))throw O;ut=new Wu(0,0),at=!1}at?this._segList.addPt(ut):this.addLimitedMitreJoin(J,ot,st,this._bufParams.getMitreLimit())},lp.prototype.addFilletCorner=function(O,J,ot,st,at){var ut=J.x-O.x,ct=J.y-O.y,ht=Math.atan2(ct,ut),pt=ot.x-O.x,mt=ot.y-O.y,xt=Math.atan2(mt,pt);st===Xl.CLOCKWISE?ht<=xt&&(ht+=2*Math.PI):ht>=xt&&(ht-=2*Math.PI),this._segList.addPt(J),this.addFilletArc(O,ht,xt,st,at),this._segList.addPt(ot)},lp.prototype.addOutsideTurn=function(O,J){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*lp.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Xh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Xh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(J&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,O,this._distance),this._segList.addPt(this._offset1.p0))},lp.prototype.createSquare=function(O){this._segList.addPt(new Wu(O.x+this._distance,O.y+this._distance)),this._segList.addPt(new Wu(O.x+this._distance,O.y-this._distance)),this._segList.addPt(new Wu(O.x-this._distance,O.y-this._distance)),this._segList.addPt(new Wu(O.x-this._distance,O.y+this._distance)),this._segList.closeRing()},lp.prototype.addSegments=function(O,J){this._segList.addPts(O,J)},lp.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},lp.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},lp.prototype.initSideSegments=function(O,J,ot){this._s1=O,this._s2=J,this._side=ot,this._seg1.setCoordinates(O,J),this.computeOffsetSegment(this._seg1,ot,this._distance,this._offset1)},lp.prototype.addLimitedMitreJoin=function(O,J,ot,st){var at=this._seg0.p1,ut=Rp.angle(at,this._seg0.p0),ct=Rp.angleBetweenOriented(this._seg0.p0,at,this._seg1.p1)/2,ht=Rp.normalize(ut+ct),pt=Rp.normalize(ht+Math.PI),mt=st*ot,xt=ot-mt*Math.abs(Math.sin(ct)),Nt=at.x+mt*Math.cos(pt),St=at.y+mt*Math.sin(pt),jt=new Wu(Nt,St),Wt=new vp(at,jt),Ht=Wt.pointAlongOffset(1,xt),Zt=Wt.pointAlongOffset(1,-xt);this._side===Sh.LEFT?(this._segList.addPt(Ht),this._segList.addPt(Zt)):(this._segList.addPt(Zt),this._segList.addPt(Ht))},lp.prototype.computeOffsetSegment=function(O,J,ot,st){var at=J===Sh.LEFT?1:-1,ut=O.p1.x-O.p0.x,ct=O.p1.y-O.p0.y,ht=Math.sqrt(ut*ut+ct*ct),pt=at*ot*ut/ht,mt=at*ot*ct/ht;st.p0.x=O.p0.x-mt,st.p0.y=O.p0.y+pt,st.p1.x=O.p1.x-mt,st.p1.y=O.p1.y+pt},lp.prototype.addFilletArc=function(O,J,ot,st,at){var ut=st===Xl.CLOCKWISE?-1:1,ct=Math.abs(J-ot),ht=Math.trunc(ct/this._filletAngleQuantum+.5);if(ht<1)return null;for(var pt=ct/ht,mt=0,xt=new Wu;mt<ct;){var Nt=J+ut*mt;xt.x=O.x+at*Math.cos(Nt),xt.y=O.y+at*Math.sin(Nt),this._segList.addPt(xt),mt+=pt}},lp.prototype.addInsideTurn=function(O,J){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*lp.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var ot=new Wu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(ot);var st=new Wu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(st)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},lp.prototype.createCircle=function(O){var J=new Wu(O.x+this._distance,O.y);this._segList.addPt(J),this.addFilletArc(O,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},lp.prototype.addBevelJoin=function(O,J){this._segList.addPt(O.p1),this._segList.addPt(J.p0)},lp.prototype.init=function(O){this._distance=O,this._maxCurveSegmentError=O*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Lp,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(O*lp.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},lp.prototype.addCollinear=function(O){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Xh.JOIN_BEVEL||this._bufParams.getJoinStyle()===Xh.JOIN_MITRE?(O&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Xl.CLOCKWISE,this._distance))},lp.prototype.closeRing=function(){this._segList.closeRing()},lp.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp},_p.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},_p.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},_p.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},_p.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(lp,_p);var Fp=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var O=arguments[0],J=arguments[1];this._precisionModel=O,this._bufParams=J};Fp.prototype.getOffsetCurve=function(O,J){if(this._distance=J,0===J)return null;var ot=J<0,st=Math.abs(J),at=this.getSegGen(st);O.length<=1?this.computePointCurve(O[0],at):this.computeOffsetCurve(O,ot,at);var ut=at.getCoordinates();return ot&&pc.reverse(ut),ut},Fp.prototype.computeSingleSidedBufferCurve=function(O,J,ot){var st=this.simplifyTolerance(this._distance);if(J){ot.addSegments(O,!0);var at=Pp.simplify(O,-st),ut=at.length-1;ot.initSideSegments(at[ut],at[ut-1],Sh.LEFT),ot.addFirstSegment();for(var ct=ut-2;ct>=0;ct--)ot.addNextSegment(at[ct],!0)}else{ot.addSegments(O,!1);var ht=Pp.simplify(O,st),pt=ht.length-1;ot.initSideSegments(ht[0],ht[1],Sh.LEFT),ot.addFirstSegment();for(var mt=2;mt<=pt;mt++)ot.addNextSegment(ht[mt],!0)}ot.addLastSegment(),ot.closeRing()},Fp.prototype.computeRingBufferCurve=function(O,J,ot){var st=this.simplifyTolerance(this._distance);J===Sh.RIGHT&&(st=-st);var at=Pp.simplify(O,st),ut=at.length-1;ot.initSideSegments(at[ut-1],at[0],J);for(var ct=1;ct<=ut;ct++){var ht=1!==ct;ot.addNextSegment(at[ct],ht)}ot.closeRing()},Fp.prototype.computeLineBufferCurve=function(O,J){var ot=this.simplifyTolerance(this._distance),st=Pp.simplify(O,ot),at=st.length-1;J.initSideSegments(st[0],st[1],Sh.LEFT);for(var ut=2;ut<=at;ut++)J.addNextSegment(st[ut],!0);J.addLastSegment(),J.addLineEndCap(st[at-1],st[at]);var ct=Pp.simplify(O,-ot),ht=ct.length-1;J.initSideSegments(ct[ht],ct[ht-1],Sh.LEFT);for(var pt=ht-2;pt>=0;pt--)J.addNextSegment(ct[pt],!0);J.addLastSegment(),J.addLineEndCap(ct[1],ct[0]),J.closeRing()},Fp.prototype.computePointCurve=function(O,J){switch(this._bufParams.getEndCapStyle()){case Xh.CAP_ROUND:J.createCircle(O);break;case Xh.CAP_SQUARE:J.createSquare(O)}},Fp.prototype.getLineCurve=function(O,J){if(this._distance=J,J<0&&!this._bufParams.isSingleSided())return null;if(0===J)return null;var ot=Math.abs(J),st=this.getSegGen(ot);if(O.length<=1)this.computePointCurve(O[0],st);else if(this._bufParams.isSingleSided()){var at=J<0;this.computeSingleSidedBufferCurve(O,at,st)}else this.computeLineBufferCurve(O,st);return st.getCoordinates()},Fp.prototype.getBufferParameters=function(){return this._bufParams},Fp.prototype.simplifyTolerance=function(O){return O*this._bufParams.getSimplifyFactor()},Fp.prototype.getRingCurve=function(O,J,ot){if(this._distance=ot,O.length<=2)return this.getLineCurve(O,ot);if(0===ot)return Fp.copyCoordinates(O);var st=this.getSegGen(ot);return this.computeRingBufferCurve(O,J,st),st.getCoordinates()},Fp.prototype.computeOffsetCurve=function(O,J,ot){var st=this.simplifyTolerance(this._distance);if(J){var at=Pp.simplify(O,-st),ut=at.length-1;ot.initSideSegments(at[ut],at[ut-1],Sh.LEFT),ot.addFirstSegment();for(var ct=ut-2;ct>=0;ct--)ot.addNextSegment(at[ct],!0)}else{var ht=Pp.simplify(O,st),pt=ht.length-1;ot.initSideSegments(ht[0],ht[1],Sh.LEFT),ot.addFirstSegment();for(var mt=2;mt<=pt;mt++)ot.addNextSegment(ht[mt],!0)}ot.addLastSegment()},Fp.prototype.getSegGen=function(O){return new lp(this._precisionModel,this._bufParams,O)},Fp.prototype.interfaces_=function(){return[]},Fp.prototype.getClass=function(){return Fp},Fp.copyCoordinates=function(O){for(var J=new Array(O.length).fill(null),ot=0;ot<J.length;ot++)J[ot]=new Wu(O[ot]);return J};var kp=function(){this._subgraphs=null,this._seg=new vp,this._cga=new Xl;var O=arguments[0];this._subgraphs=O},Ip={DepthSegment:{configurable:!0}};kp.prototype.findStabbedSegments=function(){var O=this;if(1===arguments.length){for(var J=arguments[0],ot=new Dl,st=this._subgraphs.iterator();st.hasNext();){var at=st.next(),ut=at.getEnvelope();J.y<ut.getMinY()||J.y>ut.getMaxY()||O.findStabbedSegments(J,at.getDirectedEdges(),ot)}return ot}if(3===arguments.length)if(gl(arguments[2],Al)&&arguments[0]instanceof Wu&&arguments[1]instanceof wh)for(var ct=arguments[0],ht=arguments[1],pt=arguments[2],mt=ht.getEdge().getCoordinates(),xt=0;xt<mt.length-1;xt++){if(O._seg.p0=mt[xt],O._seg.p1=mt[xt+1],O._seg.p0.y>O._seg.p1.y&&O._seg.reverse(),!(Math.max(O._seg.p0.x,O._seg.p1.x)<ct.x||O._seg.isHorizontal()||ct.y<O._seg.p0.y||ct.y>O._seg.p1.y||Xl.computeOrientation(O._seg.p0,O._seg.p1,ct)===Xl.RIGHT)){var Nt=ht.getDepth(Sh.LEFT);O._seg.p0.equals(mt[xt])||(Nt=ht.getDepth(Sh.RIGHT));var St=new qp(O._seg,Nt);pt.add(St)}}else if(gl(arguments[2],Al)&&arguments[0]instanceof Wu&&gl(arguments[1],Al))for(var jt=arguments[0],Wt=arguments[2],Ht=arguments[1].iterator();Ht.hasNext();){var Zt=Ht.next();Zt.isForward()&&O.findStabbedSegments(jt,Zt,Wt)}},kp.prototype.getDepth=function(O){var J=this.findStabbedSegments(O);return 0===J.size()?0:np.min(J)._leftDepth},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp},Ip.DepthSegment.get=function(){return qp},Object.defineProperties(kp,Ip);var qp=function(){this._upwardSeg=null,this._leftDepth=null;var O=arguments[0],J=arguments[1];this._upwardSeg=new vp(O),this._leftDepth=J};qp.prototype.compareTo=function(O){var J=O;if(this._upwardSeg.minX()>=J._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=J._upwardSeg.minX())return-1;var ot=this._upwardSeg.orientationIndex(J._upwardSeg);return 0!==ot||0!=(ot=-1*J._upwardSeg.orientationIndex(this._upwardSeg))?ot:this._upwardSeg.compareTo(J._upwardSeg)},qp.prototype.compareX=function(O,J){var ot=O.p0.compareTo(J.p0);return 0!==ot?ot:O.p1.compareTo(J.p1)},qp.prototype.toString=function(){return this._upwardSeg.toString()},qp.prototype.interfaces_=function(){return[il]},qp.prototype.getClass=function(){return qp};var Bp=function(O,J,ot){this.p0=O||null,this.p1=J||null,this.p2=ot||null};Bp.prototype.area=function(){return Bp.area(this.p0,this.p1,this.p2)},Bp.prototype.signedArea=function(){return Bp.signedArea(this.p0,this.p1,this.p2)},Bp.prototype.interpolateZ=function(O){if(null===O)throw new Xu("Supplied point is null.");return Bp.interpolateZ(O,this.p0,this.p1,this.p2)},Bp.prototype.longestSideLength=function(){return Bp.longestSideLength(this.p0,this.p1,this.p2)},Bp.prototype.isAcute=function(){return Bp.isAcute(this.p0,this.p1,this.p2)},Bp.prototype.circumcentre=function(){return Bp.circumcentre(this.p0,this.p1,this.p2)},Bp.prototype.area3D=function(){return Bp.area3D(this.p0,this.p1,this.p2)},Bp.prototype.centroid=function(){return Bp.centroid(this.p0,this.p1,this.p2)},Bp.prototype.inCentre=function(){return Bp.inCentre(this.p0,this.p1,this.p2)},Bp.prototype.interfaces_=function(){return[]},Bp.prototype.getClass=function(){return Bp},Bp.area=function(O,J,ot){return Math.abs(((ot.x-O.x)*(J.y-O.y)-(J.x-O.x)*(ot.y-O.y))/2)},Bp.signedArea=function(O,J,ot){return((ot.x-O.x)*(J.y-O.y)-(J.x-O.x)*(ot.y-O.y))/2},Bp.det=function(O,J,ot,st){return O*st-J*ot},Bp.interpolateZ=function(O,J,ot,st){var at=J.x,ut=J.y,ct=ot.x-at,ht=st.x-at,pt=ot.y-ut,mt=st.y-ut,xt=ct*mt-ht*pt,Nt=O.x-at,St=O.y-ut,jt=(mt*Nt-ht*St)/xt,Wt=(-pt*Nt+ct*St)/xt;return J.z+jt*(ot.z-J.z)+Wt*(st.z-J.z)},Bp.longestSideLength=function(O,J,ot){var st=O.distance(J),at=J.distance(ot),ut=ot.distance(O),ct=st;return at>ct&&(ct=at),ut>ct&&(ct=ut),ct},Bp.isAcute=function(O,J,ot){return!!Rp.isAcute(O,J,ot)&&!!Rp.isAcute(J,ot,O)&&!!Rp.isAcute(ot,O,J)},Bp.circumcentre=function(O,J,ot){var st=ot.x,at=ot.y,ut=O.x-st,ct=O.y-at,ht=J.x-st,pt=J.y-at,mt=2*Bp.det(ut,ct,ht,pt),xt=Bp.det(ct,ut*ut+ct*ct,pt,ht*ht+pt*pt),Nt=Bp.det(ut,ut*ut+ct*ct,ht,ht*ht+pt*pt);return new Wu(st-xt/mt,at+Nt/mt)},Bp.perpendicularBisector=function(O,J){var ot=J.x-O.x,st=J.y-O.y,at=new ul(O.x+ot/2,O.y+st/2,1),ut=new ul(O.x-st+ot/2,O.y+ot+st/2,1);return new ul(at,ut)},Bp.angleBisector=function(O,J,ot){var st=J.distance(O),at=st/(st+J.distance(ot)),ut=ot.x-O.x,ct=ot.y-O.y;return new Wu(O.x+at*ut,O.y+at*ct)},Bp.area3D=function(O,J,ot){var st=J.x-O.x,at=J.y-O.y,ut=J.z-O.z,ct=ot.x-O.x,ht=ot.y-O.y,pt=ot.z-O.z,mt=at*pt-ut*ht,xt=ut*ct-st*pt,Nt=st*ht-at*ct,St=mt*mt+xt*xt+Nt*Nt;return Math.sqrt(St)/2},Bp.centroid=function(O,J,ot){var st=(O.x+J.x+ot.x)/3,at=(O.y+J.y+ot.y)/3;return new Wu(st,at)},Bp.inCentre=function(O,J,ot){var st=J.distance(ot),at=O.distance(ot),ut=O.distance(J),ct=st+at+ut,ht=(st*O.x+at*J.x+ut*ot.x)/ct,pt=(st*O.y+at*J.y+ut*ot.y)/ct;return new Wu(ht,pt)};var zp=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Dl;var O=arguments[0],J=arguments[1],ot=arguments[2];this._inputGeom=O,this._distance=J,this._curveBuilder=ot};zp.prototype.addPoint=function(O){if(this._distance<=0)return null;var J=O.getCoordinates(),ot=this._curveBuilder.getLineCurve(J,this._distance);this.addCurve(ot,pl.EXTERIOR,pl.INTERIOR)},zp.prototype.addPolygon=function(O){var J=this,ot=this._distance,st=Sh.LEFT;this._distance<0&&(ot=-this._distance,st=Sh.RIGHT);var at=O.getExteriorRing(),ut=pc.removeRepeatedPoints(at.getCoordinates());if(this._distance<0&&this.isErodedCompletely(at,this._distance))return null;if(this._distance<=0&&ut.length<3)return null;this.addPolygonRing(ut,ot,st,pl.EXTERIOR,pl.INTERIOR);for(var ct=0;ct<O.getNumInteriorRing();ct++){var ht=O.getInteriorRingN(ct),pt=pc.removeRepeatedPoints(ht.getCoordinates());J._distance>0&&J.isErodedCompletely(ht,-J._distance)||J.addPolygonRing(pt,ot,Sh.opposite(st),pl.INTERIOR,pl.EXTERIOR)}},zp.prototype.isTriangleErodedCompletely=function(O,J){var ot=new Bp(O[0],O[1],O[2]),st=ot.inCentre();return Xl.distancePointLine(st,ot.p0,ot.p1)<Math.abs(J)},zp.prototype.addLineString=function(O){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var J=pc.removeRepeatedPoints(O.getCoordinates()),ot=this._curveBuilder.getLineCurve(J,this._distance);this.addCurve(ot,pl.EXTERIOR,pl.INTERIOR)},zp.prototype.addCurve=function(O,J,ot){if(null===O||O.length<2)return null;var st=new yp(O,new vh(0,pl.BOUNDARY,J,ot));this._curveList.add(st)},zp.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zp.prototype.addPolygonRing=function(O,J,ot,st,at){if(0===J&&O.length<Ec.MINIMUM_VALID_SIZE)return null;var ut=st,ct=at;O.length>=Ec.MINIMUM_VALID_SIZE&&Xl.isCCW(O)&&(ut=at,ct=st,ot=Sh.opposite(ot));var ht=this._curveBuilder.getRingCurve(O,ot,J);this.addCurve(ht,ut,ct)},zp.prototype.add=function(O){if(O.isEmpty())return null;O instanceof vc?this.addPolygon(O):O instanceof hc?this.addLineString(O):O instanceof fc?this.addPoint(O):(O instanceof xc||O instanceof lc||O instanceof Ac||O instanceof ac)&&this.addCollection(O)},zp.prototype.isErodedCompletely=function(O,J){var ot=O.getCoordinates();if(ot.length<4)return J<0;if(4===ot.length)return this.isTriangleErodedCompletely(ot,J);var st=O.getEnvelopeInternal(),at=Math.min(st.getHeight(),st.getWidth());return J<0&&2*Math.abs(J)>at},zp.prototype.addCollection=function(O){for(var J=0;J<O.getNumGeometries();J++){var ot=O.getGeometryN(J);this.add(ot)}},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp};var jp=function(){};jp.prototype.locate=function(O){},jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp};var Up=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var O=arguments[0];this._parent=O,this._atStart=!0,this._index=0,this._max=O.getNumGeometries()};Up.prototype.next=function(){if(this._atStart)return this._atStart=!1,Up.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new uc;var O=this._parent.getGeometryN(this._index++);return O instanceof ac?(this._subcollectionIterator=new Up(O),this._subcollectionIterator.next()):O},Up.prototype.remove=function(){throw new Error(this.getClass().getName())},Up.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Up.prototype.interfaces_=function(){return[sc]},Up.prototype.getClass=function(){return Up},Up.isAtomic=function(O){return!(O instanceof ac)};var Vp=function(){this._geom=null;var O=arguments[0];this._geom=O};Vp.prototype.locate=function(O){return Vp.locate(O,this._geom)},Vp.prototype.interfaces_=function(){return[jp]},Vp.prototype.getClass=function(){return Vp},Vp.isPointInRing=function(O,J){return!!J.getEnvelopeInternal().intersects(O)&&Xl.isPointInRing(O,J.getCoordinates())},Vp.containsPointInPolygon=function(O,J){if(J.isEmpty())return!1;var ot=J.getExteriorRing();if(!Vp.isPointInRing(O,ot))return!1;for(var st=0;st<J.getNumInteriorRing();st++){var at=J.getInteriorRingN(st);if(Vp.isPointInRing(O,at))return!1}return!0},Vp.containsPoint=function(O,J){if(J instanceof vc)return Vp.containsPointInPolygon(O,J);if(J instanceof ac)for(var ot=new Up(J);ot.hasNext();){var st=ot.next();if(st!==J&&Vp.containsPoint(O,st))return!0}return!1},Vp.locate=function(O,J){return J.isEmpty()?pl.EXTERIOR:Vp.containsPoint(O,J)?pl.INTERIOR:pl.EXTERIOR};var Xp=function(){this._edgeMap=new Cc,this._edgeList=null,this._ptInAreaLocation=[pl.NONE,pl.NONE]};Xp.prototype.getNextCW=function(O){this.getEdges();var J=this._edgeList.indexOf(O),ot=J-1;return 0===J&&(ot=this._edgeList.size()-1),this._edgeList.get(ot)},Xp.prototype.propagateSideLabels=function(O){for(var J=pl.NONE,ot=this.iterator();ot.hasNext();){var st=ot.next().getLabel();st.isArea(O)&&st.getLocation(O,Sh.LEFT)!==pl.NONE&&(J=st.getLocation(O,Sh.LEFT))}if(J===pl.NONE)return null;for(var at=J,ut=this.iterator();ut.hasNext();){var ct=ut.next(),ht=ct.getLabel();if(ht.getLocation(O,Sh.ON)===pl.NONE&&ht.setLocation(O,Sh.ON,at),ht.isArea(O)){var pt=ht.getLocation(O,Sh.LEFT),mt=ht.getLocation(O,Sh.RIGHT);if(mt!==pl.NONE){if(mt!==at)throw new dh("side location conflict",ct.getCoordinate());pt===pl.NONE&&ql.shouldNeverReachHere("found single null side (at "+ct.getCoordinate()+")"),at=pt}else ql.isTrue(ht.getLocation(O,Sh.LEFT)===pl.NONE,"found single null side"),ht.setLocation(O,Sh.RIGHT,at),ht.setLocation(O,Sh.LEFT,at)}}},Xp.prototype.getCoordinate=function(){var O=this.iterator();return O.hasNext()?O.next().getCoordinate():null},Xp.prototype.print=function(O){Pl.out.println("EdgeEndStar:   "+this.getCoordinate());for(var J=this.iterator();J.hasNext();)J.next().print(O)},Xp.prototype.isAreaLabelsConsistent=function(O){return this.computeEdgeEndLabels(O.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Xp.prototype.checkAreaLabelsConsistent=function(O){var J=this.getEdges();if(J.size()<=0)return!0;var ot=J.size()-1,st=J.get(ot).getLabel().getLocation(O,Sh.LEFT);ql.isTrue(st!==pl.NONE,"Found unlabelled area edge");for(var at=st,ut=this.iterator();ut.hasNext();){var ct=ut.next().getLabel();ql.isTrue(ct.isArea(O),"Found non-area edge");var ht=ct.getLocation(O,Sh.LEFT),pt=ct.getLocation(O,Sh.RIGHT);if(ht===pt)return!1;if(pt!==at)return!1;at=ht}return!0},Xp.prototype.findIndex=function(O){this.iterator();for(var J=0;J<this._edgeList.size();J++)if(this._edgeList.get(J)===O)return J;return-1},Xp.prototype.iterator=function(){return this.getEdges().iterator()},Xp.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Dl(this._edgeMap.values())),this._edgeList},Xp.prototype.getLocation=function(O,J,ot){return this._ptInAreaLocation[O]===pl.NONE&&(this._ptInAreaLocation[O]=Vp.locate(J,ot[O].getGeometry())),this._ptInAreaLocation[O]},Xp.prototype.toString=function(){var O=new vl;O.append("EdgeEndStar:   "+this.getCoordinate()),O.append("\n");for(var J=this.iterator();J.hasNext();){var ot=J.next();O.append(ot),O.append("\n")}return O.toString()},Xp.prototype.computeEdgeEndLabels=function(O){for(var J=this.iterator();J.hasNext();)J.next().computeLabel(O)},Xp.prototype.computeLabelling=function(O){this.computeEdgeEndLabels(O[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var J=[!1,!1],ot=this.iterator();ot.hasNext();)for(var st=ot.next().getLabel(),at=0;at<2;at++)st.isLine(at)&&st.getLocation(at)===pl.BOUNDARY&&(J[at]=!0);for(var ut=this.iterator();ut.hasNext();)for(var ct=ut.next(),ht=ct.getLabel(),pt=0;pt<2;pt++)if(ht.isAnyNull(pt)){var mt=pl.NONE;if(J[pt])mt=pl.EXTERIOR;else{var xt=ct.getCoordinate();mt=this.getLocation(pt,xt,O)}ht.setAllLocationsIfNull(pt,mt)}},Xp.prototype.getDegree=function(){return this._edgeMap.size()},Xp.prototype.insertEdgeEnd=function(O,J){this._edgeMap.put(O,J),this._edgeList=null},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp};var Np=function(O){function e(){O.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var O=this;this.getResultAreaEdges();for(var J=null,ot=null,st=this._SCANNING_FOR_INCOMING,at=0;at<this._resultAreaEdgeList.size();at++){var ut=O._resultAreaEdgeList.get(at),ct=ut.getSym();if(ut.getLabel().isArea())switch(null===J&&ut.isInResult()&&(J=ut),st){case O._SCANNING_FOR_INCOMING:if(!ct.isInResult())continue;ot=ct,st=O._LINKING_TO_OUTGOING;break;case O._LINKING_TO_OUTGOING:if(!ut.isInResult())continue;ot.setNext(ut),st=O._SCANNING_FOR_INCOMING}}if(st===this._LINKING_TO_OUTGOING){if(null===J)throw new dh("no outgoing dirEdge found",this.getCoordinate());ql.isTrue(J.isInResult(),"unable to link last incoming dirEdge"),ot.setNext(J)}},e.prototype.insert=function(O){var J=O;this.insertEdgeEnd(J,J)},e.prototype.getRightmostEdge=function(){var O=this.getEdges(),J=O.size();if(J<1)return null;var ot=O.get(0);if(1===J)return ot;var st=O.get(J-1),at=ot.getQuadrant(),ut=st.getQuadrant();return jh.isNorthern(at)&&jh.isNorthern(ut)?ot:jh.isNorthern(at)||jh.isNorthern(ut)?0!==ot.getDy()?ot:0!==st.getDy()?st:(ql.shouldNeverReachHere("found two horizontal edges incident on node"),null):st},e.prototype.print=function(O){Pl.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var J=this.iterator();J.hasNext();){var ot=J.next();O.print("out "),ot.print(O),O.println(),O.print("in "),ot.getSym().print(O),O.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Dl;for(var O=this.iterator();O.hasNext();){var J=O.next();(J.isInResult()||J.getSym().isInResult())&&this._resultAreaEdgeList.add(J)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(O){for(var J=this.iterator();J.hasNext();){var ot=J.next().getLabel();ot.setAllLocationsIfNull(0,O.getLocation(0)),ot.setAllLocationsIfNull(1,O.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var O=null,J=null,ot=this._edgeList.size()-1;ot>=0;ot--){var st=this._edgeList.get(ot),at=st.getSym();null===J&&(J=at),null!==O&&at.setNext(O),O=st}J.setNext(O)},e.prototype.computeDepths=function(){if(1===arguments.length){var O=arguments[0],J=this.findIndex(O),ot=O.getDepth(Sh.LEFT),st=O.getDepth(Sh.RIGHT),at=this.computeDepths(J+1,this._edgeList.size(),ot);if(this.computeDepths(0,J,at)!==st)throw new dh("depth mismatch at "+O.getCoordinate())}else if(3===arguments.length){for(var ut=arguments[1],ct=arguments[2],ht=arguments[0];ht<ut;ht++){var pt=this._edgeList.get(ht);pt.setEdgeDepths(Sh.RIGHT,ct),ct=pt.getDepth(Sh.LEFT)}return ct}},e.prototype.mergeSymLabels=function(){for(var O=this.iterator();O.hasNext();){var J=O.next();J.getLabel().merge(J.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(O){for(var J=this,ot=null,st=null,at=this._SCANNING_FOR_INCOMING,ut=this._resultAreaEdgeList.size()-1;ut>=0;ut--){var ct=J._resultAreaEdgeList.get(ut),ht=ct.getSym();switch(null===ot&&ct.getEdgeRing()===O&&(ot=ct),at){case J._SCANNING_FOR_INCOMING:if(ht.getEdgeRing()!==O)continue;st=ht,at=J._LINKING_TO_OUTGOING;break;case J._LINKING_TO_OUTGOING:if(ct.getEdgeRing()!==O)continue;st.setNextMin(ct),at=J._SCANNING_FOR_INCOMING}}at===this._LINKING_TO_OUTGOING&&(ql.isTrue(null!==ot,"found null for first outgoing dirEdge"),ql.isTrue(ot.getEdgeRing()===O,"unable to link last incoming dirEdge"),st.setNextMin(ot))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var O=0,J=this.iterator();J.hasNext();){J.next().isInResult()&&O++}return O}if(1===arguments.length){for(var ot=arguments[0],st=0,at=this.iterator();at.hasNext();){at.next().getEdgeRing()===ot&&st++}return st}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var O=pl.NONE,J=this.iterator();J.hasNext();){var ot=J.next(),st=ot.getSym();if(!ot.isLineEdge()){if(ot.isInResult()){O=pl.INTERIOR;break}if(st.isInResult()){O=pl.EXTERIOR;break}}}if(O===pl.NONE)return null;for(var at=O,ut=this.iterator();ut.hasNext();){var ct=ut.next(),ht=ct.getSym();ct.isLineEdge()?ct.getEdge().setCovered(at===pl.INTERIOR):(ct.isInResult()&&(at=pl.EXTERIOR),ht.isInResult()&&(at=pl.INTERIOR))}},e.prototype.computeLabelling=function(J){O.prototype.computeLabelling.call(this,J),this._label=new vh(pl.NONE);for(var ot=this.iterator();ot.hasNext();)for(var st=ot.next().getEdge().getLabel(),at=0;at<2;at++){var ut=st.getLocation(at);ut!==pl.INTERIOR&&ut!==pl.BOUNDARY||this._label.setLocation(at,pl.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xp),Cp=function(O){function e(){O.apply(this,arguments)}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.createNode=function(O){return new xh(O,new Np)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yh),Sp=function t(){this._pts=null,this._orientation=null;var O=arguments[0];this._pts=O,this._orientation=t.orientation(O)};Sp.prototype.compareTo=function(O){var J=O;return Sp.compareOriented(this._pts,this._orientation,J._pts,J._orientation)},Sp.prototype.interfaces_=function(){return[il]},Sp.prototype.getClass=function(){return Sp},Sp.orientation=function(O){return 1===pc.increasingDirection(O)},Sp.compareOriented=function(O,J,ot,st){for(var at=J?1:-1,ut=st?1:-1,ct=J?O.length:-1,ht=st?ot.length:-1,pt=J?0:O.length-1,mt=st?0:ot.length-1;;){var xt=O[pt].compareTo(ot[mt]);if(0!==xt)return xt;var Nt=(pt+=at)===ct,St=(mt+=ut)===ht;if(Nt&&!St)return-1;if(!Nt&&St)return 1;if(Nt&&St)return 0}};var Jp=function(){this._edges=new Dl,this._ocaMap=new Cc};Jp.prototype.print=function(O){O.print("MULTILINESTRING ( ");for(var J=0;J<this._edges.size();J++){var ot=this._edges.get(J);J>0&&O.print(","),O.print("(");for(var st=ot.getCoordinates(),at=0;at<st.length;at++)at>0&&O.print(","),O.print(st[at].x+" "+st[at].y);O.println(")")}O.print(")  ")},Jp.prototype.addAll=function(O){for(var J=O.iterator();J.hasNext();)this.add(J.next())},Jp.prototype.findEdgeIndex=function(O){for(var J=0;J<this._edges.size();J++)if(this._edges.get(J).equals(O))return J;return-1},Jp.prototype.iterator=function(){return this._edges.iterator()},Jp.prototype.getEdges=function(){return this._edges},Jp.prototype.get=function(O){return this._edges.get(O)},Jp.prototype.findEqualEdge=function(O){var J=new Sp(O.getCoordinates());return this._ocaMap.get(J)},Jp.prototype.add=function(O){this._edges.add(O);var J=new Sp(O.getCoordinates());this._ocaMap.put(J,O)},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var Zp=function(){};Zp.prototype.processIntersections=function(O,J,ot,st){},Zp.prototype.isDone=function(){},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp};var Kp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var O=arguments[0];this._li=O};Kp.prototype.isTrivialIntersection=function(O,J,ot,st){if(O===ot&&1===this._li.getIntersectionNum()){if(Kp.isAdjacentSegments(J,st))return!0;if(O.isClosed()){var at=O.size()-1;if(0===J&&st===at||0===st&&J===at)return!0}}return!1},Kp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Kp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Kp.prototype.getLineIntersector=function(){return this._li},Kp.prototype.hasProperIntersection=function(){return this._hasProper},Kp.prototype.processIntersections=function(O,J,ot,st){if(O===ot&&J===st)return null;this.numTests++;var at=O.getCoordinates()[J],ut=O.getCoordinates()[J+1],ct=ot.getCoordinates()[st],ht=ot.getCoordinates()[st+1];this._li.computeIntersection(at,ut,ct,ht),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(O,J,ot,st)||(this._hasIntersection=!0,O.addIntersections(this._li,J,0),ot.addIntersections(this._li,st,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Kp.prototype.hasIntersection=function(){return this._hasIntersection},Kp.prototype.isDone=function(){return!1},Kp.prototype.hasInteriorIntersection=function(){return this._hasInterior},Kp.prototype.interfaces_=function(){return[Zp]},Kp.prototype.getClass=function(){return Kp},Kp.isAdjacentSegments=function(O,J){return 1===Math.abs(O-J)};var Qp=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var O=arguments[0],J=arguments[1],ot=arguments[2];this.coord=new Wu(O),this.segmentIndex=J,this.dist=ot};Qp.prototype.getSegmentIndex=function(){return this.segmentIndex},Qp.prototype.getCoordinate=function(){return this.coord},Qp.prototype.print=function(O){O.print(this.coord),O.print(" seg # = "+this.segmentIndex),O.println(" dist = "+this.dist)},Qp.prototype.compareTo=function(O){var J=O;return this.compare(J.segmentIndex,J.dist)},Qp.prototype.isEndPoint=function(O){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===O},Qp.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Qp.prototype.getDistance=function(){return this.dist},Qp.prototype.compare=function(O,J){return this.segmentIndex<O?-1:this.segmentIndex>O?1:this.dist<J?-1:this.dist>J?1:0},Qp.prototype.interfaces_=function(){return[il]},Qp.prototype.getClass=function(){return Qp};var $p=function(){this._nodeMap=new Cc,this.edge=null;var O=arguments[0];this.edge=O};$p.prototype.print=function(O){O.println("Intersections:");for(var J=this.iterator();J.hasNext();)J.next().print(O)},$p.prototype.iterator=function(){return this._nodeMap.values().iterator()},$p.prototype.addSplitEdges=function(O){this.addEndpoints();for(var J=this.iterator(),ot=J.next();J.hasNext();){var st=J.next(),at=this.createSplitEdge(ot,st);O.add(at),ot=st}},$p.prototype.addEndpoints=function(){var O=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[O],O,0)},$p.prototype.createSplitEdge=function(O,J){var ot=J.segmentIndex-O.segmentIndex+2,st=this.edge.pts[J.segmentIndex],at=J.dist>0||!J.coord.equals2D(st);at||ot--;var ut=new Array(ot).fill(null),ct=0;ut[ct++]=new Wu(O.coord);for(var ht=O.segmentIndex+1;ht<=J.segmentIndex;ht++)ut[ct++]=this.edge.pts[ht];return at&&(ut[ct]=J.coord),new Tp(ut,new vh(this.edge._label))},$p.prototype.add=function(O,J,ot){var st=new Qp(O,J,ot),at=this._nodeMap.get(st);return null!==at?at:(this._nodeMap.put(st,st),st)},$p.prototype.isIntersection=function(O){for(var J=this.iterator();J.hasNext();)if(J.next().coord.equals(O))return!0;return!1},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p};var tf=function(){};tf.prototype.getChainStartIndices=function(O){var J=0,ot=new Dl;ot.add(new _l(J));do{var st=this.findChainEnd(O,J);ot.add(new _l(st)),J=st}while(J<O.length-1);return tf.toIntArray(ot)},tf.prototype.findChainEnd=function(O,J){for(var ot=jh.quadrant(O[J],O[J+1]),st=J+1;st<O.length&&jh.quadrant(O[st-1],O[st])===ot;)st++;return st-1},tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf},tf.toIntArray=function(O){for(var J=new Array(O.size()).fill(null),ot=0;ot<J.length;ot++)J[ot]=O.get(ot).intValue();return J};var ef=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new ll,this.env2=new ll;var O=arguments[0];this.e=O,this.pts=O.getCoordinates();var J=new tf;this.startIndex=J.getChainStartIndices(this.pts)};ef.prototype.getCoordinates=function(){return this.pts},ef.prototype.getMaxX=function(O){var J=this.pts[this.startIndex[O]].x,ot=this.pts[this.startIndex[O+1]].x;return J>ot?J:ot},ef.prototype.getMinX=function(O){var J=this.pts[this.startIndex[O]].x,ot=this.pts[this.startIndex[O+1]].x;return J<ot?J:ot},ef.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var O=arguments[0],J=arguments[1],ot=arguments[2],st=arguments[3];this.computeIntersectsForChain(this.startIndex[O],this.startIndex[O+1],J,J.startIndex[ot],J.startIndex[ot+1],st)}else if(6===arguments.length){var at=arguments[0],ut=arguments[1],ct=arguments[2],ht=arguments[3],pt=arguments[4],mt=arguments[5],xt=this.pts[at],Nt=this.pts[ut],St=ct.pts[ht],jt=ct.pts[pt];if(ut-at==1&&pt-ht==1)return mt.addIntersections(this.e,at,ct.e,ht),null;if(this.env1.init(xt,Nt),this.env2.init(St,jt),!this.env1.intersects(this.env2))return null;var Wt=Math.trunc((at+ut)/2),Ht=Math.trunc((ht+pt)/2);at<Wt&&(ht<Ht&&this.computeIntersectsForChain(at,Wt,ct,ht,Ht,mt),Ht<pt&&this.computeIntersectsForChain(at,Wt,ct,Ht,pt,mt)),Wt<ut&&(ht<Ht&&this.computeIntersectsForChain(Wt,ut,ct,ht,Ht,mt),Ht<pt&&this.computeIntersectsForChain(Wt,ut,ct,Ht,pt,mt))}},ef.prototype.getStartIndexes=function(){return this.startIndex},ef.prototype.computeIntersects=function(O,J){for(var ot=0;ot<this.startIndex.length-1;ot++)for(var st=0;st<O.startIndex.length-1;st++)this.computeIntersectsForChain(ot,O,st,J)},ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef};var Mp=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var O=0;O<2;O++)for(var J=0;J<3;J++)this._depth[O][J]=t.NULL_VALUE},Op={NULL_VALUE:{configurable:!0}};Mp.prototype.getDepth=function(O,J){return this._depth[O][J]},Mp.prototype.setDepth=function(O,J,ot){this._depth[O][J]=ot},Mp.prototype.isNull=function(){if(0===arguments.length){for(var O=0;O<2;O++)for(var J=0;J<3;J++)if(this._depth[O][J]!==Mp.NULL_VALUE)return!1;return!0}if(1===arguments.length){var ot=arguments[0];return this._depth[ot][1]===Mp.NULL_VALUE}if(2===arguments.length){var st=arguments[0],at=arguments[1];return this._depth[st][at]===Mp.NULL_VALUE}},Mp.prototype.normalize=function(){for(var O=this,J=0;J<2;J++)if(!O.isNull(J)){var ot=O._depth[J][1];O._depth[J][2]<ot&&(ot=O._depth[J][2]),ot<0&&(ot=0);for(var st=1;st<3;st++){var at=0;O._depth[J][st]>ot&&(at=1),O._depth[J][st]=at}}},Mp.prototype.getDelta=function(O){return this._depth[O][Sh.RIGHT]-this._depth[O][Sh.LEFT]},Mp.prototype.getLocation=function(O,J){return this._depth[O][J]<=0?pl.EXTERIOR:pl.INTERIOR},Mp.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Mp.prototype.add=function(){var O=this;if(1===arguments.length)for(var J=arguments[0],ot=0;ot<2;ot++)for(var st=1;st<3;st++){var at=J.getLocation(ot,st);at!==pl.EXTERIOR&&at!==pl.INTERIOR||(O.isNull(ot,st)?O._depth[ot][st]=Mp.depthAtLocation(at):O._depth[ot][st]+=Mp.depthAtLocation(at))}else if(3===arguments.length){var ut=arguments[0],ct=arguments[1];arguments[2]===pl.INTERIOR&&this._depth[ut][ct]++}},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Mp.depthAtLocation=function(O){return O===pl.EXTERIOR?0:O===pl.INTERIOR?1:Mp.NULL_VALUE},Op.NULL_VALUE.get=function(){return-1},Object.defineProperties(Mp,Op);var Tp=function(O){function e(){if(O.call(this),this.pts=null,this._env=null,this.eiList=new $p(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Mp,this._depthDelta=0,1===arguments.length){var J=arguments[0];e.call(this,J,null)}else if(2===arguments.length){var ot=arguments[0],st=arguments[1];this.pts=ot,this._label=st}}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var O=new Array(2).fill(null);return O[0]=this.pts[0],O[1]=this.pts[1],new e(O,vh.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(O){this._isIsolated=O},e.prototype.setName=function(O){this._name=O},e.prototype.equals=function(O){if(!(O instanceof e))return!1;var J=O;if(this.pts.length!==J.pts.length)return!1;for(var ot=!0,st=!0,at=this.pts.length,ut=0;ut<this.pts.length;ut++)if(this.pts[ut].equals2D(J.pts[ut])||(ot=!1),this.pts[ut].equals2D(J.pts[--at])||(st=!1),!ot&&!st)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var O=arguments[0];return this.pts[O]}},e.prototype.print=function(O){O.print("edge "+this._name+": "),O.print("LINESTRING (");for(var J=0;J<this.pts.length;J++)J>0&&O.print(","),O.print(this.pts[J].x+" "+this.pts[J].y);O.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(O){e.updateIM(this._label,O)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(O){O.print("edge "+this._name+": ");for(var J=this.pts.length-1;J>=0;J--)O.print(this.pts[J]+" ");O.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new ef(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new ll;for(var O=0;O<this.pts.length;O++)this._env.expandToInclude(this.pts[O])}return this._env},e.prototype.addIntersection=function(O,J,ot,st){var at=new Wu(O.getIntersection(st)),ut=J,ct=O.getEdgeDistance(ot,st),ht=ut+1;if(ht<this.pts.length){var pt=this.pts[ht];at.equals2D(pt)&&(ut=ht,ct=0)}this.eiList.add(at,ut,ct)},e.prototype.toString=function(){var O=new vl;O.append("edge "+this._name+": "),O.append("LINESTRING (");for(var J=0;J<this.pts.length;J++)J>0&&O.append(","),O.append(this.pts[J].x+" "+this.pts[J].y);return O.append(")  "+this._label+" "+this._depthDelta),O.toString()},e.prototype.isPointwiseEqual=function(O){if(this.pts.length!==O.pts.length)return!1;for(var J=0;J<this.pts.length;J++)if(!this.pts[J].equals2D(O.pts[J]))return!1;return!0},e.prototype.setDepthDelta=function(O){this._depthDelta=O},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(O,J,ot){for(var st=0;st<O.getIntersectionNum();st++)this.addIntersection(O,J,ot,st)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return O.prototype.updateIM.apply(this,arguments);var J=arguments[0],ot=arguments[1];ot.setAtLeastIfValid(J.getLocation(0,Sh.ON),J.getLocation(1,Sh.ON),1),J.isArea()&&(ot.setAtLeastIfValid(J.getLocation(0,Sh.LEFT),J.getLocation(1,Sh.LEFT),2),ot.setAtLeastIfValid(J.getLocation(0,Sh.RIGHT),J.getLocation(1,Sh.RIGHT),2))},e}(qh),sf=function(O){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Jp,this._bufParams=O||null};sf.prototype.setWorkingPrecisionModel=function(O){this._workingPrecisionModel=O},sf.prototype.insertUniqueEdge=function(O){var J=this._edgeList.findEqualEdge(O);if(null!==J){var ot=J.getLabel(),st=O.getLabel();J.isPointwiseEqual(O)||(st=new vh(O.getLabel())).flip(),ot.merge(st);var at=sf.depthDelta(st),ut=J.getDepthDelta()+at;J.setDepthDelta(ut)}else this._edgeList.add(O),O.setDepthDelta(sf.depthDelta(O.getLabel()))},sf.prototype.buildSubgraphs=function(O,J){for(var ot=new Dl,st=O.iterator();st.hasNext();){var at=st.next(),ut=at.getRightmostCoordinate(),ct=new kp(ot).getDepth(ut);at.computeDepth(ct),at.findResultEdges(),ot.add(at),J.add(at.getDirectedEdges(),at.getNodes())}},sf.prototype.createSubgraphs=function(O){for(var J=new Dl,ot=O.getNodes().iterator();ot.hasNext();){var st=ot.next();if(!st.isVisited()){var at=new Th;at.create(st),J.add(at)}}return np.sort(J,np.reverseOrder()),J},sf.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},sf.prototype.getNoder=function(O){if(null!==this._workingNoder)return this._workingNoder;var J=new Bh,ot=new Ml;return ot.setPrecisionModel(O),J.setSegmentIntersector(new Kp(ot)),J},sf.prototype.buffer=function(O,J){var ot=this._workingPrecisionModel;null===ot&&(ot=O.getPrecisionModel()),this._geomFact=O.getFactory();var st=new Fp(ot,this._bufParams),at=new zp(O,J,st).getCurves();if(at.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(at,ot),this._graph=new Hh(new Cp),this._graph.addEdges(this._edgeList.getEdges());var ut=this.createSubgraphs(this._graph),ct=new Wh(this._geomFact);this.buildSubgraphs(ut,ct);var ht=ct.getPolygons();return ht.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(ht)},sf.prototype.computeNodedEdges=function(O,J){var ot=this.getNoder(J);ot.computeNodes(O);for(var st=ot.getNodedSubstrings().iterator();st.hasNext();){var at=st.next(),ut=at.getCoordinates();if(2!==ut.length||!ut[0].equals2D(ut[1])){var ct=at.getData(),ht=new Tp(at.getCoordinates(),new vh(ct));this.insertUniqueEdge(ht)}}},sf.prototype.setNoder=function(O){this._workingNoder=O},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},sf.depthDelta=function(O){var J=O.getLocation(0,Sh.LEFT),ot=O.getLocation(0,Sh.RIGHT);return J===pl.INTERIOR&&ot===pl.EXTERIOR?1:J===pl.EXTERIOR&&ot===pl.INTERIOR?-1:0},sf.convertSegStrings=function(O){for(var J=new rh,ot=new Dl;O.hasNext();){var st=O.next(),at=J.createLineString(st.getCoordinates());ot.add(at)}return J.buildGeometry(ot)};var af=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var O=arguments[0],J=arguments[1];this._noder=O,this._scaleFactor=J,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var ot=arguments[0],st=arguments[1],at=arguments[2],ut=arguments[3];this._noder=ot,this._scaleFactor=st,this._offsetX=at,this._offsetY=ut,this._isScaled=!this.isIntegerPrecision()}};af.prototype.rescale=function(){var O=this;if(gl(arguments[0],ic))for(var J=arguments[0].iterator();J.hasNext();){var ot=J.next();O.rescale(ot.getCoordinates())}else if(arguments[0]instanceof Array){for(var st=arguments[0],at=0;at<st.length;at++)st[at].x=st[at].x/O._scaleFactor+O._offsetX,st[at].y=st[at].y/O._scaleFactor+O._offsetY;2===st.length&&st[0].equals2D(st[1])&&Pl.out.println(st)}},af.prototype.scale=function(){var O=this;if(gl(arguments[0],ic)){for(var J=arguments[0],ot=new Dl,st=J.iterator();st.hasNext();){var at=st.next();ot.add(new yp(O.scale(at.getCoordinates()),at.getData()))}return ot}if(arguments[0]instanceof Array){for(var ut=arguments[0],ct=new Array(ut.length).fill(null),ht=0;ht<ut.length;ht++)ct[ht]=new Wu(Math.round((ut[ht].x-O._offsetX)*O._scaleFactor),Math.round((ut[ht].y-O._offsetY)*O._scaleFactor),ut[ht].z);return pc.removeRepeatedPoints(ct)}},af.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},af.prototype.getNodedSubstrings=function(){var O=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(O),O},af.prototype.computeNodes=function(O){var J=O;this._isScaled&&(J=this.scale(O)),this._noder.computeNodes(J)},af.prototype.interfaces_=function(){return[bp]},af.prototype.getClass=function(){return af};var uf=function(){this._li=new Ml,this._segStrings=null;var O=arguments[0];this._segStrings=O},Ap={fact:{configurable:!0}};uf.prototype.checkEndPtVertexIntersections=function(){var O=this;if(0===arguments.length)for(var J=this._segStrings.iterator();J.hasNext();){var ot=J.next().getCoordinates();O.checkEndPtVertexIntersections(ot[0],O._segStrings),O.checkEndPtVertexIntersections(ot[ot.length-1],O._segStrings)}else if(2===arguments.length)for(var st=arguments[0],at=arguments[1].iterator();at.hasNext();)for(var ut=at.next().getCoordinates(),ct=1;ct<ut.length-1;ct++)if(ut[ct].equals(st))throw new wl("found endpt/interior pt intersection at index "+ct+" :pt "+st)},uf.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var O=this._segStrings.iterator();O.hasNext();)for(var J=O.next(),ot=this._segStrings.iterator();ot.hasNext();){var st=ot.next();this.checkInteriorIntersections(J,st)}else if(2===arguments.length)for(var at=arguments[0],ut=arguments[1],ct=at.getCoordinates(),ht=ut.getCoordinates(),pt=0;pt<ct.length-1;pt++)for(var mt=0;mt<ht.length-1;mt++)this.checkInteriorIntersections(at,pt,ut,mt);else if(4===arguments.length){var xt=arguments[0],Nt=arguments[1],St=arguments[2],jt=arguments[3];if(xt===St&&Nt===jt)return null;var Wt=xt.getCoordinates()[Nt],Ht=xt.getCoordinates()[Nt+1],Zt=St.getCoordinates()[jt],Kt=St.getCoordinates()[jt+1];if(this._li.computeIntersection(Wt,Ht,Zt,Kt),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Wt,Ht)||this.hasInteriorIntersection(this._li,Zt,Kt)))throw new wl("found non-noded intersection at "+Wt+"-"+Ht+" and "+Zt+"-"+Kt)}},uf.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},uf.prototype.checkCollapses=function(){if(0===arguments.length)for(var O=this._segStrings.iterator();O.hasNext();){var J=O.next();this.checkCollapses(J)}else if(1===arguments.length)for(var ot=arguments[0].getCoordinates(),st=0;st<ot.length-2;st++)this.checkCollapse(ot[st],ot[st+1],ot[st+2])},uf.prototype.hasInteriorIntersection=function(O,J,ot){for(var st=0;st<O.getIntersectionNum();st++){var at=O.getIntersection(st);if(!at.equals(J)&&!at.equals(ot))return!0}return!1},uf.prototype.checkCollapse=function(O,J,ot){if(O.equals(ot))throw new wl("found non-noded collapse at "+uf.fact.createLineString([O,J,ot]))},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf},Ap.fact.get=function(){return new rh},Object.defineProperties(uf,Ap);var cf=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var O=arguments[0],J=arguments[1],ot=arguments[2];if(this._originalPt=O,this._pt=O,this._scaleFactor=J,this._li=ot,J<=0)throw new Xu("Scale factor must be non-zero");1!==J&&(this._pt=new Wu(this.scale(O.x),this.scale(O.y)),this._p0Scaled=new Wu,this._p1Scaled=new Wu),this.initCorners(this._pt)},Dp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};cf.prototype.intersectsScaled=function(O,J){var ot=Math.min(O.x,J.x),st=Math.max(O.x,J.x),at=Math.min(O.y,J.y),ut=Math.max(O.y,J.y),ct=this._maxx<ot||this._minx>st||this._maxy<at||this._miny>ut;if(ct)return!1;var ht=this.intersectsToleranceSquare(O,J);return ql.isTrue(!(ct&&ht),"Found bad envelope test"),ht},cf.prototype.initCorners=function(O){var J=.5;this._minx=O.x-J,this._maxx=O.x+J,this._miny=O.y-J,this._maxy=O.y+J,this._corner[0]=new Wu(this._maxx,this._maxy),this._corner[1]=new Wu(this._minx,this._maxy),this._corner[2]=new Wu(this._minx,this._miny),this._corner[3]=new Wu(this._maxx,this._miny)},cf.prototype.intersects=function(O,J){return 1===this._scaleFactor?this.intersectsScaled(O,J):(this.copyScaled(O,this._p0Scaled),this.copyScaled(J,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},cf.prototype.scale=function(O){return Math.round(O*this._scaleFactor)},cf.prototype.getCoordinate=function(){return this._originalPt},cf.prototype.copyScaled=function(O,J){J.x=this.scale(O.x),J.y=this.scale(O.y)},cf.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var O=cf.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new ll(this._originalPt.x-O,this._originalPt.x+O,this._originalPt.y-O,this._originalPt.y+O)}return this._safeEnv},cf.prototype.intersectsPixelClosure=function(O,J){return this._li.computeIntersection(O,J,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(O,J,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(O,J,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(O,J,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},cf.prototype.intersectsToleranceSquare=function(O,J){var ot=!1,st=!1;return this._li.computeIntersection(O,J,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(O,J,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(ot=!0),this._li.computeIntersection(O,J,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(st=!0),this._li.computeIntersection(O,J,this._corner[3],this._corner[0]),this._li.isProper()||ot&&st||O.equals(this._pt)||J.equals(this._pt)))))},cf.prototype.addSnappedNode=function(O,J){var ot=O.getCoordinate(J),st=O.getCoordinate(J+1);return!!this.intersects(ot,st)&&(O.addIntersection(this.getCoordinate(),J),!0)},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf},Dp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(cf,Dp);var pf=function(){this.tempEnv1=new ll,this.selectedSegment=new vp};pf.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var O=arguments[1];arguments[0].getLineSegment(O,this.selectedSegment),this.select(this.selectedSegment)}},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf};var ff=function(){this._index=null;var O=arguments[0];this._index=O},Gp={HotPixelSnapAction:{configurable:!0}};ff.prototype.snap=function(){if(1===arguments.length){var O=arguments[0];return this.snap(O,null,-1)}if(3===arguments.length){var J=arguments[0],ot=arguments[1],st=arguments[2],at=J.getSafeEnvelope(),ut=new Yp(J,ot,st);return this._index.query(at,{interfaces_:function(){return[Qh]},visitItem:function(O){O.select(at,ut)}}),ut.isNodeAdded()}},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},Gp.HotPixelSnapAction.get=function(){return Yp},Object.defineProperties(ff,Gp);var Yp=function(O){function e(){O.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var J=arguments[0],ot=arguments[1],st=arguments[2];this._hotPixel=J,this._parentEdge=ot,this._hotPixelVertexIndex=st}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return O.prototype.select.apply(this,arguments);var J=arguments[1],ot=arguments[0].getContext();if(null!==this._parentEdge&&ot===this._parentEdge&&J===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(ot,J)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pf),yf=function(){this._li=null,this._interiorIntersections=null;var O=arguments[0];this._li=O,this._interiorIntersections=new Dl};yf.prototype.processIntersections=function(O,J,ot,st){if(O===ot&&J===st)return null;var at=O.getCoordinates()[J],ut=O.getCoordinates()[J+1],ct=ot.getCoordinates()[st],ht=ot.getCoordinates()[st+1];if(this._li.computeIntersection(at,ut,ct,ht),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var pt=0;pt<this._li.getIntersectionNum();pt++)this._interiorIntersections.add(this._li.getIntersection(pt));O.addIntersections(this._li,J,0),ot.addIntersections(this._li,st,1)}},yf.prototype.isDone=function(){return!1},yf.prototype.getInteriorIntersections=function(){return this._interiorIntersections},yf.prototype.interfaces_=function(){return[Zp]},yf.prototype.getClass=function(){return yf};var vf=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var O=arguments[0];this._pm=O,this._li=new Ml,this._li.setPrecisionModel(O),this._scaleFactor=O.getScale()};vf.prototype.checkCorrectness=function(O){var J=yp.getNodedSubstrings(O),ot=new uf(J);try{ot.checkValid()}catch(O){if(!(O instanceof Sl))throw O;O.printStackTrace()}},vf.prototype.getNodedSubstrings=function(){return yp.getNodedSubstrings(this._nodedSegStrings)},vf.prototype.snapRound=function(O,J){var ot=this.findInteriorIntersections(O,J);this.computeIntersectionSnaps(ot),this.computeVertexSnaps(O)},vf.prototype.findInteriorIntersections=function(O,J){var ot=new yf(J);return this._noder.setSegmentIntersector(ot),this._noder.computeNodes(O),ot.getInteriorIntersections()},vf.prototype.computeVertexSnaps=function(){var O=this;if(gl(arguments[0],ic))for(var J=arguments[0].iterator();J.hasNext();){var ot=J.next();O.computeVertexSnaps(ot)}else if(arguments[0]instanceof yp)for(var st=arguments[0],at=st.getCoordinates(),ut=0;ut<at.length;ut++){var ct=new cf(at[ut],O._scaleFactor,O._li);O._pointSnapper.snap(ct,st,ut)&&st.addIntersection(at[ut],ut)}},vf.prototype.computeNodes=function(O){this._nodedSegStrings=O,this._noder=new Bh,this._pointSnapper=new ff(this._noder.getIndex()),this.snapRound(O,this._li)},vf.prototype.computeIntersectionSnaps=function(O){for(var J=this,ot=O.iterator();ot.hasNext();){var st=ot.next(),at=new cf(st,J._scaleFactor,J._li);J._pointSnapper.snap(at)}},vf.prototype.interfaces_=function(){return[bp]},vf.prototype.getClass=function(){return vf};var _f=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Xh,this._resultGeometry=null,this._saveException=null,1===arguments.length){var O=arguments[0];this._argGeom=O}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];this._argGeom=J,this._bufParams=ot}},Wp={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};_f.prototype.bufferFixedPrecision=function(O){var J=new af(new vf(new Zc(1)),O.getScale()),ot=new sf(this._bufParams);ot.setWorkingPrecisionModel(O),ot.setNoder(J),this._resultGeometry=ot.buffer(this._argGeom,this._distance)},_f.prototype.bufferReducedPrecision=function(){var O=this;if(0===arguments.length){for(var J=_f.MAX_PRECISION_DIGITS;J>=0;J--){try{O.bufferReducedPrecision(J)}catch(J){if(!(J instanceof dh))throw J;O._saveException=J}if(null!==O._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var ot=arguments[0],st=_f.precisionScaleFactor(this._argGeom,this._distance,ot),at=new Zc(st);this.bufferFixedPrecision(at)}},_f.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var O=this._argGeom.getFactory().getPrecisionModel();O.getType()===Zc.FIXED?this.bufferFixedPrecision(O):this.bufferReducedPrecision()},_f.prototype.setQuadrantSegments=function(O){this._bufParams.setQuadrantSegments(O)},_f.prototype.bufferOriginalPrecision=function(){try{var O=new sf(this._bufParams);this._resultGeometry=O.buffer(this._argGeom,this._distance)}catch(O){if(!(O instanceof wl))throw O;this._saveException=O}},_f.prototype.getResultGeometry=function(O){return this._distance=O,this.computeGeometry(),this._resultGeometry},_f.prototype.setEndCapStyle=function(O){this._bufParams.setEndCapStyle(O)},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f},_f.bufferOp=function(){if(2===arguments.length){var O=arguments[1];return new _f(arguments[0]).getResultGeometry(O)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Wl&&"number"==typeof arguments[1]){var J=arguments[1],ot=arguments[2],st=new _f(arguments[0]);return st.setQuadrantSegments(ot),st.getResultGeometry(J)}if(arguments[2]instanceof Xh&&arguments[0]instanceof Wl&&"number"==typeof arguments[1]){var at=arguments[1];return new _f(arguments[0],arguments[2]).getResultGeometry(at)}}else if(4===arguments.length){var ut=arguments[1],ct=arguments[2],ht=arguments[3],pt=new _f(arguments[0]);return pt.setQuadrantSegments(ct),pt.setEndCapStyle(ht),pt.getResultGeometry(ut)}},_f.precisionScaleFactor=function(O,J,ot){var st=O.getEnvelopeInternal(),at=dl.max(Math.abs(st.getMaxX()),Math.abs(st.getMaxY()),Math.abs(st.getMinX()),Math.abs(st.getMinY()))+2*(J>0?J:0),ut=ot-Math.trunc(Math.log(at)/Math.log(10)+1);return Math.pow(10,ut)},Wp.CAP_ROUND.get=function(){return Xh.CAP_ROUND},Wp.CAP_BUTT.get=function(){return Xh.CAP_FLAT},Wp.CAP_FLAT.get=function(){return Xh.CAP_FLAT},Wp.CAP_SQUARE.get=function(){return Xh.CAP_SQUARE},Wp.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(_f,Wp);var xf=function(){this._pt=[new Wu,new Wu],this._distance=nl.NaN,this._isNull=!0};xf.prototype.getCoordinates=function(){return this._pt},xf.prototype.getCoordinate=function(O){return this._pt[O]},xf.prototype.setMinimum=function(){if(1===arguments.length){var O=arguments[0];this.setMinimum(O._pt[0],O._pt[1])}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];if(this._isNull)return this.initialize(J,ot),null;var st=J.distance(ot);st<this._distance&&this.initialize(J,ot,st)}},xf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var O=arguments[0],J=arguments[1];this._pt[0].setCoordinate(O),this._pt[1].setCoordinate(J),this._distance=O.distance(J),this._isNull=!1}else if(3===arguments.length){var ot=arguments[0],st=arguments[1],at=arguments[2];this._pt[0].setCoordinate(ot),this._pt[1].setCoordinate(st),this._distance=at,this._isNull=!1}},xf.prototype.getDistance=function(){return this._distance},xf.prototype.setMaximum=function(){if(1===arguments.length){var O=arguments[0];this.setMaximum(O._pt[0],O._pt[1])}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];if(this._isNull)return this.initialize(J,ot),null;var st=J.distance(ot);st>this._distance&&this.initialize(J,ot,st)}},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var Ef=function(){};Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef},Ef.computeDistance=function(){if(arguments[2]instanceof xf&&arguments[0]instanceof hc&&arguments[1]instanceof Wu)for(var O=arguments[1],J=arguments[2],ot=arguments[0].getCoordinates(),st=new vp,at=0;at<ot.length-1;at++){st.setCoordinates(ot[at],ot[at+1]);var ut=st.closestPoint(O);J.setMinimum(ut,O)}else if(arguments[2]instanceof xf&&arguments[0]instanceof vc&&arguments[1]instanceof Wu){var ct=arguments[0],ht=arguments[1],pt=arguments[2];Ef.computeDistance(ct.getExteriorRing(),ht,pt);for(var mt=0;mt<ct.getNumInteriorRing();mt++)Ef.computeDistance(ct.getInteriorRingN(mt),ht,pt)}else if(arguments[2]instanceof xf&&arguments[0]instanceof Wl&&arguments[1]instanceof Wu){var xt=arguments[0],Nt=arguments[1],St=arguments[2];if(xt instanceof hc)Ef.computeDistance(xt,Nt,St);else if(xt instanceof vc)Ef.computeDistance(xt,Nt,St);else if(xt instanceof ac)for(var jt=xt,Wt=0;Wt<jt.getNumGeometries();Wt++){var Ht=jt.getGeometryN(Wt);Ef.computeDistance(Ht,Nt,St)}else St.setMinimum(xt.getCoordinate(),Nt)}else if(arguments[2]instanceof xf&&arguments[0]instanceof vp&&arguments[1]instanceof Wu){var Zt=arguments[1],Kt=arguments[2],Jt=arguments[0].closestPoint(Zt);Kt.setMinimum(Jt,Zt)}};var bf=function(O){this._maxPtDist=new xf,this._inputGeom=O||null},Hp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};bf.prototype.computeMaxMidpointDistance=function(O){var J=new Nf(this._inputGeom);O.apply(J),this._maxPtDist.setMaximum(J.getMaxPointDistance())},bf.prototype.computeMaxVertexDistance=function(O){var J=new If(this._inputGeom);O.apply(J),this._maxPtDist.setMaximum(J.getMaxPointDistance())},bf.prototype.findDistance=function(O){return this.computeMaxVertexDistance(O),this.computeMaxMidpointDistance(O),this._maxPtDist.getDistance()},bf.prototype.getDistancePoints=function(){return this._maxPtDist},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf},Hp.MaxPointDistanceFilter.get=function(){return If},Hp.MaxMidpointDistanceFilter.get=function(){return Nf},Object.defineProperties(bf,Hp);var If=function(O){this._maxPtDist=new xf,this._minPtDist=new xf,this._geom=O||null};If.prototype.filter=function(O){this._minPtDist.initialize(),Ef.computeDistance(this._geom,O,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},If.prototype.getMaxPointDistance=function(){return this._maxPtDist},If.prototype.interfaces_=function(){return[Kl]},If.prototype.getClass=function(){return If};var Nf=function(O){this._maxPtDist=new xf,this._minPtDist=new xf,this._geom=O||null};Nf.prototype.filter=function(O,J){if(0===J)return null;var ot=O.getCoordinate(J-1),st=O.getCoordinate(J),at=new Wu((ot.x+st.x)/2,(ot.y+st.y)/2);this._minPtDist.initialize(),Ef.computeDistance(this._geom,at,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Nf.prototype.isDone=function(){return!1},Nf.prototype.isGeometryChanged=function(){return!1},Nf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Nf.prototype.interfaces_=function(){return[Fc]},Nf.prototype.getClass=function(){return Nf};var Sf=function(O){this._comps=O||null};Sf.prototype.filter=function(O){O instanceof vc&&this._comps.add(O)},Sf.prototype.interfaces_=function(){return[Dc]},Sf.prototype.getClass=function(){return Sf},Sf.getPolygons=function(){if(1===arguments.length)return Sf.getPolygons(arguments[0],new Dl);if(2===arguments.length){var O=arguments[0],J=arguments[1];return O instanceof vc?J.add(O):O instanceof ac&&O.apply(new Sf(J)),J}};var Cf=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var O=arguments[0];this._lines=O}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];this._lines=J,this._isForcedToLineString=ot}};Cf.prototype.filter=function(O){if(this._isForcedToLineString&&O instanceof Ec){var J=O.getFactory().createLineString(O.getCoordinateSequence());return this._lines.add(J),null}O instanceof hc&&this._lines.add(O)},Cf.prototype.setForceToLineString=function(O){this._isForcedToLineString=O},Cf.prototype.interfaces_=function(){return[Hl]},Cf.prototype.getClass=function(){return Cf},Cf.getGeometry=function(){if(1===arguments.length){var O=arguments[0];return O.getFactory().buildGeometry(Cf.getLines(O))}if(2===arguments.length){var J=arguments[0],ot=arguments[1];return J.getFactory().buildGeometry(Cf.getLines(J,ot))}},Cf.getLines=function(){if(1===arguments.length)return Cf.getLines(arguments[0],!1);if(2===arguments.length){if(gl(arguments[0],ic)&&gl(arguments[1],ic)){for(var O=arguments[1],J=arguments[0].iterator();J.hasNext();){var ot=J.next();Cf.getLines(ot,O)}return O}if(arguments[0]instanceof Wl&&"boolean"==typeof arguments[1]){var st=arguments[0],at=arguments[1],ut=new Dl;return st.apply(new Cf(ut,at)),ut}if(arguments[0]instanceof Wl&&gl(arguments[1],ic)){var ct=arguments[0],ht=arguments[1];return ct instanceof hc?ht.add(ct):ct.apply(new Cf(ht)),ht}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&gl(arguments[0],ic)&&gl(arguments[1],ic)){for(var pt=arguments[1],mt=arguments[2],xt=arguments[0].iterator();xt.hasNext();){var Nt=xt.next();Cf.getLines(Nt,pt,mt)}return pt}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Wl&&gl(arguments[1],ic)){var St=arguments[1],jt=arguments[2];return arguments[0].apply(new Cf(St,jt)),St}}};var Pf=function(){if(this._boundaryRule=Ql.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var O=arguments[0];if(null===O)throw new Xu("Rule must be non-null");this._boundaryRule=O}};Pf.prototype.locateInternal=function(){if(arguments[0]instanceof Wu&&arguments[1]instanceof vc){var O=arguments[0],J=arguments[1];if(J.isEmpty())return pl.EXTERIOR;var ot=J.getExteriorRing(),st=this.locateInPolygonRing(O,ot);if(st===pl.EXTERIOR)return pl.EXTERIOR;if(st===pl.BOUNDARY)return pl.BOUNDARY;for(var at=0;at<J.getNumInteriorRing();at++){var ut=J.getInteriorRingN(at),ct=this.locateInPolygonRing(O,ut);if(ct===pl.INTERIOR)return pl.EXTERIOR;if(ct===pl.BOUNDARY)return pl.BOUNDARY}return pl.INTERIOR}if(arguments[0]instanceof Wu&&arguments[1]instanceof hc){var ht=arguments[0],pt=arguments[1];if(!pt.getEnvelopeInternal().intersects(ht))return pl.EXTERIOR;var mt=pt.getCoordinates();return pt.isClosed()||!ht.equals(mt[0])&&!ht.equals(mt[mt.length-1])?Xl.isOnLine(ht,mt)?pl.INTERIOR:pl.EXTERIOR:pl.BOUNDARY}if(arguments[0]instanceof Wu&&arguments[1]instanceof fc){var xt=arguments[0];return arguments[1].getCoordinate().equals2D(xt)?pl.INTERIOR:pl.EXTERIOR}},Pf.prototype.locateInPolygonRing=function(O,J){return J.getEnvelopeInternal().intersects(O)?Xl.locatePointInRing(O,J.getCoordinates()):pl.EXTERIOR},Pf.prototype.intersects=function(O,J){return this.locate(O,J)!==pl.EXTERIOR},Pf.prototype.updateLocationInfo=function(O){O===pl.INTERIOR&&(this._isIn=!0),O===pl.BOUNDARY&&this._numBoundaries++},Pf.prototype.computeLocation=function(O,J){var ot=this;if(J instanceof fc&&this.updateLocationInfo(this.locateInternal(O,J)),J instanceof hc)this.updateLocationInfo(this.locateInternal(O,J));else if(J instanceof vc)this.updateLocationInfo(this.locateInternal(O,J));else if(J instanceof lc)for(var st=J,at=0;at<st.getNumGeometries();at++){var ut=st.getGeometryN(at);ot.updateLocationInfo(ot.locateInternal(O,ut))}else if(J instanceof Ac)for(var ct=J,ht=0;ht<ct.getNumGeometries();ht++){var pt=ct.getGeometryN(ht);ot.updateLocationInfo(ot.locateInternal(O,pt))}else if(J instanceof ac)for(var mt=new Up(J);mt.hasNext();){var xt=mt.next();xt!==J&&ot.computeLocation(O,xt)}},Pf.prototype.locate=function(O,J){return J.isEmpty()?pl.EXTERIOR:J instanceof hc||J instanceof vc?this.locateInternal(O,J):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(O,J),this._boundaryRule.isInBoundary(this._numBoundaries)?pl.BOUNDARY:this._numBoundaries>0||this._isIn?pl.INTERIOR:pl.EXTERIOR)},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf};var nf=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var O=arguments[0],J=arguments[1],ot=arguments[2];this._component=O,this._segIndex=J,this._pt=ot}},rf={INSIDE_AREA:{configurable:!0}};nf.prototype.isInsideArea=function(){return this._segIndex===nf.INSIDE_AREA},nf.prototype.getCoordinate=function(){return this._pt},nf.prototype.getGeometryComponent=function(){return this._component},nf.prototype.getSegmentIndex=function(){return this._segIndex},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf},rf.INSIDE_AREA.get=function(){return-1},Object.defineProperties(nf,rf);var Of=function(O){this._pts=O||null};Of.prototype.filter=function(O){O instanceof fc&&this._pts.add(O)},Of.prototype.interfaces_=function(){return[Dc]},Of.prototype.getClass=function(){return Of},Of.getPoints=function(){if(1===arguments.length){var O=arguments[0];return O instanceof fc?np.singletonList(O):Of.getPoints(O,new Dl)}if(2===arguments.length){var J=arguments[0],ot=arguments[1];return J instanceof fc?ot.add(J):J instanceof ac&&J.apply(new Of(ot)),ot}};var Rf=function(){this._locations=null;var O=arguments[0];this._locations=O};Rf.prototype.filter=function(O){(O instanceof fc||O instanceof hc||O instanceof vc)&&this._locations.add(new nf(O,0,O.getCoordinate()))},Rf.prototype.interfaces_=function(){return[Dc]},Rf.prototype.getClass=function(){return Rf},Rf.getLocations=function(O){var J=new Dl;return O.apply(new Rf(J)),J};var Tf=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Pf,this._minDistanceLocation=null,this._minDistance=nl.MAX_VALUE,2===arguments.length){var O=arguments[0],J=arguments[1];this._geom=[O,J],this._terminateDistance=0}else if(3===arguments.length){var ot=arguments[0],st=arguments[1],at=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=ot,this._geom[1]=st,this._terminateDistance=at}};Tf.prototype.computeContainmentDistance=function(){var O=this;if(0===arguments.length){var J=new Array(2).fill(null);if(this.computeContainmentDistance(0,J),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,J)}else if(2===arguments.length){var ot=arguments[0],st=arguments[1],at=1-ot,ut=Sf.getPolygons(this._geom[ot]);if(ut.size()>0){var ct=Rf.getLocations(this._geom[at]);if(this.computeContainmentDistance(ct,ut,st),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[at]=st[0],this._minDistanceLocation[ot]=st[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&gl(arguments[0],Al)&&gl(arguments[1],Al)){for(var ht=arguments[0],pt=arguments[1],mt=arguments[2],xt=0;xt<ht.size();xt++)for(var Nt=ht.get(xt),St=0;St<pt.size();St++)if(O.computeContainmentDistance(Nt,pt.get(St),mt),O._minDistance<=O._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof nf&&arguments[1]instanceof vc){var jt=arguments[0],Wt=arguments[1],Ht=arguments[2],Zt=jt.getCoordinate();if(pl.EXTERIOR!==this._ptLocator.locate(Zt,Wt))return this._minDistance=0,Ht[0]=jt,Ht[1]=new nf(Wt,Zt),null}},Tf.prototype.computeMinDistanceLinesPoints=function(O,J,ot){for(var st=this,at=0;at<O.size();at++)for(var ut=O.get(at),ct=0;ct<J.size();ct++){var ht=J.get(ct);if(st.computeMinDistance(ut,ht,ot),st._minDistance<=st._terminateDistance)return null}},Tf.prototype.computeFacetDistance=function(){var O=new Array(2).fill(null),J=Cf.getLines(this._geom[0]),ot=Cf.getLines(this._geom[1]),st=Of.getPoints(this._geom[0]),at=Of.getPoints(this._geom[1]);return this.computeMinDistanceLines(J,ot,O),this.updateMinDistance(O,!1),this._minDistance<=this._terminateDistance?null:(O[0]=null,O[1]=null,this.computeMinDistanceLinesPoints(J,at,O),this.updateMinDistance(O,!1),this._minDistance<=this._terminateDistance?null:(O[0]=null,O[1]=null,this.computeMinDistanceLinesPoints(ot,st,O),this.updateMinDistance(O,!0),this._minDistance<=this._terminateDistance?null:(O[0]=null,O[1]=null,this.computeMinDistancePoints(st,at,O),void this.updateMinDistance(O,!1))))},Tf.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Tf.prototype.updateMinDistance=function(O,J){if(null===O[0])return null;J?(this._minDistanceLocation[0]=O[1],this._minDistanceLocation[1]=O[0]):(this._minDistanceLocation[0]=O[0],this._minDistanceLocation[1]=O[1])},Tf.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Tf.prototype.computeMinDistance=function(){var O=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof hc&&arguments[1]instanceof fc){var J=arguments[0],ot=arguments[1],st=arguments[2];if(J.getEnvelopeInternal().distance(ot.getEnvelopeInternal())>this._minDistance)return null;for(var at=J.getCoordinates(),ut=ot.getCoordinate(),ct=0;ct<at.length-1;ct++){var ht=Xl.distancePointLine(ut,at[ct],at[ct+1]);if(ht<O._minDistance){O._minDistance=ht;var pt=new vp(at[ct],at[ct+1]).closestPoint(ut);st[0]=new nf(J,ct,pt),st[1]=new nf(ot,0,ut)}if(O._minDistance<=O._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof hc&&arguments[1]instanceof hc){var mt=arguments[0],xt=arguments[1],Nt=arguments[2];if(mt.getEnvelopeInternal().distance(xt.getEnvelopeInternal())>this._minDistance)return null;for(var St=mt.getCoordinates(),jt=xt.getCoordinates(),Wt=0;Wt<St.length-1;Wt++)for(var Ht=0;Ht<jt.length-1;Ht++){var Zt=Xl.distanceLineLine(St[Wt],St[Wt+1],jt[Ht],jt[Ht+1]);if(Zt<O._minDistance){O._minDistance=Zt;var Kt=new vp(St[Wt],St[Wt+1]),Jt=new vp(jt[Ht],jt[Ht+1]),ee=Kt.closestPoints(Jt);Nt[0]=new nf(mt,Wt,ee[0]),Nt[1]=new nf(xt,Ht,ee[1])}if(O._minDistance<=O._terminateDistance)return null}}},Tf.prototype.computeMinDistancePoints=function(O,J,ot){for(var st=this,at=0;at<O.size();at++)for(var ut=O.get(at),ct=0;ct<J.size();ct++){var ht=J.get(ct),pt=ut.getCoordinate().distance(ht.getCoordinate());if(pt<st._minDistance&&(st._minDistance=pt,ot[0]=new nf(ut,0,ut.getCoordinate()),ot[1]=new nf(ht,0,ht.getCoordinate())),st._minDistance<=st._terminateDistance)return null}},Tf.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Xu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Tf.prototype.computeMinDistanceLines=function(O,J,ot){for(var st=this,at=0;at<O.size();at++)for(var ut=O.get(at),ct=0;ct<J.size();ct++){var ht=J.get(ct);if(st.computeMinDistance(ut,ht,ot),st._minDistance<=st._terminateDistance)return null}},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf},Tf.distance=function(O,J){return new Tf(O,J).distance()},Tf.isWithinDistance=function(O,J,ot){return new Tf(O,J,ot).distance()<=ot},Tf.nearestPoints=function(O,J){return new Tf(O,J).nearestPoints()};var Af=function(){this._pt=[new Wu,new Wu],this._distance=nl.NaN,this._isNull=!0};Af.prototype.getCoordinates=function(){return this._pt},Af.prototype.getCoordinate=function(O){return this._pt[O]},Af.prototype.setMinimum=function(){if(1===arguments.length){var O=arguments[0];this.setMinimum(O._pt[0],O._pt[1])}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];if(this._isNull)return this.initialize(J,ot),null;var st=J.distance(ot);st<this._distance&&this.initialize(J,ot,st)}},Af.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var O=arguments[0],J=arguments[1];this._pt[0].setCoordinate(O),this._pt[1].setCoordinate(J),this._distance=O.distance(J),this._isNull=!1}else if(3===arguments.length){var ot=arguments[0],st=arguments[1],at=arguments[2];this._pt[0].setCoordinate(ot),this._pt[1].setCoordinate(st),this._distance=at,this._isNull=!1}},Af.prototype.toString=function(){return Fl.toLineString(this._pt[0],this._pt[1])},Af.prototype.getDistance=function(){return this._distance},Af.prototype.setMaximum=function(){if(1===arguments.length){var O=arguments[0];this.setMaximum(O._pt[0],O._pt[1])}else if(2===arguments.length){var J=arguments[0],ot=arguments[1];if(this._isNull)return this.initialize(J,ot),null;var st=J.distance(ot);st>this._distance&&this.initialize(J,ot,st)}},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af};var Df=function(){};Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},Df.computeDistance=function(){if(arguments[2]instanceof Af&&arguments[0]instanceof hc&&arguments[1]instanceof Wu)for(var O=arguments[0],J=arguments[1],ot=arguments[2],st=new vp,at=O.getCoordinates(),ut=0;ut<at.length-1;ut++){st.setCoordinates(at[ut],at[ut+1]);var ct=st.closestPoint(J);ot.setMinimum(ct,J)}else if(arguments[2]instanceof Af&&arguments[0]instanceof vc&&arguments[1]instanceof Wu){var ht=arguments[0],pt=arguments[1],mt=arguments[2];Df.computeDistance(ht.getExteriorRing(),pt,mt);for(var xt=0;xt<ht.getNumInteriorRing();xt++)Df.computeDistance(ht.getInteriorRingN(xt),pt,mt)}else if(arguments[2]instanceof Af&&arguments[0]instanceof Wl&&arguments[1]instanceof Wu){var Nt=arguments[0],St=arguments[1],jt=arguments[2];if(Nt instanceof hc)Df.computeDistance(Nt,St,jt);else if(Nt instanceof vc)Df.computeDistance(Nt,St,jt);else if(Nt instanceof ac)for(var Wt=Nt,Ht=0;Ht<Wt.getNumGeometries();Ht++){var Zt=Wt.getGeometryN(Ht);Df.computeDistance(Zt,St,jt)}else jt.setMinimum(Nt.getCoordinate(),St)}else if(arguments[2]instanceof Af&&arguments[0]instanceof vp&&arguments[1]instanceof Wu){var Kt=arguments[1],Jt=arguments[2],ee=arguments[0].closestPoint(Kt);Jt.setMinimum(ee,Kt)}};var Ff=function(){this._g0=null,this._g1=null,this._ptDist=new Af,this._densifyFrac=0;var O=arguments[0],J=arguments[1];this._g0=O,this._g1=J},of={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Ff.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Ff.prototype.setDensifyFraction=function(O){if(O>1||O<=0)throw new Xu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=O},Ff.prototype.compute=function(O,J){this.computeOrientedDistance(O,J,this._ptDist),this.computeOrientedDistance(J,O,this._ptDist)},Ff.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Ff.prototype.computeOrientedDistance=function(O,J,ot){var st=new Gf(J);if(O.apply(st),ot.setMaximum(st.getMaxPointDistance()),this._densifyFrac>0){var at=new qf(J,this._densifyFrac);O.apply(at),ot.setMaximum(at.getMaxPointDistance())}},Ff.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Ff.distance=function(){if(2===arguments.length)return new Ff(arguments[0],arguments[1]).distance();if(3===arguments.length){var O=arguments[2],J=new Ff(arguments[0],arguments[1]);return J.setDensifyFraction(O),J.distance()}},of.MaxPointDistanceFilter.get=function(){return Gf},of.MaxDensifiedByFractionDistanceFilter.get=function(){return qf},Object.defineProperties(Ff,of);var Gf=function(){this._maxPtDist=new Af,this._minPtDist=new Af,this._euclideanDist=new Df,this._geom=null;var O=arguments[0];this._geom=O};Gf.prototype.filter=function(O){this._minPtDist.initialize(),Df.computeDistance(this._geom,O,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Gf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Gf.prototype.interfaces_=function(){return[Kl]},Gf.prototype.getClass=function(){return Gf};var qf=function(){this._maxPtDist=new Af,this._minPtDist=new Af,this._geom=null,this._numSubSegs=0;var O=arguments[0],J=arguments[1];this._geom=O,this._numSubSegs=Math.trunc(Math.round(1/J))};qf.prototype.filter=function(O,J){var ot=this;if(0===J)return null;for(var st=O.getCoordinate(J-1),at=O.getCoordinate(J),ut=(at.x-st.x)/this._numSubSegs,ct=(at.y-st.y)/this._numSubSegs,ht=0;ht<this._numSubSegs;ht++){var pt=st.x+ht*ut,mt=st.y+ht*ct,xt=new Wu(pt,mt);ot._minPtDist.initialize(),Df.computeDistance(ot._geom,xt,ot._minPtDist),ot._maxPtDist.setMaximum(ot._minPtDist)}},qf.prototype.isDone=function(){return!1},qf.prototype.isGeometryChanged=function(){return!1},qf.prototype.getMaxPointDistance=function(){return this._maxPtDist},qf.prototype.interfaces_=function(){return[Fc]},qf.prototype.getClass=function(){return qf};var Bf=function(O,J,ot){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=O||null,this._bufDistance=J||null,this._result=ot||null},lf={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Bf.prototype.checkMaximumDistance=function(O,J,ot){var st=new Ff(J,O);if(st.setDensifyFraction(.25),this._maxDistanceFound=st.orientedDistance(),this._maxDistanceFound>ot){this._isValid=!1;var at=st.getCoordinates();this._errorLocation=at[1],this._errorIndicator=O.getFactory().createLineString(at),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Fl.toLineString(at[0],at[1])+")"}},Bf.prototype.isValid=function(){var O=Math.abs(this._bufDistance),J=Bf.MAX_DISTANCE_DIFF_FRAC*O;return this._minValidDistance=O-J,this._maxValidDistance=O+J,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Bf.VERBOSE&&Pl.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Bf.prototype.checkNegativeValid=function(){if(!(this._input instanceof vc||this._input instanceof Ac||this._input instanceof ac))return null;var O=this.getPolygonLines(this._input);if(this.checkMinimumDistance(O,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(O,this._result,this._maxValidDistance)},Bf.prototype.getErrorIndicator=function(){return this._errorIndicator},Bf.prototype.checkMinimumDistance=function(O,J,ot){var st=new Tf(O,J,ot);if(this._minDistanceFound=st.distance(),this._minDistanceFound<ot){this._isValid=!1;var at=st.nearestPoints();this._errorLocation=st.nearestPoints()[1],this._errorIndicator=O.getFactory().createLineString(at),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Fl.toLineString(at[0],at[1])+" )"}},Bf.prototype.checkPositiveValid=function(){var O=this._result.getBoundary();if(this.checkMinimumDistance(this._input,O,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,O,this._maxValidDistance)},Bf.prototype.getErrorLocation=function(){return this._errorLocation},Bf.prototype.getPolygonLines=function(O){for(var J=new Dl,ot=new Cf(J),st=Sf.getPolygons(O).iterator();st.hasNext();)st.next().apply(ot);return O.getFactory().buildGeometry(J)},Bf.prototype.getErrorMessage=function(){return this._errMsg},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf},lf.VERBOSE.get=function(){return!1},lf.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bf,lf);var jf=function(O,J,ot){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=O||null,this._distance=J||null,this._result=ot||null},hf={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};jf.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},jf.prototype.checkEnvelope=function(){if(this._distance<0)return null;var O=this._distance*jf.MAX_ENV_DIFF_FRAC;0===O&&(O=.001);var J=new ll(this._input.getEnvelopeInternal());J.expandBy(this._distance);var ot=new ll(this._result.getEnvelopeInternal());ot.expandBy(O),ot.contains(J)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(ot)),this.report("Envelope")},jf.prototype.checkDistance=function(){var O=new Bf(this._input,this._distance,this._result);O.isValid()||(this._isValid=!1,this._errorMsg=O.getErrorMessage(),this._errorLocation=O.getErrorLocation(),this._errorIndicator=O.getErrorIndicator()),this.report("Distance")},jf.prototype.checkArea=function(){var O=this._input.getArea(),J=this._result.getArea();this._distance>0&&O>J&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&O<J&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},jf.prototype.checkPolygonal=function(){this._result instanceof vc||this._result instanceof Ac||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},jf.prototype.getErrorIndicator=function(){return this._errorIndicator},jf.prototype.getErrorLocation=function(){return this._errorLocation},jf.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},jf.prototype.report=function(O){if(!jf.VERBOSE)return null;Pl.out.println("Check "+O+": "+(this._isValid?"passed":"FAILED"))},jf.prototype.getErrorMessage=function(){return this._errorMsg},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},jf.isValidMsg=function(O,J,ot){var st=new jf(O,J,ot);return st.isValid()?null:st.getErrorMessage()},jf.isValid=function(O,J,ot){return!!new jf(O,J,ot).isValid()},hf.VERBOSE.get=function(){return!1},hf.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(jf,hf);var Vf=function(){this._pts=null,this._data=null;var O=arguments[0],J=arguments[1];this._pts=O,this._data=J};Vf.prototype.getCoordinates=function(){return this._pts},Vf.prototype.size=function(){return this._pts.length},Vf.prototype.getCoordinate=function(O){return this._pts[O]},Vf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Vf.prototype.getSegmentOctant=function(O){return O===this._pts.length-1?-1:fp.octant(this.getCoordinate(O),this.getCoordinate(O+1))},Vf.prototype.setData=function(O){this._data=O},Vf.prototype.getData=function(){return this._data},Vf.prototype.toString=function(){return Fl.toLineString(new lh(this._pts))},Vf.prototype.interfaces_=function(){return[gp]},Vf.prototype.getClass=function(){return Vf};var Xf=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Dl,this._intersectionCount=0,this._keepIntersections=!0;var O=arguments[0];this._li=O,this._interiorIntersection=null};Xf.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Xf.prototype.setCheckEndSegmentsOnly=function(O){this._isCheckEndSegmentsOnly=O},Xf.prototype.getIntersectionSegments=function(){return this._intSegments},Xf.prototype.count=function(){return this._intersectionCount},Xf.prototype.getIntersections=function(){return this._intersections},Xf.prototype.setFindAllIntersections=function(O){this._findAllIntersections=O},Xf.prototype.setKeepIntersections=function(O){this._keepIntersections=O},Xf.prototype.processIntersections=function(O,J,ot,st){if(!this._findAllIntersections&&this.hasIntersection())return null;if(O===ot&&J===st)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(O,J)&&!this.isEndSegment(ot,st))return null;var at=O.getCoordinates()[J],ut=O.getCoordinates()[J+1],ct=ot.getCoordinates()[st],ht=ot.getCoordinates()[st+1];this._li.computeIntersection(at,ut,ct,ht),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=at,this._intSegments[1]=ut,this._intSegments[2]=ct,this._intSegments[3]=ht,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Xf.prototype.isEndSegment=function(O,J){return 0===J||J>=O.size()-2},Xf.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Xf.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Xf.prototype.interfaces_=function(){return[Zp]},Xf.prototype.getClass=function(){return Xf},Xf.createAllIntersectionsFinder=function(O){var J=new Xf(O);return J.setFindAllIntersections(!0),J},Xf.createAnyIntersectionFinder=function(O){return new Xf(O)},Xf.createIntersectionCounter=function(O){var J=new Xf(O);return J.setFindAllIntersections(!0),J.setKeepIntersections(!1),J};var Yf=function(){this._li=new Ml,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var O=arguments[0];this._segStrings=O};Yf.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Yf.prototype.getIntersections=function(){return this._segInt.getIntersections()},Yf.prototype.isValid=function(){return this.execute(),this._isValid},Yf.prototype.setFindAllIntersections=function(O){this._findAllIntersections=O},Yf.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Xf(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var O=new Bh;if(O.setSegmentIntersector(this._segInt),O.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Yf.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new dh(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Yf.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var O=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Fl.toLineString(O[0],O[1])+" and "+Fl.toLineString(O[2],O[3])},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf},Yf.computeIntersections=function(O){var J=new Yf(O);return J.setFindAllIntersections(!0),J.isValid(),J.getIntersections()};var gf=function t(){this._nv=null;var O=arguments[0];this._nv=new Yf(t.toSegmentStrings(O))};gf.prototype.checkValid=function(){this._nv.checkValid()},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf},gf.toSegmentStrings=function(O){for(var J=new Dl,ot=O.iterator();ot.hasNext();){var st=ot.next();J.add(new Vf(st.getCoordinates(),st))}return J},gf.checkValid=function(O){new gf(O).checkValid()};var Wf=function(O){this._mapOp=O};Wf.prototype.map=function(O){for(var J=new Dl,ot=0;ot<O.getNumGeometries();ot++){var st=this._mapOp.map(O.getGeometryN(ot));st.isEmpty()||J.add(st)}return O.getFactory().createGeometryCollection(rh.toGeometryArray(J))},Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf},Wf.map=function(O,J){return new Wf(J).map(O)};var Jf=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Dl,this._resultLineList=new Dl;var O=arguments[0],J=arguments[1],ot=arguments[2];this._op=O,this._geometryFactory=J,this._ptLocator=ot};Jf.prototype.collectLines=function(O){for(var J=this,ot=this._op.getGraph().getEdgeEnds().iterator();ot.hasNext();){var st=ot.next();J.collectLineEdge(st,O,J._lineEdgesList),J.collectBoundaryTouchEdge(st,O,J._lineEdgesList)}},Jf.prototype.labelIsolatedLine=function(O,J){var ot=this._ptLocator.locate(O.getCoordinate(),this._op.getArgGeometry(J));O.getLabel().setLocation(J,ot)},Jf.prototype.build=function(O){return this.findCoveredLineEdges(),this.collectLines(O),this.buildLines(O),this._resultLineList},Jf.prototype.collectLineEdge=function(O,J,ot){var st=O.getLabel(),at=O.getEdge();O.isLineEdge()&&(O.isVisited()||!ig.isResultOfOp(st,J)||at.isCovered()||(ot.add(at),O.setVisitedEdge(!0)))},Jf.prototype.findCoveredLineEdges=function(){for(var O=this._op.getGraph().getNodes().iterator();O.hasNext();)O.next().getEdges().findCoveredLineEdges();for(var J=this._op.getGraph().getEdgeEnds().iterator();J.hasNext();){var ot=J.next(),st=ot.getEdge();if(ot.isLineEdge()&&!st.isCoveredSet()){var at=this._op.isCoveredByA(ot.getCoordinate());st.setCovered(at)}}},Jf.prototype.labelIsolatedLines=function(O){for(var J=O.iterator();J.hasNext();){var ot=J.next(),st=ot.getLabel();ot.isIsolated()&&(st.isNull(0)?this.labelIsolatedLine(ot,0):this.labelIsolatedLine(ot,1))}},Jf.prototype.buildLines=function(O){for(var J=this._lineEdgesList.iterator();J.hasNext();){var ot=J.next(),st=this._geometryFactory.createLineString(ot.getCoordinates());this._resultLineList.add(st),ot.setInResult(!0)}},Jf.prototype.collectBoundaryTouchEdge=function(O,J,ot){var st=O.getLabel();return O.isLineEdge()||O.isVisited()||O.isInteriorAreaEdge()||O.getEdge().isInResult()?null:(ql.isTrue(!(O.isInResult()||O.getSym().isInResult())||!O.getEdge().isInResult()),void(ig.isResultOfOp(st,J)&&J===ig.INTERSECTION&&(ot.add(O.getEdge()),O.setVisitedEdge(!0))))},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf};var Zf=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Dl;var O=arguments[0],J=arguments[1];this._op=O,this._geometryFactory=J};Zf.prototype.filterCoveredNodeToPoint=function(O){var J=O.getCoordinate();if(!this._op.isCoveredByLA(J)){var ot=this._geometryFactory.createPoint(J);this._resultPointList.add(ot)}},Zf.prototype.extractNonCoveredResultNodes=function(O){for(var J=this._op.getGraph().getNodes().iterator();J.hasNext();){var ot=J.next();if(!(ot.isInResult()||ot.isIncidentEdgeInResult()||0!==ot.getEdges().getDegree()&&O!==ig.INTERSECTION)){var st=ot.getLabel();ig.isResultOfOp(st,O)&&this.filterCoveredNodeToPoint(ot)}}},Zf.prototype.build=function(O){return this.extractNonCoveredResultNodes(O),this._resultPointList},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf};var Kf=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Kf.prototype.transformPoint=function(O,J){return this._factory.createPoint(this.transformCoordinates(O.getCoordinateSequence(),O))},Kf.prototype.transformPolygon=function(O,J){var ot=!0,st=this.transformLinearRing(O.getExteriorRing(),O);null!==st&&st instanceof Ec&&!st.isEmpty()||(ot=!1);for(var at=new Dl,ut=0;ut<O.getNumInteriorRing();ut++){var ct=this.transformLinearRing(O.getInteriorRingN(ut),O);null===ct||ct.isEmpty()||(ct instanceof Ec||(ot=!1),at.add(ct))}if(ot)return this._factory.createPolygon(st,at.toArray([]));var ht=new Dl;return null!==st&&ht.add(st),ht.addAll(at),this._factory.buildGeometry(ht)},Kf.prototype.createCoordinateSequence=function(O){return this._factory.getCoordinateSequenceFactory().create(O)},Kf.prototype.getInputGeometry=function(){return this._inputGeom},Kf.prototype.transformMultiLineString=function(O,J){for(var ot=new Dl,st=0;st<O.getNumGeometries();st++){var at=this.transformLineString(O.getGeometryN(st),O);null!==at&&(at.isEmpty()||ot.add(at))}return this._factory.buildGeometry(ot)},Kf.prototype.transformCoordinates=function(O,J){return this.copy(O)},Kf.prototype.transformLineString=function(O,J){return this._factory.createLineString(this.transformCoordinates(O.getCoordinateSequence(),O))},Kf.prototype.transformMultiPoint=function(O,J){for(var ot=new Dl,st=0;st<O.getNumGeometries();st++){var at=this.transformPoint(O.getGeometryN(st),O);null!==at&&(at.isEmpty()||ot.add(at))}return this._factory.buildGeometry(ot)},Kf.prototype.transformMultiPolygon=function(O,J){for(var ot=new Dl,st=0;st<O.getNumGeometries();st++){var at=this.transformPolygon(O.getGeometryN(st),O);null!==at&&(at.isEmpty()||ot.add(at))}return this._factory.buildGeometry(ot)},Kf.prototype.copy=function(O){return O.copy()},Kf.prototype.transformGeometryCollection=function(O,J){for(var ot=new Dl,st=0;st<O.getNumGeometries();st++){var at=this.transform(O.getGeometryN(st));null!==at&&(this._pruneEmptyGeometry&&at.isEmpty()||ot.add(at))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(rh.toGeometryArray(ot)):this._factory.buildGeometry(ot)},Kf.prototype.transform=function(O){if(this._inputGeom=O,this._factory=O.getFactory(),O instanceof fc)return this.transformPoint(O,null);if(O instanceof xc)return this.transformMultiPoint(O,null);if(O instanceof Ec)return this.transformLinearRing(O,null);if(O instanceof hc)return this.transformLineString(O,null);if(O instanceof lc)return this.transformMultiLineString(O,null);if(O instanceof vc)return this.transformPolygon(O,null);if(O instanceof Ac)return this.transformMultiPolygon(O,null);if(O instanceof ac)return this.transformGeometryCollection(O,null);throw new Xu("Unknown Geometry subtype: "+O.getClass().getName())},Kf.prototype.transformLinearRing=function(O,J){var ot=this.transformCoordinates(O.getCoordinateSequence(),O);if(null===ot)return this._factory.createLinearRing(null);var st=ot.size();return st>0&&st<4&&!this._preserveType?this._factory.createLineString(ot):this._factory.createLinearRing(ot)},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf};var df=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new vp,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof hc&&"number"==typeof arguments[1]){var O=arguments[1];t.call(this,arguments[0].getCoordinates(),O)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var J=arguments[0],ot=arguments[1];this._srcPts=J,this._isClosed=t.isClosed(J),this._snapTolerance=ot}};df.prototype.snapVertices=function(O,J){for(var ot=this._isClosed?O.size()-1:O.size(),st=0;st<ot;st++){var at=O.get(st),ut=this.findSnapForVertex(at,J);null!==ut&&(O.set(st,new Wu(ut)),0===st&&this._isClosed&&O.set(O.size()-1,new Wu(ut)))}},df.prototype.findSnapForVertex=function(O,J){for(var ot=0;ot<J.length;ot++){if(O.equals2D(J[ot]))return null;if(O.distance(J[ot])<this._snapTolerance)return J[ot]}return null},df.prototype.snapTo=function(O){var J=new Gl(this._srcPts);return this.snapVertices(J,O),this.snapSegments(J,O),J.toCoordinateArray()},df.prototype.snapSegments=function(O,J){if(0===J.length)return null;var ot=J.length;J[0].equals2D(J[J.length-1])&&(ot=J.length-1);for(var st=0;st<ot;st++){var at=J[st],ut=this.findSegmentIndexToSnap(at,O);ut>=0&&O.add(ut+1,new Wu(at),!1)}},df.prototype.findSegmentIndexToSnap=function(O,J){for(var ot=this,st=nl.MAX_VALUE,at=-1,ut=0;ut<J.size()-1;ut++){if(ot._seg.p0=J.get(ut),ot._seg.p1=J.get(ut+1),ot._seg.p0.equals2D(O)||ot._seg.p1.equals2D(O)){if(ot._allowSnappingToSourceVertices)continue;return-1}var ct=ot._seg.distance(O);ct<ot._snapTolerance&&ct<st&&(st=ct,at=ut)}return at},df.prototype.setAllowSnappingToSourceVertices=function(O){this._allowSnappingToSourceVertices=O},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df.isClosed=function(O){return!(O.length<=1)&&O[0].equals2D(O[O.length-1])};var $f=function(O){this._srcGeom=O||null},mf={SNAP_PRECISION_FACTOR:{configurable:!0}};$f.prototype.snapTo=function(O,J){var ot=this.extractTargetCoordinates(O);return new wf(J,ot).transform(this._srcGeom)},$f.prototype.snapToSelf=function(O,J){var ot=this.extractTargetCoordinates(this._srcGeom),st=new wf(O,ot,!0).transform(this._srcGeom),at=st;return J&&gl(at,$c)&&(at=st.buffer(0)),at},$f.prototype.computeSnapTolerance=function(O){return this.computeMinimumSegmentLength(O)/10},$f.prototype.extractTargetCoordinates=function(O){for(var J=new Lc,ot=O.getCoordinates(),st=0;st<ot.length;st++)J.add(ot[st]);return J.toArray(new Array(0).fill(null))},$f.prototype.computeMinimumSegmentLength=function(O){for(var J=nl.MAX_VALUE,ot=0;ot<O.length-1;ot++){var st=O[ot].distance(O[ot+1]);st<J&&(J=st)}return J},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f},$f.snap=function(O,J,ot){var st=new Array(2).fill(null),at=new $f(O);st[0]=at.snapTo(J,ot);var ut=new $f(J);return st[1]=ut.snapTo(st[0],ot),st},$f.computeOverlaySnapTolerance=function(){if(1===arguments.length){var O=arguments[0],J=$f.computeSizeBasedSnapTolerance(O),ot=O.getPrecisionModel();if(ot.getType()===Zc.FIXED){var st=1/ot.getScale()*2/1.415;st>J&&(J=st)}return J}if(2===arguments.length){var at=arguments[0],ut=arguments[1];return Math.min($f.computeOverlaySnapTolerance(at),$f.computeOverlaySnapTolerance(ut))}},$f.computeSizeBasedSnapTolerance=function(O){var J=O.getEnvelopeInternal();return Math.min(J.getHeight(),J.getWidth())*$f.SNAP_PRECISION_FACTOR},$f.snapToSelf=function(O,J,ot){return new $f(O).snapToSelf(J,ot)},mf.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties($f,mf);var wf=function(O){function e(J,ot,st){O.call(this),this._snapTolerance=J||null,this._snapPts=ot||null,this._isSelfSnap=void 0!==st&&st}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(O,J){var ot=new df(O,this._snapTolerance);return ot.setAllowSnappingToSourceVertices(this._isSelfSnap),ot.snapTo(J)},e.prototype.transformCoordinates=function(O,J){var ot=O.toCoordinateArray(),st=this.snapLine(ot,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(st)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kf),ng=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ng.prototype.getCommon=function(){return nl.longBitsToDouble(this._commonBits)},ng.prototype.add=function(O){var J=nl.doubleToLongBits(O);return this._isFirst?(this._commonBits=J,this._commonSignExp=ng.signExpBits(this._commonBits),this._isFirst=!1,null):ng.signExpBits(J)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=ng.numCommonMostSigMantissaBits(this._commonBits,J),void(this._commonBits=ng.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},ng.prototype.toString=function(){if(1===arguments.length){var O=arguments[0],J=nl.longBitsToDouble(O),ot="0000000000000000000000000000000000000000000000000000000000000000"+nl.toBinaryString(O),st=ot.substring(ot.length-64);return st.substring(0,1)+"  "+st.substring(1,12)+"(exp) "+st.substring(12)+" [ "+J+" ]"}},ng.prototype.interfaces_=function(){return[]},ng.prototype.getClass=function(){return ng},ng.getBit=function(O,J){return O&1<<J?1:0},ng.signExpBits=function(O){return O>>52},ng.zeroLowerBits=function(O,J){return O&~((1<<J)-1)},ng.numCommonMostSigMantissaBits=function(O,J){for(var ot=0,st=52;st>=0;st--){if(ng.getBit(O,st)!==ng.getBit(J,st))return ot;ot++}return 52};var rg=function(){this._commonCoord=null,this._ccFilter=new og},Mf={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};rg.prototype.addCommonBits=function(O){var J=new sg(this._commonCoord);O.apply(J),O.geometryChanged()},rg.prototype.removeCommonBits=function(O){if(0===this._commonCoord.x&&0===this._commonCoord.y)return O;var J=new Wu(this._commonCoord);J.x=-J.x,J.y=-J.y;var ot=new sg(J);return O.apply(ot),O.geometryChanged(),O},rg.prototype.getCommonCoordinate=function(){return this._commonCoord},rg.prototype.add=function(O){O.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},rg.prototype.interfaces_=function(){return[]},rg.prototype.getClass=function(){return rg},Mf.CommonCoordinateFilter.get=function(){return og},Mf.Translater.get=function(){return sg},Object.defineProperties(rg,Mf);var og=function(){this._commonBitsX=new ng,this._commonBitsY=new ng};og.prototype.filter=function(O){this._commonBitsX.add(O.x),this._commonBitsY.add(O.y)},og.prototype.getCommonCoordinate=function(){return new Wu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},og.prototype.interfaces_=function(){return[Kl]},og.prototype.getClass=function(){return og};var sg=function(){this.trans=null;var O=arguments[0];this.trans=O};sg.prototype.filter=function(O,J){var ot=O.getOrdinate(J,0)+this.trans.x,st=O.getOrdinate(J,1)+this.trans.y;O.setOrdinate(J,0,ot),O.setOrdinate(J,1,st)},sg.prototype.isDone=function(){return!1},sg.prototype.isGeometryChanged=function(){return!0},sg.prototype.interfaces_=function(){return[Fc]},sg.prototype.getClass=function(){return sg};var ag=function(O,J){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=O,this._geom[1]=J,this.computeSnapTolerance()};ag.prototype.selfSnap=function(O){return new $f(O).snapTo(O,this._snapTolerance)},ag.prototype.removeCommonBits=function(O){this._cbr=new rg,this._cbr.add(O[0]),this._cbr.add(O[1]);var J=new Array(2).fill(null);return J[0]=this._cbr.removeCommonBits(O[0].copy()),J[1]=this._cbr.removeCommonBits(O[1].copy()),J},ag.prototype.prepareResult=function(O){return this._cbr.addCommonBits(O),O},ag.prototype.getResultGeometry=function(O){var J=this.snap(this._geom),ot=ig.overlayOp(J[0],J[1],O);return this.prepareResult(ot)},ag.prototype.checkValid=function(O){O.isValid()||Pl.out.println("Snapped geometry is invalid")},ag.prototype.computeSnapTolerance=function(){this._snapTolerance=$f.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ag.prototype.snap=function(O){var J=this.removeCommonBits(O);return $f.snap(J[0],J[1],this._snapTolerance)},ag.prototype.interfaces_=function(){return[]},ag.prototype.getClass=function(){return ag},ag.overlayOp=function(O,J,ot){return new ag(O,J).getResultGeometry(ot)},ag.union=function(O,J){return ag.overlayOp(O,J,ig.UNION)},ag.intersection=function(O,J){return ag.overlayOp(O,J,ig.INTERSECTION)},ag.symDifference=function(O,J){return ag.overlayOp(O,J,ig.SYMDIFFERENCE)},ag.difference=function(O,J){return ag.overlayOp(O,J,ig.DIFFERENCE)};var ug=function(O,J){this._geom=new Array(2).fill(null),this._geom[0]=O,this._geom[1]=J};ug.prototype.getResultGeometry=function(O){var J=null,ot=!1,st=null;try{J=ig.overlayOp(this._geom[0],this._geom[1],O),ot=!0}catch(O){if(!(O instanceof wl))throw O;st=O}if(!ot)try{J=ag.overlayOp(this._geom[0],this._geom[1],O)}catch(O){throw O instanceof wl?st:O}return J},ug.prototype.interfaces_=function(){return[]},ug.prototype.getClass=function(){return ug},ug.overlayOp=function(O,J,ot){return new ug(O,J).getResultGeometry(ot)},ug.union=function(O,J){return ug.overlayOp(O,J,ig.UNION)},ug.intersection=function(O,J){return ug.overlayOp(O,J,ig.INTERSECTION)},ug.symDifference=function(O,J){return ug.overlayOp(O,J,ig.SYMDIFFERENCE)},ug.difference=function(O,J){return ug.overlayOp(O,J,ig.DIFFERENCE)};var lg=function(){this.mce=null,this.chainIndex=null;var O=arguments[0],J=arguments[1];this.mce=O,this.chainIndex=J};lg.prototype.computeIntersections=function(O,J){this.mce.computeIntersectsForChain(this.chainIndex,O.mce,O.chainIndex,J)},lg.prototype.interfaces_=function(){return[]},lg.prototype.getClass=function(){return lg};var Lf=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var O=arguments[0],J=arguments[1];this._eventType=t.DELETE,this._xValue=O,this._insertEvent=J}else if(3===arguments.length){var ot=arguments[0],st=arguments[1],at=arguments[2];this._eventType=t.INSERT,this._label=ot,this._xValue=st,this._obj=at}},kf={INSERT:{configurable:!0},DELETE:{configurable:!0}};Lf.prototype.isDelete=function(){return this._eventType===Lf.DELETE},Lf.prototype.setDeleteEventIndex=function(O){this._deleteEventIndex=O},Lf.prototype.getObject=function(){return this._obj},Lf.prototype.compareTo=function(O){var J=O;return this._xValue<J._xValue?-1:this._xValue>J._xValue?1:this._eventType<J._eventType?-1:this._eventType>J._eventType?1:0},Lf.prototype.getInsertEvent=function(){return this._insertEvent},Lf.prototype.isInsert=function(){return this._eventType===Lf.INSERT},Lf.prototype.isSameLabel=function(O){return null!==this._label&&this._label===O._label},Lf.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Lf.prototype.interfaces_=function(){return[il]},Lf.prototype.getClass=function(){return Lf},kf.INSERT.get=function(){return 1},kf.DELETE.get=function(){return 2},Object.defineProperties(Lf,kf);var pg=function(){};pg.prototype.interfaces_=function(){return[]},pg.prototype.getClass=function(){return pg};var fg=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var O=arguments[0],J=arguments[1],ot=arguments[2];this._li=O,this._includeProper=J,this._recordIsolated=ot};fg.prototype.isTrivialIntersection=function(O,J,ot,st){if(O===ot&&1===this._li.getIntersectionNum()){if(fg.isAdjacentSegments(J,st))return!0;if(O.isClosed()){var at=O.getNumPoints()-1;if(0===J&&st===at||0===st&&J===at)return!0}}return!1},fg.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},fg.prototype.setIsDoneIfProperInt=function(O){this._isDoneWhenProperInt=O},fg.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},fg.prototype.isBoundaryPointInternal=function(O,J){for(var ot=J.iterator();ot.hasNext();){var st=ot.next().getCoordinate();if(O.isIntersection(st))return!0}return!1},fg.prototype.hasProperIntersection=function(){return this._hasProper},fg.prototype.hasIntersection=function(){return this._hasIntersection},fg.prototype.isDone=function(){return this._isDone},fg.prototype.isBoundaryPoint=function(O,J){return!(null===J||!this.isBoundaryPointInternal(O,J[0])&&!this.isBoundaryPointInternal(O,J[1]))},fg.prototype.setBoundaryNodes=function(O,J){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=O,this._bdyNodes[1]=J},fg.prototype.addIntersections=function(O,J,ot,st){if(O===ot&&J===st)return null;this.numTests++;var at=O.getCoordinates()[J],ut=O.getCoordinates()[J+1],ct=ot.getCoordinates()[st],ht=ot.getCoordinates()[st+1];this._li.computeIntersection(at,ut,ct,ht),this._li.hasIntersection()&&(this._recordIsolated&&(O.setIsolated(!1),ot.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(O,J,ot,st)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(O.addIntersections(this._li,J,0),ot.addIntersections(this._li,st,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},fg.prototype.interfaces_=function(){return[]},fg.prototype.getClass=function(){return fg},fg.isAdjacentSegments=function(O,J){return 1===Math.abs(O-J)};var zf=function(O){function e(){O.call(this),this.events=new Dl,this.nOverlaps=null}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){np.sort(this.events);for(var O=0;O<this.events.size();O++){var J=this.events.get(O);J.isDelete()&&J.getInsertEvent().setDeleteEventIndex(O)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var O=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var J=0;J<this.events.size();J++){var ot=this.events.get(J);if(ot.isInsert()&&this.processOverlaps(J,ot.getDeleteEventIndex(),ot,O),O.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof fg&&gl(arguments[0],Al)&&gl(arguments[1],Al)){var st=arguments[0],at=arguments[1],ut=arguments[2];this.addEdges(st,st),this.addEdges(at,at),this.computeIntersections(ut)}else if("boolean"==typeof arguments[2]&&gl(arguments[0],Al)&&arguments[1]instanceof fg){var ct=arguments[0],ht=arguments[1];arguments[2]?this.addEdges(ct,null):this.addEdges(ct),this.computeIntersections(ht)}},e.prototype.addEdge=function(O,J){for(var ot=O.getMonotoneChainEdge(),st=ot.getStartIndexes(),at=0;at<st.length-1;at++){var ut=new lg(ot,at),ct=new Lf(J,ot.getMinX(at),ut);this.events.add(ct),this.events.add(new Lf(ot.getMaxX(at),ct))}},e.prototype.processOverlaps=function(O,J,ot,st){for(var at=ot.getObject(),ut=O;ut<J;ut++){var ct=this.events.get(ut);if(ct.isInsert()){var ht=ct.getObject();ot.isSameLabel(ct)||(at.computeIntersections(ht,st),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var O=arguments[0].iterator();O.hasNext();){var J=O.next();this.addEdge(J,J)}else if(2===arguments.length)for(var ot=arguments[1],st=arguments[0].iterator();st.hasNext();){var at=st.next();this.addEdge(at,ot)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pg),dg=function(){this._min=nl.POSITIVE_INFINITY,this._max=nl.NEGATIVE_INFINITY},Uf={NodeComparator:{configurable:!0}};dg.prototype.getMin=function(){return this._min},dg.prototype.intersects=function(O,J){return!(this._min>J||this._max<O)},dg.prototype.getMax=function(){return this._max},dg.prototype.toString=function(){return Fl.toLineString(new Wu(this._min,0),new Wu(this._max,0))},dg.prototype.interfaces_=function(){return[]},dg.prototype.getClass=function(){return dg},Uf.NodeComparator.get=function(){return vg},Object.defineProperties(dg,Uf);var vg=function(){};vg.prototype.compare=function(O,J){var ot=O,st=J,at=(ot._min+ot._max)/2,ut=(st._min+st._max)/2;return at<ut?-1:at>ut?1:0},vg.prototype.interfaces_=function(){return[sl]},vg.prototype.getClass=function(){return vg};var Hf=function(O){function e(){O.call(this),this._item=null;var J=arguments[0],ot=arguments[1],st=arguments[2];this._min=J,this._max=ot,this._item=st}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.query=function(O,J,ot){if(!this.intersects(O,J))return null;ot.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dg),Qf=function(O){function e(){O.call(this),this._node1=null,this._node2=null;var J=arguments[0],ot=arguments[1];this._node1=J,this._node2=ot,this.buildExtent(this._node1,this._node2)}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(O,J){this._min=Math.min(O._min,J._min),this._max=Math.max(O._max,J._max)},e.prototype.query=function(O,J,ot){if(!this.intersects(O,J))return null;null!==this._node1&&this._node1.query(O,J,ot),null!==this._node2&&this._node2.query(O,J,ot)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dg),xg=function(){this._leaves=new Dl,this._root=null,this._level=0};xg.prototype.buildTree=function(){np.sort(this._leaves,new dg.NodeComparator);for(var O=this._leaves,J=null,ot=new Dl;;){if(this.buildLevel(O,ot),1===ot.size())return ot.get(0);J=O,O=ot,ot=J}},xg.prototype.insert=function(O,J,ot){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Hf(O,J,ot))},xg.prototype.query=function(O,J,ot){this.init(),this._root.query(O,J,ot)},xg.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},xg.prototype.printNode=function(O){Pl.out.println(Fl.toLineString(new Wu(O._min,this._level),new Wu(O._max,this._level)))},xg.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},xg.prototype.buildLevel=function(O,J){this._level++,J.clear();for(var ot=0;ot<O.size();ot+=2){var st=O.get(ot);if(null===(ot+1<O.size()?O.get(ot):null))J.add(st);else{var at=new Qf(O.get(ot),O.get(ot+1));J.add(at)}}},xg.prototype.interfaces_=function(){return[]},xg.prototype.getClass=function(){return xg};var Eg=function(){this._items=new Dl};Eg.prototype.visitItem=function(O){this._items.add(O)},Eg.prototype.getItems=function(){return this._items},Eg.prototype.interfaces_=function(){return[Qh]},Eg.prototype.getClass=function(){return Eg};var bg=function(){this._index=null;var O=arguments[0];if(!gl(O,$c))throw new Xu("Argument must be Polygonal");this._index=new Ng(O)},tg={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};bg.prototype.locate=function(O){var J=new Vl(O),ot=new Ig(J);return this._index.query(O.y,O.y,ot),J.getLocation()},bg.prototype.interfaces_=function(){return[jp]},bg.prototype.getClass=function(){return bg},tg.SegmentVisitor.get=function(){return Ig},tg.IntervalIndexedGeometry.get=function(){return Ng},Object.defineProperties(bg,tg);var Ig=function(){this._counter=null;var O=arguments[0];this._counter=O};Ig.prototype.visitItem=function(O){var J=O;this._counter.countSegment(J.getCoordinate(0),J.getCoordinate(1))},Ig.prototype.interfaces_=function(){return[Qh]},Ig.prototype.getClass=function(){return Ig};var Ng=function(){this._index=new xg;var O=arguments[0];this.init(O)};Ng.prototype.init=function(O){for(var J=Cf.getLines(O).iterator();J.hasNext();){var ot=J.next().getCoordinates();this.addLine(ot)}},Ng.prototype.addLine=function(O){for(var J=1;J<O.length;J++){var ot=new vp(O[J-1],O[J]),st=Math.min(ot.p0.y,ot.p1.y),at=Math.max(ot.p0.y,ot.p1.y);this._index.insert(st,at,ot)}},Ng.prototype.query=function(){if(2===arguments.length){var O=arguments[0],J=arguments[1],ot=new Eg;return this._index.query(O,J,ot),ot.getItems()}if(3===arguments.length){var st=arguments[0],at=arguments[1],ut=arguments[2];this._index.query(st,at,ut)}},Ng.prototype.interfaces_=function(){return[]},Ng.prototype.getClass=function(){return Ng};var eg=function(O){function e(){if(O.call(this),this._parentGeom=null,this._lineEdgeMap=new Qc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Pf,2===arguments.length){var J=arguments[0],ot=arguments[1],st=Ql.OGC_SFS_BOUNDARY_RULE;this._argIndex=J,this._parentGeom=ot,this._boundaryNodeRule=st,null!==ot&&this.add(ot)}else if(3===arguments.length){var at=arguments[0],ut=arguments[1],ct=arguments[2];this._argIndex=at,this._parentGeom=ut,this._boundaryNodeRule=ct,null!==ut&&this.add(ut)}}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(O,J){var ot=this._nodes.addNode(J).getLabel(),st=1;ot.getLocation(O,Sh.ON)===pl.BOUNDARY&&st++;var at=e.determineBoundary(this._boundaryNodeRule,st);ot.setLocation(O,at)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var O=arguments[0],J=arguments[1];return this.computeSelfNodes(O,J,!1)}if(3===arguments.length){var ot=arguments[1],st=arguments[2],at=new fg(arguments[0],!0,!1);at.setIsDoneIfProperInt(st);var ut=this.createEdgeSetIntersector(),ct=this._parentGeom instanceof Ec||this._parentGeom instanceof vc||this._parentGeom instanceof Ac,ht=ot||!ct;return ut.computeIntersections(this._edges,at,ht),this.addSelfIntersectionNodes(this._argIndex),at}},e.prototype.computeSplitEdges=function(O){for(var J=this._edges.iterator();J.hasNext();)J.next().eiList.addSplitEdges(O)},e.prototype.computeEdgeIntersections=function(O,J,ot){var st=new fg(J,ot,!0);return st.setBoundaryNodes(this.getBoundaryNodes(),O.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,O._edges,st),st},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof fc){var O=arguments[0].getCoordinate();this.insertPoint(this._argIndex,O,pl.INTERIOR)}else if(arguments[0]instanceof Wu){var J=arguments[0];this.insertPoint(this._argIndex,J,pl.INTERIOR)}},e.prototype.addPolygon=function(O){this.addPolygonRing(O.getExteriorRing(),pl.EXTERIOR,pl.INTERIOR);for(var J=0;J<O.getNumInteriorRing();J++){var ot=O.getInteriorRingN(J);this.addPolygonRing(ot,pl.INTERIOR,pl.EXTERIOR)}},e.prototype.addEdge=function(O){this.insertEdge(O);var J=O.getCoordinates();this.insertPoint(this._argIndex,J[0],pl.BOUNDARY),this.insertPoint(this._argIndex,J[J.length-1],pl.BOUNDARY)},e.prototype.addLineString=function(O){var J=pc.removeRepeatedPoints(O.getCoordinates());if(J.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=J[0],null;var ot=new Tp(J,new vh(this._argIndex,pl.INTERIOR));this._lineEdgeMap.put(O,ot),this.insertEdge(ot),ql.isTrue(J.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,J[0]),this.insertBoundaryPoint(this._argIndex,J[J.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var O=this.getBoundaryNodes(),J=new Array(O.size()).fill(null),ot=0,st=O.iterator();st.hasNext();){var at=st.next();J[ot++]=at.getCoordinate().copy()}return J},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(O,J,ot){if(this.isBoundaryNode(O,J))return null;ot===pl.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(O,J):this.insertPoint(O,J,ot)},e.prototype.addPolygonRing=function(O,J,ot){if(O.isEmpty())return null;var st=pc.removeRepeatedPoints(O.getCoordinates());if(st.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=st[0],null;var at=J,ut=ot;Xl.isCCW(st)&&(at=ot,ut=J);var ct=new Tp(st,new vh(this._argIndex,pl.BOUNDARY,at,ut));this._lineEdgeMap.put(O,ct),this.insertEdge(ct),this.insertPoint(this._argIndex,st[0],pl.BOUNDARY)},e.prototype.insertPoint=function(O,J,ot){var st=this._nodes.addNode(J),at=st.getLabel();null===at?st._label=new vh(O,ot):at.setLocation(O,ot)},e.prototype.createEdgeSetIntersector=function(){return new zf},e.prototype.addSelfIntersectionNodes=function(O){for(var J=this._edges.iterator();J.hasNext();)for(var ot=J.next(),st=ot.getLabel().getLocation(O),at=ot.eiList.iterator();at.hasNext();){var ut=at.next();this.addSelfIntersectionNode(O,ut.coord,st)}},e.prototype.add=function(){if(1!==arguments.length)return O.prototype.add.apply(this,arguments);var J=arguments[0];if(J.isEmpty())return null;if(J instanceof Ac&&(this._useBoundaryDeterminationRule=!1),J instanceof vc)this.addPolygon(J);else if(J instanceof hc)this.addLineString(J);else if(J instanceof fc)this.addPoint(J);else if(J instanceof xc)this.addCollection(J);else if(J instanceof lc)this.addCollection(J);else if(J instanceof Ac)this.addCollection(J);else{if(!(J instanceof ac))throw new Error(J.getClass().getName());this.addCollection(J)}},e.prototype.addCollection=function(O){for(var J=0;J<O.getNumGeometries();J++){var ot=O.getGeometryN(J);this.add(ot)}},e.prototype.locate=function(O){return gl(this._parentGeom,$c)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new bg(this._parentGeom)),this._areaPtLocator.locate(O)):this._ptLocator.locate(O,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var J=arguments[0];return this._lineEdgeMap.get(J)}return O.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(O,J){return O.isInBoundary(J)?pl.BOUNDARY:pl.INTERIOR},e}(Hh),Cg=function(){if(this._li=new Ml,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var O=arguments[0];this.setComputationPrecision(O.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new eg(0,O)}else if(2===arguments.length){var J=arguments[0],ot=arguments[1],st=Ql.OGC_SFS_BOUNDARY_RULE;J.getPrecisionModel().compareTo(ot.getPrecisionModel())>=0?this.setComputationPrecision(J.getPrecisionModel()):this.setComputationPrecision(ot.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new eg(0,J,st),this._arg[1]=new eg(1,ot,st)}else if(3===arguments.length){var at=arguments[0],ut=arguments[1],ct=arguments[2];at.getPrecisionModel().compareTo(ut.getPrecisionModel())>=0?this.setComputationPrecision(at.getPrecisionModel()):this.setComputationPrecision(ut.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new eg(0,at,ct),this._arg[1]=new eg(1,ut,ct)}};Cg.prototype.getArgGeometry=function(O){return this._arg[O].getGeometry()},Cg.prototype.setComputationPrecision=function(O){this._resultPrecisionModel=O,this._li.setPrecisionModel(this._resultPrecisionModel)},Cg.prototype.interfaces_=function(){return[]},Cg.prototype.getClass=function(){return Cg};var Pg=function(){};Pg.prototype.interfaces_=function(){return[]},Pg.prototype.getClass=function(){return Pg},Pg.map=function(){if(arguments[0]instanceof Wl&&gl(arguments[1],Pg.MapOp)){for(var O=arguments[0],J=arguments[1],ot=new Dl,st=0;st<O.getNumGeometries();st++){var at=J.map(O.getGeometryN(st));null!==at&&ot.add(at)}return O.getFactory().buildGeometry(ot)}if(gl(arguments[0],ic)&&gl(arguments[1],Pg.MapOp)){for(var ut=arguments[0],ct=arguments[1],ht=new Dl,pt=ut.iterator();pt.hasNext();){var mt=pt.next(),xt=ct.map(mt);null!==xt&&ht.add(xt)}return ht}},Pg.MapOp=function(){};var ig=function(O){function e(){var J=arguments[0],ot=arguments[1];O.call(this,J,ot),this._ptLocator=new Pf,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Jp,this._resultPolyList=new Dl,this._resultLineList=new Dl,this._resultPointList=new Dl,this._graph=new Hh(new Cp),this._geomFact=J.getFactory()}return O&&(e.__proto__=O),e.prototype=Object.create(O&&O.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(O){var J=this._edgeList.findEqualEdge(O);if(null!==J){var ot=J.getLabel(),st=O.getLabel();J.isPointwiseEqual(O)||(st=new vh(O.getLabel())).flip();var at=J.getDepth();at.isNull()&&at.add(ot),at.add(st),ot.merge(st)}else this._edgeList.add(O)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var O=this._graph.getEdgeEnds().iterator();O.hasNext();){var J=O.next(),ot=J.getSym();J.isInResult()&&ot.isInResult()&&(J.setInResult(!1),ot.setInResult(!1))}},e.prototype.isCoveredByLA=function(O){return!!this.isCovered(O,this._resultLineList)||!!this.isCovered(O,this._resultPolyList)},e.prototype.computeGeometry=function(O,J,ot,st){var at=new Dl;return at.addAll(O),at.addAll(J),at.addAll(ot),at.isEmpty()?e.createEmptyResult(st,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(at)},e.prototype.mergeSymLabels=function(){for(var O=this._graph.getNodes().iterator();O.hasNext();)O.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(O,J){for(var ot=J.iterator();ot.hasNext();){var st=ot.next();if(this._ptLocator.locate(O,st)!==pl.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var O=new Dl,J=this._edgeList.iterator();J.hasNext();){var ot=J.next();ot.isCollapsed()&&(J.remove(),O.add(ot.getCollapsedEdge()))}this._edgeList.addAll(O)},e.prototype.updateNodeLabelling=function(){for(var O=this._graph.getNodes().iterator();O.hasNext();){var J=O.next(),ot=J.getEdges().getLabel();J.getLabel().merge(ot)}},e.prototype.getResultGeometry=function(O){return this.computeOverlay(O),this._resultGeom},e.prototype.insertUniqueEdges=function(O){for(var J=O.iterator();J.hasNext();){var ot=J.next();this.insertUniqueEdge(ot)}},e.prototype.computeOverlay=function(O){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var J=new Dl;this._arg[0].computeSplitEdges(J),this._arg[1].computeSplitEdges(J),this.insertUniqueEdges(J),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),gf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(O),this.cancelDuplicateResultEdges();var ot=new Wh(this._geomFact);ot.add(this._graph),this._resultPolyList=ot.getPolygons();var st=new Jf(this,this._geomFact,this._ptLocator);this._resultLineList=st.build(O);var at=new Zf(this,this._geomFact,this._ptLocator);this._resultPointList=at.build(O),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,O)},e.prototype.labelIncompleteNode=function(O,J){var ot=this._ptLocator.locate(O.getCoordinate(),this._arg[J].getGeometry());O.getLabel().setLocation(J,ot)},e.prototype.copyPoints=function(O){for(var J=this._arg[O].getNodeIterator();J.hasNext();){var ot=J.next();this._graph.addNode(ot.getCoordinate()).setLabel(O,ot.getLabel().getLocation(O))}},e.prototype.findResultAreaEdges=function(O){for(var J=this._graph.getEdgeEnds().iterator();J.hasNext();){var ot=J.next(),st=ot.getLabel();st.isArea()&&!ot.isInteriorAreaEdge()&&e.isResultOfOp(st.getLocation(0,Sh.RIGHT),st.getLocation(1,Sh.RIGHT),O)&&ot.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var O=this._edgeList.iterator();O.hasNext();){var J=O.next(),ot=J.getLabel(),st=J.getDepth();if(!st.isNull()){st.normalize();for(var at=0;at<2;at++)ot.isNull(at)||!ot.isArea()||st.isNull(at)||(0===st.getDelta(at)?ot.toLine(at):(ql.isTrue(!st.isNull(at,Sh.LEFT),"depth of LEFT side has not been initialized"),ot.setLocation(at,Sh.LEFT,st.getLocation(at,Sh.LEFT)),ql.isTrue(!st.isNull(at,Sh.RIGHT),"depth of RIGHT side has not been initialized"),ot.setLocation(at,Sh.RIGHT,st.getLocation(at,Sh.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var O=this._graph.getNodes().iterator();O.hasNext();)O.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var O=this._graph.getNodes().iterator();O.hasNext();){var J=O.next(),ot=J.getLabel();J.isIsolated()&&(ot.isNull(0)?this.labelIncompleteNode(J,0):this.labelIncompleteNode(J,1)),J.getEdges().updateLabelling(ot)}},e.prototype.isCoveredByA=function(O){return!!this.isCovered(O,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cg);ig.overlayOp=function(O,J,ot){return new ig(O,J).getResultGeometry(ot)},ig.intersection=function(O,J){if(O.isEmpty()||J.isEmpty())return ig.createEmptyResult(ig.INTERSECTION,O,J,O.getFactory());if(O.isGeometryCollection()){var ot=J;return Wf.map(O,{interfaces_:function(){return[Pg.MapOp]},map:function(O){return O.intersection(ot)}})}return O.checkNotGeometryCollection(O),O.checkNotGeometryCollection(J),ug.overlayOp(O,J,ig.INTERSECTION)},ig.symDifference=function(O,J){if(O.isEmpty()||J.isEmpty()){if(O.isEmpty()&&J.isEmpty())return ig.createEmptyResult(ig.SYMDIFFERENCE,O,J,O.getFactory());if(O.isEmpty())return J.copy();if(J.isEmpty())return O.copy()}return O.checkNotGeometryCollection(O),O.checkNotGeometryCollection(J),ug.overlayOp(O,J,ig.SYMDIFFERENCE)},ig.resultDimension=function(O,J,ot){var st=J.getDimension(),at=ot.getDimension(),ut=-1;switch(O){case ig.INTERSECTION:ut=Math.min(st,at);break;case ig.UNION:ut=Math.max(st,at);break;case ig.DIFFERENCE:ut=st;break;case ig.SYMDIFFERENCE:ut=Math.max(st,at)}return ut},ig.createEmptyResult=function(O,J,ot,st){var at=null;switch(ig.resultDimension(O,J,ot)){case-1:at=st.createGeometryCollection(new Array(0).fill(null));break;case 0:at=st.createPoint();break;case 1:at=st.createLineString();break;case 2:at=st.createPolygon()}return at},ig.difference=function(O,J){return O.isEmpty()?ig.createEmptyResult(ig.DIFFERENCE,O,J,O.getFactory()):J.isEmpty()?O.copy():(O.checkNotGeometryCollection(O),O.checkNotGeometryCollection(J),ug.overlayOp(O,J,ig.DIFFERENCE))},ig.isResultOfOp=function(){if(2===arguments.length){var O=arguments[0],J=arguments[1],ot=O.getLocation(0),st=O.getLocation(1);return ig.isResultOfOp(ot,st,J)}if(3===arguments.length){var at=arguments[0],ut=arguments[1];switch(at===pl.BOUNDARY&&(at=pl.INTERIOR),ut===pl.BOUNDARY&&(ut=pl.INTERIOR),arguments[2]){case ig.INTERSECTION:return at===pl.INTERIOR&&ut===pl.INTERIOR;case ig.UNION:return at===pl.INTERIOR||ut===pl.INTERIOR;case ig.DIFFERENCE:return at===pl.INTERIOR&&ut!==pl.INTERIOR;case ig.SYMDIFFERENCE:return at===pl.INTERIOR&&ut!==pl.INTERIOR||at!==pl.INTERIOR&&ut===pl.INTERIOR}return!1}},ig.INTERSECTION=1,ig.UNION=2,ig.DIFFERENCE=3,ig.SYMDIFFERENCE=4;var Lg=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Pf,this._seg=new vp;var O=arguments[0],J=arguments[1];this._g=O,this._boundaryDistanceTolerance=J,this._linework=this.extractLinework(O)};Lg.prototype.isWithinToleranceOfBoundary=function(O){for(var J=this,ot=0;ot<this._linework.getNumGeometries();ot++)for(var st=J._linework.getGeometryN(ot).getCoordinateSequence(),at=0;at<st.size()-1;at++)if(st.getCoordinate(at,J._seg.p0),st.getCoordinate(at+1,J._seg.p1),J._seg.distance(O)<=J._boundaryDistanceTolerance)return!0;return!1},Lg.prototype.getLocation=function(O){return this.isWithinToleranceOfBoundary(O)?pl.BOUNDARY:this._ptLocator.locate(O,this._g)},Lg.prototype.extractLinework=function(O){var J=new Og;O.apply(J);var ot=J.getLinework(),st=rh.toLineStringArray(ot);return O.getFactory().createMultiLineString(st)},Lg.prototype.interfaces_=function(){return[]},Lg.prototype.getClass=function(){return Lg};var Og=function(){this._linework=null,this._linework=new Dl};Og.prototype.getLinework=function(){return this._linework},Og.prototype.filter=function(O){if(O instanceof vc){var J=O;this._linework.add(J.getExteriorRing());for(var ot=0;ot<J.getNumInteriorRing();ot++)this._linework.add(J.getInteriorRingN(ot))}},Og.prototype.interfaces_=function(){return[Dc]},Og.prototype.getClass=function(){return Og};var Rg=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var O=arguments[0];this._g=O};Rg.prototype.extractPoints=function(O,J,ot){for(var st=O.getCoordinates(),at=0;at<st.length-1;at++)this.computeOffsetPoints(st[at],st[at+1],J,ot)},Rg.prototype.setSidesToGenerate=function(O,J){this._doLeft=O,this._doRight=J},Rg.prototype.getPoints=function(O){for(var J=new Dl,ot=Cf.getLines(this._g).iterator();ot.hasNext();){var st=ot.next();this.extractPoints(st,O,J)}return J},Rg.prototype.computeOffsetPoints=function(O,J,ot,st){var at=J.x-O.x,ut=J.y-O.y,ct=Math.sqrt(at*at+ut*ut),ht=ot*at/ct,pt=ot*ut/ct,mt=(J.x+O.x)/2,xt=(J.y+O.y)/2;if(this._doLeft){var Nt=new Wu(mt-pt,xt+ht);st.add(Nt)}if(this._doRight){var St=new Wu(mt+pt,xt-ht);st.add(St)}},Rg.prototype.interfaces_=function(){return[]},Rg.prototype.getClass=function(){return Rg};var cg=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Dl;var O=arguments[0],J=arguments[1],ot=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(O,J),this._geom=[O,J,ot],this._locFinder=[new Lg(this._geom[0],this._boundaryDistanceTolerance),new Lg(this._geom[1],this._boundaryDistanceTolerance),new Lg(this._geom[2],this._boundaryDistanceTolerance)]},hg={TOLERANCE:{configurable:!0}};cg.prototype.reportResult=function(O,J,ot){Pl.out.println("Overlay result invalid - A:"+pl.toLocationSymbol(J[0])+" B:"+pl.toLocationSymbol(J[1])+" expected:"+(ot?"i":"e")+" actual:"+pl.toLocationSymbol(J[2]))},cg.prototype.isValid=function(O){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(O)},cg.prototype.checkValid=function(){var O=this;if(1===arguments.length){for(var J=arguments[0],ot=0;ot<this._testCoords.size();ot++){var st=O._testCoords.get(ot);if(!O.checkValid(J,st))return O._invalidLocation=st,!1}return!0}if(2===arguments.length){var at=arguments[0],ut=arguments[1];return this._location[0]=this._locFinder[0].getLocation(ut),this._location[1]=this._locFinder[1].getLocation(ut),this._location[2]=this._locFinder[2].getLocation(ut),!!cg.hasLocation(this._location,pl.BOUNDARY)||this.isValidResult(at,this._location)}},cg.prototype.addTestPts=function(O){var J=new Rg(O);this._testCoords.addAll(J.getPoints(5*this._boundaryDistanceTolerance))},cg.prototype.isValidResult=function(O,J){var ot=ig.isResultOfOp(J[0],J[1],O),st=!(ot^J[2]===pl.INTERIOR);return st||this.reportResult(O,J,ot),st},cg.prototype.getInvalidLocation=function(){return this._invalidLocation},cg.prototype.interfaces_=function(){return[]},cg.prototype.getClass=function(){return cg},cg.hasLocation=function(O,J){for(var ot=0;ot<3;ot++)if(O[ot]===J)return!0;return!1},cg.computeBoundaryDistanceTolerance=function(O,J){return Math.min($f.computeSizeBasedSnapTolerance(O),$f.computeSizeBasedSnapTolerance(J))},cg.isValid=function(O,J,ot,st){return new cg(O,J,st).isValid(ot)},hg.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(cg,hg);var gg=function t(O){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(O),this._inputGeoms=O};gg.prototype.extractElements=function(O,J){if(null===O)return null;for(var ot=0;ot<O.getNumGeometries();ot++){var st=O.getGeometryN(ot);this._skipEmpty&&st.isEmpty()||J.add(st)}},gg.prototype.combine=function(){for(var O=new Dl,J=this._inputGeoms.iterator();J.hasNext();){var ot=J.next();this.extractElements(ot,O)}return 0===O.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(O)},gg.prototype.interfaces_=function(){return[]},gg.prototype.getClass=function(){return gg},gg.combine=function(){return 1===arguments.length?new gg(arguments[0]).combine():2===arguments.length?new gg(gg.createList(arguments[0],arguments[1])).combine():3===arguments.length?new gg(gg.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},gg.extractFactory=function(O){return O.isEmpty()?null:O.iterator().next().getFactory()},gg.createList=function(){if(2===arguments.length){var O=arguments[0],J=arguments[1],ot=new Dl;return ot.add(O),ot.add(J),ot}if(3===arguments.length){var st=arguments[0],at=arguments[1],ut=arguments[2],ct=new Dl;return ct.add(st),ct.add(at),ct.add(ut),ct}};var Fg=function(){this._inputPolys=null,this._geomFactory=null;var O=arguments[0];this._inputPolys=O,null===this._inputPolys&&(this._inputPolys=new Dl)},yg={STRTREE_NODE_CAPACITY:{configurable:!0}};Fg.prototype.reduceToGeometries=function(O){for(var J=new Dl,ot=O.iterator();ot.hasNext();){var st=ot.next(),at=null;gl(st,Al)?at=this.unionTree(st):st instanceof Wl&&(at=st),J.add(at)}return J},Fg.prototype.extractByEnvelope=function(O,J,ot){for(var st=new Dl,at=0;at<J.getNumGeometries();at++){var ut=J.getGeometryN(at);ut.getEnvelopeInternal().intersects(O)?st.add(ut):ot.add(ut)}return this._geomFactory.buildGeometry(st)},Fg.prototype.unionOptimized=function(O,J){var ot=O.getEnvelopeInternal(),st=J.getEnvelopeInternal();if(!ot.intersects(st))return gg.combine(O,J);if(O.getNumGeometries()<=1&&J.getNumGeometries()<=1)return this.unionActual(O,J);var at=ot.intersection(st);return this.unionUsingEnvelopeIntersection(O,J,at)},Fg.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var O=new Dh(Fg.STRTREE_NODE_CAPACITY),J=this._inputPolys.iterator();J.hasNext();){var ot=J.next();O.insert(ot.getEnvelopeInternal(),ot)}this._inputPolys=null;var st=O.itemsTree();return this.unionTree(st)},Fg.prototype.binaryUnion=function(){if(1===arguments.length){var O=arguments[0];return this.binaryUnion(O,0,O.size())}if(3===arguments.length){var J=arguments[0],ot=arguments[1],st=arguments[2];if(st-ot<=1){var at=Fg.getGeometry(J,ot);return this.unionSafe(at,null)}if(st-ot==2)return this.unionSafe(Fg.getGeometry(J,ot),Fg.getGeometry(J,ot+1));var ut=Math.trunc((st+ot)/2),ct=this.binaryUnion(J,ot,ut),ht=this.binaryUnion(J,ut,st);return this.unionSafe(ct,ht)}},Fg.prototype.repeatedUnion=function(O){for(var J=null,ot=O.iterator();ot.hasNext();){var st=ot.next();J=null===J?st.copy():J.union(st)}return J},Fg.prototype.unionSafe=function(O,J){return null===O&&null===J?null:null===O?J.copy():null===J?O.copy():this.unionOptimized(O,J)},Fg.prototype.unionActual=function(O,J){return Fg.restrictToPolygons(O.union(J))},Fg.prototype.unionTree=function(O){var J=this.reduceToGeometries(O);return this.binaryUnion(J)},Fg.prototype.unionUsingEnvelopeIntersection=function(O,J,ot){var st=new Dl,at=this.extractByEnvelope(ot,O,st),ut=this.extractByEnvelope(ot,J,st),ct=this.unionActual(at,ut);return st.add(ct),gg.combine(st)},Fg.prototype.bufferUnion=function(){if(1===arguments.length){var O=arguments[0];return O.get(0).getFactory().buildGeometry(O).buffer(0)}if(2===arguments.length){var J=arguments[0],ot=arguments[1];return J.getFactory().createGeometryCollection([J,ot]).buffer(0)}},Fg.prototype.interfaces_=function(){return[]},Fg.prototype.getClass=function(){return Fg},Fg.restrictToPolygons=function(O){if(gl(O,$c))return O;var J=Sf.getPolygons(O);return 1===J.size()?J.get(0):O.getFactory().createMultiPolygon(rh.toPolygonArray(J))},Fg.getGeometry=function(O,J){return J>=O.size()?null:O.get(J)},Fg.union=function(O){return new Fg(O).union()},yg.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Fg,yg);var Gg=function(){};function qg(){return new Bg}function Bg(){this.reset()}Gg.prototype.interfaces_=function(){return[]},Gg.prototype.getClass=function(){return Gg},Gg.union=function(O,J){if(O.isEmpty()||J.isEmpty()){if(O.isEmpty()&&J.isEmpty())return ig.createEmptyResult(ig.UNION,O,J,O.getFactory());if(O.isEmpty())return J.copy();if(J.isEmpty())return O.copy()}return O.checkNotGeometryCollection(O),O.checkNotGeometryCollection(J),ug.overlayOp(O,J,ig.UNION)},Bg.prototype={constructor:Bg,reset:function(){this.s=this.t=0},add:function(O){jg(_g,O,this.t),jg(this,_g.s,this.s),this.s?this.t+=_g.t:this.s=_g.t},valueOf:function(){return this.s}};var _g=new Bg;function jg(O,J,ot){var st=O.s=J+ot,at=st-J,ut=st-at;O.t=J-ut+(ot-at)}var mg=1e-6,wg=Math.PI,Sg=wg/2,Mg=wg/4,Tg=2*wg,Ag=180/wg,Dg=wg/180,Vg=Math.abs,kg=Math.atan,zg=Math.atan2,Ug=Math.cos,Xg=Math.sin,Yg=Math.sqrt;function nd(O){return O>1?0:O<-1?wg:Math.acos(O)}function rd(O){return O>1?Sg:O<-1?-Sg:Math.asin(O)}function id(){}function od(O,J){O&&Zg.hasOwnProperty(O.type)&&Zg[O.type](O,J)}var Wg,Hg,Qg={Feature:function(O,J){od(O.geometry,J)},FeatureCollection:function(O,J){for(var ot=O.features,st=-1,at=ot.length;++st<at;)od(ot[st].geometry,J)}},Zg={Sphere:function(O,J){J.sphere()},Point:function(O,J){O=O.coordinates,J.point(O[0],O[1],O[2])},MultiPoint:function(O,J){for(var ot=O.coordinates,st=-1,at=ot.length;++st<at;)O=ot[st],J.point(O[0],O[1],O[2])},LineString:function(O,J){ud(O.coordinates,J,0)},MultiLineString:function(O,J){for(var ot=O.coordinates,st=-1,at=ot.length;++st<at;)ud(ot[st],J,0)},Polygon:function(O,J){ld(O.coordinates,J)},MultiPolygon:function(O,J){for(var ot=O.coordinates,st=-1,at=ot.length;++st<at;)ld(ot[st],J)},GeometryCollection:function(O,J){for(var ot=O.geometries,st=-1,at=ot.length;++st<at;)od(ot[st],J)}};function ud(O,J,ot){var st,at=-1,ut=O.length-ot;for(J.lineStart();++at<ut;)st=O[at],J.point(st[0],st[1],st[2]);J.lineEnd()}function ld(O,J){var ot=-1,st=O.length;for(J.polygonStart();++ot<st;)ud(O[ot],J,1);J.polygonEnd()}function cd(O){return[zg(O[1],O[0]),rd(O[2])]}function hd(O){var J=O[0],ot=O[1],st=Ug(ot);return[st*Ug(J),st*Xg(J),Xg(ot)]}function pd(O,J){return O[0]*J[0]+O[1]*J[1]+O[2]*J[2]}function fd(O,J){return[O[1]*J[2]-O[2]*J[1],O[2]*J[0]-O[0]*J[2],O[0]*J[1]-O[1]*J[0]]}function gd(O,J){O[0]+=J[0],O[1]+=J[1],O[2]+=J[2]}function dd(O,J){return[O[0]*J,O[1]*J,O[2]*J]}function yd(O){var J=Yg(O[0]*O[0]+O[1]*O[1]+O[2]*O[2]);O[0]/=J,O[1]/=J,O[2]/=J}function vd(O,J){function n(ot,st){return ot=O(ot,st),J(ot[0],ot[1])}return O.invert&&J.invert&&(n.invert=function(ot,st){return(ot=J.invert(ot,st))&&O.invert(ot[0],ot[1])}),n}function _d(O,J){return[O>wg?O-Tg:O<-wg?O+Tg:O,J]}function md(O){return function(J,ot){return[(J+=O)>wg?J-Tg:J<-wg?J+Tg:J,ot]}}function xd(O){var J=md(O);return J.invert=md(-O),J}function Ed(O,J){var ot=Ug(O),st=Xg(O),at=Ug(J),ut=Xg(J);function s(O,J){var ct=Ug(J),ht=Ug(O)*ct,pt=Xg(O)*ct,mt=Xg(J),xt=mt*ot+ht*st;return[zg(pt*at-xt*ut,ht*ot-mt*st),rd(xt*at+pt*ut)]}return s.invert=function(O,J){var ct=Ug(J),ht=Ug(O)*ct,pt=Xg(O)*ct,mt=Xg(J),xt=mt*at-pt*ut;return[zg(pt*at+mt*ut,ht*ot+xt*st),rd(xt*ot-ht*st)]},s}function bd(O,J){(J=hd(J))[0]-=O,yd(J);var ot=nd(-J[1]);return((-J[2]<0?-ot:ot)+Tg-mg)%Tg}function wd(){var O,J=[];return{point:function(J,ot){O.push([J,ot])},lineStart:function(){J.push(O=[])},lineEnd:id,rejoin:function(){J.length>1&&J.push(J.pop().concat(J.shift()))},result:function(){var ot=J;return J=[],O=null,ot}}}function Id(O,J){return Vg(O[0]-J[0])<mg&&Vg(O[1]-J[1])<mg}function Nd(O,J,ot,st){this.x=O,this.z=J,this.o=ot,this.e=st,this.v=!1,this.n=this.p=null}function Sd(O,J,ot,st,at){var ut,ct,ht=[],pt=[];if(O.forEach((function(O){if(!((J=O.length-1)<=0)){var J,ot,st=O[0],ct=O[J];if(Id(st,ct)){for(at.lineStart(),ut=0;ut<J;++ut)at.point((st=O[ut])[0],st[1]);at.lineEnd()}else ht.push(ot=new Nd(st,O,null,!0)),pt.push(ot.o=new Nd(st,null,ot,!1)),ht.push(ot=new Nd(ct,O,null,!1)),pt.push(ot.o=new Nd(ct,null,ot,!0))}})),ht.length){for(pt.sort(J),Cd(ht),Cd(pt),ut=0,ct=pt.length;ut<ct;++ut)pt[ut].e=ot=!ot;for(var mt,xt,Nt=ht[0];;){for(var St=Nt,jt=!0;St.v;)if((St=St.n)===Nt)return;mt=St.z,at.lineStart();do{if(St.v=St.o.v=!0,St.e){if(jt)for(ut=0,ct=mt.length;ut<ct;++ut)at.point((xt=mt[ut])[0],xt[1]);else st(St.x,St.n.x,1,at);St=St.n}else{if(jt)for(mt=St.p.z,ut=mt.length-1;ut>=0;--ut)at.point((xt=mt[ut])[0],xt[1]);else st(St.x,St.p.x,-1,at);St=St.p}mt=(St=St.o).z,jt=!jt}while(!St.v);at.lineEnd()}}}function Cd(O){if(J=O.length){for(var J,ot,st=0,at=O[0];++st<J;)at.n=ot=O[st],ot.p=at,at=ot;at.n=ot=O[0],ot.p=at}}function Pd(O,J){return O<J?-1:O>J?1:O>=J?0:NaN}function Od(O){for(var J,ot,st,at=O.length,ut=-1,ct=0;++ut<at;)ct+=O[ut].length;for(ot=new Array(ct);--at>=0;)for(J=(st=O[at]).length;--J>=0;)ot[--ct]=st[J];return ot}qg(),qg(),qg(),_d.invert=_d,1===(Wg=Pd).length&&(Hg=Wg,Wg=function(O,J){return Pd(Hg(O),J)});var Kg=1e9,Jg=-Kg;var $g=qg();function Fd(O){return O}qg(),qg(),qg();var td=1/0,ed=td,sd=-td,ad=sd,Md={point:function(O,J){O<td&&(td=O),O>sd&&(sd=O),J<ed&&(ed=J),J>ad&&(ad=J)},lineStart:id,lineEnd:id,polygonStart:id,polygonEnd:id,result:function(){var O=[[td,ed],[sd,ad]];return sd=ad=-(ed=td=1/0),O}};function jd(O,J,ot,st){return function(at,ut){var ct,ht,pt,mt=J(ut),xt=at.invert(st[0],st[1]),Nt=wd(),St=J(Nt),jt=!1,Wt={point:d,lineStart:v,lineEnd:_,polygonStart:function(){Wt.point=m,Wt.lineStart=x,Wt.lineEnd=E,ht=[],ct=[]},polygonEnd:function(){Wt.point=d,Wt.lineStart=v,Wt.lineEnd=_,ht=Od(ht);var O=function(O,J){var ot=J[0],st=J[1],at=[Xg(ot),-Ug(ot),0],ut=0,ct=0;$g.reset();for(var ht=0,pt=O.length;ht<pt;++ht)if(xt=(mt=O[ht]).length)for(var mt,xt,Nt=mt[xt-1],St=Nt[0],jt=Nt[1]/2+Mg,Wt=Xg(jt),Ht=Ug(jt),Zt=0;Zt<xt;++Zt,St=Jt,Wt=ne,Ht=re,Nt=Kt){var Kt=mt[Zt],Jt=Kt[0],ee=Kt[1]/2+Mg,ne=Xg(ee),re=Ug(ee),De=Jt-St,qe=De>=0?1:-1,Ge=qe*De,Be=Ge>wg,pn=Wt*ne;if($g.add(zg(pn*qe*Xg(Ge),Ht*re+pn*Ug(Ge))),ut+=Be?De+qe*Tg:De,Be^St>=ot^Jt>=ot){var wn=fd(hd(Nt),hd(Kt));yd(wn);var In=fd(at,wn);yd(In);var Kn=(Be^De>=0?-1:1)*rd(In[2]);(st>Kn||st===Kn&&(wn[0]||wn[1]))&&(ct+=Be^De>=0?1:-1)}}return(ut<-1e-6||ut<mg&&$g<-1e-6)^1&ct}(ct,xt);ht.length?(jt||(ut.polygonStart(),jt=!0),Sd(ht,Vd,O,ot,ut)):O&&(jt||(ut.polygonStart(),jt=!0),ut.lineStart(),ot(null,null,1,ut),ut.lineEnd()),jt&&(ut.polygonEnd(),jt=!1),ht=ct=null},sphere:function(){ut.polygonStart(),ut.lineStart(),ot(null,null,1,ut),ut.lineEnd(),ut.polygonEnd()}};function d(J,ot){var st=at(J,ot);O(J=st[0],ot=st[1])&&ut.point(J,ot)}function y(O,J){var ot=at(O,J);mt.point(ot[0],ot[1])}function v(){Wt.point=y,mt.lineStart()}function _(){Wt.point=d,mt.lineEnd()}function m(O,J){pt.push([O,J]);var ot=at(O,J);St.point(ot[0],ot[1])}function x(){St.lineStart(),pt=[]}function E(){m(pt[0][0],pt[0][1]),St.lineEnd();var O,J,ot,st,at=St.clean(),mt=Nt.result(),xt=mt.length;if(pt.pop(),ct.push(pt),pt=null,xt)if(1&at){if((J=(ot=mt[0]).length-1)>0){for(jt||(ut.polygonStart(),jt=!0),ut.lineStart(),O=0;O<J;++O)ut.point((st=ot[O])[0],st[1]);ut.lineEnd()}}else xt>1&&2&at&&mt.push(mt.pop().concat(mt.shift())),ht.push(mt.filter(Ud))}return Wt}}function Ud(O){return O.length>1}function Vd(O,J){return((O=O.x)[0]<0?O[1]-Sg-mg:Sg-O[1])-((J=J.x)[0]<0?J[1]-Sg-mg:Sg-J[1])}qg();var Ld=jd((function(){return!0}),(function(O){var J,ot=NaN,st=NaN,at=NaN;return{lineStart:function(){O.lineStart(),J=1},point:function(ut,ct){var ht=ut>0?wg:-wg,pt=Vg(ut-ot);Vg(pt-wg)<mg?(O.point(ot,st=(st+ct)/2>0?Sg:-Sg),O.point(at,st),O.lineEnd(),O.lineStart(),O.point(ht,st),O.point(ut,st),J=0):at!==ht&&pt>=wg&&(Vg(ot-at)<mg&&(ot-=at*mg),Vg(ut-ht)<mg&&(ut-=ht*mg),st=function(O,J,ot,st){var at,ut,ct=Xg(O-ot);return Vg(ct)>mg?kg((Xg(J)*(ut=Ug(st))*Xg(ot)-Xg(st)*(at=Ug(J))*Xg(O))/(at*ut*ct)):(J+st)/2}(ot,st,ut,ct),O.point(at,st),O.lineEnd(),O.lineStart(),O.point(ht,st),J=0),O.point(ot=ut,st=ct),at=ht},lineEnd:function(){O.lineEnd(),ot=st=NaN},clean:function(){return 2-J}}}),(function(O,J,ot,st){var at;if(null==O)at=ot*Sg,st.point(-wg,at),st.point(0,at),st.point(wg,at),st.point(wg,0),st.point(wg,-at),st.point(0,-at),st.point(-wg,-at),st.point(-wg,0),st.point(-wg,at);else if(Vg(O[0]-J[0])>mg){var ut=O[0]<J[0]?wg:-wg;at=ot*ut/2,st.point(-ut,at),st.point(0,at),st.point(ut,at)}else st.point(J[0],J[1])}),[-wg,-Sg]);function Hd(O){return function(J){var ot=new Wd;for(var st in O)ot[st]=O[st];return ot.stream=J,ot}}function Wd(){}function Jd(O,J,ot){var st=J[1][0]-J[0][0],at=J[1][1]-J[0][1],ut=O.clipExtent&&O.clipExtent();O.scale(150).translate([0,0]),null!=ut&&O.clipExtent(null),function(O,J){O&&Qg.hasOwnProperty(O.type)?Qg[O.type](O,J):od(O,J)}(ot,O.stream(Md));var ct=Md.result(),ht=Math.min(st/(ct[1][0]-ct[0][0]),at/(ct[1][1]-ct[0][1])),pt=+J[0][0]+(st-ht*(ct[1][0]+ct[0][0]))/2,mt=+J[0][1]+(at-ht*(ct[1][1]+ct[0][1]))/2;return null!=ut&&O.clipExtent(ut),O.scale(150*ht).translate([pt,mt])}Wd.prototype={constructor:Wd,point:function(O,J){this.stream.point(O,J)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Rd=Ug(30*Dg);function Kd(O,J){return+J?function(O,J){function n(ot,st,at,ut,ct,ht,pt,mt,xt,Nt,St,jt,Wt,Ht){var Zt=pt-ot,Kt=mt-st,Jt=Zt*Zt+Kt*Kt;if(Jt>4*J&&Wt--){var ee=ut+Nt,ne=ct+St,re=ht+jt,De=Yg(ee*ee+ne*ne+re*re),qe=rd(re/=De),Ge=Vg(Vg(re)-1)<mg||Vg(at-xt)<mg?(at+xt)/2:zg(ne,ee),Be=O(Ge,qe),pn=Be[0],wn=Be[1],In=pn-ot,Kn=wn-st,or=Kt*In-Zt*Kn;(or*or/Jt>J||Vg((Zt*In+Kt*Kn)/Jt-.5)>.3||ut*Nt+ct*St+ht*jt<Rd)&&(n(ot,st,at,ut,ct,ht,pn,wn,Ge,ee/=De,ne/=De,re,Wt,Ht),Ht.point(pn,wn),n(pn,wn,Ge,ee,ne,re,pt,mt,xt,Nt,St,jt,Wt,Ht))}}return function(J){var ot,st,at,ut,ct,ht,pt,mt,xt,Nt,St,jt,Wt={point:y,lineStart:v,lineEnd:m,polygonStart:function(){J.polygonStart(),Wt.lineStart=x},polygonEnd:function(){J.polygonEnd(),Wt.lineStart=v}};function y(ot,st){ot=O(ot,st),J.point(ot[0],ot[1])}function v(){mt=NaN,Wt.point=_,J.lineStart()}function _(ot,st){var at=hd([ot,st]),ut=O(ot,st);n(mt,xt,pt,Nt,St,jt,mt=ut[0],xt=ut[1],pt=ot,Nt=at[0],St=at[1],jt=at[2],16,J),J.point(mt,xt)}function m(){Wt.point=y,J.lineEnd()}function x(){v(),Wt.point=E,Wt.lineEnd=b}function E(O,J){_(ot=O,J),st=mt,at=xt,ut=Nt,ct=St,ht=jt,Wt.point=_}function b(){n(mt,xt,pt,Nt,St,jt,st,at,ot,ut,ct,ht,16,J),Wt.lineEnd=m,m()}return Wt}}(O,J):function(O){return Hd({point:function(J,ot){J=O(J,ot),this.stream.point(J[0],J[1])}})}(O)}var Td=Hd({point:function(O,J){this.stream.point(O*Dg,J*Dg)}});function $d(O){return function(O){var J,ot,st,at,ut,ct,ht,pt,mt,xt,Nt=150,St=480,jt=250,Wt=0,Ht=0,Zt=0,Kt=0,Jt=0,ee=null,ne=Ld,re=null,De=Fd,qe=.5,Ge=Kd(C,qe);function N(O){return[(O=ut(O[0]*Dg,O[1]*Dg))[0]*Nt+ot,st-O[1]*Nt]}function S(O){return(O=ut.invert((O[0]-ot)/Nt,(st-O[1])/Nt))&&[O[0]*Ag,O[1]*Ag]}function C(O,at){return[(O=J(O,at))[0]*Nt+ot,st-O[1]*Nt]}function P(){ut=vd(at=function(O,J,ot){return(O%=Tg)?J||ot?vd(xd(O),Ed(J,ot)):xd(O):J||ot?Ed(J,ot):_d}(Zt,Kt,Jt),J);var O=J(Wt,Ht);return ot=St-O[0]*Nt,st=jt+O[1]*Nt,M()}function M(){return mt=xt=null,N}return N.stream=function(O){return mt&&xt===O?mt:mt=Td(ne(at,Ge(De(xt=O))))},N.clipAngle=function(O){return arguments.length?(ne=+O?function Yd(O,J){var ot=Ug(O),st=ot>0,at=Vg(ot)>mg;function o(O,J){return Ug(O)*Ug(J)>ot}function s(O,J,st){var at=[1,0,0],ut=fd(hd(O),hd(J)),ct=pd(ut,ut),ht=ut[0],pt=ct-ht*ht;if(!pt)return!st&&O;var mt=ot*ct/pt,xt=-ot*ht/pt,Nt=fd(at,ut),St=dd(at,mt);gd(St,dd(ut,xt));var jt=Nt,Wt=pd(St,jt),Ht=pd(jt,jt),Zt=Wt*Wt-Ht*(pd(St,St)-1);if(!(Zt<0)){var Kt=Yg(Zt),Jt=dd(jt,(-Wt-Kt)/Ht);if(gd(Jt,St),Jt=cd(Jt),!st)return Jt;var ee,ne=O[0],re=J[0],De=O[1],qe=J[1];re<ne&&(ee=ne,ne=re,re=ee);var Ge=re-ne,Be=Vg(Ge-wg)<mg;if(!Be&&qe<De&&(ee=De,De=qe,qe=ee),Be||Ge<mg?Be?De+qe>0^Jt[1]<(Vg(Jt[0]-ne)<mg?De:qe):De<=Jt[1]&&Jt[1]<=qe:Ge>wg^(ne<=Jt[0]&&Jt[0]<=re)){var pn=dd(jt,(-Wt+Kt)/Ht);return gd(pn,St),[Jt,cd(pn)]}}}function a(J,ot){var at=st?O:wg-O,ut=0;return J<-at?ut|=1:J>at&&(ut|=2),ot<-at?ut|=4:ot>at&&(ut|=8),ut}return jd(o,(function(O){var J,ot,ut,ct,ht;return{lineStart:function(){ct=ut=!1,ht=1},point:function(pt,mt){var xt,Nt=[pt,mt],St=o(pt,mt),jt=st?St?0:a(pt,mt):St?a(pt+(pt<0?wg:-wg),mt):0;if(!J&&(ct=ut=St)&&O.lineStart(),St!==ut&&(!(xt=s(J,Nt))||Id(J,xt)||Id(Nt,xt))&&(Nt[0]+=mg,Nt[1]+=mg,St=o(Nt[0],Nt[1])),St!==ut)ht=0,St?(O.lineStart(),xt=s(Nt,J),O.point(xt[0],xt[1])):(xt=s(J,Nt),O.point(xt[0],xt[1]),O.lineEnd()),J=xt;else if(at&&J&&st^St){var Wt;jt&ot||!(Wt=s(Nt,J,!0))||(ht=0,st?(O.lineStart(),O.point(Wt[0][0],Wt[0][1]),O.point(Wt[1][0],Wt[1][1]),O.lineEnd()):(O.point(Wt[1][0],Wt[1][1]),O.lineEnd(),O.lineStart(),O.point(Wt[0][0],Wt[0][1])))}!St||J&&Id(J,Nt)||O.point(Nt[0],Nt[1]),J=Nt,ut=St,ot=jt},lineEnd:function(){ut&&O.lineEnd(),J=null},clean:function(){return ht|(ct&&ut)<<1}}}),(function(ot,st,at,ut){!function(O,J,ot,st,at,ut){if(ot){var ct=Ug(J),ht=Xg(J),pt=st*ot;null==at?(at=J+st*Tg,ut=J-pt/2):(at=bd(ct,at),ut=bd(ct,ut),(st>0?at<ut:at>ut)&&(at+=st*Tg));for(var mt,xt=at;st>0?xt>ut:xt<ut;xt-=pt)mt=cd([ct,-ht*Ug(xt),-ht*Xg(xt)]),O.point(mt[0],mt[1])}}(ut,O,J,at,ot,st)}),st?[0,-O]:[-wg,O-wg])}(ee=O*Dg,6*Dg):(ee=null,Ld),M()):ee*Ag},N.clipExtent=function(O){return arguments.length?(De=null==O?(re=ct=ht=pt=null,Fd):function Ad(O,J,ot,st){function i(at,ut){return O<=at&&at<=ot&&J<=ut&&ut<=st}function o(at,ut,ct,ht){var pt=0,mt=0;if(null==at||(pt=s(at,ct))!==(mt=s(ut,ct))||u(at,ut)<0^ct>0)do{ht.point(0===pt||3===pt?O:ot,pt>1?st:J)}while((pt=(pt+ct+4)%4)!==mt);else ht.point(ut[0],ut[1])}function s(st,at){return Vg(st[0]-O)<mg?at>0?0:3:Vg(st[0]-ot)<mg?at>0?2:1:Vg(st[1]-J)<mg?at>0?1:0:at>0?3:2}function a(O,J){return u(O.x,J.x)}function u(O,J){var ot=s(O,1),st=s(J,1);return ot!==st?ot-st:0===ot?J[1]-O[1]:1===ot?O[0]-J[0]:2===ot?O[1]-J[1]:J[0]-O[0]}return function(at){var ut,ct,ht,pt,mt,xt,Nt,St,jt,Wt,Ht,Zt=at,Kt=wd(),Jt={point:b,lineStart:function(){Jt.point=w,ct&&ct.push(ht=[]),Wt=!0,jt=!1,Nt=St=NaN},lineEnd:function(){ut&&(w(pt,mt),xt&&jt&&Kt.rejoin(),ut.push(Kt.result())),Jt.point=b,jt&&Zt.lineEnd()},polygonStart:function(){Zt=Kt,ut=[],ct=[],Ht=!0},polygonEnd:function(){var J=function(){for(var J=0,ot=0,at=ct.length;ot<at;++ot)for(var ut,ht,pt=ct[ot],mt=1,xt=pt.length,Nt=pt[0],St=Nt[0],jt=Nt[1];mt<xt;++mt)ut=St,ht=jt,St=(Nt=pt[mt])[0],jt=Nt[1],ht<=st?jt>st&&(St-ut)*(st-ht)>(jt-ht)*(O-ut)&&++J:jt<=st&&(St-ut)*(st-ht)<(jt-ht)*(O-ut)&&--J;return J}(),ot=Ht&&J,pt=(ut=Od(ut)).length;(ot||pt)&&(at.polygonStart(),ot&&(at.lineStart(),o(null,null,1,at),at.lineEnd()),pt&&Sd(ut,a,J,o,at),at.polygonEnd()),Zt=at,ut=ct=ht=null}};function b(O,J){i(O,J)&&Zt.point(O,J)}function w(at,ut){var Kt=i(at,ut);if(ct&&ht.push([at,ut]),Wt)pt=at,mt=ut,xt=Kt,Wt=!1,Kt&&(Zt.lineStart(),Zt.point(at,ut));else if(Kt&&jt)Zt.point(at,ut);else{var Jt=[Nt=Math.max(Jg,Math.min(Kg,Nt)),St=Math.max(Jg,Math.min(Kg,St))],ee=[at=Math.max(Jg,Math.min(Kg,at)),ut=Math.max(Jg,Math.min(Kg,ut))];!function(O,J,ot,st,at,ut){var ct,ht=O[0],pt=O[1],mt=0,xt=1,Nt=J[0]-ht,St=J[1]-pt;if(ct=ot-ht,Nt||!(ct>0)){if(ct/=Nt,Nt<0){if(ct<mt)return;ct<xt&&(xt=ct)}else if(Nt>0){if(ct>xt)return;ct>mt&&(mt=ct)}if(ct=at-ht,Nt||!(ct<0)){if(ct/=Nt,Nt<0){if(ct>xt)return;ct>mt&&(mt=ct)}else if(Nt>0){if(ct<mt)return;ct<xt&&(xt=ct)}if(ct=st-pt,St||!(ct>0)){if(ct/=St,St<0){if(ct<mt)return;ct<xt&&(xt=ct)}else if(St>0){if(ct>xt)return;ct>mt&&(mt=ct)}if(ct=ut-pt,St||!(ct<0)){if(ct/=St,St<0){if(ct>xt)return;ct>mt&&(mt=ct)}else if(St>0){if(ct<mt)return;ct<xt&&(xt=ct)}return mt>0&&(O[0]=ht+mt*Nt,O[1]=pt+mt*St),xt<1&&(J[0]=ht+xt*Nt,J[1]=pt+xt*St),!0}}}}}(Jt,ee,O,J,ot,st)?Kt&&(Zt.lineStart(),Zt.point(at,ut),Ht=!1):(jt||(Zt.lineStart(),Zt.point(Jt[0],Jt[1])),Zt.point(ee[0],ee[1]),Kt||Zt.lineEnd(),Ht=!1)}Nt=at,St=ut,jt=Kt}return Jt}}(re=+O[0][0],ct=+O[0][1],ht=+O[1][0],pt=+O[1][1]),M()):null==re?null:[[re,ct],[ht,pt]]},N.scale=function(O){return arguments.length?(Nt=+O,P()):Nt},N.translate=function(O){return arguments.length?(St=+O[0],jt=+O[1],P()):[St,jt]},N.center=function(O){return arguments.length?(Wt=O[0]%360*Dg,Ht=O[1]%360*Dg,P()):[Wt*Ag,Ht*Ag]},N.rotate=function(O){return arguments.length?(Zt=O[0]%360*Dg,Kt=O[1]%360*Dg,Jt=O.length>2?O[2]%360*Dg:0,P()):[Zt*Ag,Kt*Ag,Jt*Ag]},N.precision=function(O){return arguments.length?(Ge=Kd(C,qe=O*O),M()):Yg(qe)},N.fitExtent=function(O,J){return Jd(N,O,J)},N.fitSize=function(O,J){return function(O,J,ot){return Jd(O,[[0,0],J],ot)}(N,O,J)},function(){return J=O.apply(this,arguments),N.invert=J.invert&&S,P()}}((function(){return O}))()}var ty=function(O,J){var ot=Ug(O),st=Ug(J),at=function(O){return(O=nd(O))&&O/Xg(O)}(ot*st);return[at*st*Xg(O),at*Xg(J)]};function ny(O,ot,st,at){var ut=O.properties||{},ct="Feature"===O.type?O.geometry:O;if("GeometryCollection"===ct.type){var ht=[];return q(O,(function(O){var J=ny(O,ot,st,at);J&&ht.push(J)})),f(ht)}var pt=function(O){var ot=xn(O).geometry.coordinates,st=[-ot[0],-ot[1]];return function ey(){return $d(ty).scale(79.4188).clipAngle(179.999)}().rotate(st).scale(J)}(ct),mt={type:ct.type,coordinates:iy(ct.coordinates,pt)},xt=(new Ih).read(mt),Nt=m(x(ot,st),"meters"),St=_f.bufferOp(xt,Nt,at);if(!ry((St=(new Nh).write(St)).coordinates))return o({type:St.type,coordinates:oy(St.coordinates,pt)},ut)}function ry(O){return Array.isArray(O[0])?ry(O[0]):isNaN(O[0])}function iy(O,J){return"object"!=typeof O[0]?J(O):O.map((function(O){return iy(O,J)}))}function oy(O,J){return"object"!=typeof O[0]?J.invert(O):O.map((function(O){return oy(O,J)}))}function sy(O,J,ot){void 0===ot&&(ot={});var st=rt(O),at=rt(J),ut=Uu.intersection(st.coordinates,at.coordinates);return 0===ut.length?null:1===ut.length?l(ut[0],ot.properties):y(ut,ot.properties)}function ay(O,J,ot){void 0===ot&&(ot={});var st=JSON.stringify(ot.properties||{}),at=O[0],ut=O[1],ct=O[2],ht=O[3],pt=(ut+ht)/2,mt=(at+ct)/2,xt=2*J/me([at,pt],[ct,pt],ot)*(ct-at),Nt=2*J/me([mt,ut],[mt,ht],ot)*(ht-ut),St=xt/2,jt=2*St,Wt=Math.sqrt(3)/2*Nt,Ht=ct-at,Zt=ht-ut,Kt=3/4*jt,Jt=Wt,ee=(Ht-jt)/(jt-St/2),ne=Math.floor(ee),re=(ne*Kt-St/2-Ht)/2-St/2+Kt/2,De=Math.floor((Zt-Wt)/Wt),qe=(Zt-De*Wt)/2,Ge=De*Wt-Zt>Wt/2;Ge&&(qe-=Wt/4);for(var Be=[],pn=[],wn=0;wn<6;wn++){var In=2*Math.PI/6*wn;Be.push(Math.cos(In)),pn.push(Math.sin(In))}for(var Kn=[],or=0;or<=ne;or++)for(var sr=0;sr<=De;sr++){var ar=or%2==1;if(!(0===sr&&ar||0===sr&&Ge)){var ur=or*Kt+at-re,lr=sr*Jt+ut+qe;if(ar&&(lr-=Wt/2),!0===ot.triangles)ly([ur,lr],xt/2,Nt/2,JSON.parse(st),Be,pn).forEach((function(O){ot.mask?sy(ot.mask,O)&&Kn.push(O):Kn.push(O)}));else{var cr=uy([ur,lr],xt/2,Nt/2,JSON.parse(st),Be,pn);ot.mask?sy(ot.mask,cr)&&Kn.push(cr):Kn.push(cr)}}}return f(Kn)}function uy(O,J,ot,st,at,ut){for(var ct=[],ht=0;ht<6;ht++){var pt=O[0]+J*at[ht],mt=O[1]+ot*ut[ht];ct.push([pt,mt])}return ct.push(ct[0].slice()),l([ct],st)}function ly(O,J,ot,st,at,ut){for(var ct=[],ht=0;ht<6;ht++){var pt=[];pt.push(O),pt.push([O[0]+J*at[ht],O[1]+ot*ut[ht]]),pt.push([O[0]+J*at[(ht+1)%6],O[1]+ot*ut[(ht+1)%6]]),pt.push(O),ct.push(l([pt],st))}return ct}function cy(O){return y(O)}function py(O,J,ot){return void 0===ot&&(ot={}),function(O,J,ot,st){void 0===st&&(st={});for(var at=[],ut=O[0],ct=O[1],ht=O[2],pt=O[3],mt=J/me([ut,ct],[ht,ct],st)*(ht-ut),xt=ot/me([ut,ct],[ut,pt],st)*(pt-ct),Nt=ht-ut,St=pt-ct,jt=Math.floor(Nt/mt),Wt=Math.floor(St/xt),Ht=(St-Wt*xt)/2,Zt=ut+(Nt-jt*mt)/2,Kt=0;Kt<jt;Kt++){for(var Jt=ct+Ht,ee=0;ee<Wt;ee++){var ne=l([[[Zt,Jt],[Zt,Jt+xt],[Zt+mt,Jt+xt],[Zt+mt,Jt],[Zt,Jt]]],st.properties);st.mask?Ps(st.mask,ne)&&at.push(ne):at.push(ne),Jt+=xt}Zt+=mt}return f(at)}(O,J,J,ot)}function fy(O,J,ot){void 0===ot&&(ot={});for(var st=[],at=J/me([O[0],O[1]],[O[2],O[1]],ot)*(O[2]-O[0]),ut=J/me([O[0],O[1]],[O[0],O[3]],ot)*(O[3]-O[1]),ct=0,ht=O[0];ht<=O[2];){for(var pt=0,mt=O[1];mt<=O[3];){var xt=null,Nt=null;ct%2==0&&pt%2==0?(xt=l([[[ht,mt],[ht,mt+ut],[ht+at,mt],[ht,mt]]],ot.properties),Nt=l([[[ht,mt+ut],[ht+at,mt+ut],[ht+at,mt],[ht,mt+ut]]],ot.properties)):ct%2==0&&pt%2==1?(xt=l([[[ht,mt],[ht+at,mt+ut],[ht+at,mt],[ht,mt]]],ot.properties),Nt=l([[[ht,mt],[ht,mt+ut],[ht+at,mt+ut],[ht,mt]]],ot.properties)):pt%2==0&&ct%2==1?(xt=l([[[ht,mt],[ht,mt+ut],[ht+at,mt+ut],[ht,mt]]],ot.properties),Nt=l([[[ht,mt],[ht+at,mt+ut],[ht+at,mt],[ht,mt]]],ot.properties)):pt%2==1&&ct%2==1&&(xt=l([[[ht,mt],[ht,mt+ut],[ht+at,mt],[ht,mt]]],ot.properties),Nt=l([[[ht,mt+ut],[ht+at,mt+ut],[ht+at,mt],[ht,mt+ut]]],ot.properties)),ot.mask?(sy(ot.mask,xt)&&st.push(xt),sy(ot.mask,Nt)&&st.push(Nt)):(st.push(xt),st.push(Nt)),mt+=ut,pt++}ct++,ht+=at}return f(st)}ty.invert=function(O,J){var ot=Yg(O*O+J*J),st=ot,at=Xg(st),ut=Ug(st);return[zg(O*at,ot*ut),rd(ot&&J*at/ot)]},O.along=function(O,J,ot){void 0===ot&&(ot={});for(var st=rt(O).coordinates,at=0,ut=0;ut<st.length&&!(J>=at&&ut===st.length-1);ut++){if(at>=J){var ct=J-at;if(ct){var ht=mn(st[ut],st[ut-1])-180;return vn(st[ut],ct,ht,ot)}return a(st[ut])}at+=me(st[ut],st[ut+1],ot)}return a(st[st.length-1])},O.angle=function(O,J,ot,st){if(void 0===st&&(st={}),!P(st))throw new Error("options is invalid");if(!O)throw new Error("startPoint is required");if(!J)throw new Error("midPoint is required");if(!ot)throw new Error("endPoint is required");var at=O,ut=J,ct=ot,ht=b(!0!==st.mercator?mn(at,ut):Bi(at,ut)),pt=b(!0!==st.mercator?mn(ct,ut):Bi(ct,ut)),mt=Math.abs(ht-pt);return!0===st.explementary?360-mt:mt},O.applyFilter=uu,O.area=jr,O.areaFactors=at,O.bbox=Z,O.bboxClip=function(O,J){var ot=rt(O),st=ot.type,at="Feature"===O.type?O.properties:{},ut=ot.coordinates;switch(st){case"LineString":case"MultiLineString":var ct=[];return"LineString"===st&&(ut=[ut]),ut.forEach((function(O){!function(O,J,ot){var st,at,ut,ct,ht,pt=O.length,mt=Ri(O[0],J),xt=[];for(ot||(ot=[]),st=1;st<pt;st++){for(ct=O[st-1],at=ut=Ri(ht=O[st],J);;){if(!(mt|at)){xt.push(ct),at!==ut?(xt.push(ht),st<pt-1&&(ot.push(xt),xt=[])):st===pt-1&&xt.push(ht);break}if(mt&at)break;mt?mt=Ri(ct=Oi(ct,ht,mt,J),J):at=Ri(ht=Oi(ct,ht,at,J),J)}mt=ut}xt.length&&ot.push(xt)}(O,J,ct)})),1===ct.length?h(ct[0],at):g(ct,at);case"Polygon":return l(Ti(ut,J),at);case"MultiPolygon":return y(ut.map((function(O){return Ti(O,J)})),at);default:throw new Error("geometry "+st+" not supported")}},O.bboxPolygon=gn,O.bearing=mn,O.bearingToAngle=b,O.bearingToAzimuth=b,O.bezier=fn,O.bezierSpline=fn,O.booleanClockwise=Yi,O.booleanContains=function(O,J){var ot=rt(O),st=rt(J),at=ot.type,ut=st.type,ct=ot.coordinates,ht=st.coordinates;switch(at){case"Point":if("Point"===ut)return vs(ct,ht);throw new Error("feature2 "+ut+" geometry not supported");case"MultiPoint":switch(ut){case"Point":return function(O,J){var ot,st=!1;for(ot=0;ot<O.coordinates.length;ot++)if(vs(O.coordinates[ot],J.coordinates)){st=!0;break}return st}(ot,st);case"MultiPoint":return function(O,J){for(var ot=0,st=J.coordinates;ot<st.length;ot++){for(var at=st[ot],ut=!1,ct=0,ht=O.coordinates;ct<ht.length;ct++)if(vs(at,ht[ct])){ut=!0;break}if(!ut)return!1}return!0}(ot,st);default:throw new Error("feature2 "+ut+" geometry not supported")}case"LineString":switch(ut){case"Point":return Wr(st,ot,{ignoreEndVertices:!0});case"LineString":return function(O,J){for(var ot=!1,st=0,at=J.coordinates;st<at.length;st++){var ut=at[st];if(Wr({type:"Point",coordinates:ut},O,{ignoreEndVertices:!0})&&(ot=!0),!Wr({type:"Point",coordinates:ut},O,{ignoreEndVertices:!1}))return!1}return ot}(ot,st);case"MultiPoint":return function(O,J){for(var ot=!1,st=0,at=J.coordinates;st<at.length;st++){var ut=at[st];if(Wr(ut,O,{ignoreEndVertices:!0})&&(ot=!0),!Wr(ut,O))return!1}return!!ot}(ot,st);default:throw new Error("feature2 "+ut+" geometry not supported")}case"Polygon":switch(ut){case"Point":return ye(st,ot,{ignoreBoundary:!0});case"LineString":return function(O,J){var ot=!1,st=0;if(!ys(Z(O),Z(J)))return!1;for(;st<J.coordinates.length-1;st++)if(ye({type:"Point",coordinates:_s(J.coordinates[st],J.coordinates[st+1])},O,{ignoreBoundary:!0})){ot=!0;break}return ot}(ot,st);case"Polygon":return function(O,J){if("Feature"===O.type&&null===O.geometry)return!1;if("Feature"===J.type&&null===J.geometry)return!1;if(!ys(Z(O),Z(J)))return!1;for(var ot=0,st=rt(J).coordinates;ot<st.length;ot++)for(var at=0,ut=st[ot];at<ut.length;at++)if(!ye(ut[at],O))return!1;return!0}(ot,st);case"MultiPoint":return function(O,J){for(var ot=0,st=J.coordinates;ot<st.length;ot++)if(!ye(st[ot],O,{ignoreBoundary:!0}))return!1;return!0}(ot,st);default:throw new Error("feature2 "+ut+" geometry not supported")}default:throw new Error("feature1 "+at+" geometry not supported")}},O.booleanCrosses=function(O,J){var ot=rt(O),st=rt(J),at=ot.type,ut=st.type;switch(at){case"MultiPoint":switch(ut){case"LineString":return ms(ot,st);case"Polygon":return Es(ot,st);default:throw new Error("feature2 "+ut+" geometry not supported")}case"LineString":switch(ut){case"MultiPoint":return ms(st,ot);case"LineString":return function(O,J){if(Or(O,J).features.length>0)for(var ot=0;ot<O.coordinates.length-1;ot++)for(var st=0;st<J.coordinates.length-1;st++){var at=!0;if(0!==st&&st!==J.coordinates.length-2||(at=!1),bs(O.coordinates[ot],O.coordinates[ot+1],J.coordinates[st],at))return!0}return!1}(ot,st);case"Polygon":return xs(ot,st);default:throw new Error("feature2 "+ut+" geometry not supported")}case"Polygon":switch(ut){case"MultiPoint":return Es(st,ot);case"LineString":return xs(st,ot);default:throw new Error("feature2 "+ut+" geometry not supported")}default:throw new Error("feature1 "+at+" geometry not supported")}},O.booleanDisjoint=ps,O.booleanEqual=function(O,J){return rt(O).type===rt(J).type&&new jo({precision:6}).compare(tn(O),tn(J))},O.booleanIntersects=Ps,O.booleanOverlap=function(O,J){var ot=rt(O),st=rt(J),at=ot.type,ut=st.type;if("MultiPoint"===at&&"MultiPoint"!==ut||("LineString"===at||"MultiLineString"===at)&&"LineString"!==ut&&"MultiLineString"!==ut||("Polygon"===at||"MultiPolygon"===at)&&"Polygon"!==ut&&"MultiPolygon"!==ut)throw new Error("features must be of the same type");if("Point"===at)throw new Error("Point geometry not supported");if(new jo({precision:6}).compare(O,J))return!1;var ct=0;switch(at){case"MultiPoint":for(var ht=0;ht<ot.coordinates.length;ht++)for(var pt=0;pt<st.coordinates.length;pt++){var mt=ot.coordinates[ht],xt=st.coordinates[pt];if(mt[0]===xt[0]&&mt[1]===xt[1])return!0}return!1;case"LineString":case"MultiLineString":U(O,(function(O){U(J,(function(J){ki(O,J).features.length&&ct++}))}));break;case"Polygon":case"MultiPolygon":U(O,(function(O){U(J,(function(J){Or(O,J).features.length&&ct++}))}))}return ct>0},O.booleanParallel=function(O,J){if(!O)throw new Error("line1 is required");if(!J)throw new Error("line2 is required");if("LineString"!==Us(O,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Us(J,"line2"))throw new Error("line2 must be a LineString");for(var ot=Zn(tn(O)).features,st=Zn(tn(J)).features,at=0;at<ot.length;at++){var ut=ot[at].geometry.coordinates;if(!st[at])break;if(!js(ut,st[at].geometry.coordinates))return!1}return!0},O.booleanPointInPolygon=ye,O.booleanPointOnLine=Wr,O.booleanWithin=Zr,O.buffer=function(O,J,ot){var st=(ot=ot||{}).units||"kilometers",at=ot.steps||8;if(!O)throw new Error("geojson is required");if("object"!=typeof ot)throw new Error("options must be an object");if("number"!=typeof at)throw new Error("steps must be an number");if(void 0===J)throw new Error("radius is required");if(at<=0)throw new Error("steps must be greater than 0");var ut=[];switch(O.type){case"GeometryCollection":return q(O,(function(O){var ot=ny(O,J,st,at);ot&&ut.push(ot)})),f(ut);case"FeatureCollection":return F(O,(function(O){var ot=ny(O,J,st,at);ot&&F(ot,(function(O){O&&ut.push(O)}))})),f(ut)}return ny(O,J,st,at)},O.center=xn,O.centerMean=Fa,O.centerMedian=function(O,J){if(void 0===J&&(J={}),!P(J=J||{}))throw new Error("options is invalid");var ot=J.counter||10;if(!C(ot))throw new Error("counter must be a number");var st=J.weight,at=Fa(O,{weight:J.weight}),ut=f([]);F(O,(function(O){var J;ut.features.push(En(O,{properties:{weight:null===(J=O.properties)||void 0===J?void 0:J[st]}}))}));var ct={tolerance:J.tolerance,medianCandidates:[]};return ka(at.geometry.coordinates,[0,0],ut,ct,ot)},O.centerOfMass=function t(O,J){switch(void 0===J&&(J={}),it(O)){case"Point":return a(K(O),J.properties);case"Polygon":var ot=[];R(O,(function(O){ot.push(O)}));var st,at,ut,ct,ht,pt,mt,xt,Nt=En(O,{properties:J.properties}),St=Nt.geometry.coordinates,jt=0,Wt=0,Ht=0,Zt=ot.map((function(O){return[O[0]-St[0],O[1]-St[1]]}));for(st=0;st<ot.length-1;st++)ct=(at=Zt[st])[0],pt=at[1],ht=(ut=Zt[st+1])[0],Ht+=xt=ct*(mt=ut[1])-ht*pt,jt+=(ct+ht)*xt,Wt+=(pt+mt)*xt;if(0===Ht)return Nt;var Kt=1/(.5*Ht*6);return a([St[0]+Kt*jt,St[1]+Kt*Wt],J.properties);default:var Jt=de(O);return Jt?t(Jt,{properties:J.properties}):En(O,{properties:J.properties})}},O.centroid=En,O.circle=_n,O.cleanCoords=tn,O.clone=Ie,O.clusterEach=ou,O.clusterReduce=su,O.clusters=Na,O.clustersDbscan=function(O,J,ot){void 0===ot&&(ot={}),!0!==ot.mutate&&(O=Ie(O)),ot.minPoints=ot.minPoints||3;var st=new hs.DBSCAN,at=st.run(G(O),N(J,ot.units),ot.minPoints,me),ut=-1;return at.forEach((function(J){ut++,J.forEach((function(J){var ot=O.features[J];ot.properties||(ot.properties={}),ot.properties.cluster=ut,ot.properties.dbscan="core"}))})),st.noise.forEach((function(J){var ot=O.features[J];ot.properties||(ot.properties={}),ot.properties.cluster?ot.properties.dbscan="edge":ot.properties.dbscan="noise"})),O},O.clustersKmeans=function(O,J){void 0===J&&(J={});var ot=O.features.length;J.numberOfClusters=J.numberOfClusters||Math.round(Math.sqrt(ot/2)),J.numberOfClusters>ot&&(J.numberOfClusters=ot),!0!==J.mutate&&(O=Ie(O));var st=G(O),at=st.slice(0,J.numberOfClusters),ut=zs(st,J.numberOfClusters,at),ct={};return ut.centroids.forEach((function(O,J){ct[J]=O})),F(O,(function(O,J){var ot=ut.idxs[J];O.properties.cluster=ot,O.properties.centroid=ct[ot]})),O},O.collect=function(O,J,ot,st){var at=Zt(6),ut=J.features.map((function(O){var J;return{minX:O.geometry.coordinates[0],minY:O.geometry.coordinates[1],maxX:O.geometry.coordinates[0],maxY:O.geometry.coordinates[1],property:null===(J=O.properties)||void 0===J?void 0:J[ot]}}));return at.load(ut),O.features.forEach((function(O){O.properties||(O.properties={});var J=Z(O),ot=at.search({minX:J[0],minY:J[1],maxX:J[2],maxY:J[3]}),ut=[];ot.forEach((function(J){ye([J.minX,J.minY],O)&&ut.push(J.property)})),O.properties[st]=ut})),O},O.collectionOf=nt,O.combine=function(O){var J={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return F(O,(function(O){var ot,st,at,ut;switch(null===(ut=O.geometry)||void 0===ut?void 0:ut.type){case"Point":J.MultiPoint.coordinates.push(O.geometry.coordinates),J.MultiPoint.properties.push(O.properties);break;case"MultiPoint":(ot=J.MultiPoint.coordinates).push.apply(ot,O.geometry.coordinates),J.MultiPoint.properties.push(O.properties);break;case"LineString":J.MultiLineString.coordinates.push(O.geometry.coordinates),J.MultiLineString.properties.push(O.properties);break;case"MultiLineString":(st=J.MultiLineString.coordinates).push.apply(st,O.geometry.coordinates),J.MultiLineString.properties.push(O.properties);break;case"Polygon":J.MultiPolygon.coordinates.push(O.geometry.coordinates),J.MultiPolygon.properties.push(O.properties);break;case"MultiPolygon":(at=J.MultiPolygon.coordinates).push.apply(at,O.geometry.coordinates),J.MultiPolygon.properties.push(O.properties)}})),f(Object.keys(J).filter((function(O){return J[O].coordinates.length})).sort().map((function(O){return o({type:O,coordinates:J[O].coordinates},{collectedProperties:J[O].properties})})))},O.concave=function(O,J){void 0===J&&(J={});var ot=J.maxEdge||1/0,st=xe(function(O){var J=[],ot={};return F(O,(function(O){if(O.geometry){var st=O.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(ot,st)||(J.push(O),ot[st]=!0)}})),f(J)}(O));if(st.features=st.features.filter((function(O){var st=O.geometry.coordinates[0][0],at=O.geometry.coordinates[0][1],ut=O.geometry.coordinates[0][2],ct=me(st,at,J),ht=me(at,ut,J),pt=me(st,ut,J);return ct<=ot&&ht<=ot&&pt<=ot})),st.features.length<1)return null;var at=$e(st);return 1===at.coordinates.length&&(at.coordinates=at.coordinates[0],at.type="Polygon"),o(at)},O.containsNumber=$,O.convertArea=S,O.convertDistance=N,O.convertLength=N,O.convex=de,O.coordAll=G,O.coordEach=R,O.coordReduce=T,O.createBins=au,O.degrees2radians=I,O.degreesToRadians=I,O.destination=vn,O.difference=function(O,J){var ot=rt(O),st=rt(J),at=O.properties||{},ut=Uu.difference(ot.coordinates,st.coordinates);return 0===ut.length?null:1===ut.length?l(ut[0],at):y(ut,at)},O.dissolve=function(O,J){if(!P(J=J||{}))throw new Error("options is invalid");var ot=J.propertyName;nt(O,"Polygon","dissolve");var st=[];if(!J.propertyName)return ni(y(Uu.union.apply(null,O.features.map((function(O){return O.geometry.coordinates})))));var at={};F(O,(function(O){Object.prototype.hasOwnProperty.call(at,O.properties[ot])||(at[O.properties[ot]]=[]),at[O.properties[ot]].push(O)}));for(var ut=Object.keys(at),ct=0;ct<ut.length;ct++){var ht=y(Uu.union.apply(null,at[ut[ct]].map((function(O){return O.geometry.coordinates}))));ht.properties[ot]=ut[ct],st.push(ht)}return ni(f(st))},O.distance=me,O.distanceToDegrees=E,O.distanceToRadians=x,O.distanceWeight=ja,O.earthRadius=J,O.ellipse=Aa,O.envelope=dn,O.explode=bn,O.factors=ot,O.feature=o,O.featureCollection=f,O.featureEach=F,O.featureOf=et,O.featureReduce=k,O.filterProperties=cu,O.findPoint=W,O.findSegment=H,O.flatten=ni,O.flattenEach=z,O.flattenReduce=j,O.flip=function(O,J){if(!P(J=J||{}))throw new Error("options is invalid");var ot=J.mutate;if(!O)throw new Error("geojson is required");return!1!==ot&&void 0!==ot||(O=Ie(O)),R(O,(function(O){var J=O[0],ot=O[1];O[0]=ot,O[1]=J})),O},O.geojsonType=tt,O.geomEach=q,O.geomReduce=B,O.geometry=s,O.geometryCollection=v,O.getCluster=iu,O.getCoord=K,O.getCoords=Q,O.getGeom=rt,O.getType=it,O.greatCircle=function(O,J,ot){if("object"!=typeof(ot=ot||{}))throw new Error("options is invalid");var st=ot.properties,at=ot.npoints,ut=ot.offset;return O=K(O),J=K(J),st=st||{},at=at||100,ut=ut||10,new vi({x:O[0],y:O[1]},{x:J[0],y:J[1]},st).Arc(at,{offset:ut}).json()},O.helpers=ut,O.hexGrid=ay,O.inside=ye,O.interpolate=function(O,J,ot){if("object"!=typeof(ot=ot||{}))throw new Error("options is invalid");var st=ot.gridType,at=ot.property,ut=ot.weight;if(!O)throw new Error("points is required");if(nt(O,"Point","input must contain Points"),!J)throw new Error("cellSize is required");if(void 0!==ut&&"number"!=typeof ut)throw new Error("weight must be a number");at=at||"elevation",st=st||"square",ut=ut||1;var ct,ht=Z(O);switch(st){case"point":case"points":ct=ti(ht,J,ot);break;case"square":case"squares":ct=py(ht,J,ot);break;case"hex":case"hexes":ct=ay(ht,J,ot);break;case"triangle":case"triangles":ct=fy(ht,J,ot);break;default:throw new Error("invalid gridType")}var pt=[];return F(ct,(function(J){var ct=0,ht=0;F(O,(function(O){var pt,mt=me("point"===st?J:En(J),O,ot);if(void 0!==at&&(pt=O.properties[at]),void 0===pt&&(pt=O.geometry.coordinates[2]),void 0===pt)throw new Error("zValue is missing");0===mt&&(ct=pt);var xt=1/Math.pow(mt,ut);ht+=xt,ct+=xt*pt}));var mt=Ie(J);mt.properties[at]=ct/ht,pt.push(mt)})),f(pt)},O.intersect=sy,O.invariant=ht,O.isNumber=C,O.isObject=P,O.isobands=function(O,J,ot){if(!P(ot=ot||{}))throw new Error("options is invalid");var st=ot.zProperty||"elevation",at=ot.commonProperties||{},ut=ot.breaksProperties||[];if(nt(O,"Point","Input must contain Points"),!J)throw new Error("breaks is required");if(!Array.isArray(J))throw new Error("breaks is not an Array");if(!P(at))throw new Error("commonProperties is not an Object");if(!Array.isArray(ut))throw new Error("breaksProperties is not an Array");var ct=function Zi(O,J){if(!P(J=J||{}))throw new Error("options is invalid");var ot=J.zProperty||"elevation",st=J.flip,at=J.flags;nt(O,"Point","input must contain Points");for(var ut=function(O,J){var ot={};return F(O,(function(O){var J=Q(O)[1];ot[J]||(ot[J]=[]),ot[J].push(O)})),Object.keys(ot).map((function(O){return ot[O].sort((function(O,J){return Q(O)[0]-Q(J)[0]}))})).sort((function(O,ot){return J?Q(O[0])[1]-Q(ot[0])[1]:Q(ot[0])[1]-Q(O[0])[1]}))}(O,st),ct=[],ht=0;ht<ut.length;ht++){for(var pt=ut[ht],mt=[],xt=0;xt<pt.length;xt++){var Nt=pt[xt];Nt.properties[ot]?mt.push(Nt.properties[ot]):mt.push(0),!0===at&&(Nt.properties.matrixPosition=[ht,xt])}ct.push(mt)}return ct}(O,{zProperty:st,flip:!0}),ht=function(O,J,ot){for(var st=[],at=1;at<J.length;at++){var ut=+J[at-1],ct=+J[at],ht=Zo(Jo($i(O,ut,ct-ut))),pt={};pt.groupedRings=ht,pt[ot]=ut+"-"+ct,st.push(pt)}return st}(ct,J,st);return f((ht=function(O,J,ot){var st=Z(ot),at=st[2]-st[0],ut=st[3]-st[1],ct=st[0],ht=st[1],pt=J[0].length-1,mt=J.length-1,xt=at/pt,Nt=ut/mt,p=function(O){O[0]=O[0]*xt+ct,O[1]=O[1]*Nt+ht};return O.forEach((function(O){O.groupedRings.forEach((function(O){O.forEach((function(O){O.forEach(p)}))}))})),O}(ht,ct,O)).map((function(O,J){if(ut[J]&&!P(ut[J]))throw new Error("Each mappedProperty is required to be an Object");var ot=Nt({},at,ut[J]);return ot[st]=O[st],y(O.groupedRings,ot)})))},O.isolines=function(O,J,ot){if(!P(ot=ot||{}))throw new Error("options is invalid");var st=ot.zProperty||"elevation",at=ot.commonProperties||{},ut=ot.breaksProperties||[];if(nt(O,"Point","Input must contain Points"),!J)throw new Error("breaks is required");if(!Array.isArray(J))throw new Error("breaks must be an Array");if(!P(at))throw new Error("commonProperties must be an Object");if(!Array.isArray(ut))throw new Error("breaksProperties must be an Array");var ct=function _t(O,J){if(!P(J=J||{}))throw new Error("options is invalid");var ot=J.zProperty||"elevation",st=J.flip,at=J.flags;nt(O,"Point","input must contain Points");for(var ut=function(O,J){var ot={};return F(O,(function(O){var J=Q(O)[1];ot[J]||(ot[J]=[]),ot[J].push(O)})),Object.keys(ot).map((function(O){return ot[O].sort((function(O,J){return Q(O)[0]-Q(J)[0]}))})).sort((function(O,ot){return J?Q(O[0])[1]-Q(ot[0])[1]:Q(ot[0])[1]-Q(O[0])[1]}))}(O,st),ct=[],ht=0;ht<ut.length;ht++){for(var pt=ut[ht],mt=[],xt=0;xt<pt.length;xt++){var Nt=pt[xt];Nt.properties[ot]?mt.push(Nt.properties[ot]):mt.push(0),!0===at&&(Nt.properties.matrixPosition=[ht,xt])}ct.push(mt)}return ct}(O,{zProperty:st,flip:!0});return f(function(O,J,ot){var st=Z(ot),at=st[2]-st[0],ut=st[3]-st[1],ct=st[0],ht=st[1],pt=J[0].length-1,mt=J.length-1,xt=at/pt,Nt=ut/mt,p=function(O){O[0]=O[0]*xt+ct,O[1]=O[1]*Nt+ht};return O.forEach((function(O){R(O,p)})),O}(function(O,J,ot,st,at){for(var ut=[],ct=1;ct<J.length;ct++){var ht=+J[ct],pt=Nt({},st,at[ct]);pt[ot]=ht;var mt=g(ft(O,ht),pt);ut.push(mt)}return ut}(ct,J,st,at,ut),ct,O))},O.kinks=function(O){var J,ot,st={type:"FeatureCollection",features:[]};if("LineString"===(ot="Feature"===O.type?O.geometry:O).type)J=[ot.coordinates];else if("MultiLineString"===ot.type)J=ot.coordinates;else if("MultiPolygon"===ot.type)J=[].concat.apply([],ot.coordinates);else{if("Polygon"!==ot.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");J=ot.coordinates}return J.forEach((function(O){J.forEach((function(J){for(var ot=0;ot<O.length-1;ot++)for(var at=ot;at<J.length-1;at++){if(O===J){if(1===Math.abs(ot-at))continue;if(0===ot&&at===O.length-2&&O[ot][0]===O[O.length-1][0]&&O[ot][1]===O[O.length-1][1])continue}var ut=Gr(O[ot][0],O[ot][1],O[ot+1][0],O[ot+1][1],J[at][0],J[at][1],J[at+1][0],J[at+1][1]);ut&&st.features.push(a([ut[0],ut[1]]))}}))})),st},O.length=Yr,O.lengthToDegrees=E,O.lengthToRadians=x,O.lineArc=bi,O.lineChunk=function(O,J,ot){if(!P(ot=ot||{}))throw new Error("options is invalid");var st=ot.units,at=ot.reverse;if(!O)throw new Error("geojson is required");if(J<=0)throw new Error("segmentLength must be greater than 0");var ut=[];return z(O,(function(O){at&&(O.geometry.coordinates=O.geometry.coordinates.reverse()),function(O,J,ot,st){var at=Yr(O,{units:ot});if(at<=J)return st(O);var ut=at/J;Number.isInteger(ut)||(ut=Math.floor(ut)+1);for(var ct=0;ct<ut;ct++)st(Hr(O,J*ct,J*(ct+1),{units:ot}))}(O,J,st,(function(O){ut.push(O)}))})),f(ut)},O.lineDistance=Yr,O.lineEach=X,O.lineIntersect=Or,O.lineOffset=function(O,J,ot){if(!P(ot=ot||{}))throw new Error("options is invalid");var st=ot.units;if(!O)throw new Error("geojson is required");if(null==J||isNaN(J))throw new Error("distance is required");var at=it(O),ut=O.properties;switch(at){case"LineString":return os(O,J,st);case"MultiLineString":var ct=[];return z(O,(function(O){ct.push(os(O,J,st).geometry.coordinates)})),g(ct,ut);default:throw new Error("geometry "+at+" is not supported")}},O.lineOverlap=ki,O.lineReduce=Y,O.lineSegment=Zn,O.lineSlice=function(O,J,ot){var st=Q(ot);if("LineString"!==it(ot))throw new Error("line must be a LineString");for(var at,ut=Tr(ot,O),ct=Tr(ot,J),ht=[(at=ut.properties.index<=ct.properties.index?[ut,ct]:[ct,ut])[0].geometry.coordinates],pt=at[0].properties.index+1;pt<at[1].properties.index+1;pt++)ht.push(st[pt]);return ht.push(at[1].geometry.coordinates),h(ht,ot.properties)},O.lineSliceAlong=Hr,O.lineSplit=function(O,J){if(!O)throw new Error("line is required");if(!J)throw new Error("splitter is required");var ot=it(O),st=it(J);if("LineString"!==ot)throw new Error("line must be LineString");if("FeatureCollection"===st)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===st)throw new Error("splitter cannot be a GeometryCollection");var at=ei(J,{precision:7});switch(st){case"Point":return mi(O,at);case"MultiPoint":return _i(O,at);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _i(O,Or(O,at))}},O.lineString=h,O.lineStringToPolygon=Ci,O.lineStrings=p,O.lineToPolygon=Ci,O.mask=function(O,J){var ot,st=function hy(O){return l(O&&O.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(J);return("FeatureCollection"===O.type?cy(2===(ot=O).features.length?Uu.union(ot.features[0].geometry.coordinates,ot.features[1].geometry.coordinates):Uu.union.apply(Uu,ot.features.map((function(O){return O.geometry.coordinates})))):cy(Uu.union(O.geometry.coordinates))).geometry.coordinates.forEach((function(O){st.geometry.coordinates.push(O[0])})),st},O.meta=ct,O.midpoint=function(O,J){return vn(O,me(O,J)/2,mn(O,J))},O.moranIndex=function(O,J){var ot=J.inputField,st=J.threshold||1e5,at=J.p||2,ut=J.binary||!1,ct=ja(O,{alpha:J.alpha||-1,binary:ut,p:at,standardization:J.standardization||!0,threshold:st}),ht=[];F(O,(function(O){var J=O.properties||{};ht.push(J[ot])}));for(var pt=Ua(ht),mt=function(O){for(var J=Ua(O),ot=0,st=0,at=O;st<at.length;st++){var ut=at[st];ot+=Math.pow(ut-J,2)}return ot/O.length}(ht),xt=0,Nt=0,St=0,jt=0,Wt=ct.length,Ht=0;Ht<Wt;Ht++){for(var Zt=0,Kt=0;Kt<Wt;Kt++)xt+=ct[Ht][Kt]*(ht[Ht]-pt)*(ht[Kt]-pt),Nt+=ct[Ht][Kt],St+=Math.pow(ct[Ht][Kt]+ct[Kt][Ht],2),Zt+=ct[Ht][Kt]+ct[Kt][Ht];jt+=Math.pow(Zt,2)}var Jt=xt/Nt/mt,ee=-1/(Wt-1),ne=(Wt*Wt*(St*=.5)-Wt*jt+Nt*Nt*3)/((Wt-1)*(Wt+1)*(Nt*Nt))-ee*ee,re=Math.sqrt(ne);return{expectedMoranIndex:ee,moranIndex:Jt,stdNorm:re,zNorm:(Jt-ee)/re}},O.multiLineString=g,O.multiPoint=d,O.multiPolygon=y,O.nearest=Jn,O.nearestPoint=Jn,O.nearestPointOnLine=Tr,O.nearestPointToLine=function(O,J,ot){void 0===ot&&(ot={});var st=ot.units,at=ot.properties||{},ut=function(O){var J=[];switch(O.geometry?O.geometry.type:O.type){case"GeometryCollection":return q(O,(function(O){"Point"===O.type&&J.push({type:"Feature",properties:{},geometry:O})})),{type:"FeatureCollection",features:J};case"FeatureCollection":return O.features=O.features.filter((function(O){return"Point"===O.geometry.type})),O;default:throw new Error("points must be a Point Collection")}}(O);if(!ut.features.length)throw new Error("points must contain features");if(!J)throw new Error("line is required");if("LineString"!==it(J))throw new Error("line must be a LineString");var ct=1/0,ht=null;return F(ut,(function(O){var ot=Dr(O,J,{units:st});ot<ct&&(ct=ot,ht=O)})),ht&&(ht.properties=Nt({dist:ct},ht.properties,at)),ht},O.planepoint=function(O,J){var ot=K(O),st=rt(J).coordinates[0];if(st.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var at=J.properties||{},ut=at.a,ct=at.b,ht=at.c,pt=ot[0],mt=ot[1],xt=st[0][0],Nt=st[0][1],St=void 0!==ut?ut:st[0][2],jt=st[1][0],Wt=st[1][1],Ht=void 0!==ct?ct:st[1][2],Zt=st[2][0],Kt=st[2][1],Jt=void 0!==ht?ht:st[2][2];return(Jt*(pt-xt)*(mt-Wt)+St*(pt-jt)*(mt-Kt)+Ht*(pt-Zt)*(mt-Nt)-Ht*(pt-xt)*(mt-Kt)-Jt*(pt-jt)*(mt-Nt)-St*(pt-Zt)*(mt-Wt))/((pt-xt)*(mt-Wt)+(pt-jt)*(mt-Kt)+(pt-Zt)*(mt-Nt)-(pt-xt)*(mt-Kt)-(pt-jt)*(mt-Nt)-(pt-Zt)*(mt-Wt))},O.point=a,O.pointGrid=ti,O.pointOnFeature=qr,O.pointOnLine=Tr,O.pointOnSurface=qr,O.pointToLineDistance=Dr,O.points=u,O.pointsWithinPolygon=_e,O.polygon=l,O.polygonSmooth=function(O,J){var ot=[],st=J.iterations||1;if(!O)throw new Error("inputPolys is required");return q(O,(function(O,J,at){var ut,ct,ht;switch(O.type){case"Polygon":ut=[[]];for(var pt=0;pt<st;pt++)ht=[[]],ct=O,pt>0&&(ct=l(ut).geometry),qa(ct,ht),ut=ht.slice(0);ot.push(l(ut,at));break;case"MultiPolygon":ut=[[[]]];for(var mt=0;mt<st;mt++)ht=[[[]]],ct=O,mt>0&&(ct=y(ut).geometry),Ba(ct,ht),ut=ht.slice(0);ot.push(y(ut,at));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),f(ot)},O.polygonTangents=function(O,J){var ot,st,at,ut,ct=Q(O),ht=Q(J),pt=Z(J),mt=0,xt=null;switch(ct[0]>pt[0]&&ct[0]<pt[2]&&ct[1]>pt[1]&&ct[1]<pt[3]&&(mt=(xt=Jn(O,bn(J))).properties.featureIndex),it(J)){case"Polygon":ot=ht[0][mt],st=ht[0][0],null!==xt&&xt.geometry.coordinates[1]<ct[1]&&(st=ht[0][mt]),ut=Xi(ht[0][0],ht[0][ht[0].length-1],ct);var Nt=Ui(ht[0],ct,ut,at,ot,st);ot=Nt[0],st=Nt[1];break;case"MultiPolygon":for(var St=0,jt=0,Wt=0,Ht=0;Ht<ht[0].length;Ht++){St=Ht;for(var Zt=!1,Kt=0;Kt<ht[0][Ht].length;Kt++){if(jt=Kt,Wt===mt){Zt=!0;break}Wt++}if(Zt)break}ot=ht[0][St][jt],st=ht[0][St][jt],ut=Xi(ht[0][0][0],ht[0][0][ht[0][0].length-1],ct),ht.forEach((function(O){var J=Ui(O[0],ct,ut,at,ot,st);ot=J[0],st=J[1]}))}return f([a(ot),a(st)])},O.polygonToLine=Ii,O.polygonToLineString=Ii,O.polygonize=function(O){var J=zo.fromGeoJson(O);J.deleteDangles(),J.deleteCutEdges();var ot=[],st=[];return J.getEdgeRings().filter((function(O){return O.isValid()})).forEach((function(O){O.isHole()?ot.push(O):st.push(O)})),ot.forEach((function(O){Bo.findEdgeRingContaining(O,st)&&st.push(O)})),f(st.map((function(O){return O.toPolygon()})))},O.polygons=c,O.projection=fa,O.propEach=A,O.propReduce=D,O.propertiesContainsFilter=lu,O.radians2degrees=w,O.radiansToDegrees=w,O.radiansToDistance=m,O.radiansToLength=m,O.random=va,O.randomLineString=tu,O.randomPoint=Qa,O.randomPolygon=$a,O.randomPosition=Ka,O.rewind=function(O,J){if(!P(J=J||{}))throw new Error("options is invalid");var ot=J.reverse||!1,st=J.mutate||!1;if(!O)throw new Error("<geojson> is required");if("boolean"!=typeof ot)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof st)throw new Error("<mutate> must be a boolean");!1===st&&(O=Ie(O));var at=[];switch(O.type){case"GeometryCollection":return q(O,(function(O){Hi(O,ot)})),O;case"FeatureCollection":return F(O,(function(O){F(Hi(O,ot),(function(O){at.push(O)}))})),f(at)}return Hi(O,ot)},O.rhumbBearing=Bi,O.rhumbDestination=ji,O.rhumbDistance=Ar,O.round=_,O.sample=function(O,J){if(!O)throw new Error("featurecollection is required");if(null==J)throw new Error("num is required");if("number"!=typeof J)throw new Error("num must be a number");return f(function(O,J){for(var ot,st,at=O.slice(0),ut=O.length,ct=ut-J;ut-- >ct;)ot=at[st=Math.floor((ut+1)*Math.random())],at[st]=at[ut],at[ut]=ot;return at.slice(ct)}(O.features,J))},O.sector=function(O,J,ot,st,at){if(!P(at=at||{}))throw new Error("options is invalid");var ut=at.properties;if(!O)throw new Error("center is required");if(null==ot)throw new Error("bearing1 is required");if(null==st)throw new Error("bearing2 is required");if(!J)throw new Error("radius is required");if("object"!=typeof at)throw new Error("options must be an object");if(qi(ot)===qi(st))return _n(O,J,at);var ct=Q(O),ht=bi(O,J,ot,st,at),pt=[[ct]];return R(ht,(function(O){pt[0].push(O)})),pt[0].push(ct),l(pt,ut)},O.segmentEach=U,O.segmentReduce=V,O.shortestPath=function(O,J,ot){if(!P(ot=ot||{}))throw new Error("options is invalid");var st=ot.resolution,at=ot.minDistance,ut=ot.obstacles||f([]);if(!O)throw new Error("start is required");if(!J)throw new Error("end is required");if(st&&!C(st)||st<=0)throw new Error("options.resolution must be a number, greater than 0");if(at)throw new Error("options.minDistance is not yet implemented");var ct=K(O),ht=K(J);switch(O=a(ct),J=a(ht),it(ut)){case"FeatureCollection":if(0===ut.features.length)return h([ct,ht]);break;case"Polygon":ut=f([o(rt(ut))]);break;default:throw new Error("invalid obstacles")}var pt=ut;pt.features.push(O),pt.features.push(J);var mt=Z(ts(gn(Z(pt)),1.15));st||(st=me([mt[0],mt[1]],[mt[2],mt[1]],ot)/100),pt.features.pop(),pt.features.pop();for(var xt=mt[0],Nt=mt[1],St=mt[2],jt=mt[3],Wt=st/me([xt,Nt],[St,Nt],ot)*(St-xt),Ht=st/me([xt,Nt],[xt,jt],ot)*(jt-Nt),Zt=St-xt,Kt=jt-Nt,Jt=Math.floor(Zt/Wt),ee=Math.floor(Kt/Ht),ne=(Zt-Jt*Wt)/2,re=[],De=[],qe=[],Ge=[],Be=1/0,pn=1/0,wn=jt-(Kt-ee*Ht)/2,In=0;wn>=Nt;){for(var Kn=[],or=[],sr=xt+ne,ar=0;sr<=St;){var ur=a([sr,wn]),lr=Js(ur,ut);Kn.push(lr?0:1),or.push(sr+"|"+wn);var cr=me(ur,O);!lr&&cr<Be&&(Be=cr,qe={x:ar,y:In});var hr=me(ur,J);!lr&&hr<pn&&(pn=hr,Ge={x:ar,y:In}),sr+=Wt,ar++}De.push(Kn),re.push(or),wn-=Ht,In++}var pr=new Ys(De,{diagonal:!0}),fr=pr.grid[qe.y][qe.x],gr=pr.grid[Ge.y][Ge.x],dr=Ls.search(pr,fr,gr),yr=[ct];return dr.forEach((function(O){var J=re[O.x][O.y].split("|");yr.push([+J[0],+J[1]])})),yr.push(ht),tn(h(yr))},O.simplify=function(O,J){if(!P(J=J||{}))throw new Error("options is invalid");var ot=void 0!==J.tolerance?J.tolerance:1,st=J.highQuality||!1,at=J.mutate||!1;if(!O)throw new Error("geojson is required");if(ot&&ot<0)throw new Error("invalid tolerance");return!0!==at&&(O=Ie(O)),q(O,(function(O){!function(O,J,ot){var st=O.type;if("Point"===st||"MultiPoint"===st)return O;tn(O,!0);var at=O.coordinates;switch(st){case"LineString":O.coordinates=ln(at,J,ot);break;case"MultiLineString":O.coordinates=at.map((function(O){return ln(O,J,ot)}));break;case"Polygon":O.coordinates=cn(at,J,ot);break;case"MultiPolygon":O.coordinates=at.map((function(O){return cn(O,J,ot)}))}}(O,ot,st)})),O},O.square=yn,O.squareGrid=py,O.standardDeviationalEllipse=function(O,J){if(!P(J=J||{}))throw new Error("options is invalid");var ot=J.steps||64,st=J.weight,at=J.properties||{};if(!C(ot))throw new Error("steps must be a number");if(!P(at))throw new Error("properties must be a number");var ut=G(O).length,ct=Fa(O,{weight:st}),ht=0,pt=0,mt=0;F(O,(function(O){var J=O.properties[st]||1,ot=Ga(Q(O),Q(ct));ht+=Math.pow(ot.x,2)*J,pt+=Math.pow(ot.y,2)*J,mt+=ot.x*ot.y*J}));var xt=ht-pt,Nt=Math.sqrt(Math.pow(xt,2)+4*Math.pow(mt,2)),St=2*mt,jt=Math.atan((xt+Nt)/St),Wt=180*jt/Math.PI,Ht=0,Zt=0,Kt=0;F(O,(function(O){var J=O.properties[st]||1,ot=Ga(Q(O),Q(ct));Ht+=Math.pow(ot.x*Math.cos(jt)-ot.y*Math.sin(jt),2)*J,Zt+=Math.pow(ot.x*Math.sin(jt)+ot.y*Math.cos(jt),2)*J,Kt+=J}));var Jt=Math.sqrt(2*Ht/Kt),ee=Math.sqrt(2*Zt/Kt),ne=Aa(ct,Jt,ee,{units:"degrees",angle:Wt,steps:ot,properties:at}),re=_e(O,f([ne])),De={meanCenterCoordinates:Q(ct),semiMajorAxis:Jt,semiMinorAxis:ee,numberOfFeatures:ut,angle:Wt,percentageWithinEllipse:100*G(re).length/ut};return ne.properties.standardDeviationalEllipse=De,ne},O.tag=function(O,J,ot,st){return O=Ie(O),J=Ie(J),F(O,(function(O){O.properties||(O.properties={}),F(J,(function(J){void 0===O.properties[st]&&ye(O,J)&&(O.properties[st]=J.properties[ot])}))})),O},O.tesselate=function(O){if(!O.geometry||"Polygon"!==O.geometry.type&&"MultiPolygon"!==O.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var J={type:"FeatureCollection",features:[]};return"Polygon"===O.geometry.type?J.features=Wn(O.geometry.coordinates):O.geometry.coordinates.forEach((function(O){J.features=J.features.concat(Wn(O))})),J},O.tin=xe,O.toMercator=Va,O.toWgs84=Xa,O.transformRotate=$o,O.transformScale=ts,O.transformTranslate=function(O,J,ot,st){if(!P(st=st||{}))throw new Error("options is invalid");var at=st.units,ut=st.zTranslation,ct=st.mutate;if(!O)throw new Error("geojson is required");if(null==J||isNaN(J))throw new Error("distance is required");if(ut&&"number"!=typeof ut&&isNaN(ut))throw new Error("zTranslation is not a number");if(ut=void 0!==ut?ut:0,0===J&&0===ut)return O;if(null==ot||isNaN(ot))throw new Error("direction is required");return J<0&&(J=-J,ot+=180),!1!==ct&&void 0!==ct||(O=Ie(O)),R(O,(function(O){var st=Q(ji(O,J,ot,{units:at}));O[0]=st[0],O[1]=st[1],ut&&3===O.length&&(O[2]+=ut)})),O},O.triangleGrid=fy,O.truncate=ei,O.union=function(O,J,ot){void 0===ot&&(ot={});var st=rt(O),at=rt(J),ut=Uu.union(st.coordinates,at.coordinates);return 0===ut.length?null:1===ut.length?l(ut[0],ot.properties):y(ut,ot.properties)},O.unitsFactors=st,O.unkinkPolygon=function(O){var J=[];return z(O,(function(O){"Polygon"===O.geometry.type&&F(oi(O),(function(ot){J.push(l(ot.geometry.coordinates,O.properties))}))})),f(J)},O.validateBBox=M,O.validateId=L,O.voronoi=function(O,J){if(!P(J=J||{}))throw new Error("options is invalid");var ot=J.bbox||[-180,-85,180,85];if(!O)throw new Error("points is required");if(!Array.isArray(ot))throw new Error("bbox is invalid");return nt(O,"Point","points"),f(function(){var O=Ks,J=Qs,ot=null;function r(st){return new Ra(st.map((function(ot,at){var ut=[Math.round(O(ot,at,st)/Xs)*Xs,Math.round(J(ot,at,st)/Xs)*Xs];return ut.index=at,ut.data=ot,ut})),ot)}return r.polygons=function(O){return r(O).polygons()},r.links=function(O){return r(O).links()},r.triangles=function(O){return r(O).triangles()},r.x=function(J){return arguments.length?(O="function"==typeof J?J:Zs(+J),r):O},r.y=function(O){return arguments.length?(J="function"==typeof O?O:Zs(+O),r):J},r.extent=function(O){return arguments.length?(ot=null==O?null:[[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]],r):ot&&[[ot[0][0],ot[0][1]],[ot[1][0],ot[1][1]]]},r.size=function(O){return arguments.length?(ot=null==O?null:[[0,0],[+O[0],+O[1]]],r):ot&&[ot[1][0]-ot[0][0],ot[1][1]-ot[0][1]]},r}().x((function(O){return O.geometry.coordinates[0]})).y((function(O){return O.geometry.coordinates[1]})).extent([[ot[0],ot[1]],[ot[2],ot[3]]]).polygons(O.features).map(Ta))},O.within=_e,Object.defineProperty(O,"__esModule",{value:!0})}));