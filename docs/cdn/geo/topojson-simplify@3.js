var r,n;r=this,n=function(d,M){"use strict";function e(){return!0}function t(d){return d}function o(d){return null!=d.type}function a(d){var M,j=new Array(d.arcs.length),k=0;function o(d){switch(d.type){case"GeometryCollection":d.geometries.forEach(o);break;case"Polygon":a(d.arcs);break;case"MultiPolygon":d.arcs.forEach(a)}}function a(d){for(var M=0,P=d.length;M<P;++M,++k)for(var A=d[M],_=0,E=A.length;_<E;++_){var w=A[_];w<0&&(w=~w);var L=j[w];null==L?j[w]=k:L!==k&&(j[w]=-1)}}for(M in d.objects)o(d.objects[M]);return function(d){for(var M,k=0,P=d.length;k<P;++k)if(-1===j[(M=d[k])<0?~M:M])return!0;return!1}}function i(d){var M=d[0],j=d[1],k=d[2];return Math.abs((M[0]-k[0])*(j[1]-M[1])-(M[0]-j[0])*(k[1]-M[1]))/2}function c(d){for(var M,j=-1,k=d.length,P=d[k-1],A=0;++j<k;)M=P,P=d[j],A+=M[0]*P[1]-M[1]*P[0];return Math.abs(A)/2}function u(d,j,k){return j=null==j?Number.MIN_VALUE:+j,null==k&&(k=c),function(P,A){return k(M.feature(d,{type:"Polygon",arcs:[P]}).geometry.coordinates[0],A)>=j}}function f(d,M){return d[1][2]-M[1][2]}function l(d){return[d[0],d[1],0]}function s(d,M){return M-d}var j=Math.PI,k=2*j,P=j/4,A=j/180,_=Math.abs,E=Math.atan2,w=Math.cos,L=Math.sin;function x(d,M){for(var j,k,_=0,C=d.length,G=0,S=d[M?_++:C-1],T=S[0]*A,N=S[1]*A/2+P,I=w(N),q=L(N);_<C;++_){j=T,T=(S=d[_])[0]*A,N=S[1]*A/2+P,k=I,I=w(N);var R=T-j,U=R>=0?1:-1,V=U*R,W=q*(q=L(N)),F=k*I+W*w(V),O=W*U*L(V);G+=E(O,F)}return G}d.filter=function(d,M){var j,k=d.objects,P={};function u(d){var M,j;switch(d.type){case"Polygon":M=(j=f(d.arcs))?{type:"Polygon",arcs:j}:{type:null};break;case"MultiPolygon":M=(j=d.arcs.map(f).filter(t)).length?{type:"MultiPolygon",arcs:j}:{type:null};break;case"GeometryCollection":M=(j=d.geometries.map(u).filter(o)).length?{type:"GeometryCollection",geometries:j}:{type:null};break;default:return d}return null!=d.id&&(M.id=d.id),null!=d.bbox&&(M.bbox=d.bbox),null!=d.properties&&(M.properties=d.properties),M}function f(d){return d.length&&(j=d[0],M(j,!1))?[d[0]].concat(d.slice(1).filter(l)):null;var j}function l(d){return M(d,!0)}for(j in null==M&&(M=e),k)P[j]=u(k[j]);return function(d){var M,j,k=d.objects,P={},A=d.arcs,_=A.length,E=-1,w=new Array(_),L=0,C=-1;function s(d){switch(d.type){case"GeometryCollection":d.geometries.forEach(s);break;case"LineString":b(d.arcs);break;case"MultiLineString":case"Polygon":d.arcs.forEach(b);break;case"MultiPolygon":d.arcs.forEach(y)}}function p(d){d<0&&(d=~d),w[d]||(w[d]=1,++L)}function b(d){d.forEach(p)}function y(d){d.forEach(b)}function g(d){var M;switch(d.type){case"GeometryCollection":M={type:"GeometryCollection",geometries:d.geometries.map(g)};break;case"LineString":M={type:"LineString",arcs:m(d.arcs)};break;case"MultiLineString":M={type:"MultiLineString",arcs:d.arcs.map(m)};break;case"Polygon":M={type:"Polygon",arcs:d.arcs.map(m)};break;case"MultiPolygon":M={type:"MultiPolygon",arcs:d.arcs.map(v)};break;default:return d}return null!=d.id&&(M.id=d.id),null!=d.bbox&&(M.bbox=d.bbox),null!=d.properties&&(M.properties=d.properties),M}function h(d){return d<0?~w[~d]:w[d]}function m(d){return d.map(h)}function v(d){return d.map(m)}for(j in k)s(k[j]);for(M=new Array(L);++E<_;)w[E]&&(w[E]=++C,M[C]=A[E]);for(j in k)P[j]=g(k[j]);return{type:"Topology",bbox:d.bbox,transform:d.transform,objects:P,arcs:M}}({type:"Topology",bbox:d.bbox,transform:d.transform,objects:P,arcs:d.arcs})},d.filterAttached=a,d.filterAttachedWeight=function(d,M,j){var k=a(d),P=u(d,M,j);return function(d,M){return k(d,M)||P(d,M)}},d.filterWeight=u,d.planarRingArea=c,d.planarTriangleArea=i,d.presimplify=function(d,j){var k=d.transform?M.transform(d.transform):l,P=function(){var d={},M=[],j=0;function t(d,j){for(;j>0;){var k=(j+1>>1)-1,P=M[k];if(f(d,P)>=0)break;M[P._=j]=P,M[d._=j=k]=d}}function o(d,k){for(;;){var P=k+1<<1,A=P-1,_=k,E=M[_];if(A<j&&f(M[A],E)<0&&(E=M[_=A]),P<j&&f(M[P],E)<0&&(E=M[_=P]),_===k)break;M[E._=k]=E,M[d._=k=_]=d}}return d.push=function(d){return t(M[d._=j]=d,j++),j},d.pop=function(){if(!(j<=0)){var d,k=M[0];return--j>0&&(d=M[j],o(M[d._=0]=d,0)),k}},d.remove=function(d){var k,P=d._;if(M[P]===d)return P!==--j&&(f(k=M[j],d)<0?t:o)(M[k._=P]=k,P),P},d}();null==j&&(j=i);var A=d.arcs.map((function(d){var M,A,_,E=[],w=0;for(A=1,_=(d=d.map(k)).length-1;A<_;++A)(M=[d[A-1],d[A],d[A+1]])[1][2]=j(M),E.push(M),P.push(M);for(d[0][2]=d[_][2]=1/0,A=0,_=E.length;A<_;++A)(M=E[A]).previous=E[A-1],M.next=E[A+1];for(;M=P.pop();){var L=M.previous,C=M.next;M[1][2]<w?M[1][2]=w:w=M[1][2],L&&(L.next=C,L[2]=M[2],c(L)),C&&(C.previous=L,C[0]=M[0],c(C))}return d}));function c(d){P.remove(d),d[1][2]=j(d),P.push(d)}return{type:"Topology",bbox:d.bbox,objects:d.objects,arcs:A}},d.quantile=function(d,M){var j=[];return d.arcs.forEach((function(d){d.forEach((function(d){isFinite(d[2])&&j.push(d[2])}))})),j.length&&function(d,M){if(j=d.length){if((M=+M)<=0||j<2)return d[0];if(M>=1)return d[j-1];var j,k=(j-1)*M,P=Math.floor(k),A=d[P];return A+(d[P+1]-A)*(k-P)}}(j.sort(s),M)},d.simplify=function(d,M){M=null==M?Number.MIN_VALUE:+M;var j=d.arcs.map((function(d){for(var j,k=-1,P=0,A=d.length,_=new Array(A);++k<A;)(j=d[k])[2]>=M&&(_[P++]=[j[0],j[1]]);return _.length=P,_}));return{type:"Topology",transform:d.transform,bbox:d.bbox,objects:d.objects,arcs:j}},d.sphericalRingArea=function(d,M){var j=x(d,!0);return M&&(j*=-1),2*(j<0?k+j:j)},d.sphericalTriangleArea=function(d){return 2*_(x(d,!1))},Object.defineProperty(d,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("topojson-client")):"function"==typeof define&&define.amd?define(["exports","topojson-client"],n):n((r=r||self).topojson=r.topojson||{},r.topojson);