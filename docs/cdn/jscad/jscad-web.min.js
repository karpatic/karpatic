!function(xt){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=xt();else if("function"==typeof define&&define.amd)define([],xt);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jscadWeb=xt()}}((function(){return function r(xt,Ct,_t){function o(Vn,Gn){if(!Ct[Vn]){if(!xt[Vn]){var or="function"==typeof require&&require;if(!Gn&&or)return or(Vn,!0);if($t)return $t(Vn,!0);var lr=new Error("Cannot find module '"+Vn+"'");throw lr.code="MODULE_NOT_FOUND",lr}var Fr=Ct[Vn]={exports:{}};xt[Vn][0].call(Fr.exports,(function(Ct){return o(xt[Vn][1][Ct]||Ct)}),Fr,Fr.exports,r,xt,Ct,_t)}return Ct[Vn].exports}for(var $t="function"==typeof require&&require,Vn=0;Vn<_t.length;Vn++)o(_t[Vn]);return o}({1:[function(xt,Ct,_t){var $t,Vn;$t=this,Vn=function(){"use strict";function u(xt,Ct){return xt(Ct={exports:{}},Ct.exports),Ct.exports}var xt=u((function(xt){var Ct=xt.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=Ct)})),Ct=u((function(xt){var Ct=xt.exports={version:"2.6.5"};"number"==typeof __e&&(__e=Ct)})),_t=(Ct.version,function(xt){return"object"==typeof xt?null!==xt:"function"==typeof xt}),t=function(xt){if(!_t(xt))throw TypeError(xt+" is not an object!");return xt},n=function(xt){try{return!!xt()}catch(xt){return!0}},$t=!n((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),Vn=xt.document,Gn=_t(Vn)&&_t(Vn.createElement),or=!$t&&!n((function(){return 7!=Object.defineProperty(Gn?Vn.createElement("div"):{},"a",{get:function(){return 7}}).a})),lr=Object.defineProperty,Fr={f:$t?Object.defineProperty:function(xt,Ct,$t){if(t(xt),Ct=function(xt,Ct){if(!_t(xt))return xt;var $t,Vn;if("function"==typeof($t=xt.toString)&&!_t(Vn=$t.call(xt)))return Vn;if("function"==typeof($t=xt.valueOf)&&!_t(Vn=$t.call(xt)))return Vn;throw TypeError("Can't convert object to primitive value")}(Ct),t($t),or)try{return lr(xt,Ct,$t)}catch(xt){}if("get"in $t||"set"in $t)throw TypeError("Accessors not supported!");return"value"in $t&&(xt[Ct]=$t.value),xt}},Hr=$t?function(xt,Ct,_t){return Fr.f(xt,Ct,function(xt,Ct){return{enumerable:!1,configurable:!0,writable:!0,value:Ct}}(0,_t))}:function(xt,Ct,_t){return xt[Ct]=_t,xt},xo={}.hasOwnProperty,B=function(xt,Ct){return xo.call(xt,Ct)},Eo=0,Mo=Math.random(),Oo=u((function(_t){var $t=xt["__core-js_shared__"]||(xt["__core-js_shared__"]={});(_t.exports=function(xt,Ct){return $t[xt]||($t[xt]=void 0!==Ct?Ct:{})})("versions",[]).push({version:Ct.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}))("native-function-to-string",Function.toString),Ro=u((function(_t){var $t="Symbol(".concat("src",")_",(++Eo+Mo).toString(36)),Vn=(""+Oo).split("toString");Ct.inspectSource=function(xt){return Oo.call(xt)},(_t.exports=function(Ct,_t,Gn,or){var lr="function"==typeof Gn;lr&&(B(Gn,"name")||Hr(Gn,"name",_t)),Ct[_t]!==Gn&&(lr&&(B(Gn,$t)||Hr(Gn,$t,Ct[_t]?""+Ct[_t]:Vn.join(String(_t)))),Ct===xt?Ct[_t]=Gn:or?Ct[_t]?Ct[_t]=Gn:Hr(Ct,_t,Gn):(delete Ct[_t],Hr(Ct,_t,Gn)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[$t]||Oo.call(this)}))})),v=function(xt,Ct,_t){if(function(xt){if("function"!=typeof xt)throw TypeError(xt+" is not a function!")}(xt),void 0===Ct)return xt;switch(_t){case 1:return function(_t){return xt.call(Ct,_t)};case 2:return function(_t,$t){return xt.call(Ct,_t,$t)};case 3:return function(_t,$t,Vn){return xt.call(Ct,_t,$t,Vn)}}return function(){return xt.apply(Ct,arguments)}},p=function(_t,$t,Vn){var Gn,or,lr,Fr,xo=_t&p.F,Eo=_t&p.G,Mo=_t&p.S,Oo=_t&p.P,Io=_t&p.B,Bo=Eo?xt:Mo?xt[$t]||(xt[$t]={}):(xt[$t]||{}).prototype,zo=Eo?Ct:Ct[$t]||(Ct[$t]={}),Ho=zo.prototype||(zo.prototype={});for(Gn in Eo&&(Vn=$t),Vn)lr=((or=!xo&&Bo&&void 0!==Bo[Gn])?Bo:Vn)[Gn],Fr=Io&&or?v(lr,xt):Oo&&"function"==typeof lr?v(Function.call,lr):lr,Bo&&Ro(Bo,Gn,lr,_t&p.U),zo[Gn]!=lr&&Hr(zo,Gn,Fr),Oo&&Ho[Gn]!=lr&&(Ho[Gn]=lr)};xt.core=Ct,p.F=1,p.G=2,p.S=4,p.P=8,p.B=16,p.W=32,p.U=64,p.R=128;var Io=p,Bo=Math.ceil,zo=Math.floor,w=function(xt){return isNaN(xt=+xt)?0:(xt>0?zo:Bo)(xt)},b=function(xt,Ct){var _t,$t,Vn=String(function(xt){if(null==xt)throw TypeError("Can't call method on  "+xt);return xt}(xt)),Gn=w(Ct),or=Vn.length;return Gn<0||Gn>=or?void 0:(_t=Vn.charCodeAt(Gn))<55296||_t>56319||Gn+1===or||($t=Vn.charCodeAt(Gn+1))<56320||$t>57343?_t:$t-56320+(_t-55296<<10)+65536};Io(Io.P,"String",{codePointAt:function(xt){return b(this,xt)}}),Ct.String.codePointAt;var Ho=Math.max,Qo=Math.min,pi=String.fromCharCode,gi=String.fromCodePoint;Io(Io.S+Io.F*(!!gi&&1!=gi.length),"String",{fromCodePoint:function(xt){for(var Ct,_t,$t,Vn=arguments,Gn=[],or=arguments.length,lr=0;or>lr;){if(Ct=+Vn[lr++],$t=1114111,((_t=w(_t=Ct))<0?Ho(_t+$t,0):Qo(_t,$t))!==Ct)throw RangeError(Ct+" is not a valid code point");Gn.push(Ct<65536?pi(Ct):pi(55296+((Ct-=65536)>>10),Ct%1024+56320))}return Gn.join("")}}),Ct.String.fromCodePoint;var es,ts,ns,rs,os,is,ss,as,ls,cs,us,fs,hs,ps,ds={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},U_isSpaceSeparator=function(xt){return"string"==typeof xt&&ds.Space_Separator.test(xt)},U_isIdStartChar=function(xt){return"string"==typeof xt&&(xt>="a"&&xt<="z"||xt>="A"&&xt<="Z"||"$"===xt||"_"===xt||ds.ID_Start.test(xt))},U_isIdContinueChar=function(xt){return"string"==typeof xt&&(xt>="a"&&xt<="z"||xt>="A"&&xt<="Z"||xt>="0"&&xt<="9"||"$"===xt||"_"===xt||"â€Œ"===xt||"â€"===xt||ds.ID_Continue.test(xt))},U_isDigit=function(xt){return"string"==typeof xt&&/[0-9]/.test(xt)},U_isHexDigit=function(xt){return"string"==typeof xt&&/[0-9A-Fa-f]/.test(xt)};function Z(){for(cs="default",us="",fs=!1,hs=1;;){ps=q();var xt=ms[cs]();if(xt)return xt}}function q(){if(es[rs])return String.fromCodePoint(es.codePointAt(rs))}function W(){var xt=q();return"\n"===xt?(os++,is=0):xt?is+=xt.length:is++,xt&&(rs+=xt.length),xt}var ms={default:function(){switch(ps){case"\t":case"\v":case"\f":case" ":case"Â ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void W();case"/":return W(),void(cs="comment");case void 0:return W(),K("eof")}if(!U_isSpaceSeparator(ps))return ms[ts]();W()},comment:function(){switch(ps){case"*":return W(),void(cs="multiLineComment");case"/":return W(),void(cs="singleLineComment")}throw ru(W())},multiLineComment:function(){switch(ps){case"*":return W(),void(cs="multiLineCommentAsterisk");case void 0:throw ru(W())}W()},multiLineCommentAsterisk:function(){switch(ps){case"*":return void W();case"/":return W(),void(cs="default");case void 0:throw ru(W())}W(),cs="multiLineComment"},singleLineComment:function(){switch(ps){case"\n":case"\r":case"\u2028":case"\u2029":return W(),void(cs="default");case void 0:return W(),K("eof")}W()},value:function(){switch(ps){case"{":case"[":return K("punctuator",W());case"n":return W(),Q("ull"),K("null",null);case"t":return W(),Q("rue"),K("boolean",!0);case"f":return W(),Q("alse"),K("boolean",!1);case"-":case"+":return"-"===W()&&(hs=-1),void(cs="sign");case".":return us=W(),void(cs="decimalPointLeading");case"0":return us=W(),void(cs="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return us=W(),void(cs="decimalInteger");case"I":return W(),Q("nfinity"),K("numeric",1/0);case"N":return W(),Q("aN"),K("numeric",NaN);case'"':case"'":return fs='"'===W(),us="",void(cs="string")}throw ru(W())},identifierNameStartEscape:function(){if("u"!==ps)throw ru(W());W();var xt=Y();switch(xt){case"$":case"_":break;default:if(!U_isIdStartChar(xt))throw nu()}us+=xt,cs="identifierName"},identifierName:function(){switch(ps){case"$":case"_":case"â€Œ":case"â€":return void(us+=W());case"\\":return W(),void(cs="identifierNameEscape")}if(!U_isIdContinueChar(ps))return K("identifier",us);us+=W()},identifierNameEscape:function(){if("u"!==ps)throw ru(W());W();var xt=Y();switch(xt){case"$":case"_":case"â€Œ":case"â€":break;default:if(!U_isIdContinueChar(xt))throw nu()}us+=xt,cs="identifierName"},sign:function(){switch(ps){case".":return us=W(),void(cs="decimalPointLeading");case"0":return us=W(),void(cs="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return us=W(),void(cs="decimalInteger");case"I":return W(),Q("nfinity"),K("numeric",hs*(1/0));case"N":return W(),Q("aN"),K("numeric",NaN)}throw ru(W())},zero:function(){switch(ps){case".":return us+=W(),void(cs="decimalPoint");case"e":case"E":return us+=W(),void(cs="decimalExponent");case"x":case"X":return us+=W(),void(cs="hexadecimal")}return K("numeric",0*hs)},decimalInteger:function(){switch(ps){case".":return us+=W(),void(cs="decimalPoint");case"e":case"E":return us+=W(),void(cs="decimalExponent")}if(!U_isDigit(ps))return K("numeric",hs*Number(us));us+=W()},decimalPointLeading:function(){if(U_isDigit(ps))return us+=W(),void(cs="decimalFraction");throw ru(W())},decimalPoint:function(){switch(ps){case"e":case"E":return us+=W(),void(cs="decimalExponent")}return U_isDigit(ps)?(us+=W(),void(cs="decimalFraction")):K("numeric",hs*Number(us))},decimalFraction:function(){switch(ps){case"e":case"E":return us+=W(),void(cs="decimalExponent")}if(!U_isDigit(ps))return K("numeric",hs*Number(us));us+=W()},decimalExponent:function(){switch(ps){case"+":case"-":return us+=W(),void(cs="decimalExponentSign")}if(U_isDigit(ps))return us+=W(),void(cs="decimalExponentInteger");throw ru(W())},decimalExponentSign:function(){if(U_isDigit(ps))return us+=W(),void(cs="decimalExponentInteger");throw ru(W())},decimalExponentInteger:function(){if(!U_isDigit(ps))return K("numeric",hs*Number(us));us+=W()},hexadecimal:function(){if(U_isHexDigit(ps))return us+=W(),void(cs="hexadecimalInteger");throw ru(W())},hexadecimalInteger:function(){if(!U_isHexDigit(ps))return K("numeric",hs*Number(us));us+=W()},string:function(){switch(ps){case"\\":return W(),void(us+=function(){switch(q()){case"b":return W(),"\b";case"f":return W(),"\f";case"n":return W(),"\n";case"r":return W(),"\r";case"t":return W(),"\t";case"v":return W(),"\v";case"0":if(W(),U_isDigit(q()))throw ru(W());return"\0";case"x":return W(),function(){var xt="",Ct=q();if(!U_isHexDigit(Ct))throw ru(W());if(xt+=W(),Ct=q(),!U_isHexDigit(Ct))throw ru(W());return xt+=W(),String.fromCodePoint(parseInt(xt,16))}();case"u":return W(),Y();case"\n":case"\u2028":case"\u2029":return W(),"";case"\r":return W(),"\n"===q()&&W(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw ru(W())}return W()}());case'"':return fs?(W(),K("string",us)):void(us+=W());case"'":return fs?void(us+=W()):(W(),K("string",us));case"\n":case"\r":throw ru(W());case"\u2028":case"\u2029":!function(xt){console.warn("JSON5: '"+Fu(xt)+"' in strings is not valid ECMAScript; consider escaping")}(ps);break;case void 0:throw ru(W())}us+=W()},start:function(){switch(ps){case"{":case"[":return K("punctuator",W())}cs="value"},beforePropertyName:function(){switch(ps){case"$":case"_":return us=W(),void(cs="identifierName");case"\\":return W(),void(cs="identifierNameStartEscape");case"}":return K("punctuator",W());case'"':case"'":return fs='"'===W(),void(cs="string")}if(U_isIdStartChar(ps))return us+=W(),void(cs="identifierName");throw ru(W())},afterPropertyName:function(){if(":"===ps)return K("punctuator",W());throw ru(W())},beforePropertyValue:function(){cs="value"},afterPropertyValue:function(){switch(ps){case",":case"}":return K("punctuator",W())}throw ru(W())},beforeArrayValue:function(){if("]"===ps)return K("punctuator",W());cs="value"},afterArrayValue:function(){switch(ps){case",":case"]":return K("punctuator",W())}throw ru(W())},end:function(){throw ru(W())}};function K(xt,Ct){return{type:xt,value:Ct,line:os,column:is}}function Q(xt){for(var Ct=0,_t=xt;Ct<_t.length;Ct+=1){var $t=_t[Ct];if(q()!==$t)throw ru(W());W()}}function Y(){for(var xt="",Ct=4;Ct-- >0;){var _t=q();if(!U_isHexDigit(_t))throw ru(W());xt+=W()}return String.fromCodePoint(parseInt(xt,16))}var gs={start:function(){if("eof"===ss.type)throw tu();Du()},beforePropertyName:function(){switch(ss.type){case"identifier":case"string":return as=ss.value,void(ts="afterPropertyName");case"punctuator":return void eu();case"eof":throw tu()}},afterPropertyName:function(){if("eof"===ss.type)throw tu();ts="beforePropertyValue"},beforePropertyValue:function(){if("eof"===ss.type)throw tu();Du()},beforeArrayValue:function(){if("eof"===ss.type)throw tu();"punctuator"!==ss.type||"]"!==ss.value?Du():eu()},afterPropertyValue:function(){if("eof"===ss.type)throw tu();switch(ss.value){case",":return void(ts="beforePropertyName");case"}":eu()}},afterArrayValue:function(){if("eof"===ss.type)throw tu();switch(ss.value){case",":return void(ts="beforeArrayValue");case"]":eu()}},end:function(){}};function Du(){var xt;switch(ss.type){case"punctuator":switch(ss.value){case"{":xt={};break;case"[":xt=[]}break;case"null":case"boolean":case"numeric":case"string":xt=ss.value}if(void 0===ls)ls=xt;else{var Ct=ns[ns.length-1];Array.isArray(Ct)?Ct.push(xt):Object.defineProperty(Ct,as,{value:xt,writable:!0,enumerable:!0,configurable:!0})}if(null!==xt&&"object"==typeof xt)ns.push(xt),ts=Array.isArray(xt)?"beforeArrayValue":"beforePropertyName";else{var _t=ns[ns.length-1];ts=null==_t?"end":Array.isArray(_t)?"afterArrayValue":"afterPropertyValue"}}function eu(){ns.pop();var xt=ns[ns.length-1];ts=null==xt?"end":Array.isArray(xt)?"afterArrayValue":"afterPropertyValue"}function ru(xt){return Cu(void 0===xt?"JSON5: invalid end of input at "+os+":"+is:"JSON5: invalid character '"+Fu(xt)+"' at "+os+":"+is)}function tu(){return Cu("JSON5: invalid end of input at "+os+":"+is)}function nu(){return Cu("JSON5: invalid identifier character at "+os+":"+(is-=5))}function Fu(xt){var Ct={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(Ct[xt])return Ct[xt];if(xt<" "){var _t=xt.charCodeAt(0).toString(16);return"\\x"+("00"+_t).substring(_t.length)}return xt}function Cu(xt){var Ct=new SyntaxError(xt);return Ct.lineNumber=os,Ct.columnNumber=is,Ct}return{parse:function(xt,Ct){es=String(xt),ts="start",ns=[],rs=0,os=1,is=0,ss=void 0,as=void 0,ls=void 0;do{ss=Z(),gs[ts]()}while("eof"!==ss.type);return"function"==typeof Ct?function u(xt,Ct,_t){var $t=xt[Ct];if(null!=$t&&"object"==typeof $t)if(Array.isArray($t))for(var Vn=0;Vn<$t.length;Vn++){var Gn=String(Vn),or=u($t,Gn,_t);void 0===or?delete $t[Gn]:Object.defineProperty($t,Gn,{value:or,writable:!0,enumerable:!0,configurable:!0})}else for(var lr in $t){var Fr=u($t,lr,_t);void 0===Fr?delete $t[lr]:Object.defineProperty($t,lr,{value:Fr,writable:!0,enumerable:!0,configurable:!0})}return _t.call(xt,Ct,$t)}({"":ls},"",Ct):ls},stringify:function(xt,Ct,_t){var $t,Vn,Gn,or=[],lr="",Fr="";if(null==Ct||"object"!=typeof Ct||Array.isArray(Ct)||(_t=Ct.space,Gn=Ct.quote,Ct=Ct.replacer),"function"==typeof Ct)Vn=Ct;else if(Array.isArray(Ct)){$t=[];for(var Hr=0,xo=Ct;Hr<xo.length;Hr+=1){var Eo=xo[Hr],Mo=void 0;"string"==typeof Eo?Mo=Eo:("number"==typeof Eo||Eo instanceof String||Eo instanceof Number)&&(Mo=String(Eo)),void 0!==Mo&&$t.indexOf(Mo)<0&&$t.push(Mo)}}return _t instanceof Number?_t=Number(_t):_t instanceof String&&(_t=String(_t)),"number"==typeof _t?_t>0&&(_t=Math.min(10,Math.floor(_t)),Fr="          ".substr(0,_t)):"string"==typeof _t&&(Fr=_t.substr(0,10)),function c(xt,Ct){var _t=Ct[xt];switch(null!=_t&&("function"==typeof _t.toJSON5?_t=_t.toJSON5(xt):"function"==typeof _t.toJSON&&(_t=_t.toJSON(xt))),Vn&&(_t=Vn.call(Ct,xt,_t)),_t instanceof Number?_t=Number(_t):_t instanceof String?_t=String(_t):_t instanceof Boolean&&(_t=_t.valueOf()),_t){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof _t?B(_t):"number"==typeof _t?String(_t):"object"==typeof _t?Array.isArray(_t)?function(xt){if(or.indexOf(xt)>=0)throw TypeError("Converting circular structure to JSON5");or.push(xt);var Ct=lr;lr+=Fr;for(var _t,$t=[],Vn=0;Vn<xt.length;Vn++){var Gn=c(String(Vn),xt);$t.push(void 0!==Gn?Gn:"null")}if(0===$t.length)_t="[]";else if(""===Fr)_t="["+$t.join(",")+"]";else{var Hr=",\n"+lr,xo=$t.join(Hr);_t="[\n"+lr+xo+",\n"+Ct+"]"}return or.pop(),lr=Ct,_t}(_t):function(xt){if(or.indexOf(xt)>=0)throw TypeError("Converting circular structure to JSON5");or.push(xt);var Ct=lr;lr+=Fr;for(var _t,Vn,Gn=[],Hr=0,xo=$t||Object.keys(xt);Hr<xo.length;Hr+=1){var Eo=xo[Hr],Mo=c(Eo,xt);if(void 0!==Mo){var Oo=s(Eo)+":";""!==Fr&&(Oo+=" "),Oo+=Mo,Gn.push(Oo)}}if(0===Gn.length)_t="{}";else if(""===Fr)_t="{"+(Vn=Gn.join(","))+"}";else{var Ro=",\n"+lr;Vn=Gn.join(Ro),_t="{\n"+lr+Vn+",\n"+Ct+"}"}return or.pop(),lr=Ct,_t}(_t):void 0}("",{"":xt});function B(xt){for(var Ct={"'":.1,'"':.2},_t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},$t="",Vn=0;Vn<xt.length;Vn++){var or=xt[Vn];switch(or){case"'":case'"':Ct[or]++,$t+=or;continue;case"\0":if(U_isDigit(xt[Vn+1])){$t+="\\x00";continue}}if(_t[or])$t+=_t[or];else if(or<" "){var lr=or.charCodeAt(0).toString(16);$t+="\\x"+("00"+lr).substring(lr.length)}else $t+=or}var Fr=Gn||Object.keys(Ct).reduce((function(xt,_t){return Ct[xt]<Ct[_t]?xt:_t}));return Fr+($t=$t.replace(new RegExp(Fr,"g"),_t[Fr]))+Fr}function s(xt){if(0===xt.length)return B(xt);var Ct=String.fromCodePoint(xt.codePointAt(0));if(!U_isIdStartChar(Ct))return B(xt);for(var _t=Ct.length;_t<xt.length;_t++)if(!U_isIdContinueChar(String.fromCodePoint(xt.codePointAt(_t))))return B(xt);return xt}}}},"object"==typeof _t&&void 0!==Ct?Ct.exports=Vn():$t.JSON5=Vn()},{}],2:[function(xt,Ct,_t){"use strict";Ct.exports=xt=>{if("string"!=typeof xt)throw new TypeError("Expected a string, got "+typeof xt);return 65279===xt.charCodeAt(0)?xt.slice(1):xt}},{}],3:[function(xt,Ct,_t){Ct.exports={name:"@jscad/core",version:"2.6.8",description:"Core functionality for JSCAD Applications",homepage:"https://openjscad.xyz/",repository:"https://github.com/jscad/OpenJSCAD.org",main:"src/index.js",unpkg:"dist/jscad-core.min.js",scripts:{build:"browserify src/index.js -o dist/jscad-core.min.js -g uglifyify --standalone jscadCore",version:"npm run build && git add dist",coverage:"nyc --all --reporter=html --reporter=text npm test",test:"ava './src/**/*.test.js' --verbose --timeout 2m"},contributors:[{name:"Rene K. Mueller",url:"http://renekmueller.com"},{name:"z3dev",url:"http://www.z3d.jp"},{name:"Mark 'kaosat-dev' Moissette",url:"http://kaosat.net"}],keywords:["openjscad","jscad","core","application","functions"],license:"MIT",dependencies:{"@jscad/array-utils":"2.1.4","@jscad/io":"2.4.7","@jscad/io-utils":"2.0.26","@jscad/modeling":"2.12.1",json5:"2.2.3","strip-bom":"4.0.0"},devDependencies:{ava:"3.15.0",browserify:"16.5.1",nyc:"15.1.0",uglifyify:"5.0.2"},collective:{type:"opencollective",url:"https://opencollective.com/openjscad",logo:"https://opencollective.com/openjscad/logo.txt"},gitHead:"a90b9bad95a417661c619dc733e62c587dc71a4a"}},{}],4:[function(xt,Ct,_t){Ct.exports={rebuildGeometry:xt("./rebuildGeometry"),rebuildGeometryCli:xt("./rebuildGeometryCli"),rebuildGeometryWorker:xt("./rebuildGeometryWorker"),serializeSolids:xt("./serializeSolids")}},{"./rebuildGeometry":6,"./rebuildGeometryCli":7,"./rebuildGeometryWorker":8,"./serializeSolids":9}],5:[function(xt,Ct,_t){const $t=xt("@jscad/modeling").geometries.geom2.isA,Vn=xt("@jscad/modeling").geometries.geom3.isA,Gn=xt("@jscad/modeling").geometries.path2.isA,{flatten:or,toArray:lr}=xt("@jscad/array-utils"),Fr=xt("./serializeSolids");Ct.exports=(xt,Ct,_t)=>{const{serialize:Hr}=_t;let xo;const Eo=or(lr(xt.main(Ct)));if((xt=>!!(Array.isArray(xt)&&xt.length>0)&&xt.reduce(((xt,Ct)=>xt||Vn(Ct)||$t(Ct)||Gn(Ct)),!1))(Eo))return{solids:xo=Hr?Fr(Eo):Eo};throw new Error("bad output from script: expected geom3/geom2/path2 objects")}},{"./serializeSolids":9,"@jscad/array-utils":525,"@jscad/modeling":210}],6:[function(xt,Ct,_t){const $t=xt("../code-loading/loadDesign"),Vn=xt("./instanciateDesign"),Gn=xt("../parameters/applyParameterDefinitions");Ct.exports=(xt,Ct)=>{let{mainPath:_t,apiMainPath:or,serialize:lr,lookup:Fr,lookupCounts:Hr,parameterValues:xo}=Object.assign({},{mainPath:"",apiMainPath:"@jscad/modeling",serialize:!1,lookup:null,lookupCounts:null,parameterValues:{}},xt);try{const Eo=xt.filesAndFolders,Mo=$t(_t,or,Eo,xo);Ct(null,{type:"params",parameterDefaults:Mo.parameterValues,parameterDefinitions:Mo.parameterDefinitions}),xo=Gn(xo,Mo.parameterDefinitions),xo=Object.assign({},Mo.parameterValues,xo);const Oo={lookup:Fr,lookupCounts:Hr,serialize:lr},Ro=Vn(Mo.rootModule,xo,Oo);Ct(null,{type:"solids",solids:Ro.solids,lookup:Ro.lookup,lookupCounts:Ro.lookupCounts})}catch(xt){Ct({type:"errors",name:xt.name?xt.name:"Error",message:xt.message?xt.message:xt.toString(),description:xt.description?xt.description:"",number:xt.number?xt.number:"",fileName:xt.fileName?xt.fileName:"",lineNumber:xt.lineNumber?xt.lineNumber:"",columnNumber:xt.columnNumber?xt.columnNumber:"",stack:xt.stack?xt.stack:""},null)}}},{"../code-loading/loadDesign":11,"../parameters/applyParameterDefinitions":22,"./instanciateDesign":5}],7:[function(xt,Ct,_t){const $t=xt("path"),{toArray:Vn}=xt("@jscad/array-utils"),Gn=xt("../code-loading/requireDesignFromModule"),or=xt("../parameters/getParameterDefinitionsAndValues"),lr=xt("../code-loading/webRequire");Ct.exports=Ct=>{let{apiMainPath:_t,mainPath:Fr,parameterValues:Hr,useFakeFs:xo}=Object.assign({},{apiMainPath:"@jscad/modeling"},Ct),Eo=xt;if(xo){const xt=$t.parse(Fr),Vn=`${xt.name}.js`,Gn=`/${xt.name}.js`,or=[{ext:"js",fullPath:Gn,name:Vn,source:Ct.source}];Eo=lr(or,{apiMainPath:_t}),Fr=Gn}const Mo=Gn(Fr,Eo),Oo=or(Mo,Hr);return Vn(Mo.main(Oo.parameterValues))}},{"../code-loading/requireDesignFromModule":14,"../code-loading/webRequire":18,"../parameters/getParameterDefinitionsAndValues":23,"@jscad/array-utils":525,path:711}],8:[function(xt,Ct,_t){Ct.exports=Ct=>{const _t=xt("./rebuildGeometry");Ct.onmessage=function(xt){if(xt.data instanceof Object){const{data:$t}=xt;"generate"===$t.cmd&&_t($t,((xt,_t)=>{_t&&Ct.postMessage(_t),xt&&Ct.postMessage(xt)}))}}}},{"./rebuildGeometry":6}],9:[function(xt,Ct,_t){const{geom2:$t,geom3:Vn,path2:Gn}=xt("@jscad/modeling").geometries;Ct.exports=xt=>xt.map((xt=>($t.isA(xt)&&$t.toSides(xt),Vn.isA(xt)&&Vn.toPolygons(xt),Gn.isA(xt)&&Gn.toPoints(xt),xt)))},{"@jscad/modeling":210}],10:[function(xt,Ct,_t){Ct.exports={makeFakeFs:xt("./makeFakeFs.js"),requireDesignUtilsFs:xt("./requireDesignUtilsFs")}},{"./makeFakeFs.js":12,"./requireDesignUtilsFs":15}],11:[function(xt,Ct,_t){const{registerAllExtensions:$t}=xt("../io/registerExtensions"),Vn=xt("./transformSources"),Gn=xt("./makeFakeFs"),or=xt("./webRequire"),lr=xt("./normalizeDesignModule"),Fr=xt("../parameters/getParameterDefinitionsAndValues");Ct.exports=(xt,Ct,_t,Hr)=>{(_t=Vn({apiMainPath:Ct},_t)).length>1&&(_t=[{fullPath:"/",name:"",children:_t}]);const xo=Gn(_t),Eo=or(_t,{apiMainPath:Ct});$t(xo,Eo);let Mo=Eo(_t[0].fullPath);return{rootModule:Mo=lr(Mo),...Fr(Mo,Hr)}}},{"../io/registerExtensions":21,"../parameters/getParameterDefinitionsAndValues":23,"./makeFakeFs":12,"./normalizeDesignModule":13,"./transformSources":16,"./webRequire":18}],12:[function(xt,Ct,_t){Ct.exports=xt=>{const e=(Ct,_t=xt)=>{for(let xt=0;xt<_t.length;xt++){const $t=_t[xt];if(Ct===$t.fullPath||"/"+Ct===$t.fullPath)return $t;if($t.children){const xt=e(Ct,$t.children);if(void 0!==xt)return xt}}},n=xt=>{const Ct=e(xt);return{isFile:xt=>Ct&&"source"in Ct&&!("children"in Ct),isDirectory:xt=>Ct&&!("source"in Ct)&&"children"in Ct}};return{statSync:n,existsSync:xt=>void 0!==e(xt),readdirSync:xt=>e(xt).children.map((xt=>xt.name)),readDir:(xt,Ct)=>{Ct(null,e(xt))},readFile:(xt,Ct,_t)=>{const $t=e(xt);if(!$t)throw new Error(`ENOENT: no such file or directory, open '${xt}'`);n(xt).isFile()?_t(null,$t.source):_t(new Error(`${$t} is not a file, cannot read`))},readFileSync:(xt,Ct)=>{const _t=e(xt);if(!_t)throw new Error(`ENOENT: no such file or directory, open '${xt}'`);if(n(xt).isFile())return _t.source;throw new Error(`${_t} is not a file, cannot read`)}}}},{}],13:[function(xt,Ct,_t){Ct.exports=xt=>{if(!xt)throw new Error("no root module found, please check the project structure");if("function"==typeof xt&&(console.warn("please refactor the exports, assigning main() as a property, i.e. module.exports = { main }"),xt={main:xt}),!xt.main)throw new Error("no main() function found, please check the module.exports");if("function"!=typeof xt.main)throw new Error("main is not a function, please check the module.exports");return xt}},{}],14:[function(xt,Ct,_t){const $t=xt("./validateDesignModule"),Vn=xt("./normalizeDesignModule");Ct.exports=(Ct,_t=xt)=>{const Gn=_t(Ct);return $t(Gn),Vn(Gn)}},{"./normalizeDesignModule":13,"./validateDesignModule":17}],15:[function(xt,Ct,_t){const $t=xt("path"),{toArray:Vn}=xt("@jscad/array-utils"),Gn=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/,parsePath=xt=>{assertPath(xt);const Ct=(xt=>Gn.exec(xt).slice(1))(xt);if(!Ct||4!==Ct.length)throw new TypeError("Invalid path '"+xt+"'");return Ct[1]=Ct[1]||"",Ct[2]=Ct[2]||"",Ct[3]=Ct[3]||"",{root:Ct[0],dir:Ct[0]+Ct[1].slice(0,Ct[1].length-1),base:Ct[2],ext:Ct[3],name:Ct[2].slice(0,Ct[2].length-Ct[3].length)}},assertPath=xt=>{if("string"!=typeof xt)throw new TypeError("Path must be a string. Received "+xt)},packageNameFromDir=(xt,Ct,_t)=>{const Vn=$t.join(Ct,"package.json");if(xt.existsSync(Vn)){const Ct=JSON.parse(xt.readFileSync(Vn)).name;if(Ct)return Ct}return _t?parsePath($t.basename(_t)).name:$t.basename(Ct)};Ct.exports={getDesignEntryPoint:(xt,Ct)=>{if(!Ct)return;const _t=Vn(Ct)[0];let Gn;const or=xt.statSync(_t);if(or.isFile())return _t;if(or.isDirectory()){const Ct=$t.join(_t,"package.json");if(xt.existsSync(Ct)){const Vn=JSON.parse(xt.readFileSync(Ct)).main;if(Vn)return $t.join(_t,Vn)}const Vn=xt.readdirSync(_t),or=["main","index",parsePath($t.basename(_t)).name],lr=or.map((xt=>xt+".js")),Fr=or.map((xt=>xt+".jscad")),Hr=Vn.filter((xt=>lr.concat(Fr).includes(xt)));return Hr.length>0&&(Gn=$t.join(_t,Hr[0])),Gn}return _t},getDesignName:(xt,Ct)=>{if(!Ct)return"undefined";const _t=Vn(Ct)[0],Gn=xt.statSync(_t);if(Gn.isFile()){const Ct=$t.dirname(_t);return packageNameFromDir(xt,Ct,_t)}return Gn.isDirectory()?packageNameFromDir(xt,_t):void 0}}},{"@jscad/array-utils":525,path:711}],16:[function(xt,Ct,_t){const{deserializers:$t}=xt("@jscad/io"),modulifyTransform=(xt,Ct)=>Object.assign({},Ct,{source:Ct.source});Ct.exports=(xt,Ct)=>{if(Ct&&Ct.length>1)return Ct;const _t={js:[modulifyTransform],jscad:[modulifyTransform]};return Ct&&(Ct=Ct.map((Ct=>(Ct=>{if(Ct.source&&Ct.ext){const Vn=Object.assign({},xt,{filename:Ct.name,output:"script"});if(Ct.ext in $t){return((xt,Ct)=>{const _t=xt.name.substring(0,xt.name.lastIndexOf(".")+1)+"jscad",$t="/"+_t;return Object.assign({},xt,{ext:"jscad",name:_t,fullPath:$t,source:Ct})})(Ct,(0,$t[Ct.ext])(Vn,Ct.source))}if(Ct.ext in _t)return _t[Ct.ext].reduce(((xt,Ct)=>Ct(Vn,xt)),Ct)}return Ct})(Ct)))),Ct}},{"@jscad/io":69}],17:[function(xt,Ct,_t){Ct.exports=xt=>{if(!xt)throw new Error("undefined root module passed !");if("function"==typeof xt&&console.warn("please use named exports for your main() function ! auto updating"),!("main"in xt))throw new Error("no main() function found in the input script")}},{}],18:[function(xt,Ct,_t){const $t=xt("path"),Vn=$t.posix?$t.posix:$t,Gn=xt("../utils/getFileExtensionFromString"),{combineParameterDefinitions:or,getParameterDefinitionsFromSource:lr}=xt("../parameters/getParameterDefinitionsFromSource"),findMatch=(xt,Ct)=>{for(let _t=0;_t<Ct.length;_t++){const $t=Ct[_t];if(xt===$t.fullPath||"/"+xt===$t.fullPath)return $t;if($t.children){const Ct=findMatch(xt,$t.children);if(void 0!==Ct)return Ct}}};Ct.exports=(Ct,_t)=>{const $t={apiMainPath:"@jscad/modeling",fakeFs:xt("./makeFakeFs")(Ct)},{apiMainPath:Fr,fakeFs:Hr}=Object.assign({},$t,_t),xo=xt("@jscad/modeling"===Fr?"@jscad/modeling":Fr),Eo={"@jscad/io":{exports:xt("@jscad/io")},"@jscad/array-utils":{exports:xt("@jscad/array-utils")},"@jscad/modeling":{exports:xo},fs:{exports:Hr}},Mo={},Oo={},u=(xt,_t)=>{const $t=Eo[_t];if($t)return $t.exports;xt&&!_t.startsWith("/")||(xt="/");const i=xt=>{let _t=Gn(xt);_t||(_t="js",xt+=".js"),_t="."+_t;const $t=findMatch(xt,Ct);if(!$t)return null;if($t.children)return null;if(Mo[_t]){if(Oo[xt])return Oo[xt];const Ct={exports:{},_compile:(xt,_t)=>{try{new Function("require","module",xt)(u.bind(null,$t.fullPath),Ct)}catch(xt){const Ct=xt.message;_t=_t.replace("/","");const $t=xt.lineNumber?xt.lineNumber-2:0,Vn=xt.columnNumber?xt.columnNumber:0;throw xt.stack.startsWith("Object")?xt.stack=`${xt.stack}\nObject.<anonymous> (${_t}:${$t}:${Vn})`:((xt=new SyntaxError(Ct,_t,$t)).columnNumber=Vn,xt.stack=`Object.<anonymous> (${_t}:${$t}:${Vn})`),xt}const Vn=xt.includes("@jscad-params")?lr(xt,_t):[],Gn=Ct.exports.getParameterDefinitions;Ct.exports.getParameterDefinitions=()=>or(Vn,Gn&&Gn()||[])}};return Mo[_t](Ct,$t.fullPath),Oo[xt]=Ct.exports,Oo[xt]}return null},s=xt=>{if(!findMatch(xt,Ct))return null;"/"===xt&&(xt="");let _t=xt+"/index.js",$t=i(_t);return $t||($t=i(_t=xt+"/index.json"))||null},c=xt=>{let _t,$t=findMatch(xt,Ct);if(!$t)return null;if(!$t.children)return null;if($t=findMatch(xt+"/package.json",Ct)){const Ct=JSON.parse($t.source).main;if(Ct){const $t=Vn.normalize(xt+"/"+Ct);return(_t=i($t))?_t:(_t=s($t))||null}}return(_t=s(xt))||null};if(_t.startsWith("./")||_t.startsWith("/")||_t.startsWith("../")){_t=Vn.normalize(Vn.dirname(xt)+Vn.sep+_t);let Ct=i(_t);if(Ct)return Ct;if(Ct=c(_t))return Ct;throw new Error(`Cannot find relative path to module ${_t}`)}const Fr=((xt,Ct)=>{const _t=(xt=>{const Ct=xt.split("/"),_t=[];for(let xt=Ct.length-1;xt>0;xt--){if("node_modules"===Ct[xt])continue;const $t=Vn.sep+Vn.join(...Ct.slice(1,xt+1),"node_modules");_t.push($t)}return _t})(Ct);for(let Ct=0;Ct<_t.length;Ct++){const $t=_t[Ct],Gn=Vn.join($t,xt);let or=i(Gn);if(or)return or;if(or=c(Gn))return or}return null})(_t,Vn.dirname(xt));if(Fr)return Fr;throw new Error(`Cannot find module ${_t}`)},Ro=u.bind(null,"/");return Ro.extensions=Mo,Ro.resolve=()=>{},((Ct,_t)=>{const $t=xt("strip-bom");_t.extensions[".js"]=(xt,_t)=>{const Vn=Ct.readFileSync(_t,"utf8");xt._compile($t(Vn),_t)}})(Hr,Ro),((xt,Ct)=>{Ct.extensions[".json"]=(Ct,_t)=>{const $t=xt.readFileSync(_t,"utf8");Ct.exports=JSON.parse($t)}})(Hr,Ro),Ro}},{"../parameters/getParameterDefinitionsFromSource":24,"../utils/getFileExtensionFromString":28,"./makeFakeFs":12,"@jscad/array-utils":525,"@jscad/io":69,"@jscad/modeling":210,path:711,"strip-bom":2}],19:[function(xt,Ct,_t){Ct.exports={evaluation:xt("./code-evaluation"),io:xt("./io"),loading:xt("./code-loading"),parameters:xt("./parameters"),utils:xt("./utils"),web:xt("./web")}},{"./code-evaluation":4,"./code-loading":10,"./io":20,"./parameters":27,"./utils":29,"./web":31}],20:[function(xt,Ct,_t){Ct.exports={registerAllExtensions:xt("./registerExtensions").registerAllExtensions,unRegisterAllExtensions:xt("./registerExtensions").unRegisterAllExtensions}},{"./registerExtensions":21}],21:[function(xt,Ct,_t){const{deserializers:$t}=xt("@jscad/io"),registerDeserializer=(xt,Ct,_t)=>{const Vn=$t[xt],Gn="."+xt;_t.extensions[Gn]=(xt,_t)=>{const $t=Ct.readFileSync(_t,"utf8"),Gn=Vn({filename:_t,output:"geometry"},$t);xt.exports=Gn}},unregisterDeserializer=(xt,Ct,_t)=>{const $t="."+xt;delete _t.extensions[$t]};Ct.exports={registerAllExtensions:(Ct,_t)=>{((Ct,_t)=>{const $t=xt("strip-bom");_t.extensions[".jscad"]=(xt,_t)=>{const Vn=Ct.readFileSync(_t,"utf8");xt._compile($t(Vn),_t)}})(Ct,_t);for(const xt of Object.keys($t))registerDeserializer(xt,Ct,_t)},unRegisterAllExtensions:(xt,Ct)=>{((xt,Ct)=>{delete Ct.extensions[".jscad"]})(0,Ct);for(const xt of Object.keys($t))unregisterDeserializer(xt,0,Ct)}}},{"@jscad/io":69,"strip-bom":2}],22:[function(xt,Ct,_t){const valueForChoices=(xt,Ct)=>{let _t=xt;const $t=Ct.captions?Ct.captions.indexOf(_t):Ct.values.indexOf(_t);return _t=$t>-1&&Ct.values.length>=$t?Ct.values[$t]:_t,_t=Ct.values.length>0&&(xt=>!isNaN(parseFloat(xt))&&isFinite(xt))(Ct.values[0])?parseFloat(_t):_t,Ct.values.length>0&&"boolean"==typeof _t?!!_t:_t};Ct.exports=(xt,Ct,_t=!1)=>Object.keys(xt).reduce((($t,Vn)=>{let Gn=xt[Vn];const or=Ct.filter((xt=>xt.name===Vn)),lr=or.length>0?or[0]:{type:"unknown"};switch(lr.type){case"choice":case"radio":Gn=valueForChoices(Gn,lr);break;case"float":case"number":case"slider":if(isNaN(parseFloat(Gn))||!isFinite(Gn))throw new Error("Parameter ("+Vn+") is not a valid number ("+Gn+")");Gn=parseFloat(Gn);break;case"int":if(isNaN(parseFloat(Gn))||!isFinite(Gn))throw new Error("Parameter ("+Vn+") is not a valid number ("+Gn+")");Gn=parseInt(Gn);break;case"checkbox":Gn=!!Gn;break;default:if(_t)throw new Error(`Parameter (${Vn}) has no matching definition`)}return $t[Vn]=Gn,$t}),{})},{}],23:[function(xt,Ct,_t){const $t=xt("./getParameterValuesFromParameters"),Vn=xt("./applyParameterDefinitions");Ct.exports=(xt,Ct)=>{let{parameterDefinitions:_t,parameterValues:Gn}=((xt,Ct)=>{let _t={},Vn=[];return(xt=>xt&&"getParameterDefinitions"in xt)(xt)&&(Vn=xt.getParameterDefinitions(Ct)||[],_t=$t(Vn)),{parameterDefinitions:Vn,parameterValues:_t}})(xt,Ct);return{parameterValues:Gn=(Gn=Object.assign({},Gn,Ct))?Vn(Gn,_t):Gn,parameterDefinitions:_t}}},{"./applyParameterDefinitions":22,"./getParameterValuesFromParameters":25}],24:[function(xt,Ct,_t){const $t=xt("json5"),countSpaces=xt=>{let Ct=0;for(let _t=0;_t<xt.length;_t++)if(" "===xt[_t])Ct++;else{if("\t"!==xt[_t])break;Ct+=2}return Ct},parseOne=(xt,Ct,_t,$t)=>{let Vn=parseDef(Ct,$t);const{caption:Gn,options:or}=parseComment(xt,_t,Vn.name);return Vn.caption=Gn||Vn.name,or&&("checkbox"===(Vn={...Vn,...or}).type&&"initial"in Vn&&(Vn.checked=!0),"slider"===Vn.type&&(void 0===Vn.min&&(Vn.min=0),void 0===Vn.max&&(Vn.max=100))),Vn},extractTextFromComment=(xt,Ct)=>{const _t=xt.substring(0,2);if("//"===_t&&(xt=xt.substring(2).trim()),"/*"===_t){if("*/"!==xt.substring(xt.length-2))throw new EvalError(`Multi-line comments not supported in parsed parameter definitions, line:${Ct}`,"code",Ct);xt=xt.substring(2,xt.length-2).trim()}return xt},parseComment=(xt,Ct,_t)=>{const Vn={},Gn=(xt=extractTextFromComment(xt,Ct)).indexOf("{");if(-1!==Gn){try{Vn.options=$t.parse(xt.substring(Gn))}catch(Vn){throw new EvalError(`${Vn.message}, parameter:${_t}, line:${Ct}: ${xt.substring(Gn)}`,"code",Ct)}xt=xt.substring(0,Gn).trim()}return Vn.caption=xt,Vn},parseDef=(xt,Ct)=>{","===xt[xt.length-1]&&(xt=xt.substring(0,xt.length-1).trim());let _t=xt.indexOf("=");if(-1===_t&&(_t=xt.indexOf(":")),-1===_t)return{name:xt,type:"text"};{const Vn=xt.substring(_t+1).trim(),Gn={type:"text",name:xt.substring(0,_t).trim()};if("true"===Vn||"false"===Vn)Gn.type="checkbox",Gn.checked="true"===Vn;else if(/^[0-9]+$/.test(Vn))Gn.type="int",Gn.initial=parseFloat(Vn);else if(/^[0-9]+\.[0-9]+$/.test(Vn))Gn.type="number",Gn.initial=parseFloat(Vn);else try{Gn.initial=$t.parse(Vn)}catch(_t){throw new EvalError(`Error in the initial value definition for ${xt}  ${_t.message}, line:${Ct}`,"code",Ct)}return Gn}};Ct.exports={getParameterDefinitionsFromSource:xt=>{const Ct=[];xt.split("\n").forEach(((xt,_t)=>{const $t=xt.trim();$t&&Ct.push({code:$t,line:xt,lineNum:_t+1,indent:countSpaces(xt)})}));let _t,$t,Vn,Gn,or=0;for(;or<Ct.length&&($t=Ct[or].code,or++,!($t.length>12&&-1!==$t.indexOf("@jscad-params"))););let lr=1;const Fr=[];for(;or<Ct.length&&($t=Ct[or].code,_t=Ct[or].lineNum,"}"!==$t[0]);){const xt="/"===$t[0];if(xt&&Vn&&("group"===Vn.type||Gn+Vn.name.length<=Ct[or].indent))Vn.hint=Vn.hint?Vn.hint+"\n":"",Vn.hint+=extractTextFromComment($t,_t),or++;else{if(Gn=Ct[or].indent,xt){const xt="_group_"+lr++,Ct=parseComment($t,_t,xt);let Gn=Ct.caption;">"===Gn[0]&&(Gn=Gn.substring(1).trim(),Ct.options||(Ct.options={}),Ct.options.initial="closed"),Fr.push(Vn={name:xt,type:"group",caption:Gn,...Ct.options})}else{const xt=$t.indexOf("/");if(-1===xt){const xt=$t.indexOf("}");-1!==xt&&($t=$t.substring(0,xt));const Ct=parseDef($t,_t);if(Ct.caption=Ct.name,Fr.push(Vn=Ct),-1!==xt)break}else Fr.push(Vn=parseOne($t.substring(xt).trim(),$t.substring(0,xt).trim(),_t,_t))}or++}}return Fr},parseOne:parseOne,parseComment:parseComment,parseDef:parseDef,combineParameterDefinitions:(xt,Ct)=>{const _t=[...xt];return Ct&&Ct.forEach((xt=>{const Ct=_t.findIndex((Ct=>Ct.name===xt.name));-1!==Ct?_t[Ct]=xt:_t.push(xt)})),_t}}},{json5:1}],25:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{const _t={};for(const Ct in xt){const $t=xt[Ct];"default"in $t?_t[xt[Ct].name]=xt[Ct].default:"initial"in $t?_t[xt[Ct].name]=xt[Ct].initial:"checked"in $t&&(_t[xt[Ct].name]=xt[Ct].checked)}for(const xt in Ct)_t[xt]=Ct[xt];return _t}},{}],26:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{const $t={};let Vn;for(let Ct=0;Ct<xt.length;Ct++){const Gn=xt[Ct];switch(Gn.paramType){case"choice":Vn=Gn.options[Gn.selectedIndex].value;break;case"float":case"number":if(Vn=Gn.value,isNaN(parseFloat(Vn))||!isFinite(Vn))throw new Error("Parameter ("+Gn.paramName+") is not a valid number ("+Vn+")");Vn=parseFloat(Vn);break;case"int":if(Vn=Gn.value,isNaN(parseFloat(Vn))||!isFinite(Vn))throw new Error("Parameter ("+Gn.paramName+") is not a valid number ("+Vn+")");Vn=parseInt(Vn);break;case"checkbox":Vn=Gn.checked;break;case"radio":if(!Gn.checked)continue;Vn=Gn.value;break;case"group":Vn=Gn.className.includes("open")?"open":"closed";break;default:Vn=Gn.value}if(_t){if("initial"in Gn&&Gn.initial===Vn)continue;if("default"in Gn&&Gn.default===Vn)continue}$t[Gn.paramName]=Vn}return $t}},{}],27:[function(xt,Ct,_t){Ct.exports={applyParameterDefinitions:xt("./applyParameterDefinitions"),getParameterDefinitionsAndValues:xt("./getParameterDefinitionsAndValues"),getParameterValuesFromParameters:xt("./getParameterValuesFromParameters"),getParameterValuesFromUIControls:xt("./getParameterValuesFromUIControls")}},{"./applyParameterDefinitions":22,"./getParameterDefinitionsAndValues":23,"./getParameterValuesFromParameters":25,"./getParameterValuesFromUIControls":26}],28:[function(xt,Ct,_t){Ct.exports=xt=>{if(-1!==xt.indexOf("."))return xt.substring(xt.lastIndexOf(".")+1).toLowerCase()}},{}],29:[function(xt,Ct,_t){Ct.exports={getFileExtensionFromString:xt("./getFileExtensionFromString"),version:xt("./version")}},{"./getFileExtensionFromString":28,"./version":30}],30:[function(xt,Ct,_t){const $t=xt("../../package.json").version;Ct.exports={version:$t}},{"../../package.json":3}],31:[function(xt,Ct,_t){Ct.exports={walkFileTree:xt("./walkFileTree")}},{"./walkFileTree":32}],32:[function(xt,Ct,_t){const{flatten:$t}=xt("@jscad/array-utils"),{formats:Vn}=xt("@jscad/io/formats"),Gn=xt("../utils/getFileExtensionFromString"),or={bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",tif:"image/tiff",tiff:"image/tiff",otc:"font/otf",otf:"font/otf",ttc:"font/ttf",ttf:"font/ttf",woff:"font/woff",woff2:"font/woff",stl:"application/sla"},readFileAsync=(xt,Ct)=>{const _t=xt.fullPath?xt.fullPath:Ct.fullPath?Ct.fullPath:"",$t=Gn(xt.name),Vn=xt.mimetype;return new Promise(((Ct,Gn)=>{const lr=new FileReader;lr.onload=Gn=>{const or=Gn.target.result;(or.byteLength||"string"==typeof or)&&Ct({name:xt.name,ext:$t,fullPath:_t,mimetype:Vn,source:or})},lr.onerror=xt=>{Gn(new Error(`Failed to load file: ${_t} [${lr.error}]`))},or[$t]?lr.readAsArrayBuffer(xt):lr.readAsText(xt)}))},isSupportedFormat=xt=>{const Ct=Gn(xt.name),_t=Vn[Ct]?Vn[Ct].mimetype:or[Ct];return xt.mimetype=xt.type&&xt.type.length?xt.type:_t,xt.mimetype&&xt.mimetype.length},isEmpty=xt=>null!=xt,processEntries=xt=>{const Ct=(xt=>{const Ct=[];for(let _t=0;_t<xt.length;_t++){const $t=xt[_t];$t&&Ct.push($t.webkitGetAsEntry?$t.webkitGetAsEntry():$t)}return Ct})(xt.filter(isEmpty)).filter(isEmpty).reduce(((xt,Ct)=>{if(Ct.name.startsWith("."))return xt;if(Ct.isFile)xt.push(processFile(Ct));else if(Ct.isDirectory)xt.push(processDirectory(Ct));else if(Ct instanceof File){const _t=Ct.webkitRelativePath?Ct.webkitRelativePath:void 0,$t=isSupportedFormat(Ct)?readFileAsync(Ct,{fullPath:_t}):void 0;if(!$t)throw new Error("Unsuported format (or folder in Safari)!");xt.push($t)}return xt}),[]);return Promise.all(Ct).then((xt=>xt.filter((xt=>null!=xt))))},processFile=xt=>new Promise(((Ct,_t)=>{xt.file((_t=>{isSupportedFormat(_t)?Ct(readFileAsync(_t,xt)):Ct(void 0)}),(Ct=>{const $t=`${Ct.message} (${Ct.code})`;_t(new Error(`Failed to load file: ${xt.fullPath} [${$t}]`))}))})),processDirectory=xt=>new Promise(((Ct,_t)=>{xt.entries?xt.entries.length?processEntries(xt.entries).then(Ct):Ct([]):xt.createReader().readEntries((xt=>{xt.length?processEntries(xt).then(Ct):Ct([])}),_t)})).then($t).then((Ct=>({children:Ct=Ct.map((Ct=>(Ct.fullPath.startsWith("/")||(Ct.fullPath=xt.fullPath+"/"+Ct.name),Ct))),fullPath:xt.fullPath,name:xt.name})));Ct.exports=Ct=>{let _t=Ct;return Ct.length&&Ct[0]instanceof File&&(_t=(Ct=>{const _t=xt("path");if(1===Ct.length){const xt=Ct[0],$t=xt.webkitRelativePath?xt.webkitRelativePath:xt.name;if($t.split(_t.sep).length<2){const Ct=_t.sep,Vn={fullPath:Ct,name:Ct,isDirectory:!0,entries:[]};return xt.fullPath=_t.normalize(Ct+$t),Vn.entries.push(xt),[Vn]}}let $t;const Vn=new Map,n=(xt,Ct)=>{if(!Vn.has(xt)){const Gn={fullPath:xt,name:Ct,isDirectory:!0,entries:[]};$t||($t=Gn),Vn.set(xt,Gn);const or=xt.split(_t.sep);if(or.length>1){const xt=_t.sep+_t.join(...or.slice(0,-1)),Ct=Vn.get(xt);Ct&&Ct.entries.push(Gn)}}};for(let xt=0;xt<Ct.length;xt++){const $t=Ct[xt],Gn=($t.webkitRelativePath?$t.webkitRelativePath:$t.name).split(_t.sep);if(Gn.reduce(((xt,Ct)=>xt||Ct.startsWith(".")),!1))continue;if(!isSupportedFormat($t))continue;const or=Gn.slice(0,-1);for(let xt=0;xt<or.length;xt++)n(_t.sep+_t.join(...or.slice(0,xt+1)),or[xt]);const lr=_t.sep+_t.join(...or),Fr=Vn.get(lr);Fr&&Fr.entries.push($t)}return Vn.clear(),[$t]})(Ct)),processEntries(_t)}},{"../utils/getFileExtensionFromString":28,"@jscad/array-utils":525,"@jscad/io/formats":68,path:711}],33:[function(xt,Ct,_t){"use strict";var $t=xt("./node-worker.cjs"),Vn=Uint8Array,Gn=Uint16Array,or=Uint32Array,lr=new Vn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fr=new Vn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Hr=new Vn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(xt,Ct){for(var _t=new Gn(31),$t=0;$t<31;++$t)_t[$t]=Ct+=1<<xt[$t-1];var Vn=new or(_t[30]);for($t=1;$t<30;++$t)for(var lr=_t[$t];lr<_t[$t+1];++lr)Vn[lr]=lr-_t[$t]<<5|$t;return[_t,Vn]},xo=freb(lr,2),Eo=xo[0],Mo=xo[1];Eo[28]=258,Mo[258]=28;for(var Oo=freb(Fr,0),Ro=Oo[0],Io=Oo[1],Bo=new Gn(32768),zo=0;zo<32768;++zo){var Ho=(43690&zo)>>>1|(21845&zo)<<1;Ho=(61680&(Ho=(52428&Ho)>>>2|(13107&Ho)<<2))>>>4|(3855&Ho)<<4,Bo[zo]=((65280&Ho)>>>8|(255&Ho)<<8)>>>1}var hMap=function(xt,Ct,_t){for(var $t=xt.length,Vn=0,or=new Gn(Ct);Vn<$t;++Vn)xt[Vn]&&++or[xt[Vn]-1];var lr,Fr=new Gn(Ct);for(Vn=0;Vn<Ct;++Vn)Fr[Vn]=Fr[Vn-1]+or[Vn-1]<<1;if(_t){lr=new Gn(1<<Ct);var Hr=15-Ct;for(Vn=0;Vn<$t;++Vn)if(xt[Vn])for(var xo=Vn<<4|xt[Vn],Eo=Ct-xt[Vn],Mo=Fr[xt[Vn]-1]++<<Eo,Oo=Mo|(1<<Eo)-1;Mo<=Oo;++Mo)lr[Bo[Mo]>>>Hr]=xo}else for(lr=new Gn($t),Vn=0;Vn<$t;++Vn)xt[Vn]&&(lr[Vn]=Bo[Fr[xt[Vn]-1]++]>>>15-xt[Vn]);return lr},Qo=new Vn(288);for(zo=0;zo<144;++zo)Qo[zo]=8;for(zo=144;zo<256;++zo)Qo[zo]=9;for(zo=256;zo<280;++zo)Qo[zo]=7;for(zo=280;zo<288;++zo)Qo[zo]=8;var pi=new Vn(32);for(zo=0;zo<32;++zo)pi[zo]=5;var gi=hMap(Qo,9,0),es=hMap(Qo,9,1),ts=hMap(pi,5,0),ns=hMap(pi,5,1),max=function(xt){for(var Ct=xt[0],_t=1;_t<xt.length;++_t)xt[_t]>Ct&&(Ct=xt[_t]);return Ct},bits=function(xt,Ct,_t){var $t=Ct/8|0;return(xt[$t]|xt[$t+1]<<8)>>(7&Ct)&_t},bits16=function(xt,Ct){var _t=Ct/8|0;return(xt[_t]|xt[_t+1]<<8|xt[_t+2]<<16)>>(7&Ct)},shft=function(xt){return(xt+7)/8|0},slc=function(xt,Ct,_t){(null==Ct||Ct<0)&&(Ct=0),(null==_t||_t>xt.length)&&(_t=xt.length);var $t=new(2==xt.BYTES_PER_ELEMENT?Gn:4==xt.BYTES_PER_ELEMENT?or:Vn)(_t-Ct);return $t.set(xt.subarray(Ct,_t)),$t};_t.FlateErrorCode={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14};var rs=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(xt,Ct,_t){var $t=new Error(Ct||rs[xt]);if($t.code=xt,Error.captureStackTrace&&Error.captureStackTrace($t,err),!_t)throw $t;return $t},inflt=function(xt,Ct,_t){var $t=xt.length;if(!$t||_t&&_t.f&&!_t.l)return Ct||new Vn(0);var Gn=!Ct||_t,or=!_t||_t.i;_t||(_t={}),Ct||(Ct=new Vn(3*$t));var o=function(xt){var _t=Ct.length;if(xt>_t){var $t=new Vn(Math.max(2*_t,xt));$t.set(Ct),Ct=$t}},xo=_t.f||0,Mo=_t.p||0,Oo=_t.b||0,Io=_t.l,Bo=_t.d,zo=_t.m,Ho=_t.n,Qo=8*$t;do{if(!Io){xo=bits(xt,Mo,1);var pi=bits(xt,Mo+1,3);if(Mo+=3,!pi){var gi=xt[(hs=shft(Mo)+4)-4]|xt[hs-3]<<8,ts=hs+gi;if(ts>$t){or&&err(0);break}Gn&&o(Oo+gi),Ct.set(xt.subarray(hs,ts),Oo),_t.b=Oo+=gi,_t.p=Mo=8*ts,_t.f=xo;continue}if(1==pi)Io=es,Bo=ns,zo=9,Ho=5;else if(2==pi){var rs=bits(xt,Mo,31)+257,os=bits(xt,Mo+10,15)+4,is=rs+bits(xt,Mo+5,31)+1;Mo+=14;for(var ss=new Vn(is),as=new Vn(19),ls=0;ls<os;++ls)as[Hr[ls]]=bits(xt,Mo+3*ls,7);Mo+=3*os;var cs=max(as),us=(1<<cs)-1,fs=hMap(as,cs,1);for(ls=0;ls<is;){var hs,ps=fs[bits(xt,Mo,us)];if(Mo+=15&ps,(hs=ps>>>4)<16)ss[ls++]=hs;else{var ds=0,ms=0;for(16==hs?(ms=3+bits(xt,Mo,3),Mo+=2,ds=ss[ls-1]):17==hs?(ms=3+bits(xt,Mo,7),Mo+=3):18==hs&&(ms=11+bits(xt,Mo,127),Mo+=7);ms--;)ss[ls++]=ds}}var gs=ss.subarray(0,rs),vs=ss.subarray(rs);zo=max(gs),Ho=max(vs),Io=hMap(gs,zo,1),Bo=hMap(vs,Ho,1)}else err(1);if(Mo>Qo){or&&err(0);break}}Gn&&o(Oo+131072);for(var ys=(1<<zo)-1,bs=(1<<Ho)-1,xs=Mo;;xs=Mo){var ws=(ds=Io[bits16(xt,Mo)&ys])>>>4;if((Mo+=15&ds)>Qo){or&&err(0);break}if(ds||err(2),ws<256)Ct[Oo++]=ws;else{if(256==ws){xs=Mo,Io=null;break}var As=ws-254;if(ws>264){var Ds=lr[ls=ws-257];As=bits(xt,Mo,(1<<Ds)-1)+Eo[ls],Mo+=Ds}var Es=Bo[bits16(xt,Mo)&bs],Cs=Es>>>4;if(Es||err(3),Mo+=15&Es,vs=Ro[Cs],Cs>3&&(Ds=Fr[Cs],vs+=bits16(xt,Mo)&(1<<Ds)-1,Mo+=Ds),Mo>Qo){or&&err(0);break}Gn&&o(Oo+131072);for(var Ss=Oo+As;Oo<Ss;Oo+=4)Ct[Oo]=Ct[Oo-vs],Ct[Oo+1]=Ct[Oo+1-vs],Ct[Oo+2]=Ct[Oo+2-vs],Ct[Oo+3]=Ct[Oo+3-vs];Oo=Ss}}_t.l=Io,_t.p=xs,_t.b=Oo,_t.f=xo,Io&&(xo=1,_t.m=zo,_t.d=Bo,_t.n=Ho)}while(!xo);return Oo==Ct.length?Ct:slc(Ct,0,Oo)},wbits=function(xt,Ct,_t){_t<<=7&Ct;var $t=Ct/8|0;xt[$t]|=_t,xt[$t+1]|=_t>>>8},wbits16=function(xt,Ct,_t){_t<<=7&Ct;var $t=Ct/8|0;xt[$t]|=_t,xt[$t+1]|=_t>>>8,xt[$t+2]|=_t>>>16},hTree=function(xt,Ct){for(var _t=[],$t=0;$t<xt.length;++$t)xt[$t]&&_t.push({s:$t,f:xt[$t]});var or=_t.length,lr=_t.slice();if(!or)return[is,0];if(1==or){var Fr=new Vn(_t[0].s+1);return Fr[_t[0].s]=1,[Fr,1]}_t.sort((function(xt,Ct){return xt.f-Ct.f})),_t.push({s:-1,f:25001});var Hr=_t[0],xo=_t[1],Eo=0,Mo=1,Oo=2;for(_t[0]={s:-1,f:Hr.f+xo.f,l:Hr,r:xo};Mo!=or-1;)Hr=_t[_t[Eo].f<_t[Oo].f?Eo++:Oo++],xo=_t[Eo!=Mo&&_t[Eo].f<_t[Oo].f?Eo++:Oo++],_t[Mo++]={s:-1,f:Hr.f+xo.f,l:Hr,r:xo};var Ro=lr[0].s;for($t=1;$t<or;++$t)lr[$t].s>Ro&&(Ro=lr[$t].s);var Io=new Gn(Ro+1),Bo=ln(_t[Mo-1],Io,0);if(Bo>Ct){$t=0;var zo=0,Ho=Bo-Ct,Qo=1<<Ho;for(lr.sort((function(xt,Ct){return Io[Ct.s]-Io[xt.s]||xt.f-Ct.f}));$t<or;++$t){var pi=lr[$t].s;if(!(Io[pi]>Ct))break;zo+=Qo-(1<<Bo-Io[pi]),Io[pi]=Ct}for(zo>>>=Ho;zo>0;){var gi=lr[$t].s;Io[gi]<Ct?zo-=1<<Ct-Io[gi]++-1:++$t}for(;$t>=0&&zo;--$t){var es=lr[$t].s;Io[es]==Ct&&(--Io[es],++zo)}Bo=Ct}return[new Vn(Io),Bo]},ln=function(xt,Ct,_t){return-1==xt.s?Math.max(ln(xt.l,Ct,_t+1),ln(xt.r,Ct,_t+1)):Ct[xt.s]=_t},lc=function(xt){for(var Ct=xt.length;Ct&&!xt[--Ct];);for(var _t=new Gn(++Ct),$t=0,Vn=xt[0],or=1,o=function(xt){_t[$t++]=xt},lr=1;lr<=Ct;++lr)if(xt[lr]==Vn&&lr!=Ct)++or;else{if(!Vn&&or>2){for(;or>138;or-=138)o(32754);or>2&&(o(or>10?or-11<<5|28690:or-3<<5|12305),or=0)}else if(or>3){for(o(Vn),--or;or>6;or-=6)o(8304);or>2&&(o(or-3<<5|8208),or=0)}for(;or--;)o(Vn);or=1,Vn=xt[lr]}return[_t.subarray(0,$t),Ct]},clen=function(xt,Ct){for(var _t=0,$t=0;$t<Ct.length;++$t)_t+=xt[$t]*Ct[$t];return _t},wfblk=function(xt,Ct,_t){var $t=_t.length,Vn=shft(Ct+2);xt[Vn]=255&$t,xt[Vn+1]=$t>>>8,xt[Vn+2]=255^xt[Vn],xt[Vn+3]=255^xt[Vn+1];for(var Gn=0;Gn<$t;++Gn)xt[Vn+Gn+4]=_t[Gn];return 8*(Vn+4+$t)},wblk=function(xt,Ct,_t,$t,Vn,or,xo,Eo,Mo,Oo,Ro){wbits(Ct,Ro++,_t),++Vn[256];for(var Io=hTree(Vn,15),Bo=Io[0],zo=Io[1],Ho=hTree(or,15),es=Ho[0],ns=Ho[1],rs=lc(Bo),os=rs[0],is=rs[1],ss=lc(es),as=ss[0],ls=ss[1],cs=new Gn(19),us=0;us<os.length;++us)cs[31&os[us]]++;for(us=0;us<as.length;++us)cs[31&as[us]]++;for(var fs=hTree(cs,7),hs=fs[0],ps=fs[1],ds=19;ds>4&&!hs[Hr[ds-1]];--ds);var ms,gs,vs,ys,bs=Oo+5<<3,xs=clen(Vn,Qo)+clen(or,pi)+xo,ws=clen(Vn,Bo)+clen(or,es)+xo+14+3*ds+clen(cs,hs)+(2*cs[16]+3*cs[17]+7*cs[18]);if(bs<=xs&&bs<=ws)return wfblk(Ct,Ro,xt.subarray(Mo,Mo+Oo));if(wbits(Ct,Ro,1+(ws<xs)),Ro+=2,ws<xs){ms=hMap(Bo,zo,0),gs=Bo,vs=hMap(es,ns,0),ys=es;var As=hMap(hs,ps,0);for(wbits(Ct,Ro,is-257),wbits(Ct,Ro+5,ls-1),wbits(Ct,Ro+10,ds-4),Ro+=14,us=0;us<ds;++us)wbits(Ct,Ro+3*us,hs[Hr[us]]);Ro+=3*ds;for(var Ds=[os,as],Es=0;Es<2;++Es){var Cs=Ds[Es];for(us=0;us<Cs.length;++us){var Ss=31&Cs[us];wbits(Ct,Ro,As[Ss]),Ro+=hs[Ss],Ss>15&&(wbits(Ct,Ro,Cs[us]>>>5&127),Ro+=Cs[us]>>>12)}}}else ms=gi,gs=Qo,vs=ts,ys=pi;for(us=0;us<Eo;++us)if($t[us]>255){Ss=$t[us]>>>18&31,wbits16(Ct,Ro,ms[Ss+257]),Ro+=gs[Ss+257],Ss>7&&(wbits(Ct,Ro,$t[us]>>>23&31),Ro+=lr[Ss]);var ks=31&$t[us];wbits16(Ct,Ro,vs[ks]),Ro+=ys[ks],ks>3&&(wbits16(Ct,Ro,$t[us]>>>5&8191),Ro+=Fr[ks])}else wbits16(Ct,Ro,ms[$t[us]]),Ro+=gs[$t[us]];return wbits16(Ct,Ro,ms[256]),Ro+gs[256]},os=new or([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),is=new Vn(0),dflt=function(xt,Ct,_t,$t,Hr,xo){var Eo=xt.length,Oo=new Vn($t+Eo+5*(1+Math.ceil(Eo/7e3))+Hr),Ro=Oo.subarray($t,Oo.length-Hr),Bo=0;if(!Ct||Eo<8)for(var zo=0;zo<=Eo;zo+=65535){var Ho=zo+65535;Ho>=Eo&&(Ro[Bo>>3]=xo),Bo=wfblk(Ro,Bo+1,xt.subarray(zo,Ho))}else{for(var Qo=os[Ct-1],pi=Qo>>>13,gi=8191&Qo,es=(1<<_t)-1,ts=new Gn(32768),ns=new Gn(es+1),rs=Math.ceil(_t/3),ss=2*rs,z=function(Ct){return(xt[Ct]^xt[Ct+1]<<rs^xt[Ct+2]<<ss)&es},as=new or(25e3),ls=new Gn(288),cs=new Gn(32),us=0,fs=0,hs=(zo=0,0),ps=0,ds=0;zo<Eo;++zo){var ms=z(zo),gs=32767&zo,vs=ns[ms];if(ts[gs]=vs,ns[ms]=gs,ps<=zo){var ys=Eo-zo;if((us>7e3||hs>24576)&&ys>423){Bo=wblk(xt,Ro,0,as,ls,cs,fs,hs,ds,zo-ds,Bo),hs=us=fs=0,ds=zo;for(var bs=0;bs<286;++bs)ls[bs]=0;for(bs=0;bs<30;++bs)cs[bs]=0}var xs=2,ws=0,As=gi,Ds=gs-vs&32767;if(ys>2&&ms==z(zo-Ds))for(var Es=Math.min(pi,ys)-1,Cs=Math.min(32767,zo),Ss=Math.min(258,ys);Ds<=Cs&&--As&&gs!=vs;){if(xt[zo+xs]==xt[zo+xs-Ds]){for(var ks=0;ks<Ss&&xt[zo+ks]==xt[zo+ks-Ds];++ks);if(ks>xs){if(xs=ks,ws=Ds,ks>Es)break;var Ts=Math.min(Ds,ks-2),Ps=0;for(bs=0;bs<Ts;++bs){var Fs=zo-Ds+bs+32768&32767,Ms=Fs-ts[Fs]+32768&32767;Ms>Ps&&(Ps=Ms,vs=Fs)}}}Ds+=(gs=vs)-(vs=ts[gs])+32768&32767}if(ws){as[hs++]=268435456|Mo[xs]<<18|Io[ws];var Os=31&Mo[xs],js=31&Io[ws];fs+=lr[Os]+Fr[js],++ls[257+Os],++cs[js],ps=zo+xs,++us}else as[hs++]=xt[zo],++ls[xt[zo]]}}Bo=wblk(xt,Ro,xo,as,ls,cs,fs,hs,ds,zo-ds,Bo),!xo&&7&Bo&&(Bo=wfblk(Ro,Bo+1,is))}return slc(Oo,0,$t+shft(Bo)+Hr)},ss=function(){for(var xt=new Int32Array(256),Ct=0;Ct<256;++Ct){for(var _t=Ct,$t=9;--$t;)_t=(1&_t&&-306674912)^_t>>>1;xt[Ct]=_t}return xt}(),crc=function(){var xt=-1;return{p:function(Ct){for(var _t=xt,$t=0;$t<Ct.length;++$t)_t=ss[255&_t^Ct[$t]]^_t>>>8;xt=_t},d:function(){return~xt}}},adler=function(){var xt=1,Ct=0;return{p:function(_t){for(var $t=xt,Vn=Ct,Gn=0|_t.length,or=0;or!=Gn;){for(var lr=Math.min(or+2655,Gn);or<lr;++or)Vn+=$t+=_t[or];$t=(65535&$t)+15*($t>>16),Vn=(65535&Vn)+15*(Vn>>16)}xt=$t,Ct=Vn},d:function(){return(255&(xt%=65521))<<24|xt>>>8<<16|(255&(Ct%=65521))<<8|Ct>>>8}}},dopt=function(xt,Ct,_t,$t,Vn){return dflt(xt,null==Ct.level?6:Ct.level,null==Ct.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(xt.length)))):12+Ct.mem,_t,$t,!Vn)},mrg=function(xt,Ct){var _t={};for(var $t in xt)_t[$t]=xt[$t];for(var $t in Ct)_t[$t]=Ct[$t];return _t},wcln=function(xt,Ct,_t){for(var $t=xt(),Vn=xt.toString(),Gn=Vn.slice(Vn.indexOf("[")+1,Vn.lastIndexOf("]")).replace(/\s+/g,"").split(","),or=0;or<$t.length;++or){var lr=$t[or],Fr=Gn[or];if("function"==typeof lr){Ct+=";"+Fr+"=";var Hr=lr.toString();if(lr.prototype)if(-1!=Hr.indexOf("[native code]")){var xo=Hr.indexOf(" ",8)+1;Ct+=Hr.slice(xo,Hr.indexOf("(",xo))}else for(var Eo in Ct+=Hr,lr.prototype)Ct+=";"+Fr+".prototype."+Eo+"="+lr.prototype[Eo].toString();else Ct+=Hr}else _t[Fr]=lr}return[Ct,_t]},as=[],wrkr=function(xt,Ct,_t,Vn){var Gn;if(!as[_t]){for(var or="",lr={},Fr=xt.length-1,Hr=0;Hr<Fr;++Hr)or=(Gn=wcln(xt[Hr],or,lr))[0],lr=Gn[1];as[_t]=wcln(xt[Fr],or,lr)}var xo=mrg({},as[_t][1]);return $t.default(as[_t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+Ct.toString()+"}",_t,xo,function(xt){var Ct=[];for(var _t in xt)xt[_t].buffer&&Ct.push((xt[_t]=new xt[_t].constructor(xt[_t])).buffer);return Ct}(xo),Vn)},bInflt=function(){return[Vn,Gn,or,lr,Fr,Hr,Eo,Ro,es,ns,Bo,rs,hMap,max,bits,bits16,shft,slc,err,inflt,inflateSync,pbf,gu8]},bDflt=function(){return[Vn,Gn,or,lr,Fr,Hr,Mo,Io,gi,Qo,ts,pi,Bo,os,is,hMap,wbits,wbits16,hTree,ln,lc,clen,wfblk,wblk,shft,slc,dflt,dopt,deflateSync,pbf]},gze=function(){return[gzh,gzhl,wbytes,crc,ss]},guze=function(){return[gzs,gzl]},zle=function(){return[zlh,wbytes,adler]},zule=function(){return[zlv]},pbf=function(xt){return postMessage(xt,[xt.buffer])},gu8=function(xt){return xt&&xt.size&&new Vn(xt.size)},cbify=function(xt,Ct,_t,$t,Vn,Gn){var or=wrkr(_t,$t,Vn,(function(xt,Ct){or.terminate(),Gn(xt,Ct)}));return or.postMessage([xt,Ct],Ct.consume?[xt.buffer]:[]),function(){or.terminate()}},astrm=function(xt){return xt.ondata=function(xt,Ct){return postMessage([xt,Ct],[xt.buffer])},function(Ct){return xt.push(Ct.data[0],Ct.data[1])}},astrmify=function(xt,Ct,_t,$t,Vn){var Gn,or=wrkr(xt,$t,Vn,(function(xt,_t){xt?(or.terminate(),Ct.ondata.call(Ct,xt)):(_t[1]&&or.terminate(),Ct.ondata.call(Ct,xt,_t[0],_t[1]))}));or.postMessage(_t),Ct.push=function(xt,_t){Ct.ondata||err(5),Gn&&Ct.ondata(err(4,0,1),null,!!_t),or.postMessage([xt,Gn=_t],[xt.buffer])},Ct.terminate=function(){or.terminate()}},b2=function(xt,Ct){return xt[Ct]|xt[Ct+1]<<8},b4=function(xt,Ct){return(xt[Ct]|xt[Ct+1]<<8|xt[Ct+2]<<16|xt[Ct+3]<<24)>>>0},b8=function(xt,Ct){return b4(xt,Ct)+4294967296*b4(xt,Ct+4)},wbytes=function(xt,Ct,_t){for(;_t;++Ct)xt[Ct]=_t,_t>>>=8},gzh=function(xt,Ct){var _t=Ct.filename;if(xt[0]=31,xt[1]=139,xt[2]=8,xt[8]=Ct.level<2?4:9==Ct.level?2:0,xt[9]=3,0!=Ct.mtime&&wbytes(xt,4,Math.floor(new Date(Ct.mtime||Date.now())/1e3)),_t){xt[3]=8;for(var $t=0;$t<=_t.length;++$t)xt[$t+10]=_t.charCodeAt($t)}},gzs=function(xt){31==xt[0]&&139==xt[1]&&8==xt[2]||err(6,"invalid gzip data");var Ct=xt[3],_t=10;4&Ct&&(_t+=xt[10]|2+(xt[11]<<8));for(var $t=(Ct>>3&1)+(Ct>>4&1);$t>0;$t-=!xt[_t++]);return _t+(2&Ct)},gzl=function(xt){var Ct=xt.length;return(xt[Ct-4]|xt[Ct-3]<<8|xt[Ct-2]<<16|xt[Ct-1]<<24)>>>0},gzhl=function(xt){return 10+(xt.filename&&xt.filename.length+1||0)},zlh=function(xt,Ct){var _t=Ct.level,$t=0==_t?0:_t<6?1:9==_t?3:2;xt[0]=120,xt[1]=$t<<6|($t?32-2*$t:1)},zlv=function(xt){(8!=(15&xt[0])||xt[0]>>>4>7||(xt[0]<<8|xt[1])%31)&&err(6,"invalid zlib data"),32&xt[1]&&err(6,"invalid zlib data: preset dictionaries not supported")};function AsyncCmpStrm(xt,Ct){return Ct||"function"!=typeof xt||(Ct=xt,xt={}),this.ondata=Ct,xt}var ls=function(){function t(xt,Ct){Ct||"function"!=typeof xt||(Ct=xt,xt={}),this.ondata=Ct,this.o=xt||{}}return t.prototype.p=function(xt,Ct){this.ondata(dopt(xt,this.o,0,0,!Ct),Ct)},t.prototype.push=function(xt,Ct){this.ondata||err(5),this.d&&err(4),this.d=Ct,this.p(xt,Ct||!1)},t}();_t.Deflate=ls;var AsyncDeflate=function(xt,Ct){astrmify([bDflt,function(){return[astrm,ls]}],this,AsyncCmpStrm.call(this,xt,Ct),(function(xt){var Ct=new ls(xt.data);onmessage=astrm(Ct)}),6)};function deflate(xt,Ct,_t){return _t||(_t=Ct,Ct={}),"function"!=typeof _t&&err(7),cbify(xt,Ct,[bDflt],(function(xt){return pbf(deflateSync(xt.data[0],xt.data[1]))}),0,_t)}function deflateSync(xt,Ct){return dopt(xt,Ct||{},0,0)}_t.AsyncDeflate=AsyncDeflate,_t.deflate=deflate,_t.deflateSync=deflateSync;var cs=function(){function t(xt){this.s={},this.p=new Vn(0),this.ondata=xt}return t.prototype.e=function(xt){this.ondata||err(5),this.d&&err(4);var Ct=this.p.length,_t=new Vn(Ct+xt.length);_t.set(this.p),_t.set(xt,Ct),this.p=_t},t.prototype.c=function(xt){this.d=this.s.i=xt||!1;var Ct=this.s.b,_t=inflt(this.p,this.o,this.s);this.ondata(slc(_t,Ct,this.s.b),this.d),this.o=slc(_t,this.s.b-32768),this.s.b=this.o.length,this.p=slc(this.p,this.s.p/8|0),this.s.p&=7},t.prototype.push=function(xt,Ct){this.e(xt),this.c(Ct)},t}();_t.Inflate=cs;var AsyncInflate=function(xt){this.ondata=xt,astrmify([bInflt,function(){return[astrm,cs]}],this,0,(function(){var xt=new cs;onmessage=astrm(xt)}),7)};function inflate(xt,Ct,_t){return _t||(_t=Ct,Ct={}),"function"!=typeof _t&&err(7),cbify(xt,Ct,[bInflt],(function(xt){return pbf(inflateSync(xt.data[0],gu8(xt.data[1])))}),1,_t)}function inflateSync(xt,Ct){return inflt(xt,Ct)}_t.AsyncInflate=AsyncInflate,_t.inflate=inflate,_t.inflateSync=inflateSync;var us=function(){function t(xt,Ct){this.c=crc(),this.l=0,this.v=1,ls.call(this,xt,Ct)}return t.prototype.push=function(xt,Ct){ls.prototype.push.call(this,xt,Ct)},t.prototype.p=function(xt,Ct){this.c.p(xt),this.l+=xt.length;var _t=dopt(xt,this.o,this.v&&gzhl(this.o),Ct&&8,!Ct);this.v&&(gzh(_t,this.o),this.v=0),Ct&&(wbytes(_t,_t.length-8,this.c.d()),wbytes(_t,_t.length-4,this.l)),this.ondata(_t,Ct)},t}();_t.Gzip=us,_t.Compress=us;var AsyncGzip=function(xt,Ct){astrmify([bDflt,gze,function(){return[astrm,ls,us]}],this,AsyncCmpStrm.call(this,xt,Ct),(function(xt){var Ct=new us(xt.data);onmessage=astrm(Ct)}),8)};function gzip(xt,Ct,_t){return _t||(_t=Ct,Ct={}),"function"!=typeof _t&&err(7),cbify(xt,Ct,[bDflt,gze,function(){return[gzipSync]}],(function(xt){return pbf(gzipSync(xt.data[0],xt.data[1]))}),2,_t)}function gzipSync(xt,Ct){Ct||(Ct={});var _t=crc(),$t=xt.length;_t.p(xt);var Vn=dopt(xt,Ct,gzhl(Ct),8),Gn=Vn.length;return gzh(Vn,Ct),wbytes(Vn,Gn-8,_t.d()),wbytes(Vn,Gn-4,$t),Vn}_t.AsyncGzip=AsyncGzip,_t.AsyncCompress=AsyncGzip,_t.gzip=gzip,_t.compress=gzip,_t.gzipSync=gzipSync,_t.compressSync=gzipSync;var fs=function(){function t(xt){this.v=1,cs.call(this,xt)}return t.prototype.push=function(xt,Ct){if(cs.prototype.e.call(this,xt),this.v){var _t=this.p.length>3?gzs(this.p):4;if(_t>=this.p.length&&!Ct)return;this.p=this.p.subarray(_t),this.v=0}Ct&&(this.p.length<8&&err(6,"invalid gzip data"),this.p=this.p.subarray(0,-8)),cs.prototype.c.call(this,Ct)},t}();_t.Gunzip=fs;var AsyncGunzip=function(xt){this.ondata=xt,astrmify([bInflt,guze,function(){return[astrm,cs,fs]}],this,0,(function(){var xt=new fs;onmessage=astrm(xt)}),9)};function gunzip(xt,Ct,_t){return _t||(_t=Ct,Ct={}),"function"!=typeof _t&&err(7),cbify(xt,Ct,[bInflt,guze,function(){return[gunzipSync]}],(function(xt){return pbf(gunzipSync(xt.data[0]))}),3,_t)}function gunzipSync(xt,Ct){return inflt(xt.subarray(gzs(xt),-8),Ct||new Vn(gzl(xt)))}_t.AsyncGunzip=AsyncGunzip,_t.gunzip=gunzip,_t.gunzipSync=gunzipSync;var hs=function(){function t(xt,Ct){this.c=adler(),this.v=1,ls.call(this,xt,Ct)}return t.prototype.push=function(xt,Ct){ls.prototype.push.call(this,xt,Ct)},t.prototype.p=function(xt,Ct){this.c.p(xt);var _t=dopt(xt,this.o,this.v&&2,Ct&&4,!Ct);this.v&&(zlh(_t,this.o),this.v=0),Ct&&wbytes(_t,_t.length-4,this.c.d()),this.ondata(_t,Ct)},t}();_t.Zlib=hs;var AsyncZlib=function(xt,Ct){astrmify([bDflt,zle,function(){return[astrm,ls,hs]}],this,AsyncCmpStrm.call(this,xt,Ct),(function(xt){var Ct=new hs(xt.data);onmessage=astrm(Ct)}),10)};function zlibSync(xt,Ct){Ct||(Ct={});var _t=adler();_t.p(xt);var $t=dopt(xt,Ct,2,4);return zlh($t,Ct),wbytes($t,$t.length-4,_t.d()),$t}_t.AsyncZlib=AsyncZlib,_t.zlib=function zlib(xt,Ct,_t){return _t||(_t=Ct,Ct={}),"function"!=typeof _t&&err(7),cbify(xt,Ct,[bDflt,zle,function(){return[zlibSync]}],(function(xt){return pbf(zlibSync(xt.data[0],xt.data[1]))}),4,_t)},_t.zlibSync=zlibSync;var ps=function(){function t(xt){this.v=1,cs.call(this,xt)}return t.prototype.push=function(xt,Ct){if(cs.prototype.e.call(this,xt),this.v){if(this.p.length<2&&!Ct)return;this.p=this.p.subarray(2),this.v=0}Ct&&(this.p.length<4&&err(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),cs.prototype.c.call(this,Ct)},t}();_t.Unzlib=ps;var AsyncUnzlib=function(xt){this.ondata=xt,astrmify([bInflt,zule,function(){return[astrm,cs,ps]}],this,0,(function(){var xt=new ps;onmessage=astrm(xt)}),11)};function unzlib(xt,Ct,_t){return _t||(_t=Ct,Ct={}),"function"!=typeof _t&&err(7),cbify(xt,Ct,[bInflt,zule,function(){return[unzlibSync]}],(function(xt){return pbf(unzlibSync(xt.data[0],gu8(xt.data[1])))}),5,_t)}function unzlibSync(xt,Ct){return inflt((zlv(xt),xt.subarray(2,-4)),Ct)}_t.AsyncUnzlib=AsyncUnzlib,_t.unzlib=unzlib,_t.unzlibSync=unzlibSync;var ds=function(){function t(xt){this.G=fs,this.I=cs,this.Z=ps,this.ondata=xt}return t.prototype.push=function(xt,Ct){if(this.ondata||err(5),this.s)this.s.push(xt,Ct);else{if(this.p&&this.p.length){var _t=new Vn(this.p.length+xt.length);_t.set(this.p),_t.set(xt,this.p.length)}else this.p=xt;if(this.p.length>2){var $t=this,i=function(){$t.ondata.apply($t,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(i):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(i):new this.Z(i),this.s.push(this.p,Ct),this.p=null}}},t}();_t.Decompress=ds;var ms=function(){function t(xt){this.G=AsyncGunzip,this.I=AsyncInflate,this.Z=AsyncUnzlib,this.ondata=xt}return t.prototype.push=function(xt,Ct){ds.prototype.push.call(this,xt,Ct)},t}();_t.AsyncDecompress=ms,_t.decompress=function decompress(xt,Ct,_t){return _t||(_t=Ct,Ct={}),"function"!=typeof _t&&err(7),31==xt[0]&&139==xt[1]&&8==xt[2]?gunzip(xt,Ct,_t):8!=(15&xt[0])||xt[0]>>4>7||(xt[0]<<8|xt[1])%31?inflate(xt,Ct,_t):unzlib(xt,Ct,_t)},_t.decompressSync=function decompressSync(xt,Ct){return 31==xt[0]&&139==xt[1]&&8==xt[2]?gunzipSync(xt,Ct):8!=(15&xt[0])||xt[0]>>4>7||(xt[0]<<8|xt[1])%31?inflateSync(xt,Ct):unzlibSync(xt,Ct)};var fltn=function(xt,Ct,_t,$t){for(var Gn in xt){var or=xt[Gn],lr=Ct+Gn,Fr=$t;Array.isArray(or)&&(Fr=mrg($t,or[1]),or=or[0]),or instanceof Vn?_t[lr]=[or,Fr]:(_t[lr+="/"]=[new Vn(0),Fr],fltn(or,lr,_t,$t))}},gs="undefined"!=typeof TextEncoder&&new TextEncoder,vs="undefined"!=typeof TextDecoder&&new TextDecoder,ys=0;try{vs.decode(is,{stream:!0}),ys=1}catch(xt){}var dutf8=function(xt){for(var Ct="",_t=0;;){var $t=xt[_t++],Vn=($t>127)+($t>223)+($t>239);if(_t+Vn>xt.length)return[Ct,slc(xt,_t-1)];Vn?3==Vn?($t=((15&$t)<<18|(63&xt[_t++])<<12|(63&xt[_t++])<<6|63&xt[_t++])-65536,Ct+=String.fromCharCode(55296|$t>>10,56320|1023&$t)):Ct+=1&Vn?String.fromCharCode((31&$t)<<6|63&xt[_t++]):String.fromCharCode((15&$t)<<12|(63&xt[_t++])<<6|63&xt[_t++]):Ct+=String.fromCharCode($t)}},bs=function(){function t(xt){this.ondata=xt,ys?this.t=new TextDecoder:this.p=is}return t.prototype.push=function(xt,Ct){if(this.ondata||err(5),Ct=!!Ct,this.t)return this.ondata(this.t.decode(xt,{stream:!0}),Ct),void(Ct&&(this.t.decode().length&&err(8),this.t=null));this.p||err(4);var _t=new Vn(this.p.length+xt.length);_t.set(this.p),_t.set(xt,this.p.length);var $t=dutf8(_t),Gn=$t[0],or=$t[1];Ct?(or.length&&err(8),this.p=null):this.p=or,this.ondata(Gn,Ct)},t}();_t.DecodeUTF8=bs;var xs=function(){function t(xt){this.ondata=xt}return t.prototype.push=function(xt,Ct){this.ondata||err(5),this.d&&err(4),this.ondata(strToU8(xt),this.d=Ct||!1)},t}();function strToU8(xt,Ct){if(Ct){for(var _t=new Vn(xt.length),$t=0;$t<xt.length;++$t)_t[$t]=xt.charCodeAt($t);return _t}if(gs)return gs.encode(xt);var Gn=xt.length,or=new Vn(xt.length+(xt.length>>1)),lr=0,a=function(xt){or[lr++]=xt};for($t=0;$t<Gn;++$t){if(lr+5>or.length){var Fr=new Vn(lr+8+(Gn-$t<<1));Fr.set(or),or=Fr}var Hr=xt.charCodeAt($t);Hr<128||Ct?a(Hr):Hr<2048?(a(192|Hr>>6),a(128|63&Hr)):Hr>55295&&Hr<57344?(a(240|(Hr=65536+(1047552&Hr)|1023&xt.charCodeAt(++$t))>>18),a(128|Hr>>12&63),a(128|Hr>>6&63),a(128|63&Hr)):(a(224|Hr>>12),a(128|Hr>>6&63),a(128|63&Hr))}return slc(or,0,lr)}function strFromU8(xt,Ct){if(Ct){for(var _t="",$t=0;$t<xt.length;$t+=16384)_t+=String.fromCharCode.apply(null,xt.subarray($t,$t+16384));return _t}if(vs)return vs.decode(xt);var Vn=dutf8(xt),Gn=Vn[0];return Vn[1].length&&err(8),Gn}_t.EncodeUTF8=xs,_t.strToU8=strToU8,_t.strFromU8=strFromU8;var dbf=function(xt){return 1==xt?3:xt<6?2:9==xt?1:0},slzh=function(xt,Ct){return Ct+30+b2(xt,Ct+26)+b2(xt,Ct+28)},zh=function(xt,Ct,_t){var $t=b2(xt,Ct+28),Vn=strFromU8(xt.subarray(Ct+46,Ct+46+$t),!(2048&b2(xt,Ct+8))),Gn=Ct+46+$t,or=b4(xt,Ct+20),lr=_t&&4294967295==or?z64e(xt,Gn):[or,b4(xt,Ct+24),b4(xt,Ct+42)],Fr=lr[0],Hr=lr[1],xo=lr[2];return[b2(xt,Ct+10),Fr,Hr,Vn,Gn+b2(xt,Ct+30)+b2(xt,Ct+32),xo]},z64e=function(xt,Ct){for(;1!=b2(xt,Ct);Ct+=4+b2(xt,Ct+2));return[b8(xt,Ct+12),b8(xt,Ct+4),b8(xt,Ct+20)]},exfl=function(xt){var Ct=0;if(xt)for(var _t in xt){var $t=xt[_t].length;$t>65535&&err(9),Ct+=$t+4}return Ct},wzh=function(xt,Ct,_t,$t,Vn,Gn,or,lr){var Fr=$t.length,Hr=_t.extra,xo=lr&&lr.length,Eo=exfl(Hr);wbytes(xt,Ct,null!=or?33639248:67324752),Ct+=4,null!=or&&(xt[Ct++]=20,xt[Ct++]=_t.os),xt[Ct]=20,Ct+=2,xt[Ct++]=_t.flag<<1|(null==Gn&&8),xt[Ct++]=Vn&&8,xt[Ct++]=255&_t.compression,xt[Ct++]=_t.compression>>8;var Mo=new Date(null==_t.mtime?Date.now():_t.mtime),Oo=Mo.getFullYear()-1980;if((Oo<0||Oo>119)&&err(10),wbytes(xt,Ct,Oo<<25|Mo.getMonth()+1<<21|Mo.getDate()<<16|Mo.getHours()<<11|Mo.getMinutes()<<5|Mo.getSeconds()>>>1),Ct+=4,null!=Gn&&(wbytes(xt,Ct,_t.crc),wbytes(xt,Ct+4,Gn),wbytes(xt,Ct+8,_t.size)),wbytes(xt,Ct+12,Fr),wbytes(xt,Ct+14,Eo),Ct+=16,null!=or&&(wbytes(xt,Ct,xo),wbytes(xt,Ct+6,_t.attrs),wbytes(xt,Ct+10,or),Ct+=14),xt.set($t,Ct),Ct+=Fr,Eo)for(var Ro in Hr){var Io=Hr[Ro],Bo=Io.length;wbytes(xt,Ct,+Ro),wbytes(xt,Ct+2,Bo),xt.set(Io,Ct+4),Ct+=4+Bo}return xo&&(xt.set(lr,Ct),Ct+=xo),Ct},wzf=function(xt,Ct,_t,$t,Vn){wbytes(xt,Ct,101010256),wbytes(xt,Ct+8,_t),wbytes(xt,Ct+10,_t),wbytes(xt,Ct+12,$t),wbytes(xt,Ct+16,Vn)},ws=function(){function t(xt){this.filename=xt,this.c=crc(),this.size=0,this.compression=0}return t.prototype.process=function(xt,Ct){this.ondata(null,xt,Ct)},t.prototype.push=function(xt,Ct){this.ondata||err(5),this.c.p(xt),this.size+=xt.length,Ct&&(this.crc=this.c.d()),this.process(xt,Ct||!1)},t}();_t.ZipPassThrough=ws;var As=function(){function t(xt,Ct){var _t=this;Ct||(Ct={}),ws.call(this,xt),this.d=new ls(Ct,(function(xt,Ct){_t.ondata(null,xt,Ct)})),this.compression=8,this.flag=dbf(Ct.level)}return t.prototype.process=function(xt,Ct){try{this.d.push(xt,Ct)}catch(xt){this.ondata(xt,null,Ct)}},t.prototype.push=function(xt,Ct){ws.prototype.push.call(this,xt,Ct)},t}();_t.ZipDeflate=As;var Ds=function(){function t(xt,Ct){var _t=this;Ct||(Ct={}),ws.call(this,xt),this.d=new AsyncDeflate(Ct,(function(xt,Ct,$t){_t.ondata(xt,Ct,$t)})),this.compression=8,this.flag=dbf(Ct.level),this.terminate=this.d.terminate}return t.prototype.process=function(xt,Ct){this.d.push(xt,Ct)},t.prototype.push=function(xt,Ct){ws.prototype.push.call(this,xt,Ct)},t}();_t.AsyncZipDeflate=Ds;var Es=function(){function t(xt){this.ondata=xt,this.u=[],this.d=1}return t.prototype.add=function(xt){var Ct=this;if(this.ondata||err(5),2&this.d)this.ondata(err(4+8*(1&this.d),0,1),null,!1);else{var _t=strToU8(xt.filename),$t=_t.length,Gn=xt.comment,or=Gn&&strToU8(Gn),lr=$t!=xt.filename.length||or&&Gn.length!=or.length,Fr=$t+exfl(xt.extra)+30;$t>65535&&this.ondata(err(11,0,1),null,!1);var Hr=new Vn(Fr);wzh(Hr,0,xt,_t,lr);var xo=[Hr],l=function(){for(var xt=0,_t=xo;xt<_t.length;xt++){var $t=_t[xt];Ct.ondata(null,$t,!1)}xo=[]},Eo=this.d;this.d=0;var Mo=this.u.length,Oo=mrg(xt,{f:_t,u:lr,o:or,t:function(){xt.terminate&&xt.terminate()},r:function(){if(l(),Eo){var xt=Ct.u[Mo+1];xt?xt.r():Ct.d=1}Eo=1}}),Ro=0;xt.ondata=function(_t,$t,Gn){if(_t)Ct.ondata(_t,$t,Gn),Ct.terminate();else if(Ro+=$t.length,xo.push($t),Gn){var or=new Vn(16);wbytes(or,0,134695760),wbytes(or,4,xt.crc),wbytes(or,8,Ro),wbytes(or,12,xt.size),xo.push(or),Oo.c=Ro,Oo.b=Fr+Ro+16,Oo.crc=xt.crc,Oo.size=xt.size,Eo&&Oo.r(),Eo=1}else Eo&&l()},this.u.push(Oo)}},t.prototype.end=function(){var xt=this;2&this.d?this.ondata(err(4+8*(1&this.d),0,1),null,!0):(this.d?this.e():this.u.push({r:function(){1&xt.d&&(xt.u.splice(-1,1),xt.e())},t:function(){}}),this.d=3)},t.prototype.e=function(){for(var xt=0,Ct=0,_t=0,$t=0,Gn=this.u;$t<Gn.length;$t++)_t+=46+(Hr=Gn[$t]).f.length+exfl(Hr.extra)+(Hr.o?Hr.o.length:0);for(var or=new Vn(_t+22),lr=0,Fr=this.u;lr<Fr.length;lr++){var Hr=Fr[lr];wzh(or,xt,Hr,Hr.f,Hr.u,Hr.c,Ct,Hr.o),xt+=46+Hr.f.length+exfl(Hr.extra)+(Hr.o?Hr.o.length:0),Ct+=Hr.b}wzf(or,xt,this.u.length,_t,Ct),this.ondata(null,or,!0),this.d=2},t.prototype.terminate=function(){for(var xt=0,Ct=this.u;xt<Ct.length;xt++)Ct[xt].t();this.d=2},t}();_t.Zip=Es,_t.zip=function zip(xt,Ct,_t){_t||(_t=Ct,Ct={}),"function"!=typeof _t&&err(7);var $t={};fltn(xt,"",$t,Ct);var Gn=Object.keys($t),or=Gn.length,lr=0,Fr=0,Hr=or,xo=new Array(or),Eo=[],c=function(){for(var xt=0;xt<Eo.length;++xt)Eo[xt]()},h=function(xt,Ct){Ps((function(){_t(xt,Ct)}))};Ps((function(){h=_t}));var p=function(){var xt=new Vn(Fr+22),Ct=lr,_t=Fr-lr;Fr=0;for(var $t=0;$t<Hr;++$t){var Gn=xo[$t];try{var or=Gn.c.length;wzh(xt,Fr,Gn,Gn.f,Gn.u,or);var Eo=30+Gn.f.length+exfl(Gn.extra),Mo=Fr+Eo;xt.set(Gn.c,Mo),wzh(xt,lr,Gn,Gn.f,Gn.u,or,Fr,Gn.m),lr+=16+Eo+(Gn.m?Gn.m.length:0),Fr=Mo+or}catch(xt){return h(xt,null)}}wzf(xt,lr,xo.length,_t,Ct),h(null,xt)};or||p();for(var v=function(xt){var Ct=Gn[xt],_t=$t[Ct],Vn=_t[0],Hr=_t[1],Mo=crc(),Oo=Vn.length;Mo.p(Vn);var Ro=strToU8(Ct),Io=Ro.length,Bo=Hr.comment,zo=Bo&&strToU8(Bo),Ho=zo&&zo.length,Qo=exfl(Hr.extra),pi=0==Hr.level?0:8,U=function(_t,$t){if(_t)c(),h(_t,null);else{var Vn=$t.length;xo[xt]=mrg(Hr,{size:Oo,crc:Mo.d(),c:$t,f:Ro,m:zo,u:Io!=Ct.length||zo&&Bo.length!=Ho,compression:pi}),lr+=30+Io+Qo+Vn,Fr+=76+2*(Io+Qo)+(Ho||0)+Vn,--or||p()}};if(Io>65535&&U(err(11,0,1),null),pi)if(Oo<16e4)try{U(null,deflateSync(Vn,Hr))}catch(xt){U(xt,null)}else Eo.push(deflate(Vn,Hr,U));else U(null,Vn)},Mo=0;Mo<Hr;++Mo)v(Mo);return c},_t.zipSync=function zipSync(xt,Ct){Ct||(Ct={});var _t={},$t=[];fltn(xt,"",_t,Ct);var Gn=0,or=0;for(var lr in _t){var Fr=_t[lr],Hr=Fr[0],xo=Fr[1],Eo=0==xo.level?0:8,Mo=(ns=strToU8(lr)).length,Oo=xo.comment,Ro=Oo&&strToU8(Oo),Io=Ro&&Ro.length,Bo=exfl(xo.extra);Mo>65535&&err(11);var zo=Eo?deflateSync(Hr,xo):Hr,Ho=zo.length,Qo=crc();Qo.p(Hr),$t.push(mrg(xo,{size:Hr.length,crc:Qo.d(),c:zo,f:ns,m:Ro,u:Mo!=lr.length||Ro&&Oo.length!=Io,o:Gn,compression:Eo})),Gn+=30+Mo+Bo+Ho,or+=76+2*(Mo+Bo)+(Io||0)+Ho}for(var pi=new Vn(or+22),gi=Gn,es=or-Gn,ts=0;ts<$t.length;++ts){var ns=$t[ts];wzh(pi,ns.o,ns,ns.f,ns.u,ns.c.length);var rs=30+ns.f.length+exfl(ns.extra);pi.set(ns.c,ns.o+rs),wzh(pi,Gn,ns,ns.f,ns.u,ns.c.length,ns.o,ns.m),Gn+=16+rs+(ns.m?ns.m.length:0)}return wzf(pi,Gn,$t.length,es,gi),pi};var Cs=function(){function t(){}return t.prototype.push=function(xt,Ct){this.ondata(null,xt,Ct)},t.compression=0,t}();_t.UnzipPassThrough=Cs;var Ss=function(){function t(){var xt=this;this.i=new cs((function(Ct,_t){xt.ondata(null,Ct,_t)}))}return t.prototype.push=function(xt,Ct){try{this.i.push(xt,Ct)}catch(xt){this.ondata(xt,null,Ct)}},t.compression=8,t}();_t.UnzipInflate=Ss;var ks=function(){function t(xt,Ct){var _t=this;Ct<32e4?this.i=new cs((function(xt,Ct){_t.ondata(null,xt,Ct)})):(this.i=new AsyncInflate((function(xt,Ct,$t){_t.ondata(xt,Ct,$t)})),this.terminate=this.i.terminate)}return t.prototype.push=function(xt,Ct){this.i.terminate&&(xt=slc(xt,0)),this.i.push(xt,Ct)},t.compression=8,t}();_t.AsyncUnzipInflate=ks;var Ts=function(){function t(xt){this.onfile=xt,this.k=[],this.o={0:Cs},this.p=is}return t.prototype.push=function(xt,Ct){var _t=this;if(this.onfile||err(5),this.p||err(4),this.c>0){var $t=Math.min(this.c,xt.length),Gn=xt.subarray(0,$t);if(this.c-=$t,this.d?this.d.push(Gn,!this.c):this.k[0].push(Gn),(xt=xt.subarray($t)).length)return this.push(xt,Ct)}else{var or=0,lr=0,Fr=void 0,Hr=void 0;this.p.length?xt.length?((Hr=new Vn(this.p.length+xt.length)).set(this.p),Hr.set(xt,this.p.length)):Hr=this.p:Hr=xt;for(var xo=Hr.length,Eo=this.c,Mo=Eo&&this.d,h=function(){var xt,Ct=b4(Hr,lr);if(67324752==Ct){or=1,Fr=lr,Oo.d=null,Oo.c=0;var $t=b2(Hr,lr+6),Vn=b2(Hr,lr+8),Gn=2048&$t,Mo=8&$t,Ro=b2(Hr,lr+26),Io=b2(Hr,lr+28);if(xo>lr+30+Ro+Io){var Bo=[];Oo.k.unshift(Bo),or=2;var zo,Ho=b4(Hr,lr+18),Qo=b4(Hr,lr+22),pi=strFromU8(Hr.subarray(lr+30,lr+=30+Ro),!Gn);4294967295==Ho?(xt=Mo?[-2]:z64e(Hr,lr),Ho=xt[0],Qo=xt[1]):Mo&&(Ho=-1),lr+=Io,Oo.c=Ho;var gi={name:pi,compression:Vn,start:function(){if(gi.ondata||err(5),Ho){var xt=_t.o[Vn];xt||gi.ondata(err(14,"unknown compression type "+Vn,1),null,!1),(zo=Ho<0?new xt(pi):new xt(pi,Ho,Qo)).ondata=function(xt,Ct,_t){gi.ondata(xt,Ct,_t)};for(var Ct=0,$t=Bo;Ct<$t.length;Ct++){var Gn=$t[Ct];zo.push(Gn,!1)}_t.k[0]==Bo&&_t.c?_t.d=zo:zo.push(is,!0)}else gi.ondata(null,is,!0)},terminate:function(){zo&&zo.terminate&&zo.terminate()}};Ho>=0&&(gi.size=Ho,gi.originalSize=Qo),Oo.onfile(gi)}return"break"}if(Eo){if(134695760==Ct)return Fr=lr+=12+(-2==Eo&&8),or=3,Oo.c=0,"break";if(33639248==Ct)return Fr=lr-=4,or=3,Oo.c=0,"break"}},Oo=this;lr<xo-4&&"break"!==h();++lr);if(this.p=is,Eo<0){var Ro=or?Hr.subarray(0,Fr-12-(-2==Eo&&8)-(134695760==b4(Hr,Fr-16)&&4)):Hr.subarray(0,lr);Mo?Mo.push(Ro,!!or):this.k[+(2==or)].push(Ro)}if(2&or)return this.push(Hr.subarray(lr),Ct);this.p=Hr.subarray(lr)}Ct&&(this.c&&err(13),this.p=null)},t.prototype.register=function(xt){this.o[xt.compression]=xt},t}();_t.Unzip=Ts;var Ps="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(xt){xt()};_t.unzip=function unzip(xt,Ct,_t){_t||(_t=Ct,Ct={}),"function"!=typeof _t&&err(7);var $t=[],i=function(){for(var xt=0;xt<$t.length;++xt)$t[xt]()},Gn={},o=function(xt,Ct){Ps((function(){_t(xt,Ct)}))};Ps((function(){o=_t}));for(var or=xt.length-22;101010256!=b4(xt,or);--or)if(!or||xt.length-or>65558)return o(err(13,0,1),null),i;var lr=b2(xt,or+8);if(lr){var Fr=lr,Hr=b4(xt,or+16),xo=4294967295==Hr;if(xo){if(or=b4(xt,or-12),101075792!=b4(xt,or))return o(err(13,0,1),null),i;Fr=lr=b4(xt,or+32),Hr=b4(xt,or+48)}for(var Eo=Ct&&Ct.filter,p=function(Ct){var _t=zh(xt,Hr,xo),or=_t[0],Fr=_t[1],Mo=_t[2],Oo=_t[3],Ro=_t[4],Io=_t[5],Bo=slzh(xt,Io);Hr=Ro;var g=function(xt,Ct){xt?(i(),o(xt,null)):(Ct&&(Gn[Oo]=Ct),--lr||o(null,Gn))};if(!Eo||Eo({name:Oo,size:Fr,originalSize:Mo,compression:or}))if(or)if(8==or){var zo=xt.subarray(Bo,Bo+Fr);if(Fr<32e4)try{g(null,inflateSync(zo,new Vn(Mo)))}catch(xt){g(xt,null)}else $t.push(inflate(zo,{size:Mo},g))}else g(err(14,"unknown compression type "+or,1),null);else g(null,slc(xt,Bo,Bo+Fr));else g(null,null)},Mo=0;Mo<Fr;++Mo)p()}else o(null,{});return i},_t.unzipSync=function unzipSync(xt,Ct){for(var _t={},$t=xt.length-22;101010256!=b4(xt,$t);--$t)(!$t||xt.length-$t>65558)&&err(13);var Gn=b2(xt,$t+8);if(!Gn)return{};var or=b4(xt,$t+16),lr=4294967295==or;lr&&($t=b4(xt,$t-12),101075792!=b4(xt,$t)&&err(13),Gn=b4(xt,$t+32),or=b4(xt,$t+48));for(var Fr=Ct&&Ct.filter,Hr=0;Hr<Gn;++Hr){var xo=zh(xt,or,lr),Eo=xo[0],Mo=xo[1],Oo=xo[2],Ro=xo[3],Io=xo[4],Bo=xo[5],zo=slzh(xt,Bo);or=Io,Fr&&!Fr({name:Ro,size:Mo,originalSize:Oo,compression:Eo})||(Eo?8==Eo?_t[Ro]=inflateSync(xt.subarray(zo,zo+Mo),new Vn(Oo)):err(14,"unknown compression type "+Eo):_t[Ro]=slc(xt,zo,zo+Mo))}return _t}},{"./node-worker.cjs":34}],34:[function(xt,Ct,_t){"use strict";var $t={};_t.default=function(xt,Ct,_t,Vn,Gn){var or=new Worker($t[Ct]||($t[Ct]=URL.createObjectURL(new Blob([xt+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return or.onmessage=function(xt){var Ct=xt.data,_t=Ct.$e$;if(_t){var $t=new Error(_t[0]);$t.code=_t[1],$t.stack=_t[2],Gn($t,null)}else Gn(null,Ct)},or.postMessage(_t,Vn),or}},{}],35:[function(xt,Ct,_t){"use strict";Ct.exports=function stringify(xt,Ct){var _t="",r=function(xt){return xt};return Ct>0&&(_t="\n",r=function indenter(xt){var Ct=" ".repeat(xt);return function(xt){var _t,$t=[];return"string"!=typeof xt?xt:1===(_t=xt.split("\n")).length?Ct+xt:(_t.forEach((function(xt){""!==xt.trim()?$t.push(Ct+xt):$t.push(xt)})),$t.join("\n"))}}(Ct)),function n(xt){var Ct,$t,Vn;return $t="",Vn=!0,xt.some((function(xt,Gn,or){if(0===Gn)return Ct="<"+xt,1===or.length||void 0;if(1===Gn){if(function isObject(xt){return xt&&"[object Object]"===Object.prototype.toString.call(xt)}(xt))return Object.keys(xt).forEach((function(_t){Ct+=" "+_t+'="'+xt[_t]+'"'})),2===or.length||void(Ct+=">");Ct+=">"}switch(typeof xt){case"string":case"number":case"boolean":case"undefined":return void($t+=xt+_t)}Vn=!1,$t+=n(xt)}))?Ct+"/>"+_t:Vn?Ct+function clean(xt){var Ct=xt.split("\n"),_t=[];return Ct.forEach((function(xt){""!==xt.trim()&&_t.push(xt)})),_t.join("\n")}($t)+"</"+xt[0]+">"+_t:Ct+_t+r($t)+"</"+xt[0]+">"+_t}(xt)}},{}],36:[function(xt,Ct,_t){const $t=xt("fflate").zipSync,Vn=xt("fflate").strToU8,Gn=xt("onml/lib/stringify"),{colors:or,geometries:lr,modifiers:Fr}=xt("@jscad/modeling"),{flatten:Hr,toArray:xo}=xt("@jscad/array-utils"),Eo='<?xml version="1.0" encoding="UTF-8" ?>\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">\n  <Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml">\n  </Default>\n  <Default Extension="model" ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml">\n  </Default>\n</Types>',Mo='<?xml version="1.0" encoding="UTF-8" ?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n  <Relationship Target="/3D/3dmodel.model" Id="rel0" Type="http://schemas.microsoft.com/3dmanufacturing/2013/01/3dmodel">\n  </Relationship>\n</Relationships>',translateResources=(xt,Ct)=>{let _t=["resources",{},translateMaterials(xt,Ct)];return _t.concat(translateObjects(xt,Ct))},translateMaterials=(xt,Ct)=>{let _t=["basematerials",{id:"0"}];const $t=[];return xt.forEach(((xt,_t)=>{let Vn=or.rgbToHex(Ct.defaultcolor).toUpperCase();xt.color&&(Vn=or.rgbToHex(xt.color).toUpperCase()),$t.push(["base",{name:`mat${_t}`,displaycolor:Vn}])})),_t.concat($t)},translateObjects=(xt,Ct)=>{const _t=[];return xt.forEach(((xt,$t)=>{lr.geom3.isA(xt)&&lr.geom3.toPolygons(xt).length>0&&(Ct.id=$t,_t.push(convertToObject(xt,Ct)))})),_t},translateBuild=(xt,Ct)=>{let _t=["build",{}];const $t=[];return xt.forEach(((xt,Ct)=>{$t.push(["item",{objectid:`${Ct+1}`}])})),_t.concat($t)},convertToObject=(xt,Ct)=>{const _t=xt.name?xt.name:`Part ${Ct.id}`;return["object",{id:`${Ct.id+1}`,type:"model",pid:"0",pindex:`${Ct.id}`,name:_t},convertToMesh(xt,Ct)]},convertToMesh=(xt,Ct)=>["mesh",{},convertToVertices(xt,Ct),convertToVolumes(xt,Ct)],convertToVertices=(xt,Ct)=>{const _t=[];return lr.geom3.toPolygons(xt).forEach((xt=>{for(let $t=0;$t<xt.vertices.length;$t++)_t.push(convertToVertex(xt.vertices[$t],Ct))})),["vertices",{}].concat(_t)},convertToVertex=(xt,Ct)=>["vertex",{x:xt[0],y:xt[1],z:xt[2]}],convertToVolumes=(xt,Ct)=>{let _t=0;const $t=lr.geom3.toPolygons(xt);let Vn=["triangles",{}];return $t.forEach((xt=>{if(xt.vertices.length<3)return;const Ct=convertToTriangles(xt,_t);Vn=Vn.concat(Ct),_t+=xt.vertices.length})),Vn},convertToTriangles=(xt,Ct)=>{const _t=[];for(let $t=0;$t<xt.vertices.length-2;$t++){const xt=["triangle",{v1:Ct,v2:Ct+$t+1,v3:Ct+$t+2}];_t.push(xt)}return _t};Ct.exports={serialize:(xt,...Ct)=>{xt=Object.assign({},{unit:"millimeter",metadata:!0,defaultcolor:[1,160/255,0,1],compress:!0},xt);let _t=(Ct=Hr(Ct)).filter((xt=>lr.geom3.isA(xt)));if(0===_t.length)throw new Error("only 3D geometries can be serialized to 3MF");Ct.length!==_t.length&&console.warn("some objects could not be serialized to 3MF"),Ct=xo(Fr.generalize({snap:!0,triangulate:!0},_t));const or=["model",{unit:xt.unit,"xml:lang":"und"},["metadata",{name:"Application"},"JSCAD"]];xt.metadata&&or.push(["metadata",{name:"CreationDate"},(new Date).toISOString()]),or.push(translateResources(Ct,xt)),or.push(translateBuild(Ct,xt));const Oo=`<?xml version="1.0" encoding="UTF-8"?>\n${Gn(or,2)}`;if(xt.compress){const xt={"3D":{"3dmodel.model":Vn(Oo)},_rels:{".rels":Vn(Mo)},"[Content_Types].xml":Vn(Eo)};return[$t(xt,{comment:"created by JSCAD"}).buffer]}return[Oo]},mimeType:"model/3mf",fileExtension:"3mf"}},{"@jscad/array-utils":525,"@jscad/modeling":210,fflate:33,"onml/lib/stringify":35}],37:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.CHAR="\t\n\r -íŸ¿î€€-ï¿½ð€€-ô¿¿",_t.S=" \t\r\n",_t.NAME_START_CHAR=":A-Z_a-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â€Œâ€â°-â†â°€-â¿¯ã€-íŸ¿ï¤€-ï·ï·°-ï¿½ð€€-ó¯¿¿",_t.NAME_CHAR="-"+_t.NAME_START_CHAR+".0-9Â·Ì€-Í¯â€¿-â€",_t.CHAR_RE=new RegExp("^["+_t.CHAR+"]$","u"),_t.S_RE=new RegExp("^["+_t.S+"]+$","u"),_t.NAME_START_CHAR_RE=new RegExp("^["+_t.NAME_START_CHAR+"]$","u"),_t.NAME_CHAR_RE=new RegExp("^["+_t.NAME_CHAR+"]$","u"),_t.NAME_RE=new RegExp("^["+_t.NAME_START_CHAR+"]["+_t.NAME_CHAR+"]*$","u"),_t.NMTOKEN_RE=new RegExp("^["+_t.NAME_CHAR+"]+$","u");function isNameStartChar(xt){return xt>=65&&xt<=90||xt>=97&&xt<=122||58===xt||95===xt||8204===xt||8205===xt||xt>=192&&xt<=214||xt>=216&&xt<=246||xt>=248&&xt<=767||xt>=880&&xt<=893||xt>=895&&xt<=8191||xt>=8304&&xt<=8591||xt>=11264&&xt<=12271||xt>=12289&&xt<=55295||xt>=63744&&xt<=64975||xt>=65008&&xt<=65533||xt>=65536&&xt<=983039}_t.S_LIST=[32,10,13,9],_t.isChar=function isChar(xt){return xt>=32&&xt<=55295||10===xt||13===xt||9===xt||xt>=57344&&xt<=65533||xt>=65536&&xt<=1114111},_t.isS=function isS(xt){return 32===xt||10===xt||13===xt||9===xt},_t.isNameStartChar=isNameStartChar,_t.isNameChar=function isNameChar(xt){return isNameStartChar(xt)||xt>=48&&xt<=57||45===xt||46===xt||183===xt||xt>=768&&xt<=879||xt>=8255&&xt<=8256}},{}],38:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.CHAR="-íŸ¿î€€-ï¿½ð€€-ô¿¿",_t.RESTRICTED_CHAR="-\b\v\f--Â„Â†-ÂŸ",_t.S=" \t\r\n",_t.NAME_START_CHAR=":A-Z_a-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â€Œâ€â°-â†â°€-â¿¯ã€-íŸ¿ï¤€-ï·ï·°-ï¿½ð€€-ó¯¿¿",_t.NAME_CHAR="-"+_t.NAME_START_CHAR+".0-9Â·Ì€-Í¯â€¿-â€",_t.CHAR_RE=new RegExp("^["+_t.CHAR+"]$","u"),_t.RESTRICTED_CHAR_RE=new RegExp("^["+_t.RESTRICTED_CHAR+"]$","u"),_t.S_RE=new RegExp("^["+_t.S+"]+$","u"),_t.NAME_START_CHAR_RE=new RegExp("^["+_t.NAME_START_CHAR+"]$","u"),_t.NAME_CHAR_RE=new RegExp("^["+_t.NAME_CHAR+"]$","u"),_t.NAME_RE=new RegExp("^["+_t.NAME_START_CHAR+"]["+_t.NAME_CHAR+"]*$","u"),_t.NMTOKEN_RE=new RegExp("^["+_t.NAME_CHAR+"]+$","u");function isNameStartChar(xt){return xt>=65&&xt<=90||xt>=97&&xt<=122||58===xt||95===xt||8204===xt||8205===xt||xt>=192&&xt<=214||xt>=216&&xt<=246||xt>=248&&xt<=767||xt>=880&&xt<=893||xt>=895&&xt<=8191||xt>=8304&&xt<=8591||xt>=11264&&xt<=12271||xt>=12289&&xt<=55295||xt>=63744&&xt<=64975||xt>=65008&&xt<=65533||xt>=65536&&xt<=983039}_t.S_LIST=[32,10,13,9],_t.isChar=function isChar(xt){return xt>=1&&xt<=55295||xt>=57344&&xt<=65533||xt>=65536&&xt<=1114111},_t.isRestrictedChar=function isRestrictedChar(xt){return xt>=1&&xt<=8||11===xt||12===xt||xt>=14&&xt<=31||xt>=127&&xt<=132||xt>=134&&xt<=159},_t.isCharAndNotRestricted=function isCharAndNotRestricted(xt){return 9===xt||10===xt||13===xt||xt>31&&xt<127||133===xt||xt>159&&xt<=55295||xt>=57344&&xt<=65533||xt>=65536&&xt<=1114111},_t.isS=function isS(xt){return 32===xt||10===xt||13===xt||9===xt},_t.isNameStartChar=isNameStartChar,_t.isNameChar=function isNameChar(xt){return isNameStartChar(xt)||xt>=48&&xt<=57||45===xt||46===xt||183===xt||xt>=768&&xt<=879||xt>=8255&&xt<=8256}},{}],39:[function(xt,Ct,_t){"use strict";function isNCNameStartChar(xt){return xt>=65&&xt<=90||95===xt||xt>=97&&xt<=122||xt>=192&&xt<=214||xt>=216&&xt<=246||xt>=248&&xt<=767||xt>=880&&xt<=893||xt>=895&&xt<=8191||xt>=8204&&xt<=8205||xt>=8304&&xt<=8591||xt>=11264&&xt<=12271||xt>=12289&&xt<=55295||xt>=63744&&xt<=64975||xt>=65008&&xt<=65533||xt>=65536&&xt<=983039}Object.defineProperty(_t,"__esModule",{value:!0}),_t.NC_NAME_START_CHAR="A-Z_a-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â€Œ-â€â°-â†â°€-â¿¯ã€-íŸ¿ï¤€-ï·ï·°-ï¿½ð€€-ó¯¿¿",_t.NC_NAME_CHAR="-"+_t.NC_NAME_START_CHAR+".0-9Â·Ì€-Í¯â€¿-â€",_t.NC_NAME_START_CHAR_RE=new RegExp("^["+_t.NC_NAME_START_CHAR+"]$","u"),_t.NC_NAME_CHAR_RE=new RegExp("^["+_t.NC_NAME_CHAR+"]$","u"),_t.NC_NAME_RE=new RegExp("^["+_t.NC_NAME_START_CHAR+"]["+_t.NC_NAME_CHAR+"]*$","u"),_t.isNCNameStartChar=isNCNameStartChar,_t.isNCNameChar=function isNCNameChar(xt){return isNCNameStartChar(xt)||45===xt||46===xt||xt>=48&&xt<=57||183===xt||xt>=768&&xt<=879||xt>=8255&&xt<=8256}},{}],40:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0});const $t=xt("xmlchars/xml/1.0/ed5"),Vn=xt("xmlchars/xml/1.1/ed2"),Gn=xt("xmlchars/xmlns/1.0/ed3");var or=$t.isS,lr=$t.isChar,Fr=$t.isNameStartChar,Hr=$t.isNameChar,xo=$t.S_LIST,Eo=$t.NAME_RE,Mo=Vn.isChar,Oo=Gn.isNCNameStartChar,Ro=Gn.isNCNameChar,Io=Gn.NC_NAME_RE;const Bo="http://www.w3.org/XML/1998/namespace",zo="http://www.w3.org/2000/xmlns/",Ho={__proto__:null,xml:Bo,xmlns:zo},Qo={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},pi=-1,gi=-2,es=13,ts=33,ns=10,rs=60,os=61,is=62,ss=63,as=93,isQuote=xt=>34===xt||39===xt,ls=[34,39],cs=[...ls,91,is],us=[...ls,rs,as],fs=[os,ss,...xo],hs=[...xo,is,38,rs];function nsPairCheck(xt,Ct,_t){switch(Ct){case"xml":_t!==Bo&&xt.fail(`xml prefix must be bound to ${Bo}.`);break;case"xmlns":_t!==zo&&xt.fail(`xmlns prefix must be bound to ${zo}.`)}switch(_t){case zo:xt.fail(""===Ct?`the default namespace may not be set to ${_t}.`:`may not assign a prefix (even "xmlns") to the URI ${zo}.`);break;case Bo:switch(Ct){case"xml":break;case"":xt.fail(`the default namespace may not be set to ${_t}.`);break;default:xt.fail("may not assign the xml namespace to another prefix.")}}}const isNCName=xt=>Io.test(xt),isName=xt=>Eo.test(xt);_t.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const ps={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};_t.SaxesParser=class SaxesParser{constructor(xt){this.opt=null!=xt?xt:{},this.fragmentOpt=!!this.opt.fragment;const Ct=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=!1!==this.opt.position,this.fileName=this.opt.fileName,Ct){this.nameStartCheck=Oo,this.nameCheck=Ro,this.isName=isNCName,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},Ho);const xt=this.opt.additionalNamespaces;null!=xt&&(function nsMappingCheck(xt,Ct){for(const _t of Object.keys(Ct))nsPairCheck(xt,_t,Ct[_t])}(this,xt),Object.assign(this.ns,xt))}else this.nameStartCheck=Fr,this.nameCheck=Hr,this.isName=isName,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var xt;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:Ct}=this;this.state=Ct?es:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=Ct,this.xmlDeclPossible=!Ct,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:_t}=this.opt;if(void 0===_t){if(!0===this.opt.forceXMLVersion)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");_t="1.0"}this.setXMLVersion(_t),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(Qo),null===(xt=this.readyHandler)||void 0===xt||xt.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(xt,Ct){this[ps[xt]]=Ct}off(xt){this[ps[xt]]=void 0}makeError(xt){var Ct;let _t=null!==(Ct=this.fileName)&&void 0!==Ct?Ct:"";return this.trackPosition&&(_t.length>0&&(_t+=":"),_t+=`${this.line}:${this.column}`),_t.length>0&&(_t+=": "),new Error(_t+xt)}fail(xt){const Ct=this.makeError(xt),_t=this.errorHandler;if(void 0===_t)throw Ct;return _t(Ct),this}write(xt){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let Ct=!1;null===xt?(Ct=!0,xt=""):"object"==typeof xt&&(xt=xt.toString()),void 0!==this.carriedFromPrevious&&(xt=`${this.carriedFromPrevious}${xt}`,this.carriedFromPrevious=void 0);let _t=xt.length;const $t=xt.charCodeAt(_t-1);!Ct&&(13===$t||$t>=55296&&$t<=56319)&&(this.carriedFromPrevious=xt[_t-1],_t--,xt=xt.slice(0,_t));const{stateTable:Vn}=this;for(this.chunk=xt,this.i=0;this.i<_t;)Vn[this.state].call(this);return this.chunkPosition+=_t,Ct?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:xt,i:Ct}=this;if(this.prevI=Ct,this.i=Ct+1,Ct>=xt.length)return pi;const _t=xt.charCodeAt(Ct);if(this.column++,_t<55296){if(_t>=32||9===_t)return _t;switch(_t){case ns:return this.line++,this.column=0,this.positionAtNewLine=this.position,ns;case 13:return xt.charCodeAt(Ct+1)===ns&&(this.i=Ct+2),this.line++,this.column=0,this.positionAtNewLine=this.position,gi;default:return this.fail("disallowed character."),_t}}if(_t>56319)return _t>=57344&&_t<=65533||this.fail("disallowed character."),_t;const $t=65536+1024*(_t-55296)+(xt.charCodeAt(Ct+1)-56320);return this.i=Ct+2,$t>1114111&&this.fail("disallowed character."),$t}getCode11(){const{chunk:xt,i:Ct}=this;if(this.prevI=Ct,this.i=Ct+1,Ct>=xt.length)return pi;const _t=xt.charCodeAt(Ct);if(this.column++,_t<55296){if(_t>31&&_t<127||_t>159&&8232!==_t||9===_t)return _t;switch(_t){case ns:return this.line++,this.column=0,this.positionAtNewLine=this.position,ns;case 13:{const _t=xt.charCodeAt(Ct+1);_t!==ns&&133!==_t||(this.i=Ct+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,gi;default:return this.fail("disallowed character."),_t}}if(_t>56319)return _t>=57344&&_t<=65533||this.fail("disallowed character."),_t;const $t=65536+1024*(_t-55296)+(xt.charCodeAt(Ct+1)-56320);return this.i=Ct+2,$t>1114111&&this.fail("disallowed character."),$t}getCodeNorm(){const xt=this.getCode();return xt===gi?ns:xt}unget(){this.i=this.prevI,this.column--}captureTo(xt){let{i:Ct}=this;const{chunk:_t}=this;for(;;){const $t=this.getCode(),Vn=$t===gi,Gn=Vn?ns:$t;if(Gn===pi||xt.includes(Gn))return this.text+=_t.slice(Ct,this.prevI),Gn;Vn&&(this.text+=`${_t.slice(Ct,this.prevI)}\n`,Ct=this.i)}}captureToChar(xt){let{i:Ct}=this;const{chunk:_t}=this;for(;;){let $t=this.getCode();switch($t){case gi:this.text+=`${_t.slice(Ct,this.prevI)}\n`,Ct=this.i,$t=ns;break;case pi:return this.text+=_t.slice(Ct),!1}if($t===xt)return this.text+=_t.slice(Ct,this.prevI),!0}}captureNameChars(){const{chunk:xt,i:Ct}=this;for(;;){const _t=this.getCode();if(_t===pi)return this.name+=xt.slice(Ct),pi;if(!Hr(_t))return this.name+=xt.slice(Ct,this.prevI),_t===gi?ns:_t}}skipSpaces(){for(;;){const xt=this.getCodeNorm();if(xt===pi||!or(xt))return xt}}setXMLVersion(xt){this.currentXMLVersion=xt,"1.0"===xt?(this.isChar=lr,this.getCode=this.getCode10):(this.isChar=Mo,this.getCode=this.getCode11)}sBegin(){65279===this.chunk.charCodeAt(0)&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const xt=this.i,Ct=this.skipSpaces();switch(this.prevI!==xt&&(this.xmlDeclPossible=!1),Ct){case rs:if(this.state=15,0!==this.text.length)throw new Error("no-empty text at start");break;case pi:break;default:this.unget(),this.state=es,this.xmlDeclPossible=!1}}sDoctype(){var xt;const Ct=this.captureTo(cs);switch(Ct){case is:null===(xt=this.doctypeHandler)||void 0===xt||xt.call(this,this.text),this.text="",this.state=es,this.doctype=!0;break;case pi:break;default:this.text+=String.fromCodePoint(Ct),91===Ct?this.state=4:isQuote(Ct)&&(this.state=3,this.q=Ct)}}sDoctypeQuote(){const xt=this.q;this.captureToChar(xt)&&(this.text+=String.fromCodePoint(xt),this.q=null,this.state=2)}sDTD(){const xt=this.captureTo(us);xt!==pi&&(this.text+=String.fromCodePoint(xt),xt===as?this.state=2:xt===rs?this.state=6:isQuote(xt)&&(this.state=5,this.q=xt))}sDTDQuoted(){const xt=this.q;this.captureToChar(xt)&&(this.text+=String.fromCodePoint(xt),this.state=4,this.q=null)}sDTDOpenWaka(){const xt=this.getCodeNorm();switch(this.text+=String.fromCodePoint(xt),xt){case 33:this.state=7,this.openWakaBang="";break;case ss:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const xt=String.fromCodePoint(this.getCodeNorm()),Ct=this.openWakaBang+=xt;this.text+=xt,"-"!==Ct&&(this.state="--"===Ct?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const xt=this.getCodeNorm();this.text+=String.fromCodePoint(xt),this.state=45===xt?10:8}sDTDCommentEnded(){const xt=this.getCodeNorm();this.text+=String.fromCodePoint(xt),xt===is?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(ss)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const xt=this.getCodeNorm();this.text+=String.fromCodePoint(xt),xt===is&&(this.state=4)}sText(){0!==this.tags.length?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:xt}=this;const{chunk:Ct}=this;e:for(;;)switch(this.getCode()){case gi:this.entity+=`${Ct.slice(xt,this.prevI)}\n`,xt=this.i;break;case 59:{const{entityReturnState:_t}=this,$t=this.entity+Ct.slice(xt,this.prevI);let Vn;this.state=_t,""===$t?(this.fail("empty entity name."),Vn="&;"):(Vn=this.parseEntity($t),this.entity=""),_t===es&&void 0===this.textHandler||(this.text+=Vn);break e}case pi:this.entity+=Ct.slice(xt);break e}}sOpenWaka(){const xt=this.getCode();if(Fr(xt))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(xt){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case ss:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=es,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var xt;const Ct=this.getCodeNorm();45===Ct?(this.state=19,null===(xt=this.commentHandler)||void 0===xt||xt.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(Ct)}`,this.state=17)}sCommentEnded(){const xt=this.getCodeNorm();xt!==is?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(xt)}`,this.state=17):this.state=es}sCData(){this.captureToChar(as)&&(this.state=21)}sCDataEnding(){const xt=this.getCodeNorm();xt===as?this.state=22:(this.text+=`]${String.fromCodePoint(xt)}`,this.state=20)}sCDataEnding2(){var xt;const Ct=this.getCodeNorm();switch(Ct){case is:null===(xt=this.cdataHandler)||void 0===xt||xt.call(this,this.text),this.text="",this.state=es;break;case as:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(Ct)}`,this.state=20}}sPIFirstChar(){const xt=this.getCodeNorm();this.nameStartCheck(xt)?(this.piTarget+=String.fromCodePoint(xt),this.state=24):xt===ss||or(xt)?(this.fail("processing instruction without a target."),this.state=xt===ss?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(xt),this.state=24)}sPIRest(){const{chunk:xt,i:Ct}=this;for(;;){const _t=this.getCodeNorm();if(_t===pi)return void(this.piTarget+=xt.slice(Ct));if(!this.nameCheck(_t)){this.piTarget+=xt.slice(Ct,this.prevI);const $t=_t===ss;$t||or(_t)?"xml"===this.piTarget?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=$t?ts:27):this.state=$t?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(_t));break}}}sPIBody(){if(0===this.text.length){const xt=this.getCodeNorm();xt===ss?this.state=26:or(xt)||(this.text=String.fromCodePoint(xt))}else this.captureToChar(ss)&&(this.state=26)}sPIEnding(){var xt;const Ct=this.getCodeNorm();if(Ct===is){const{piTarget:Ct}=this;"xml"===Ct.toLowerCase()&&this.fail("the XML declaration must appear at the start of the document."),null===(xt=this.piHandler)||void 0===xt||xt.call(this,{target:Ct,body:this.text}),this.piTarget=this.text="",this.state=es}else Ct===ss?this.text+="?":(this.text+=`?${String.fromCodePoint(Ct)}`,this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const xt=this.skipSpaces();xt!==ss?xt!==pi&&(this.state=28,this.name=String.fromCodePoint(xt)):this.state=ts}sXMLDeclName(){const xt=this.captureTo(fs);if(xt===ss)return this.state=ts,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(or(xt)||xt===os){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=xt===os?30:29}}sXMLDeclEq(){const xt=this.getCodeNorm();if(xt===ss)return this.state=ts,void this.fail("XML declaration is incomplete.");or(xt)||(xt!==os&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const xt=this.getCodeNorm();if(xt===ss)return this.state=ts,void this.fail("XML declaration is incomplete.");or(xt)||(isQuote(xt)?this.q=xt:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const xt=this.captureTo([this.q,ss]);if(xt===ss)return this.state=ts,this.text="",void this.fail("XML declaration is incomplete.");if(xt===pi)return;const Ct=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const xt=Ct;this.xmlDecl.version=xt,/^1\.[0-9]+$/.test(xt)?this.opt.forceXMLVersion||this.setXMLVersion(xt):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(Ct)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=Ct;break;case"standalone":"yes"!==Ct&&"no"!==Ct&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=Ct}this.name="",this.state=32}sXMLDeclSeparator(){const xt=this.getCodeNorm();xt!==ss?(or(xt)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=ts}sXMLDeclEnding(){var xt;this.getCodeNorm()===is?("xml"!==this.piTarget?this.fail("processing instructions are not allowed before root."):"version"!==this.name&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),null===(xt=this.xmldeclHandler)||void 0===xt||xt.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=es):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var xt;const Ct=this.captureNameChars();if(Ct===pi)return;const _t=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=_t.ns=Object.create(null)),null===(xt=this.openTagStartHandler)||void 0===xt||xt.call(this,_t),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),Ct){case is:this.openTag();break;case 47:this.state=35;break;default:or(Ct)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===is?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const xt=this.skipSpaces();xt!==pi&&(Fr(xt)?(this.unget(),this.state=37):xt===is?this.openTag():47===xt?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const xt=this.captureNameChars();xt===os?this.state=39:or(xt)?this.state=38:xt===is?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):xt!==pi&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const xt=this.skipSpaces();switch(xt){case pi:return;case os:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",xt===is?this.openTag():Fr(xt)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const xt=this.getCodeNorm();isQuote(xt)?(this.q=xt,this.state=40):or(xt)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:xt,chunk:Ct}=this;let{i:_t}=this;for(;;)switch(this.getCode()){case xt:return this.pushAttrib(this.name,this.text+Ct.slice(_t,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=Ct.slice(_t,this.prevI),this.state=14,void(this.entityReturnState=40);case ns:case gi:case 9:this.text+=`${Ct.slice(_t,this.prevI)} `,_t=this.i;break;case rs:return this.text+=Ct.slice(_t,this.prevI),void this.fail("disallowed character.");case pi:return void(this.text+=Ct.slice(_t))}}sAttribValueClosed(){const xt=this.getCodeNorm();or(xt)?this.state=36:xt===is?this.openTag():47===xt?this.state=35:Fr(xt)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const xt=this.captureTo(hs);switch(xt){case 38:this.state=14,this.entityReturnState=42;break;case rs:this.fail("disallowed character.");break;case pi:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",xt===is?this.openTag():this.state=36}}sCloseTag(){const xt=this.captureNameChars();xt===is?this.closeTag():or(xt)?this.state=44:xt!==pi&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case is:this.closeTag();break;case pi:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:xt,forbiddenState:Ct}=this;const{chunk:_t,textHandler:$t}=this;e:for(;;)switch(this.getCode()){case rs:if(this.state=15,void 0!==$t){const{text:Ct}=this,Vn=_t.slice(xt,this.prevI);0!==Ct.length?($t(Ct+Vn),this.text=""):0!==Vn.length&&$t(Vn)}Ct=0;break e;case 38:this.state=14,this.entityReturnState=es,void 0!==$t&&(this.text+=_t.slice(xt,this.prevI)),Ct=0;break e;case as:switch(Ct){case 0:Ct=1;break;case 1:Ct=2;break;case 2:break;default:throw new Error("impossible state")}break;case is:2===Ct&&this.fail('the string "]]>" is disallowed in char data.'),Ct=0;break;case gi:void 0!==$t&&(this.text+=`${_t.slice(xt,this.prevI)}\n`),xt=this.i,Ct=0;break;case pi:void 0!==$t&&(this.text+=_t.slice(xt));break e;default:Ct=0}this.forbiddenState=Ct}handleTextOutsideRoot(){let{i:xt}=this;const{chunk:Ct,textHandler:_t}=this;let $t=!1;e:for(;;){const Vn=this.getCode();switch(Vn){case rs:if(this.state=15,void 0!==_t){const{text:$t}=this,Vn=Ct.slice(xt,this.prevI);0!==$t.length?(_t($t+Vn),this.text=""):0!==Vn.length&&_t(Vn)}break e;case 38:this.state=14,this.entityReturnState=es,void 0!==_t&&(this.text+=Ct.slice(xt,this.prevI)),$t=!0;break e;case gi:void 0!==_t&&(this.text+=`${Ct.slice(xt,this.prevI)}\n`),xt=this.i;break;case pi:void 0!==_t&&(this.text+=Ct.slice(xt));break e;default:or(Vn)||($t=!0)}}$t&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(xt,Ct){var _t;const{prefix:$t,local:Vn}=this.qname(xt),Gn={name:xt,prefix:$t,local:Vn,value:Ct};if(this.attribList.push(Gn),null===(_t=this.attributeHandler)||void 0===_t||_t.call(this,Gn),"xmlns"===$t){const xt=Ct.trim();"1.0"===this.currentXMLVersion&&""===xt&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[Vn]=xt,nsPairCheck(this,Vn,xt)}else if("xmlns"===xt){const xt=Ct.trim();this.topNS[""]=xt,nsPairCheck(this,"",xt)}}pushAttribPlain(xt,Ct){var _t;const $t={name:xt,value:Ct};this.attribList.push($t),null===(_t=this.attributeHandler)||void 0===_t||_t.call(this,$t)}end(){var xt,Ct;this.sawRoot||this.fail("document must contain a root element.");const{tags:_t}=this;for(;_t.length>0;){const xt=_t.pop();this.fail(`unclosed tag: ${xt.name}`)}0!==this.state&&this.state!==es&&this.fail("unexpected end.");const{text:$t}=this;return 0!==$t.length&&(null===(xt=this.textHandler)||void 0===xt||xt.call(this,$t),this.text=""),this._closed=!0,null===(Ct=this.endHandler)||void 0===Ct||Ct.call(this),this._init(),this}resolve(xt){var Ct,_t;let $t=this.topNS[xt];if(void 0!==$t)return $t;const{tags:Vn}=this;for(let Ct=Vn.length-1;Ct>=0;Ct--)if(void 0!==($t=Vn[Ct].ns[xt]))return $t;return void 0!==($t=this.ns[xt])?$t:null===(_t=(Ct=this.opt).resolvePrefix)||void 0===_t?void 0:_t.call(Ct,xt)}qname(xt){const Ct=xt.indexOf(":");if(-1===Ct)return{prefix:"",local:xt};const _t=xt.slice(Ct+1),$t=xt.slice(0,Ct);return(""===$t||""===_t||_t.includes(":"))&&this.fail(`malformed name: ${xt}.`),{prefix:$t,local:_t}}processAttribsNS(){var xt;const{attribList:Ct}=this,_t=this.tag;{const{prefix:Ct,local:$t}=this.qname(_t.name);_t.prefix=Ct,_t.local=$t;const Vn=_t.uri=null!==(xt=this.resolve(Ct))&&void 0!==xt?xt:"";""!==Ct&&("xmlns"===Ct&&this.fail('tags may not have "xmlns" as prefix.'),""===Vn&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Ct)}.`),_t.uri=Ct))}if(0===Ct.length)return;const{attributes:$t}=_t,Vn=new Set;for(const xt of Ct){const{name:Ct,prefix:_t,local:Gn}=xt;let or,lr;""===_t?(or="xmlns"===Ct?zo:"",lr=Ct):(void 0===(or=this.resolve(_t))&&(this.fail(`unbound namespace prefix: ${JSON.stringify(_t)}.`),or=_t),lr=`{${or}}${Gn}`),Vn.has(lr)&&this.fail(`duplicate attribute: ${lr}.`),Vn.add(lr),xt.uri=or,$t[Ct]=xt}this.attribList=[]}processAttribsPlain(){const{attribList:xt}=this,Ct=this.tag.attributes;for(const{name:_t,value:$t}of xt)void 0!==Ct[_t]&&this.fail(`duplicate attribute: ${_t}.`),Ct[_t]=$t;this.attribList=[]}openTag(){var xt;this.processAttribs();const{tags:Ct}=this,_t=this.tag;_t.isSelfClosing=!1,null===(xt=this.openTagHandler)||void 0===xt||xt.call(this,_t),Ct.push(_t),this.state=es,this.name=""}openSelfClosingTag(){var xt,Ct,_t;this.processAttribs();const{tags:$t}=this,Vn=this.tag;Vn.isSelfClosing=!0,null===(xt=this.openTagHandler)||void 0===xt||xt.call(this,Vn),null===(Ct=this.closeTagHandler)||void 0===Ct||Ct.call(this,Vn),null===(this.tag=null!==(_t=$t[$t.length-1])&&void 0!==_t?_t:null)&&(this.closedRoot=!0),this.state=es,this.name=""}closeTag(){const{tags:xt,name:Ct}=this;if(this.state=es,this.name="",""===Ct)return this.fail("weird empty close tag."),void(this.text+="</>");const _t=this.closeTagHandler;let $t=xt.length;for(;$t-- >0;){const $t=this.tag=xt.pop();if(this.topNS=$t.ns,null==_t||_t($t),$t.name===Ct)break;this.fail("unexpected close tag.")}0===$t?this.closedRoot=!0:$t<0&&(this.fail(`unmatched closing tag: ${Ct}.`),this.text+=`</${Ct}>`)}parseEntity(xt){if("#"!==xt[0]){const Ct=this.ENTITIES[xt];return void 0!==Ct?Ct:(this.fail(this.isName(xt)?"undefined entity.":"disallowed character in entity name."),`&${xt};`)}let Ct=NaN;return"x"===xt[1]&&/^#x[0-9a-f]+$/i.test(xt)?Ct=parseInt(xt.slice(2),16):/^#[0-9]+$/.test(xt)&&(Ct=parseInt(xt.slice(1),10)),this.isChar(Ct)?String.fromCodePoint(Ct):(this.fail("malformed character entity."),`&${xt};`)}}},{"xmlchars/xml/1.0/ed5":37,"xmlchars/xml/1.1/ed2":38,"xmlchars/xmlns/1.0/ed3":39}],41:[function(xt,Ct,_t){Ct.exports={name:"@jscad/amf-deserializer",version:"2.3.6",description:"AMF Deserializer for JSCAD",repository:"https://github.com/jscad/OpenJSCAD.org/",main:"src/index.js",scripts:{coverage:"nyc --all --reporter=html --reporter=text npm test",test:"ava --verbose --timeout 2m 'tests/**/*.test.js'"},contributors:[{name:"Rene K. Mueller",url:"http://renekmueller.com"},{name:"z3dev",url:"http://www.z3d.jp"},{name:"Mark 'kaosat-dev' Moissette",url:"http://kaosat.net"}],keywords:["openjscad","jscad","import","deserializer","amf"],license:"MIT",dependencies:{"@jscad/modeling":"2.12.1",saxes:"5.0.1"},devDependencies:{ava:"3.15.0",nyc:"15.1.0"},gitHead:"a90b9bad95a417661c619dc733e62c587dc71a4a"}},{}],42:[function(xt,Ct,_t){Ct.exports={inchMM:1/.03937}},{}],43:[function(xt,Ct,_t){const $t=xt("./objectBuilder"),Vn=xt("./parse"),objectify=(xt,Ct)=>xt.objects.filter((xt=>"object"===xt.type)).map(((_t,Vn)=>$t(_t,Vn,Ct,{amf:xt,instantiate:!0})));Ct.exports=(Ct,_t)=>{const $t={pxPmm:xt("./constants").pxPmm};Ct=Object.assign({},$t,Ct);const{pxPmm:Gn}=Ct,{amfObj:or,amfMaterials:lr,amfTextures:Fr,amfConstels:Hr}=Vn(_t,Gn);if(!or)throw new Error("AMF parsing failed, no valid AMF data retrieved");return objectify(or,{amfMaterials:lr,amfTextures:Fr,amfConstels:Hr})}},{"./constants":42,"./objectBuilder":46,"./parse":47}],44:[function(xt,Ct,_t){Ct.exports={amfMesh:xt=>({type:"mesh",objects:[]}),amfVertices:xt=>({type:"vertices",objects:[]}),amfCoordinates:xt=>({type:"coordinates",objects:[]}),amfX:xt=>({type:"x",value:"0"}),amfY:xt=>({type:"y",value:"0"}),amfZ:xt=>({type:"z",value:"0"}),amfNormal:xt=>({type:"normal",objects:[]}),amfVolume:xt=>{const Ct={type:"volume"};return xt.materialid&&(Ct.materialid=xt.materialid),Ct.objects=[],Ct},amfTriangle:xt=>({type:"triangle",objects:[]}),amfV1:xt=>({type:"v1",value:"0"}),amfV2:xt=>({type:"v2",value:"0"}),amfV3:xt=>({type:"v3",value:"0"}),amfVertex:xt=>({type:"vertex",objects:[]}),amfEdge:xt=>({type:"edge",objects:[]}),amfMetadata:xt=>{const Ct={type:"metadata"};return xt.type&&(Ct.mtype=xt.type),xt.id&&(Ct.id=xt.id),Ct},amfMaterial:xt=>{const Ct={type:"material"};return xt.id&&(Ct.id=xt.id),Ct.objects=[],Ct},amfColor:xt=>({type:"color",objects:[]}),amfR:xt=>({type:"r",value:"1"}),amfG:xt=>({type:"g",value:"1"}),amfB:xt=>({type:"b",value:"1"}),amfA:xt=>({type:"a",value:"1"}),amfMap:xt=>{const Ct={type:"map"};return xt.gtexid&&(Ct.gtexid=xt.gtexid),xt.btexid&&(Ct.btexid=xt.btexid),xt.rtexid&&(Ct.rtexid=xt.rtexid),Ct.objects=[],Ct},amfU1:xt=>({type:"u1",value:"0"}),amfU2:xt=>({type:"u2",value:"0"}),amfU3:xt=>({type:"u3",value:"0"})}},{}],45:[function(xt,Ct,_t){const $t=xt("../package.json").version,Vn=xt("./translate"),Gn=xt("./deserialize");Ct.exports={deserialize:(xt,Ct)=>{const _t={filename:"amf",output:"script",version:$t,addMetaData:!0};return"script"===(xt=Object.assign({},_t,xt)).output?Vn(xt,Ct):Gn(xt,Ct)},extension:"amf"}},{"../package.json":41,"./deserialize":43,"./translate":48}],46:[function(xt,Ct,_t){const{maths:$t,geometries:Vn}=xt("@jscad/modeling");let Gn;const getValue=(xt,Ct)=>{for(let _t=0;_t<xt.length;_t++)if(xt[_t].type===Ct)return xt[_t].value;return null},getColor=xt=>{for(let Ct=0;Ct<xt.length;Ct++){const _t=xt[Ct];if("color"===_t.type){let xt=parseFloat(getValue(_t.objects,"r")),Ct=parseFloat(getValue(_t.objects,"g")),$t=parseFloat(getValue(_t.objects,"b")),Vn=parseFloat(getValue(_t.objects,"a"));return Number.isNaN(xt)&&(xt=1),Number.isNaN(Ct)&&(Ct=1),Number.isNaN($t)&&($t=1),Number.isNaN(Vn)&&(Vn=1),[xt,Ct,$t,Vn]}}return null},findColorByMaterial=(xt,Ct)=>{const _t=((xt,Ct)=>{if(Gn&&Gn.id===Ct)return Gn;for(let _t=0;_t<xt.length;_t++)if(xt[_t].id&&xt[_t].id===Ct)return Gn=xt[_t];return null})(xt,Ct);return _t?getColor(_t.objects):null};Ct.exports=(xt,Ct,_t,Gn)=>{const or=[],lr=[],Fr=[],Hr=_t.amfMaterials,c=(xt,Ct)=>{if("coordinates"===xt.type){const Ct=parseFloat(getValue(xt.objects,"x")),_t=parseFloat(getValue(xt.objects,"y")),$t=parseFloat(getValue(xt.objects,"z"));or.push([Ct,_t,$t])}},i=(xt,Ct)=>{"vertex"===xt.type&&xt.objects.forEach(c)},g=(xt,Ct)=>{if("triangle"===xt.type){const Ct=parseInt(getValue(xt.objects,"v1")),_t=parseInt(getValue(xt.objects,"v2")),$t=parseInt(getValue(xt.objects,"v3"));lr.push([Ct,_t,$t]);const Vn=getColor(xt.objects);Vn?Fr.push(Vn):Fr.push(xo)}};let xo=null;const p=(xt,Ct)=>{switch(xt.type){case"vertices":xt.objects.forEach(i);break;case"volume":xo=getColor(xt.objects),xt.materialid&&(xo=findColorByMaterial(Hr,xt.materialid)),xt.objects.forEach(g)}},h=(xt,Ct)=>{"mesh"===xt.type&&xt.objects.forEach(p)};if(!0===Gn.instantiate){const Ct=Gn.amf.scale,_t=1!==Ct?([xt,_t,Vn])=>$t.vec3.fromValues(xt*Ct,_t*Ct,Vn*Ct):xt=>$t.vec3.clone(xt);xt.objects.forEach(h);const Hr=getColor(xt.objects),xo=lr.length,Eo=or.length,Mo=[];for(let xt=0;xt<xo;xt++){const Ct=[];for(let $t=0;$t<lr[xt].length;$t++)lr[xt][$t]<0||lr[xt][$t]>=Eo||Ct.push(_t(or[lr[xt][$t]]));const $t=Vn.poly3.fromPoints(Ct),Gn=Fr[xt]?Fr[xt]:void 0;Gn&&($t.color=Gn),Mo.push($t)}let Oo=Vn.geom3.create(Mo);return Hr&&(Oo=Oo.color=Hr),Oo}let Eo="";if(xt.objects.length>0){xt.objects.forEach(h);const Ct=getColor(xt.objects),_t=lr.length,$t=or.length;Eo+=`\n// Object ${xt.id}\n//  faces   : ${_t}\n//  vertices: ${$t}\nconst createObject${xt.id} = () => {\n  let polygons = []\n  let polygon\n`;for(let xt=0;xt<_t;xt++){Eo+="  polygon = geometries.poly3.fromPoints([\n";for(let Ct=0;Ct<lr[xt].length;Ct++)lr[xt][Ct]<0||lr[xt][Ct]>=$t||(Eo+=`      [${or[lr[xt][Ct]]}],\n`);Eo+="  ])\n";const Ct=Fr[xt];Ct&&(Eo+=`  polygon.color = [${Ct}]\n`),Eo+="  polygons.push(polygon)\n"}Eo+="  let shape = geometries.geom3.create(polygons)\n";const Vn=Gn.scale?Gn.scale:1;1!==Vn&&(Eo+=`  shape = transforms.scale([${Vn},${Vn},${Vn}], shape)\n`),Ct&&(Eo+=`  shape = colors.colorize([${Ct}], shape)\n`),Eo+="  return shape\n}\n"}return Eo}},{"@jscad/modeling":210}],47:[function(xt,Ct,_t){const $t=xt("saxes"),{amfMesh:Vn,amfVertices:Gn,amfCoordinates:or,amfX:lr,amfY:Fr,amfZ:Hr,amfNormal:xo,amfVolume:Eo,amfTriangle:Mo,amfV1:Oo,amfV2:Ro,amfV3:Io,amfVertex:Bo,amfEdge:zo,amfMetadata:Ho,amfMaterial:Qo,amfColor:pi,amfR:gi,amfG:es,amfB:ts,amfA:ns,amfMap:rs,amfU1:os,amfU2:is,amfU3:ss}=xt("./helpers"),{inchMM:as}=xt("./constants");let ls=null,cs=0;const us=[],fs=[],hs=[],ps=[];let ds=null;const amfAmf=xt=>{const Ct={type:"amf",unit:"mm",scale:1};switch(xt.unit&&(Ct.unit=xt.unit.toLowerCase()),Ct.unit.toLowerCase()){case"inch":Ct.scale=as;break;case"foot":Ct.scale=12*as;break;case"meter":Ct.scale=1e3;break;case"micron":Ct.scale=.001}return Ct.objects=[],Ct},createAmfParser=(xt,Ct)=>{const _t=new $t.SaxesParser;_t.on("error",(xt=>{console.log(`ERROR: AMF file line ${xt.line}, column ${xt.column}, bad character [${xt.c}]`)})),_t.on("opentag",(xt=>{const Ct={AMF:amfAmf,OBJECT:xt=>{const Ct=(xt=>{const Ct={type:"object",id:`JSCAD${us.length}`};return xt.id&&(Ct.id=xt.id),Ct.objects=[],Ct})(xt);return 0===cs&&(cs=1),Ct},MESH:Vn,VERTICES:Gn,VERTEX:Bo,EDGE:zo,VOLUME:Eo,MATERIAL:xt=>{const Ct=Qo(xt);return 0===cs&&(cs=2),Ct},TEXTURE:xt=>{0===cs&&(cs=3)},CONSTELLATION:xt=>{0===cs&&(cs=4)},METADATA:xt=>{const Ct=Ho(xt);return 0===cs&&(cs=5),Ct},COORDINATES:or,NORMAL:xo,NX:lr,X:lr,NY:Fr,Y:Fr,NZ:Hr,Z:Hr,TRIANGLE:Mo,V1:Oo,VTEX1:Oo,V2:Ro,VTEX2:Ro,V3:Io,VTEX3:Io,COLOR:pi,R:gi,G:es,B:ts,A:ns,MAP:rs,TEXMAP:rs,U1:os,UTEX1:os,WTEX1:os,U2:is,UTEX2:is,WTEX2:is,U3:ss,UTEX3:ss,WTEX3:ss,COMPOSITE:()=>{},undefined:()=>console.log(`WARNING: unsupported AMF element: ${xt.name}`)},_t=xt.name.toUpperCase(),$t=Ct[_t]?Ct[_t](xt.attributes,{amfObjects:us}):null;if($t){switch(cs){case 0:"objects"in $t&&us.push($t);break;case 1:if(us.length>0){const xt=us.pop();"objects"in xt&&xt.objects.push($t),us.push(xt),"objects"in $t&&us.push($t)}break;case 2:if("material"===$t.type)fs.push($t);else if(fs.length>0){const xt=fs.pop();"objects"in xt&&xt.objects.push($t),fs.push(xt),"objects"in $t&&fs.push($t)}break;case 3:case 4:case 5:break;default:console.log("WARNING: invalid AMF definition")}ls=$t}})),_t.on("closetag",(xt=>{switch(xt.name.toUpperCase()){case"AMF":case"OBJECT":case"MESH":case"VERTICES":case"VERTEX":case"EDGE":case"COORDINATES":case"NORMAL":case"VOLUME":case"TRIANGLE":case"MATERIAL":case"COLOR":case"MAP":case"TEXMAP":break;case"TEXTURE":return void(3===cs&&(cs=0));case"CONSTELLATION":return void(4===cs&&(cs=0));case"METADATA":return void(5===cs&&(cs=0));default:return}let Ct=null;switch(cs){case 0:case 1:us.length>0&&"object"===(Ct=us.pop()).type&&(cs=0),0===us.length&&(ds=Ct);break;case 2:fs.length>0&&"material"===(Ct=fs.pop()).type&&(fs.push(Ct),cs=0);break;case 3:case 4:case 5:cs=0}})),_t.on("text",(xt=>{null!==xt&&(xt=xt.trim()).length>0&&ls&&0!==cs&&(ls.value=xt,ls=null)})),_t.on("end",(()=>{})),_t.write(xt).close()};Ct.exports=(xt,Ct)=>(createAmfParser(xt),{amfObj:ds,amfMaterials:fs,amfTextures:hs,amfConstels:ps})},{"./constants":42,"./helpers":44,saxes:40}],48:[function(xt,Ct,_t){const $t=xt("./objectBuilder"),Vn=xt("./parse"),codify=(xt,Ct)=>{if("amf"!==xt.type||!xt.objects)throw new Error("AMF parsing failed, malformed");let _t="";const Vn=xt.objects,Gn=Ct.amfMaterials;_t=`// Objects  : ${Vn.length}\n// Materials: ${Gn.length}\n// Scale    : ${xt.scale} from Units (${xt.unit})\n\nconst {colors, geometries, transforms} = require('@jscad/modeling')\n\nconst main = () => {\n  let objects = []\n`;for(let xt=0;xt<Vn.length;xt++){const Ct=Vn[xt];"object"===Ct.type&&(_t+=`  objects.push(createObject${Ct.id}())\n`)}return _t+="  return objects\n}\n",Vn.forEach(((Vn,Gn)=>{switch(Vn.type){case"object":_t+=$t(Vn,Gn,Ct,{instantiate:!1,scale:xt.scale});break;case"metadata":case"material":break;default:console.log("WARNING: unknown object type: "+Vn.type)}})),_t+="module.exports = {main}\n"};Ct.exports=(Ct,_t)=>{const $t={pxPmm:xt("./constants").pxPmm};Ct=Object.assign({},$t,Ct);const{version:Gn,pxPmm:or,addMetaData:lr,filename:Fr}=Ct;Ct&&Ct.statusCallback&&Ct.statusCallback({progress:0});const{amfObj:Hr,amfMaterials:xo,amfTextures:Eo,amfConstels:Mo}=Vn(_t,or);let Oo=lr?`//\n// Produced by JSCAD IO Library : AMF Deserializer (${Gn})\n// date: ${new Date}\n// source: ${Fr}\n//\n`:"";if(!Hr)throw new Error("AMF parsing failed, no valid AMF data retrieved");return Ct&&Ct.statusCallback&&Ct.statusCallback({progress:50}),Oo+=codify(Hr,{amfMaterials:xo,amfTextures:Eo,amfConstels:Mo}),Ct&&Ct.statusCallback&&Ct.statusCallback({progress:100}),Oo}},{"./constants":42,"./objectBuilder":46,"./parse":47}],49:[function(xt,Ct,_t){const $t=xt("onml/lib/stringify"),{geometries:Vn,modifiers:Gn}=xt("@jscad/modeling"),{flatten:or,toArray:lr}=xt("@jscad/array-utils"),translateObjects=(xt,Ct)=>{const _t=[];return xt.forEach(((xt,$t)=>{Vn.geom3.toPolygons(xt).length>0&&(Ct.id=$t,_t.push(convertToObject(xt,Ct)))})),_t},convertToObject=(xt,Ct)=>["object",{id:Ct.id},convertToMesh(xt,Ct)],convertToMesh=(xt,Ct)=>{let _t=["mesh",{},convertToVertices(xt,Ct)];return _t.concat(convertToVolumes(xt,Ct))},convertToVertices=(xt,Ct)=>{const _t=[];return Vn.geom3.toPolygons(xt).forEach((xt=>{for(let $t=0;$t<xt.vertices.length;$t++)_t.push(convertToVertex(xt.vertices[$t],Ct))})),["vertices",{}].concat(_t)},convertToVertex=(xt,Ct)=>["vertex",{},convertToCoordinates(xt,Ct)],convertToCoordinates=(xt,Ct)=>["coordinates",{},["x",{},xt[0]],["y",{},xt[1]],["z",{},xt[2]]],convertToVolumes=(xt,Ct)=>{const _t=convertColor(xt.color),$t=Vn.geom3.toPolygons(xt),Gn=[];let or=["volume",{}];_t&&or.push(_t);let lr=0;return $t.forEach((xt=>{if(xt.vertices.length<3)return;const _t=convertToTriangles(xt,lr,Ct);or=or.concat(_t),lr+=xt.vertices.length})),Gn.push(or),Gn},convertColor=xt=>xt?(xt.length<4&&xt.push(1),["color",{},["r",{},xt[0]],["g",{},xt[1]],["b",{},xt[2]],["a",{},xt[3]]]):null,convertToTriangles=(xt,Ct,_t)=>{const $t=((xt,Ct)=>{const _t=xt.color;return convertColor(_t)})(xt),Vn=[];for(let _t=0;_t<xt.vertices.length-2;_t++)$t?Vn.push(["triangle",{},$t,["v1",{},Ct],["v2",{},Ct+_t+1],["v3",{},Ct+_t+2]]):Vn.push(["triangle",{},["v1",{},Ct],["v2",{},Ct+_t+1],["v3",{},Ct+_t+2]]);return Vn};Ct.exports={serialize:(xt,...Ct)=>{xt=Object.assign({},{statusCallback:null,unit:"millimeter"},xt);let _t=(Ct=or(Ct)).filter((xt=>Vn.geom3.isA(xt)));if(0===_t.length)throw new Error("only 3D geometries can be serialized to AMF");Ct.length!==_t.length&&console.warn("some objects could not be serialized to AMF"),_t=lr(Gn.generalize({snap:!0,triangulate:!0},_t)),xt.statusCallback&&xt.statusCallback({progress:0});let Fr=["amf",{unit:xt.unit,version:"1.1"},["metadata",{type:"author"},"Created by JSCAD"]];Fr=Fr.concat(translateObjects(_t,xt));const Hr=`<?xml version="1.0" encoding="UTF-8"?>\n${$t(Fr,2)}`;return xt&&xt.statusCallback&&xt.statusCallback({progress:100}),[Hr]},mimeType:"application/amf+xml"}},{"@jscad/array-utils":525,"@jscad/modeling":210,"onml/lib/stringify":50}],50:[function(xt,Ct,_t){"use strict";Ct.exports=function stringify(xt,Ct){const _t=Ct>0?"\n":"",$t=function indenter(xt){if(!(xt>0))return xt=>xt;var Ct=" ".repeat(xt);return xt=>{if("string"!=typeof xt)return xt;const _t=xt.split("\n");return 1===_t.length?Ct+xt:_t.map((xt=>""===xt.trim()?xt:Ct+xt)).join("\n")}}(Ct);return function t(xt){let Ct,Vn="",Gn=!0;return xt.some(((xt,$t,or)=>{if(0===$t)return Ct="<"+xt,1===or.length;if(1===$t){if((xt=>xt&&"[object Object]"===Object.prototype.toString.call(xt))(xt))return Object.keys(xt).map((_t=>{let $t=xt[_t];Array.isArray($t)&&($t=$t.join(" ")),Ct+=" "+_t+'="'+$t+'"'})),2===or.length||void(Ct+=">");Ct+=">"}switch(typeof xt){case"string":case"number":case"boolean":case"undefined":return void(Vn+=xt+_t)}Gn=!1,Vn+=t(xt)}))?Ct+"/>"+_t:Gn?Ct+(xt=>xt.split("\n").filter((xt=>""!==xt.trim())).join("\n"))(Vn)+"</"+xt[0]+">"+_t:Ct+_t+$t(Vn)+"</"+xt[0]+">"+_t}(xt)}},{}],51:[function(xt,Ct,_t){!function(xt){function r(xt){const Ct=this;Ct.options=xt||{},Ct.trackPosition=!1!==Ct.options.track,Ct.trackPosition&&(Ct.line=Ct.column=Ct.c=0)}xt.reader=function(xt){return new r(xt)},xt.STATES=["start","end","error"],r.prototype={on:function(xt,Ct){this["on"+xt]=Ct},absorb:function(xt,Ct){void 0===this.absorbers&&(this.absorbers=new Map),this.absorbers.set(xt,Ct)},write:function(xt){return i(this,xt),this},close:function(){return this.isclosed=!0,this}};const o=(xt,Ct)=>(xt.trackPosition&&(Ct+=`\nLine: ${xt.line}\nColumn: ${xt.column}\nChar: ${xt.c}`),Ct=new Error(Ct),xt.error=Ct,e(xt,"onerror",Ct)),t=xt=>e(xt,"onend",xt.data),e=(xt,Ct,_t)=>{const $t=Ct.toString();return xt[$t]&&xt[$t](xt,_t),xt},i=(xt,Ct)=>{if(xt.error)throw xt.error;if(xt.isclosed)return o(xt,"Cannot write after close");if((xt=>{e(xt,"onstart",xt.data)})(xt),null===Ct)return t(xt);xt.group=null,xt.value=null,xt.error=null,xt.position=0,xt.line=0,xt.column=0;let _t=0,$t="",Vn="";for(;null===xt.error&&($t=a(Ct,_t++));)xt.trackPosition&&(xt.position++,"\n"===$t?(xt.line++,xt.column=0):xt.column++),"\n"===$t?(s(xt,Vn),Vn=""):Vn+=$t;return t(xt),xt},s=(xt,Ct)=>{Ct=Ct.trim(),null===xt.group?(l(xt,Ct),xt.value=null):u(xt,Ct),null!==xt.group&&null!==xt.value&&(((xt,Ct,_t)=>{if(void 0!==xt.absorbers){const $t=xt.absorbers.get(Ct);void 0!==$t&&$t(xt,Ct,_t)}})(xt,xt.group,xt.value),xt.group=null,xt.value=null)},l=(xt,Ct)=>{const _t=parseInt(Ct);isNaN(_t)?(o(xt,"Invalid group (int)"),xt.group=null):xt.group=_t},u=(xt,Ct)=>{xt.options.strict,xt.value=Ct},a=(xt,Ct)=>xt&&xt.length>Ct?xt.charAt(Ct):""}(void 0===_t?this.dxf={}:_t)},{}],52:[function(xt,Ct,_t){const $t=new Map([[0,"etyp"],[1,"text"],[2,"name"],[3,"nam1"],[5,"hdle"],[6,"ltyp"],[7,"lsty"],[8,"lnam"],[9,"vari"],[10,"pptx"],[11,"sptx"],[12,"tptx"],[13,"fptx"],[20,"ppty"],[21,"spty"],[22,"tpty"],[23,"fpty"],[30,"pptz"],[31,"sptz"],[32,"tptz"],[33,"fptz"],[38,"elev"],[39,"lthk"],[40,"swid"],[41,"ewid"],[42,"bulg"],[43,"cwid"],[48,"lscl"],[50,"ang0"],[51,"ang1"],[60,"visb"],[62,"cnmb"],[67,"spac"],[70,"lflg"],[71,"fvia"],[72,"fvib"],[73,"fvic"],[74,"fvid"],[75,"cflg"],[90,"vlen"],[91,"slen"],[92,"plen"],[93,"flen"],[94,"elen"],[95,"clen"],[100,"sbnm"],[210,"etrx"],[220,"etry"],[230,"etrz"]]);Ct.exports={drawingUnits:[[0,"none"],[1,"inches"],[2,"feet"],[3,"miles"],[4,"millimeters"],[5,"centimeters"],[6,"meters"],[7,"kilometers"],[8,"microinches"],[9,"mils"],[10,"yards"],[11,"angstroms"],[12,"nanometers"],[13,"microns"],[14,"decimeters"],[15,"dekameters"],[16,"hectometers"],[17,"gigameters"],[18,"astrounits"],[19,"lightyears"],[20,"parsecs"]],BYBLOCK:0,BYLAYER:256,getTLA:xt=>$t.get(xt)}},{}],53:[function(xt,Ct,_t){Ct.exports=[[0,0,0,255],[255,0,0,255],[255,255,0,255],[0,255,0,255],[0,255,255,255],[0,0,255,255],[255,0,255,255],[255,255,255,255],[128,128,128,255],[192,192,192,255],[255,0,0,255],[255,127,127,255],[165,0,0,255],[165,82,82,255],[127,0,0,255],[127,63,63,255],[76,0,0,255],[76,38,38,255],[38,0,0,255],[38,19,19,255],[255,63,0,255],[255,159,127,255],[165,41,0,255],[165,103,82,255],[127,31,0,255],[127,79,63,255],[76,19,0,255],[76,47,38,255],[38,9,0,255],[38,28,19,255],[255,127,0,255],[255,191,127,255],[165,82,0,255],[165,124,82,255],[127,63,0,255],[127,95,63,255],[76,38,0,255],[76,57,38,255],[38,19,0,255],[38,28,19,255],[255,191,0,255],[255,223,127,255],[165,124,0,255],[165,145,82,255],[127,95,0,255],[127,111,63,255],[76,57,0,255],[76,66,38,255],[38,28,0,255],[38,33,19,255],[255,255,0,255],[255,255,127,255],[165,165,0,255],[165,165,82,255],[127,127,0,255],[127,127,63,255],[76,76,0,255],[76,76,38,255],[38,38,0,255],[38,38,19,255],[191,255,0,255],[223,255,127,255],[124,165,0,255],[145,165,82,255],[95,127,0,255],[111,127,63,255],[57,76,0,255],[66,76,38,255],[28,38,0,255],[33,38,19,255],[127,255,0,255],[191,255,127,255],[82,165,0,255],[124,165,82,255],[63,127,0,255],[95,127,63,255],[38,76,0,255],[57,76,38,255],[19,38,0,255],[28,38,19,255],[63,255,0,255],[159,255,127,255],[41,165,0,255],[103,165,82,255],[31,127,0,255],[79,127,63,255],[19,76,0,255],[47,76,38,255],[9,38,0,255],[23,38,19,255],[0,255,0,255],[125,255,127,255],[0,165,0,255],[82,165,82,255],[0,127,0,255],[63,127,63,255],[0,76,0,255],[38,76,38,255],[0,38,0,255],[19,38,19,255],[0,255,63,255],[127,255,159,255],[0,165,41,255],[82,165,103,255],[0,127,31,255],[63,127,79,255],[0,76,19,255],[38,76,47,255],[0,38,9,255],[19,88,23,255],[0,255,127,255],[127,255,191,255],[0,165,82,255],[82,165,124,255],[0,127,63,255],[63,127,95,255],[0,76,38,255],[38,76,57,255],[0,38,19,255],[19,88,28,255],[0,255,191,255],[127,255,223,255],[0,165,124,255],[82,165,145,255],[0,127,95,255],[63,127,111,255],[0,76,57,255],[38,76,66,255],[0,38,28,255],[19,88,88,255],[0,255,255,255],[127,255,255,255],[0,165,165,255],[82,165,165,255],[0,127,127,255],[63,127,127,255],[0,76,76,255],[38,76,76,255],[0,38,38,255],[19,88,88,255],[0,191,255,255],[127,223,255,255],[0,124,165,255],[82,145,165,255],[0,95,127,255],[63,111,217,255],[0,57,76,255],[38,66,126,255],[0,28,38,255],[19,88,88,255],[0,127,255,255],[127,191,255,255],[0,82,165,255],[82,124,165,255],[0,63,127,255],[63,95,127,255],[0,38,76,255],[38,57,126,255],[0,19,38,255],[19,28,88,255],[0,63,255,255],[127,159,255,255],[0,41,165,255],[82,103,165,255],[0,31,127,255],[63,79,127,255],[0,19,76,255],[38,47,126,255],[0,9,38,255],[19,23,88,255],[0,0,255,255],[127,127,255,255],[0,0,165,255],[82,82,165,255],[0,0,127,255],[63,63,127,255],[0,0,76,255],[38,38,126,255],[0,0,38,255],[19,19,88,255],[63,0,255,255],[159,127,255,255],[41,0,165,255],[103,82,165,255],[31,0,127,255],[79,63,127,255],[19,0,76,255],[47,38,126,255],[9,0,38,255],[23,19,88,255],[127,0,255,255],[191,127,255,255],[165,0,82,255],[124,82,165,255],[63,0,127,255],[95,63,127,255],[38,0,76,255],[57,38,126,255],[19,0,38,255],[28,19,88,255],[191,0,255,255],[223,127,255,255],[124,0,165,255],[142,82,165,255],[95,0,127,255],[111,63,127,255],[57,0,76,255],[66,38,76,255],[28,0,38,255],[88,19,88,255],[255,0,255,255],[255,127,255,255],[165,0,165,255],[165,82,165,255],[127,0,127,255],[127,63,127,255],[76,0,76,255],[76,38,76,255],[38,0,38,255],[88,19,88,255],[255,0,191,255],[255,127,223,255],[165,0,124,255],[165,82,145,255],[127,0,95,255],[127,63,111,255],[76,0,57,255],[76,38,66,255],[38,0,28,255],[88,19,88,255],[255,0,127,255],[255,127,191,255],[165,0,82,255],[165,82,124,255],[127,0,63,255],[127,63,95,255],[76,0,38,255],[76,38,57,255],[38,0,19,255],[88,19,28,255],[255,0,63,255],[255,127,159,255],[165,0,41,255],[165,82,103,255],[127,0,31,255],[127,63,79,255],[76,0,19,255],[76,38,47,255],[38,0,9,255],[88,19,23,255],[0,0,0,255],[101,101,101,255],[102,102,102,255],[153,153,153,255],[204,204,204,255],[255,255,255,255]]},{}],54:[function(xt,Ct,_t){const{BYBLOCK:$t,BYLAYER:Vn}=xt("./autocad"),findLayer=(xt,Ct)=>{const _t=xt.lnam||"0";for(const xt of Ct)if(xt.name===_t)return xt;return null};Ct.exports={findLayer:findLayer,getColor:(xt,Ct)=>{if(xt<1)return null;const _t=Ct[xt=((xt,Ct)=>{const _t=xt%Ct;return Math.floor(_t>=0?_t:_t+Ct)})(xt,Ct.length)];return[_t[0]/255,_t[1]/255,_t[2]/255,_t[3]/255]},getColorNumber:(xt,Ct)=>{let _t=xt.cnmb||-1;if(_t===Vn){_t=-1;const $t=findLayer(xt,Ct);null!==$t&&(_t=$t.cnmb||-1)}return _t}}},{"./autocad":52}],55:[function(xt,Ct,_t){const $t=xt("./package.json").version,{BYLAYER:Vn,getTLA:Gn}=xt("./autocad"),or=xt("./colorindex2017"),lr=xt("./DxfReader"),{instantiateAsciiDxf:Fr}=xt("./instantiate"),Hr=xt("./translate"),handleError=(xt,Ct)=>{if(!0===xt.options.strict)throw Ct;console.log(`error: line ${Ct.line}, column ${Ct.column}, bad character [${Ct.c}]`)},handleStart=(xt,Ct)=>{},handleEnd=(xt,Ct)=>{},handleEntity=(xt,Ct,_t)=>{let $t=null;switch(_t){case"LAYER":($t={type:"layer"})[Gn(48)]=1,$t[Gn(60)]=0,$t[Gn(67)]=0,xt.objstack.push($t);break;case"LINE":($t={type:"line"})[Gn(48)]=1,$t[Gn(60)]=0,$t[Gn(62)]=Vn,$t[Gn(67)]=0,$t[Gn(210)]=0,$t[Gn(220)]=0,$t[Gn(230)]=0,xt.objstack.push($t);break;case"LWPOLYLINE":($t={type:"lwpolyline"})[Gn(48)]=1,$t[Gn(60)]=0,$t[Gn(62)]=Vn,$t[Gn(67)]=0,$t[Gn(38)]=0,$t[Gn(39)]=0,$t[Gn(43)]=0,$t[Gn(70)]=0,$t[Gn(90)]=0,$t[Gn(210)]=0,$t[Gn(220)]=0,$t[Gn(230)]=1,xt.objstack.push($t);break;case"MESH":($t={type:"mesh"})[Gn(48)]=1,$t[Gn(60)]=0,$t[Gn(62)]=Vn,$t[Gn(67)]=0,$t[Gn(91)]=0,$t[Gn(92)]=0,$t[Gn(93)]=0,$t[Gn(94)]=0,$t[Gn(95)]=0,$t.state=0,xt.objstack.push($t);break;case"POLYLINE":($t={type:"polyline"})[Gn(48)]=1,$t[Gn(60)]=0,$t[Gn(62)]=Vn,$t[Gn(67)]=0,$t[Gn(10)]=0,$t[Gn(20)]=0,$t[Gn(30)]=0,$t[Gn(39)]=0,$t[Gn(40)]=0,$t[Gn(41)]=0,$t[Gn(70)]=0,$t[Gn(71)]=0,$t[Gn(72)]=0,$t[Gn(73)]=0,$t[Gn(74)]=0,$t[Gn(75)]=0,$t[Gn(210)]=0,$t[Gn(220)]=0,$t[Gn(230)]=1,xt.objstack.push($t);break;case"ARC":($t={type:"arc"})[Gn(48)]=1,$t[Gn(60)]=0,$t[Gn(62)]=Vn,$t[Gn(67)]=0,$t[Gn(39)]=0,$t[Gn(210)]=0,$t[Gn(220)]=0,$t[Gn(230)]=1,xt.objstack.push($t);break;case"CIRCLE":($t={type:"circle"})[Gn(48)]=1,$t[Gn(60)]=0,$t[Gn(62)]=Vn,$t[Gn(67)]=0,$t[Gn(39)]=0,$t[Gn(210)]=0,$t[Gn(220)]=0,$t[Gn(230)]=1,xt.objstack.push($t);break;case"ELLIPSE":($t={type:"ellipse"})[Gn(48)]=1,$t[Gn(60)]=0,$t[Gn(62)]=Vn,$t[Gn(67)]=0,$t[Gn(210)]=0,$t[Gn(220)]=0,$t[Gn(230)]=1,xt.objstack.push($t);break;case"VERTEX":($t={type:"vertex"})[Gn(48)]=1,$t[Gn(60)]=0,$t[Gn(62)]=Vn,$t[Gn(67)]=0,$t[Gn(10)]=0,$t[Gn(20)]=0,$t[Gn(30)]=0,$t[Gn(40)]=0,$t[Gn(41)]=0,$t[Gn(42)]=0,$t[Gn(70)]=0,$t[Gn(71)]=0,$t[Gn(72)]=0,$t[Gn(73)]=0,$t[Gn(74)]=0,xt.objstack.push($t);break;case"3DFACE":($t={type:"3dface"})[Gn(48)]=1,$t[Gn(60)]=0,$t[Gn(62)]=Vn,$t[Gn(67)]=0,$t[Gn(70)]=0,xt.objstack.push($t);break;case"SEQEND":$t={type:"seqend"},xt.objstack.push($t);break;default:$t={},xt.objstack.push($t)}},handleVariable=(xt,Ct,_t)=>{const $t={type:"variable",name:_t};xt.objstack.push($t)},handleInt=(xt,Ct,_t)=>{const $t=xt.objstack.pop();"type"in $t&&($t[Gn(Ct)]=parseFloat(_t)),xt.objstack.push($t)},handleDouble=(xt,Ct,_t)=>{const $t=xt.objstack.pop();"type"in $t&&($t[Gn(Ct)]=parseFloat(_t)),xt.objstack.push($t)},handleXcoord=(xt,Ct,_t)=>{const $t=xt.objstack.pop();"type"in $t&&("lwpolyline"===$t.type?(void 0===$t.pptxs&&($t.pptxs=[],$t.bulgs=[]),$t.pptxs.push(parseFloat(_t)),$t.bulgs.push(0)):"mesh"===$t.type?(void 0===$t.pptxs&&($t.pptxs=[]),$t.pptxs.push(parseFloat(_t))):$t[Gn(Ct)]=parseFloat(_t)),xt.objstack.push($t)},handleYcoord=(xt,Ct,_t)=>{const $t=xt.objstack.pop();"type"in $t&&("lwpolyline"===$t.type||"mesh"===$t.type?(void 0===$t.pptys&&($t.pptys=[]),$t.pptys.push(parseFloat(_t))):$t[Gn(Ct)]=parseFloat(_t)),xt.objstack.push($t)},handleZcoord=(xt,Ct,_t)=>{const $t=xt.objstack.pop();"type"in $t&&("mesh"===$t.type?(void 0===$t.pptzs&&($t.pptzs=[]),$t.pptzs.push(parseFloat(_t))):$t[Gn(Ct)]=parseFloat(_t)),xt.objstack.push($t)},handleBulge=(xt,Ct,_t)=>{const $t=xt.objstack.pop();if("type"in $t)if("lwpolyline"===$t.type){const xt=$t.bulgs;void 0!==xt&&$t.pptxs.length===xt.length&&(xt[xt.length-1]=parseFloat(_t))}else $t[Gn(Ct)]=parseFloat(_t);xt.objstack.push($t)},handleLen=(xt,Ct,_t)=>{const $t=xt.objstack.pop();if("type"in $t)if("mesh"===$t.type){const xt=$t.state;switch(Ct){case 91:$t[Gn(Ct)]=parseFloat(_t),$t.state=1;break;case 92:1===xt?($t.vlen=parseFloat(_t),$t.state=2):($t.plen=parseFloat(_t),$t.state=6);break;case 93:$t[Gn(Ct)]=parseFloat(_t),$t.state=3;break;case 94:$t[Gn(Ct)]=parseFloat(_t),$t.state=4;break;case 95:$t[Gn(Ct)]=parseFloat(_t),$t.state=5;break;default:$t.state=7}}else $t[Gn(Ct)]=parseFloat(_t);xt.objstack.push($t)},handleValue=(xt,Ct,_t)=>{const $t=xt.objstack.pop();if("type"in $t)if("mesh"===$t.type)switch($t.state){case 3:void 0===$t.fvals&&($t.fvals=[]),$t.fvals.push(parseFloat(_t));break;case 4:void 0===$t.evals&&($t.evals=[]),$t.evals.push(parseFloat(_t))}else $t[Gn(Ct)]=parseFloat(_t);xt.objstack.push($t)},handleString=(xt,Ct,_t)=>{const $t=xt.objstack.pop();"type"in $t&&($t[Gn(Ct)]=_t),xt.objstack.push($t)},handleName=(xt,Ct,_t)=>{const $t=xt.objstack.pop();"type"in $t&&void 0===$t[Gn(Ct)]&&($t[Gn(Ct)]=_t),xt.objstack.push($t)},createReader=(xt,Ct)=>{const _t=lr.reader(Ct);return _t.on("error",handleError),_t.on("start",handleStart),_t.on("end",handleEnd),_t.absorb(0,handleEntity),_t.absorb(1,handleString),_t.absorb(2,handleName),_t.absorb(3,handleName),_t.absorb(6,handleString),_t.absorb(7,handleString),_t.absorb(8,handleString),_t.absorb(9,handleVariable),_t.absorb(10,handleXcoord),_t.absorb(11,handleDouble),_t.absorb(12,handleDouble),_t.absorb(13,handleDouble),_t.absorb(20,handleYcoord),_t.absorb(21,handleDouble),_t.absorb(22,handleDouble),_t.absorb(23,handleDouble),_t.absorb(30,handleZcoord),_t.absorb(31,handleDouble),_t.absorb(32,handleDouble),_t.absorb(33,handleDouble),_t.absorb(39,handleDouble),_t.absorb(40,handleDouble),_t.absorb(41,handleDouble),_t.absorb(42,handleBulge),_t.absorb(50,handleDouble),_t.absorb(51,handleDouble),_t.absorb(62,handleInt),_t.absorb(70,handleInt),_t.absorb(71,handleInt),_t.absorb(72,handleInt),_t.absorb(73,handleInt),_t.absorb(74,handleInt),_t.absorb(75,handleInt),_t.absorb(90,handleValue),_t.absorb(91,handleLen),_t.absorb(92,handleLen),_t.absorb(93,handleLen),_t.absorb(94,handleLen),_t.absorb(95,handleLen),_t.absorb(210,handleInt),_t.absorb(220,handleInt),_t.absorb(230,handleInt),_t.objstack=[],_t.objstack.push({type:"dxf"}),_t.write(xt).close(),_t};Ct.exports={deserialize:(xt,Ct)=>{const _t={filename:"dxf",version:$t,output:"script",strict:!0,colorindex:or,dxf:{angdir:0,insunits:4,pfacevmax:4}};return"script"===(xt=Object.assign({},_t,xt)).output?((xt,Ct)=>{const _t=createReader(xt,Ct);return`// Produced by JSCAD IO Library : DXF Deserializer (${Ct.version})\n\n`+Hr(_t,Ct)})(Ct,xt):((xt,Ct)=>{const _t=createReader(xt,Ct);return Fr(_t,Ct)})(Ct,xt)},extension:"dxf"}},{"./DxfReader":51,"./autocad":52,"./colorindex2017":53,"./instantiate":56,"./package.json":57,"./translate":58}],56:[function(xt,Ct,_t){const{geometries:$t,maths:Vn,primitives:Gn}=xt("@jscad/modeling"),{getColor:or,getColorNumber:lr}=xt("./helpers"),instantiatePolygon=(xt,Ct,_t)=>{const Gn=[];if(Gn.push(Vn.vec3.fromValues(xt.pptx,xt.ppty,xt.pptz)),Gn.push(Vn.vec3.fromValues(xt.sptx,xt.spty,xt.sptz)),Gn.push(Vn.vec3.fromValues(xt.tptx,xt.tpty,xt.tptz)),xt.fptx){let Ct=!1;xt.tptx!==xt.fptx&&(Ct=!0),xt.tpty!==xt.fpty&&(Ct=!0),xt.tptz!==xt.fptz&&(Ct=!0),Ct&&Gn.push(Vn.vec3.fromValues(xt.fptx,xt.fpty,xt.fptz))}const Fr=lr(xt,Ct),Hr=or(Fr,_t.colorindex),xo=$t.poly3.create(Gn);return Hr&&(xo.color=Hr),xo},instantiateLine=(xt,Ct,_t)=>{if(xt.pptz===xt.sptz&&0===xt.pptz){const Ct=Vn.vec2.fromValues(xt.pptx,xt.ppty),_t=Vn.vec2.fromValues(xt.sptx,xt.spty);return Gn.line([Ct,_t])}const $t=Vn.vec3.fromValues(xt.pptx,xt.ppty,xt.pptz),or=Vn.vec3.fromValues(xt.sptx,xt.spty,xt.sptz);return Gn.line([$t,or])},instantiateVector=xt=>{const Ct=parseInt("00000000000100000",2),_t=parseInt("00000000001000000",2),$t=parseInt("00000000010000000",2),Gn=xt.lflg,or={};return(Gn&Ct)===Ct||(Gn&_t)===_t?or.vec=Vn.vec3.fromValues(xt.pptx,xt.ppty,xt.pptz):(Gn&$t)===$t?(or.vec=Vn.vec3.fromValues(xt.pptx,xt.ppty,xt.pptz),or.fvia=xt.fvia,or.fvib=xt.fvib,or.fvic=xt.fvic,or.fvid=xt.fvid):(or.vec=Vn.vec2.fromValues(xt.pptx,xt.ppty),or.bulg=xt.bulg),or},addSection=(xt,Ct,_t,Gn)=>{if(0===Gn)xt=$t.path2.appendPoints([[Ct,_t]],xt);else{const or=$t.path2.toPoints(xt),lr=or[or.length-1],Fr=Vn.vec2.fromValues(Ct,_t),Hr=Vn.vec2.distance(lr,Fr)*((1+Math.pow(Gn,2))/(4*Gn)),xo=Gn<0,Eo=!1,Mo=4*Math.atan(Gn),Oo=16;xt=$t.path2.appendArc({endpoint:[Ct,_t],radius:[Hr,Hr],xaxisrotation:Mo,clockwise:xo,large:Eo,segments:Oo},xt)}return xt},instantiatePath2D=(xt,Ct,_t)=>{const Vn=parseInt("00000000000000001",2),Gn=xt.vlen,or=xt.pptxs,lr=xt.pptys,Fr=xt.bulgs,Hr=xt.lflg;let xo=$t.path2.create();const Eo=(Hr&Vn)===Vn;return Gn!==or.length||Gn!==lr.length||Gn!==Fr.length||(or.forEach(((xt,Ct,_t)=>{let $t=0;Ct>0&&($t=Fr[Ct-1]),xo=addSection(xo,or[Ct],lr[Ct],$t)})),Eo&&!xo.isClosed&&(xo=addSection(xo,or[0],lr[0],Fr[Gn-1]),xo=$t.path2.close(xo))),xo},instantiateArc=(xt,Ct,_t)=>{xt.lthk;const $t=xt.pptx,Vn=xt.ppty,or=xt.swid;let lr=xt.ang0;lr*=.017453292519943295;let Fr=xt.ang1;return Fr*=.017453292519943295,Gn.arc({center:[$t,Vn],radius:or,startAngle:lr,endAngle:Fr,segments:16})},instantiateCircle=(xt,Ct,_t)=>{const $t=xt.lthk,Vn=xt.pptx,Fr=xt.ppty,Hr=xt.swid,xo=lr(xt,Ct),Eo=or(xo,_t.colorindex);if(0===$t){const xt=Gn.circle({center:[Vn,Fr],radius:Hr,segments:16});return Eo&&(xt.color=Eo),xt}const Mo=Gn.circle({center:[Vn,Fr],radius:Hr,segments:16}).extrude({offset:[0,0,$t]});return Eo&&(Mo.color=Eo),Mo},instantiateEllipse=(xt,Ct,_t)=>{const or=xt.pptx,lr=xt.ppty,Fr=xt.pptz,Hr=xt.sptx,xo=xt.spty,Eo=xt.sptz,Mo=xt.swid;if(0===Fr&&0===Eo){const xt=Vn.vec2.fromValues(0,0),Ct=Vn.vec2.fromValues(Hr,xo),_t=Vn.vec2.distance(xt,Ct),Fr=_t*Mo;let Eo=180*Math.atan2(xo,Hr)/Math.PI;Eo<1e-5&&(Eo=0),Eo*=.017453292519943295;const Oo=Gn.ellipse({center:[0,0],radius:[_t,Fr],segments:16}),Ro=Vn.mat4.fromZRotation(Vn.mat4.create(),Eo);return Vn.mat4.multiply(Ro,Ro,Vn.mat4.fromTranslation(Vn.mat4.create(),[or,lr,0])),$t.geom2.transform(Ro,Oo)}},instantiateMesh=(xt,Ct,_t)=>{const Gn=xt.vlen,Fr=xt.pptxs,Hr=xt.pptys,xo=xt.pptzs,Eo=xt.flen,Mo=xt.fvals,Oo=lr(xt,Ct),Ro=or(Oo,_t.colorindex),Io=[];if(Gn===Fr.length&&Gn===Hr.length&&Gn===xo.length&&Eo===Mo.length){const xt=(xt=>{const Ct=[];let _t=0;for(;_t<xt.length;){let $t=xt[_t++];const Vn=[];for(;$t>0;)Vn.push(xt[_t++]),$t--;Ct.push(Vn)}return Ct})(Mo),Ct=((xt,Ct,_t)=>{const $t=[];let Vn=0;for(;Vn<xt.length;){const Gn=xt[Vn],or=Ct[Vn],lr=_t[Vn];$t.push([Gn,or,lr]),Vn++}return $t})(Fr,Hr,xo);let Gn=0;for(;Gn<xt.length;){const or=xt[Gn];let lr=[],Fr=0;for(;Fr<or.length;){const xt=or[Fr],_t=Vn.vec3.clone(Ct[xt]);lr.push(_t),Fr++}1===_t.dxf.angdir&&(lr=lr.reverse());const Hr=$t.poly3.create(lr);Ro&&(Hr.color=Ro),Io.push(Hr),Gn++}}return $t.geom3.create(Io)},getPolyType=xt=>{const Ct=parseInt("00000000000000001",2),_t=parseInt("00000000000001000",2),Vn=parseInt("00000000000010000",2),Gn=parseInt("00000000000100000",2),or=parseInt("00000000001000000",2),lr=xt.lflg;let Fr=null;return(lr&_t)===_t?Fr=null:(lr&Vn)===Vn||(lr&or)===or?((Fr=$t.geom3.create()).closedM=(lr&Ct)===Ct,Fr.closedN=(lr&Gn)===Gn):(Fr=$t.path2.create()).closedM=(lr&Ct)===Ct,"cnmb"in xt&&(Fr.cnmb=xt.cnmb),Fr},completeCurrent=(xt,Ct,_t,Vn,Gn)=>{if($t.path2.isA(Ct)){const _t=Vn.map((xt=>xt.vec));xt.push($t.path2.fromPoints({closed:Ct.closed},_t))}return $t.geom3.isA(Ct)&&xt.push($t.geom3.create(_t)),null};Ct.exports={instantiatePolygon:instantiatePolygon,instantiateVector:instantiateVector,instantiateAsciiDxf:(xt,Ct)=>{const _t=[];let Vn=null;const Gn=[],or=[],lr=[];let Fr=null;for(const Hr of xt.objstack)if(Fr=null,"type"in Hr){switch(Hr.type){case"dxf":break;case"layer":Vn=completeCurrent(or,Vn,Gn,lr),_t.push(Hr);break;case"variable":case"seqend":Vn=completeCurrent(or,Vn,Gn,lr);break;case"3dface":Fr=instantiatePolygon(Hr,_t,Ct),null===Vn&&(Vn=$t.geom3.create());break;case"mesh":Vn=completeCurrent(or,Vn,Gn,lr),or.push(instantiateMesh(Hr,_t,Ct));break;case"arc":Vn=completeCurrent(or,Vn,Gn,lr),or.push(instantiateArc(Hr));break;case"circle":Vn=completeCurrent(or,Vn,Gn,lr),or.push(instantiateCircle(Hr,_t,Ct));break;case"ellipse":Vn=completeCurrent(or,Vn,Gn,lr),or.push(instantiateEllipse(Hr));break;case"line":Vn=completeCurrent(or,Vn,Gn,lr),or.push(instantiateLine(Hr));break;case"polyline":null===(Vn=completeCurrent(or,Vn,Gn,lr))&&(Vn=getPolyType(Hr));break;case"vertex":Fr=instantiateVector(Hr);break;case"lwpolyline":Vn=completeCurrent(or,Vn,Gn,lr),or.push(instantiatePath2D(Hr))}$t.poly3.isA(Fr)&&Gn.push(Fr),Fr&&"vec"in Fr&&3===Fr.vec.length&&lr.push(Fr),Fr&&"vec"in Fr&&2===Fr.vec.length&&lr.push(Fr)}return Vn=completeCurrent(or,Vn,Gn,lr),or}}},{"./helpers":54,"@jscad/modeling":210}],57:[function(xt,Ct,_t){Ct.exports={name:"@jscad/dxf-deserializer",version:"2.3.23",description:"DXF Deserializer for JSCAD",homepage:"https://openjscad.xyz/",repository:"https://github.com/jscad/OpenJSCAD.org",main:"index.js",scripts:{coverage:"nyc --all --reporter=html --reporter=text npm test",test:"ava --verbose --timeout 2m './tests/test*.js'"},contributors:[{name:"z3dev",url:"http://www.z3d.jp"},{name:"Mark 'kaosat-dev' Moissette",url:"http://kaosat.net"}],keywords:["openjscad","jscad","import","deserializer","dxf"],license:"MIT",dependencies:{"@jscad/modeling":"2.12.1"},devDependencies:{ava:"3.15.0",nyc:"15.1.0"},gitHead:"a90b9bad95a417661c619dc733e62c587dc71a4a"}},{}],58:[function(xt,Ct,_t){const{maths:$t,geometries:Vn}=xt("@jscad/modeling"),{instantiatePolygon:Gn,instantiateVector:or}=xt("./instantiate"),{findLayer:lr,getColor:Fr,getColorNumber:Hr}=xt("./helpers"),translateVector2D=xt=>`${xt[0]},${xt[1]}`,translateVector3D=xt=>`${xt[0]},${xt[1]},${xt[2]}`,translatePolygon=xt=>{const Ct=Vn.poly3.toPoints(xt);let _t="createPolygon([";return Ct.forEach((xt=>{_t+=`[${translateVector3D(xt)}],`})),_t+=`],${translateColor(xt)})`},translateColor=xt=>{let Ct="null";if("color"in xt){const _t=xt.color;Ct=`[${_t[0]},${_t[1]},${_t[2]},${_t[3]}]`}return Ct},translateLine=(xt,Ct,_t)=>{const Vn=xt.name,Gn=Hr(xt,Ct),or=Fr(Gn,_t.colorindex);let lr="";if(!xt.pptz||xt.pptz===xt.sptz&&0===xt.pptz){const Ct=$t.vec2.fromValues(xt.pptx,xt.ppty),_t=$t.vec2.fromValues(xt.sptx,xt.spty);lr=`  let ${Vn} = primitives.line([[${translateVector2D(Ct)}],[${translateVector2D(_t)}]])\n`}else{const Ct=$t.vec3.fromValues(xt.pptx,xt.ppty,xt.pptz),_t=$t.vec3.fromValues(xt.sptx,xt.spty,xt.sptz);lr=`  let ${Vn} = primitives.line([[${translateVector3D(Ct)}],[${translateVector3D(_t)}]])\n`}or&&(lr+=`  ${Vn} = colors.colorize([${or[0]}, ${or[1]}, ${or[2]}, 1], ${Vn})\n`),xt.script=lr,addToLayer(xt,Ct)},translateSection=(xt,Ct,_t,Vn,Gn,or)=>{if(0===Vn)return`geometries.path2.appendPoints([[${Ct},${_t}]], ${xt})\n`;const lr=$t.vec2.fromValues(Gn,or),Fr=$t.vec2.fromValues(Ct,_t),Hr=$t.vec2.distance(lr,Fr)*((1+Math.pow(Vn,2))/(4*Vn)),xo=Vn<0;return`geometries.path2.appendArc({endpoint: [${Ct},${_t}],radius: [${Hr},${Hr}],xaxisrotation: ${4*Math.atan(Vn)},clockwise: ${xo},large: false,segments: 16}, ${xt})\n`},translatePath2D=(xt,Ct,_t)=>{const $t=parseInt("00000000000000001",2),Vn=xt.vlen,Gn=xt.pptxs,or=xt.pptys,lr=xt.bulgs,xo=xt.lflg,Eo=xt.name,Mo=Hr(xt,Ct),Oo=Fr(Mo,_t.colorindex);let Ro=`  let ${Eo} = geometries.path2.create()\n`;const Io=(xo&$t)===$t;if(Vn===Gn.length&&Vn===or.length&&Vn===lr.length){Ro+=`  ${Eo} = geometries.path2.appendPoints([[${Gn[0]}, ${or[0]}]], ${Eo})\n`;for(let xt=0;xt<Gn.length;xt++){const Ct=(xt+1)%Gn.length,_t=Gn[Ct],$t=or[Ct],Vn=Gn[xt],Fr=or[xt],Hr=lr[xt];(0!==Ct||0!==Hr)&&(Ro+=`  ${Eo} = ${translateSection(Eo,_t,$t,Hr,Vn,Fr)}`)}Ro+=Io?`  ${Eo} = geometries.path2.close(${Eo})\n`:"\n",Oo&&(Ro+=`  ${Eo} = colors.colorize([${Oo[0]}, ${Oo[1]}, ${Oo[2]}, 1], ${Eo})\n`),xt.script=Ro,addToLayer(xt,Ct)}},translateArc=(xt,Ct,_t)=>{const $t=xt.lthk,Vn=xt.pptx,Gn=xt.ppty,or=xt.swid;let lr=xt.ang0,xo=xt.ang1;const Eo=xt.name,Mo=Hr(xt,Ct),Oo=Fr(Mo,_t.colorindex);if(lr*=.017453292519943295,xo*=.017453292519943295,0===$t){let _t=`  let ${Eo} = primitives.arc({center: [${Vn}, ${Gn}], radius: ${or}, startAngle: ${lr}, endAngle: ${xo}, segements: 16})\n`;return Oo&&(_t+=`  ${Eo} = colors.colorize([${Oo[0]}, ${Oo[1]}, ${Oo[2]}, 1], ${Eo})\n`),xt.script=_t,void addToLayer(xt,Ct)}let Ro=`  let ${Eo} = primitives.arc({center: [${Vn}, ${Gn}], radius: ${or}, startAngle: ${lr}, endAngle: ${xo}, segements: 16})\n`;Oo&&(Ro+=`  ${Eo} = colors.colorize([${Oo[0]}, ${Oo[1]}, ${Oo[2]}, 1], ${Eo})\n`),xt.script=Ro,addToLayer(xt,Ct)},translateCircle=(xt,Ct,_t)=>{const $t=xt.lthk,Vn=xt.pptx,Gn=xt.ppty,or=xt.swid,lr=xt.name,xo=Hr(xt,Ct),Eo=Fr(xo,_t.colorindex);if(0===$t){let _t=`  let ${lr} = primitives.circle({center: [${Vn}, ${Gn}], radius: ${or}, segments: 16})\n`;return Eo&&(_t+=`  ${lr} = colors.colorize([${Eo[0]}, ${Eo[1]}, ${Eo[2]}, 1], ${lr})\n`),xt.script=_t,void addToLayer(xt,Ct)}let Mo=`  let ${lr} = primitives.circle({center: [${Vn}, ${Gn}], radius: ${or}, segments: 16}).extrude({offset: [0,0,${$t}]}))\n`;Eo&&(Mo+=`  ${lr} = colors.colorize([${Eo[0]}, ${Eo[1]}, ${Eo[2]}, 1], ${lr})\n`),xt.script=Mo,addToLayer(xt,Ct)},translateEllipse=(xt,Ct,_t)=>{const Vn=xt.pptx,Gn=xt.ppty,or=xt.pptz,lr=xt.sptx,xo=xt.spty,Eo=xt.sptz,Mo=xt.swid,Oo=xt.name,Ro=Hr(xt,Ct),Io=Fr(Ro,_t.colorindex);if(0===or&&0===Eo){const _t=$t.vec2.fromValues(0,0),or=$t.vec2.fromValues(lr,xo),Fr=$t.vec2.distance(_t,or);let Hr=`  let ${Oo} = primitives.ellipse({center: [0, 0, 0], radius: [${Fr}, ${Fr*Mo}], segments: 16})\n  let ${Oo}matrix = maths.mat4.multiply(maths.mat4.create(), maths.mat4.fromTranslation(maths.mat4.create(), [${Vn}, ${Gn}, 0]), maths.mat4.fromZRotation(maths.mat4.create(), ${Math.atan2(xo,lr)}))\n  ${Oo} = geometries.geom2.transform(${Oo}matrix, ${Oo})\n`;Io&&(Hr+=`  ${Oo} = colors.colorize([${Io[0]}, ${Io[1]}, ${Io[2]}, 1], ${Oo})\n`),xt.script=Hr,addToLayer(xt,Ct)}},translateMesh=(xt,Ct,_t)=>{const Gn=xt.vlen,or=xt.pptxs,lr=xt.pptys,xo=xt.pptzs,Eo=xt.flen,Mo=xt.fvals,Oo=Hr(xt,Ct),Ro=Fr(Oo,_t.colorindex),Io=[];if(Gn===or.length&&Gn===lr.length&&Gn===xo.length)if(Eo===Mo.length){const xt=(xt=>{const Ct=[];let _t=0;for(;_t<xt.length;){let $t=xt[_t++];const Vn=[];for(;$t>0;)Vn.push(xt[_t++]),$t--;Ct.push(Vn)}return Ct})(Mo),Ct=((xt,Ct,_t)=>{const $t=[];let Vn=0;for(;Vn<xt.length;){const Gn=xt[Vn],or=Ct[Vn],lr=_t[Vn];$t.push([Gn,or,lr]),Vn++}return $t})(or,lr,xo);let Gn=0;for(;Gn<xt.length;){const or=xt[Gn];let lr=[],Fr=0;for(;Fr<or.length;){const xt=or[Fr],_t=$t.vec3.clone(Ct[xt]);lr.push(_t),Fr++}1===_t.dxf.angdir&&(lr=lr.reverse());const Hr=Vn.poly3.create(lr);Ro&&(Hr.color=Ro),Io.push(Hr),Gn++}}else console.warn("invalid mesh: faces");else console.warn("invalid mesh: vertices");const Bo=xt.name;let zo=`  const ${Bo}_polygons = [\n`;for(const xt of Io)zo+="    "+translatePolygon(xt)+",\n";return zo+=`  ]\n  let ${Bo} = geometries.geom3.create(${Bo}_polygons)\n`,xt.script=zo,addToLayer(xt,Ct),null},addToLayer=(xt,Ct)=>{let _t=lr(xt,Ct);null===_t&&(_t=(xt=>{for(const Ct of xt)if("0"===Ct.name)return Ct;const Ct={type:"layer",lnam:"layer0",name:"0",lscl:1,visb:0,spac:0,objects:[]};return xt.push(Ct),Ct})(Ct)),"objects"in _t||(_t.objects=[]),_t.objects.push(xt)},getPolyType=xt=>{const Ct=parseInt("00000000000000001",2),_t=parseInt("00000000000001000",2),$t=parseInt("00000000000010000",2),Vn=parseInt("00000000000100000",2),Gn=parseInt("00000000001000000",2),or=xt.lflg;let lr=null;return(or&_t)===_t?lr={type:"3dline",isclosed:(or&Ct)===Ct}:(or&$t)===$t?((lr={type:"3dpolymesh"}).fvia=xt.fvia,lr.fvib=xt.fvib,lr.closedM=(or&Ct)===Ct,lr.closedN=(or&Vn)===Vn):(or&Gn)===Gn?((lr={type:"3dpolyfaces"}).fvia=xt.fvia,lr.fvib=xt.fvib):lr={type:"2dline",isclosed:(or&Ct)===Ct},"cnmb"in xt&&(lr.cnmb=xt.cnmb),"lnam"in xt&&(lr.lnam=xt.lnam),lr},translateCurrent=(xt,Ct,_t,$t)=>{if(null===xt)return null;const Gn=xt.type,or=Hr(xt,Ct),lr=Fr(or,$t.colorindex);if("2dline"===Gn)return((xt,Ct,_t,$t)=>{xt.vlen=_t.length,xt.pptxs=[],xt.pptys=[],xt.bulgs=[];for(const Ct of _t)xt.pptxs.push(Ct.vec[0]),xt.pptys.push(Ct.vec[1]),xt.bulgs.push(Ct.bulg);return xt.isclosed?xt.lflg=parseInt("00000000000000001",2):xt.lflg=0,translatePath2D(xt,Ct,$t),null})(xt,Ct,_t,$t);if("3dline"===Gn)return null;if("3dpolymesh"===Gn){_t=((xt,Ct,_t,$t,Gn)=>{const a=(xt,$t)=>_t[(xt-1)*Ct+($t-1)].vec,or=[];if(xt*Ct!==_t.length)return or;if(xt<2|Ct<2)return or;let lr=1;for(;lr<xt;){let xt=1;for(;xt<Ct;){let Ct=[a(lr,xt),a(lr+1,xt),a(lr+1,xt+1),a(lr,xt+1)];1===Gn.dxf.angdir&&(Ct=Ct.reverse());const _t=Vn.poly3.create(Ct),Fr=Vn.poly3.plane(_t);Number.isFinite(Fr[3])&&($t&&(_t.color=$t),or.push(_t)),xt++}lr++}return or})(xt.fvia,xt.fvib,_t,lr,$t)}if("3dpolyfaces"===Gn&&"fvia"in xt){_t=((xt,Ct,_t,$t,Gn)=>{const or=[];if(xt+Ct!==_t.length)return or;let lr=xt;for(;lr<_t.length;){let xt=_t[lr];const Ct=[Math.abs(xt.fvia),Math.abs(xt.fvib),Math.abs(xt.fvic),Math.abs(xt.fvid)];let $t=[];if(Ct[0]>0&&(xt=_t[Ct[0]-1],$t.push(xt.vec),Ct[1]>0&&(xt=_t[Ct[1]-1],$t.push(xt.vec),Ct[2]>0&&(xt=_t[Ct[2]-1],$t.push(xt.vec),Ct[3]>0&&(xt=_t[Ct[3]-1],$t.push(xt.vec))))),$t.length>2){1===Gn.dxf.angdir&&($t=$t.reverse());const xt=Vn.poly3.create($t);or.push(xt)}lr++}return or})(xt.fvia,xt.fvib,_t,0,$t)}const xo=xt.name;let Eo=`  const ${xo}_polygons = [\n`;for(const xt of _t)Eo+="    "+translatePolygon(xt)+",\n";return Eo+=`  ]\n  let ${xo} = geometries.geom3.create(${xo}_polygons)\n`,lr&&(Eo+=`  ${xo}.color = [${lr}]\n`),xt.script=Eo,addToLayer(xt,Ct),null},saveVariable=(xt,Ct)=>{if("$ANGDIR"===(xt.name||"Unknown"))"lflg"in xt&&(Ct.dxf.angdir=xt.lflg)};Ct.exports=(xt,Ct)=>{const _t=[];let $t=null,lr=[],Fr=0,Hr=null;for(const xo of xt.objstack)if(Hr=null,"type"in xo){if("name"in xo){let xt=xo.name;xt=(xt=(xt=xt.replace(/ /g,"_")).replace(/-/g,"_")).replace(/\./g,"_"),xo.name=xt}else xo.name="jscad"+Fr,Fr+=1;switch(xo.type){case"dxf":break;case"layer":$t=translateCurrent($t,_t,lr,Ct),lr=[],xo.objects=[],xo.lnam="layer"+_t.length,_t.push(xo);break;case"variable":$t=translateCurrent($t,_t,lr,Ct),lr=[],saveVariable(xo,Ct);break;case"3dface":Hr=Gn(xo,_t,Ct),null===$t&&(($t={type:"3dfaces"}).name="jscad"+Fr,Fr+=1);break;case"mesh":$t=translateCurrent($t,_t,lr,Ct),lr=[],translateMesh(xo,_t,Ct);break;case"arc":$t=translateCurrent($t,_t,lr,Ct),lr=[],translateArc(xo,_t,Ct);break;case"circle":$t=translateCurrent($t,_t,lr,Ct),lr=[],translateCircle(xo,_t,Ct);break;case"ellipse":$t=translateCurrent($t,_t,lr,Ct),lr=[],translateEllipse(xo,_t,Ct);break;case"line":$t=translateCurrent($t,_t,lr,Ct),lr=[],translateLine(xo,_t,Ct);break;case"polyline":$t=translateCurrent($t,_t,lr,Ct),lr=[],null===$t&&(($t=getPolyType(xo)).name="jscad"+Fr,Fr+=1);break;case"vertex":Hr=or(xo);break;case"seqend":$t=translateCurrent($t,_t,lr,Ct),lr=[];break;case"lwpolyline":$t=translateCurrent($t,_t,lr,Ct),lr=[],translatePath2D(xo,_t,Ct)}Vn.poly3.isA(Hr)&&lr.push(Hr),Hr&&"vec"in Hr&&3===Hr.vec.length&&lr.push(Hr),Hr&&"vec"in Hr&&2===Hr.vec.length&&lr.push(Hr)}$t=translateCurrent($t,_t,lr,Ct);let xo="const {colors, geometries, maths, primitives, transforms} = require('@jscad/modeling')\n\nconst main = () => {\n  let layers = []\n  return layers.concat(";return _t.forEach((xt=>{const Ct=xt.lnam||"Unknown";xo+=`${Ct}(),`})),xo+="[])\n}\n",xo+="\nfunction createPolygon(listofpoints, color) {\n  let polygon = geometries.poly3.fromPoints(listofpoints)\n  if (color) polygon.color = color\n  return polygon\n}\n",_t.forEach((xt=>{xo+=(xt=>{let Ct=`function ${xt.lnam||"Unknown"}() {\n`;for(const _t of xt.objects)Ct+=_t.script;Ct+="  return [";for(const _t of xt.objects)Ct+=_t.name+",";return Ct+"]\n}\n"})(xt)})),xo+="module.exports = {main}\n"}},{"./helpers":54,"./instantiate":56,"@jscad/modeling":210}],59:[function(xt,Ct,_t){Ct.exports={dxfHeaders:function(){return"  0\nSECTION\n  2\nHEADER\n  9\n$ACADVER\n  1\nAC1027\n  9\n$ACADMAINTVER\n 70\n8\n  9\n$DWGCODEPAGE\n  3\nANSI_1252\n  9\n$LASTSAVEDBY\n  1\nunknown\n  9\n$REQUIREDVERSIONS\n160\n0\n  9\n$INSBASE\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$EXTMIN\n 10\n1e+20\n 20\n1e+20\n 30\n1e+20\n  9\n$EXTMAX\n 10\n-1e+20\n 20\n-1e+20\n 30\n-1e+20\n  9\n$LIMMIN\n 10\n0.0\n 20\n0.0\n  9\n$LIMMAX\n 10\n12.0\n 20\n9.0\n  9\n$ORTHOMODE\n 70\n0\n  9\n$REGENMODE\n 70\n1\n  9\n$FILLMODE\n 70\n1\n  9\n$QTEXTMODE\n 70\n0\n  9\n$MIRRTEXT\n 70\n0\n  9\n$LTSCALE\n 40\n1.0\n  9\n$ATTMODE\n 70\n1\n  9\n$TEXTSIZE\n 40\n0.2\n  9\n$TRACEWID\n 40\n0.05\n  9\n$TEXTSTYLE\n  7\nNotes\n  9\n$CLAYER\n  8\n0\n  9\n$CELTYPE\n  6\nByLayer\n  9\n$CECOLOR\n 62\n256\n  9\n$CELTSCALE\n 40\n1.0\n  9\n$DISPSILH\n 70\n0\n  9\n$DIMSCALE\n 40\n1.0\n  9\n$DIMASZ\n 40\n3.0\n  9\n$DIMEXO\n 40\n1.5\n  9\n$DIMDLI\n 40\n6.0\n  9\n$DIMRND\n 40\n0.0\n  9\n$DIMDLE\n 40\n0.0\n  9\n$DIMEXE\n 40\n3.0\n  9\n$DIMTP\n 40\n0.0\n  9\n$DIMTM\n 40\n0.0\n  9\n$DIMTXT\n 40\n3.0\n  9\n$DIMCEN\n 40\n3.0\n  9\n$DIMTSZ\n 40\n0.0\n  9\n$DIMTOL\n 70\n0\n  9\n$DIMLIM\n 70\n0\n  9\n$DIMTIH\n 70\n0\n  9\n$DIMTOH\n 70\n0\n  9\n$DIMSE1\n 70\n0\n  9\n$DIMSE2\n 70\n0\n  9\n$DIMTAD\n 70\n1\n  9\n$DIMZIN\n 70\n3\n  9\n$DIMBLK\n  1\n\n  9\n$DIMASO\n 70\n1\n  9\n$DIMSHO\n 70\n1\n  9\n$DIMPOST\n  1\n\n  9\n$DIMAPOST\n  1\n\n  9\n$DIMALT\n 70\n0\n  9\n$DIMALTD\n 70\n2\n  9\n$DIMALTF\n 40\n25.4\n  9\n$DIMLFAC\n 40\n1.0\n  9\n$DIMTOFL\n 70\n0\n  9\n$DIMTVP\n 40\n0.0\n  9\n$DIMTIX\n 70\n0\n  9\n$DIMSOXD\n 70\n0\n  9\n$DIMSAH\n 70\n0\n  9\n$DIMBLK1\n  1\n\n  9\n$DIMBLK2\n  1\n\n  9\n$DIMSTYLE\n  2\nCivil-Metric\n  9\n$DIMCLRD\n 70\n0\n  9\n$DIMCLRE\n 70\n0\n  9\n$DIMCLRT\n 70\n0\n  9\n$DIMTFAC\n 40\n1.0\n  9\n$DIMGAP\n 40\n2.0\n  9\n$DIMJUST\n 70\n0\n  9\n$DIMSD1\n 70\n0\n  9\n$DIMSD2\n 70\n0\n  9\n$DIMTOLJ\n 70\n1\n  9\n$DIMTZIN\n 70\n0\n  9\n$DIMALTZ\n 70\n0\n  9\n$DIMALTTZ\n 70\n0\n  9\n$DIMUPT\n 70\n0\n  9\n$DIMDEC\n 70\n2\n  9\n$DIMTDEC\n 70\n2\n  9\n$DIMALTU\n 70\n2\n  9\n$DIMALTTD\n 70\n2\n  9\n$DIMTXSTY\n  7\nStandard\n  9\n$DIMAUNIT\n 70\n0\n  9\n$DIMADEC\n 70\n2\n  9\n$DIMALTRND\n 40\n0.0\n  9\n$DIMAZIN\n 70\n2\n  9\n$DIMDSEP\n 70\n46\n  9\n$DIMATFIT\n 70\n3\n  9\n$DIMFRAC\n 70\n1\n  9\n$DIMLDRBLK\n  1\n\n  9\n$DIMLUNIT\n 70\n2\n  9\n$DIMLWD\n 70\n-2\n  9\n$DIMLWE\n 70\n-2\n  9\n$DIMTMOVE\n 70\n0\n  9\n$DIMFXL\n 40\n1.0\n  9\n$DIMFXLON\n 70\n0\n  9\n$DIMJOGANG\n 40\n0.785398163397\n  9\n$DIMTFILL\n 70\n0\n  9\n$DIMTFILLCLR\n 70\n0\n  9\n$DIMARCSYM\n 70\n0\n  9\n$DIMLTYPE\n  6\n\n  9\n$DIMLTEX1\n  6\n\n  9\n$DIMLTEX2\n  6\n\n  9\n$DIMTXTDIRECTION\n 70\n0\n  9\n$LUNITS\n 70\n2\n  9\n$LUPREC\n 70\n4\n  9\n$SKETCHINC\n 40\n0.1\n  9\n$FILLETRAD\n 40\n0.0\n  9\n$AUNITS\n 70\n4\n  9\n$AUPREC\n 70\n5\n  9\n$MENU\n  1\n.\n  9\n$ELEVATION\n 40\n0.0\n  9\n$PELEVATION\n 40\n0.0\n  9\n$THICKNESS\n 40\n0.0\n  9\n$LIMCHECK\n 70\n0\n  9\n$CHAMFERA\n 40\n0.0\n  9\n$CHAMFERB\n 40\n0.0\n  9\n$CHAMFERC\n 40\n0.0\n  9\n$CHAMFERD\n 40\n0.0\n  9\n$SKPOLY\n 70\n0\n  9\n$TDCREATE\n 40\n2457986.69756\n  9\n$TDUCREATE\n 40\n2455631.2632\n  9\n$TDUPDATE\n 40\n2457986.69756\n  9\n$TDUUPDATE\n 40\n2456436.43179\n  9\n$TDINDWG\n 40\n0.0003490741\n  9\n$TDUSRTIMER\n 40\n0.0003487153\n  9\n$USRTIMER\n 70\n1\n  9\n$ANGBASE\n 50\n0.0\n  9\n$ANGDIR\n 70\n0\n  9\n$PDMODE\n 70\n0\n  9\n$PDSIZE\n 40\n0.0\n  9\n$PLINEWID\n 40\n0.0\n  9\n$SPLFRAME\n 70\n0\n  9\n$SPLINETYPE\n 70\n6\n  9\n$SPLINESEGS\n 70\n8\n  9\n$HANDSEED\n  5\n5C7\n  9\n$SURFTAB1\n 70\n6\n  9\n$SURFTAB2\n 70\n6\n  9\n$SURFTYPE\n 70\n6\n  9\n$SURFU\n 70\n6\n  9\n$SURFV\n 70\n6\n  9\n$UCSBASE\n  2\n\n  9\n$UCSNAME\n  2\n\n  9\n$UCSORG\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSXDIR\n 10\n1.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSYDIR\n 10\n0.0\n 20\n1.0\n 30\n0.0\n  9\n$UCSORTHOREF\n  2\n\n  9\n$UCSORTHOVIEW\n 70\n0\n  9\n$UCSORGTOP\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGBOTTOM\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGLEFT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGRIGHT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGFRONT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGBACK\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSBASE\n  2\n\n  9\n$PUCSNAME\n  2\n\n  9\n$PUCSORG\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSXDIR\n 10\n1.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSYDIR\n 10\n0.0\n 20\n1.0\n 30\n0.0\n  9\n$PUCSORTHOREF\n  2\n\n  9\n$PUCSORTHOVIEW\n 70\n0\n  9\n$PUCSORGTOP\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGBOTTOM\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGLEFT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGRIGHT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGFRONT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGBACK\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$USERI1\n 70\n0\n  9\n$USERI2\n 70\n0\n  9\n$USERI3\n 70\n0\n  9\n$USERI4\n 70\n0\n  9\n$USERI5\n 70\n0\n  9\n$USERR1\n 40\n0.0\n  9\n$USERR2\n 40\n0.0\n  9\n$USERR3\n 40\n0.0\n  9\n$USERR4\n 40\n0.0\n  9\n$USERR5\n 40\n0.0\n  9\n$WORLDVIEW\n 70\n1\n  9\n$SHADEDGE\n 70\n3\n  9\n$SHADEDIF\n 70\n70\n  9\n$TILEMODE\n 70\n1\n  9\n$MAXACTVP\n 70\n64\n  9\n$PINSBASE\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PLIMCHECK\n 70\n0\n  9\n$PEXTMIN\n 10\n0.628866766397\n 20\n0.799999952316\n 30\n0.0\n  9\n$PEXTMAX\n 10\n9.02886638493\n 20\n7.19999957085\n 30\n0.0\n  9\n$PLIMMIN\n 10\n-0.700541819174\n 20\n-0.228100386192\n  9\n$PLIMMAX\n 10\n10.2994579405\n 20\n8.27189937351\n  9\n$UNITMODE\n 70\n0\n  9\n$VISRETAIN\n 70\n1\n  9\n$PLINEGEN\n 70\n0\n  9\n$PSLTSCALE\n 70\n1\n  9\n$TREEDEPTH\n 70\n3020\n  9\n$CMLSTYLE\n  2\nStandard\n  9\n$CMLJUST\n 70\n0\n  9\n$CMLSCALE\n 40\n1.0\n  9\n$PROXYGRAPHICS\n 70\n1\n  9\n$MEASUREMENT\n 70\n1\n  9\n$CELWEIGHT\n370\n-1\n  9\n$ENDCAPS\n280\n0\n  9\n$JOINSTYLE\n280\n0\n  9\n$LWDISPLAY\n290\n0\n  9\n$INSUNITS\n 70\n4\n  9\n$HYPERLINKBASE\n  1\n\n  9\n$STYLESHEET\n  1\n\n  9\n$XEDIT\n290\n1\n  9\n$CEPSNTYPE\n380\n0\n  9\n$PSTYLEMODE\n290\n1\n  9\n$FINGERPRINTGUID\n  2\n{39DB1BDD-BC6C-46D3-A333-DFCC0DC4782D}\n  9\n$VERSIONGUID\n  2\n{69EEBB2D-7039-498F-9366-3F994E4A07E7}\n  9\n$EXTNAMES\n290\n1\n  9\n$PSVPSCALE\n 40\n0.0\n  9\n$OLESTARTUP\n290\n0\n  9\n$SORTENTS\n280\n127\n  9\n$INDEXCTL\n280\n0\n  9\n$HIDETEXT\n280\n1\n  9\n$XCLIPFRAME\n280\n0\n  9\n$HALOGAP\n280\n0\n  9\n$OBSCOLOR\n 70\n257\n  9\n$OBSLTYPE\n280\n0\n  9\n$INTERSECTIONDISPLAY\n280\n0\n  9\n$INTERSECTIONCOLOR\n 70\n257\n  9\n$DIMASSOC\n280\n2\n  9\n$PROJECTNAME\n  1\n\n  9\n$CAMERADISPLAY\n290\n0\n  9\n$LENSLENGTH\n 40\n50.0\n  9\n$CAMERAHEIGHT\n 40\n0.0\n  9\n$STEPSPERSEC\n 40\n2.0\n  9\n$STEPSIZE\n 40\n6.0\n  9\n$3DDWFPREC\n 40\n2.0\n  9\n$PSOLWIDTH\n 40\n0.25\n  9\n$PSOLHEIGHT\n 40\n4.0\n  9\n$LOFTANG1\n 40\n1.57079632679\n  9\n$LOFTANG2\n 40\n1.57079632679\n  9\n$LOFTMAG1\n 40\n0.0\n  9\n$LOFTMAG2\n 40\n0.0\n  9\n$LOFTPARAM\n 70\n7\n  9\n$LOFTNORMALS\n280\n1\n  9\n$LATITUDE\n 40\n37.795\n  9\n$LONGITUDE\n 40\n-122.394\n  9\n$NORTHDIRECTION\n 40\n0.0\n  9\n$TIMEZONE\n 70\n-8000\n  9\n$LIGHTGLYPHDISPLAY\n280\n1\n  9\n$TILEMODELIGHTSYNCH\n280\n1\n  9\n$CMATERIAL\n347\n96\n  9\n$SOLIDHIST\n280\n1\n  9\n$SHOWHIST\n280\n1\n  9\n$DWFFRAME\n280\n2\n  9\n$DGNFRAME\n280\n0\n  9\n$REALWORLDSCALE\n290\n1\n  9\n$INTERFERECOLOR\n 62\n1\n  9\n$INTERFEREOBJVS\n345\nA3\n  9\n$INTERFEREVPVS\n346\nA0\n  9\n$CSHADOW\n280\n0\n  9\n$SHADOWPLANELOCATION\n 40\n0.0\n  0\nENDSEC"},dxfClasses:function(){return'  0\nSECTION\n  2\nCLASSES\n  0\nCLASS\n  1\nACDBDICTIONARYWDFLT\n  2\nAcDbDictionaryWithDefault\n  3\nObjectDBX Classes\n 90\n0\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nDICTIONARYVAR\n  2\nAcDbDictionaryVar\n  3\nObjectDBX Classes\n 90\n0\n 91\n15\n280\n0\n281\n0\n  0\nCLASS\n  1\nTABLESTYLE\n  2\nAcDbTableStyle\n  3\nObjectDBX Classes\n 90\n4095\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nMATERIAL\n  2\nAcDbMaterial\n  3\nObjectDBX Classes\n 90\n1153\n 91\n3\n280\n0\n281\n0\n  0\nCLASS\n  1\nVISUALSTYLE\n  2\nAcDbVisualStyle\n  3\nObjectDBX Classes\n 90\n4095\n 91\n26\n280\n0\n281\n0\n  0\nCLASS\n  1\nSCALE\n  2\nAcDbScale\n  3\nObjectDBX Classes\n 90\n1153\n 91\n17\n280\n0\n281\n0\n  0\nCLASS\n  1\nMLEADERSTYLE\n  2\nAcDbMLeaderStyle\n  3\nACDB_MLEADERSTYLE_CLASS\n 90\n4095\n 91\n3\n280\n0\n281\n0\n  0\nCLASS\n  1\nCELLSTYLEMAP\n  2\nAcDbCellStyleMap\n  3\nObjectDBX Classes\n 90\n1152\n 91\n2\n280\n0\n281\n0\n  0\nCLASS\n  1\nEXACXREFPANELOBJECT\n  2\nExAcXREFPanelObject\n  3\nEXAC_ESW\n 90\n1025\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nNPOCOLLECTION\n  2\nAcDbImpNonPersistentObjectsCollection\n  3\nObjectDBX Classes\n 90\n1153\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nLAYER_INDEX\n  2\nAcDbLayerIndex\n  3\nObjectDBX Classes\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nSPATIAL_INDEX\n  2\nAcDbSpatialIndex\n  3\nObjectDBX Classes\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nIDBUFFER\n  2\nAcDbIdBuffer\n  3\nObjectDBX Classes\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nDIMASSOC\n  2\nAcDbDimAssoc\n  3\n"AcDbDimAssoc|Product Desc:     AcDim ARX App For Dimension|Company:          Autodesk, Inc.|WEB Address:      www.autodesk.com"\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nACDBSECTIONVIEWSTYLE\n  2\nAcDbSectionViewStyle\n  3\nObjectDBX Classes\n 90\n1025\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nACDBDETAILVIEWSTYLE\n  2\nAcDbDetailViewStyle\n  3\nObjectDBX Classes\n 90\n1025\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nIMAGEDEF\n  2\nAcDbRasterImageDef\n  3\nISM\n 90\n0\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nRASTERVARIABLES\n  2\nAcDbRasterVariables\n  3\nISM\n 90\n0\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nIMAGEDEF_REACTOR\n  2\nAcDbRasterImageDefReactor\n  3\nISM\n 90\n1\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nIMAGE\n  2\nAcDbRasterImage\n  3\nISM\n 90\n2175\n 91\n1\n280\n0\n281\n1\n  0\nCLASS\n  1\nPDFDEFINITION\n  2\nAcDbPdfDefinition\n  3\nObjectDBX Classes\n 90\n1153\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nPDFUNDERLAY\n  2\nAcDbPdfReference\n  3\nObjectDBX Classes\n 90\n4095\n 91\n1\n280\n0\n281\n1\n  0\nCLASS\n  1\nDWFDEFINITION\n  2\nAcDbDwfDefinition\n  3\nObjectDBX Classes\n 90\n1153\n 91\n2\n280\n0\n281\n0\n  0\nCLASS\n  1\nDWFUNDERLAY\n  2\nAcDbDwfReference\n  3\nObjectDBX Classes\n 90\n1153\n 91\n1\n280\n0\n281\n1\n  0\nCLASS\n  1\nDGNDEFINITION\n  2\nAcDbDgnDefinition\n  3\nObjectDBX Classes\n 90\n1153\n 91\n2\n280\n0\n281\n0\n  0\nCLASS\n  1\nDGNUNDERLAY\n  2\nAcDbDgnReference\n  3\nObjectDBX Classes\n 90\n1153\n 91\n1\n280\n0\n281\n1\n  0\nENDSEC'},dxfTables:function(){return"  0\nSECTION\n  2\nTABLES\n  0\nTABLE\n  2\nVPORT\n  5\n8\n330\n0\n100\nAcDbSymbolTable\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nLTYPE\n  5\n5F\n330\n0\n100\nAcDbSymbolTable\n 70\n7\n  0\nLTYPE\n  5\n14\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nByBlock\n 70\n0\n  3\n\n 72\n65\n 73\n0\n 40\n0.0\n  0\nLTYPE\n  5\n15\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nByLayer\n 70\n0\n  3\n\n 72\n65\n 73\n0\n 40\n0.0\n  0\nLTYPE\n  5\n16\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nContinuous\n 70\n0\n  3\nSolid line\n 72\n65\n 73\n0\n 40\n0.0\n  0\nLTYPE\n  5\n1B1\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nCENTER\n 70\n0\n  3\nCenter ____ _ ____ _ ____ _ ____ _ ____ _ ____\n 72\n65\n 73\n4\n 40\n2.0\n 49\n1.25\n 74\n0\n 49\n-0.25\n 74\n0\n 49\n0.25\n 74\n0\n 49\n-0.25\n 74\n0\n  0\nLTYPE\n  5\n1B2\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nDASHED\n 70\n0\n  3\nDashed __ __ __ __ __ __ __ __ __ __ __ __ __ _\n 72\n65\n 73\n2\n 40\n0.75\n 49\n0.5\n 74\n0\n 49\n-0.25\n 74\n0\n  0\nLTYPE\n  5\n1B3\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nPHANTOM\n 70\n0\n  3\nPhantom ______  __  __  ______  __  __  ______\n 72\n65\n 73\n6\n 40\n2.5\n 49\n1.25\n 74\n0\n 49\n-0.25\n 74\n0\n 49\n0.25\n 74\n0\n 49\n-0.25\n 74\n0\n 49\n0.25\n 74\n0\n 49\n-0.25\n 74\n0\n  0\nLTYPE\n  5\n39E\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nHIDDEN\n 70\n0\n  3\nHidden __ __ __ __ __ __ __ __ __ __ __ __ __ __\n 72\n65\n 73\n2\n 40\n9.525\n 49\n6.35\n 74\n0\n 49\n-3.175\n 74\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nLAYER\n  5\n2\n330\n0\n100\nAcDbSymbolTable\n 70\n3\n  0\nLAYER\n  5\n10\n330\n2\n100\nAcDbSymbolTableRecord\n100\nAcDbLayerTableRecord\n  2\n0\n 70\n0\n  6\nContinuous\n370\n-3\n390\nF\n347\n98\n348\n0\n  0\nLAYER\n  5\n1B4\n330\n2\n100\nAcDbSymbolTableRecord\n100\nAcDbLayerTableRecord\n  2\nView Port\n 70\n0\n  6\nContinuous\n290\n0\n370\n-3\n390\nF\n347\n98\n348\n0\n  0\nLAYER\n  5\n21D\n330\n2\n100\nAcDbSymbolTableRecord\n100\nAcDbLayerTableRecord\n  2\nDefpoints\n 70\n0\n  6\nContinuous\n290\n0\n370\n-3\n390\nF\n347\n98\n348\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nSTYLE\n  5\n3\n330\n0\n100\nAcDbSymbolTable\n 70\n3\n  0\nSTYLE\n  5\n11\n330\n3\n100\nAcDbSymbolTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nStandard\n 70\n0\n 40\n0.0\n 41\n1.0\n 50\n0.0\n 71\n0\n 42\n0.2\n  3\narial.ttf\n  4\n\n  0\nSTYLE\n  5\nDC\n330\n3\n100\nAcDbSymbolTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nAnnotative\n 70\n0\n 40\n0.0\n 41\n1.0\n 50\n0.0\n 71\n0\n 42\n0.2\n  3\narial.ttf\n  4\n\n  0\nSTYLE\n  5\n178\n330\n3\n100\nAcDbSymbolTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nNotes\n 70\n0\n 40\n3.0\n 41\n1.0\n 50\n0.0\n 71\n0\n 42\n0.2\n  3\narial.ttf\n  4\n\n  0\nENDTAB\n  0\nTABLE\n  2\nVIEW\n  5\n6\n330\n0\n100\nAcDbSymbolTable\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nUCS\n  5\n7\n330\n0\n100\nAcDbSymbolTable\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nAPPID\n  5\n9\n330\n0\n100\nAcDbSymbolTable\n 70\n12\n  0\nAPPID\n  5\n12\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD\n 70\n0\n  0\nAPPID\n  5\nDD\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nAcadAnnoPO\n 70\n0\n  0\nAPPID\n  5\nDE\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nAcadAnnotative\n 70\n0\n  0\nAPPID\n  5\nDF\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_DSTYLE_DIMJAG\n 70\n0\n  0\nAPPID\n  5\nE0\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_DSTYLE_DIMTALN\n 70\n0\n  0\nAPPID\n  5\n107\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_MLEADERVER\n 70\n0\n  0\nAPPID\n  5\n1B5\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nAcAecLayerStandard\n 70\n0\n  0\nAPPID\n  5\n1BA\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_EXEMPT_FROM_CAD_STANDARDS\n 70\n0\n  0\nAPPID\n  5\n237\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_DSTYLE_DIMBREAK\n 70\n0\n  0\nAPPID\n  5\n28E\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_PSEXT\n 70\n0\n  0\nAPPID\n  5\n4B0\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_NAV_VCDISPLAY\n 70\n0\n  0\nAPPID\n  5\n4E3\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nHATCHBACKGROUNDCOLOR\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nDIMSTYLE\n  5\nA\n330\n0\n100\nAcDbSymbolTable\n 70\n3\n100\nAcDbDimStyleTable\n 71\n3\n340\n242\n340\n27\n340\nE1\n  0\nDIMSTYLE\n105\n27\n330\nA\n100\nAcDbSymbolTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nStandard\n 70\n0\n 41\n3.0\n 42\n2.0\n 43\n9.0\n 44\n5.0\n140\n3.0\n141\n2.0\n147\n2.0\n340\n11\n1001\nACAD_DSTYLE_DIMJAG\n1070\n388\n1040\n38.0\n1001\nACAD_DSTYLE_DIMBREAK\n1070\n391\n1040\n90.0\n1001\nACAD_DSTYLE_DIMTALN\n1070\n392\n1070\n0\n  0\nDIMSTYLE\n105\nE1\n330\nA\n100\nAcDbSymbolTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nAnnotative\n 70\n0\n 40\n0.0\n 41\n3.0\n 42\n2.5\n 43\n10.0\n 44\n5.0\n140\n3.0\n141\n2.0\n147\n2.0\n340\n11\n1001\nAcadAnnotative\n1000\nAnnotativeData\n1002\n{\n1070\n1\n1070\n1\n1002\n}\n1001\nACAD_DSTYLE_DIMJAG\n1070\n388\n1040\n38.0\n1001\nACAD_DSTYLE_DIMBREAK\n1070\n391\n1040\n90.0\n1001\nACAD_DSTYLE_DIMTALN\n1070\n392\n1070\n0\n  0\nDIMSTYLE\n105\n242\n330\nA\n100\nAcDbSymbolTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nCivil-Metric\n 70\n0\n 41\n3.0\n 42\n1.5\n 43\n6.0\n 44\n3.0\n 73\n0\n 74\n0\n 77\n1\n 78\n3\n 79\n2\n140\n3.0\n141\n3.0\n147\n2.0\n179\n2\n271\n2\n272\n2\n276\n1\n340\n11\n1001\nACAD_DSTYLE_DIMBREAK\n1070\n391\n1040\n3.0\n1001\nACAD_DSTYLE_DIMJAG\n1070\n388\n1040\n38.0\n1001\nACAD_DSTYLE_DIMTALN\n1070\n392\n1070\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nBLOCK_RECORD\n  5\n1\n330\n0\n100\nAcDbSymbolTable\n 70\n4\n  0\nBLOCK_RECORD\n  5\n1F\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n*Model_Space\n340\n530\n 70\n0\n280\n1\n281\n0\n  0\nBLOCK_RECORD\n  5\n58\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n*Paper_Space\n340\n531\n 70\n0\n280\n1\n281\n0\n  0\nBLOCK_RECORD\n  5\n238\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n_ArchTick\n340\n0\n 70\n0\n280\n1\n281\n0\n  0\nBLOCK_RECORD\n  5\n23C\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n_Open30\n340\n0\n 70\n0\n280\n1\n281\n0\n  0\nENDTAB\n  0\nENDSEC"},dxfBlocks:function(){return"  0\nSECTION\n  2\nBLOCKS\n  0\nBLOCK\n  5\n23A\n330\n238\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n_ArchTick\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n_ArchTick\n  1\n\n  0\nENDBLK\n  5\n23B\n330\n238\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\n20\n330\n1F\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n*Model_Space\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n*Model_Space\n  1\n\n  0\nENDBLK\n  5\n21\n330\n1F\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\n5A\n330\n58\n100\nAcDbEntity\n 67\n1\n  8\n0\n100\nAcDbBlockBegin\n  2\n*Paper_Space\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n*Paper_Space\n  1\n\n  0\nENDBLK\n  5\n5B\n330\n58\n100\nAcDbEntity\n 67\n1\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\n240\n330\n23C\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n_Open30\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n_Open30\n  1\n\n  0\nENDBLK\n  5\n241\n330\n23C\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nENDSEC"},dxfObjects:function(){return"  0\nSECTION\n  2\nOBJECTS\n  0\nDICTIONARY\n  5\nC\n330\n0\n100\nAcDbDictionary\n281\n1\n  3\nACAD_COLOR\n350\n524\n  3\nACAD_GROUP\n350\n525\n  3\nACAD_LAYOUT\n350\n526\n  3\nACAD_MATERIAL\n350\n527\n  3\nACAD_MLEADERSTYLE\n350\n528\n  3\nACAD_MLINESTYLE\n350\n529\n  3\nACAD_PLOTSETTINGS\n350\n52A\n  3\nACAD_PLOTSTYLENAME\n350\n52C\n  3\nACAD_SCALELIST\n350\n52D\n  3\nACAD_TABLESTYLE\n350\n52E\n  3\nACAD_VISUALSTYLE\n350\n52F\n  0\nDICTIONARY\n  5\n524\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n525\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n526\n330\nC\n100\nAcDbDictionary\n281\n1\n  3\nModel\n350\n530\n  3\nLayout1\n350\n531\n  0\nDICTIONARY\n  5\n527\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n528\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n529\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n52A\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nACDBPLACEHOLDER\n  5\n52B\n330\n52C\n  0\nACDBDICTIONARYWDFLT\n  5\n52C\n330\nC\n100\nAcDbDictionary\n281\n1\n  3\nNormal\n350\n52B\n100\nAcDbDictionaryWithDefault\n340\n52B\n  0\nDICTIONARY\n  5\n52D\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n52E\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n52F\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nLAYOUT\n  5\n530\n330\n526\n100\nAcDbPlotSettings\n  1\n\n  2\nDWFx ePlot (XPS Compatible).pc3\n  4\nANSI_A_(8.50_x_11.00_Inches)\n  6\n\n 40\n5.8\n 41\n17.8\n 42\n5.8\n 43\n17.8\n 44\n215.9\n 45\n279.4\n 46\n0.0\n 47\n0.0\n 48\n0.0\n 49\n0.0\n140\n0.0\n141\n0.0\n142\n1.0\n143\n14.53\n 70\n11952\n 72\n0\n 73\n1\n 74\n0\n  7\n\n 75\n0\n147\n0.069\n148\n114.98\n149\n300.29\n100\nAcDbLayout\n  1\nModel\n 70\n1\n 71\n0\n 10\n0.0\n 20\n0.0\n 11\n12.0\n 21\n9.0\n 12\n0.0\n 22\n0.0\n 32\n0.0\n 14\n0.0\n 24\n0.0\n 34\n0.0\n 15\n0.0\n 25\n0.0\n 35\n0.0\n146\n0.0\n 13\n0.0\n 23\n0.0\n 33\n0.0\n 16\n1.0\n 26\n0.0\n 36\n0.0\n 17\n0.0\n 27\n1.0\n 37\n0.0\n 76\n0\n330\n1F\n  0\nLAYOUT\n  5\n531\n330\n526\n100\nAcDbPlotSettings\n  1\n\n  2\nDWFx ePlot (XPS Compatible).pc3\n  4\nANSI_A_(8.50_x_11.00_Inches)\n  6\n\n 40\n5.8\n 41\n17.8\n 42\n5.8\n 43\n17.8\n 44\n215.9\n 45\n279.4\n 46\n0.0\n 47\n0.0\n 48\n0.0\n 49\n0.0\n140\n0.0\n141\n0.0\n142\n1.0\n143\n1.0\n 70\n688\n 72\n0\n 73\n1\n 74\n5\n  7\nacad.ctb\n 75\n16\n147\n1.0\n148\n0.0\n149\n0.0\n100\nAcDbLayout\n  1\nLayout1\n 70\n1\n 71\n1\n 10\n-0.7\n 20\n-0.23\n 11\n10.3\n 21\n8.27\n 12\n0.0\n 22\n0.0\n 32\n0.0\n 14\n0.63\n 24\n0.8\n 34\n0.0\n 15\n9.0\n 25\n7.2\n 35\n0.0\n146\n0.0\n 13\n0.0\n 23\n0.0\n 33\n0.0\n 16\n1.0\n 26\n0.0\n 36\n0.0\n 17\n0.0\n 27\n1.0\n 37\n0.0\n 76\n0\n330\n58\n  0\nENDSEC"}}},{}],60:[function(xt,Ct,_t){Ct.exports=[[0,0,0,255],[255,0,0,255],[255,255,0,255],[0,255,0,255],[0,255,255,255],[0,0,255,255],[255,0,255,255],[255,255,255,255],[128,128,128,255],[192,192,192,255],[255,0,0,255],[255,127,127,255],[165,0,0,255],[165,82,82,255],[127,0,0,255],[127,63,63,255],[76,0,0,255],[76,38,38,255],[38,0,0,255],[38,19,19,255],[255,63,0,255],[255,159,127,255],[165,41,0,255],[165,103,82,255],[127,31,0,255],[127,79,63,255],[76,19,0,255],[76,47,38,255],[38,9,0,255],[38,28,19,255],[255,127,0,255],[255,191,127,255],[165,82,0,255],[165,124,82,255],[127,63,0,255],[127,95,63,255],[76,38,0,255],[76,57,38,255],[38,19,0,255],[38,28,19,255],[255,191,0,255],[255,223,127,255],[165,124,0,255],[165,145,82,255],[127,95,0,255],[127,111,63,255],[76,57,0,255],[76,66,38,255],[38,28,0,255],[38,33,19,255],[255,255,0,255],[255,255,127,255],[165,165,0,255],[165,165,82,255],[127,127,0,255],[127,127,63,255],[76,76,0,255],[76,76,38,255],[38,38,0,255],[38,38,19,255],[191,255,0,255],[223,255,127,255],[124,165,0,255],[145,165,82,255],[95,127,0,255],[111,127,63,255],[57,76,0,255],[66,76,38,255],[28,38,0,255],[33,38,19,255],[127,255,0,255],[191,255,127,255],[82,165,0,255],[124,165,82,255],[63,127,0,255],[95,127,63,255],[38,76,0,255],[57,76,38,255],[19,38,0,255],[28,38,19,255],[63,255,0,255],[159,255,127,255],[41,165,0,255],[103,165,82,255],[31,127,0,255],[79,127,63,255],[19,76,0,255],[47,76,38,255],[9,38,0,255],[23,38,19,255],[0,255,0,255],[125,255,127,255],[0,165,0,255],[82,165,82,255],[0,127,0,255],[63,127,63,255],[0,76,0,255],[38,76,38,255],[0,38,0,255],[19,38,19,255],[0,255,63,255],[127,255,159,255],[0,165,41,255],[82,165,103,255],[0,127,31,255],[63,127,79,255],[0,76,19,255],[38,76,47,255],[0,38,9,255],[19,88,23,255],[0,255,127,255],[127,255,191,255],[0,165,82,255],[82,165,124,255],[0,127,63,255],[63,127,95,255],[0,76,38,255],[38,76,57,255],[0,38,19,255],[19,88,28,255],[0,255,191,255],[127,255,223,255],[0,165,124,255],[82,165,145,255],[0,127,95,255],[63,127,111,255],[0,76,57,255],[38,76,66,255],[0,38,28,255],[19,88,88,255],[0,255,255,255],[127,255,255,255],[0,165,165,255],[82,165,165,255],[0,127,127,255],[63,127,127,255],[0,76,76,255],[38,76,76,255],[0,38,38,255],[19,88,88,255],[0,191,255,255],[127,223,255,255],[0,124,165,255],[82,145,165,255],[0,95,127,255],[63,111,217,255],[0,57,76,255],[38,66,126,255],[0,28,38,255],[19,88,88,255],[0,127,255,255],[127,191,255,255],[0,82,165,255],[82,124,165,255],[0,63,127,255],[63,95,127,255],[0,38,76,255],[38,57,126,255],[0,19,38,255],[19,28,88,255],[0,63,255,255],[127,159,255,255],[0,41,165,255],[82,103,165,255],[0,31,127,255],[63,79,127,255],[0,19,76,255],[38,47,126,255],[0,9,38,255],[19,23,88,255],[0,0,255,255],[127,127,255,255],[0,0,165,255],[82,82,165,255],[0,0,127,255],[63,63,127,255],[0,0,76,255],[38,38,126,255],[0,0,38,255],[19,19,88,255],[63,0,255,255],[159,127,255,255],[41,0,165,255],[103,82,165,255],[31,0,127,255],[79,63,127,255],[19,0,76,255],[47,38,126,255],[9,0,38,255],[23,19,88,255],[127,0,255,255],[191,127,255,255],[165,0,82,255],[124,82,165,255],[63,0,127,255],[95,63,127,255],[38,0,76,255],[57,38,126,255],[19,0,38,255],[28,19,88,255],[191,0,255,255],[223,127,255,255],[124,0,165,255],[142,82,165,255],[95,0,127,255],[111,63,127,255],[57,0,76,255],[66,38,76,255],[28,0,38,255],[88,19,88,255],[255,0,255,255],[255,127,255,255],[165,0,165,255],[165,82,165,255],[127,0,127,255],[127,63,127,255],[76,0,76,255],[76,38,76,255],[38,0,38,255],[88,19,88,255],[255,0,191,255],[255,127,223,255],[165,0,124,255],[165,82,145,255],[127,0,95,255],[127,63,111,255],[76,0,57,255],[76,38,66,255],[38,0,28,255],[88,19,88,255],[255,0,127,255],[255,127,191,255],[165,0,82,255],[165,82,124,255],[127,0,63,255],[127,63,95,255],[76,0,38,255],[76,38,57,255],[38,0,19,255],[88,19,28,255],[255,0,63,255],[255,127,159,255],[165,0,41,255],[165,82,103,255],[127,0,31,255],[127,63,79,255],[76,0,19,255],[76,38,47,255],[38,0,9,255],[88,19,23,255],[0,0,0,255],[101,101,101,255],[102,102,102,255],[153,153,153,255],[204,204,204,255],[255,255,255,255]]},{}],61:[function(xt,Ct,_t){const{geometries:$t,modifiers:Vn}=xt("@jscad/modeling"),{geom3:Gn,geom2:or,path2:lr}=$t,{flatten:Fr,toArray:Hr}=xt("@jscad/array-utils"),{dxfHeaders:xo,dxfClasses:Eo,dxfTables:Mo,dxfBlocks:Oo,dxfObjects:Ro}=xt("./autocad_AC2017"),Io=xt("./colorindex2017"),dxfEntities=(xt,Ct)=>{const _t=xt.map(((xt,_t)=>{if(or.isA(xt)){const _t=xt.color,$t=xt.name,Vn=or.toOutlines(xt).map((xt=>({closed:!0,points:xt,color:_t,name:$t})));return"polyline"===Ct.geom2To?PathsToPolyine(Vn,Ct):PathsToLwpolyline(Vn,Ct)}if(Gn.isA(xt))return"polyline"===Ct.geom3To?PolygonsToPolyline(xt,Ct):PolygonsTo3DFaces(xt,Ct);if(lr.isA(xt)){const _t=xt.color,$t=xt.name,Vn={closed:xt.isClosed,points:lr.toPoints(xt),color:_t,name:$t};return PathsToLwpolyline([Vn],Ct)}return""}));let $t="  0\nSECTION\n  2\nENTITIES\n";return _t.forEach((xt=>{xt&&($t+=xt)})),$t+="  0\nENDSEC"},PathsToLwpolyline=(xt,Ct)=>{Ct.statusCallback&&Ct.statusCallback({progress:0});let _t="";return xt.forEach((($t,Vn)=>{if($t.points.length<1)return;const Gn=$t.points.length+($t.closed?1:0);_t+=`  0\nLWPOLYLINE\n  5\n${getEntityId(Ct)}\n  100\nAcDbEntity\n  3\n${getName($t,Ct)}\n  8\n0\n  67\n0\n  62\n${getColorNumber($t,Ct)}\n  100\nAcDbPolyline\n  90\n${Gn}\n  70\n${$t.closed?1:0}\n`;for(let xt=0;xt<Gn;xt++){let Ct=xt;Ct>=$t.points.length&&(Ct-=$t.points.length);const Vn=$t.points[Ct];_t+=`  10\n${Vn[0]}\n  20\n${Vn[1]}\n`}Ct.statusCallback&&Ct.statusCallback({progress:100*Vn/xt.length})})),Ct.statusCallback&&Ct.statusCallback({progress:100}),[_t]},PathsToPolyine=(xt,Ct)=>{Ct.statusCallback&&Ct.statusCallback({progress:0});let _t="";return xt.forEach((($t,Vn)=>{const Gn=$t.points.length+($t.closed?1:0);_t+=`  0\nPOLYLINE\n  5\n${getEntityId(Ct)}\n  100\nAcDbEntity\n  3\n${getName($t,Ct)}\n  8\n0\n  62\n${getColorNumber($t,Ct)}\n  100\nAcDb2dPolyline\n`;for(let xt=0;xt<Gn;xt++){let Vn=xt;Vn>=$t.points.length&&(Vn-=$t.points.length);const Gn=$t.points[Vn];_t+=`  0\nVERTEX\n  5\n${getEntityId(Ct)}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDbVertex\n  100\nAcDb2dVertex\n 10\n${Gn[0]}\n 20\n${Gn[1]}\n`}_t+=`  0\nSEQEND\n  5\n${getEntityId(Ct)}\n  100\nAcDbEntity\n`,Ct.statusCallback&&Ct.statusCallback({progress:100*Vn/xt.length})})),Ct.statusCallback&&Ct.statusCallback({progress:100}),[_t]},PolygonsTo3DFaces=(xt,Ct)=>{Ct.statusCallback&&Ct.statusCallback({progress:0});let _t="";const $t=Gn.toPolygons(xt),Vn=getColorNumber(xt,Ct);return $t.forEach(((xt,$t)=>{const Gn=xt.color?getColorNumber(xt,Ct):Vn;polygonToTriangles(xt).forEach(((xt,$t)=>{_t+=triangleTo3DFaces(xt,Ct,Gn)}))})),Ct.statusCallback&&Ct.statusCallback({progress:100}),[_t]},polygonToTriangles=xt=>{const Ct=xt.vertices.length-2;if(Ct<1)return[];const _t=xt.vertices[0],$t=[];for(let Vn=0;Vn<Ct;Vn++)$t.push([_t,xt.vertices[Vn+1],xt.vertices[Vn+2]]);return $t},triangleTo3DFaces=(xt,Ct,_t)=>{const $t=xt[0],Vn=xt[1],Gn=xt[2],or=xt[2];return`  0\n3DFACE\n  5\n${getEntityId(Ct)}\n  100\nAcDbEntity\n  8\n0\n  62\n${_t}\n  100\nAcDbFace\n  70\n0\n  10\n${$t[0]}\n  20\n${$t[1]}\n  30\n${$t[2]}\n  11\n${Vn[0]}\n  21\n${Vn[1]}\n  31\n${Vn[2]}\n  12\n${Gn[0]}\n  22\n${Gn[1]}\n  32\n${Gn[2]}\n  13\n${or[0]}\n  23\n${or[1]}\n  33\n${or[2]}\n`},PolygonsToPolyline=(xt,Ct)=>{let _t="";const $t=polygons2polyfaces(Gn.toPolygons(xt));return $t.faces.length>0&&(_t+=`  0\nPOLYLINE\n  5\n${getEntityId(Ct)}\n  100\nAcDbEntity\n  3\n${getName(xt,Ct)}\n  8\n0\n  62\n${getColorNumber(xt,Ct)}\n  100\nAcDb3dPolyline\n  70\n64\n  71\n${$t.vertices.length}\n  72\n${$t.faces.length}\n`,$t.vertices.forEach((xt=>{_t+=`  0\nVERTEX\n  5\n${getEntityId(Ct)}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDbVertex\n  100\nAcDb3dPolylineVertex\n  10\n${xt[0]}\n  20\n${xt[1]}\n  30\n${xt[2]}\n  70\n192\n`})),$t.faces.forEach((xt=>{_t+=`  0\nVERTEX\n  5\n${getEntityId(Ct)}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDbVertex\n  100\nAcDb3dPolylineVertex\n  10\n0\n  20\n0\n  30\n0\n  70\n128\n  71\n${xt[0]}\n  72\n${xt[1]}\n  73\n${xt[2]}\n  74\n${xt[3]}\n`}))),[_t]},polygons2polyfaces=xt=>{const Ct=[],_t=[];for(let $t=0;$t<xt.length;++$t){const Vn=xt[$t],Gn=[];for(let xt=0;xt<Vn.vertices.length;++xt){const Ct=Vn.vertices[xt];_t.push([Ct[0],Ct[1],Ct[2]]),Gn.push(_t.length)}for(;Gn.length<4;)Gn.push(0);Ct.push(Gn)}return{faces:Ct,vertices:_t}},getEntityId=xt=>{xt.entityId++;const Ct="00000"+xt.entityId.toString(16).toUpperCase();return"CAD"+Ct.substr(Ct.length-5)},getName=(xt,Ct)=>{if(xt.name)return xt.name;const _t="00000"+Ct.entityId.toString(16).toUpperCase();return"CAD"+_t.substr(_t.length-5)},getColorNumber=(xt,Ct)=>{let _t=256;if(xt.color){const $t=Math.floor(255*xt.color[0]),Vn=Math.floor(255*xt.color[1]),Gn=Math.floor(255*xt.color[2]),or=Ct.colorIndex;let lr=765;for(let xt=1;xt<or.length;xt++){const Ct=or[xt],Fr=Math.abs($t-Ct[0])+Math.abs(Vn-Ct[1])+Math.abs(Gn-Ct[2]);if(Fr<lr){if(_t=xt,0===Fr)break;lr=Fr}}}return _t};Ct.exports={serialize:(xt,...Ct)=>{const _t={geom2To:"lwpolyline",geom3To:"3dface",pathTo:"lwpolyline",statusCallback:null,colorIndex:Io};if((xt=Object.assign({},_t,xt)).entityId=0,0===(Ct=(Ct=Fr(Ct)).filter((xt=>Gn.isA(xt)||or.isA(xt)||lr.isA(xt)))).length)throw new Error("only JSCAD geometries can be serialized to DXF");return Ct=Hr(Vn.generalize({snap:!0,triangulate:!0},Ct)),[`999\nCreated by JSCAD\n${xo(xt)}\n${Eo(xt)}\n${Mo(xt)}\n${Oo(xt)}\n${dxfEntities(Ct,xt)}\n${Ro(xt)}\n  0\nEOF\n`]},mimeType:"application/dxf"}},{"./autocad_AC2017":59,"./colorindex2017":60,"@jscad/array-utils":525,"@jscad/modeling":210}],62:[function(xt,Ct,_t){Ct.exports=class BinaryReader{constructor(xt){this._buffer=xt,this._pos=0}readInt8(){return this._decodeInt(8,!0)}readUInt8(){return this._decodeInt(8,!1)}readInt16(){return this._decodeInt(16,!0)}readUInt16(){return this._decodeInt(16,!1)}readInt32(){return this._decodeInt(32,!0)}readUInt32(){return this._decodeInt(32,!1)}readFloat(){return this._decodeFloat(23,8)}readDouble(){return this._decodeFloat(52,11)}readChar(){return this.readString(1)}readString(xt){this._checkSize(8*xt);const Ct=this._buffer.substr(this._pos,xt);return this._pos+=xt,Ct}seek(xt){this._pos=xt,this._checkSize(0)}getPosition(){return this._pos}getSize(){return this._buffer.length}_decodeFloat(xt,Ct){const _t=xt+Ct+1,$t=_t>>3;this._checkSize(_t);const Vn=Math.pow(2,Ct-1)-1,Gn=this._readBits(xt+Ct,1,$t),or=this._readBits(xt,Ct,$t);let lr=0,Fr=2,Hr=0,xo=0;do{const Ct=this._readByte(++Hr,$t);let _t=1<<(xo=xt%8||8);for(;_t>>=1;)Ct&_t&&(lr+=1/Fr),Fr*=2}while(xt-=xo);return this._pos+=$t,or===1+(Vn<<1)?lr?NaN:Gn?-1/0:1/0:(1+-2*Gn)*(or||lr?or?Math.pow(2,or-Vn)*(1+lr):Math.pow(2,1-Vn)*lr:0)}_decodeInt(xt,Ct){const _t=this._readBits(0,xt,xt/8),$t=Math.pow(2,xt),Vn=Ct&&_t>=$t/2?_t-$t:_t;return this._pos+=xt/8,Vn}_shl(xt,Ct){for(++Ct;--Ct;xt=1073741824&~(xt%=2147483648)?2*(xt-1073741824)+2147483647+1:2*xt);return xt}_readByte(xt,Ct){return 255&this._buffer.charCodeAt(this._pos+Ct-xt-1)}_readBits(xt,Ct,_t){const $t=(xt+Ct)%8,Vn=xt%8,Gn=_t-(xt>>3)-1;let or=_t+(-(xt+Ct)>>3),lr=Gn-or,Fr=this._readByte(Gn,_t)>>Vn&(1<<(lr?8-Vn:Ct))-1;for(lr&&$t&&(Fr+=(this._readByte(or++,_t)&(1<<$t)-1)<<(lr--<<3)-Vn);lr;)Fr+=this._shl(this._readByte(or++,_t),(lr--<<3)-Vn);return Fr}_checkSize(xt){this._pos,Math.ceil(xt/8),this._buffer.length}}},{}],63:[function(xt,Ct,_t){(function(xt){(function(){class Blob{constructor(Ct,_t){if(_t=_t||{},this.size=0,this.type="",this.isClosed=!1,this.encoding="utf8",this.buffer=null,this.length=0,!Ct)return;if(!Array.isArray(Ct))return;let $t,Vn;Ct.forEach((xt=>{"string"==typeof xt?this.length+=xt.length:xt instanceof ArrayBuffer&&(this.length+=xt.byteLength)})),_t.type&&(this.type=_t.type.toLowerCase()),_t.endings,_t.encoding&&(this.encoding=_t.encoding.toLowerCase()),_t.length&&(this.length=_t.length),this.buffer=xt.allocUnsafe(this.length);for(let xt=0;xt<Ct.length;xt++)switch(typeof Ct[xt]){case"string":$t=this.buffer.write(Ct[xt],this.size,this.encoding),this.size=this.size+$t;break;case"object":if((Vn=Ct[xt])instanceof ArrayBuffer){const xt=new DataView(Vn);for(let Ct=0;Ct<Vn.byteLength;Ct++){const _t=xt.getUint8(Ct);$t=this.buffer.writeUInt8(_t,this.size,!1),this.size++}}}}asBuffer(){return this.buffer.slice(0,this.size)}arrayBuffer(){return this.buffer.slice(0,this.size)}slice(xt,Ct,_t){return xt=xt||0,Ct=Ct||this.size,_t=_t||"",new Blob}stream(){return null}text(){return""}close(){this.isClosed||(this.isClosed=!0)}toString(){return""}}Ct.exports=Blob}).call(this)}).call(this,xt("buffer").Buffer)},{buffer:688}],64:[function(xt,Ct,_t){const $t=xt("./makeBlob")();Ct.exports=xt=>{const{data:Ct,mimeType:_t}=xt;return new $t(Ct,{type:_t})}},{"./makeBlob":66}],65:[function(xt,Ct,_t){Ct.exports={convertToBlob:xt("./convertToBlob"),makeBlob:xt("./makeBlob"),BinaryReader:xt("./BinaryReader"),Blob:xt("./Blob")}},{"./BinaryReader":62,"./Blob":63,"./convertToBlob":64,"./makeBlob":66}],66:[function(xt,Ct,_t){const $t=xt("./Blob.js");Ct.exports=()=>"undefined"!=typeof window?window.Blob:$t},{"./Blob.js":63}],67:[function(xt,Ct,_t){const $t=xt("@jscad/amf-deserializer"),Vn=xt("@jscad/dxf-deserializer"),Gn=xt("@jscad/json-deserializer"),or=xt("@jscad/obj-deserializer"),lr=xt("@jscad/stl-deserializer"),Fr=xt("@jscad/svg-deserializer"),Hr=xt("@jscad/x3d-deserializer"),xo={};xo[$t.extension]=$t.deserialize,xo[Vn.extension]=Vn.deserialize,xo[Gn.extension]=Gn.deserialize,xo[or.extension]=or.deserialize,xo[lr.extension]=lr.deserialize,xo[Fr.extension]=Fr.deserialize,xo[Hr.extension]=Hr.deserialize,Ct.exports=xo},{"@jscad/amf-deserializer":45,"@jscad/dxf-deserializer":55,"@jscad/json-deserializer":71,"@jscad/obj-deserializer":74,"@jscad/stl-deserializer":77,"@jscad/svg-deserializer":89,"@jscad/x3d-deserializer":104}],68:[function(xt,Ct,_t){const{geometries:$t}=xt("@jscad/modeling"),Vn={stl:{displayName:"STL (Binary)",description:"STereoLithography, Binary",extension:"stl",mimetype:"application/sla",deserializable:!0,convertGeom3:!1,convertGeom2:!1},stla:{displayName:"STL (ASCII)",description:"STereoLithography, ASCII",extension:"stl",mimetype:"application/sla",deserializable:!1,convertGeom3:!0,convertGeom2:!1},stlb:{displayName:"STL (Binary)",description:"STereoLithography, Binary",extension:"stl",mimetype:"application/sla",deserializable:!1,convertGeom3:!0,convertGeom2:!1},amf:{displayName:"AMF (experimental)",description:"Additive Manufacturing File Format",extension:"amf",mimetype:"application/amf+xml",deserializable:!0,convertGeom3:!0,convertGeom2:!1},dxf:{displayName:"DXF (ASCII)",description:"AutoCAD Drawing Exchange Format",extension:"dxf",mimetype:"application/dxf",deserializable:!0,convertGeom3:!0,convertGeom2:!0},jscad:{displayName:"JSCAD",description:"JSCAD Design Source",extension:"jscad",mimetype:"application/javascript",deserializable:!0,convertGeom3:!0,convertGeom2:!0},json:{displayName:"json",description:"JavaScript Object Notation Format",extension:"json",mimetype:"application/json",deserializable:!0,convertGeom3:!0,convertGeom2:!0},js:{displayName:"js",description:"JavaScript Source",extension:"js",mimetype:"application/javascript",deserializable:!0,convertGeom3:!0,convertGeom2:!0},obj:{displayName:"OBJ",description:"Wavefront OBJ File",extension:"obj",mimetype:"text/plain",deserializable:!0,convertGeom3:!0,convertGeom2:!1},svg:{displayName:"SVG",description:"Scalable Vector Graphics Format",extension:"svg",mimetype:"image/svg+xml",deserializable:!0,convertGeom3:!1,convertGeom2:!0},x3d:{displayName:"X3D",description:"X3D File Format",extension:"x3d",mimetype:"model/x3d+xml",deserializable:!0,convertGeom3:!0,convertGeom2:!0},"3mf":{displayName:"3MF",description:"3D Manufacturing Format",extension:"3mf",mimetype:"model/3mf",deserializable:!1,convertGeom3:!0,convertGeom2:!1}};Ct.exports={formats:Vn,conversionFormats:["amf","js","jscad","obj","scad","stl","dxf","svg","ttf","woff"],supportedInputExtensions:()=>{const xt=[];for(const Ct in Vn)!0===Vn[Ct].deserializable&&xt.push(Vn[Ct].extension);return xt},supportedOutputExtensions:()=>{const xt=[];for(const Ct in Vn)!0!==Vn[Ct].convertGeom3&&!0!==Vn[Ct].convertGeom2||xt.indexOf(Vn[Ct].extension)<0&&xt.push(Vn[Ct].extension);return xt},supportedOutputFormats:()=>{const xt=[];for(const Ct in Vn)!0!==Vn[Ct].convertGeom3&&!0!==Vn[Ct].convertGeom2||xt.push(Ct);return xt},supportedFormatsForObjects:xt=>{const Ct=[];let _t=!1,Gn=!1;for(let Ct=0;Ct<xt.length;Ct++)$t.geom3.isA(xt[Ct])&&(_t=!0),($t.geom2.isA(xt[Ct])||$t.path2.isA(xt[Ct]))&&(Gn=!0);for(const xt in Vn)(_t&&!0===Vn[xt].convertGeom3||Gn&&!0===Vn[xt].convertGeom2)&&(Ct[Ct.length]=xt);return Ct}}},{"@jscad/modeling":210}],69:[function(xt,Ct,_t){const{makeBlob:$t,convertToBlob:Vn}=xt("@jscad/io-utils"),Gn=xt("@jscad/amf-serializer"),or=xt("@jscad/dxf-serializer"),lr=xt("@jscad/json-serializer"),Fr=xt("@jscad/obj-serializer"),Hr=xt("@jscad/stl-serializer"),xo=xt("@jscad/svg-serializer"),Eo=xt("@jscad/x3d-serializer"),Mo=xt("@jscad/3mf-serializer"),Oo=xt("./prepareOutput"),Ro=xt("./deserializers");Ct.exports={makeBlob:$t,solidsAsBlob:(xt,Ct)=>Vn(Oo(xt,Ct)),amfSerializer:Gn,dxfSerializer:or,jsonSerializer:lr,objSerializer:Fr,stlSerializer:Hr,svgSerializer:xo,x3dSerializer:Eo,m3fSerializer:Mo,deserializers:Ro}},{"./deserializers":67,"./prepareOutput":70,"@jscad/3mf-serializer":36,"@jscad/amf-serializer":49,"@jscad/dxf-serializer":61,"@jscad/io-utils":65,"@jscad/json-serializer":73,"@jscad/obj-serializer":76,"@jscad/stl-serializer":81,"@jscad/svg-serializer":93,"@jscad/x3d-serializer":119}],70:[function(xt,Ct,_t){const{toArray:$t}=xt("@jscad/array-utils"),{formats:Vn}=xt("./formats"),Gn=xt("@jscad/amf-serializer"),or=xt("@jscad/dxf-serializer"),lr=xt("@jscad/json-serializer"),Fr=xt("@jscad/obj-serializer"),Hr=xt("@jscad/stl-serializer"),xo=xt("@jscad/svg-serializer"),Eo=xt("@jscad/x3d-serializer"),Mo=xt("@jscad/3mf-serializer");Ct.exports=(xt,Ct)=>{const{format:_t,version:Oo}=Object.assign({},{format:void 0,version:"0.0.0"},Ct),Ro={producer:"JSCAD "+Oo,date:new Date,version:Oo},Io={amf:Gn,stl:Hr,stla:{mimeType:Hr.mimeType,serialize:(xt,Ct)=>Hr.serialize(Object.assign({},{binary:!1},xt),Ct)},stlb:Hr,dxf:or,obj:Fr,svg:xo,x3d:Eo,"3mf":Mo,json:lr,js:{mimeType:Vn.js.mimetype,serialize:(xt,Ct)=>$t(Ct)},jscad:{mimeType:Vn.jscad.mimetype,serialize:(xt,Ct)=>$t(Ct)},undefined:()=>{throw new Error("Not supported : only jscad, stl, amf, dxf, svg or json as output format")}},Bo=Object.assign({},Ro,Ct);return{data:Io[_t].serialize(Bo,xt),mimeType:Io[_t].mimeType}}},{"./formats":68,"@jscad/3mf-serializer":36,"@jscad/amf-serializer":49,"@jscad/array-utils":525,"@jscad/dxf-serializer":61,"@jscad/json-serializer":73,"@jscad/obj-serializer":76,"@jscad/stl-serializer":81,"@jscad/svg-serializer":93,"@jscad/x3d-serializer":119}],71:[function(xt,Ct,_t){const{flatten:$t,toArray:Vn}=xt("@jscad/array-utils"),Gn=xt("./package.json").version,translate=(xt,Ct)=>{const{addMetaData:_t,filename:$t,version:Vn}=xt;return(_t?`//\n// Produced by JSCAD IO Library : JSON Deserializer (${Vn})\n// date: ${new Date}\n// source: ${$t}\n//\n`:"")+`\nconst { geometries } = require('@jscad/modeling')\n\nconst main = () => {\n  const objects = [${translateToList(Ct)} ]\n  return objects\n}\n\n${translateToObjects(Ct)}\n\nmodule.exports = { main }\n`},translateToList=xt=>xt.reduce(((xt,Ct,_t)=>xt+` json${_t},`),""),translateToObjects=xt=>xt.reduce(((xt,Ct,_t)=>xt+translateToObject(Ct,_t)),""),translateToObject=(xt,Ct)=>`const json${Ct} = ${JSON.stringify(xt)}\n`;Ct.exports={deserialize:(xt,Ct)=>{const _t={filename:"json",output:"script",version:Gn,addMetaData:!0};xt=Object.assign({},_t,xt);let or=JSON.parse(Ct);return or=$t(Vn(or)),"script"===xt.output?translate(xt,or):or},extension:"json"}},{"./package.json":72,"@jscad/array-utils":525}],72:[function(xt,Ct,_t){Ct.exports={name:"@jscad/json-deserializer",version:"2.0.27",description:"JSON Deserializer for JSCAD",homepage:"https://openjscad.xyz/",repository:"https://github.com/jscad/OpenJSCAD.org",main:"index.js",scripts:{coverage:"nyc --all --reporter=html --reporter=text npm test",test:"ava 'tests/*.test.js' --verbose --timeout 2m"},contributors:[{name:"z3dev",url:"http://www.z3d.jp"},{name:"Mark 'kaosat-dev' Moissette",url:"http://kaosat.net"}],keywords:["openjscad","jscad","import","deserializer","json"],license:"MIT",dependencies:{"@jscad/array-utils":"2.1.4"},devDependencies:{"@jscad/modeling":"2.12.1",ava:"3.15.0",nyc:"15.1.0"},gitHead:"a90b9bad95a417661c619dc733e62c587dc71a4a"}},{}],73:[function(xt,Ct,_t){const{utils:$t}=xt("@jscad/modeling"),replacer=(xt,Ct)=>{switch(xt){case"transforms":case"plane":return Array.from(Ct);case"points":case"vertices":return Ct.map((xt=>Array.from(xt)));case"sides":return Ct.map((xt=>[Array.from(xt[0]),Array.from(xt[1])]))}return Ct};Ct.exports={serialize:(xt,...Ct)=>{xt=Object.assign({},{statusCallback:null},xt),Ct=$t.flatten(Ct),xt.statusCallback&&xt.statusCallback({progress:0});const _t=JSON.stringify(Ct,replacer);return xt.statusCallback&&xt.statusCallback({progress:100}),[_t]},mimeType:"application/json"}},{"@jscad/modeling":210}],74:[function(xt,Ct,_t){const{colors:$t,primitives:Vn}=xt("@jscad/modeling"),Gn=xt("./package.json").version,getGroups=(xt,Ct)=>{let _t=[];const Vn=[];let Gn=null;_t.push({faces:[],colors:[],name:"default",line:0});const r=(xt,Ct)=>{const $t={faces:[],colors:[],name:""};Ct&&Ct.length>0&&($t.name=Ct.join(" ")),_t.push($t)},a=(xt,Ct)=>{const _t=parseFloat(Ct[0]),$t=parseFloat(Ct[1]),Gn=parseFloat(Ct[2]);Vn.push([_t,$t,Gn])},l=(xt,Ct)=>{const $t=Ct.map((xt=>{const Ct=xt.match(/[0-9+\-eE]+/g);let _t=parseInt(Ct[0]);return _t<0?_t=Vn.length+_t:_t--,_t})),or=_t.pop();or.faces.push($t),or.colors.push(Gn),_t.push(or)},i=(xt,Ct)=>{if(Gn=null,Ct&&Ct.length>0){const xt=$t.colorNameToRgb(Ct[0]);xt&&(Gn=[xt[0],xt[1],xt[2],1])}},or=xt.split(/\n/);for(let xt=0;xt<or.length;xt++){const Ct=or[xt].trim();if(Ct&&Ct.length>0){let xt=Ct.match(/\S+/g);if(xt){const Ct=xt[0];switch(xt=xt.slice(1),Ct){case"g":r(0,xt);break;case"v":a(0,xt);break;case"f":l(0,xt);break;case"usemtl":i(0,xt)}}}}return _t=_t.filter((xt=>xt.faces.length>0)),{positions:Vn,groups:_t}},objectify=(xt,Ct,_t)=>Ct.map((Ct=>Vn.polyhedron({orientation:_t.orientation,points:xt,faces:Ct.faces,colors:Ct.colors}))),stringify=(xt,Ct,_t)=>{const{filename:$t,addMetaData:Vn,version:Gn}=_t;return(Vn?`//\n// Produced by JSCAD IO Library : OBJ Deserializer (${Gn})\n// date: ${new Date}\n// source: ${$t}\n//\n  `:"")+`const {primitives} = require('@jscad/modeling')\n\n// groups: ${Ct.length}\n// points: ${xt.length}\nconst main = () => {\n  // points are common to all geometries\n${(xt=>{let Ct="  let points = [\n";return xt.forEach((xt=>Ct+=`    [${xt}],\n`)),Ct+="  ]"})(xt)}\n\n  let geometries = [\n${(xt=>{let Ct="";return xt.forEach(((xt,_t)=>Ct+=`    group${_t}(points), // ${xt.name}\n`)),Ct})(Ct)}  ]\n  return geometries\n}\n\n${((xt,Ct)=>{let _t="";return xt.forEach(((xt,$t)=>{const Vn=xt.faces,Gn=xt.colors;_t+=`\n// group : ${xt.name}\n// faces: ${Vn.length}\n`,_t+=`const group${$t} = (points) => {\n${(xt=>{let Ct="  let faces = [\n";return xt.forEach((xt=>Ct+=`    [${xt}],\n`)),Ct+="  ]"})(Vn)}\n${(xt=>{let Ct="  let colors = [\n";return xt.forEach((xt=>{Ct+=xt?`    [${xt}],\n`:"    null,\n"})),Ct+="  ]"})(Gn)}\n  return primitives.polyhedron({ orientation: '${Ct.orientation}', points, faces, colors })\n}\n`})),_t})(Ct,_t)}\nmodule.exports = {main}\n`};Ct.exports={deserialize:(xt,Ct)=>{const _t={filename:"obj",output:"script",orientation:"outward",version:Gn,addMetaData:!0};xt=Object.assign({},_t,xt);const{output:$t}=xt;xt&&xt.statusCallback&&xt.statusCallback({progress:0});const{positions:Vn,groups:or}=getGroups(Ct,xt),lr="script"===$t?stringify(Vn,or,xt):objectify(Vn,or,xt);return xt&&xt.statusCallback&&xt.statusCallback({progress:100}),lr},extension:"obj"}},{"./package.json":75,"@jscad/modeling":210}],75:[function(xt,Ct,_t){Ct.exports={name:"@jscad/obj-deserializer",version:"2.0.26",description:"OBJ Deserializer for JSCAD",homepage:"https://openjscad.xyz/",repository:"https://github.com/jscad/OpenJSCAD.org",main:"index.js",scripts:{coverage:"nyc --all --reporter=html --reporter=text npm test",test:"ava --verbose --timeout 2m './tests/*.test.js'"},contributors:[{name:"Rene K. Mueller",url:"http://renekmueller.com"},{name:"z3dev",url:"http://www.z3d.jp"},{name:"Mark 'kaosat-dev' Moissette",url:"http://kaosat.net"}],keywords:["openjscad","jscad","import","deserializer","obj"],license:"MIT",dependencies:{"@jscad/modeling":"2.12.1"},devDependencies:{ava:"3.15.0",nyc:"15.1.0"},gitHead:"a90b9bad95a417661c619dc733e62c587dc71a4a"}},{}],76:[function(xt,Ct,_t){const{colors:$t,geometries:Vn,modifiers:Gn}=xt("@jscad/modeling"),{flatten:or,toArray:lr}=xt("@jscad/array-utils"),convertVertex=xt=>`v ${xt[0]} ${xt[1]} ${xt[2]}`,getColorName=xt=>{let Ct;if(xt.color){const _t=xt.color[0],Vn=xt.color[1],Gn=xt.color[2];let or=765;for(const xt in $t.cssColors){const lr=$t.cssColors[xt],Fr=Math.abs(_t-lr[0])+Math.abs(Vn-lr[1])+Math.abs(Gn-lr[2]);if(Fr<or){if(Ct=xt,0===Fr)break;or=Fr}}}return Ct};Ct.exports={serialize:(xt,...Ct)=>{xt=Object.assign({},{statusCallback:null,triangulate:!0},xt);let _t=(Ct=or(Ct)).filter((xt=>Vn.geom3.isA(xt)));if(0===_t.length)throw new Error("only 3D geometries can be serialized to OBJ");Ct.length!==_t.length&&console.warn("some objects could not be serialized to OBJ"),_t=lr(Gn.generalize({snap:!0,triangulate:xt.triangulate},_t)),xt.statusCallback&&xt.statusCallback({progress:0});let $t="# Wavefront OBJ file generated by JSCAD\n";const Fr=[];let Hr="default";return _t.forEach(((Ct,Gn)=>{xt.statusCallback&&xt.statusCallback({progress:100*Gn/_t.length}),$t+="\n";const or=getColorName(Ct),lr=Vn.geom3.toPolygons(Ct).filter((xt=>xt.vertices.length>=3));lr.forEach((xt=>{xt.vertices.forEach((xt=>{const Ct=convertVertex(xt);Fr.indexOf(Ct)<0&&(Fr.push(Ct),$t+=`${Ct}\n`)}))})),$t+="\n",lr.forEach((xt=>{const Ct=xt.vertices.map((xt=>Fr.indexOf(convertVertex(xt))+1)),_t=getColorName(xt)||or||"default";_t!==Hr&&($t+=`usemtl ${_t}\n`,Hr=_t),$t+=`f ${Ct.join(" ")}\n`}))})),xt.statusCallback&&xt.statusCallback({progress:100}),[$t]},mimeType:"application/object"}},{"@jscad/array-utils":525,"@jscad/modeling":210}],77:[function(xt,Ct,_t){const{maths:$t,primitives:Vn}=xt("@jscad/modeling"),{BinaryReader:Gn}=xt("@jscad/io-utils"),or=xt("./package.json").version,bufferToBinaryString=xt=>{let Ct="";const _t=new Uint8Array(xt),$t=_t.byteLength;for(let xt=0;xt<$t;xt++)Ct+=String.fromCharCode(_t[xt]);return Ct},isBuffer=xt=>void 0!==xt.byteLength&&"function"==typeof xt.slice,isDataBinaryRobust=xt=>{const Ct=(xt=>{if("string"!=typeof xt){const Ct=new Uint8Array(xt);let _t="";for(let $t=0;$t<xt.byteLength;$t++)_t+=String.fromCharCode(Ct[$t]);return _t}return xt})(xt);return null===/vertex[\s]+([-+]?[0-9]+\.?[0-9]*([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+/g.exec(Ct)},formatAsJscad=(xt,Ct,_t,$t)=>{let Vn="";return Ct&&(Vn=`\n  //\n  // producer: JSCAD STL Deserializer ${_t}\n  // date: ${new Date}\n  // source: ${$t}\n  // objects: ${xt.length}\n  //\n  `),Vn+="const {primitives} = require('@jscad/modeling')\n",Vn+=xt.join("\n"),Vn+`\nconst main = () => {\n return [${xt.map(((xt,Ct)=>`solid${Ct+1}()`))}]\n}\n\nmodule.exports = {main}\n`},formatAsCsg=xt=>xt,deserializeBinarySTL=(xt,Ct,_t,Vn)=>{const or=[],lr=[],Fr=[],Hr=[];let xo=0,Eo=0,Mo=null;const Oo=parseInt("01000000000000000",2),Ro=parseInt("00000000000011111",2),Io=parseInt("00000001111100000",2),Bo=parseInt("00111110000000000",2),zo=new Gn(xt);let Ho=0,Qo=0,pi=0,gi=0,es=0,ts=0;for(let xt=0;xt<80;xt++)switch(Ho){case 6:pi=zo.readUInt8(),Ho+=1;continue;case 7:gi=zo.readUInt8(),Ho+=1;continue;case 8:es=zo.readUInt8(),Ho+=1;continue;case 9:ts=zo.readUInt8(),Ho+=1;continue;default:switch(Qo=zo.readChar()){case"C":case"O":case"L":case"R":case"=":Ho+=1}}10===Ho&&(Mo=[pi/255,gi/255,es/255,ts/255]);const ns=zo.readUInt32();for(let xt=0;xt<ns;xt++){const xt=[];xt.push(zo.readFloat()),xt.push(zo.readFloat()),xt.push(zo.readFloat());let Ct=[];Ct.push(zo.readFloat()),Ct.push(zo.readFloat()),Ct.push(zo.readFloat());const _t=[];_t.push(zo.readFloat()),_t.push(zo.readFloat()),_t.push(zo.readFloat());let Vn=[];Vn.push(zo.readFloat()),Vn.push(zo.readFloat()),Vn.push(zo.readFloat());let Gn=0;for(let $t=0;$t<3;$t++)isNaN(Ct[$t])&&Gn++,isNaN(_t[$t])&&Gn++,isNaN(Vn[$t])&&Gn++,isNaN(xt[$t])&&Gn++;Gn>0&&console.log("bad triangle vertice coords/normal: ",Gn),Eo+=Gn;const Qo=[];Qo.push(xo++),Qo.push(xo++),Qo.push(xo++);const pi=zo.readUInt16();let gi=null;if(10===Ho){gi=pi&Oo?Mo:[(pi&Ro)/31,((pi&Io)>>>5)/31,((pi&Bo)>>>10)/31,255],Hr.push(gi)}if(0===Gn){const Gn=$t.vec3.subtract($t.vec3.create(),_t,Ct),or=$t.vec3.subtract($t.vec3.create(),Vn,Ct),lr=$t.vec3.cross($t.vec3.create(),Gn,or);if($t.vec3.dot(xt,lr)>0){const xt=Vn;Vn=Ct,Ct=xt}}or.push(Ct),or.push(_t),or.push(Vn),lr.push(Qo),Fr.push(xt)}return Eo&&console.warn(`WARNING: import errors: ${Eo} (some triangles might be misaligned or missing)`),[Vn({vertices:or,triangles:lr,normals:Fr,colors:Hr,index:1})]},deserializeAsciiSTL=(xt,Ct,_t,Vn)=>{let Gn=0;const or=xt.split("endsolid"),lr=[];for(let Ct=1;Ct<or.length;Ct++){const _t=/\bfacet[\s\S]*?endloop/gim,or=[],Fr=[],Hr=[],xo=[];let Eo=0,Mo=0;const Oo=xt.match(_t);if(null!=Oo){for(let xt=0;xt<Oo.length;xt++){const Ct=/\bfacet\s+normal\s+(\S+)\s+(\S+)\s+(\S+)\s+outer\s+loop\s+vertex\s+(\S+)\s+(\S+)\s+(\S+)\s+vertex\s+(\S+)\s+(\S+)\s+(\S+)\s+vertex\s+(\S+)\s+(\S+)\s+(\S+)\s*/gim.exec(Oo[xt]);if(null==Ct)continue;if(13!==Ct.length){console.log("Failed to parse "+Oo[xt]);break}let _t=0;for(let xt=0;xt<Ct.length;xt++)"NaN"===Ct[xt]&&(console.log("bad normal or triangle vertice #"+Gn+" "+xt+": '"+Ct[xt]+"', skipped"),_t++);if(Mo+=_t,_t)continue;let Vn=1;const lr=[];lr.push(parseFloat(Ct[Vn++])),lr.push(parseFloat(Ct[Vn++])),lr.push(parseFloat(Ct[Vn++]));let xo=[];xo.push(parseFloat(Ct[Vn++])),xo.push(parseFloat(Ct[Vn++])),xo.push(parseFloat(Ct[Vn++]));const Ro=[];Ro.push(parseFloat(Ct[Vn++])),Ro.push(parseFloat(Ct[Vn++])),Ro.push(parseFloat(Ct[Vn++]));let Io=[];Io.push(parseFloat(Ct[Vn++])),Io.push(parseFloat(Ct[Vn++])),Io.push(parseFloat(Ct[Vn++]));const Bo=[];if(Bo.push(Eo++),Bo.push(Eo++),Bo.push(Eo++),0===_t){const xt=$t.vec3.subtract($t.vec3.create(),Ro,xo),Ct=$t.vec3.subtract($t.vec3.create(),Io,xo),_t=$t.vec3.cross($t.vec3.create(),xt,Ct);if($t.vec3.dot(lr,_t)>0){const xt=Io;Io=xo,xo=xt}}or.push(xo),or.push(Ro),or.push(Io),Hr.push(lr),Fr.push(Bo),Gn++}Mo&&console.warn(`WARNING: import errors: ${Mo} (some triangles might be misaligned or missing)`),lr.push(Vn({vertices:or,triangles:Fr,colors:xo,index:Ct}))}}return lr},toPolyhedron=(xt,Ct,_t,$t)=>{$t&&Ct.length!==$t.length&&($t=void 0);const Gn={orientation:"inward",points:xt,faces:Ct,colors:$t};return Vn.polyhedron(Gn)},toScript=(xt,Ct,_t,$t,Vn)=>{let Gn=`\n//\n// solid ${Vn} : ${xt.length} points, ${Ct.length} faces, ${$t.length} colors\n//\nconst solid${Vn} = () => {\n`;Gn+="  const points = [\n";for(let Ct=0;Ct<xt.length;Ct++)Gn+=`    [${xt[Ct]}],\n`;Gn+="  ]\n",Gn+="  const faces = [\n";for(let xt=0;xt<Ct.length;xt++)Gn+=`    [${Ct[xt]}],\n`;if(Gn+="  ]\n",$t&&Ct.length===$t.length){Gn+="  const colors = [\n";for(let xt=0;xt<$t.length;xt++)Gn+=`    [${$t[xt]}],\n`;Gn+="  ]\n"}else Gn+="  const colors = null\n";return Gn+"  return primitives.polyhedron({points, faces, colors, orientation: 'inside'})\n}\n"};Ct.exports={deserialize:(xt,Ct)=>{const _t={filename:"stl",version:or,addMetaData:!0,output:"script"};(xt=Object.assign({},_t,xt))&&xt.statusCallback&&xt.statusCallback({progress:0});const{filename:$t,version:Vn,output:Gn,addMetaData:lr}=xt;Ct=isBuffer(Ct)?bufferToBinaryString(Ct):Ct;const Fr=isDataBinaryRobust(Ct);xt&&xt.statusCallback&&xt.statusCallback({progress:33}),xt&&xt.statusCallback&&xt.statusCallback({progress:66});const Hr=("script"===Gn?formatAsJscad:formatAsCsg)((Fr?deserializeBinarySTL:deserializeAsciiSTL)(Ct,$t,Vn,"script"===Gn?({vertices:xt,triangles:Ct,normals:_t,colors:$t,index:Vn})=>toScript(xt,Ct,null,$t,Vn):({vertices:xt,triangles:Ct,normals:_t,colors:$t})=>toPolyhedron(xt,Ct,null,$t)),lr,Vn,$t);return xt&&xt.statusCallback&&xt.statusCallback({progress:100}),Hr},extension:"stl"}},{"./package.json":78,"@jscad/io-utils":65,"@jscad/modeling":210}],78:[function(xt,Ct,_t){Ct.exports={name:"@jscad/stl-deserializer",version:"2.1.23",description:"STL Deserializer for JSCAD",homepage:"https://openjscad.xyz/",repository:"https://github.com/jscad/OpenJSCAD.org",main:"index.js",scripts:{coverage:"nyc --all --reporter=html --reporter=text npm test",test:"ava --verbose --timeout 2m './tests/*.test.js'"},contributors:[{name:"Rene K. Mueller",url:"http://renekmueller.com"},{name:"z3dev",url:"http://www.z3d.jp"},{name:"Mark 'kaosat-dev' Moissette",url:"http://kaosat.net"}],keywords:["openjscad","jscad","import","deserializer","stl"],license:"MIT",dependencies:{"@jscad/io-utils":"2.0.26","@jscad/modeling":"2.12.1"},devDependencies:{ava:"3.15.0",nyc:"15.1.0"},gitHead:"a90b9bad95a417661c619dc733e62c587dc71a4a"}},{}],79:[function(xt,Ct,_t){const{geometries:$t}=xt("@jscad/modeling"),convertToStl=(xt,Ct)=>{const _t=[];return xt.forEach((($t,Vn)=>{_t.push(convertToFacets($t,Ct)),Ct.statusCallback&&Ct.statusCallback({progress:100*Vn/xt.length})})),_t.join("\n")},convertToFacets=(xt,Ct)=>{const _t=[];return $t.geom3.toPolygons(xt).forEach(((xt,Ct)=>{_t.push(convertToFacet(xt))})),_t.join("\n")},vector3DtoStlString=xt=>`${xt[0]} ${xt[1]} ${xt[2]}`,vertextoStlString=xt=>`vertex ${vector3DtoStlString(xt)}`,convertToFacet=xt=>{const Ct=[];if(xt.vertices.length>=3){const _t=vertextoStlString(xt.vertices[0]);for(let Vn=0;Vn<xt.vertices.length-2;Vn++){const Gn=`facet normal ${vector3DtoStlString($t.poly3.plane(xt))}\nouter loop\n${_t}\n${vertextoStlString(xt.vertices[Vn+1])}\n${vertextoStlString(xt.vertices[Vn+2])}\nendloop\nendfacet`;Ct.push(Gn)}}return Ct.join("\n")};Ct.exports={serializeText:(xt,Ct)=>{Ct.statusCallback&&Ct.statusCallback({progress:0});const _t=`solid JSCAD\n${convertToStl(xt,Ct)}\nendsolid JSCAD\n`;return Ct.statusCallback&&Ct.statusCallback({progress:100}),[_t]}}},{"@jscad/modeling":210}],80:[function(xt,Ct,_t){const{geometries:$t}=xt("@jscad/modeling");Ct.exports={serializeBinary:(xt,Ct)=>{Ct.statusCallback&&Ct.statusCallback({progress:0});const _t=new ArrayBuffer(4),Vn=new Int32Array(_t,0,1),Gn=new Int8Array(_t,0,4);if(Vn[0]=287454020,68!==Gn[0])throw new Error("Binary STL output is currently only supported on little-endian (Intel) processors");let or=0,lr=0;xt.forEach(((xt,Ct)=>{$t.geom3.toPolygons(xt).forEach((xt=>{const Ct=xt.vertices.length;or+=Ct>=3?Ct-2:0,lr+=1}))}));const Fr=new Uint8Array(80);for(let xt=0;xt<80;xt++)Fr[xt]=65;const Hr=new Uint32Array(1);Hr[0]=or;const xo=new ArrayBuffer(50*or),Eo=new Int8Array(xo),Mo=new ArrayBuffer(50),Oo=new Int8Array(Mo),Ro=new Float32Array(Mo,0,12),Io=new Uint16Array(Mo,48,1);let Bo=0;return xt.forEach((xt=>{$t.geom3.toPolygons(xt).forEach(((xt,_t)=>{const Vn=xt.vertices,Gn=Vn.length,or=$t.poly3.plane(xt);for(let xt=0;xt<Gn-2;xt++){Ro[0]=or[0],Ro[1]=or[1],Ro[2]=or[2];let Ct=3;for(let _t=0;_t<3;_t++){const $t=Vn[_t+(_t>0?xt:0)];Ro[Ct++]=$t[0],Ro[Ct++]=$t[1],Ro[Ct++]=$t[2]}Io[0]=0,Eo.set(Oo,Bo),Bo+=50}Ct.statusCallback&&Ct.statusCallback({progress:100*_t/lr})}))})),Ct.statusCallback&&Ct.statusCallback({progress:100}),[Fr.buffer,Hr.buffer,xo]}}},{"@jscad/modeling":210}],81:[function(xt,Ct,_t){const{geometries:$t,modifiers:Vn}=xt("@jscad/modeling"),{flatten:Gn,toArray:or}=xt("@jscad/array-utils"),{serializeBinary:lr}=xt("./CSGToStlb"),{serializeText:Fr}=xt("./CSGToStla");Ct.exports={mimeType:"application/sla",serialize:(xt,...Ct)=>{xt=Object.assign({},{binary:!0,statusCallback:null},xt);let _t=(Ct=Gn(Ct)).filter((xt=>$t.geom3.isA(xt)));if(0===_t.length)throw new Error("only 3D geometries can be serialized to STL");return Ct.length!==_t.length&&console.warn("some objects could not be serialized to STL"),_t=or(Vn.generalize({snap:!0,triangulate:!0},_t)),xt.binary?lr(_t,xt):Fr(_t,xt)}}},{"./CSGToStla":79,"./CSGToStlb":80,"@jscad/array-utils":525,"@jscad/modeling":210}],82:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.CHAR="\t\n\r -íŸ¿î€€-ï¿½ð€€-ô¿¿",_t.S=" \t\r\n",_t.NAME_START_CHAR=":A-Z_a-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â€Œâ€â°-â†â°€-â¿¯ã€-íŸ¿ï¤€-ï·ï·°-ï¿½ð€€-ó¯¿¿",_t.NAME_CHAR="-"+_t.NAME_START_CHAR+".0-9Â·Ì€-Í¯â€¿-â€",_t.CHAR_RE=new RegExp("^["+_t.CHAR+"]$","u"),_t.S_RE=new RegExp("^["+_t.S+"]+$","u"),_t.NAME_START_CHAR_RE=new RegExp("^["+_t.NAME_START_CHAR+"]$","u"),_t.NAME_CHAR_RE=new RegExp("^["+_t.NAME_CHAR+"]$","u"),_t.NAME_RE=new RegExp("^["+_t.NAME_START_CHAR+"]["+_t.NAME_CHAR+"]*$","u"),_t.NMTOKEN_RE=new RegExp("^["+_t.NAME_CHAR+"]+$","u");function isNameStartChar(xt){return xt>=65&&xt<=90||xt>=97&&xt<=122||58===xt||95===xt||8204===xt||8205===xt||xt>=192&&xt<=214||xt>=216&&xt<=246||xt>=248&&xt<=767||xt>=880&&xt<=893||xt>=895&&xt<=8191||xt>=8304&&xt<=8591||xt>=11264&&xt<=12271||xt>=12289&&xt<=55295||xt>=63744&&xt<=64975||xt>=65008&&xt<=65533||xt>=65536&&xt<=983039}_t.S_LIST=[32,10,13,9],_t.isChar=function isChar(xt){return xt>=32&&xt<=55295||10===xt||13===xt||9===xt||xt>=57344&&xt<=65533||xt>=65536&&xt<=1114111},_t.isS=function isS(xt){return 32===xt||10===xt||13===xt||9===xt},_t.isNameStartChar=isNameStartChar,_t.isNameChar=function isNameChar(xt){return isNameStartChar(xt)||xt>=48&&xt<=57||45===xt||46===xt||183===xt||xt>=768&&xt<=879||xt>=8255&&xt<=8256}},{}],83:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.CHAR="-íŸ¿î€€-ï¿½ð€€-ô¿¿",_t.RESTRICTED_CHAR="-\b\v\f--Â„Â†-ÂŸ",_t.S=" \t\r\n",_t.NAME_START_CHAR=":A-Z_a-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â€Œâ€â°-â†â°€-â¿¯ã€-íŸ¿ï¤€-ï·ï·°-ï¿½ð€€-ó¯¿¿",_t.NAME_CHAR="-"+_t.NAME_START_CHAR+".0-9Â·Ì€-Í¯â€¿-â€",_t.CHAR_RE=new RegExp("^["+_t.CHAR+"]$","u"),_t.RESTRICTED_CHAR_RE=new RegExp("^["+_t.RESTRICTED_CHAR+"]$","u"),_t.S_RE=new RegExp("^["+_t.S+"]+$","u"),_t.NAME_START_CHAR_RE=new RegExp("^["+_t.NAME_START_CHAR+"]$","u"),_t.NAME_CHAR_RE=new RegExp("^["+_t.NAME_CHAR+"]$","u"),_t.NAME_RE=new RegExp("^["+_t.NAME_START_CHAR+"]["+_t.NAME_CHAR+"]*$","u"),_t.NMTOKEN_RE=new RegExp("^["+_t.NAME_CHAR+"]+$","u");function isNameStartChar(xt){return xt>=65&&xt<=90||xt>=97&&xt<=122||58===xt||95===xt||8204===xt||8205===xt||xt>=192&&xt<=214||xt>=216&&xt<=246||xt>=248&&xt<=767||xt>=880&&xt<=893||xt>=895&&xt<=8191||xt>=8304&&xt<=8591||xt>=11264&&xt<=12271||xt>=12289&&xt<=55295||xt>=63744&&xt<=64975||xt>=65008&&xt<=65533||xt>=65536&&xt<=983039}_t.S_LIST=[32,10,13,9],_t.isChar=function isChar(xt){return xt>=1&&xt<=55295||xt>=57344&&xt<=65533||xt>=65536&&xt<=1114111},_t.isRestrictedChar=function isRestrictedChar(xt){return xt>=1&&xt<=8||11===xt||12===xt||xt>=14&&xt<=31||xt>=127&&xt<=132||xt>=134&&xt<=159},_t.isCharAndNotRestricted=function isCharAndNotRestricted(xt){return 9===xt||10===xt||13===xt||xt>31&&xt<127||133===xt||xt>159&&xt<=55295||xt>=57344&&xt<=65533||xt>=65536&&xt<=1114111},_t.isS=function isS(xt){return 32===xt||10===xt||13===xt||9===xt},_t.isNameStartChar=isNameStartChar,_t.isNameChar=function isNameChar(xt){return isNameStartChar(xt)||xt>=48&&xt<=57||45===xt||46===xt||183===xt||xt>=768&&xt<=879||xt>=8255&&xt<=8256}},{}],84:[function(xt,Ct,_t){"use strict";function isNCNameStartChar(xt){return xt>=65&&xt<=90||95===xt||xt>=97&&xt<=122||xt>=192&&xt<=214||xt>=216&&xt<=246||xt>=248&&xt<=767||xt>=880&&xt<=893||xt>=895&&xt<=8191||xt>=8204&&xt<=8205||xt>=8304&&xt<=8591||xt>=11264&&xt<=12271||xt>=12289&&xt<=55295||xt>=63744&&xt<=64975||xt>=65008&&xt<=65533||xt>=65536&&xt<=983039}Object.defineProperty(_t,"__esModule",{value:!0}),_t.NC_NAME_START_CHAR="A-Z_a-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â€Œ-â€â°-â†â°€-â¿¯ã€-íŸ¿ï¤€-ï·ï·°-ï¿½ð€€-ó¯¿¿",_t.NC_NAME_CHAR="-"+_t.NC_NAME_START_CHAR+".0-9Â·Ì€-Í¯â€¿-â€",_t.NC_NAME_START_CHAR_RE=new RegExp("^["+_t.NC_NAME_START_CHAR+"]$","u"),_t.NC_NAME_CHAR_RE=new RegExp("^["+_t.NC_NAME_CHAR+"]$","u"),_t.NC_NAME_RE=new RegExp("^["+_t.NC_NAME_START_CHAR+"]["+_t.NC_NAME_CHAR+"]*$","u"),_t.isNCNameStartChar=isNCNameStartChar,_t.isNCNameChar=function isNCNameChar(xt){return isNCNameStartChar(xt)||45===xt||46===xt||xt>=48&&xt<=57||183===xt||xt>=768&&xt<=879||xt>=8255&&xt<=8256}},{}],85:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0});const $t=xt("xmlchars/xml/1.0/ed5"),Vn=xt("xmlchars/xml/1.1/ed2"),Gn=xt("xmlchars/xmlns/1.0/ed3");var or=$t.isS,lr=$t.isChar,Fr=$t.isNameStartChar,Hr=$t.isNameChar,xo=$t.S_LIST,Eo=$t.NAME_RE,Mo=Vn.isChar,Oo=Gn.isNCNameStartChar,Ro=Gn.isNCNameChar,Io=Gn.NC_NAME_RE;const Bo="http://www.w3.org/XML/1998/namespace",zo="http://www.w3.org/2000/xmlns/",Ho={__proto__:null,xml:Bo,xmlns:zo},Qo={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},pi=-1,gi=-2,es=13,ts=33,ns=10,rs=60,os=61,is=62,ss=63,as=93,isQuote=xt=>34===xt||39===xt,ls=[34,39],cs=[...ls,91,is],us=[...ls,rs,as],fs=[os,ss,...xo],hs=[...xo,is,38,rs];function nsPairCheck(xt,Ct,_t){switch(Ct){case"xml":_t!==Bo&&xt.fail(`xml prefix must be bound to ${Bo}.`);break;case"xmlns":_t!==zo&&xt.fail(`xmlns prefix must be bound to ${zo}.`)}switch(_t){case zo:xt.fail(""===Ct?`the default namespace may not be set to ${_t}.`:`may not assign a prefix (even "xmlns") to the URI ${zo}.`);break;case Bo:switch(Ct){case"xml":break;case"":xt.fail(`the default namespace may not be set to ${_t}.`);break;default:xt.fail("may not assign the xml namespace to another prefix.")}}}const isNCName=xt=>Io.test(xt),isName=xt=>Eo.test(xt);_t.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const ps={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};_t.SaxesParser=class SaxesParser{constructor(xt){this.opt=null!=xt?xt:{},this.fragmentOpt=!!this.opt.fragment;const Ct=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=!1!==this.opt.position,this.fileName=this.opt.fileName,Ct){this.nameStartCheck=Oo,this.nameCheck=Ro,this.isName=isNCName,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},Ho);const xt=this.opt.additionalNamespaces;null!=xt&&(function nsMappingCheck(xt,Ct){for(const _t of Object.keys(Ct))nsPairCheck(xt,_t,Ct[_t])}(this,xt),Object.assign(this.ns,xt))}else this.nameStartCheck=Fr,this.nameCheck=Hr,this.isName=isName,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var xt;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:Ct}=this;this.state=Ct?es:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=Ct,this.xmlDeclPossible=!Ct,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:_t}=this.opt;if(void 0===_t){if(!0===this.opt.forceXMLVersion)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");_t="1.0"}this.setXMLVersion(_t),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(Qo),null===(xt=this.readyHandler)||void 0===xt||xt.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(xt,Ct){this[ps[xt]]=Ct}off(xt){this[ps[xt]]=void 0}makeError(xt){var Ct;let _t=null!==(Ct=this.fileName)&&void 0!==Ct?Ct:"";return this.trackPosition&&(_t.length>0&&(_t+=":"),_t+=`${this.line}:${this.column}`),_t.length>0&&(_t+=": "),new Error(_t+xt)}fail(xt){const Ct=this.makeError(xt),_t=this.errorHandler;if(void 0===_t)throw Ct;return _t(Ct),this}write(xt){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let Ct=!1;null===xt?(Ct=!0,xt=""):"object"==typeof xt&&(xt=xt.toString()),void 0!==this.carriedFromPrevious&&(xt=`${this.carriedFromPrevious}${xt}`,this.carriedFromPrevious=void 0);let _t=xt.length;const $t=xt.charCodeAt(_t-1);!Ct&&(13===$t||$t>=55296&&$t<=56319)&&(this.carriedFromPrevious=xt[_t-1],_t--,xt=xt.slice(0,_t));const{stateTable:Vn}=this;for(this.chunk=xt,this.i=0;this.i<_t;)Vn[this.state].call(this);return this.chunkPosition+=_t,Ct?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:xt,i:Ct}=this;if(this.prevI=Ct,this.i=Ct+1,Ct>=xt.length)return pi;const _t=xt.charCodeAt(Ct);if(this.column++,_t<55296){if(_t>=32||9===_t)return _t;switch(_t){case ns:return this.line++,this.column=0,this.positionAtNewLine=this.position,ns;case 13:return xt.charCodeAt(Ct+1)===ns&&(this.i=Ct+2),this.line++,this.column=0,this.positionAtNewLine=this.position,gi;default:return this.fail("disallowed character."),_t}}if(_t>56319)return _t>=57344&&_t<=65533||this.fail("disallowed character."),_t;const $t=65536+1024*(_t-55296)+(xt.charCodeAt(Ct+1)-56320);return this.i=Ct+2,$t>1114111&&this.fail("disallowed character."),$t}getCode11(){const{chunk:xt,i:Ct}=this;if(this.prevI=Ct,this.i=Ct+1,Ct>=xt.length)return pi;const _t=xt.charCodeAt(Ct);if(this.column++,_t<55296){if(_t>31&&_t<127||_t>159&&8232!==_t||9===_t)return _t;switch(_t){case ns:return this.line++,this.column=0,this.positionAtNewLine=this.position,ns;case 13:{const _t=xt.charCodeAt(Ct+1);_t!==ns&&133!==_t||(this.i=Ct+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,gi;default:return this.fail("disallowed character."),_t}}if(_t>56319)return _t>=57344&&_t<=65533||this.fail("disallowed character."),_t;const $t=65536+1024*(_t-55296)+(xt.charCodeAt(Ct+1)-56320);return this.i=Ct+2,$t>1114111&&this.fail("disallowed character."),$t}getCodeNorm(){const xt=this.getCode();return xt===gi?ns:xt}unget(){this.i=this.prevI,this.column--}captureTo(xt){let{i:Ct}=this;const{chunk:_t}=this;for(;;){const $t=this.getCode(),Vn=$t===gi,Gn=Vn?ns:$t;if(Gn===pi||xt.includes(Gn))return this.text+=_t.slice(Ct,this.prevI),Gn;Vn&&(this.text+=`${_t.slice(Ct,this.prevI)}\n`,Ct=this.i)}}captureToChar(xt){let{i:Ct}=this;const{chunk:_t}=this;for(;;){let $t=this.getCode();switch($t){case gi:this.text+=`${_t.slice(Ct,this.prevI)}\n`,Ct=this.i,$t=ns;break;case pi:return this.text+=_t.slice(Ct),!1}if($t===xt)return this.text+=_t.slice(Ct,this.prevI),!0}}captureNameChars(){const{chunk:xt,i:Ct}=this;for(;;){const _t=this.getCode();if(_t===pi)return this.name+=xt.slice(Ct),pi;if(!Hr(_t))return this.name+=xt.slice(Ct,this.prevI),_t===gi?ns:_t}}skipSpaces(){for(;;){const xt=this.getCodeNorm();if(xt===pi||!or(xt))return xt}}setXMLVersion(xt){this.currentXMLVersion=xt,"1.0"===xt?(this.isChar=lr,this.getCode=this.getCode10):(this.isChar=Mo,this.getCode=this.getCode11)}sBegin(){65279===this.chunk.charCodeAt(0)&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const xt=this.i,Ct=this.skipSpaces();switch(this.prevI!==xt&&(this.xmlDeclPossible=!1),Ct){case rs:if(this.state=15,0!==this.text.length)throw new Error("no-empty text at start");break;case pi:break;default:this.unget(),this.state=es,this.xmlDeclPossible=!1}}sDoctype(){var xt;const Ct=this.captureTo(cs);switch(Ct){case is:null===(xt=this.doctypeHandler)||void 0===xt||xt.call(this,this.text),this.text="",this.state=es,this.doctype=!0;break;case pi:break;default:this.text+=String.fromCodePoint(Ct),91===Ct?this.state=4:isQuote(Ct)&&(this.state=3,this.q=Ct)}}sDoctypeQuote(){const xt=this.q;this.captureToChar(xt)&&(this.text+=String.fromCodePoint(xt),this.q=null,this.state=2)}sDTD(){const xt=this.captureTo(us);xt!==pi&&(this.text+=String.fromCodePoint(xt),xt===as?this.state=2:xt===rs?this.state=6:isQuote(xt)&&(this.state=5,this.q=xt))}sDTDQuoted(){const xt=this.q;this.captureToChar(xt)&&(this.text+=String.fromCodePoint(xt),this.state=4,this.q=null)}sDTDOpenWaka(){const xt=this.getCodeNorm();switch(this.text+=String.fromCodePoint(xt),xt){case 33:this.state=7,this.openWakaBang="";break;case ss:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const xt=String.fromCodePoint(this.getCodeNorm()),Ct=this.openWakaBang+=xt;this.text+=xt,"-"!==Ct&&(this.state="--"===Ct?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const xt=this.getCodeNorm();this.text+=String.fromCodePoint(xt),this.state=45===xt?10:8}sDTDCommentEnded(){const xt=this.getCodeNorm();this.text+=String.fromCodePoint(xt),xt===is?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(ss)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const xt=this.getCodeNorm();this.text+=String.fromCodePoint(xt),xt===is&&(this.state=4)}sText(){0!==this.tags.length?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:xt}=this;const{chunk:Ct}=this;e:for(;;)switch(this.getCode()){case gi:this.entity+=`${Ct.slice(xt,this.prevI)}\n`,xt=this.i;break;case 59:{const{entityReturnState:_t}=this,$t=this.entity+Ct.slice(xt,this.prevI);let Vn;this.state=_t,""===$t?(this.fail("empty entity name."),Vn="&;"):(Vn=this.parseEntity($t),this.entity=""),_t===es&&void 0===this.textHandler||(this.text+=Vn);break e}case pi:this.entity+=Ct.slice(xt);break e}}sOpenWaka(){const xt=this.getCode();if(Fr(xt))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(xt){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case ss:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=es,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var xt;const Ct=this.getCodeNorm();45===Ct?(this.state=19,null===(xt=this.commentHandler)||void 0===xt||xt.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(Ct)}`,this.state=17)}sCommentEnded(){const xt=this.getCodeNorm();xt!==is?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(xt)}`,this.state=17):this.state=es}sCData(){this.captureToChar(as)&&(this.state=21)}sCDataEnding(){const xt=this.getCodeNorm();xt===as?this.state=22:(this.text+=`]${String.fromCodePoint(xt)}`,this.state=20)}sCDataEnding2(){var xt;const Ct=this.getCodeNorm();switch(Ct){case is:null===(xt=this.cdataHandler)||void 0===xt||xt.call(this,this.text),this.text="",this.state=es;break;case as:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(Ct)}`,this.state=20}}sPIFirstChar(){const xt=this.getCodeNorm();this.nameStartCheck(xt)?(this.piTarget+=String.fromCodePoint(xt),this.state=24):xt===ss||or(xt)?(this.fail("processing instruction without a target."),this.state=xt===ss?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(xt),this.state=24)}sPIRest(){const{chunk:xt,i:Ct}=this;for(;;){const _t=this.getCodeNorm();if(_t===pi)return void(this.piTarget+=xt.slice(Ct));if(!this.nameCheck(_t)){this.piTarget+=xt.slice(Ct,this.prevI);const $t=_t===ss;$t||or(_t)?"xml"===this.piTarget?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=$t?ts:27):this.state=$t?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(_t));break}}}sPIBody(){if(0===this.text.length){const xt=this.getCodeNorm();xt===ss?this.state=26:or(xt)||(this.text=String.fromCodePoint(xt))}else this.captureToChar(ss)&&(this.state=26)}sPIEnding(){var xt;const Ct=this.getCodeNorm();if(Ct===is){const{piTarget:Ct}=this;"xml"===Ct.toLowerCase()&&this.fail("the XML declaration must appear at the start of the document."),null===(xt=this.piHandler)||void 0===xt||xt.call(this,{target:Ct,body:this.text}),this.piTarget=this.text="",this.state=es}else Ct===ss?this.text+="?":(this.text+=`?${String.fromCodePoint(Ct)}`,this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const xt=this.skipSpaces();xt!==ss?xt!==pi&&(this.state=28,this.name=String.fromCodePoint(xt)):this.state=ts}sXMLDeclName(){const xt=this.captureTo(fs);if(xt===ss)return this.state=ts,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(or(xt)||xt===os){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=xt===os?30:29}}sXMLDeclEq(){const xt=this.getCodeNorm();if(xt===ss)return this.state=ts,void this.fail("XML declaration is incomplete.");or(xt)||(xt!==os&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const xt=this.getCodeNorm();if(xt===ss)return this.state=ts,void this.fail("XML declaration is incomplete.");or(xt)||(isQuote(xt)?this.q=xt:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const xt=this.captureTo([this.q,ss]);if(xt===ss)return this.state=ts,this.text="",void this.fail("XML declaration is incomplete.");if(xt===pi)return;const Ct=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const xt=Ct;this.xmlDecl.version=xt,/^1\.[0-9]+$/.test(xt)?this.opt.forceXMLVersion||this.setXMLVersion(xt):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(Ct)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=Ct;break;case"standalone":"yes"!==Ct&&"no"!==Ct&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=Ct}this.name="",this.state=32}sXMLDeclSeparator(){const xt=this.getCodeNorm();xt!==ss?(or(xt)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=ts}sXMLDeclEnding(){var xt;this.getCodeNorm()===is?("xml"!==this.piTarget?this.fail("processing instructions are not allowed before root."):"version"!==this.name&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),null===(xt=this.xmldeclHandler)||void 0===xt||xt.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=es):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var xt;const Ct=this.captureNameChars();if(Ct===pi)return;const _t=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=_t.ns=Object.create(null)),null===(xt=this.openTagStartHandler)||void 0===xt||xt.call(this,_t),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),Ct){case is:this.openTag();break;case 47:this.state=35;break;default:or(Ct)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===is?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const xt=this.skipSpaces();xt!==pi&&(Fr(xt)?(this.unget(),this.state=37):xt===is?this.openTag():47===xt?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const xt=this.captureNameChars();xt===os?this.state=39:or(xt)?this.state=38:xt===is?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):xt!==pi&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const xt=this.skipSpaces();switch(xt){case pi:return;case os:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",xt===is?this.openTag():Fr(xt)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const xt=this.getCodeNorm();isQuote(xt)?(this.q=xt,this.state=40):or(xt)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:xt,chunk:Ct}=this;let{i:_t}=this;for(;;)switch(this.getCode()){case xt:return this.pushAttrib(this.name,this.text+Ct.slice(_t,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=Ct.slice(_t,this.prevI),this.state=14,void(this.entityReturnState=40);case ns:case gi:case 9:this.text+=`${Ct.slice(_t,this.prevI)} `,_t=this.i;break;case rs:return this.text+=Ct.slice(_t,this.prevI),void this.fail("disallowed character.");case pi:return void(this.text+=Ct.slice(_t))}}sAttribValueClosed(){const xt=this.getCodeNorm();or(xt)?this.state=36:xt===is?this.openTag():47===xt?this.state=35:Fr(xt)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const xt=this.captureTo(hs);switch(xt){case 38:this.state=14,this.entityReturnState=42;break;case rs:this.fail("disallowed character.");break;case pi:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",xt===is?this.openTag():this.state=36}}sCloseTag(){const xt=this.captureNameChars();xt===is?this.closeTag():or(xt)?this.state=44:xt!==pi&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case is:this.closeTag();break;case pi:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:xt,forbiddenState:Ct}=this;const{chunk:_t,textHandler:$t}=this;e:for(;;)switch(this.getCode()){case rs:if(this.state=15,void 0!==$t){const{text:Ct}=this,Vn=_t.slice(xt,this.prevI);0!==Ct.length?($t(Ct+Vn),this.text=""):0!==Vn.length&&$t(Vn)}Ct=0;break e;case 38:this.state=14,this.entityReturnState=es,void 0!==$t&&(this.text+=_t.slice(xt,this.prevI)),Ct=0;break e;case as:switch(Ct){case 0:Ct=1;break;case 1:Ct=2;break;case 2:break;default:throw new Error("impossible state")}break;case is:2===Ct&&this.fail('the string "]]>" is disallowed in char data.'),Ct=0;break;case gi:void 0!==$t&&(this.text+=`${_t.slice(xt,this.prevI)}\n`),xt=this.i,Ct=0;break;case pi:void 0!==$t&&(this.text+=_t.slice(xt));break e;default:Ct=0}this.forbiddenState=Ct}handleTextOutsideRoot(){let{i:xt}=this;const{chunk:Ct,textHandler:_t}=this;let $t=!1;e:for(;;){const Vn=this.getCode();switch(Vn){case rs:if(this.state=15,void 0!==_t){const{text:$t}=this,Vn=Ct.slice(xt,this.prevI);0!==$t.length?(_t($t+Vn),this.text=""):0!==Vn.length&&_t(Vn)}break e;case 38:this.state=14,this.entityReturnState=es,void 0!==_t&&(this.text+=Ct.slice(xt,this.prevI)),$t=!0;break e;case gi:void 0!==_t&&(this.text+=`${Ct.slice(xt,this.prevI)}\n`),xt=this.i;break;case pi:void 0!==_t&&(this.text+=Ct.slice(xt));break e;default:or(Vn)||($t=!0)}}$t&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(xt,Ct){var _t;const{prefix:$t,local:Vn}=this.qname(xt),Gn={name:xt,prefix:$t,local:Vn,value:Ct};if(this.attribList.push(Gn),null===(_t=this.attributeHandler)||void 0===_t||_t.call(this,Gn),"xmlns"===$t){const xt=Ct.trim();"1.0"===this.currentXMLVersion&&""===xt&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[Vn]=xt,nsPairCheck(this,Vn,xt)}else if("xmlns"===xt){const xt=Ct.trim();this.topNS[""]=xt,nsPairCheck(this,"",xt)}}pushAttribPlain(xt,Ct){var _t;const $t={name:xt,value:Ct};this.attribList.push($t),null===(_t=this.attributeHandler)||void 0===_t||_t.call(this,$t)}end(){var xt,Ct;this.sawRoot||this.fail("document must contain a root element.");const{tags:_t}=this;for(;_t.length>0;){const xt=_t.pop();this.fail(`unclosed tag: ${xt.name}`)}0!==this.state&&this.state!==es&&this.fail("unexpected end.");const{text:$t}=this;return 0!==$t.length&&(null===(xt=this.textHandler)||void 0===xt||xt.call(this,$t),this.text=""),this._closed=!0,null===(Ct=this.endHandler)||void 0===Ct||Ct.call(this),this._init(),this}resolve(xt){var Ct,_t;let $t=this.topNS[xt];if(void 0!==$t)return $t;const{tags:Vn}=this;for(let Ct=Vn.length-1;Ct>=0;Ct--)if(void 0!==($t=Vn[Ct].ns[xt]))return $t;return void 0!==($t=this.ns[xt])?$t:null===(_t=(Ct=this.opt).resolvePrefix)||void 0===_t?void 0:_t.call(Ct,xt)}qname(xt){const Ct=xt.indexOf(":");if(-1===Ct)return{prefix:"",local:xt};const _t=xt.slice(Ct+1),$t=xt.slice(0,Ct);return(""===$t||""===_t||_t.includes(":"))&&this.fail(`malformed name: ${xt}.`),{prefix:$t,local:_t}}processAttribsNS(){var xt;const{attribList:Ct}=this,_t=this.tag;{const{prefix:Ct,local:$t}=this.qname(_t.name);_t.prefix=Ct,_t.local=$t;const Vn=_t.uri=null!==(xt=this.resolve(Ct))&&void 0!==xt?xt:"";""!==Ct&&("xmlns"===Ct&&this.fail('tags may not have "xmlns" as prefix.'),""===Vn&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Ct)}.`),_t.uri=Ct))}if(0===Ct.length)return;const{attributes:$t}=_t,Vn=new Set;for(const xt of Ct){const{name:Ct,prefix:_t,local:Gn}=xt;let or,lr;""===_t?(or="xmlns"===Ct?zo:"",lr=Ct):(void 0===(or=this.resolve(_t))&&(this.fail(`unbound namespace prefix: ${JSON.stringify(_t)}.`),or=_t),lr=`{${or}}${Gn}`),Vn.has(lr)&&this.fail(`duplicate attribute: ${lr}.`),Vn.add(lr),xt.uri=or,$t[Ct]=xt}this.attribList=[]}processAttribsPlain(){const{attribList:xt}=this,Ct=this.tag.attributes;for(const{name:_t,value:$t}of xt)void 0!==Ct[_t]&&this.fail(`duplicate attribute: ${_t}.`),Ct[_t]=$t;this.attribList=[]}openTag(){var xt;this.processAttribs();const{tags:Ct}=this,_t=this.tag;_t.isSelfClosing=!1,null===(xt=this.openTagHandler)||void 0===xt||xt.call(this,_t),Ct.push(_t),this.state=es,this.name=""}openSelfClosingTag(){var xt,Ct,_t;this.processAttribs();const{tags:$t}=this,Vn=this.tag;Vn.isSelfClosing=!0,null===(xt=this.openTagHandler)||void 0===xt||xt.call(this,Vn),null===(Ct=this.closeTagHandler)||void 0===Ct||Ct.call(this,Vn),null===(this.tag=null!==(_t=$t[$t.length-1])&&void 0!==_t?_t:null)&&(this.closedRoot=!0),this.state=es,this.name=""}closeTag(){const{tags:xt,name:Ct}=this;if(this.state=es,this.name="",""===Ct)return this.fail("weird empty close tag."),void(this.text+="</>");const _t=this.closeTagHandler;let $t=xt.length;for(;$t-- >0;){const $t=this.tag=xt.pop();if(this.topNS=$t.ns,null==_t||_t($t),$t.name===Ct)break;this.fail("unexpected close tag.")}0===$t?this.closedRoot=!0:$t<0&&(this.fail(`unmatched closing tag: ${Ct}.`),this.text+=`</${Ct}>`)}parseEntity(xt){if("#"!==xt[0]){const Ct=this.ENTITIES[xt];return void 0!==Ct?Ct:(this.fail(this.isName(xt)?"undefined entity.":"disallowed character in entity name."),`&${xt};`)}let Ct=NaN;return"x"===xt[1]&&/^#x[0-9a-f]+$/i.test(xt)?Ct=parseInt(xt.slice(2),16):/^#[0-9]+$/.test(xt)&&(Ct=parseInt(xt.slice(1),10)),this.isChar(Ct)?String.fromCodePoint(Ct):(this.fail("malformed character entity."),`&${xt};`)}}},{"xmlchars/xml/1.0/ed5":82,"xmlchars/xml/1.1/ed2":83,"xmlchars/xmlns/1.0/ed3":84}],86:[function(xt,Ct,_t){Ct.exports={name:"@jscad/svg-deserializer",version:"2.5.7",description:"SVG Deserializer for JSCAD",homepage:"https://openjscad.xyz/",repository:"https://github.com/jscad/OpenJSCAD.org",main:"src/index.js",scripts:{coverage:"nyc --all --reporter=html --reporter=text npm test",test:"ava --verbose --timeout 2m './tests/*.test.js'"},contributors:[{name:"Rene K. Mueller",url:"http://renekmueller.com"},{name:"z3dev",url:"http://www.z3d.jp"},{name:"Mark 'kaosat-dev' Moissette",url:"http://kaosat.net"}],keywords:["openjscad","jscad","import","deserializer","svg"],license:"MIT",dependencies:{"@jscad/array-utils":"2.1.4","@jscad/modeling":"2.12.1",saxes:"5.0.1"},devDependencies:{ava:"3.15.0",nyc:"15.1.0"},gitHead:"a90b9bad95a417661c619dc733e62c587dc71a4a"}},{}],87:[function(xt,Ct,_t){Ct.exports={pxPmm:1/.2822222,inchMM:.03937,ptMM:1/(1/.03937/72),pcMM:.23622,cssPxUnit:.2822222,svgColors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{}],88:[function(xt,Ct,_t){const{inchMM:$t,ptMM:Vn,pcMM:Gn,svgColors:or}=xt("./constants"),css2cag=(xt,Ct)=>{let _t=parseFloat(xt);return isNaN(_t)?0:(0===_t||xt.search(/EM/i)>0||xt.search(/EX/i)>0||xt.search(/MM/i)>0||(xt.search(/CM/i)>0?_t*=10:xt.search(/IN/i)>0?_t/=$t:xt.search(/PT/i)>0?_t/=Vn:xt.search(/PC/i)>0?_t/=Gn:_t/=Ct),_t)};Ct.exports={svg2cag:(xt,Ct)=>[xt[0]/Ct[0],0-xt[1]/Ct[1]],cagLengthX:(xt,Ct,_t)=>{if(xt.indexOf("%")<0)return css2cag(xt,Ct[0]);let $t=parseFloat(xt);return isNaN($t)?0:0===$t?$t:($t=$t/100*_t,$t/=Ct[0],Math.round(1e5*$t)/1e5)},cagLengthY:(xt,Ct,_t)=>{if(xt.indexOf("%")<0)return css2cag(xt,Ct[1]);let $t=parseFloat(xt);return isNaN($t)?0:0===$t?$t:($t=$t/100*_t,$t/=Ct[1],Math.round(1e5*$t)/1e5)},cagLengthP:(xt,Ct,_t)=>{if(xt.indexOf("%")<0)return css2cag(xt,Ct[1]);let $t=parseFloat(xt);return isNaN($t)?0:0===$t?$t:($t=$t/100*_t,$t/=Ct[0])},css2cag:css2cag,cagColor:xt=>{let Ct;if((xt=xt.toLowerCase())in or)Ct=[(Ct=or[xt])[0]/255,Ct[1]/255,Ct[2]/255];else if("#"===xt[0])4===xt.length&&(xt="#"+xt[1]+xt[1]+xt[2]+xt[2]+xt[3]+xt[3]),7===xt.length&&(Ct=[parseInt("0x"+xt.slice(1,3))/255,parseInt("0x"+xt.slice(3,5))/255,parseInt("0x"+xt.slice(5,7))/255]);else{let _t=/rgb\(.+,.+,.+\)/.exec(xt);null!==_t&&(Ct=(_t=(_t=_t[0]).slice(_t.indexOf("(")+1,_t.indexOf(")"))).split(","),Ct=_t.indexOf("%")>0?[(Ct=[parseInt(Ct[0]),parseInt(Ct[1]),parseInt(Ct[2])])[0]/100,Ct[1]/100,Ct[2]/100]:[(Ct=[parseInt(Ct[0]),parseInt(Ct[1]),parseInt(Ct[2])])[0]/255,Ct[1]/255,Ct[2]/255])}return Ct},cssStyle:(xt,Ct)=>{if("style"in xt){const _t=xt.style+";";let $t=new RegExp(Ct+"\\s*:\\s*(\\S+);","i").exec(_t);if(null!==$t){let xt=($t=$t[0]).indexOf(":")+1;for(;" "===$t[xt];)xt++;return $t=$t.slice(xt,$t.indexOf(";"))}}},reflect:(xt,Ct,_t,$t)=>{const Vn=xt-_t,Gn=Ct-$t;return xt===_t&&Ct===_t?[xt,Ct]:xt===_t?[xt,$t+-Gn]:Ct===$t?[_t+-Vn,Ct]:[_t+-Vn,$t+-Gn]},groupValue:(xt,Ct)=>{let _t=xt.length;for(;_t>0;){const $t=xt[_t-1];if(Ct in $t)return $t[Ct];_t--}},svgColorForTarget:(xt,Ct)=>{let _t=null;return"path"===xt?Ct.stroke?_t=[Ct.stroke[0],Ct.stroke[1],Ct.stroke[2],1]:Ct.fill&&(_t=[Ct.fill[0],Ct.fill[1],Ct.fill[2],1]):Ct.fill?_t=[Ct.fill[0],Ct.fill[1],Ct.fill[2],1]:Ct.stroke&&(_t=[Ct.stroke[0],Ct.stroke[1],Ct.stroke[2],1]),_t}}},{"./constants":87}],89:[function(xt,Ct,_t){const $t=xt("saxes"),{colors:Vn,transforms:Gn}=xt("@jscad/modeling"),{toArray:or}=xt("@jscad/array-utils"),lr=xt("../package.json").version,{cagLengthX:Fr,cagLengthY:Hr,svgColorForTarget:xo}=xt("./helpers"),{svgSvg:Eo,svgRect:Mo,svgCircle:Oo,svgGroup:Ro,svgLine:Io,svgPath:Bo,svgEllipse:zo,svgPolygon:Ho,svgPolyline:Qo,svgUse:pi}=xt("./svgElementHelpers"),gi=xt("./shapesMapGeometry"),es=xt("./shapesMapJscad"),instantiate=(xt,Ct)=>{const{pxPmm:_t}=Ct;if(Ct&&Ct.statusCallback&&Ct.statusCallback({progress:0}),createSvgParser(xt,_t),!as)throw new Error("SVG parsing failed, no valid SVG data retrieved");Ct&&Ct.statusCallback&&Ct.statusCallback({progress:50});const $t=objectify(Ct,as);return Ct&&Ct.statusCallback&&Ct.statusCallback({progress:100}),$t},translate=(xt,Ct)=>{const{filename:_t,version:$t,pxPmm:Vn,addMetaData:Gn}=Ct;if(Ct&&Ct.statusCallback&&Ct.statusCallback({progress:0}),createSvgParser(xt,Vn),!as)throw new Error("SVG parsing failed, no valid SVG data retrieved");let or=Gn?`//\n  // producer: JSCAD SVG Deserializer ${$t}\n  // date: ${new Date}\n  // source: ${_t}\n  //\n`:"";return or+="const { colors, geometries, primitives, transforms } = require('@jscad/modeling')\n\n",Ct&&Ct.statusCallback&&Ct.statusCallback({progress:50}),or+=codify(Ct,as),or+="\nmodule.exports = { main }",Ct&&Ct.statusCallback&&Ct.statusCallback({progress:100}),or};let ts,ns,rs;const os=[],is=[],ss=[];let as,ls=!1,cs=[1,1];const objectify=(xt,Ct)=>{const{target:_t,segments:$t,pathSelfClosed:lr}=xt,Eo=is.length;is.push(Ct);let Mo=Eo;for(;Mo>0;)Mo--;let Oo=[];const Ro={svgUnitsPmm:cs,svgUnitsX:ts,svgUnitsY:ns,svgUnitsV:rs,level:Eo,target:_t,svgGroups:is,segments:$t,pathSelfClosed:lr};for(Mo=0;Mo<Ct.objects.length;Mo++){const xt=Ct.objects[Mo];let $t=or(gi(xt,objectify,Ro));$t=$t.map((Ct=>{if("transforms"in xt){let _t=null,$t=null,Vn=null;for(let Ct=0;Ct<xt.transforms.length;Ct++){const Gn=xt.transforms[Ct];"rotate"in Gn&&(_t=Gn),"scale"in Gn&&($t=Gn),"translate"in Gn&&(Vn=Gn)}if(null!==$t){let xt=Math.abs($t.scale[0]),_t=Math.abs($t.scale[1]);Ct=Gn.scale([xt,_t,1],Ct),xt=$t.scale[0],_t=$t.scale[1],xt<0&&(Ct=Gn.mirrorX(Ct)),_t<0&&(Ct=Gn.mirrorY(Ct))}if(null!==_t){const xt=0-.017453292519943295*_t.rotate;Ct=Gn.rotateZ(xt,Ct)}if(null!==Vn){const xt=Fr(Vn.translate[0],cs,ts),_t=0-Hr(Vn.translate[1],cs,ns);Ct=Gn.translate([xt,_t,0],Ct)}}const $t=xo(_t,xt);return $t&&(Ct=Vn.colorize($t,Ct)),Ct})),Oo=Oo.concat($t)}return is.pop(),Oo},codify=(xt,Ct)=>{const{target:_t,segments:$t}=xt,Vn=is.length;is.push(Ct);let Gn="  ",or=Vn;for(;or>0;)Gn+="  ",or--;let lr="";0===Vn&&(lr+="function main(params) {\n  let levels = {}\n  let paths = {}\n  let parts\n");const Eo="levels.l"+Vn;for(lr+=`${Gn}${Eo} = []\n`,or=0;or<Ct.objects.length;or++){const xt=Ct.objects[or],Mo="paths.p"+or;if(lr+=es(xt,codify,{level:Vn,indent:Gn,ln:Eo,on:Mo,svgUnitsPmm:cs,svgUnitsX:ts,svgUnitsY:ns,svgUnitsV:rs,svgGroups:is,target:_t,segments:$t}),"transforms"in xt){let Ct=null,_t=null,$t=null;for(let Vn=0;Vn<xt.transforms.length;Vn++){const Gn=xt.transforms[Vn];"rotate"in Gn&&(Ct=Gn),"scale"in Gn&&(_t=Gn),"translate"in Gn&&($t=Gn)}if(null!==_t){let xt=Math.abs(_t.scale[0]),Ct=Math.abs(_t.scale[1]);lr+=`${Gn}${Mo} = transforms.scale([${xt}, ${Ct}, 1], ${Mo})\n`,(xt=_t.scale[0])<0&&(lr+=`${Gn}${Mo} = transforms.mirrorX(${Mo})\n`),(Ct=_t.scale[1])<0&&(lr+=`${Gn}${Mo} = transforms.mirrorY(${Mo})\n`)}null!==Ct&&(lr+=`${Gn}${Mo} = transforms.rotateZ(${0-.017453292519943295*Ct.rotate}, ${Mo})\n`),null!==$t&&(lr+=`${Gn}${Mo} = transforms.translate([${Fr($t.translate[0],cs,ts)}, ${0-Hr($t.translate[1],cs,ns)}, 0], ${Mo})\n`)}const Oo=xo(_t,xt);Oo&&(lr+=`${Gn}${Mo} = colors.colorize([${Oo}], ${Mo})\n`),lr+=`${Gn}${Eo} = ${Eo}.concat(${Mo})\n\n`}return 0===Vn&&(lr+=Gn+"return "+Eo+"\n",lr+="}\n"),is.pop(),lr},createSvgParser=(xt,Ct)=>{const _t=new $t.SaxesParser;return void 0!==Ct&&Ct>_t.pxPmm&&(_t.pxPmm=Ct),_t.on("error",(xt=>{console.log(`ERROR: SVG file, line ${_t.line}, column ${_t.column}`),console.log(xt)})),_t.on("opentag",(xt=>{const $t={SVG:Eo,G:Ro,RECT:Mo,CIRCLE:Oo,ELLIPSE:zo,LINE:Io,POLYLINE:Qo,POLYGON:Ho,PATH:Bo,USE:pi,DEFS:()=>{ls=!0},DESC:()=>{},TITLE:()=>{},STYLE:()=>{},undefined:()=>console.log("WARNING: unsupported SVG element: "+xt.name)};xt.attributes.position=[_t.line+1,_t.column+1];const Vn=xt.name.toUpperCase(),Gn=$t[Vn]?$t[Vn](xt.attributes,{svgObjects:os,customPxPmm:Ct}):void 0;if(Gn)if("id"in Gn&&(os[Gn.id]=Gn),"svg"===Gn.type)is.push(Gn),cs=Gn.unitsPmm,ts=Gn.viewW,ns=Gn.viewH,rs=Gn.viewP;else if(!0===ls){if(ss.length>0){const xt=ss.pop();"objects"in xt&&xt.objects.push(Gn),ss.push(xt)}"group"===Gn.type&&ss.push(Gn)}else{if(is.length>0){const xt=is.pop();"objects"in xt&&xt.objects.push(Gn),is.push(xt)}"group"===Gn.type&&is.push(Gn)}})),_t.on("closetag",(xt=>{const e=()=>!0===ls?ss.pop():is.pop(),Ct={SVG:e,DEFS:()=>{ls=!1},USE:e,G:e,undefined:()=>{}},_t=xt.name.toUpperCase(),$t=Ct[_t]?Ct[_t]():void 0;0===is.length&&(as=$t)})),_t.on("end",(()=>{})),_t.write(xt).close(),_t};Ct.exports={deserialize:(Ct,_t)=>{const $t={addMetaData:!0,filename:"svg",output:"script",pxPmm:xt("./constants").pxPmm,segments:32,target:"path",pathSelfClosed:"error",version:lr};return"script"===(Ct=Object.assign({},$t,Ct)).output?translate(_t,Ct):instantiate(_t,Ct)},extension:"svg"}},{"../package.json":86,"./constants":87,"./helpers":88,"./shapesMapGeometry":90,"./shapesMapJscad":91,"./svgElementHelpers":92,"@jscad/array-utils":525,"@jscad/modeling":210,saxes:85}],90:[function(xt,Ct,_t){const{geometries:$t,primitives:Vn}=xt("@jscad/modeling"),{svg2cag:Gn,cagLengthX:or,cagLengthY:lr,cagLengthP:Fr,reflect:Hr}=xt("./helpers");Ct.exports=(xt,Ct,_t)=>{const{svgUnitsPmm:Gn,svgUnitsX:Hr,svgUnitsY:xo,svgUnitsV:Eo,svgGroups:Mo,target:Oo,segments:Ro,pathSelfClosed:Io}=_t;return{group:xt=>Ct({target:Oo,segments:Ro},xt),rect:(xt,Ct,_t,Gn,Fr,Hr,xo)=>{let Eo=or(xt.x,Ct,_t),Mo=0-lr(xt.y,Ct,Gn);const Ro=or(xt.width,Ct,_t),Io=lr(xt.height,Ct,Gn),Bo=or(xt.rx,Ct,_t);let zo;return Ro>0&&Io>0&&(Eo+=Ro/2,Mo-=Io/2,zo=0===Bo?Vn.rectangle({center:[Eo,Mo],size:[Ro,Io]}):Vn.roundedRectangle({center:[Eo,Mo],segments:xo,size:[Ro,Io],roundRadius:Bo}),"path"===Oo&&(zo=$t.path2.fromPoints({closed:!0},$t.geom2.toPoints(zo)))),zo},circle:(xt,Ct,_t,Gn,Hr,xo,Eo)=>{const Mo=or(xt.x,Ct,_t),Ro=0-lr(xt.y,Ct,Gn),Io=Fr(xt.radius,Ct,Hr);let Bo;return Io>0&&(Bo=Vn.circle({center:[Mo,Ro],segments:Eo,radius:Io}),"path"===Oo&&(Bo=$t.path2.fromPoints({closed:!0},$t.geom2.toPoints(Bo)))),Bo},ellipse:(xt,Ct,_t,Gn,Fr,Hr,xo)=>{const Eo=or(xt.rx,Ct,_t),Mo=lr(xt.ry,Ct,Gn),Ro=or(xt.cx,Ct,_t),Io=0-lr(xt.cy,Ct,Gn);let Bo;return Eo>0&&Mo>0&&(Bo=Vn.ellipse({center:[Ro,Io],segments:xo,radius:[Eo,Mo]}),"path"===Oo&&(Bo=$t.path2.fromPoints({closed:!0},$t.geom2.toPoints(Bo)))),Bo},line:(xt,Ct,_t,$t,Gn)=>{const Fr=or(xt.x1,Ct,_t),Hr=0-lr(xt.y1,Ct,$t),xo=or(xt.x2,Ct,_t),Eo=0-lr(xt.y2,Ct,$t);return Vn.line([[Fr,Hr],[xo,Eo]])},polygon:(xt,Ct,_t,Vn)=>{const Gn=[];for(let $t=0;$t<xt.points.length;$t++){const Fr=xt.points[$t];if("x"in Fr&&"y"in Fr){const xt=or(Fr.x,Ct,_t),$t=0-lr(Fr.y,Ct,Vn);Gn.push([xt,$t])}}return"geom2"===Oo?$t.geom2.fromPoints(Gn):$t.path2.fromPoints({},Gn)},polyline:(xt,Ct,_t,$t,Gn)=>{const Fr=[];for(let Vn=0;Vn<xt.points.length;Vn++){const Gn=xt.points[Vn];if("x"in Gn&&"y"in Gn){const xt=or(Gn.x,Ct,_t),Vn=0-lr(Gn.y,Ct,$t);Fr.push([xt,Vn])}}return Vn.line(Fr)},path:(xt,Ct,_t,Vn,Gn,or,lr)=>{const Fr=expandPath(xt,Ct,_t,Vn,Gn,or,lr,Io);return Object.entries(Fr).sort(((xt,Ct)=>xt[0].localeCompare(Ct[0]))).map((xt=>{const Ct=xt[1];if("geom2"===Oo&&Ct.isClosed){const xt=$t.path2.toPoints(Ct).slice();return xt.push(xt[0]),$t.geom2.fromPoints(xt)}return Ct}))}}[xt.type](xt,Gn,Hr,xo,Eo,Mo,Ro)};const appendPoints=(xt,Ct)=>Ct?$t.path2.appendPoints(xt,Ct):$t.path2.fromPoints({},xt),expandPath=(xt,Ct,_t,Vn,or,lr,Fr,xo)=>{const Eo={};let Mo=0,Oo=0,Ro=0,Io=0,Bo=0,zo="path"+Bo,Ho=!1,Qo=0,pi=0,gi=0,es=0;const L=()=>{zo="path"+ ++Bo,Ho=!1},k=()=>{Eo[zo]||(Eo[zo]=$t.path2.fromPoints({},[]))};for(let _t=0;_t<xt.commands.length;_t++){const Vn=xt.commands[_t],or=Vn.p;let lr=0;switch(Vn.c){case"m":for(0===_t&&(Ro=0,Io=0),or.length>=lr+2&&(Ro+=parseFloat(or[lr++]),Io+=parseFloat(or[lr++]),L(),Eo[zo]=appendPoints([Gn([Ro,Io],Ct)]),Mo=Ro,Oo=Io);or.length>=lr+2;)Ro+=parseFloat(or[lr++]),Io+=parseFloat(or[lr++]),Eo[zo]=appendPoints([Gn([Ro,Io],Ct)],Eo[zo]);break;case"M":for(or.length>=lr+2&&(Ro=parseFloat(or[lr++]),Io=parseFloat(or[lr++]),L(),Eo[zo]=appendPoints([Gn([Ro,Io],Ct)]),Mo=Ro,Oo=Io);or.length>=lr+2;)Ro=parseFloat(or[lr++]),Io=parseFloat(or[lr++]),Eo[zo]=appendPoints([Gn([Ro,Io],Ct)],Eo[zo]);break;case"a":for(;or.length>=lr+7;){const xt=parseFloat(or[lr++]),_t=parseFloat(or[lr++]),Vn=0-.017453292519943295*parseFloat(or[lr++]),Hr="1"===or[lr++],xo="1"===or[lr++];Ro+=parseFloat(or[lr++]),Io+=parseFloat(or[lr++]),k(),Eo[zo]=$t.path2.appendArc({segments:Fr,endpoint:Gn([Ro,Io],Ct),radius:Gn([xt,_t],Ct),xaxisrotation:Vn,clockwise:xo,large:Hr},Eo[zo])}break;case"A":for(;or.length>=lr+7;){const xt=parseFloat(or[lr++]),_t=parseFloat(or[lr++]),Vn=0-.017453292519943295*parseFloat(or[lr++]),Hr="1"===or[lr++],xo="1"===or[lr++];Ro=parseFloat(or[lr++]),Io=parseFloat(or[lr++]),k(),Eo[zo]=$t.path2.appendArc({segments:Fr,endpoint:Gn([Ro,Io],Ct),radius:Gn([xt,_t],Ct),xaxisrotation:Vn,clockwise:xo,large:Hr},Eo[zo])}break;case"c":for(;or.length>=lr+6;){const xt=Ro+parseFloat(or[lr++]),_t=Io+parseFloat(or[lr++]);Qo=Ro+parseFloat(or[lr++]),pi=Io+parseFloat(or[lr++]),Ro+=parseFloat(or[lr++]),Io+=parseFloat(or[lr++]),k(),Eo[zo]=$t.path2.appendBezier({segments:Fr,controlPoints:[Gn([xt,_t],Ct),Gn([Qo,pi],Ct),Gn([Ro,Io],Ct)]},Eo[zo]);const Vn=Hr(Qo,pi,Ro,Io);Qo=Vn[0],pi=Vn[1]}break;case"C":for(;or.length>=lr+6;){const xt=parseFloat(or[lr++]),_t=parseFloat(or[lr++]);Qo=parseFloat(or[lr++]),pi=parseFloat(or[lr++]),Ro=parseFloat(or[lr++]),Io=parseFloat(or[lr++]),k(),Eo[zo]=$t.path2.appendBezier({segments:Fr,controlPoints:[Gn([xt,_t],Ct),Gn([Qo,pi],Ct),Gn([Ro,Io],Ct)]},Eo[zo]);const Vn=Hr(Qo,pi,Ro,Io);Qo=Vn[0],pi=Vn[1]}break;case"q":for(;or.length>=lr+4;){const xt=[Ro,Io];gi=Ro+parseFloat(or[lr++]),es=Io+parseFloat(or[lr++]),Ro+=parseFloat(or[lr++]),Io+=parseFloat(or[lr++]);const _t=[xt[0]+2/3*(gi-xt[0]),xt[1]+2/3*(es-xt[1])],Vn=[_t[0]+1/3*(Ro-xt[0]),_t[1]+1/3*(Io-xt[1])];k(),Eo[zo]=$t.path2.appendBezier({segments:Fr,controlPoints:[Gn(_t,Ct),Gn(Vn,Ct),Gn([Ro,Io],Ct)]},Eo[zo]);const xo=Hr(gi,es,Ro,Io);gi=xo[0],es=xo[1]}break;case"Q":for(;or.length>=lr+4;){const xt=[Ro,Io];gi=parseFloat(or[lr++]),es=parseFloat(or[lr++]),Ro=parseFloat(or[lr++]),Io=parseFloat(or[lr++]);const _t=[xt[0]+2/3*(gi-xt[0]),xt[1]+2/3*(es-xt[1])],Vn=[_t[0]+1/3*(Ro-xt[0]),_t[1]+1/3*(Io-xt[1])];k(),Eo[zo]=$t.path2.appendBezier({segments:Fr,controlPoints:[Gn(_t,Ct),Gn(Vn,Ct),Gn([Ro,Io],Ct)]},Eo[zo]);const xo=Hr(gi,es,Ro,Io);gi=xo[0],es=xo[1]}break;case"t":for(;or.length>=lr+2;){const xt=[Ro,Io];Ro+=parseFloat(or[lr++]),Io+=parseFloat(or[lr++]);const _t=[xt[0]+2/3*(gi-xt[0]),xt[1]+2/3*(es-xt[1])],Vn=[_t[0]+1/3*(Ro-xt[0]),_t[1]+1/3*(Io-xt[1])];k(),Eo[zo]=$t.path2.appendBezier({segments:Fr,controlPoints:[Gn(_t,Ct),Gn(Vn,Ct),Gn([Ro,Io],Ct)]},Eo[zo]);const xo=Hr(gi,es,Ro,Io);gi=xo[0],es=xo[1]}break;case"T":for(;or.length>=lr+2;){const xt=[Ro,Io];Ro=parseFloat(or[lr++]),Io=parseFloat(or[lr++]);const _t=[xt[0]+2/3*(gi-xt[0]),xt[1]+2/3*(es-xt[1])],Vn=[_t[0]+1/3*(Ro-xt[0]),_t[1]+1/3*(Io-xt[1])];k(),Eo[zo]=$t.path2.appendBezier({segments:Fr,controlPoints:[Gn(_t,Ct),Gn(Vn,Ct),Gn([Ro,Io],Ct)]},Eo[zo]);const xo=Hr(gi,es,Ro,Io);gi=xo[0],es=xo[1]}break;case"s":for(;or.length>=lr+4;){const xt=Qo,_t=pi;Qo=Ro+parseFloat(or[lr++]),pi=Io+parseFloat(or[lr++]),Ro+=parseFloat(or[lr++]),Io+=parseFloat(or[lr++]),k(),Eo[zo]=$t.path2.appendBezier({segments:Fr,controlPoints:[Gn([xt,_t],Ct),Gn([Qo,pi],Ct),Gn([Ro,Io],Ct)]},Eo[zo]);const Vn=Hr(Qo,pi,Ro,Io);Qo=Vn[0],pi=Vn[1]}break;case"S":for(;or.length>=lr+4;){const xt=Qo,_t=pi;Qo=parseFloat(or[lr++]),pi=parseFloat(or[lr++]),Ro=parseFloat(or[lr++]),Io=parseFloat(or[lr++]),k(),Eo[zo]=$t.path2.appendBezier({segments:Fr,controlPoints:[Gn([xt,_t],Ct),Gn([Qo,pi],Ct),Gn([Ro,Io],Ct)]},Eo[zo]);const Vn=Hr(Qo,pi,Ro,Io);Qo=Vn[0],pi=Vn[1]}break;case"h":for(;or.length>=lr+1;)Ro+=parseFloat(or[lr++]),Eo[zo]=appendPoints([Gn([Ro,Io],Ct)],Eo[zo]);break;case"H":for(;or.length>=lr+1;)Ro=parseFloat(or[lr++]),Eo[zo]=appendPoints([Gn([Ro,Io],Ct)],Eo[zo]);break;case"l":for(;or.length>=lr+2;)Ro+=parseFloat(or[lr++]),Io+=parseFloat(or[lr++]),Eo[zo]=appendPoints([Gn([Ro,Io],Ct)],Eo[zo]);break;case"L":for(;or.length>=lr+2;)Ro=parseFloat(or[lr++]),Io=parseFloat(or[lr++]),Eo[zo]=appendPoints([Gn([Ro,Io],Ct)],Eo[zo]);break;case"v":for(;or.length>=lr+1;)Io+=parseFloat(or[lr++]),Eo[zo]=appendPoints([Gn([Ro,Io],Ct)],Eo[zo]);break;case"V":for(;or.length>=lr+1;)Io=parseFloat(or[lr++]),Eo[zo]=appendPoints([Gn([Ro,Io],Ct)],Eo[zo]);break;case"z":case"Z":Eo[zo]=$t.path2.close(Eo[zo]),Ro=Mo,Io=Oo,Ho=!0;break;default:console.log("Warning: Unknow PATH command ["+Vn.c+"]")}const m=xt=>"z"===xt||"Z"===xt;if(!0!==Ho&&Eo[zo]&&Eo[zo].isClosed){let Ct=xt.commands[_t+1];if(Ct&&!m(Ct.c))if("trim"===xo)for(;Ct&&!m(Ct.c);)_t++,Ct=xt.commands[_t+1];else{if("split"!==xo)throw new Error(`Malformed svg path at ${xt.position[0]}:${Vn.pos}. Path closed itself with command #${_t} ${Vn.c}${or.join(" ")}`);L()}}}return Eo}},{"./helpers":88,"@jscad/modeling":210}],91:[function(xt,Ct,_t){const{svg2cag:$t,cagLengthX:Vn,cagLengthY:Gn,cagLengthP:or,reflect:lr}=xt("./helpers");Ct.exports=(xt,Ct,_t)=>{const{level:$t,indent:lr,on:Fr,svgUnitsPmm:Hr,svgUnitsX:xo,svgUnitsY:Eo,svgUnitsV:Mo,svgGroups:Oo,target:Ro,segments:Io}=_t;return{group:xt=>Ct({target:Ro,segments:Io},xt)+`${lr}${Fr} = levels.l${$t+1}\n`,rect:(xt,Ct,_t,$t,or,Hr,xo,Eo)=>{let Mo=Vn(xt.x,Ct,_t),Oo=0-Gn(xt.y,Ct,$t);const Io=Vn(xt.width,Ct,_t),Bo=Gn(xt.height,Ct,$t),zo=Vn(xt.rx,Ct,_t);let Ho;return Io>0&&Bo>0&&(Mo=(Mo+Io/2).toFixed(4),Oo=(Oo-Bo/2).toFixed(4),Ho=0===zo?`${lr}${Fr} = primitives.rectangle({center: [${Mo}, ${Oo}], size: [${Io}, ${Bo}]}) // line ${xt.position}\n`:`${lr}${Fr} = primitives.roundedRectangle({center: [${Mo}, ${Oo}], segments: ${Eo}, size: [${Io}, ${Bo}], roundRadius: ${zo}}) // line ${xt.position}\n`,"path"===Ro&&(Ho+=`${lr}${Fr} = geometries.path2.fromPoints({closed: true}, geometries.geom2.toPoints(${Fr}))\n`)),Ho},circle:(xt,Ct,_t,$t,Hr,xo,Eo,Mo)=>{const Oo=Vn(xt.x,Ct,_t),Io=0-Gn(xt.y,Ct,$t),Bo=or(xt.radius,Ct,Hr);let zo;return Bo>0&&(zo=`${lr}${Fr} = primitives.circle({center: [${Oo}, ${Io}], segments: ${Mo}, radius: ${Bo}}) // line ${xt.position}\n`,"path"===Ro&&(zo+=`${lr}${Fr} = geometries.path2.fromPoints({closed: true}, geometries.geom2.toPoints(${Fr}))\n`)),zo},ellipse:(xt,Ct,_t,$t,or,Hr,xo,Eo)=>{const Mo=Vn(xt.rx,Ct,_t),Oo=Gn(xt.ry,Ct,$t),Io=Vn(xt.cx,Ct,_t),Bo=0-Gn(xt.cy,Ct,$t);let zo;return Mo>0&&Oo>0&&(zo=`${lr}${Fr} = primitives.ellipse({center: [${Io}, ${Bo}], segments: ${Eo}, radius: [${Mo}, ${Oo}]}) // line ${xt.position}\n`,"path"===Ro&&(zo+=`${lr}${Fr} = geometries.path2.fromPoints({closed: true}, geometries.geom2.toPoints(${Fr}))\n`)),zo},line:(xt,Ct,_t,$t,or)=>{const Hr=Vn(xt.x1,Ct,_t),xo=0-Gn(xt.y1,Ct,$t),Eo=Vn(xt.x2,Ct,_t),Mo=0-Gn(xt.y2,Ct,$t);return`${lr}${Fr} = primitives.line([[${Hr}, ${xo}], [${Eo}, ${Mo}]]) // line ${xt.position}\n`},polygon:(xt,Ct,_t,$t)=>{let or=`${lr}${Fr} = primitives.polygon({points: [\n`;for(let Fr=0;Fr<xt.points.length;Fr++){const Hr=xt.points[Fr];if("x"in Hr&&"y"in Hr){const xt=Vn(Hr.x,Ct,_t),Fr=0-Gn(Hr.y,Ct,$t);or+=`${lr}  [${xt}, ${Fr}],\n`}}return or+=`${lr}]}) // line ${xt.position}\n`,"path"===Ro&&(or+=`${lr}${Fr} = geometries.path2.fromPoints({closed: true}, geometries.geom2.toPoints(${Fr}))\n`),or},polyline:(xt,Ct,_t,$t,or)=>{let Hr=`${lr}${Fr} = geometries.path2.fromPoints({}, [\n`;for(let or=0;or<xt.points.length;or++){const Fr=xt.points[or];if("x"in Fr&&"y"in Fr){const xt=Vn(Fr.x,Ct,_t),or=0-Gn(Fr.y,Ct,$t);Hr+=`${lr}  [${xt}, ${or}],\n`}}return Hr+`${lr}]) // line ${xt.position}\n`},path:path}[xt.type](xt,Hr,xo,Eo,Mo,_t,Oo,Io)};const path=(xt,Ct,_t,Vn,Gn,or,Fr,Hr)=>{const{indent:xo,on:Eo,target:Mo}=or;let Oo=`${xo}parts = [] // line ${xt.position}\n`,Ro=0,Io=0,Bo=0,zo=0,Ho=0,Qo=Eo+Ho,pi=!1,gi=0,es=0,ts=0,ns=0;for(let _t=0;_t<xt.commands.length;_t++){const Vn=xt.commands[_t],Gn=Vn.p;switch(Vn.c){case"m":for(0===_t&&(Bo=0,zo=0),Ho>0&&!1===pi&&(Oo+=`${xo}parts.push(${Qo})\n`),Gn.length>=2&&(Bo+=parseFloat(Gn.shift()),zo+=parseFloat(Gn.shift()),pi=!1,Oo+=`${xo}${Qo=Eo+ ++Ho} = geometries.path2.fromPoints({}, [[${$t([Bo,zo],Ct)}]])\n`,Ro=Bo,Io=zo);Gn.length>=2;)Bo+=parseFloat(Gn.shift()),zo+=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendPoints([${$t([Bo,zo],Ct)}], ${Qo})\n`;break;case"M":for(Ho>0&&!1===pi&&(Oo+=`${xo}parts.push(${Qo})\n`),Gn.length>=2&&(Bo=parseFloat(Gn.shift()),zo=parseFloat(Gn.shift()),pi=!1,Oo+=`${xo}${Qo=Eo+ ++Ho} = geometries.path2.fromPoints({}, [[${$t([Bo,zo],Ct)}]])\n`,Ro=Bo,Io=zo);Gn.length>=2;)Bo=parseFloat(Gn.shift()),zo=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendPoints([${$t([Bo,zo],Ct)}], ${Qo})\n`;break;case"a":for(;Gn.length>=7;){const xt=parseFloat(Gn.shift()),_t=parseFloat(Gn.shift()),Vn=0-.017453292519943295*parseFloat(Gn.shift()),or="1"===Gn.shift(),lr="1"===Gn.shift();Bo+=parseFloat(Gn.shift()),zo+=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendArc({segments: ${Hr}, endpoint: [${$t([Bo,zo],Ct)}], radius: [${$t([xt,_t],Ct)}], xaxisrotation: ${Vn}, clockwise: ${lr}, large: ${or}}, ${Qo})\n`}break;case"A":for(;Gn.length>=7;){const xt=parseFloat(Gn.shift()),_t=parseFloat(Gn.shift()),Vn=0-.017453292519943295*parseFloat(Gn.shift()),or="1"===Gn.shift(),lr="1"===Gn.shift();Bo=parseFloat(Gn.shift()),zo=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendArc({segments: ${Hr}, endpoint: [${$t([Bo,zo],Ct)}], radius: [${$t([xt,_t],Ct)}], xaxisrotation: ${Vn}, clockwise: ${lr}, large: ${or}}, ${Qo})\n`}break;case"c":for(;Gn.length>=6;){const xt=Bo+parseFloat(Gn.shift()),_t=zo+parseFloat(Gn.shift());gi=Bo+parseFloat(Gn.shift()),es=zo+parseFloat(Gn.shift()),Bo+=parseFloat(Gn.shift()),zo+=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendBezier({segments: ${Hr}, controlPoints: [[${$t([xt,_t],Ct)}], [${$t([gi,es],Ct)}], [${$t([Bo,zo],Ct)}]]}, ${Qo})\n`;const Vn=lr(gi,es,Bo,zo);gi=Vn[0],es=Vn[1]}break;case"C":for(;Gn.length>=6;){const xt=parseFloat(Gn.shift()),_t=parseFloat(Gn.shift());gi=parseFloat(Gn.shift()),es=parseFloat(Gn.shift()),Bo=parseFloat(Gn.shift()),zo=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendBezier({segments: ${Hr}, controlPoints: [[${$t([xt,_t],Ct)}], [${$t([gi,es],Ct)}], [${$t([Bo,zo],Ct)}]]}, ${Qo})\n`;const Vn=lr(gi,es,Bo,zo);gi=Vn[0],es=Vn[1]}break;case"q":for(;Gn.length>=4;){const xt=[Bo,zo];ts=Bo+parseFloat(Gn.shift()),ns=zo+parseFloat(Gn.shift()),Bo+=parseFloat(Gn.shift()),zo+=parseFloat(Gn.shift());const _t=[xt[0]+2/3*(ts-xt[0]),xt[1]+2/3*(ns-xt[1])],Vn=[_t[0]+1/3*(Bo-xt[0]),_t[1]+1/3*(zo-xt[1])];Oo+=`${xo}${Qo} = geometries.path2.appendBezier({segments: ${Hr}, controlPoints: [[${$t(_t,Ct)}], [${$t(Vn,Ct)}], [${$t([Bo,zo],Ct)}]]}, ${Qo})\n`;const or=lr(ts,ns,Bo,zo);ts=or[0],ns=or[1]}break;case"Q":for(;Gn.length>=4;){const xt=[Bo,zo];ts=parseFloat(Gn.shift()),ns=parseFloat(Gn.shift()),Bo=parseFloat(Gn.shift()),zo=parseFloat(Gn.shift());const _t=[xt[0]+2/3*(ts-xt[0]),xt[1]+2/3*(ns-xt[1])],Vn=[_t[0]+1/3*(Bo-xt[0]),_t[1]+1/3*(zo-xt[1])];Oo+=`${xo}${Qo} = geometries.path2.appendBezier({segments: ${Hr}, controlPoints: [[${$t(_t,Ct)}], [${$t(Vn,Ct)}], [${$t([Bo,zo],Ct)}]]}, ${Qo})\n`;const or=lr(ts,ns,Bo,zo);ts=or[0],ns=or[1]}break;case"t":for(;Gn.length>=2;){const xt=[Bo,zo];Bo+=parseFloat(Gn.shift()),zo+=parseFloat(Gn.shift());const _t=[xt[0]+2/3*(ts-xt[0]),xt[1]+2/3*(ns-xt[1])],Vn=[_t[0]+1/3*(Bo-xt[0]),_t[1]+1/3*(zo-xt[1])];Oo+=`${xo}${Qo} = geometries.path2.appendBezier({segments: ${Hr}, controlPoints: [[[${$t(_t,Ct)}], [${$t(Vn,Ct)}], [${$t([Bo,zo],Ct)}]]}, ${Qo})\n`;const or=lr(ts,ns,Bo,zo);ts=or[0],ns=or[1]}break;case"T":for(;Gn.length>=2;){const xt=[Bo,zo];Bo=parseFloat(Gn.shift()),zo=parseFloat(Gn.shift());const _t=[xt[0]+2/3*(ts-xt[0]),xt[1]+2/3*(ns-xt[1])],Vn=[_t[0]+1/3*(Bo-xt[0]),_t[1]+1/3*(zo-xt[1])];Oo+=`${xo}${Qo} = geometries.path2.appendBezier({segments: ${Hr}, controlPoints: [[[${$t(_t,Ct)}], [${$t(Vn,Ct)}], [${$t([Bo,zo],Ct)}]]}, ${Qo})\n`;const or=lr(ts,ns,Bo,zo);ts=or[0],ns=or[1]}break;case"s":for(;Gn.length>=4;){const xt=gi,_t=es;gi=Bo+parseFloat(Gn.shift()),es=zo+parseFloat(Gn.shift()),Bo+=parseFloat(Gn.shift()),zo+=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendBezier({segments: ${Hr}, controlPoints: [[${$t([xt,_t],Ct)}], [${$t([gi,es],Ct)}], [${$t([Bo,zo],Ct)}]]}, ${Qo})\n`;const Vn=lr(gi,es,Bo,zo);gi=Vn[0],es=Vn[1]}break;case"S":for(;Gn.length>=4;){const xt=gi,_t=es;gi=parseFloat(Gn.shift()),es=parseFloat(Gn.shift()),Bo=parseFloat(Gn.shift()),zo=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendBezier({segments: ${Hr}, controlPoints: [[${$t([xt,_t],Ct)}], [${$t([gi,es],Ct)}], [${$t([Bo,zo],Ct)}]]}, ${Qo})\n`;const Vn=lr(gi,es,Bo,zo);gi=Vn[0],es=Vn[1]}break;case"h":for(;Gn.length>=1;)Bo+=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendPoints([[${$t([Bo,zo],Ct)}]], ${Qo})\n`;break;case"H":for(;Gn.length>=1;)Bo=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendPoints([[${$t([Bo,zo],Ct)}]], ${Qo})\n`;break;case"l":for(;Gn.length>=2;)Bo+=parseFloat(Gn.shift()),zo+=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendPoints([[${$t([Bo,zo],Ct)}]], ${Qo})\n`;break;case"L":for(;Gn.length>=2;)Bo=parseFloat(Gn.shift()),zo=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendPoints([[${$t([Bo,zo],Ct)}]], ${Qo})\n`;break;case"v":for(;Gn.length>=1;)zo+=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendPoints([[${$t([Bo,zo],Ct)}]], ${Qo})\n`;break;case"V":for(;Gn.length>=1;)zo=parseFloat(Gn.shift()),Oo+=`${xo}${Qo} = geometries.path2.appendPoints([[${$t([Bo,zo],Ct)}]], ${Qo})\n`;break;case"z":case"Z":Oo+=`${xo}${Qo} = geometries.path2.close(${Qo})\n`,"geom2"===Mo&&(Oo+=`${xo}${Qo} = geometries.geom2.fromPoints(geometries.path2.toPoints(${Qo}))\n`),Oo+=`${xo}parts.push(${Qo})\n`,Bo=Ro,zo=Io,pi=!0;break;default:console.log("Warning: Unknow PATH command ["+Vn.c+"]")}}return Ho>0&&!1===pi&&(Oo+=`${xo}parts.push(${Qo})\n`),Oo+`${xo}${Eo} = parts\n`}},{"./helpers":88}],92:[function(xt,Ct,_t){const{cagColor:$t,cssStyle:Vn,css2cag:Gn}=xt("./helpers"),{pxPmm:or}=xt("./constants"),svgCore=(xt,Ct)=>{"id"in Ct&&(xt.id=Ct.id),"position"in Ct&&(xt.position=Ct.position)},svgPresentation=(xt,Ct)=>{if("display"in Ct&&(xt.visible=Ct.display),"color"in Ct&&(xt.fill=$t(Ct.color),xt.stroke=xt.fill),"opacity"in Ct&&(xt.opacity=Ct.opacity),"fill"in Ct)xt.fill=$t(Ct.fill);else{const _t=Vn(Ct,"fill");_t&&(xt.fill=$t(_t))}if("fill-opacity"in Ct&&(xt.opacity=Ct["fill-opacity"]),"stroke-width"in Ct)xt.strokeWidth=Ct["stroke-width"];else{const _t=Vn(Ct,"stroke-width");_t&&(xt.strokeWidth=_t)}if("stroke"in Ct)xt.stroke=$t(Ct.stroke);else{const _t=Vn(Ct,"stroke");_t&&(xt.stroke=$t(_t))}"stroke-opacity"in Ct&&(xt.strokeOpacity=Ct["stroke-opacity"])},lr=/\w+\(.+\)/i,svgTransforms=(xt,Ct)=>{let _t=null;if("transform"in Ct)_t=Ct.transform;else{const xt=Vn(Ct,"transform");xt&&(_t=xt)}if(null!==_t){xt.transforms=[];let Ct=lr.exec(_t);for(;null!==Ct;){const $t=lr.lastIndex,Vn=_t.indexOf(")")+1;let Gn=_t.slice($t,Vn);const or=(Gn=Gn.trim()).slice(0,Gn.indexOf("("));let Fr,Hr=Gn.slice(Gn.indexOf("(")+1,Gn.indexOf(")")).trim();switch(Hr=Hr.indexOf(",")>0?Hr.split(","):Hr.split(" "),or){case"translate":1===Hr.length&&Hr.push(0),Fr={translate:[Hr[0],Hr[1]]},xt.transforms.push(Fr);break;case"scale":1===Hr.length&&Hr.push(Hr[0]),Fr={scale:[Hr[0],Hr[1]]},xt.transforms.push(Fr);break;case"rotate":Fr={rotate:Hr},xt.transforms.push(Fr)}_t=_t.slice(Vn,_t.length),Ct=lr.exec(_t)}}},Fr=/([\d.-]+)[\s,]+([\d.-]+)[\s,]+([\d.-]+)[\s,]+([\d.-]+)/i,svgListOfPoints=xt=>{const Ct=[],_t=/([\d\-+.]+)[\s,]+([\d\-+.]+)[\s,]*/i;xt=xt.trim();let $t=_t.exec(xt);for(;null!==$t;){let Vn=$t[0];const Gn=_t.lastIndex+Vn.length;Vn={x:$t[1],y:$t[2]},Ct.push(Vn),xt=xt.slice(Gn,xt.length),$t=_t.exec(xt)}return Ct};Ct.exports={svgCore:svgCore,svgPresentation:svgPresentation,svgSvg:(xt,{customPxPmm:Ct})=>{const _t={type:"svg",x:0,y:0,width:"100%",height:"100%",strokeWidth:"1"};if(_t.unitsPmm=[or,or],"pxpmm"in xt&&(_t.pxPmm=xt.pxpmm,_t.unitsPmm=[_t.pxPmm,_t.pxPmm]),"width"in xt&&(_t.width=xt.width),"height"in xt&&(_t.height=xt.height),"viewBox"in xt){const $t=xt.viewBox.trim(),Vn=Fr.exec($t);if(null!==Vn&&(_t.viewX=parseFloat(Vn[1]),_t.viewY=parseFloat(Vn[2]),_t.viewW=parseFloat(Vn[3]),_t.viewH=parseFloat(Vn[4])),_t.width.indexOf("%")<0){let xt=Gn(_t.width,Ct);xt=_t.viewW/xt,_t.unitsPmm[0]=xt}else{const xt=_t.unitsPmm[0]*(parseFloat(_t.width)/100);_t.unitsPmm[0]=xt}if(_t.height.indexOf("%")<0){let xt=Gn(_t.height,or);xt=_t.viewH/xt,_t.unitsPmm[1]=xt}else{const xt=_t.unitsPmm[1]*(parseFloat(_t.height)/100);_t.unitsPmm[1]=xt}}else _t.viewX=0,_t.viewY=0,_t.viewW=1920/_t.unitsPmm[0],_t.viewH=1080/_t.unitsPmm[1];return _t.viewP=Math.sqrt(_t.viewW*_t.viewW+_t.viewH*_t.viewH)/Math.SQRT2,svgCore(_t,xt),svgPresentation(_t,xt),_t.objects=[],_t},svgRect:xt=>{const Ct={type:"rect",x:"0",y:"0",rx:"0",ry:"0",width:"0",height:"0"};return"x"in xt&&(Ct.x=xt.x),"y"in xt&&(Ct.y=xt.y),"rx"in xt&&(Ct.rx=xt.rx,"ry"in xt||(Ct.ry=Ct.rx)),"ry"in xt&&(Ct.ry=xt.ry,"rx"in xt||(Ct.rx=Ct.ry)),Ct.rx!==Ct.ry&&console.log("Warning: Unsupported RECT with rx and ry radius"),"width"in xt&&(Ct.width=xt.width),"height"in xt&&(Ct.height=xt.height),svgTransforms(Ct,xt),svgCore(Ct,xt),svgPresentation(Ct,xt),Ct},svgCircle:xt=>{const Ct={type:"circle",x:"0",y:"0",radius:"0"};return"cx"in xt&&(Ct.x=xt.cx),"cy"in xt&&(Ct.y=xt.cy),"r"in xt&&(Ct.radius=xt.r),svgTransforms(Ct,xt),svgCore(Ct,xt),svgPresentation(Ct,xt),Ct},svgEllipse:xt=>{const Ct={type:"ellipse",cx:"0",cy:"0",rx:"0",ry:"0"};return"cx"in xt&&(Ct.cx=xt.cx),"cy"in xt&&(Ct.cy=xt.cy),"rx"in xt&&(Ct.rx=xt.rx),"ry"in xt&&(Ct.ry=xt.ry),svgTransforms(Ct,xt),svgCore(Ct,xt),svgPresentation(Ct,xt),Ct},svgLine:xt=>{const Ct={type:"line",x1:"0",y1:"0",x2:"0",y2:"0"};return"x1"in xt&&(Ct.x1=xt.x1),"y1"in xt&&(Ct.y1=xt.y1),"x2"in xt&&(Ct.x2=xt.x2),"y2"in xt&&(Ct.y2=xt.y2),svgTransforms(Ct,xt),svgCore(Ct,xt),svgPresentation(Ct,xt),Ct},svgPolyline:xt=>{const Ct={type:"polyline"};return svgTransforms(Ct,xt),svgCore(Ct,xt),svgPresentation(Ct,xt),"points"in xt&&(Ct.points=svgListOfPoints(xt.points)),Ct},svgPolygon:xt=>{const Ct={type:"polygon"};return svgTransforms(Ct,xt),svgCore(Ct,xt),svgPresentation(Ct,xt),"points"in xt&&(Ct.points=svgListOfPoints(xt.points)),Ct},svgGroup:xt=>{const Ct={type:"group"};if(svgTransforms(Ct,xt),svgCore(Ct,xt),svgPresentation(Ct,xt),"x"in xt||"y"in xt){let _t="0",$t="0";"x"in xt&&(_t=xt.x),"y"in xt&&($t=xt.y),"transforms"in Ct||(Ct.transforms=[]);const Vn={translate:[_t,$t]};Ct.transforms.push(Vn)}return Ct.objects=[],Ct},svgPath:xt=>{const Ct={type:"path"};if(svgTransforms(Ct,xt),svgCore(Ct,xt),svgPresentation(Ct,xt),Ct.commands=[],"d"in xt){let _t=null,$t="",Vn=0;const Gn=xt.d.length,or=xt.position[1]-Gn-2;for(;Vn<Gn;){const Gn=xt.d[Vn];switch(Gn){case"-":$t.length>0&&(_t.p.push($t),$t=""),$t+=Gn;break;case".":$t.length>0&&$t.indexOf(".")>=0&&(_t.p.push($t),$t=""),$t+=Gn;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":$t+=Gn;break;case"a":case"A":case"c":case"C":case"h":case"H":case"l":case"L":case"v":case"V":case"m":case"M":case"q":case"Q":case"s":case"S":case"t":case"T":case"z":case"Z":null!==_t&&($t.length>0&&(_t.p.push($t),$t=""),Ct.commands.push(_t)),_t={c:Gn,p:[],pos:Vn+or};break;case",":case" ":case"\n":null!==_t&&$t.length>0&&(_t.p.push($t),$t="")}Vn++}Vn===Gn&&null!==_t&&($t.length>0&&_t.p.push($t),Ct.commands.push(_t))}return Ct},svgUse:(xt,{svgObjects:Ct})=>{const _t={type:"group"};if(svgTransforms(_t,xt),svgCore(_t,xt),svgPresentation(_t,xt),"x"in xt||"y"in xt){let Ct="0",$t="0";"x"in xt&&(Ct=xt.x),"y"in xt&&($t=xt.y),"transforms"in _t||(_t.transforms=[]);const Vn={translate:[Ct,$t]};_t.transforms.push(Vn)}if(_t.objects=[],"xlink:href"in xt){let $t=xt["xlink:href"];"#"===$t[0]&&($t=$t.slice(1,$t.length)),void 0!==Ct[$t]&&($t=Ct[$t],$t=JSON.parse(JSON.stringify($t)),_t.objects.push($t))}return _t}}},{"./constants":87,"./helpers":88}],93:[function(xt,Ct,_t){const{geometries:$t,maths:Vn,measurements:Gn,utils:or}=xt("@jscad/modeling"),lr=xt("onml/lib/stringify"),Fr=xt("./package.json").version,getBounds=xt=>{const Ct=Gn.measureBoundingBox(xt);return 1===xt.length?Ct:Ct.reduce(((xt,Ct)=>(Vn.vec3.min(xt[0],xt[0],Ct[0]),Vn.vec3.max(xt[1],xt[1],Ct[1]),xt)),[[0,0,0],[0,0,0]])},convertObjects=(xt,Ct,_t)=>{const Vn=0-Ct[0][0],Gn=0-Ct[1][1],or=[];return xt.forEach(((Ct,lr)=>{_t.statusCallback&&_t.statusCallback({progress:100*lr/xt.length}),$t.geom2.isA(Ct)&&or.push(convertGeom2(Ct,[Vn,Gn],_t)),$t.path2.isA(Ct)&&or.push(convertPaths([Ct],[Vn,Gn],_t))})),or},reflect=(xt,Ct,_t,$t)=>{const Vn=xt-_t,Gn=Ct-$t;return xt===_t&&Ct===_t?[xt,Ct]:xt===_t?[xt,$t-Gn]:Ct===$t?[_t- -Vn,Ct]:[_t- -Vn,$t-Gn]},convertGeom2=(xt,Ct,_t)=>{const Vn=$t.geom2.toOutlines(xt).map((xt=>$t.path2.fromPoints({closed:!0},xt)));return _t.color="black",xt.color&&(_t.color=convertColor(xt.color)),_t.id=null,xt.id&&(_t.id=xt.id),_t.class=null,xt.class&&(_t.class=xt.class),convertToContinousPath(Vn,Ct,_t)},convertToContinousPath=(xt,Ct,_t)=>{let $t="";xt.forEach((xt=>$t+=convertPath(xt,Ct,_t)));const Vn={fill:_t.color,d:$t};return _t.id&&(Vn.id=_t.id),_t.class&&(Vn.class=_t.class),["g",["path",Vn]]},convertPaths=(xt,Ct,_t)=>xt.reduce(((xt,$t,Vn)=>{const Gn={d:convertPath($t,Ct,_t)};return $t.color&&(Gn.stroke=convertColor($t.color)),$t.id&&(Gn.id=$t.id),$t.class&&(Gn.class=$t.class),xt.concat([["path",Gn]])}),["g"]),convertPath=(xt,Ct,_t)=>{let $t="";const Vn=xt.points.length+(xt.isClosed?1:0);for(let Gn=0;Gn<Vn;Gn++){let Vn=Gn;Vn>=xt.points.length&&(Vn-=xt.points.length);const or=xt.points[Vn],lr=[or[0]+Ct[0],or[1]+Ct[1]],Fr=reflect(lr[0],lr[1],0,0),Hr=Math.round(Fr[0]*_t.decimals)/_t.decimals,xo=Math.round(Fr[1]*_t.decimals)/_t.decimals;$t+=Gn>0?`L${Hr} ${xo}`:`M${Hr} ${xo}`}return $t},convertColor=xt=>`rgba(${255*xt[0]},${255*xt[1]},${255*xt[2]},${xt[3]})`;Ct.exports={serialize:(xt,...Ct)=>{const _t={unit:"mm",decimals:1e4,version:Fr,statusCallback:null};xt=Object.assign({},_t,xt);const Vn=(Ct=or.flatten(Ct)).filter((xt=>$t.geom2.isA(xt)||$t.path2.isA(xt)));if(0===Vn.length)throw new Error("only 2D geometries can be serialized to SVG");Ct.length!==Vn.length&&console.warn("some objects could not be serialized to SVG"),xt.statusCallback&&xt.statusCallback({progress:0});const Gn=getBounds(Vn);let Hr=0,xo=0;Gn&&(Hr=Math.round((Gn[1][0]-Gn[0][0])*xt.decimals)/xt.decimals,xo=Math.round((Gn[1][1]-Gn[0][1])*xt.decimals)/xt.decimals);let Eo=["svg",{width:Hr+xt.unit,height:xo+xt.unit,viewBox:"0 0 "+Hr+" "+xo,fill:"none","fill-rule":"evenodd","stroke-width":"0.1px",version:"1.1",baseProfile:"tiny",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}];Gn&&(Eo=Eo.concat(convertObjects(Vn,Gn,xt)));const Mo=`<?xml version="1.0" encoding="UTF-8"?>\n\x3c!-- Created by JSCAD SVG Serializer --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1 Tiny//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11-tiny.dtd">\n${lr(Eo,2)}`;return xt.statusCallback&&xt.statusCallback({progress:100}),[Mo]},mimeType:"image/svg+xml"}},{"./package.json":95,"@jscad/modeling":210,"onml/lib/stringify":94}],94:[function(xt,Ct,_t){"use strict";Ct.exports=function stringify(xt,Ct){const _t=Ct>0?"\n":"",$t=function indenter(xt){if(!(xt>0))return xt=>xt;var Ct=" ".repeat(xt);return xt=>{if("string"!=typeof xt)return xt;const _t=xt.split("\n");return 1===_t.length?Ct+xt:_t.map((xt=>""===xt.trim()?xt:Ct+xt)).join("\n")}}(Ct);return function t(xt){let Ct,Vn="",Gn=!0;return xt.some(((xt,$t,or)=>{if(0===$t)return Ct="<"+xt,1===or.length;if(1===$t){if((xt=>xt&&"[object Object]"===Object.prototype.toString.call(xt))(xt))return Object.keys(xt).map((_t=>{let $t=xt[_t];Array.isArray($t)&&($t=$t.join(" ")),Ct+=" "+_t+'="'+$t+'"'})),2===or.length||void(Ct+=">");Ct+=">"}switch(typeof xt){case"string":case"number":case"boolean":case"undefined":return void(Vn+=xt+_t)}Gn=!1,Vn+=t(xt)}))?Ct+"/>"+_t:Gn?Ct+(xt=>xt.split("\n").filter((xt=>""!==xt.trim())).join("\n"))(Vn)+"</"+xt[0]+">"+_t:Ct+_t+$t(Vn)+"</"+xt[0]+">"+_t}(xt)}},{}],95:[function(xt,Ct,_t){Ct.exports={name:"@jscad/svg-serializer",version:"2.3.14",description:"SVG Serializer for JSCAD",homepage:"https://openjscad.xyz/",repository:"https://github.com/jscad/OpenJSCAD.org",main:"index.js",scripts:{coverage:"nyc --all --reporter=html --reporter=text npm test",test:"ava --verbose --timeout 2m './tests/*.test.js'"},contributors:[{name:"Rene K. Mueller",url:"http://renekmueller.com"},{name:"z3dev",url:"http://www.z3d.jp"},{name:"Mark 'kaosat-dev' Moissette",url:"http://kaosat.net"}],keywords:["openjscad","jscad","export","serializer","svg"],license:"MIT",dependencies:{"@jscad/modeling":"2.12.1",onml:"1.3.0"},devDependencies:{ava:"3.15.0",nyc:"15.1.0"},gitHead:"a90b9bad95a417661c619dc733e62c587dc71a4a"}},{}],96:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.CHAR="\t\n\r -íŸ¿î€€-ï¿½ð€€-ô¿¿",_t.S=" \t\r\n",_t.NAME_START_CHAR=":A-Z_a-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â€Œâ€â°-â†â°€-â¿¯ã€-íŸ¿ï¤€-ï·ï·°-ï¿½ð€€-ó¯¿¿",_t.NAME_CHAR="-"+_t.NAME_START_CHAR+".0-9Â·Ì€-Í¯â€¿-â€",_t.CHAR_RE=new RegExp("^["+_t.CHAR+"]$","u"),_t.S_RE=new RegExp("^["+_t.S+"]+$","u"),_t.NAME_START_CHAR_RE=new RegExp("^["+_t.NAME_START_CHAR+"]$","u"),_t.NAME_CHAR_RE=new RegExp("^["+_t.NAME_CHAR+"]$","u"),_t.NAME_RE=new RegExp("^["+_t.NAME_START_CHAR+"]["+_t.NAME_CHAR+"]*$","u"),_t.NMTOKEN_RE=new RegExp("^["+_t.NAME_CHAR+"]+$","u");function isNameStartChar(xt){return xt>=65&&xt<=90||xt>=97&&xt<=122||58===xt||95===xt||8204===xt||8205===xt||xt>=192&&xt<=214||xt>=216&&xt<=246||xt>=248&&xt<=767||xt>=880&&xt<=893||xt>=895&&xt<=8191||xt>=8304&&xt<=8591||xt>=11264&&xt<=12271||xt>=12289&&xt<=55295||xt>=63744&&xt<=64975||xt>=65008&&xt<=65533||xt>=65536&&xt<=983039}_t.S_LIST=[32,10,13,9],_t.isChar=function isChar(xt){return xt>=32&&xt<=55295||10===xt||13===xt||9===xt||xt>=57344&&xt<=65533||xt>=65536&&xt<=1114111},_t.isS=function isS(xt){return 32===xt||10===xt||13===xt||9===xt},_t.isNameStartChar=isNameStartChar,_t.isNameChar=function isNameChar(xt){return isNameStartChar(xt)||xt>=48&&xt<=57||45===xt||46===xt||183===xt||xt>=768&&xt<=879||xt>=8255&&xt<=8256}},{}],97:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.CHAR="-íŸ¿î€€-ï¿½ð€€-ô¿¿",_t.RESTRICTED_CHAR="-\b\v\f--Â„Â†-ÂŸ",_t.S=" \t\r\n",_t.NAME_START_CHAR=":A-Z_a-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â€Œâ€â°-â†â°€-â¿¯ã€-íŸ¿ï¤€-ï·ï·°-ï¿½ð€€-ó¯¿¿",_t.NAME_CHAR="-"+_t.NAME_START_CHAR+".0-9Â·Ì€-Í¯â€¿-â€",_t.CHAR_RE=new RegExp("^["+_t.CHAR+"]$","u"),_t.RESTRICTED_CHAR_RE=new RegExp("^["+_t.RESTRICTED_CHAR+"]$","u"),_t.S_RE=new RegExp("^["+_t.S+"]+$","u"),_t.NAME_START_CHAR_RE=new RegExp("^["+_t.NAME_START_CHAR+"]$","u"),_t.NAME_CHAR_RE=new RegExp("^["+_t.NAME_CHAR+"]$","u"),_t.NAME_RE=new RegExp("^["+_t.NAME_START_CHAR+"]["+_t.NAME_CHAR+"]*$","u"),_t.NMTOKEN_RE=new RegExp("^["+_t.NAME_CHAR+"]+$","u");function isNameStartChar(xt){return xt>=65&&xt<=90||xt>=97&&xt<=122||58===xt||95===xt||8204===xt||8205===xt||xt>=192&&xt<=214||xt>=216&&xt<=246||xt>=248&&xt<=767||xt>=880&&xt<=893||xt>=895&&xt<=8191||xt>=8304&&xt<=8591||xt>=11264&&xt<=12271||xt>=12289&&xt<=55295||xt>=63744&&xt<=64975||xt>=65008&&xt<=65533||xt>=65536&&xt<=983039}_t.S_LIST=[32,10,13,9],_t.isChar=function isChar(xt){return xt>=1&&xt<=55295||xt>=57344&&xt<=65533||xt>=65536&&xt<=1114111},_t.isRestrictedChar=function isRestrictedChar(xt){return xt>=1&&xt<=8||11===xt||12===xt||xt>=14&&xt<=31||xt>=127&&xt<=132||xt>=134&&xt<=159},_t.isCharAndNotRestricted=function isCharAndNotRestricted(xt){return 9===xt||10===xt||13===xt||xt>31&&xt<127||133===xt||xt>159&&xt<=55295||xt>=57344&&xt<=65533||xt>=65536&&xt<=1114111},_t.isS=function isS(xt){return 32===xt||10===xt||13===xt||9===xt},_t.isNameStartChar=isNameStartChar,_t.isNameChar=function isNameChar(xt){return isNameStartChar(xt)||xt>=48&&xt<=57||45===xt||46===xt||183===xt||xt>=768&&xt<=879||xt>=8255&&xt<=8256}},{}],98:[function(xt,Ct,_t){"use strict";function isNCNameStartChar(xt){return xt>=65&&xt<=90||95===xt||xt>=97&&xt<=122||xt>=192&&xt<=214||xt>=216&&xt<=246||xt>=248&&xt<=767||xt>=880&&xt<=893||xt>=895&&xt<=8191||xt>=8204&&xt<=8205||xt>=8304&&xt<=8591||xt>=11264&&xt<=12271||xt>=12289&&xt<=55295||xt>=63744&&xt<=64975||xt>=65008&&xt<=65533||xt>=65536&&xt<=983039}Object.defineProperty(_t,"__esModule",{value:!0}),_t.NC_NAME_START_CHAR="A-Z_a-zÃ€-Ã–Ã˜-Ã¶Ã¸-Ë¿Í°-Í½Í¿-á¿¿â€Œ-â€â°-â†â°€-â¿¯ã€-íŸ¿ï¤€-ï·ï·°-ï¿½ð€€-ó¯¿¿",_t.NC_NAME_CHAR="-"+_t.NC_NAME_START_CHAR+".0-9Â·Ì€-Í¯â€¿-â€",_t.NC_NAME_START_CHAR_RE=new RegExp("^["+_t.NC_NAME_START_CHAR+"]$","u"),_t.NC_NAME_CHAR_RE=new RegExp("^["+_t.NC_NAME_CHAR+"]$","u"),_t.NC_NAME_RE=new RegExp("^["+_t.NC_NAME_START_CHAR+"]["+_t.NC_NAME_CHAR+"]*$","u"),_t.isNCNameStartChar=isNCNameStartChar,_t.isNCNameChar=function isNCNameChar(xt){return isNCNameStartChar(xt)||45===xt||46===xt||xt>=48&&xt<=57||183===xt||xt>=768&&xt<=879||xt>=8255&&xt<=8256}},{}],99:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0});const $t=xt("xmlchars/xml/1.0/ed5"),Vn=xt("xmlchars/xml/1.1/ed2"),Gn=xt("xmlchars/xmlns/1.0/ed3");var or=$t.isS,lr=$t.isChar,Fr=$t.isNameStartChar,Hr=$t.isNameChar,xo=$t.S_LIST,Eo=$t.NAME_RE,Mo=Vn.isChar,Oo=Gn.isNCNameStartChar,Ro=Gn.isNCNameChar,Io=Gn.NC_NAME_RE;const Bo="http://www.w3.org/XML/1998/namespace",zo="http://www.w3.org/2000/xmlns/",Ho={__proto__:null,xml:Bo,xmlns:zo},Qo={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},pi=-1,gi=-2,es=13,ts=33,ns=10,rs=60,os=61,is=62,ss=63,as=93,isQuote=xt=>34===xt||39===xt,ls=[34,39],cs=[...ls,91,is],us=[...ls,rs,as],fs=[os,ss,...xo],hs=[...xo,is,38,rs];function nsPairCheck(xt,Ct,_t){switch(Ct){case"xml":_t!==Bo&&xt.fail(`xml prefix must be bound to ${Bo}.`);break;case"xmlns":_t!==zo&&xt.fail(`xmlns prefix must be bound to ${zo}.`)}switch(_t){case zo:xt.fail(""===Ct?`the default namespace may not be set to ${_t}.`:`may not assign a prefix (even "xmlns") to the URI ${zo}.`);break;case Bo:switch(Ct){case"xml":break;case"":xt.fail(`the default namespace may not be set to ${_t}.`);break;default:xt.fail("may not assign the xml namespace to another prefix.")}}}const isNCName=xt=>Io.test(xt),isName=xt=>Eo.test(xt);_t.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const ps={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};_t.SaxesParser=class SaxesParser{constructor(xt){this.opt=null!=xt?xt:{},this.fragmentOpt=!!this.opt.fragment;const Ct=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=!1!==this.opt.position,this.fileName=this.opt.fileName,Ct){this.nameStartCheck=Oo,this.nameCheck=Ro,this.isName=isNCName,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},Ho);const xt=this.opt.additionalNamespaces;null!=xt&&(function nsMappingCheck(xt,Ct){for(const _t of Object.keys(Ct))nsPairCheck(xt,_t,Ct[_t])}(this,xt),Object.assign(this.ns,xt))}else this.nameStartCheck=Fr,this.nameCheck=Hr,this.isName=isName,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var xt;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:Ct}=this;this.state=Ct?es:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=Ct,this.xmlDeclPossible=!Ct,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:_t}=this.opt;if(void 0===_t){if(!0===this.opt.forceXMLVersion)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");_t="1.0"}this.setXMLVersion(_t),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(Qo),null===(xt=this.readyHandler)||void 0===xt||xt.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(xt,Ct){this[ps[xt]]=Ct}off(xt){this[ps[xt]]=void 0}makeError(xt){var Ct;let _t=null!==(Ct=this.fileName)&&void 0!==Ct?Ct:"";return this.trackPosition&&(_t.length>0&&(_t+=":"),_t+=`${this.line}:${this.column}`),_t.length>0&&(_t+=": "),new Error(_t+xt)}fail(xt){const Ct=this.makeError(xt),_t=this.errorHandler;if(void 0===_t)throw Ct;return _t(Ct),this}write(xt){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let Ct=!1;null===xt?(Ct=!0,xt=""):"object"==typeof xt&&(xt=xt.toString()),void 0!==this.carriedFromPrevious&&(xt=`${this.carriedFromPrevious}${xt}`,this.carriedFromPrevious=void 0);let _t=xt.length;const $t=xt.charCodeAt(_t-1);!Ct&&(13===$t||$t>=55296&&$t<=56319)&&(this.carriedFromPrevious=xt[_t-1],_t--,xt=xt.slice(0,_t));const{stateTable:Vn}=this;for(this.chunk=xt,this.i=0;this.i<_t;)Vn[this.state].call(this);return this.chunkPosition+=_t,Ct?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:xt,i:Ct}=this;if(this.prevI=Ct,this.i=Ct+1,Ct>=xt.length)return pi;const _t=xt.charCodeAt(Ct);if(this.column++,_t<55296){if(_t>=32||9===_t)return _t;switch(_t){case ns:return this.line++,this.column=0,this.positionAtNewLine=this.position,ns;case 13:return xt.charCodeAt(Ct+1)===ns&&(this.i=Ct+2),this.line++,this.column=0,this.positionAtNewLine=this.position,gi;default:return this.fail("disallowed character."),_t}}if(_t>56319)return _t>=57344&&_t<=65533||this.fail("disallowed character."),_t;const $t=65536+1024*(_t-55296)+(xt.charCodeAt(Ct+1)-56320);return this.i=Ct+2,$t>1114111&&this.fail("disallowed character."),$t}getCode11(){const{chunk:xt,i:Ct}=this;if(this.prevI=Ct,this.i=Ct+1,Ct>=xt.length)return pi;const _t=xt.charCodeAt(Ct);if(this.column++,_t<55296){if(_t>31&&_t<127||_t>159&&8232!==_t||9===_t)return _t;switch(_t){case ns:return this.line++,this.column=0,this.positionAtNewLine=this.position,ns;case 13:{const _t=xt.charCodeAt(Ct+1);_t!==ns&&133!==_t||(this.i=Ct+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,gi;default:return this.fail("disallowed character."),_t}}if(_t>56319)return _t>=57344&&_t<=65533||this.fail("disallowed character."),_t;const $t=65536+1024*(_t-55296)+(xt.charCodeAt(Ct+1)-56320);return this.i=Ct+2,$t>1114111&&this.fail("disallowed character."),$t}getCodeNorm(){const xt=this.getCode();return xt===gi?ns:xt}unget(){this.i=this.prevI,this.column--}captureTo(xt){let{i:Ct}=this;const{chunk:_t}=this;for(;;){const $t=this.getCode(),Vn=$t===gi,Gn=Vn?ns:$t;if(Gn===pi||xt.includes(Gn))return this.text+=_t.slice(Ct,this.prevI),Gn;Vn&&(this.text+=`${_t.slice(Ct,this.prevI)}\n`,Ct=this.i)}}captureToChar(xt){let{i:Ct}=this;const{chunk:_t}=this;for(;;){let $t=this.getCode();switch($t){case gi:this.text+=`${_t.slice(Ct,this.prevI)}\n`,Ct=this.i,$t=ns;break;case pi:return this.text+=_t.slice(Ct),!1}if($t===xt)return this.text+=_t.slice(Ct,this.prevI),!0}}captureNameChars(){const{chunk:xt,i:Ct}=this;for(;;){const _t=this.getCode();if(_t===pi)return this.name+=xt.slice(Ct),pi;if(!Hr(_t))return this.name+=xt.slice(Ct,this.prevI),_t===gi?ns:_t}}skipSpaces(){for(;;){const xt=this.getCodeNorm();if(xt===pi||!or(xt))return xt}}setXMLVersion(xt){this.currentXMLVersion=xt,"1.0"===xt?(this.isChar=lr,this.getCode=this.getCode10):(this.isChar=Mo,this.getCode=this.getCode11)}sBegin(){65279===this.chunk.charCodeAt(0)&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const xt=this.i,Ct=this.skipSpaces();switch(this.prevI!==xt&&(this.xmlDeclPossible=!1),Ct){case rs:if(this.state=15,0!==this.text.length)throw new Error("no-empty text at start");break;case pi:break;default:this.unget(),this.state=es,this.xmlDeclPossible=!1}}sDoctype(){var xt;const Ct=this.captureTo(cs);switch(Ct){case is:null===(xt=this.doctypeHandler)||void 0===xt||xt.call(this,this.text),this.text="",this.state=es,this.doctype=!0;break;case pi:break;default:this.text+=String.fromCodePoint(Ct),91===Ct?this.state=4:isQuote(Ct)&&(this.state=3,this.q=Ct)}}sDoctypeQuote(){const xt=this.q;this.captureToChar(xt)&&(this.text+=String.fromCodePoint(xt),this.q=null,this.state=2)}sDTD(){const xt=this.captureTo(us);xt!==pi&&(this.text+=String.fromCodePoint(xt),xt===as?this.state=2:xt===rs?this.state=6:isQuote(xt)&&(this.state=5,this.q=xt))}sDTDQuoted(){const xt=this.q;this.captureToChar(xt)&&(this.text+=String.fromCodePoint(xt),this.state=4,this.q=null)}sDTDOpenWaka(){const xt=this.getCodeNorm();switch(this.text+=String.fromCodePoint(xt),xt){case 33:this.state=7,this.openWakaBang="";break;case ss:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const xt=String.fromCodePoint(this.getCodeNorm()),Ct=this.openWakaBang+=xt;this.text+=xt,"-"!==Ct&&(this.state="--"===Ct?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const xt=this.getCodeNorm();this.text+=String.fromCodePoint(xt),this.state=45===xt?10:8}sDTDCommentEnded(){const xt=this.getCodeNorm();this.text+=String.fromCodePoint(xt),xt===is?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(ss)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const xt=this.getCodeNorm();this.text+=String.fromCodePoint(xt),xt===is&&(this.state=4)}sText(){0!==this.tags.length?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:xt}=this;const{chunk:Ct}=this;e:for(;;)switch(this.getCode()){case gi:this.entity+=`${Ct.slice(xt,this.prevI)}\n`,xt=this.i;break;case 59:{const{entityReturnState:_t}=this,$t=this.entity+Ct.slice(xt,this.prevI);let Vn;this.state=_t,""===$t?(this.fail("empty entity name."),Vn="&;"):(Vn=this.parseEntity($t),this.entity=""),_t===es&&void 0===this.textHandler||(this.text+=Vn);break e}case pi:this.entity+=Ct.slice(xt);break e}}sOpenWaka(){const xt=this.getCode();if(Fr(xt))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(xt){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case ss:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=es,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var xt;const Ct=this.getCodeNorm();45===Ct?(this.state=19,null===(xt=this.commentHandler)||void 0===xt||xt.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(Ct)}`,this.state=17)}sCommentEnded(){const xt=this.getCodeNorm();xt!==is?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(xt)}`,this.state=17):this.state=es}sCData(){this.captureToChar(as)&&(this.state=21)}sCDataEnding(){const xt=this.getCodeNorm();xt===as?this.state=22:(this.text+=`]${String.fromCodePoint(xt)}`,this.state=20)}sCDataEnding2(){var xt;const Ct=this.getCodeNorm();switch(Ct){case is:null===(xt=this.cdataHandler)||void 0===xt||xt.call(this,this.text),this.text="",this.state=es;break;case as:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(Ct)}`,this.state=20}}sPIFirstChar(){const xt=this.getCodeNorm();this.nameStartCheck(xt)?(this.piTarget+=String.fromCodePoint(xt),this.state=24):xt===ss||or(xt)?(this.fail("processing instruction without a target."),this.state=xt===ss?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(xt),this.state=24)}sPIRest(){const{chunk:xt,i:Ct}=this;for(;;){const _t=this.getCodeNorm();if(_t===pi)return void(this.piTarget+=xt.slice(Ct));if(!this.nameCheck(_t)){this.piTarget+=xt.slice(Ct,this.prevI);const $t=_t===ss;$t||or(_t)?"xml"===this.piTarget?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=$t?ts:27):this.state=$t?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(_t));break}}}sPIBody(){if(0===this.text.length){const xt=this.getCodeNorm();xt===ss?this.state=26:or(xt)||(this.text=String.fromCodePoint(xt))}else this.captureToChar(ss)&&(this.state=26)}sPIEnding(){var xt;const Ct=this.getCodeNorm();if(Ct===is){const{piTarget:Ct}=this;"xml"===Ct.toLowerCase()&&this.fail("the XML declaration must appear at the start of the document."),null===(xt=this.piHandler)||void 0===xt||xt.call(this,{target:Ct,body:this.text}),this.piTarget=this.text="",this.state=es}else Ct===ss?this.text+="?":(this.text+=`?${String.fromCodePoint(Ct)}`,this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const xt=this.skipSpaces();xt!==ss?xt!==pi&&(this.state=28,this.name=String.fromCodePoint(xt)):this.state=ts}sXMLDeclName(){const xt=this.captureTo(fs);if(xt===ss)return this.state=ts,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(or(xt)||xt===os){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=xt===os?30:29}}sXMLDeclEq(){const xt=this.getCodeNorm();if(xt===ss)return this.state=ts,void this.fail("XML declaration is incomplete.");or(xt)||(xt!==os&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const xt=this.getCodeNorm();if(xt===ss)return this.state=ts,void this.fail("XML declaration is incomplete.");or(xt)||(isQuote(xt)?this.q=xt:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const xt=this.captureTo([this.q,ss]);if(xt===ss)return this.state=ts,this.text="",void this.fail("XML declaration is incomplete.");if(xt===pi)return;const Ct=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const xt=Ct;this.xmlDecl.version=xt,/^1\.[0-9]+$/.test(xt)?this.opt.forceXMLVersion||this.setXMLVersion(xt):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(Ct)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=Ct;break;case"standalone":"yes"!==Ct&&"no"!==Ct&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=Ct}this.name="",this.state=32}sXMLDeclSeparator(){const xt=this.getCodeNorm();xt!==ss?(or(xt)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=ts}sXMLDeclEnding(){var xt;this.getCodeNorm()===is?("xml"!==this.piTarget?this.fail("processing instructions are not allowed before root."):"version"!==this.name&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),null===(xt=this.xmldeclHandler)||void 0===xt||xt.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=es):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var xt;const Ct=this.captureNameChars();if(Ct===pi)return;const _t=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=_t.ns=Object.create(null)),null===(xt=this.openTagStartHandler)||void 0===xt||xt.call(this,_t),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),Ct){case is:this.openTag();break;case 47:this.state=35;break;default:or(Ct)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===is?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const xt=this.skipSpaces();xt!==pi&&(Fr(xt)?(this.unget(),this.state=37):xt===is?this.openTag():47===xt?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const xt=this.captureNameChars();xt===os?this.state=39:or(xt)?this.state=38:xt===is?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):xt!==pi&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const xt=this.skipSpaces();switch(xt){case pi:return;case os:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",xt===is?this.openTag():Fr(xt)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const xt=this.getCodeNorm();isQuote(xt)?(this.q=xt,this.state=40):or(xt)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:xt,chunk:Ct}=this;let{i:_t}=this;for(;;)switch(this.getCode()){case xt:return this.pushAttrib(this.name,this.text+Ct.slice(_t,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=Ct.slice(_t,this.prevI),this.state=14,void(this.entityReturnState=40);case ns:case gi:case 9:this.text+=`${Ct.slice(_t,this.prevI)} `,_t=this.i;break;case rs:return this.text+=Ct.slice(_t,this.prevI),void this.fail("disallowed character.");case pi:return void(this.text+=Ct.slice(_t))}}sAttribValueClosed(){const xt=this.getCodeNorm();or(xt)?this.state=36:xt===is?this.openTag():47===xt?this.state=35:Fr(xt)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const xt=this.captureTo(hs);switch(xt){case 38:this.state=14,this.entityReturnState=42;break;case rs:this.fail("disallowed character.");break;case pi:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",xt===is?this.openTag():this.state=36}}sCloseTag(){const xt=this.captureNameChars();xt===is?this.closeTag():or(xt)?this.state=44:xt!==pi&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case is:this.closeTag();break;case pi:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:xt,forbiddenState:Ct}=this;const{chunk:_t,textHandler:$t}=this;e:for(;;)switch(this.getCode()){case rs:if(this.state=15,void 0!==$t){const{text:Ct}=this,Vn=_t.slice(xt,this.prevI);0!==Ct.length?($t(Ct+Vn),this.text=""):0!==Vn.length&&$t(Vn)}Ct=0;break e;case 38:this.state=14,this.entityReturnState=es,void 0!==$t&&(this.text+=_t.slice(xt,this.prevI)),Ct=0;break e;case as:switch(Ct){case 0:Ct=1;break;case 1:Ct=2;break;case 2:break;default:throw new Error("impossible state")}break;case is:2===Ct&&this.fail('the string "]]>" is disallowed in char data.'),Ct=0;break;case gi:void 0!==$t&&(this.text+=`${_t.slice(xt,this.prevI)}\n`),xt=this.i,Ct=0;break;case pi:void 0!==$t&&(this.text+=_t.slice(xt));break e;default:Ct=0}this.forbiddenState=Ct}handleTextOutsideRoot(){let{i:xt}=this;const{chunk:Ct,textHandler:_t}=this;let $t=!1;e:for(;;){const Vn=this.getCode();switch(Vn){case rs:if(this.state=15,void 0!==_t){const{text:$t}=this,Vn=Ct.slice(xt,this.prevI);0!==$t.length?(_t($t+Vn),this.text=""):0!==Vn.length&&_t(Vn)}break e;case 38:this.state=14,this.entityReturnState=es,void 0!==_t&&(this.text+=Ct.slice(xt,this.prevI)),$t=!0;break e;case gi:void 0!==_t&&(this.text+=`${Ct.slice(xt,this.prevI)}\n`),xt=this.i;break;case pi:void 0!==_t&&(this.text+=Ct.slice(xt));break e;default:or(Vn)||($t=!0)}}$t&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(xt,Ct){var _t;const{prefix:$t,local:Vn}=this.qname(xt),Gn={name:xt,prefix:$t,local:Vn,value:Ct};if(this.attribList.push(Gn),null===(_t=this.attributeHandler)||void 0===_t||_t.call(this,Gn),"xmlns"===$t){const xt=Ct.trim();"1.0"===this.currentXMLVersion&&""===xt&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[Vn]=xt,nsPairCheck(this,Vn,xt)}else if("xmlns"===xt){const xt=Ct.trim();this.topNS[""]=xt,nsPairCheck(this,"",xt)}}pushAttribPlain(xt,Ct){var _t;const $t={name:xt,value:Ct};this.attribList.push($t),null===(_t=this.attributeHandler)||void 0===_t||_t.call(this,$t)}end(){var xt,Ct;this.sawRoot||this.fail("document must contain a root element.");const{tags:_t}=this;for(;_t.length>0;){const xt=_t.pop();this.fail(`unclosed tag: ${xt.name}`)}0!==this.state&&this.state!==es&&this.fail("unexpected end.");const{text:$t}=this;return 0!==$t.length&&(null===(xt=this.textHandler)||void 0===xt||xt.call(this,$t),this.text=""),this._closed=!0,null===(Ct=this.endHandler)||void 0===Ct||Ct.call(this),this._init(),this}resolve(xt){var Ct,_t;let $t=this.topNS[xt];if(void 0!==$t)return $t;const{tags:Vn}=this;for(let Ct=Vn.length-1;Ct>=0;Ct--)if(void 0!==($t=Vn[Ct].ns[xt]))return $t;return void 0!==($t=this.ns[xt])?$t:null===(_t=(Ct=this.opt).resolvePrefix)||void 0===_t?void 0:_t.call(Ct,xt)}qname(xt){const Ct=xt.indexOf(":");if(-1===Ct)return{prefix:"",local:xt};const _t=xt.slice(Ct+1),$t=xt.slice(0,Ct);return(""===$t||""===_t||_t.includes(":"))&&this.fail(`malformed name: ${xt}.`),{prefix:$t,local:_t}}processAttribsNS(){var xt;const{attribList:Ct}=this,_t=this.tag;{const{prefix:Ct,local:$t}=this.qname(_t.name);_t.prefix=Ct,_t.local=$t;const Vn=_t.uri=null!==(xt=this.resolve(Ct))&&void 0!==xt?xt:"";""!==Ct&&("xmlns"===Ct&&this.fail('tags may not have "xmlns" as prefix.'),""===Vn&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Ct)}.`),_t.uri=Ct))}if(0===Ct.length)return;const{attributes:$t}=_t,Vn=new Set;for(const xt of Ct){const{name:Ct,prefix:_t,local:Gn}=xt;let or,lr;""===_t?(or="xmlns"===Ct?zo:"",lr=Ct):(void 0===(or=this.resolve(_t))&&(this.fail(`unbound namespace prefix: ${JSON.stringify(_t)}.`),or=_t),lr=`{${or}}${Gn}`),Vn.has(lr)&&this.fail(`duplicate attribute: ${lr}.`),Vn.add(lr),xt.uri=or,$t[Ct]=xt}this.attribList=[]}processAttribsPlain(){const{attribList:xt}=this,Ct=this.tag.attributes;for(const{name:_t,value:$t}of xt)void 0!==Ct[_t]&&this.fail(`duplicate attribute: ${_t}.`),Ct[_t]=$t;this.attribList=[]}openTag(){var xt;this.processAttribs();const{tags:Ct}=this,_t=this.tag;_t.isSelfClosing=!1,null===(xt=this.openTagHandler)||void 0===xt||xt.call(this,_t),Ct.push(_t),this.state=es,this.name=""}openSelfClosingTag(){var xt,Ct,_t;this.processAttribs();const{tags:$t}=this,Vn=this.tag;Vn.isSelfClosing=!0,null===(xt=this.openTagHandler)||void 0===xt||xt.call(this,Vn),null===(Ct=this.closeTagHandler)||void 0===Ct||Ct.call(this,Vn),null===(this.tag=null!==(_t=$t[$t.length-1])&&void 0!==_t?_t:null)&&(this.closedRoot=!0),this.state=es,this.name=""}closeTag(){const{tags:xt,name:Ct}=this;if(this.state=es,this.name="",""===Ct)return this.fail("weird empty close tag."),void(this.text+="</>");const _t=this.closeTagHandler;let $t=xt.length;for(;$t-- >0;){const $t=this.tag=xt.pop();if(this.topNS=$t.ns,null==_t||_t($t),$t.name===Ct)break;this.fail("unexpected close tag.")}0===$t?this.closedRoot=!0:$t<0&&(this.fail(`unmatched closing tag: ${Ct}.`),this.text+=`</${Ct}>`)}parseEntity(xt){if("#"!==xt[0]){const Ct=this.ENTITIES[xt];return void 0!==Ct?Ct:(this.fail(this.isName(xt)?"undefined entity.":"disallowed character in entity name."),`&${xt};`)}let Ct=NaN;return"x"===xt[1]&&/^#x[0-9a-f]+$/i.test(xt)?Ct=parseInt(xt.slice(2),16):/^#[0-9]+$/.test(xt)&&(Ct=parseInt(xt.slice(1),10)),this.isChar(Ct)?String.fromCodePoint(Ct):(this.fail("malformed character entity."),`&${xt};`)}}},{"xmlchars/xml/1.0/ed5":96,"xmlchars/xml/1.1/ed2":97,"xmlchars/xmlns/1.0/ed3":98}],100:[function(xt,Ct,_t){Ct.exports={name:"@jscad/x3d-deserializer",version:"2.2.6",description:"X3D Deserializer for JSCAD",repository:"https://github.com/jscad/OpenJSCAD.org/",main:"src/index.js",scripts:{coverage:"nyc --all --reporter=html --reporter=text npm test",test:"ava --verbose --timeout 2m 'tests/**/*.test.js'"},contributors:[{name:"z3dev",url:"https://github.com/z3dev"}],keywords:["openjscad","jscad","import","deserializer","x3d"],license:"MIT",publishConfig:{access:"public"},dependencies:{"@jscad/array-utils":"2.1.4","@jscad/modeling":"2.12.1",saxes:"5.0.1"},devDependencies:{ava:"3.15.0",nyc:"15.1.0"}}},{}],101:[function(xt,Ct,_t){Ct.exports={inchMM:1/.03937}},{}],102:[function(xt,Ct,_t){const{maths:$t}=xt("@jscad/modeling");Ct.exports=(xt,Ct,_t,Vn,Gn)=>{const or=$t.mat4.create(),lr=$t.mat4.create();return $t.mat4.multiply(or,or,$t.mat4.fromTranslation(lr,Gn)),$t.mat4.multiply(or,or,$t.mat4.fromTranslation(lr,xt)),$t.mat4.multiply(or,or,$t.mat4.fromRotation(lr,Ct[3],Ct)),$t.mat4.multiply(or,or,$t.mat4.fromRotation(lr,Vn[3],Vn)),$t.mat4.multiply(or,or,$t.mat4.fromScaling(lr,_t)),$t.mat4.multiply(or,or,$t.mat4.fromRotation(lr,Vn[3],$t.vec3.negate($t.vec3.create(),Vn))),$t.mat4.multiply(or,or,$t.mat4.fromTranslation(lr,$t.vec3.negate($t.vec3.create(),xt))),or}},{"@jscad/modeling":210}],103:[function(xt,Ct,_t){const{extrusions:$t,geometries:Vn,maths:Gn}=xt("@jscad/modeling"),{mat4:or,vec3:lr,utils:Fr}=Gn,{extrudeFromSlices:Hr,slice:xo}=$t,isZeroVector=xt=>xt[0]+0===0&&xt[1]+0===0&&xt[2]+0===0,calculateZaxis=(xt,Ct,_t,$t)=>{const Vn=lr.subtract(lr.create(),$t,_t),Gn=lr.subtract(lr.create(),Ct,_t);return lr.normalize(xt,lr.cross(xt,Vn,Gn))};Ct.exports=xt=>{let{beginCap:Ct,endCap:_t,crossSection:$t,orientations:Gn,scales:Eo,spine:Mo}=Object.assign({},xt);if(Fr.area($t)<0&&$t.reverse(),1===Eo.length&&(Eo=Mo.map((xt=>Eo[0]))),1===Gn.length&&(Gn=Mo.map((xt=>Gn[0]))),Mo.length!==Eo.length||Mo.length!==Gn.length)throw new Error(`invalid X3D specification; spine scale orientaion length must be the same; ${Mo.length}`);const Oo=Vn.geom2.fromPoints($t),Ro=xo.fromSides(Vn.geom2.toSides(Oo));let Io=(xt=>{const Ct=xt.length,_t=lr.equals(xt[0],xt[Ct-1]),$t=[];for(let Vn=0;Vn<Ct;Vn++){const Gn=lr.create();0===Vn?_t?lr.normalize(Gn,lr.subtract(Gn,xt[1],xt[Ct-2])):lr.normalize(Gn,lr.subtract(Gn,xt[1],xt[0])):Vn===Ct-1?_t?lr.normalize(Gn,lr.subtract(Gn,xt[1],xt[Ct-2])):lr.normalize(Gn,lr.subtract(Gn,xt[Ct-1],xt[Ct-2])):lr.normalize(Gn,lr.subtract(Gn,xt[Vn+1],xt[Vn-1])),$t.push(Gn)}return $t})(Mo),Bo=(xt=>{const Ct=xt.length,_t=lr.equals(xt[0],xt[Ct-1]),$t=[];let Vn;for(let Gn=0;Gn<Ct;Gn++){const or=lr.create();0===Gn?_t?calculateZaxis(or,xt[Ct-2],xt[0],xt[1]):Ct>2&&calculateZaxis(or,xt[0],xt[1],xt[2]):Gn===Ct-1?_t?calculateZaxis(or,xt[Ct-2],xt[0],xt[1]):Ct>2&&calculateZaxis(or,xt[Ct-3],xt[Ct-2],xt[Ct-1]):calculateZaxis(or,xt[Gn-1],xt[Gn],xt[Gn+1]),Vn&&lr.dot(Vn,or)<0&&lr.negate(or,or),$t.push(or),Vn=or}if(isZeroVector($t[0]))for(let xt=1;xt<$t.length;xt++)if(!isZeroVector($t[xt])){$t[0]=$t[xt];break}for(let xt=1;xt<$t.length;xt++)isZeroVector($t[xt])&&!isZeroVector($t[xt-1])&&lr.clone($t[xt],$t[xt-1]);return $t})(Mo),zo=((xt,Ct)=>{const _t=[];for(let $t=0;$t<xt.length;$t++){const Vn=lr.create();_t.push(lr.normalize(Vn,lr.cross(Vn,xt[$t],Ct[$t])))}return _t})(Io,Bo);const Ho=[0,1,0],Qo=or.fromVectorRotation(or.create(),lr.fromValues(0,0,1),Ho);return Bo.reduce(((xt,Ct)=>xt&&isZeroVector(Ct)),!0)&&(lr.subtract(Ho,Mo[1],Mo[0]),or.fromVectorRotation(Qo,lr.fromValues(0,0,1),Ho),zo=zo.map((xt=>[1,0,0])),Io=Io.map((xt=>[0,1,0])),Bo=Bo.map((xt=>[0,0,1]))),Hr({numberOfSlices:Mo.length,capStart:Ct,capEnd:_t,callback:function(xt,Ct,_t){const $t=Mo[Ct],Vn=lr.fromVec2(lr.create(),Eo[Ct],1),Fr=Gn[Ct],Hr=zo[Ct],Oo=Io[Ct],Ro=Bo[Ct],Ho=or.fromTranslation(or.create(),$t),pi=or.fromScaling(or.create(),Vn),gi=((xt,Ct,_t,$t)=>(xt[0]=Ct[0],xt[1]=_t[0],xt[2]=$t[0],xt[3]=0,xt[4]=Ct[1],xt[5]=_t[1],xt[6]=$t[1],xt[7]=0,xt[8]=Ct[2],xt[9]=_t[2],xt[10]=$t[2],xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt))(or.create(),Hr,Oo,Ro),es=or.fromRotation(or.create(),Fr[3],Fr),ts=or.create();or.multiply(ts,Qo,ts),or.multiply(ts,gi,ts),or.multiply(ts,es,ts),or.multiply(ts,Ho,ts);let ns=_t;return ns=xo.transform(pi,ns),xo.transform(ts,ns)}},Ro)}},{"@jscad/modeling":210}],104:[function(xt,Ct,_t){const $t=xt("../package.json").version,Vn=xt("./translate"),Gn=xt("./instantiate");Ct.exports={deserialize:(xt,Ct)=>{const _t={filename:"x3d",output:"script",version:$t,flatten:!0,addMetaData:!0};return"script"===(xt=Object.assign({},_t,xt)).output?Vn(xt,Ct):Gn(xt,Ct)},extension:"x3d"}},{"../package.json":100,"./instantiate":105,"./translate":112}],105:[function(xt,Ct,_t){const{flatten:$t}=xt("@jscad/array-utils"),Vn=xt("./parse"),Gn=xt("./instantiateDefinitions"),{x3dTypes:or}=xt("./objects");Ct.exports=(Ct,_t)=>{const lr={pxPmm:xt("./constants").pxPmm};Ct=Object.assign({},lr,Ct);const{pxPmm:Fr}=Ct;Ct&&Ct.statusCallback&&Ct.statusCallback({progress:0});const{x3dObj:Hr}=Vn(_t,Fr);if(Hr.definition!==or.X3D||!Hr.objects)throw new Error("X3D malformed");if(Hr.objects.length<1||Hr.objects[0].definition!==or.SCENE)throw new Error("X3D did not define a SCENE");Ct&&Ct.statusCallback&&Ct.statusCallback({progress:50});const xo=Hr.objects[0].objects;let Eo=Gn(Ct,xo);return Ct.flatten&&(Eo=$t(Eo)),Ct&&Ct.statusCallback&&Ct.statusCallback({progress:100}),Eo}},{"./constants":101,"./instantiateDefinitions":106,"./objects":110,"./parse":111,"@jscad/array-utils":525}],106:[function(xt,Ct,_t){const{colors:$t,transforms:Vn}=xt("@jscad/modeling"),Gn=xt("./createTransform"),{x3dTypes:or}=xt("./objects"),{findColor:lr}=xt("./translateHelpers"),Fr=xt("./instantiatePrimitive"),{instantiateLine:Hr}=xt("./instantiateLine"),{instantiateMesh:xo}=xt("./instantiateMesh"),Eo=new Map,instantiateDefinition=(xt,Ct)=>{let _t;switch(Ct.definition){case or.TRANSFORM:_t=((xt,Ct)=>{const _t=Ct.objects.map((Ct=>instantiateDefinition(xt,Ct))).filter((xt=>null!=xt));if(0===_t.length)return null;const $t=Gn(Ct.center,Ct.rotation,Ct.scale,Ct.scaleOrientation,Ct.translation);return _t.map((xt=>{const Ct=xt.color;return xt=Vn.transform($t,xt),Ct&&(xt.color=Ct),xt}))})(xt,Ct);break;case or.SHAPE:_t=((xt,Ct)=>{const _t=Ct.objects,Vn=lr(_t,xt);let Gn=Fr(xt,_t);return Gn||(Gn=xo(xt,_t)),Gn||(Gn=Hr(xt,_t)),Gn||(Gn=null),Gn&&Vn&&(Gn=$t.colorize(Vn,Gn)),Gn})(xt,Ct);break;case or.GROUP:_t=((xt,Ct)=>{const _t=Ct.objects.map((Ct=>instantiateDefinition(xt,Ct))).filter((xt=>null!=xt));return 0===_t.length?null:_t})(xt,Ct);break;default:console.log("WARNING: unknown definition: "+Ct.definition)}return _t};Ct.exports=(xt,Ct)=>{const _t=Ct.map((Ct=>instantiateDefinition(xt,Ct))).filter((xt=>null!=xt));return Eo.clear(),_t}},{"./createTransform":102,"./instantiateLine":107,"./instantiateMesh":108,"./instantiatePrimitive":109,"./objects":110,"./translateHelpers":114,"@jscad/modeling":210}],107:[function(xt,Ct,_t){const $t=xt("@jscad/modeling"),{createColors:Vn,findNode:Gn}=xt("./translateHelpers"),{x3dTypes:or}=xt("./objects"),convertLine=(xt,Ct)=>{let _t=Gn(or.INDEXEDLINESET,Ct);if(_t){const xt=Gn(or.COORDINATE,_t.objects),Ct=_t.indexes,$t=Gn(or.COLOR,_t.objects);if(xt&&Ct){const Gn=Ct.map((Ct=>{let _t=Ct.map((Ct=>xt.points[Ct]));return _t.findIndex((xt=>0!==xt[2]))>=0&&(console.warn("WARNING: unsupported 3D indexed line set was ignored"),_t=[]),_t}));return!0===_t.colorPerVertex?_t.colorIndex=Ct:_t.colorIndex=Ct.map(((xt,Ct)=>Ct)),{pointsSet:Gn,colors:Vn(_t,$t)}}}if(_t=Gn(or.LINESET,Ct)){const xt=Gn(or.COORDINATE,_t.objects),Ct=Gn(or.COLOR,_t.objects),$t=_t.vertexCount;if(xt&&$t){let Gn=0;const or=$t.map((Ct=>{let _t=[];for(let $t=0;$t<Ct;$t++)_t.push(xt.points[Gn]),Gn++;return _t.findIndex((xt=>0!==xt[2]))>=0&&(console.warn("WARNING: unsupported 3D line set was ignored"),_t=[]),_t}));if(!0===_t.colorPerVertex){let xt=0;_t.colorIndex=$t.map((Ct=>{const _t=[];for(let $t=0;$t<Ct;$t++)_t.push(xt),xt++;return _t}))}else _t.colorIndex=or.map(((xt,Ct)=>Ct));return{pointsSet:or,colors:Vn(_t,Ct)}}}return null};Ct.exports={convertLine:convertLine,instantiateLine:(xt,Ct)=>{let _t;const Vn=convertLine(0,Ct);if(Vn){const{pointsSet:xt,colors:Ct}=Vn;_t=xt.map(((xt,_t)=>Ct?$t.colors.colorize(Ct[_t],$t.primitives.line(xt)):$t.primitives.line(xt)))}return _t}}},{"./objects":110,"./translateHelpers":114,"@jscad/modeling":210}],108:[function(xt,Ct,_t){const{primitives:$t}=xt("@jscad/modeling"),{x3dTypes:Vn}=xt("./objects"),{findNode:Gn,createColors:or}=xt("./translateHelpers"),convertMesh=(xt,Ct)=>{let _t=Gn(Vn.TRIANGLESET,Ct);if(_t){const xt=Gn(Vn.COORDINATE,_t.objects),Ct=Gn(Vn.COLOR,_t.objects);if(xt){const $t=xt.points,Vn=$t.length,Gn=Math.trunc(Vn/3),lr=[];for(let xt=0;xt<Gn;xt++){const Ct=3*xt;lr.push([Ct,Ct+1,Ct+2])}const Fr=_t.ccw?"outward":"inward";return _t.colorIndex=lr,{type:"triangles",points:$t,faces:lr,colors:or(_t,Ct),orientation:Fr}}}if(_t=Gn(Vn.TRIANGLEFANSET,Ct)){const xt=_t.fanCount,Ct=Gn(Vn.COORDINATE,_t.objects),$t=Gn(Vn.COLOR,_t.objects);if(Ct){const Vn=Ct.points,Gn=xt.length,lr=[];let Fr=0;for(let Ct=0;Ct<Gn;Ct++){const _t=Math.trunc(xt[Ct]);for(let xt=1;xt<_t-1;xt++)lr.push([Fr,Fr+xt,Fr+xt+1]);Fr+=_t}const Hr=_t.ccw?"outward":"inward";return _t.colorIndex=lr,{type:`triangle fans (${Gn})`,points:Vn,faces:lr,colors:or(_t,$t),orientation:Hr}}}if(_t=Gn(Vn.TRIANGLESTRIPSET,Ct)){const xt=_t.stripCount,Ct=Gn(Vn.COORDINATE,_t.objects),$t=Gn(Vn.COLOR,_t.objects);if(Ct){const Vn=Ct.points,Gn=xt.length,lr=[];let Fr=0;for(let Ct=0;Ct<Gn;Ct++){const _t=Math.trunc(xt[Ct]);for(let xt=0;xt<_t-2;xt++){const Ct=[Fr+xt,Fr+xt+1,Fr+xt+2];xt%2==1&&Ct.reverse(),lr.push(Ct)}Fr+=_t}return _t.colorIndex=lr,{type:`triangle strip (${Gn})`,points:Vn,faces:lr,colors:or(_t,$t),orientation:_t.ccw?"outward":"inward"}}}if(_t=Gn(Vn.QUADSET,Ct)){const xt=Gn(Vn.COORDINATE,_t.objects),Ct=Gn(Vn.COLOR,_t.objects);if(xt){const $t=xt.points,Vn=$t.length,Gn=Math.trunc(Vn/4),lr=[];for(let xt=0;xt<Gn;xt++){const Ct=4*xt;lr.push([Ct,Ct+1,Ct+2,Ct+3])}return _t.colorIndex=lr,{type:`quad (${Gn})`,points:$t,faces:lr,colors:or(_t,Ct),orientation:_t.ccw?"outward":"inward"}}}if(_t=Gn(Vn.INDEXEDTRIANGLESET,Ct)){const xt=Gn(Vn.COORDINATE,_t.objects),Ct=Gn(Vn.COLOR,_t.objects),$t=_t.index;if(xt&&$t&&$t.length>2){const Vn=xt.points,Gn=Math.trunc($t.length/3),lr=[];for(let xt=0;xt<Gn;xt++){const Ct=3*xt;lr.push([$t[Ct],$t[Ct+1],$t[Ct+2]])}return _t.colorIndex=lr,{type:"indexed triangle",points:Vn,faces:lr,colors:or(_t,Ct),orientation:_t.ccw?"outward":"inward"}}}if(_t=Gn(Vn.INDEXEDTRIANGLEFANSET,Ct)){const xt=Gn(Vn.COORDINATE,_t.objects),Ct=Gn(Vn.COLOR,_t.objects),$t=_t.fans;if(xt&&$t&&$t.length>0){const Vn=xt.points,Gn=$t.length,lr=[];for(let xt=0;xt<Gn;xt++){const Ct=$t[xt],_t=Ct.length;for(let xt=1;xt<_t-1;xt++)lr.push([Ct[0],Ct[xt],Ct[xt+1]])}return _t.colorIndex=lr,{type:`indexed triangle fan (${Gn})`,points:Vn,faces:lr,colors:or(_t,Ct),orientation:_t.ccw?"outward":"inward"}}}if(_t=Gn(Vn.INDEXEDTRIANGLESTRIPSET,Ct)){const xt=Gn(Vn.COORDINATE,_t.objects),Ct=Gn(Vn.COLOR,_t.objects),$t=_t.strips;if(xt&&$t&&$t.length>0){const Vn=xt.points,Gn=$t.length,lr=[];for(let xt=0;xt<Gn;xt++){const Ct=$t[xt],_t=Ct.length;for(let xt=0;xt<_t-2;xt++){const _t=[Ct[xt],Ct[xt+1],Ct[xt+2]];xt%2==1&&_t.reverse(),lr.push(_t)}}return _t.colorIndex=lr,{type:`indexed triangle strip (${Gn})`,points:Vn,faces:lr,colors:or(_t,Ct),orientation:_t.ccw?"outward":"inward"}}}if(_t=Gn(Vn.INDEXEDQUADSET,Ct)){const xt=Gn(Vn.COORDINATE,_t.objects),Ct=Gn(Vn.COLOR,_t.objects),$t=_t.index;if(xt&&$t&&$t.length>3){const Vn=xt.points,Gn=Math.trunc($t.length/4),lr=[];for(let xt=0;xt<Gn;xt++){const Ct=4*xt;lr.push([$t[Ct],$t[Ct+1],$t[Ct+2],$t[Ct+3]])}return _t.colorIndex=lr,{type:`indexed quad (${Gn})`,points:Vn,faces:lr,colors:or(_t,Ct),orientation:_t.ccw?"outward":"inward"}}}if(_t=Gn(Vn.INDEXEDFACESET,Ct)){const xt=Gn(Vn.COORDINATE,_t.objects),Ct=_t.faces,$t=Gn(Vn.COLOR,_t.objects);if(xt&&Ct&&Ct.length>0){const Vn=xt.points;return{type:`indexed faces (${Ct.length})`,points:Vn,faces:Ct,colors:or(_t,$t),orientation:_t.ccw?"outward":"inward"}}}if(_t=Gn(Vn.ELEVATIONGRID,Ct)){const xt=_t.height,Ct=Gn(Vn.COLOR,_t.objects);if(xt&&xt.length>0){const $t=_t.xDimension,Vn=_t.xSpacing,Gn=_t.zDimension,lr=_t.zSpacing,Fr=[];let Hr=0;for(let Ct=0;Ct<Gn;++Ct)for(let _t=0;_t<$t;++_t){const $t=_t*Vn,Gn=Ct*lr,or=xt[Hr];Hr++,Fr.push([$t,or,Gn])}const xo=[];for(let Ct=0;Ct<Gn-1;++Ct)for(let _t=0;_t<$t-1;++_t){const Vn=_t+Ct*$t,Gn=_t+1+Ct*$t,or=_t+(Ct+1)*$t,lr=_t+1+(Ct+1)*$t,Fr=[Math.abs(xt[Vn]),Math.abs(xt[Gn]),Math.abs(xt[or]),Math.abs(xt[lr])];let Hr=0;Fr[1]>=Fr[0]&&Fr[1]>=Fr[2]&&Fr[1]>=Fr[3]&&(Hr=1),Fr[2]>=Fr[0]&&Fr[2]>=Fr[1]&&Fr[2]>=Fr[3]&&(Hr=2),Fr[3]>=Fr[0]&&Fr[3]>=Fr[1]&&Fr[3]>=Fr[2]&&(Hr=3),0===Hr&&xo.push([Vn,lr,Gn],[Vn,or,lr]),1===Hr&&xo.push([Gn,or,lr],[Gn,Vn,or]),2===Hr&&xo.push([or,Gn,Vn],[or,lr,Gn]),3===Hr&&xo.push([lr,Vn,or],[lr,Gn,Vn])}const Eo=_t.ccw?"outward":"inward";return!0===_t.colorPerVertex&&(_t.colorIndex=xo),{type:`elevation grid (${$t} X ${Gn})`,points:Fr,faces:xo,colors:or(_t,Ct),orientation:Eo}}}return null};Ct.exports={convertMesh:convertMesh,instantiateMesh:(xt,Ct)=>{let _t;const Vn=convertMesh(0,Ct);return Vn&&(_t=$t.polyhedron(Vn)),_t}}},{"./objects":110,"./translateHelpers":114,"@jscad/modeling":210}],109:[function(xt,Ct,_t){const{booleans:$t,geometries:Vn,primitives:Gn,transforms:or}=xt("@jscad/modeling"),{x3dTypes:lr}=xt("./objects"),{findNode:Fr}=xt("./translateHelpers"),Hr=xt("./extrudeX3D");Ct.exports=(xt,Ct)=>{let _t,xo=Fr(lr.BOX,Ct);if(xo)return Gn.cuboid({size:xo.size});if(xo=Fr(lr.CONE,Ct))return or.rotateX(-Math.PI/2,Gn.cylinderElliptic({startRadius:[xo.bottomRadius,xo.bottomRadius],height:xo.height,segments:xo.subdivision,endRadius:[xo.topRadius,xo.topRadius]}));if(xo=Fr(lr.CYLINDER,Ct))return or.rotateX(-Math.PI/2,Gn.cylinder({radius:xo.radius,height:xo.height,segments:xo.subdivision}));if(xo=Fr(lr.SPHERE,Ct))return Gn.sphere({radius:xo.radius,segments:xo.subdivision});if(xo=Fr(lr.EXTRUSION,Ct))return Hr(xo);if(xo=Fr(lr.ARC2D,Ct))return Gn.arc({radius:xo.radius,startAngle:xo.startAngle,endAngle:xo.endAngle,segments:xo.subdivision});if(xo=Fr(lr.ARCCLOSE2D,Ct))return"PIE"===xo.closureType?Gn.circle({radius:xo.radius,startAngle:xo.startAngle,endAngle:xo.endAngle,segments:xo.subdivision}):Vn.geom2.fromPoints(Vn.path2.toPoints(Vn.path2.close(Gn.arc({radius:xo.radius,startAngle:xo.startAngle,endAngle:xo.endAngle,segments:xo.subdivision}))));if(xo=Fr(lr.CIRCLE2D,Ct))return Gn.arc({radius:xo.radius,segments:xo.subdivision});if(xo=Fr(lr.DISK2D,Ct))return xo.innerRadius===xo.outerRadius?Gn.arc({radius:xo.outerRadius,segments:xo.subdivision}):0===xo.innerRadius?Gn.circle({radius:xo.outerRadius,segments:xo.subdivision}):$t.subtract(Gn.circle({radius:xo.outerRadius,segments:xo.subdivision}),Gn.circle({radius:xo.innerRadius,segments:xo.subdivision}));if(xo=Fr(lr.POLYLINE2D,Ct))return Gn.line([xo.lineSegments]);if(xo=Fr(lr.RECTANGLE2D,Ct))return Gn.rectangle({size:xo.size});if(xo=Fr(lr.TRIANGLESET2D,Ct)){const xt=xo.vertices,Ct=xt.length,$t=Math.trunc(Ct/3);_t=[];for(let Ct=0;Ct<$t;Ct+=3)_t.push(Vn.geom2.fromPoints([xt[Ct],xt[Ct+1],xt[Ct+2]]));return _t}return _t}},{"./extrudeX3D":103,"./objects":110,"./translateHelpers":114,"@jscad/modeling":210}],110:[function(xt,Ct,_t){const{maths:$t}=xt("@jscad/modeling"),Vn={X3D:0,UNIT:1,META:2,SCENE:3,TRANSFORM:4,SHAPE:5,GROUP:6,APPEARANCE:7,TRIANGLESET:10,TRIANGLEFANSET:11,TRIANGLESTRIPSET:12,QUADSET:13,INDEXEDTRIANGLESET:14,INDEXEDTRIANGLEFANSET:15,INDEXEDTRIANGLESTRIPSET:16,INDEXEDQUADSET:17,ELEVATIONGRID:18,INDEXEDFACESET:19,LINESET:20,INDEXEDLINESET:21,BOX:50,CONE:51,CYLINDER:52,SPHERE:53,EXTRUSION:54,ARC2D:61,ARCCLOSE2D:62,CIRCLE2D:63,DISK2D:64,POLYLINE2D:65,RECTANGLE2D:66,TRIANGLESET2D:67,COLOR:91,COORDINATE:92,MATERIAL:93},parseNumbers=xt=>xt.trim().replace(/,/g," ").split(/ +/).map((xt=>parseFloat(xt))),parseIndices=xt=>xt.replace(/,/g," ").trim().split(/ -1/).map((xt=>parseNumbers(xt)));Ct.exports={x3dTypes:Vn,x3dX3D:xt=>({definition:Vn.X3D,objects:[]}),x3dUnit:xt=>{const Ct={definition:Vn.UNIT,category:"",name:"",conversionFactor:1};return xt.category&&(Ct.category=xt.category),xt.name&&(Ct.name=xt.name),xt.conversionfactor&&(Ct.conversionFactor=xt.conversionfactor),Ct},x3dMeta:xt=>{const Ct={definition:Vn.META,content:"",name:""};return xt.content&&(Ct.content=xt.content),xt.name&&(Ct.name=xt.name),Ct},x3dScene:xt=>({definition:Vn.SCENE,objects:[]}),x3dTransform:xt=>{const Ct={definition:Vn.TRANSFORM,center:[0,0,0],rotation:[0,0,1,0],scale:[1,1,1],scaleOrientation:[0,0,1,0],translation:[0,0,0]};if(xt.center){const _t=parseNumbers(xt.center);_t.length>2&&(Ct.center=_t)}if(xt.rotation){const _t=parseNumbers(xt.rotation);_t.length>3&&(Ct.rotation=_t)}if(xt.scale){const _t=parseNumbers(xt.scale);_t.length>2&&(Ct.scale=_t)}if(xt.scaleorientation){const _t=parseNumbers(xt.scaleorientation);_t.length>3&&(Ct.scaleOrientation=_t)}if(xt.translation){const _t=parseNumbers(xt.translation);_t.length>2&&(Ct.translation=_t)}return Ct.objects=[],Ct},x3dShape:xt=>({definition:Vn.SHAPE,objects:[]}),x3dGroup:xt=>({definition:Vn.GROUP,objects:[]}),x3dBox:xt=>{const Ct={definition:Vn.BOX,size:[2,2,2]};if(xt.size){const _t=parseNumbers(xt.size);_t.length>2&&(Ct.size=_t)}return Ct},x3dCone:xt=>{const Ct={definition:Vn.CONE,bottomRadius:1,height:2,subdivision:32,topRadius:1e-5};return xt.bottomRadius&&(Ct.bottomRadius=Math.max(parseFloat(xt.bottomRadius),1e-5)),xt.height&&(Ct.height=parseFloat(xt.height)),xt.subdivision&&(Ct.subdivision=parseFloat(xt.subdivision)),xt.topRadius&&(Ct.topRadius=Math.max(parseFloat(xt.topRadius),1e-5)),Ct},x3dCylinder:xt=>{const Ct={definition:Vn.CYLINDER,height:2,radius:1,subdivision:32};return xt.height&&(Ct.height=parseFloat(xt.height)),xt.radius&&(Ct.radius=parseFloat(xt.radius)),xt.subdivision&&(Ct.subdivision=parseFloat(xt.subdivision)),Ct},x3dSphere:xt=>{const Ct={definition:Vn.SPHERE,radius:1,subdivision:24};if(xt.radius&&(Ct.radius=parseFloat(xt.radius)),xt.subdivision){const _t=parseNumbers(xt.subdivision);_t.length>1&&(Ct.subdivision=Math.max(..._t))}return Ct},x3dExtrusion:xt=>{const Ct={definition:Vn.EXTRUSION,ccw:!0,beginCap:!0,endCap:!0,crossSection:[[1,1],[1,-1],[-1,-1],[-1,1],[1,1]],orientations:[[0,0,1,0]],scales:[[1,1]],spine:[[0,0,0],[0,1,0]]};if(xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),xt.beginCap&&(Ct.beginCap=xt.beginCap.includes("TRUE")||xt.beginCap.includes("true")),xt.endCap&&(Ct.endCap=xt.endCap.includes("TRUE")||xt.endCap.includes("true")),xt.crossSection){const _t=parseNumbers(xt.crossSection),Vn=Math.trunc(_t.length/2),Gn=[];for(let xt=0;xt<Vn;xt++){const Ct=2*xt;Gn.push([_t[Ct],_t[Ct+1]])}Ct.ccw=$t.utils.area(Gn)<0,Ct.crossSection=Gn}if(xt.orientation){const _t=parseNumbers(xt.orientation),$t=Math.trunc(_t.length/4),Vn=[];for(let xt=0;xt<$t;xt++){const Ct=4*xt;Vn.push([_t[Ct],_t[Ct+1],_t[Ct+2],_t[Ct+3]])}Ct.orientations=Vn}if(xt.scale){const _t=parseNumbers(xt.scale),$t=Math.trunc(_t.length/2),Vn=[];for(let xt=0;xt<$t;xt++){const Ct=2*xt;0===_t[Ct]&&(_t[Ct]=1e-6),0===_t[Ct+1]&&(_t[Ct+1]=1e-6),Vn.push([_t[Ct],_t[Ct+1]])}Ct.scales=Vn}if(xt.spine){const _t=parseNumbers(xt.spine),$t=Math.trunc(_t.length/3),Vn=[];for(let xt=0;xt<$t;xt++){const Ct=3*xt;Vn.push([_t[Ct],_t[Ct+1],_t[Ct+2]])}Ct.spine=Vn}return Ct},x3dArc2D:xt=>{const Ct={definition:Vn.ARC2D,endAngle:Math.PI/2,radius:1,startAngle:0,subdivision:32};return xt.endAngle&&(Ct.endAngle=parseFloat(xt.endAngle)),xt.radius&&(Ct.radius=parseFloat(xt.radius)),xt.startAngle&&(Ct.startAngle=parseFloat(xt.startAngle)),xt.subdivision&&(Ct.subdivision=parseFloat(xt.subdivision)),Ct},x3dArcClose2D:xt=>{const Ct={definition:Vn.ARCCLOSE2D,closureType:"PIE",endAngle:Math.PI/2,radius:1,startAngle:0,subdivision:32};return xt.closureType&&(Ct.closureType=xt.closureType),xt.endAngle&&(Ct.endAngle=parseFloat(xt.endAngle)),xt.radius&&(Ct.radius=parseFloat(xt.radius)),xt.startAngle&&(Ct.startAngle=parseFloat(xt.startAngle)),xt.subdivision&&(Ct.subdivision=parseFloat(xt.subdivision)),Ct},x3dCircle2D:xt=>{const Ct={definition:Vn.CIRCLE2D,radius:1,subdivision:32};return xt.radius&&(Ct.radius=parseFloat(xt.radius)),xt.subdivision&&(Ct.subdivision=parseFloat(xt.subdivision)),Ct},x3dDisk2D:xt=>{const Ct={definition:Vn.DISK2D,innerRadius:0,outerRadius:1,subdivision:32};return xt.innerRadius&&(Ct.innerRadius=parseFloat(xt.innerRadius)),xt.outerRadius&&(Ct.outerRadius=parseFloat(xt.outerRadius)),xt.subdivision&&(Ct.subdivision=parseFloat(xt.subdivision)),Ct},x3dPolyline2D:xt=>{const Ct={definition:Vn.POLYLINE2D,lineSegments:[]};if(xt.lineSegments){const _t=parseNumbers(xt.lineSegments);for(let xt=0;xt<_t.length;xt+=2){const $t=[_t[xt],_t[xt+1]];Ct.lineSegments.push($t)}}return Ct},x3dRectangle2D:xt=>{const Ct={definition:Vn.RECTANGLE2D,size:[2,2]};if(xt.size){const _t=parseNumbers(xt.size);_t.length>1&&(Ct.size=_t)}return Ct},x3dTriangleSet2D:xt=>{const Ct={definition:Vn.TRIANGLESET2D,vertices:[]};if(xt.vertices){const _t=parseNumbers(xt.vertices);for(let xt=0;xt<_t.length;xt+=2){const $t=[_t[xt],_t[xt+1]];Ct.vertices.push($t)}}return Ct},x3dColor:xt=>{const Ct={definition:Vn.COLOR,colors:[]};if(xt.color){const _t=parseNumbers(xt.color),$t=_t.length,Vn=Math.trunc($t/3);for(let xt=0;xt<Vn;xt++){const $t=3*xt;Ct.colors.push([_t[$t],_t[$t+1],_t[$t+2]])}}return Ct},x3dCoordinate:xt=>{const Ct={definition:Vn.COORDINATE,points:[]};if(xt.point){const _t=parseNumbers(xt.point),$t=_t.length,Vn=Math.trunc($t/3);for(let xt=0;xt<Vn;xt++){const $t=3*xt;Ct.points.push([_t[$t],_t[$t+1],_t[$t+2]])}}return Ct},x3dTriangleSet:xt=>{const Ct={definition:Vn.TRIANGLESET,ccw:!0,colorPerVertex:!0};return xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),Ct.objects=[],Ct},x3dTriangleFanSet:xt=>{const Ct={definition:Vn.TRIANGLEFANSET,ccw:!0,fanCount:[],colorPerVertex:!0};return xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),xt.fanCount&&(Ct.fanCount=parseNumbers(xt.fanCount)),Ct.objects=[],Ct},x3dTriangleStripSet:xt=>{const Ct={definition:Vn.TRIANGLESTRIPSET,ccw:!0,stripCount:[],colorPerVertex:!0};return xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),xt.stripCount&&(Ct.stripCount=parseNumbers(xt.stripCount)),Ct.objects=[],Ct},x3dQuadSet:xt=>{const Ct={definition:Vn.QUADSET,ccw:!0,colorPerVertex:!0};return xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),Ct.objects=[],Ct},x3dIndexedTriangleSet:xt=>{const Ct={definition:Vn.INDEXEDTRIANGLESET,ccw:!0,index:[],colorPerVertex:!0};return xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),xt.index&&(Ct.index=parseNumbers(xt.index)),Ct.objects=[],Ct},x3dIndexedTriangleFanSet:xt=>{const Ct={definition:Vn.INDEXEDTRIANGLEFANSET,ccw:!0,fans:[],colorPerVertex:!0};if(xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),xt.index){const _t=parseIndices(xt.index);Ct.fans=_t.filter((xt=>xt.length>2))}return Ct.objects=[],Ct},x3dIndexedTriangleStripSet:xt=>{const Ct={definition:Vn.INDEXEDTRIANGLESTRIPSET,ccw:!0,strips:[],colorPerVertex:!0,objects:[]};if(xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),xt.index){const _t=parseIndices(xt.index);Ct.strips=_t.filter((xt=>xt.length>2))}return Ct},x3dIndexedQuadSet:xt=>{const Ct={definition:Vn.INDEXEDQUADSET,ccw:!0,index:[],colorPerVertex:!0};return xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),xt.index&&(Ct.index=parseNumbers(xt.index)),Ct.objects=[],Ct},x3dIndexedFaceSet:xt=>{const Ct={definition:Vn.INDEXEDFACESET,ccw:!0,convex:!0,faces:[],colorPerVertex:!0,colorIndex:null};if(xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),xt.convex&&(Ct.convex=xt.convex.includes("TRUE")||xt.convex.includes("true")),xt.coordIndex){const _t=parseIndices(xt.coordIndex);Ct.faces=_t.filter((xt=>xt.length>2))}if(xt.colorPerVertex&&(Ct.colorPerVertex=xt.colorPerVertex.includes("TRUE")||xt.colorPerVertex.includes("true")),xt.colorIndex)if(Ct.colorPerVertex){const _t=parseIndices(xt.colorIndex);Ct.colorIndex=_t.filter((xt=>xt.length>2))}else Ct.colorIndex=parseNumbers(xt.colorIndex);else Ct.colorIndex=Ct.faces;return Ct.objects=[],Ct},x3dElevationGrid:xt=>{const Ct={definition:Vn.ELEVATIONGRID,xDimension:2,zDimension:2,xSpacing:1,zSpacing:1,height:[0,0,0,0],ccw:!0,solid:!1,colorPerVertex:!0};return xt.xDimension&&(Ct.xDimension=parseFloat(xt.xDimension)),xt.zDimension&&(Ct.zDimension=parseFloat(xt.zDimension)),xt.xSpacing&&(Ct.xSpacing=parseFloat(xt.xSpacing)),xt.zSpacing&&(Ct.zSpacing=parseFloat(xt.zSpacing)),xt.height&&(Ct.height=parseNumbers(xt.height)),xt.ccw&&(Ct.ccw=xt.ccw.includes("TRUE")||xt.ccw.includes("true")),xt.solid&&(Ct.solid=xt.solid.includes("TRUE")||xt.solid.includes("true")),xt.colorPerVertex&&(Ct.colorPerVertex=xt.colorPerVertex.includes("TRUE")||xt.colorPerVertex.includes("true")),Ct.objects=[],Ct},x3dLineSet:xt=>{const Ct={definition:Vn.LINESET,vertexCount:[],colorPerVertex:!0};return xt.vertexCount&&(Ct.vertexCount=parseNumbers(xt.vertexCount)),xt.colorPerVertex&&(Ct.colorPerVertex=xt.colorPerVertex.includes("TRUE")||xt.colorPerVertex.includes("true")),Ct.objects=[],Ct},x3dIndexedLineSet:xt=>{const Ct={definition:Vn.INDEXEDLINESET,indexes:[],colorPerVertex:!0};if(xt.coordIndex){const _t=parseIndices(xt.coordIndex);Ct.indexes=_t.filter((xt=>xt.length>1))}return xt.colorPerVertex&&(Ct.colorPerVertex=xt.colorPerVertex.includes("TRUE")||xt.colorPerVertex.includes("true")),Ct.objects=[],Ct},x3dAppearance:xt=>({definition:Vn.APPEARANCE,objects:[]}),x3dMaterial:xt=>{const Ct={definition:Vn.MATERIAL,color:[.8,.8,.8,1]};let _t=1;if(xt.transparency&&(_t=1-xt.transparency),xt.diffuseColor){const $t=parseNumbers(xt.diffuseColor);$t.length>2&&($t.length<4&&$t.push(_t),Ct.color=$t)}if(xt.emissiveColor){const $t=parseNumbers(xt.emissiveColor);$t.length>2&&($t.length<4&&$t.push(_t),Ct.color=$t)}return Ct}}},{"@jscad/modeling":210}],111:[function(xt,Ct,_t){const $t=xt("saxes"),{x3dTypes:Vn,x3dX3D:Gn,x3dUnit:or,x3dMeta:lr,x3dScene:Fr,x3dTransform:Hr,x3dShape:xo,x3dGroup:Eo,x3dBox:Mo,x3dCone:Oo,x3dCylinder:Ro,x3dSphere:Io,x3dExtrusion:Bo,x3dArc2D:zo,x3dArcClose2D:Ho,x3dCircle2D:Qo,x3dDisk2D:pi,x3dPolyline2D:gi,x3dRectangle2D:es,x3dTriangleSet2D:ts,x3dColor:ns,x3dCoordinate:rs,x3dTriangleSet:os,x3dTriangleFanSet:is,x3dTriangleStripSet:ss,x3dQuadSet:as,x3dIndexedTriangleSet:ls,x3dIndexedTriangleFanSet:cs,x3dIndexedTriangleStripSet:us,x3dIndexedQuadSet:fs,x3dIndexedFaceSet:hs,x3dElevationGrid:ps,x3dLineSet:ds,x3dIndexedLineSet:ms,x3dAppearance:gs,x3dMaterial:vs}=xt("./objects");let ys=null,bs=Vn.X3D;const xs=[],ws=new Map,As=[],Ds=[],Es={factor:1,name:"meters"},Cs={factor:1,name:"radians"};let Ss=null;const ks={X3D:Gn,UNIT:or,META:lr,SCENE:Fr,TRANSFORM:Hr,SHAPE:xo,GROUP:Eo,STATICGROUP:Eo,BOX:Mo,CONE:Oo,CYLINDER:Ro,SPHERE:Io,EXTRUSION:Bo,ARC2D:zo,ARCCLOSE2D:Ho,CIRCLE2D:Qo,DISK2D:pi,POLYLINE2D:gi,RECTANGLE2D:es,TRIANGLESET2D:ts,COLOR:ns,COORDINATE:rs,TRIANGLESET:os,TRIANGLEFANSET:is,TRIANGLESTRIPSET:ss,QUADSET:as,INDEXEDTRIANGLESET:ls,INDEXEDTRIANGLEFANSET:cs,INDEXEDTRIANGLESTRIPSET:us,INDEXEDQUADSET:fs,INDEXEDFACESET:hs,ELEVATIONGRID:ps,LINESET:ds,INDEXEDLINESET:ms,APPEARANCE:gs,MATERIAL:vs};let Ts=1;const createX3DParser=(xt,Ct)=>{const _t=new $t.SaxesParser;_t.on("error",(xt=>{console.log(`error: line ${xt.line}, column ${xt.column}, bad character [${xt.c}]`)})),_t.on("opentag",(xt=>{const Ct=xt.name.toUpperCase();let _t=ks[Ct]?ks[Ct](xt.attributes,{x3dObjects:xs}):null;if(_t){if(_t.id=("0000"+Ts++).slice(-4),xt.attributes.USE){const Ct=xt.attributes.USE;if(ws.has(Ct)){const xt=ws.get(Ct);xt.definition!==_t.definition&&console.log(`WARNING: using a definition "${Ct}" of a different type; ${_t.definition} vs ${xt.definition}`),_t=xt}else console.log(`WARNING: definition "${Ct}" does not exist, using default for ${_t.definition}`)}else if(xt.attributes.DEF){const Ct=xt.attributes.DEF;ws.has(Ct)?console.log(`WARNING: redefintion of ${Ct} has been ignored`):ws.set(Ct,_t)}switch(_t.definition){case Vn.SCENE:case Vn.TRANSFORM:case Vn.SHAPE:case Vn.APPEARANCE:case Vn.TRIANGLESET:case Vn.TRIANGLEFANSET:case Vn.TRIANGLESTRIPSET:case Vn.QUADSET:case Vn.INDEXEDTRIANGLESET:case Vn.INDEXEDTRIANGLEFANSET:case Vn.INDEXEDTRIANGLESTRIPSET:case Vn.INDEXEDQUADSET:case Vn.INDEXEDFACESET:case Vn.ELEVATIONGRID:case Vn.LINESET:case Vn.INDEXEDLINESET:case Vn.GROUP:bs=_t.definition}switch(bs){case Vn.X3D:"objects"in _t&&xs.push(_t),_t.definition===Vn.UNIT&&("length"===_t.category&&(Es.factor=_t.conversionFactor,Es.name=_t.name),"angle"===_t.category&&(Cs.factor=_t.conversionFactor,Cs.name=_t.name));break;case Vn.SCENE:case Vn.TRANSFORM:case Vn.SHAPE:case Vn.GROUP:case Vn.APPEARANCE:case Vn.TRIANGLESET:case Vn.TRIANGLEFANSET:case Vn.TRIANGLESTRIPSET:case Vn.QUADSET:case Vn.INDEXEDTRIANGLESET:case Vn.INDEXEDTRIANGLEFANSET:case Vn.INDEXEDTRIANGLESTRIPSET:case Vn.INDEXEDQUADSET:case Vn.INDEXEDFACESET:case Vn.ELEVATIONGRID:case Vn.LINESET:case Vn.INDEXEDLINESET:if(xs.length>0){const xt=xs.pop();"objects"in xt&&xt.objects.push(_t),xs.push(xt),"objects"in _t&&xs.push(_t)}break;default:console.log("WARNING: invalid X3D definition")}ys=_t}})),_t.on("closetag",(xt=>{switch(xt.name.toUpperCase()){case"X3D":case"SCENE":case"TRANSFORM":case"SHAPE":case"GROUP":case"STATICGROUP":case"APPEARANCE":case"TRIANGLESET":case"TRIANGLEFANSET":case"TRIANGLESTRIPSET":case"QUADSET":case"INDEXEDTRIANGLESET":case"INDEXEDTRIANGLEFANSET":case"INDEXEDTRIANGLESTRIPSET":case"INDEXEDQUADSET":case"INDEXEDFACESET":case"ELEVATIONGRID":case"LINESET":case"INDEXEDLINESET":break;default:return}const d=()=>{xs.length>0&&(bs=xs[xs.length-1].definition)};let Ct=null;switch(bs){case Vn.X3D:xs.length>0&&(Ct=xs.pop(),d()),0===xs.length&&(Ct.length=Es,Ct.angle=Cs,Ss=Ct);break;case Vn.SCENE:case Vn.TRANSFORM:case Vn.SHAPE:case Vn.GROUP:case Vn.APPEARANCE:case Vn.TRIANGLESET:case Vn.TRIANGLEFANSET:case Vn.TRIANGLESTRIPSET:case Vn.QUADSET:case Vn.INDEXEDTRIANGLESET:case Vn.INDEXEDTRIANGLEFANSET:case Vn.INDEXEDTRIANGLESTRIPSET:case Vn.INDEXEDQUADSET:case Vn.INDEXEDFACESET:case Vn.ELEVATIONGRID:case Vn.LINESET:case Vn.INDEXEDLINESET:xs.length>0&&(Ct=xs.pop(),d());break;default:console.log("WARNING: unhandled definition",bs)}})),_t.on("text",(xt=>{null!==xt&&(xt=xt.trim()).length>0&&ys&&0!==bs&&(ys.value=xt)})),_t.on("end",(()=>{})),_t.write(xt).close()};Ct.exports=(xt,Ct)=>(createX3DParser(xt),{x3dObj:Ss,x3dMaterials:As,x3dTextures:Ds})},{"./objects":110,saxes:99}],112:[function(xt,Ct,_t){const $t=xt("./translateDefinitions"),{x3dTypes:Vn}=xt("./objects"),Gn=xt("./parse"),codify=(xt,Ct)=>{if(xt.definition!==Vn.X3D||!xt.objects)throw new Error("X3D malformed");if(xt.objects.length<1||xt.objects[0].definition!==Vn.SCENE)throw new Error("X3D did not define a SCENE");const _t=xt.objects[0].objects,Gn=xt.length,or=xt.angle;let lr="";lr=`// Objects  : ${_t.length}\n// Units : ${Gn.name} (${Gn.factor})\n// Angles : ${or.name} (${or.factor})\n\nconst {booleans, extrusions, geometries, maths, primitives, transforms, utils} = require('@jscad/modeling')\nconst { colorize } =  require('@jscad/modeling').colors\n\nconst applyTransform = (matrix, ...objects) => {\n  objects = utils.flatten(objects)\n  if (objects.length === 0) return objects\n\n  return objects.map((object) => {\n    const color = object.color\n    object = transforms.transform(matrix, object)\n    if (color) object.color = color\n    return object\n  })\n}\n\nconst main = () => {\n  let options = {}\n  let objects = []\n`;for(let xt=0;xt<_t.length;xt++)lr+=`  objects.push(...createObjects${_t[xt].id}(options))\n`;return lr+="  return objects\n}\n",lr+=$t({},_t),lr+"module.exports = {main}\n"};Ct.exports=(Ct,_t)=>{const $t={pxPmm:xt("./constants").pxPmm};Ct=Object.assign({},$t,Ct);const{version:Vn,pxPmm:or,addMetaData:lr,filename:Fr}=Ct;Ct&&Ct.statusCallback&&Ct.statusCallback({progress:0});const{x3dObj:Hr,x3dMaterials:xo,x3dTextures:Eo}=Gn(_t,or);let Mo=lr?`//\n// Produced by JSCAD IO Library : X3D Deserializer (${Vn})\n// date: ${new Date}\n// source: ${Fr}\n//\n`:"";if(!Hr)throw new Error("X3D parsing failed, no valid X3D data retrieved");return Ct&&Ct.statusCallback&&Ct.statusCallback({progress:50}),Mo+=codify(Hr,{x3dMaterials:xo,x3dTextures:Eo}),Ct&&Ct.statusCallback&&Ct.statusCallback({progress:100}),Mo}},{"./constants":101,"./objects":110,"./parse":111,"./translateDefinitions":113}],113:[function(xt,Ct,_t){const $t=xt("./createTransform"),{x3dTypes:Vn}=xt("./objects"),Gn=xt("./translateShape"),or=[],translateDefinition=(xt,Ct)=>{if(or.includes(Ct.id))return"";or.push(Ct.id);let _t="";switch(Ct.definition){case Vn.TRANSFORM:_t+=((xt,Ct)=>{let _t=`\n// transform\nconst createObjects${Ct.id} = (options) => {\n  let objects = []\n`;const Vn=Ct.objects;for(let xt=0;xt<Vn.length;xt++)_t+=`  objects.push(...createObjects${Vn[xt].id}(options))\n`;return _t+=`\n  const matrix = [${$t(Ct.center,Ct.rotation,Ct.scale,Ct.scaleOrientation,Ct.translation)}]\n  return applyTransform(matrix, objects)\n}\n`,_t+translateDefinitions(xt,Vn)})(xt,Ct);break;case Vn.SHAPE:_t+=Gn(xt,Ct);break;case Vn.GROUP:_t+=((xt,Ct)=>{let _t=`\n// group\nconst createObjects${Ct.id} = (options) => {\n  let objects = []\n`;const $t=Ct.objects;for(let xt=0;xt<$t.length;xt++)_t+=`  objects.push(...createObjects${$t[xt].id}(options))\n`;return _t+="\n  return objects\n}\n",_t+translateDefinitions(xt,$t)})(xt,Ct);break;default:console.log("WARNING: unknown definition: "+Ct.definition)}return _t},translateDefinitions=(xt,Ct)=>Ct.reduce(((Ct,_t,$t)=>Ct+translateDefinition(xt,_t)),"");Ct.exports=translateDefinitions},{"./createTransform":102,"./objects":110,"./translateShape":117}],114:[function(xt,Ct,_t){const{x3dTypes:$t}=xt("./objects"),findNode=(xt,Ct)=>Ct.find((Ct=>Ct.definition===xt)),pointToString=xt=>`[${xt}]`;Ct.exports={findNode:findNode,findColor:(xt,Ct)=>{const _t=findNode($t.APPEARANCE,xt);let Vn;return _t&&(Vn=findNode($t.MATERIAL,_t.objects))?Vn.color?Vn.color:null:(Vn=findNode($t.MATERIAL,xt))&&Vn.color?Vn.color:null},createColors:(xt,Ct)=>{if(!Ct)return null;if(!Array.isArray(xt.colorIndex))return null;return!0===xt.colorPerVertex?((xt,Ct)=>{if(!Array.isArray(xt)||!Array.isArray(Ct))return null;if(xt.length<0||!Array.isArray(xt[0]))return console.log("ERROR: WRONG FORMAT FOR VERTEXCOLORS"),null;const _t=[];for(let $t=0;$t<xt.length;$t++){const Vn=xt[$t];let Gn=0,or=0,lr=0;const Fr=1;for(let xt=0;xt<Vn.length;xt++){const _t=Ct[Vn[xt]];_t&&(Gn+=_t[0],or+=_t[1],lr+=_t[2])}const Hr=[Gn/Vn.length,or/Vn.length,lr/Vn.length,Fr];_t.push(Hr)}return _t})(xt.colorIndex,Ct.colors):((xt,Ct)=>Array.isArray(xt)&&Array.isArray(Ct)?xt.map((xt=>Ct[xt]?Ct[xt]:null)):null)(xt.colorIndex,Ct.colors)},pointToString:pointToString,pointsToString:xt=>`[\n    ${xt.map((xt=>pointToString(xt))).join(",\n    ")}\n  ]`}},{"./objects":110}],115:[function(xt,Ct,_t){const{pointsToString:$t}=xt("./translateHelpers"),{convertLine:Vn}=xt("./instantiateLine");Ct.exports=(xt,Ct)=>{const _t=Vn(xt,Ct);if(_t){const{pointsSet:xt,colors:Ct}=_t;let Vn="  let lines = []\n";return xt.forEach(((xt,_t)=>{if(Ct){const Gn=Ct[_t];Vn+=`  const line${_t} = colorize([${Gn}], primitives.line(${$t(xt)}))\n  lines.push(line${_t})\n`}else Vn+=`  const line${_t} = primitives.line(${$t(xt)})\n  lines.push(line${_t})\n`})),{primitive:"...lines",code:Vn}}return null}},{"./instantiateLine":107,"./translateHelpers":114}],116:[function(xt,Ct,_t){const{pointsToString:$t}=xt("./translateHelpers"),{convertMesh:Vn}=xt("./instantiateMesh");Ct.exports=(xt,Ct)=>{const _t=Vn(xt,Ct);if(_t){const{type:xt,points:Ct,faces:Vn,colors:Gn,orientation:or}=_t;return((xt,Ct,_t,Vn,Gn)=>{const or=Array.isArray(Vn)?$t(Vn):"null";return{primitive:"primitives.polyhedron({points, faces, colors, orientation})",code:`\n  // 3D ${xt} set: ${Ct.length} points, ${_t.length} faces\n  const points = ${$t(Ct)}\n  const faces = ${$t(_t)}\n  const colors = ${or}\n  const orientation = '${Gn}'\n`}})(xt,Ct,Vn,Gn,or)}return null}},{"./instantiateMesh":108,"./translateHelpers":114}],117:[function(xt,Ct,_t){const{geometries:$t}=xt("@jscad/modeling"),{geom3:Vn,poly3:Gn}=$t,or=xt("./extrudeX3D"),{x3dTypes:lr}=xt("./objects"),{findNode:Fr,findColor:Hr,pointsToString:xo}=xt("./translateHelpers"),Eo=xt("./translateLine"),Mo=xt("./translateMesh");Ct.exports=(xt,Ct)=>{let _t=`\n// shape\nconst createObjects${Ct.id} = (options) => {\n  let objects = []\n`;const $t=Ct.objects,Oo=Hr($t,xt);let Ro,Io=Fr(lr.BOX,$t);if(Io)Ro=`primitives.cuboid({size: [${Io.size}]})`;else if(Io=Fr(lr.CONE,$t))_t+=`  const shape = transforms.rotateX(-Math.PI/2, primitives.cylinderElliptic({startRadius: [${Io.bottomRadius},${Io.bottomRadius}], height: ${Io.height}, segments: ${Io.subdivision}, endRadius: [${Io.topRadius}, ${Io.topRadius}]}))\n`,Ro="shape";else if(Io=Fr(lr.CYLINDER,$t))_t+=`  const shape = transforms.rotateX(-Math.PI/2, primitives.cylinder({radius: ${Io.radius}, height: ${Io.height}, segments: ${Io.subdivision}}))\n`,Ro="shape";else if(Io=Fr(lr.SPHERE,$t))Ro=`primitives.sphere({radius: ${Io.radius}, segments: ${Io.subdivision}})`;else if(Io=Fr(lr.EXTRUSION,$t)){const xt=or(Io);_t+=`  const polygons = [\n  ${Vn.toPolygons(xt).map((xt=>xo(Gn.toPoints(xt)))).join(",\n  ")}\n]\n`,Ro="geometries.geom3.fromPoints(polygons)"}if(!Ro)if(Io=Fr(lr.ARC2D,$t))Ro=`primitives.arc({radius: ${Io.radius}, startAngle: ${Io.startAngle}, endAngle: ${Io.endAngle}, segments: ${Io.subdivision}})`;else if(Io=Fr(lr.ARCCLOSE2D,$t))Ro="PIE"===Io.closureType?`primitives.circle({radius: ${Io.radius}, startAngle: ${Io.startAngle}, endAngle: ${Io.endAngle}, segments: ${Io.subdivision}})`:`geometries.geom2.fromPoints(geometries.path2.toPoints(geometries.path2.close(primitives.arc({radius: ${Io.radius}, startAngle: ${Io.startAngle}, endAngle: ${Io.endAngle}, segments: ${Io.subdivision}}))))`;else if(Io=Fr(lr.CIRCLE2D,$t))Ro=`primitives.arc({radius: ${Io.radius}, segments: ${Io.subdivision}})`;else if(Io=Fr(lr.DISK2D,$t))Ro=Io.innerRadius===Io.outerRadius?`primitives.arc({radius: ${Io.outerRadius}, segments: ${Io.subdivision}})`:0===Io.innerRadius?`primitives.circle({radius: ${Io.outerRadius}, segments: ${Io.subdivision}})`:`booleans.subtract(primitives.circle({radius: ${Io.outerRadius}, segments: ${Io.subdivision}}), primitives.circle({radius: ${Io.innerRadius}, segments: ${Io.subdivision}}))`;else if(Io=Fr(lr.POLYLINE2D,$t))Ro=`primitives.line([[${Io.lineSegments.join("], [")}]])`;else if(Io=Fr(lr.RECTANGLE2D,$t))Ro=`primitives.rectangle({size: [${Io.size}]})`;else if(Io=Fr(lr.TRIANGLESET2D,$t)){const xt=Io.vertices.length,Ct=Math.trunc(xt/3);_t+=`\n  // 2D triangle set: ${xt} points, ${Ct} faces\n  const vertices = ${xo(Io.vertices)}\n  const triangles = []\n  for (let i = 0; i < ${Ct}; i = i + 3) {\n    triangles.push(geometries.geom2.fromPoints([vertices[i], vertices[i + 1], vertices[i + 2]]))\n  }\n`,Ro="triangles"}let Bo=Mo(xt,$t);return Bo&&(Ro=Bo.primitive,_t+=Bo.code),(Bo=Eo(xt,$t))&&(Ro=Bo.primitive,_t+=Bo.code),Ro&&(_t+=Oo?`  objects.push(colorize([${Oo}], ${Ro}))`:`  objects.push(${Ro})`),_t+"\n  return objects\n}\n"}},{"./extrudeX3D":103,"./objects":110,"./translateHelpers":114,"./translateLine":115,"./translateMesh":116,"@jscad/modeling":210}],118:[function(xt,Ct,_t){"use strict";Ct.exports=function stringify(xt,Ct){const _t=Ct>0?"\n":"",$t=function indenter(xt){if(!(xt>0))return xt=>xt;var Ct=" ".repeat(xt);return xt=>{if("string"!=typeof xt)return xt;const _t=xt.split("\n");return 1===_t.length?Ct+xt:_t.map((xt=>""===xt.trim()?xt:Ct+xt)).join("\n")}}(Ct);return function t(xt){let Ct,Vn="",Gn=!0;return xt.some(((xt,$t,or)=>{if(0===$t)return Ct="<"+xt,1===or.length;if(1===$t){if((xt=>xt&&"[object Object]"===Object.prototype.toString.call(xt))(xt))return Object.keys(xt).map((_t=>{let $t=xt[_t];Array.isArray($t)&&($t=$t.join(" ")),Ct+=" "+_t+'="'+$t+'"'})),2===or.length||void(Ct+=">");Ct+=">"}switch(typeof xt){case"string":case"number":case"boolean":case"undefined":return void(Vn+=xt+_t)}Gn=!1,Vn+=t(xt)}))?Ct+"/>"+_t:Gn?Ct+(xt=>xt.split("\n").filter((xt=>""!==xt.trim())).join("\n"))(Vn)+"</"+xt[0]+">"+_t:Ct+_t+$t(Vn)+"</"+xt[0]+">"+_t}(xt)}},{}],119:[function(xt,Ct,_t){const{geometries:$t,modifiers:Vn}=xt("@jscad/modeling"),{geom2:Gn,geom3:or,path2:lr,poly2:Fr,poly3:Hr}=$t,{flatten:xo}=xt("@jscad/array-utils"),Eo=xt("onml/lib/stringify"),Mo=new Map,convertObjects=(xt,Ct)=>{const _t=[];return xt.forEach((($t,Fr)=>{Ct.statusCallback&&Ct.statusCallback({progress:100*Fr/xt.length}),or.isA($t)&&($t=Vn.generalize({snap:!0,triangulate:!0},$t),or.toPolygons($t).length>0&&_t.push(convertGeom3($t,Ct))),Gn.isA($t)&&_t.push(convertGeom2($t,Ct)),lr.isA($t)&&_t.push(convertPath2($t,Ct))})),[["Scene",{},["Transform",{rotation:"1 0 0 -1.5708"},..._t]]]},convertPath2=(xt,Ct)=>{const _t=lr.toPoints(xt).slice();_t.length>1&&xt.isClosed&&_t.push(_t[0]);const $t=["Shape",shapeAttributes(xt),convertPolyline2D(Fr.create(_t),Ct)];return xt.color&&$t.push(convertAppearance(xt,"emissiveColor",Ct)),$t},convertGeom2=(xt,Ct)=>{const _t=Gn.toOutlines(xt),$t=["Group",{}];return _t.forEach((_t=>{_t.length>1&&_t.push(_t[0]);const Vn=["Shape",shapeAttributes(xt),convertPolyline2D(Fr.create(_t),Ct)];xt.color&&Vn.push(convertAppearance(xt,"emissiveColor",Ct)),$t.push(Vn)})),$t},shapeAttributes=(xt,Ct={})=>(xt.id&&Object.assign(Ct,{DEF:checkDefName(xt.id)}),Ct),checkDefName=xt=>{const Ct=Mo.get(xt)||0;return Mo.set(xt,Ct+1),Ct>0&&console.warn(`Warning: object.id set as DEF but not unique. ${xt} set ${Ct+1} times.`),xt},convertPolyline2D=(xt,Ct)=>["Polyline2D",{lineSegments:xt.vertices.map((xt=>`${xt[0]} ${xt[1]}`)).join(" ")}],convertAppearance=(xt,Ct,_t)=>{const $t={[Ct]:xt.color.slice(0,3).join(" "),transparency:roundToDecimals(1-xt.color[3],_t)};return"diffuseColor"===Ct&&Object.assign($t,{specularColor:"0.2 0.2 0.2",shininess:_t.shininess}),["Appearance",["Material",$t]]},convertGeom3=(xt,Ct)=>{const _t=["Shape",shapeAttributes(xt),convertMesh(xt,Ct)];let $t=["Appearance",{},["Material"]];return xt.color&&($t=convertAppearance(xt,"diffuseColor",Ct)),_t.push($t),_t},convertMesh=(xt,Ct)=>{const _t=convertToTriangles(xt,Ct),$t=polygons2coordinates(_t,Ct),Vn=$t[0].join(" "),Gn=$t[1].join(" "),or=$t[2].join(" "),lr=["IndexedTriangleSet",{ccw:"true",colorPerVertex:"false",normalPerVertex:Ct.smooth,solid:"false",index:Vn},["Coordinate",{point:Gn}]];return xt.color||lr.push(["Color",{color:or}]),lr},convertToTriangles=(xt,Ct)=>{const _t=[];return or.toPolygons(xt).forEach(($t=>{const Vn=$t.vertices[0];for(let Gn=$t.vertices.length-3;Gn>=0;Gn--){const or=Hr.fromPoints([Vn,$t.vertices[Gn+1],$t.vertices[Gn+2]]);let lr=Ct.color;xt.color&&(lr=xt.color),$t.color&&(lr=$t.color),or.color=lr,_t.push(or)}})),_t},roundToDecimals=(xt,Ct)=>Math.round(xt*Ct.decimals)/Ct.decimals,polygons2coordinates=(xt,Ct)=>{const _t=[],$t=[],Vn=[],Gn=new Map;return xt.forEach((xt=>{const or=[],lr=xt.vertices.length;for(let _t=0;_t<lr;_t++){const Vn=xt.vertices[_t],lr=`${Vn[0]},${Vn[1]},${Vn[2]}`;if(!Gn.has(lr)){const xt=roundToDecimals(Vn[0],Ct),_t=roundToDecimals(Vn[1],Ct),or=roundToDecimals(Vn[2],Ct);$t.push(`${xt} ${_t} ${or}`),Gn.set(lr,$t.length-1)}or.push(Gn.get(lr))}_t.push(or.join(" ")),Vn.push(((xt,Ct)=>{let _t=Ct.color;return xt.color&&(_t=xt.color),`${_t[0]} ${_t[1]} ${_t[2]}`})(xt,Ct))})),Gn.clear(),[_t,$t,Vn]};Ct.exports={serialize:(xt,...Ct)=>{if(xt=Object.assign({},{color:[0,0,1,1],shininess:8/256,smooth:!1,decimals:1e3,metadata:!0,unit:"millimeter",statusCallback:null},xt),0===(Ct=(Ct=xo(Ct)).filter((xt=>or.isA(xt)||Gn.isA(xt)||lr.isA(xt)))).length)throw new Error("expected one or more geom3/geom2/path2 objects");xt.statusCallback&&xt.statusCallback({progress:0});let _t=["X3D",{profile:"Interchange",version:"3.3","xmlns:xsd":"http://www.w3.org/2001/XMLSchema-instance","xsd:noNamespaceSchemaLocation":"http://www.web3d.org/specifications/x3d-3.3.xsd"}];xt.metadata?_t.push(["head",{},["meta",{name:"creator",content:"Created by JSCAD"}],["meta",{name:"reference",content:"https://www.openjscad.xyz"}],["meta",{name:"created",content:(new Date).toISOString()}]]):_t.push(["head",{},["meta",{name:"creator",content:"Created by JSCAD"}]]),_t=_t.concat(convertObjects(Ct,xt));const $t=`<?xml version="1.0" encoding="UTF-8"?>\n${Eo(_t,2)}`;return xt&&xt.statusCallback&&xt.statusCallback({progress:100}),[$t]},mimeType:"model/x3d+xml"}},{"@jscad/array-utils":525,"@jscad/modeling":210,"onml/lib/stringify":118}],120:[function(xt,Ct,_t){const $t=xt("./cssColors");Ct.exports=xt=>$t[xt.toLowerCase()]},{"./cssColors":122}],121:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("../geometries/geom2"),Gn=xt("../geometries/geom3"),or=xt("../geometries/path2"),lr=xt("../geometries/poly3");Ct.exports=(xt,...Ct)=>{if(!Array.isArray(xt))throw new Error("color must be an array");if(xt.length<3)throw new Error("color must contain R, G and B values");if(3===xt.length&&(xt=[xt[0],xt[1],xt[2],1]),0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");const _t=Ct.map((Ct=>Vn.isA(Ct)?((xt,Ct)=>{const _t=Vn.clone(Ct);return _t.color=xt,_t})(xt,Ct):Gn.isA(Ct)?((xt,Ct)=>{const _t=Gn.clone(Ct);return _t.color=xt,_t})(xt,Ct):or.isA(Ct)?((xt,Ct)=>{const _t=or.clone(Ct);return _t.color=xt,_t})(xt,Ct):lr.isA(Ct)?((xt,Ct)=>{const _t=lr.clone(Ct);return _t.color=xt,_t})(xt,Ct):(Ct.color=xt,Ct)));return 1===_t.length?_t[0]:_t}},{"../geometries/geom2":144,"../geometries/geom3":159,"../geometries/path2":180,"../geometries/poly3":197,"../utils/flatten":515}],122:[function(xt,Ct,_t){Ct.exports={black:[0,0,0],silver:[192/255,192/255,192/255],gray:[128/255,128/255,128/255],white:[1,1,1],maroon:[128/255,0,0],red:[1,0,0],purple:[128/255,0,128/255],fuchsia:[1,0,1],green:[0,128/255,0],lime:[0,1,0],olive:[128/255,128/255,0],yellow:[1,1,0],navy:[0,0,128/255],blue:[0,0,1],teal:[0,128/255,128/255],aqua:[0,1,1],aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],blanchedalmond:[1,235/255,205/255],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],oldlace:[253/255,245/255,230/255],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],whitesmoke:[245/255,245/255,245/255],yellowgreen:[154/255,205/255,50/255]}},{}],123:[function(xt,Ct,_t){Ct.exports=xt=>{if((xt=xt.replace("#","")).length<6)throw new Error("the given notation must contain 3 or more hex values");const Ct=parseInt(xt.substring(0,2),16)/255,_t=parseInt(xt.substring(2,4),16)/255,$t=parseInt(xt.substring(4,6),16)/255;return xt.length>=8?[Ct,_t,$t,parseInt(xt.substring(6,8),16)/255]:[Ct,_t,$t]}},{}],124:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("./hueToColorComponent");Ct.exports=(...xt)=>{if((xt=$t(xt)).length<3)throw new Error("values must contain H, S and L values");const Ct=xt[0],_t=xt[1],Gn=xt[2];let or=Gn,lr=Gn,Fr=Gn;if(0!==_t){const xt=Gn<.5?Gn*(1+_t):Gn+_t-Gn*_t,$t=2*Gn-xt;or=Vn($t,xt,Ct+1/3),lr=Vn($t,xt,Ct),Fr=Vn($t,xt,Ct-1/3)}return xt.length>3?[or,lr,Fr,xt[3]]:[or,lr,Fr]}},{"../utils/flatten":515,"./hueToColorComponent":126}],125:[function(xt,Ct,_t){const $t=xt("../utils/flatten");Ct.exports=(...xt)=>{if((xt=$t(xt)).length<3)throw new Error("values must contain H, S and V values");const Ct=xt[0],_t=xt[1],Vn=xt[2];let Gn=0,or=0,lr=0;const Fr=Math.floor(6*Ct),Hr=6*Ct-Fr,xo=Vn*(1-_t),Eo=Vn*(1-Hr*_t),Mo=Vn*(1-(1-Hr)*_t);switch(Fr%6){case 0:Gn=Vn,or=Mo,lr=xo;break;case 1:Gn=Eo,or=Vn,lr=xo;break;case 2:Gn=xo,or=Vn,lr=Mo;break;case 3:Gn=xo,or=Eo,lr=Vn;break;case 4:Gn=Mo,or=xo,lr=Vn;break;case 5:Gn=Vn,or=xo,lr=Eo}return xt.length>3?[Gn,or,lr,xt[3]]:[Gn,or,lr]}},{"../utils/flatten":515}],126:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(_t<0&&(_t+=1),_t>1&&(_t-=1),_t<1/6?xt+6*(Ct-xt)*_t:_t<.5?Ct:_t<2/3?xt+(Ct-xt)*(2/3-_t)*6:xt)},{}],127:[function(xt,Ct,_t){Ct.exports={colorize:xt("./colorize"),colorNameToRgb:xt("./colorNameToRgb"),cssColors:xt("./cssColors"),hexToRgb:xt("./hexToRgb"),hslToRgb:xt("./hslToRgb"),hsvToRgb:xt("./hsvToRgb"),hueToColorComponent:xt("./hueToColorComponent"),rgbToHex:xt("./rgbToHex"),rgbToHsl:xt("./rgbToHsl"),rgbToHsv:xt("./rgbToHsv")}},{"./colorNameToRgb":120,"./colorize":121,"./cssColors":122,"./hexToRgb":123,"./hslToRgb":124,"./hsvToRgb":125,"./hueToColorComponent":126,"./rgbToHex":128,"./rgbToHsl":129,"./rgbToHsv":130}],128:[function(xt,Ct,_t){const $t=xt("../utils/flatten");Ct.exports=(...xt)=>{if((xt=$t(xt)).length<3)throw new Error("values must contain R, G and B values");const Ct=255*xt[0],_t=255*xt[1],Vn=255*xt[2];let Gn=`#${Number(16777216+65536*Ct+256*_t+Vn).toString(16).substring(1,7)}`;return xt.length>3&&(Gn+=Number(255*xt[3]).toString(16)),Gn}},{"../utils/flatten":515}],129:[function(xt,Ct,_t){const $t=xt("../utils/flatten");Ct.exports=(...xt)=>{if((xt=$t(xt)).length<3)throw new Error("values must contain R, G and B values");const Ct=xt[0],_t=xt[1],Vn=xt[2],Gn=Math.max(Ct,_t,Vn),or=Math.min(Ct,_t,Vn);let lr,Fr;const Hr=(Gn+or)/2;if(Gn===or)lr=Fr=0;else{const xt=Gn-or;switch(Fr=Hr>.5?xt/(2-Gn-or):xt/(Gn+or),Gn){case Ct:lr=(_t-Vn)/xt+(_t<Vn?6:0);break;case _t:lr=(Vn-Ct)/xt+2;break;case Vn:lr=(Ct-_t)/xt+4}lr/=6}return xt.length>3?[lr,Fr,Hr,xt[3]]:[lr,Fr,Hr]}},{"../utils/flatten":515}],130:[function(xt,Ct,_t){const $t=xt("../utils/flatten");Ct.exports=(...xt)=>{if((xt=$t(xt)).length<3)throw new Error("values must contain R, G and B values");const Ct=xt[0],_t=xt[1],Vn=xt[2],Gn=Math.max(Ct,_t,Vn),or=Math.min(Ct,_t,Vn);let lr;const Fr=Gn,Hr=Gn-or,xo=0===Gn?0:Hr/Gn;if(Gn===or)lr=0;else{switch(Gn){case Ct:lr=(_t-Vn)/Hr+(_t<Vn?6:0);break;case _t:lr=(Vn-Ct)/Hr+2;break;case Vn:lr=(Ct-_t)/Hr+4}lr/=6}return xt.length>3?[lr,xo,Fr,xt[3]]:[lr,xo,Fr]}},{"../utils/flatten":515}],131:[function(xt,Ct,_t){const $t=xt("./lengths");Ct.exports=(xt,Ct)=>{const{distance:_t,segments:Vn}=Object.assign({},{distance:0,segments:100},xt),Gn=$t(Vn,Ct);let or=0,lr=Vn;for(;or<=lr;){const xt=Math.floor(or+(lr-or)/2),Ct=Gn[xt]-_t;if(Ct<0)or=xt+1;else{if(!(Ct>0)){lr=xt;break}lr=xt-1}}const Fr=lr;if(Gn[Fr]===_t)return Fr/Vn;const Hr=Gn[Fr];return(Fr+(_t-Hr)/(Gn[Fr+1]-Hr))/Vn}},{"./lengths":135}],132:[function(xt,Ct,_t){const getPointType=function(xt){let Ct=null;return xt.forEach((xt=>{let _t="";if(Number.isFinite(xt))_t="float_single";else{if(!Array.isArray(xt))throw new Error("Bezier points must all be numbers or arrays of number.");xt.forEach((xt=>{if(!Number.isFinite(xt))throw new Error("Bezier point values must all be numbers.")})),_t="float_"+xt.length}if(null==Ct)Ct=_t;else if(Ct!==_t)throw new Error("Bezier points must be either all numbers or all arrays of numbers of the same size.")})),Ct},getPermutations=function(xt){const Ct=[];for(let _t=0;_t<=xt;_t++)Ct.push(factorial(xt)/(factorial(_t)*factorial(xt-_t)));return Ct},factorial=function(xt){let Ct=1;for(let _t=2;_t<=xt;_t++)Ct*=_t;return Ct};Ct.exports=xt=>{if(!Array.isArray(xt))throw new Error("Bezier points must be a valid array/");if(xt.length<2)throw new Error("Bezier points must contain at least 2 values.");const Ct=getPointType(xt);return{points:xt,pointType:Ct,dimensions:"float_single"===Ct?0:xt[0].length,permutations:getPermutations(xt.length-1),tangentPermutations:getPermutations(xt.length-2)}}},{}],133:[function(xt,Ct,_t){Ct.exports={create:xt("./create"),valueAt:xt("./valueAt"),tangentAt:xt("./tangentAt"),lengths:xt("./lengths"),length:xt("./length"),arcLengthToT:xt("./arcLengthToT")}},{"./arcLengthToT":131,"./create":132,"./length":134,"./lengths":135,"./tangentAt":136,"./valueAt":137}],134:[function(xt,Ct,_t){const $t=xt("./lengths");Ct.exports=(xt,Ct)=>$t(xt,Ct)[xt]},{"./lengths":135}],135:[function(xt,Ct,_t){const $t=xt("./valueAt"),distanceBetween=(xt,Ct)=>{if(Number.isFinite(xt)&&Number.isFinite(Ct))return Math.abs(xt-Ct);if(Array.isArray(xt)&&Array.isArray(Ct)){if(xt.length!==Ct.length)throw new Error("The operands must have the same number of dimensions.");let _t=0;for(let $t=0;$t<xt.length;$t++)_t+=(Ct[$t]-xt[$t])*(Ct[$t]-xt[$t]);return Math.sqrt(_t)}throw new Error("The operands must be of the same type, either number or array.")};Ct.exports=(xt,Ct)=>{let _t=0;const Vn=[0];let Gn=$t(0,Ct);for(let or=1;or<=xt;or++){const lr=$t(or/xt,Ct);_t+=distanceBetween(lr,Gn),Vn.push(_t),Gn=lr}return Vn}},{"./valueAt":137}],136:[function(xt,Ct,_t){const bezierTangent=function(xt,Ct,_t){const $t=Ct.length-1;let Vn=0;for(let Gn=0;Gn<$t;Gn++){const or=$t*(Ct[Gn+1]-Ct[Gn]);Vn+=xt.tangentPermutations[Gn]*Math.pow(1-_t,$t-1-Gn)*Math.pow(_t,Gn)*or}return Vn};Ct.exports=(xt,Ct)=>{if(xt<0||xt>1)throw new Error("Bezier tangentAt() input must be between 0 and 1");if("float_single"===Ct.pointType)return bezierTangent(Ct,Ct.points,xt);{const _t=[];for(let $t=0;$t<Ct.dimensions;$t++){const Vn=[];for(let xt=0;xt<Ct.points.length;xt++)Vn.push(Ct.points[xt][$t]);_t.push(bezierTangent(Ct,Vn,xt))}return _t}}},{}],137:[function(xt,Ct,_t){const bezierFunction=function(xt,Ct,_t){const $t=Ct.length-1;let Vn=0;for(let Gn=0;Gn<=$t;Gn++)Vn+=xt.permutations[Gn]*Math.pow(1-_t,$t-Gn)*Math.pow(_t,Gn)*Ct[Gn];return Vn};Ct.exports=(xt,Ct)=>{if(xt<0||xt>1)throw new Error("Bezier valueAt() input must be between 0 and 1");if("float_single"===Ct.pointType)return bezierFunction(Ct,Ct.points,xt);{const _t=[];for(let $t=0;$t<Ct.dimensions;$t++){const Vn=[];for(let xt=0;xt<Ct.points.length;xt++)Vn.push(Ct.points[xt][$t]);_t.push(bezierFunction(Ct,Vn,xt))}return _t}}},{}],138:[function(xt,Ct,_t){Ct.exports={bezier:xt("./bezier")}},{"./bezier":133}],139:[function(xt,Ct,_t){const $t=xt("../../maths/mat4"),Vn=xt("../../maths/vec2");Ct.exports=xt=>($t.isIdentity(xt.transforms)||(xt.sides=xt.sides.map((Ct=>[Vn.transform(Vn.create(),Ct[0],xt.transforms),Vn.transform(Vn.create(),Ct[1],xt.transforms)])),xt.transforms=$t.create()),xt)},{"../../maths/mat4":261,"../../maths/vec2":309}],140:[function(xt,Ct,_t){Ct.exports=xt=>Object.assign({},xt)},{}],141:[function(xt,Ct,_t){const $t=xt("../../maths/mat4");Ct.exports=xt=>(void 0===xt&&(xt=[]),{sides:xt,transforms:$t.create()})},{"../../maths/mat4":261}],142:[function(xt,Ct,_t){const $t=xt("../../maths/mat4"),Vn=xt("../../maths/vec2"),Gn=xt("./create");Ct.exports=xt=>{if(0!==xt[0])throw new Error("invalid compact binary data");const Ct=Gn();Ct.transforms=$t.clone(xt.slice(1,17));for(let _t=21;_t<xt.length;_t+=4){const $t=Vn.fromValues(xt[_t+0],xt[_t+1]),Gn=Vn.fromValues(xt[_t+2],xt[_t+3]);Ct.sides.push([$t,Gn])}return xt[17]>=0&&(Ct.color=[xt[17],xt[18],xt[19],xt[20]]),Ct}},{"../../maths/mat4":261,"../../maths/vec2":309,"./create":141}],143:[function(xt,Ct,_t){const $t=xt("../../maths/vec2"),Vn=xt("./create");Ct.exports=xt=>{if(!Array.isArray(xt))throw new Error("the given points must be an array");let Ct=xt.length;if(Ct<3)throw new Error("the given points must define a closed geometry with three or more points");$t.equals(xt[0],xt[Ct-1])&&--Ct;const _t=[];let Gn=xt[Ct-1];for(let Vn=0;Vn<Ct;Vn++){const Ct=xt[Vn];_t.push([$t.clone(Gn),$t.clone(Ct)]),Gn=Ct}return Vn(_t)}},{"../../maths/vec2":309,"./create":141}],144:[function(xt,Ct,_t){Ct.exports={clone:xt("./clone"),create:xt("./create"),fromPoints:xt("./fromPoints"),fromCompactBinary:xt("./fromCompactBinary"),isA:xt("./isA"),reverse:xt("./reverse"),toOutlines:xt("./toOutlines"),toPoints:xt("./toPoints"),toSides:xt("./toSides"),toString:xt("./toString"),toCompactBinary:xt("./toCompactBinary"),transform:xt("./transform"),validate:xt("./validate")}},{"./clone":140,"./create":141,"./fromCompactBinary":142,"./fromPoints":143,"./isA":145,"./reverse":146,"./toCompactBinary":147,"./toOutlines":148,"./toPoints":149,"./toSides":150,"./toString":151,"./transform":152,"./validate":153}],145:[function(xt,Ct,_t){Ct.exports=xt=>!!(xt&&"object"==typeof xt&&"sides"in xt&&"transforms"in xt&&Array.isArray(xt.sides)&&"length"in xt.transforms)},{}],146:[function(xt,Ct,_t){const $t=xt("./create"),Vn=xt("./toSides");Ct.exports=xt=>{const Ct=Vn(xt).map((xt=>[xt[1],xt[0]]));return Ct.reverse(),$t(Ct)}},{"./create":141,"./toSides":150}],147:[function(xt,Ct,_t){Ct.exports=xt=>{const Ct=xt.sides,_t=xt.transforms;let $t=[-1,-1,-1,-1];xt.color&&($t=xt.color);const Vn=new Float32Array(21+4*Ct.length);Vn[0]=0,Vn[1]=_t[0],Vn[2]=_t[1],Vn[3]=_t[2],Vn[4]=_t[3],Vn[5]=_t[4],Vn[6]=_t[5],Vn[7]=_t[6],Vn[8]=_t[7],Vn[9]=_t[8],Vn[10]=_t[9],Vn[11]=_t[10],Vn[12]=_t[11],Vn[13]=_t[12],Vn[14]=_t[13],Vn[15]=_t[14],Vn[16]=_t[15],Vn[17]=$t[0],Vn[18]=$t[1],Vn[19]=$t[2],Vn[20]=$t[3];for(let xt=0;xt<Ct.length;xt++){const _t=4*xt+21,$t=Ct[xt][0],Gn=Ct[xt][1];Vn[_t+0]=$t[0],Vn[_t+1]=$t[1],Vn[_t+2]=Gn[0],Vn[_t+3]=Gn[1]}return Vn}},{}],148:[function(xt,Ct,_t){const $t=xt("../../maths/vec2"),Vn=xt("./toSides"),toVertexMap=xt=>{const Ct=new Map;return(xt=>{const Ct=new Map,r=xt=>{const _t=xt.toString();return Ct.has(_t)?Ct.get(_t):(Ct.set(_t,xt),xt)};return xt.map((xt=>xt.map(r)))})(xt).forEach((xt=>{Ct.has(xt[0])?Ct.get(xt[0]).push(xt):Ct.set(xt[0],[xt])})),Ct},popNextSide=(xt,Ct)=>{if(1===Ct.length)return Ct.pop();const _t=$t.create(),Vn=$t.angleDegrees($t.subtract(_t,xt[1],xt[0]));let Gn,or;Ct.forEach(((xt,Ct)=>{let lr=$t.angleDegrees($t.subtract(_t,xt[1],xt[0]))-Vn;lr<-180&&(lr+=360),lr>=180&&(lr-=360),(void 0===or||lr>Gn)&&(or=Ct,Gn=lr)}));const lr=Ct[or];return Ct.splice(or,1),lr};Ct.exports=xt=>{const Ct=toVertexMap(Vn(xt)),_t=[];for(;;){let xt;for(const[_t,$t]of Ct){if(xt=$t.shift())break;Ct.delete(_t)}if(void 0===xt)break;const $t=[],Vn=xt[0];for(;;){$t.push(xt[0]);const _t=xt[1];if(_t===Vn)break;const Gn=Ct.get(_t);if(!Gn)throw new Error(`geometry is not closed at vertex ${_t}`);const or=popNextSide(xt,Gn);0===Gn.length&&Ct.delete(_t),xt=or}$t.length>0&&$t.push($t.shift()),_t.push($t)}return Ct.clear(),_t}},{"../../maths/vec2":309,"./toSides":150}],149:[function(xt,Ct,_t){const $t=xt("./toSides");Ct.exports=xt=>{const Ct=$t(xt).map((xt=>xt[0]));return Ct.length>0&&Ct.push(Ct.shift()),Ct}},{"./toSides":150}],150:[function(xt,Ct,_t){const $t=xt("./applyTransforms");Ct.exports=xt=>$t(xt).sides},{"./applyTransforms":139}],151:[function(xt,Ct,_t){const $t=xt("../../maths/vec2"),Vn=xt("./toSides");Ct.exports=xt=>{const Ct=Vn(xt);let _t="geom2 ("+Ct.length+" sides):\n[\n";return Ct.forEach((xt=>{_t+="  ["+$t.toString(xt[0])+", "+$t.toString(xt[1])+"]\n"})),_t+="]\n"}},{"../../maths/vec2":309,"./toSides":150}],152:[function(xt,Ct,_t){const $t=xt("../../maths/mat4"),Vn=xt("./reverse.js");Ct.exports=(xt,Ct)=>{const _t=$t.multiply($t.create(),xt,Ct.transforms),Gn=Object.assign({},Ct,{transforms:_t});return xt[0]*xt[5]-xt[4]*xt[1]<0?Vn(Gn):Gn}},{"../../maths/mat4":261,"./reverse.js":146}],153:[function(xt,Ct,_t){const $t=xt("../../maths/vec2"),Vn=xt("./isA"),Gn=xt("./toOutlines");Ct.exports=xt=>{if(!Vn(xt))throw new Error("invalid geom2 structure");if(Gn(xt),xt.sides.forEach((xt=>{if($t.equals(xt[0],xt[1]))throw new Error(`geom2 self-edge ${xt[0]}`)})),!xt.transforms.every(Number.isFinite))throw new Error(`geom2 invalid transforms ${xt.transforms}`)}},{"../../maths/vec2":309,"./isA":145,"./toOutlines":148}],154:[function(xt,Ct,_t){const $t=xt("../../maths/mat4"),Vn=xt("../poly3");Ct.exports=xt=>($t.isIdentity(xt.transforms)||(xt.polygons=xt.polygons.map((Ct=>Vn.transform(xt.transforms,Ct))),xt.transforms=$t.create()),xt)},{"../../maths/mat4":261,"../poly3":197}],155:[function(xt,Ct,_t){Ct.exports=xt=>Object.assign({},xt)},{}],156:[function(xt,Ct,_t){const $t=xt("../../maths/mat4");Ct.exports=xt=>(void 0===xt&&(xt=[]),{polygons:xt,transforms:$t.create()})},{"../../maths/mat4":261}],157:[function(xt,Ct,_t){const $t=xt("../../maths/vec3"),Vn=xt("../../maths/mat4"),Gn=xt("../poly3"),or=xt("./create");Ct.exports=xt=>{if(1!==xt[0])throw new Error("invalid compact binary data");const Ct=or();Ct.transforms=Vn.clone(xt.slice(1,17));const _t=xt[21];let lr=22,Fr=xt.length-3*_t;for(;Fr<xt.length;){const _t=xt[lr];lr++;const Vn=[];for(let Ct=0;Ct<_t;Ct++)Vn.push($t.fromValues(xt[Fr],xt[Fr+1],xt[Fr+2])),Fr+=3;Ct.polygons.push(Gn.create(Vn))}return xt[17]>=0&&(Ct.color=[xt[17],xt[18],xt[19],xt[20]]),Ct}},{"../../maths/mat4":261,"../../maths/vec3":340,"../poly3":197,"./create":156}],158:[function(xt,Ct,_t){const $t=xt("../poly3"),Vn=xt("./create");Ct.exports=xt=>{if(!Array.isArray(xt))throw new Error("the given points must be an array");const Ct=xt.map(((xt,Ct)=>$t.create(xt)));return Vn(Ct)}},{"../poly3":197,"./create":156}],159:[function(xt,Ct,_t){Ct.exports={clone:xt("./clone"),create:xt("./create"),fromPoints:xt("./fromPoints"),fromCompactBinary:xt("./fromCompactBinary"),invert:xt("./invert"),isA:xt("./isA"),toPoints:xt("./toPoints"),toPolygons:xt("./toPolygons"),toString:xt("./toString"),toCompactBinary:xt("./toCompactBinary"),transform:xt("./transform"),validate:xt("./validate")}},{"./clone":155,"./create":156,"./fromCompactBinary":157,"./fromPoints":158,"./invert":160,"./isA":161,"./toCompactBinary":162,"./toPoints":163,"./toPolygons":164,"./toString":165,"./transform":166,"./validate":167}],160:[function(xt,Ct,_t){const $t=xt("../poly3"),Vn=xt("./create"),Gn=xt("./toPolygons");Ct.exports=xt=>{const Ct=Gn(xt).map((xt=>$t.invert(xt)));return Vn(Ct)}},{"../poly3":197,"./create":156,"./toPolygons":164}],161:[function(xt,Ct,_t){Ct.exports=xt=>!!(xt&&"object"==typeof xt&&"polygons"in xt&&"transforms"in xt&&Array.isArray(xt.polygons)&&"length"in xt.transforms)},{}],162:[function(xt,Ct,_t){const $t=xt("../poly3");Ct.exports=xt=>{const Ct=xt.polygons,_t=xt.transforms,Vn=Ct.length,Gn=Ct.reduce(((xt,Ct)=>xt+Ct.vertices.length),0);let or=[-1,-1,-1,-1];xt.color&&(or=xt.color);const lr=new Float32Array(22+Vn+3*Gn);lr[0]=1,lr[1]=_t[0],lr[2]=_t[1],lr[3]=_t[2],lr[4]=_t[3],lr[5]=_t[4],lr[6]=_t[5],lr[7]=_t[6],lr[8]=_t[7],lr[9]=_t[8],lr[10]=_t[9],lr[11]=_t[10],lr[12]=_t[11],lr[13]=_t[12],lr[14]=_t[13],lr[15]=_t[14],lr[16]=_t[15],lr[17]=or[0],lr[18]=or[1],lr[19]=or[2],lr[20]=or[3],lr[21]=Gn;let Fr=22,Hr=Fr+Vn;return Ct.forEach((xt=>{const Ct=$t.toPoints(xt);lr[Fr]=Ct.length,Fr++;for(let xt=0;xt<Ct.length;xt++){const _t=Ct[xt];lr[Hr+0]=_t[0],lr[Hr+1]=_t[1],lr[Hr+2]=_t[2],Hr+=3}})),lr}},{"../poly3":197}],163:[function(xt,Ct,_t){const $t=xt("../poly3"),Vn=xt("./toPolygons");Ct.exports=xt=>Vn(xt).map((xt=>$t.toPoints(xt)))},{"../poly3":197,"./toPolygons":164}],164:[function(xt,Ct,_t){const $t=xt("./applyTransforms");Ct.exports=xt=>$t(xt).polygons},{"./applyTransforms":154}],165:[function(xt,Ct,_t){const $t=xt("../poly3"),Vn=xt("./toPolygons");Ct.exports=xt=>{const Ct=Vn(xt);let _t="geom3 ("+Ct.length+" polygons):\n";return Ct.forEach((xt=>{_t+="  "+$t.toString(xt)+"\n"})),_t}},{"../poly3":197,"./toPolygons":164}],166:[function(xt,Ct,_t){const $t=xt("../../maths/mat4");Ct.exports=(xt,Ct)=>{const _t=$t.multiply($t.create(),xt,Ct.transforms);return Object.assign({},Ct,{transforms:_t})}},{"../../maths/mat4":261}],167:[function(xt,Ct,_t){const $t=xt("../poly3"),Vn=xt("./isA"),validateManifold=xt=>{const Ct=new Map;xt.polygons.forEach((({vertices:xt})=>{xt.forEach(((_t,$t)=>{const Vn=`${_t}/${xt[($t+1)%xt.length]}`,Gn=Ct.has(Vn)?Ct.get(Vn):0;Ct.set(Vn,Gn+1)}))}));const _t=[];if(Ct.forEach(((xt,$t)=>{const Vn=$t.split("/").reverse().join("/");xt!==Ct.get(Vn)&&_t.push($t.replace("/"," -> "))})),_t.length>0)throw new Error(`non-manifold edges ${_t.length}\n${_t.join("\n")}`)};Ct.exports=xt=>{if(!Vn(xt))throw new Error("invalid geom3 structure");if(xt.polygons.forEach($t.validate),validateManifold(xt),!xt.transforms.every(Number.isFinite))throw new Error(`geom3 invalid transforms ${xt.transforms}`)}},{"../poly3":197,"./isA":161}],168:[function(xt,Ct,_t){Ct.exports={geom2:xt("./geom2"),geom3:xt("./geom3"),path2:xt("./path2"),poly2:xt("./poly2"),poly3:xt("./poly3")}},{"./geom2":144,"./geom3":159,"./path2":180,"./poly2":191,"./poly3":197}],169:[function(xt,Ct,_t){const{TAU:$t}=xt("../../maths/constants"),Vn=xt("../../maths/vec2"),Gn=xt("./fromPoints"),or=xt("./toPoints");Ct.exports=(xt,Ct)=>{let{endpoint:_t,radius:lr,xaxisrotation:Fr,clockwise:Hr,large:xo,segments:Eo}=Object.assign({},{radius:[0,0],xaxisrotation:0,clockwise:!1,large:!1,segments:16},xt);if(!Array.isArray(_t))throw new Error("endpoint must be an array of X and Y values");if(_t.length<2)throw new Error("endpoint must contain X and Y values");if(_t=Vn.clone(_t),!Array.isArray(lr))throw new Error("radius must be an array of X and Y values");if(lr.length<2)throw new Error("radius must contain X and Y values");if(Eo<4)throw new Error("segments must be four or more");if(Ct.isClosed)throw new Error("the given path cannot be closed");const Mo=or(Ct);if(Mo.length<1)throw new Error("the given path must contain one or more points (as the starting point for the arc)");let Oo=lr[0],Ro=lr[1];const Io=Mo[Mo.length-1];Oo=Math.round(1e5*Oo)/1e5,Ro=Math.round(1e5*Ro)/1e5,_t=Vn.fromValues(Math.round(1e5*_t[0])/1e5,Math.round(1e5*_t[1])/1e5);const Bo=!Hr;let zo=[];if(0===Oo||0===Ro)zo.push(_t);else{Oo=Math.abs(Oo),Ro=Math.abs(Ro);const Ct=Fr,Gn=Math.cos(Ct),or=Math.sin(Ct),lr=Vn.subtract(Vn.create(),Io,_t);Vn.scale(lr,lr,.5);const Hr=Math.round(1e5*(Gn*lr[0]+or*lr[1]))/1e5,Mo=Math.round(1e5*(-or*lr[0]+Gn*lr[1]))/1e5,Ho=Vn.fromValues(Hr,Mo),Qo=Ho[0]*Ho[0]/(Oo*Oo)+Ho[1]*Ho[1]/(Ro*Ro);if(Qo>1){const xt=Math.sqrt(Qo);Oo*=xt,Ro*=xt,Oo=Math.round(1e5*Oo)/1e5,Ro=Math.round(1e5*Ro)/1e5}let pi=Math.sqrt((Oo*Oo*Ro*Ro-Oo*Oo*Ho[1]*Ho[1]-Ro*Ro*Ho[0]*Ho[0])/(Oo*Oo*Ho[1]*Ho[1]+Ro*Ro*Ho[0]*Ho[0]));Bo===xo&&(pi=-pi);const gi=Vn.fromValues(Oo*Ho[1]/Ro,-Ro*Ho[0]/Oo);Vn.scale(gi,gi,pi);let es=Vn.fromValues(Gn*gi[0]-or*gi[1],or*gi[0]+Gn*gi[1]);es=Vn.add(es,es,Vn.scale(Vn.create(),Vn.add(Vn.create(),Io,_t),.5));const ts=Vn.fromValues((Ho[0]-gi[0])/Oo,(Ho[1]-gi[1])/Ro),ns=Vn.fromValues((-Ho[0]-gi[0])/Oo,(-Ho[1]-gi[1])/Ro),rs=Vn.angleRadians(ts);let os=Vn.angleRadians(ns)-rs;os%=$t,!Bo&&os>0?os-=$t:Bo&&os<0&&(os+=$t);let is=Math.ceil(Math.abs(os)/$t*Eo)+1;is<1&&(is=1);for(let xt=1;xt<is;xt++){const Ct=rs+xt/is*os,_t=Math.cos(Ct),$t=Math.sin(Ct),lr=Vn.fromValues(Gn*Oo*_t-or*Ro*$t,or*Oo*_t+Gn*Ro*$t);Vn.add(lr,lr,es),zo.push(lr)}is&&zo.push(xt.endpoint)}return zo=Mo.concat(zo),Gn({},zo)}},{"../../maths/constants":212,"../../maths/vec2":309,"./fromPoints":179,"./toPoints":184}],170:[function(xt,Ct,_t){const{TAU:$t}=xt("../../maths/constants"),Vn=xt("../../maths/vec2"),Gn=xt("../../maths/vec2"),or=xt("./appendPoints"),lr=xt("./toPoints");Ct.exports=(xt,Ct)=>{let{controlPoints:_t,segments:Fr}=Object.assign({},{segments:16},xt);if(!Array.isArray(_t))throw new Error("controlPoints must be an array of one or more points");if(_t.length<1)throw new Error("controlPoints must be an array of one or more points");if(Fr<4)throw new Error("segments must be four or more");if(Ct.isClosed)throw new Error("the given geometry cannot be closed");const Hr=lr(Ct);if(Hr.length<1)throw new Error("the given path must contain one or more points (as the starting point for the bezier curve)");if(null===(_t=_t.slice())[0]){if(_t.length<2)throw new Error("a null control point must be passed with one more control points");let xt=Hr[Hr.length-2];if("lastBezierControlPoint"in Ct&&(xt=Ct.lastBezierControlPoint),!Array.isArray(xt))throw new Error("the given path must contain TWO or more points if given a null control point");const $t=Vn.scale(Vn.create(),Hr[Hr.length-1],2);Vn.subtract($t,$t,xt),_t[0]=$t}_t.unshift(Hr[Hr.length-1]);const xo=_t.length-1,Eo=[];let Mo=1;for(let xt=0;xt<=xo;++xt)xt>0&&(Mo*=xt),Eo.push(Mo);const Oo=[];for(let xt=0;xt<=xo;++xt){const Ct=Eo[xo]/(Eo[xt]*Eo[xo-xt]);Oo.push(Ct)}const Ro=Vn.create(),Io=Vn.create(),Bo=Gn.create(),u=xt=>{let Ct=1,$t=Math.pow(1-xt,xo);const Gn=1!==xt?1/(1-xt):1,or=Vn.create();for(let lr=0;lr<=xo;++lr){lr===xo&&($t=1);const Fr=Oo[lr]*Ct*$t,Hr=Vn.scale(Ro,_t[lr],Fr);Vn.add(or,or,Hr),Ct*=xt,$t*=Gn}return or},zo=[],Ho=[],Qo=xo+1;for(let xt=0;xt<Qo;++xt){const Ct=xt/(Qo-1),_t=u(Ct);zo.push(_t),Ho.push(Ct)}let pi=1;const gi=$t/Fr,es=Math.sin(gi);for(;pi<zo.length-1;){const xt=Vn.subtract(Ro,zo[pi],zo[pi-1]);Vn.normalize(xt,xt);const Ct=Vn.subtract(Io,zo[pi+1],zo[pi]);Vn.normalize(Ct,Ct);const _t=Vn.cross(Bo,xt,Ct);if(Math.abs(_t[2])>es){const xt=Ho[pi-1],Ct=Ho[pi+1],_t=xt+1*(Ct-xt)/3,$t=xt+2*(Ct-xt)/3,Vn=u(_t),Gn=u($t);zo.splice(pi,1,Vn,Gn),Ho.splice(pi,1,_t,$t),--pi<1&&(pi=1)}else++pi}zo.shift();const ts=or(zo,Ct);return ts.lastBezierControlPoint=_t[_t.length-2],ts}},{"../../maths/constants":212,"../../maths/vec2":309,"./appendPoints":171,"./toPoints":184}],171:[function(xt,Ct,_t){const $t=xt("./concat"),Vn=xt("./create");Ct.exports=(xt,Ct)=>$t(Ct,Vn(xt))},{"./concat":175,"./create":176}],172:[function(xt,Ct,_t){const $t=xt("../../maths/mat4"),Vn=xt("../../maths/vec2");Ct.exports=xt=>($t.isIdentity(xt.transforms)||(xt.points=xt.points.map((Ct=>Vn.transform(Vn.create(),Ct,xt.transforms))),xt.transforms=$t.create()),xt)},{"../../maths/mat4":261,"../../maths/vec2":309}],173:[function(xt,Ct,_t){Ct.exports=xt=>Object.assign({},xt)},{}],174:[function(xt,Ct,_t){const{EPS:$t}=xt("../../maths/constants"),Vn=xt("../../maths/vec2"),Gn=xt("./clone");Ct.exports=xt=>{if(xt.isClosed)return xt;const Ct=Gn(xt);if(Ct.isClosed=!0,Ct.points.length>1){const xt=Ct.points,_t=xt[0];let Gn=xt[xt.length-1];for(;Vn.distance(_t,Gn)<$t*$t&&(xt.pop(),1!==xt.length);)Gn=xt[xt.length-1]}return Ct}},{"../../maths/constants":212,"../../maths/vec2":309,"./clone":173}],175:[function(xt,Ct,_t){const $t=xt("./fromPoints"),Vn=xt("./toPoints"),{equals:Gn}=xt("../../maths/vec2");Ct.exports=(...xt)=>{let Ct=!1,_t=[];return xt.forEach(((xt,$t)=>{const or=Vn(xt).slice();if(_t.length>0&&or.length>0&&Gn(or[0],_t[_t.length-1])&&or.shift(),or.length>0&&Ct)throw new Error(`Cannot concatenate to a closed path; check the ${$t}th path`);Ct=xt.isClosed,_t=_t.concat(or)})),$t({closed:Ct},_t)}},{"../../maths/vec2":309,"./fromPoints":179,"./toPoints":184}],176:[function(xt,Ct,_t){const $t=xt("../../maths/mat4");Ct.exports=xt=>(void 0===xt&&(xt=[]),{points:xt,isClosed:!1,transforms:$t.create()})},{"../../maths/mat4":261}],177:[function(xt,Ct,_t){const $t=xt("../../maths/vec2"),Vn=xt("./toPoints");Ct.exports=(xt,Ct)=>{if(xt.isClosed!==Ct.isClosed)return!1;if(xt.points.length!==Ct.points.length)return!1;const _t=Vn(xt),Gn=Vn(Ct),or=_t.length;let lr=0;do{let Ct=!1;for(let xt=0;xt<or;xt++)if(!$t.equals(_t[xt],Gn[(xt+lr)%or])){Ct=!0;break}if(!1===Ct)return!0;if(!xt.isClosed)return!1}while(++lr<or);return!1}},{"../../maths/vec2":309,"./toPoints":184}],178:[function(xt,Ct,_t){const $t=xt("../../maths/mat4"),Vn=xt("../../maths/vec2"),Gn=xt("./create");Ct.exports=xt=>{if(2!==xt[0])throw new Error("invalid compact binary data");const Ct=Gn();Ct.transforms=$t.clone(xt.slice(1,17)),Ct.isClosed=!!xt[17];for(let _t=22;_t<xt.length;_t+=2){const $t=Vn.fromValues(xt[_t],xt[_t+1]);Ct.points.push($t)}return xt[18]>=0&&(Ct.color=[xt[18],xt[19],xt[20],xt[21]]),Ct}},{"../../maths/mat4":261,"../../maths/vec2":309,"./create":176}],179:[function(xt,Ct,_t){const{EPS:$t}=xt("../../maths/constants"),Vn=xt("../../maths/vec2"),Gn=xt("./close"),or=xt("./create");Ct.exports=(xt,Ct)=>{let{closed:_t}=Object.assign({},{closed:!1},xt),lr=or();if(lr.points=Ct.map((xt=>Vn.clone(xt))),lr.points.length>1){const xt=lr.points[0],Ct=lr.points[lr.points.length-1];Vn.distance(xt,Ct)<$t*$t&&(_t=!0)}return!0===_t&&(lr=Gn(lr)),lr}},{"../../maths/constants":212,"../../maths/vec2":309,"./close":174,"./create":176}],180:[function(xt,Ct,_t){Ct.exports={appendArc:xt("./appendArc"),appendBezier:xt("./appendBezier"),appendPoints:xt("./appendPoints"),clone:xt("./clone"),close:xt("./close"),concat:xt("./concat"),create:xt("./create"),equals:xt("./equals"),fromPoints:xt("./fromPoints"),fromCompactBinary:xt("./fromCompactBinary"),isA:xt("./isA"),reverse:xt("./reverse"),toPoints:xt("./toPoints"),toString:xt("./toString"),toCompactBinary:xt("./toCompactBinary"),transform:xt("./transform"),validate:xt("./validate")}},{"./appendArc":169,"./appendBezier":170,"./appendPoints":171,"./clone":173,"./close":174,"./concat":175,"./create":176,"./equals":177,"./fromCompactBinary":178,"./fromPoints":179,"./isA":181,"./reverse":182,"./toCompactBinary":183,"./toPoints":184,"./toString":185,"./transform":186,"./validate":187}],181:[function(xt,Ct,_t){Ct.exports=xt=>!!(xt&&"object"==typeof xt&&"points"in xt&&"transforms"in xt&&"isClosed"in xt&&Array.isArray(xt.points)&&"length"in xt.transforms)},{}],182:[function(xt,Ct,_t){const $t=xt("./clone");Ct.exports=xt=>{const Ct=$t(xt);return Ct.points=xt.points.slice().reverse(),Ct}},{"./clone":173}],183:[function(xt,Ct,_t){Ct.exports=xt=>{const Ct=xt.points,_t=xt.transforms;let $t=[-1,-1,-1,-1];xt.color&&($t=xt.color);const Vn=new Float32Array(22+2*Ct.length);Vn[0]=2,Vn[1]=_t[0],Vn[2]=_t[1],Vn[3]=_t[2],Vn[4]=_t[3],Vn[5]=_t[4],Vn[6]=_t[5],Vn[7]=_t[6],Vn[8]=_t[7],Vn[9]=_t[8],Vn[10]=_t[9],Vn[11]=_t[10],Vn[12]=_t[11],Vn[13]=_t[12],Vn[14]=_t[13],Vn[15]=_t[14],Vn[16]=_t[15],Vn[17]=xt.isClosed?1:0,Vn[18]=$t[0],Vn[19]=$t[1],Vn[20]=$t[2],Vn[21]=$t[3];for(let xt=0;xt<Ct.length;xt++){const _t=2*xt+22,$t=Ct[xt];Vn[_t]=$t[0],Vn[_t+1]=$t[1]}return Vn}},{}],184:[function(xt,Ct,_t){const $t=xt("./applyTransforms");Ct.exports=xt=>$t(xt).points},{"./applyTransforms":172}],185:[function(xt,Ct,_t){const $t=xt("../../maths/vec2"),Vn=xt("./toPoints");Ct.exports=xt=>{const Ct=Vn(xt);let _t="path ("+Ct.length+" points, "+xt.isClosed+"):\n[\n";return Ct.forEach((xt=>{_t+="  "+$t.toString(xt)+",\n"})),_t+="]\n"}},{"../../maths/vec2":309,"./toPoints":184}],186:[function(xt,Ct,_t){const $t=xt("../../maths/mat4");Ct.exports=(xt,Ct)=>{const _t=$t.multiply($t.create(),xt,Ct.transforms);return Object.assign({},Ct,{transforms:_t})}},{"../../maths/mat4":261}],187:[function(xt,Ct,_t){const $t=xt("../../maths/vec2"),Vn=xt("./isA");Ct.exports=xt=>{if(!Vn(xt))throw new Error("invalid path2 structure");if(xt.points.length>1)for(let Ct=0;Ct<xt.points.length;Ct++)if($t.equals(xt.points[Ct],xt.points[(Ct+1)%xt.points.length]))throw new Error(`path2 duplicate points ${xt.points[Ct]}`);if(xt.points.forEach((xt=>{if(!xt.every(Number.isFinite))throw new Error(`path2 invalid point ${xt}`)})),!xt.transforms.every(Number.isFinite))throw new Error(`path2 invalid transforms ${xt.transforms}`)}},{"../../maths/vec2":309,"./isA":181}],188:[function(xt,Ct,_t){const $t=xt("./measureArea"),Vn=xt("./flip"),isPointInside=(xt,Ct)=>{const _t=Ct.length,$t=xt[0],Vn=xt[1];let Gn=Ct[_t-1],or=Ct[0],lr=Gn[1]>Vn,Fr=0,Hr=0;for(let xt=_t+1;--xt;){const xt=or[1]>Vn;if(lr!==xt){const xt=Gn[0]>$t,Ct=or[0]>$t;(xt&&Ct||or[0]-(or[1]-Vn)*(Gn[0]-or[0])/(Gn[1]-or[1])>=$t)&&(Fr=!Fr)}lr=xt,Gn=or,or=Ct[++Hr]}return Fr};Ct.exports=(xt,Ct)=>{if(0===xt.length)return 0;const _t=Ct.vertices;return _t.length<3?0:($t(Ct)<0&&(Ct=Vn(Ct)),xt.reduce(((xt,Ct)=>xt+isPointInside(Ct,_t)),0)===xt.length?1:0)}},{"./flip":190,"./measureArea":192}],189:[function(xt,Ct,_t){Ct.exports=xt=>((void 0===xt||xt.length<3)&&(xt=[]),{vertices:xt})},{}],190:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=xt=>{const Ct=xt.vertices.slice().reverse();return $t(Ct)}},{"./create":189}],191:[function(xt,Ct,_t){Ct.exports={arePointsInside:xt("./arePointsInside"),create:xt("./create"),flip:xt("./flip"),measureArea:xt("./measureArea")}},{"./arePointsInside":188,"./create":189,"./flip":190,"./measureArea":192}],192:[function(xt,Ct,_t){const $t=xt("../../maths/utils/area");Ct.exports=xt=>$t(xt.vertices)},{"../../maths/utils/area":286}],193:[function(xt,Ct,_t){const $t=xt("./create"),Vn=xt("../../maths/vec3");Ct.exports=(...xt)=>{let Ct,_t;return 1===xt.length?(Ct=$t(),_t=xt[0]):(Ct=xt[0],_t=xt[1]),Ct.vertices=_t.vertices.map((xt=>Vn.clone(xt))),Ct}},{"../../maths/vec3":340,"./create":194}],194:[function(xt,Ct,_t){Ct.exports=xt=>((void 0===xt||xt.length<3)&&(xt=[]),{vertices:xt})},{}],195:[function(xt,Ct,_t){const $t=xt("../../maths/vec3"),Vn=xt("./create");Ct.exports=xt=>{const Ct=xt.map((xt=>$t.clone(xt)));return Vn(Ct)}},{"../../maths/vec3":340,"./create":194}],196:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=(xt,Ct)=>{const _t=$t(xt);return _t.plane=Ct,_t}},{"./create":194}],197:[function(xt,Ct,_t){Ct.exports={clone:xt("./clone"),create:xt("./create"),fromPoints:xt("./fromPoints"),fromPointsAndPlane:xt("./fromPointsAndPlane"),invert:xt("./invert"),isA:xt("./isA"),isConvex:xt("./isConvex"),measureArea:xt("./measureArea"),measureBoundingBox:xt("./measureBoundingBox"),measureBoundingSphere:xt("./measureBoundingSphere"),measureSignedVolume:xt("./measureSignedVolume"),plane:xt("./plane"),toPoints:xt("./toPoints"),toString:xt("./toString"),transform:xt("./transform"),validate:xt("./validate")}},{"./clone":193,"./create":194,"./fromPoints":195,"./fromPointsAndPlane":196,"./invert":198,"./isA":199,"./isConvex":200,"./measureArea":201,"./measureBoundingBox":202,"./measureBoundingSphere":203,"./measureSignedVolume":204,"./plane":205,"./toPoints":206,"./toString":207,"./transform":208,"./validate":209}],198:[function(xt,Ct,_t){const $t=xt("../../maths/plane"),Vn=xt("./create");Ct.exports=xt=>{const Ct=xt.vertices.slice().reverse(),_t=Vn(Ct);return xt.plane&&(_t.plane=$t.flip($t.create(),xt.plane)),_t}},{"../../maths/plane":281,"./create":194}],199:[function(xt,Ct,_t){Ct.exports=xt=>!!(xt&&"object"==typeof xt&&"vertices"in xt&&Array.isArray(xt.vertices))},{}],200:[function(xt,Ct,_t){const $t=xt("../../maths/plane"),Vn=xt("../../maths/vec3"),areVerticesConvex=xt=>{const Ct=xt.length;if(Ct>2){const _t=$t.fromPoints($t.create(),...xt);let Vn=xt[Ct-2],Gn=xt[Ct-1];for(let $t=0;$t<Ct;$t++){const Ct=xt[$t];if(!isConvexPoint(Vn,Gn,Ct,_t))return!1;Vn=Gn,Gn=Ct}}return!0},isConvexPoint=(xt,Ct,_t,$t)=>{const Gn=Vn.cross(Vn.create(),Vn.subtract(Vn.create(),Ct,xt),Vn.subtract(Vn.create(),_t,Ct));return Vn.dot(Gn,$t)>=0};Ct.exports=xt=>areVerticesConvex(xt.vertices)},{"../../maths/plane":281,"../../maths/vec3":340}],201:[function(xt,Ct,_t){const $t=xt("./plane");Ct.exports=xt=>{const Ct=xt.vertices.length;if(Ct<3)return 0;const _t=xt.vertices,Vn=$t(xt),Gn=Math.abs(Vn[0]),or=Math.abs(Vn[1]),lr=Math.abs(Vn[2]);if(Gn+or+lr===0)return 0;let Fr=3;Gn>or&&Gn>lr?Fr=1:or>lr&&(Fr=2);let Hr=0,xo=0,Eo=1,Mo=2;switch(Fr){case 1:for(Eo=1;Eo<Ct;Eo++)xo=Eo-1,Mo=(Eo+1)%Ct,Hr+=_t[Eo][1]*(_t[Mo][2]-_t[xo][2]);Hr+=_t[0][1]*(_t[1][2]-_t[Ct-1][2]),Hr/=2*Vn[0];break;case 2:for(Eo=1;Eo<Ct;Eo++)xo=Eo-1,Mo=(Eo+1)%Ct,Hr+=_t[Eo][2]*(_t[Mo][0]-_t[xo][0]);Hr+=_t[0][2]*(_t[1][0]-_t[Ct-1][0]),Hr/=2*Vn[1];break;default:for(Eo=1;Eo<Ct;Eo++)xo=Eo-1,Mo=(Eo+1)%Ct,Hr+=_t[Eo][0]*(_t[Mo][1]-_t[xo][1]);Hr+=_t[0][0]*(_t[1][1]-_t[Ct-1][1]),Hr/=2*Vn[2]}return Hr}},{"./plane":205}],202:[function(xt,Ct,_t){const $t=xt("../../maths/vec3");Ct.exports=xt=>{const Ct=xt.vertices,_t=Ct.length,Vn=0===_t?$t.create():$t.clone(Ct[0]),Gn=$t.clone(Vn);for(let xt=1;xt<_t;xt++)$t.min(Vn,Vn,Ct[xt]),$t.max(Gn,Gn,Ct[xt]);return[Vn,Gn]}},{"../../maths/vec3":340}],203:[function(xt,Ct,_t){const $t=xt("../../maths/vec4"),Vn=new WeakMap;Ct.exports=xt=>{const Ct=Vn.get(xt);if(Ct)return Ct;const _t=xt.vertices,Gn=$t.create();if(0===_t.length)return Gn[0]=0,Gn[1]=0,Gn[2]=0,Gn[3]=0,Gn;let or=_t[0],lr=or,Fr=or,Hr=or,xo=or,Eo=or;_t.forEach((xt=>{or[0]>xt[0]&&(or=xt),lr[1]>xt[1]&&(lr=xt),Fr[2]>xt[2]&&(Fr=xt),Hr[0]<xt[0]&&(Hr=xt),xo[1]<xt[1]&&(xo=xt),Eo[2]<xt[2]&&(Eo=xt)})),Gn[0]=.5*(or[0]+Hr[0]),Gn[1]=.5*(lr[1]+xo[1]),Gn[2]=.5*(Fr[2]+Eo[2]);const Mo=Gn[0]-Hr[0],Oo=Gn[1]-xo[1],Ro=Gn[2]-Eo[2];return Gn[3]=Math.sqrt(Mo*Mo+Oo*Oo+Ro*Ro),Vn.set(xt,Gn),Gn}},{"../../maths/vec4":366}],204:[function(xt,Ct,_t){const $t=xt("../../maths/vec3");Ct.exports=xt=>{let Ct=0;const _t=xt.vertices,Vn=$t.create();for(let xt=0;xt<_t.length-2;xt++)$t.cross(Vn,_t[xt+1],_t[xt+2]),Ct+=$t.dot(_t[0],Vn);return Ct/6}},{"../../maths/vec3":340}],205:[function(xt,Ct,_t){const $t=xt("../../maths/plane/");Ct.exports=xt=>(xt.plane||(xt.plane=$t.fromPoints($t.create(),...xt.vertices)),xt.plane)},{"../../maths/plane/":281}],206:[function(xt,Ct,_t){Ct.exports=xt=>xt.vertices},{}],207:[function(xt,Ct,_t){const $t=xt("../../maths/vec3/");Ct.exports=xt=>{let Ct="poly3: vertices: [";return xt.vertices.forEach((xt=>{Ct+=`${$t.toString(xt)}, `})),Ct+="]"}},{"../../maths/vec3/":340}],208:[function(xt,Ct,_t){const $t=xt("../../maths/mat4"),Vn=xt("../../maths/vec3"),Gn=xt("./create");Ct.exports=(xt,Ct)=>{const _t=Ct.vertices.map((Ct=>Vn.transform(Vn.create(),Ct,xt)));return $t.isMirroring(xt)&&_t.reverse(),Gn(_t)}},{"../../maths/mat4":261,"../../maths/vec3":340,"./create":194}],209:[function(xt,Ct,_t){const $t=xt("../../maths/plane/signedDistanceToPoint"),{NEPS:Vn}=xt("../../maths/constants"),Gn=xt("../../maths/vec3"),or=xt("./isA"),lr=xt("./isConvex"),Fr=xt("./measureArea"),Hr=xt("./plane");Ct.exports=xt=>{if(!or(xt))throw new Error("invalid poly3 structure");if(xt.vertices.length<3)throw new Error(`poly3 not enough vertices ${xt.vertices.length}`);if(Fr(xt)<=0)throw new Error("poly3 area must be greater than zero");for(let Ct=0;Ct<xt.vertices.length;Ct++)if(Gn.equals(xt.vertices[Ct],xt.vertices[(Ct+1)%xt.vertices.length]))throw new Error(`poly3 duplicate vertex ${xt.vertices[Ct]}`);if(!lr(xt))throw new Error("poly3 must be convex");if(xt.vertices.forEach((xt=>{if(!xt.every(Number.isFinite))throw new Error(`poly3 invalid vertex ${xt}`)})),xt.vertices.length>3){const Ct=Hr(xt);xt.vertices.forEach((xt=>{const _t=Math.abs($t(Ct,xt));if(_t>Vn)throw new Error(`poly3 must be coplanar: vertex ${xt} distance ${_t}`)}))}}},{"../../maths/constants":212,"../../maths/plane/signedDistanceToPoint":283,"../../maths/vec3":340,"./isA":199,"./isConvex":200,"./measureArea":201,"./plane":205}],210:[function(xt,Ct,_t){Ct.exports={colors:xt("./colors"),curves:xt("./curves"),geometries:xt("./geometries"),maths:xt("./maths"),measurements:xt("./measurements"),primitives:xt("./primitives"),text:xt("./text"),utils:xt("./utils"),booleans:xt("./operations/booleans"),expansions:xt("./operations/expansions"),extrusions:xt("./operations/extrusions"),hulls:xt("./operations/hulls"),modifiers:xt("./operations/modifiers"),transforms:xt("./operations/transforms")}},{"./colors":127,"./curves":138,"./geometries":168,"./maths":213,"./measurements":370,"./operations/booleans":384,"./operations/expansions":413,"./operations/extrusions":436,"./operations/hulls":458,"./operations/modifiers":469,"./operations/transforms":479,"./primitives":495,"./text":509,"./utils":517}],211:[function(xt,Ct,_t){const $t=xt("./mat4"),Vn=xt("./vec2"),Gn=xt("./vec3"),OrthoNormalBasis=function(xt,Ct){arguments.length<2&&(Ct=Gn.orthogonal(Gn.create(),xt)),this.v=Gn.normalize(Gn.create(),Gn.cross(Gn.create(),xt,Ct)),this.u=Gn.cross(Gn.create(),this.v,xt),this.plane=xt,this.planeorigin=Gn.scale(Gn.create(),xt,xt[3])};OrthoNormalBasis.GetCartesian=function(xt,Ct){const _t=xt+"/"+Ct;let $t,Vn;if("X/Y"===_t)$t=[0,0,1],Vn=[1,0,0];else if("Y/-X"===_t)$t=[0,0,1],Vn=[0,1,0];else if("-X/-Y"===_t)$t=[0,0,1],Vn=[-1,0,0];else if("-Y/X"===_t)$t=[0,0,1],Vn=[0,-1,0];else if("-X/Y"===_t)$t=[0,0,-1],Vn=[-1,0,0];else if("-Y/-X"===_t)$t=[0,0,-1],Vn=[0,-1,0];else if("X/-Y"===_t)$t=[0,0,-1],Vn=[1,0,0];else if("Y/X"===_t)$t=[0,0,-1],Vn=[0,1,0];else if("X/Z"===_t)$t=[0,-1,0],Vn=[1,0,0];else if("Z/-X"===_t)$t=[0,-1,0],Vn=[0,0,1];else if("-X/-Z"===_t)$t=[0,-1,0],Vn=[-1,0,0];else if("-Z/X"===_t)$t=[0,-1,0],Vn=[0,0,-1];else if("-X/Z"===_t)$t=[0,1,0],Vn=[-1,0,0];else if("-Z/-X"===_t)$t=[0,1,0],Vn=[0,0,-1];else if("X/-Z"===_t)$t=[0,1,0],Vn=[1,0,0];else if("Z/X"===_t)$t=[0,1,0],Vn=[0,0,1];else if("Y/Z"===_t)$t=[1,0,0],Vn=[0,1,0];else if("Z/-Y"===_t)$t=[1,0,0],Vn=[0,0,1];else if("-Y/-Z"===_t)$t=[1,0,0],Vn=[0,-1,0];else if("-Z/Y"===_t)$t=[1,0,0],Vn=[0,0,-1];else if("-Y/Z"===_t)$t=[-1,0,0],Vn=[0,-1,0];else if("-Z/-Y"===_t)$t=[-1,0,0],Vn=[0,0,-1];else if("Y/-Z"===_t)$t=[-1,0,0],Vn=[0,1,0];else{if("Z/Y"!==_t)throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");$t=[-1,0,0],Vn=[0,0,1]}return new OrthoNormalBasis(new Plane(new Vector3D($t),0),new Vector3D(Vn))},OrthoNormalBasis.Z0Plane=function(){const xt=new Plane(new Vector3D([0,0,1]),0);return new OrthoNormalBasis(xt,new Vector3D([1,0,0]))},OrthoNormalBasis.prototype={getProjectionMatrix:function(){return $t.fromValues(this.u[0],this.v[0],this.plane[0],0,this.u[1],this.v[1],this.plane[1],0,this.u[2],this.v[2],this.plane[2],0,0,0,-this.plane[3],1)},getInverseProjectionMatrix:function(){const xt=Gn.scale(Gn.create(),this.plane,this.plane[3]);return $t.fromValues(this.u[0],this.u[1],this.u[2],0,this.v[0],this.v[1],this.v[2],0,this.plane[0],this.plane[1],this.plane[2],0,xt[0],xt[1],xt[2],1)},to2D:function(xt){return Vn.fromValues(Gn.dot(xt,this.u),Gn.dot(xt,this.v))},to3D:function(xt){const Ct=Gn.scale(Gn.create(),this.u,xt[0]),_t=Gn.scale(Gn.create(),this.v,xt[1]),$t=Gn.add(Ct,Ct,this.planeorigin);return Gn.add(_t,_t,$t)},line3Dto2D:function(xt){const Ct=xt.point,_t=xt.direction.plus(Ct),$t=this.to2D(Ct),Vn=this.to2D(_t);return Line2D.fromPoints($t,Vn)},line2Dto3D:function(xt){const Ct=xt.origin(),_t=xt.direction().plus(Ct),$t=this.to3D(Ct),Vn=this.to3D(_t);return Line3D.fromPoints($t,Vn)},transform:function(xt){const Ct=this.plane.transform(xt),_t=this.u.transform(xt),$t=new Vector3D(0,0,0).transform(xt),Vn=_t.minus($t);return new OrthoNormalBasis(Ct,Vn)}},Ct.exports=OrthoNormalBasis},{"./mat4":261,"./vec2":309,"./vec3":340}],212:[function(xt,Ct,_t){const $t=2*Math.PI;Ct.exports={EPS:1e-5,NEPS:1e-13,TAU:$t,spatialResolution:1e5}},{}],213:[function(xt,Ct,_t){Ct.exports={constants:xt("./constants"),line2:xt("./line2"),line3:xt("./line3"),mat4:xt("./mat4"),plane:xt("./plane"),utils:xt("./utils"),vec2:xt("./vec2"),vec3:xt("./vec3"),vec4:xt("./vec4")}},{"./constants":212,"./line2":223,"./line3":240,"./mat4":261,"./plane":281,"./utils":287,"./vec2":309,"./vec3":340,"./vec4":366}],214:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=xt=>{const Ct=$t();return Ct[0]=xt[0],Ct[1]=xt[1],Ct[2]=xt[2],Ct}},{"./create":217}],215:[function(xt,Ct,_t){const $t=xt("../vec2"),Vn=xt("./direction"),Gn=xt("./origin");Ct.exports=(xt,Ct)=>{const _t=Gn(xt),or=Vn(xt),lr=$t.subtract($t.create(),Ct,_t),Fr=$t.dot(lr,or);return $t.scale(lr,or,Fr),$t.add(lr,lr,_t),lr}},{"../vec2":309,"./direction":218,"./origin":225}],216:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Ct[0],xt[1]=Ct[1],xt[2]=Ct[2],xt)},{}],217:[function(xt,Ct,_t){Ct.exports=()=>[0,1,0]},{}],218:[function(xt,Ct,_t){const $t=xt("../vec2");Ct.exports=xt=>{const Ct=$t.normal($t.create(),xt);return $t.negate(Ct,Ct),Ct}},{"../vec2":309}],219:[function(xt,Ct,_t){const $t=xt("../vec2");Ct.exports=(xt,Ct)=>{let _t=$t.dot(Ct,xt);return Math.abs(_t-xt[2])}},{"../vec2":309}],220:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>xt[0]===Ct[0]&&xt[1]===Ct[1]&&xt[2]===Ct[2]},{}],221:[function(xt,Ct,_t){const $t=xt("../vec2");Ct.exports=(xt,Ct,_t)=>{const Vn=$t.subtract($t.create(),_t,Ct);$t.normal(Vn,Vn),$t.normalize(Vn,Vn);const Gn=$t.dot(Ct,Vn);return xt[0]=Vn[0],xt[1]=Vn[1],xt[2]=Gn,xt}},{"../vec2":309}],222:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=(xt,Ct,_t)=>{const Vn=$t();return Vn[0]=xt,Vn[1]=Ct,Vn[2]=_t,Vn}},{"./create":217}],223:[function(xt,Ct,_t){Ct.exports={clone:xt("./clone"),closestPoint:xt("./closestPoint"),copy:xt("./copy"),create:xt("./create"),direction:xt("./direction"),distanceToPoint:xt("./distanceToPoint"),equals:xt("./equals"),fromPoints:xt("./fromPoints"),fromValues:xt("./fromValues"),intersectPointOfLines:xt("./intersectPointOfLines"),origin:xt("./origin"),reverse:xt("./reverse"),toString:xt("./toString"),transform:xt("./transform"),xAtY:xt("./xAtY")}},{"./clone":214,"./closestPoint":215,"./copy":216,"./create":217,"./direction":218,"./distanceToPoint":219,"./equals":220,"./fromPoints":221,"./fromValues":222,"./intersectPointOfLines":224,"./origin":225,"./reverse":226,"./toString":227,"./transform":228,"./xAtY":229}],224:[function(xt,Ct,_t){const $t=xt("../vec2"),{solve2Linear:Vn}=xt("../utils");Ct.exports=(xt,Ct)=>{const _t=Vn(xt[0],xt[1],Ct[0],Ct[1],xt[2],Ct[2]);return $t.clone(_t)}},{"../utils":287,"../vec2":309}],225:[function(xt,Ct,_t){const $t=xt("../vec2");Ct.exports=xt=>$t.scale($t.create(),xt,xt[2])},{"../vec2":309}],226:[function(xt,Ct,_t){const $t=xt("../vec2"),Vn=xt("./copy"),Gn=xt("./fromValues");Ct.exports=(xt,Ct)=>{const _t=$t.negate($t.create(),Ct),or=-Ct[2];return Vn(xt,Gn(_t[0],_t[1],or))}},{"../vec2":309,"./copy":216,"./fromValues":222}],227:[function(xt,Ct,_t){Ct.exports=xt=>`line2: (${xt[0].toFixed(7)}, ${xt[1].toFixed(7)}, ${xt[2].toFixed(7)})`},{}],228:[function(xt,Ct,_t){const $t=xt("../vec2"),Vn=xt("./fromPoints"),Gn=xt("./origin"),or=xt("./direction");Ct.exports=(xt,Ct,_t)=>{const lr=Gn(Ct),Fr=or(Ct);return $t.transform(lr,lr,_t),$t.transform(Fr,Fr,_t),Vn(xt,lr,Fr)}},{"../vec2":309,"./direction":218,"./fromPoints":221,"./origin":225}],229:[function(xt,Ct,_t){const $t=xt("./origin");Ct.exports=(xt,Ct)=>{let _t=(xt[2]-xt[1]*Ct)/xt[0];return Number.isNaN(_t)&&(_t=$t(xt)[0]),_t}},{"./origin":225}],230:[function(xt,Ct,_t){const $t=xt("../vec3"),Vn=xt("./create");Ct.exports=xt=>{const Ct=Vn();return $t.copy(Ct[0],xt[0]),$t.copy(Ct[1],xt[1]),Ct}},{"../vec3":340,"./create":233}],231:[function(xt,Ct,_t){const $t=xt("../vec3");Ct.exports=(xt,Ct)=>{const _t=xt[0],Vn=xt[1],Gn=$t.dot($t.subtract($t.create(),Ct,_t),Vn)/$t.dot(Vn,Vn),or=$t.scale($t.create(),Vn,Gn);return $t.add(or,or,_t),or}},{"../vec3":340}],232:[function(xt,Ct,_t){const $t=xt("../vec3");Ct.exports=(xt,Ct)=>($t.copy(xt[0],Ct[0]),$t.copy(xt[1],Ct[1]),xt)},{"../vec3":340}],233:[function(xt,Ct,_t){const $t=xt("../vec3");Ct.exports=()=>[$t.fromValues(0,0,0),$t.fromValues(0,0,1)]},{"../vec3":340}],234:[function(xt,Ct,_t){Ct.exports=xt=>xt[1]},{}],235:[function(xt,Ct,_t){const $t=xt("../vec3"),Vn=xt("./closestPoint");Ct.exports=(xt,Ct)=>{const _t=Vn(xt,Ct),Gn=$t.subtract($t.create(),Ct,_t);return $t.length(Gn)}},{"../vec3":340,"./closestPoint":231}],236:[function(xt,Ct,_t){const $t=xt("../vec3");Ct.exports=(xt,Ct)=>!!$t.equals(xt[1],Ct[1])&&!!$t.equals(xt[0],Ct[0])},{"../vec3":340}],237:[function(xt,Ct,_t){const $t=xt("../vec3"),{solve2Linear:Vn}=xt("../utils"),{EPS:Gn}=xt("../constants"),or=xt("./fromPointAndDirection");Ct.exports=(xt,Ct,_t)=>{let lr=$t.cross($t.create(),Ct,_t),Fr=$t.length(lr);if(Fr<Gn)throw new Error("parallel planes do not intersect");Fr=1/Fr,lr=$t.scale(lr,lr,Fr);const Hr=Math.abs(lr[0]),xo=Math.abs(lr[1]),Eo=Math.abs(lr[2]);let Mo,Oo;return Hr>=xo&&Hr>=Eo?(Oo=Vn(Ct[1],Ct[2],_t[1],_t[2],Ct[3],_t[3]),Mo=$t.fromValues(0,Oo[0],Oo[1])):xo>=Hr&&xo>=Eo?(Oo=Vn(Ct[0],Ct[2],_t[0],_t[2],Ct[3],_t[3]),Mo=$t.fromValues(Oo[0],0,Oo[1])):(Oo=Vn(Ct[0],Ct[1],_t[0],_t[1],Ct[3],_t[3]),Mo=$t.fromValues(Oo[0],Oo[1],0)),or(xt,Mo,lr)}},{"../constants":212,"../utils":287,"../vec3":340,"./fromPointAndDirection":238}],238:[function(xt,Ct,_t){const $t=xt("../vec3");Ct.exports=(xt,Ct,_t)=>{const Vn=$t.normalize($t.create(),_t);return $t.copy(xt[0],Ct),$t.copy(xt[1],Vn),xt}},{"../vec3":340}],239:[function(xt,Ct,_t){const $t=xt("../vec3"),Vn=xt("./fromPointAndDirection");Ct.exports=(xt,Ct,_t)=>{const Gn=$t.subtract($t.create(),_t,Ct);return Vn(xt,Ct,Gn)}},{"../vec3":340,"./fromPointAndDirection":238}],240:[function(xt,Ct,_t){Ct.exports={clone:xt("./clone"),closestPoint:xt("./closestPoint"),copy:xt("./copy"),create:xt("./create"),direction:xt("./direction"),distanceToPoint:xt("./distanceToPoint"),equals:xt("./equals"),fromPlanes:xt("./fromPlanes"),fromPointAndDirection:xt("./fromPointAndDirection"),fromPoints:xt("./fromPoints"),intersectPointOfLineAndPlane:xt("./intersectPointOfLineAndPlane"),origin:xt("./origin"),reverse:xt("./reverse"),toString:xt("./toString"),transform:xt("./transform")}},{"./clone":230,"./closestPoint":231,"./copy":232,"./create":233,"./direction":234,"./distanceToPoint":235,"./equals":236,"./fromPlanes":237,"./fromPointAndDirection":238,"./fromPoints":239,"./intersectPointOfLineAndPlane":241,"./origin":242,"./reverse":243,"./toString":244,"./transform":245}],241:[function(xt,Ct,_t){const $t=xt("../vec3");Ct.exports=(xt,Ct)=>{const _t=Ct,Vn=Ct[3],Gn=xt[0],or=xt[1],lr=(Vn-$t.dot(_t,Gn))/$t.dot(_t,or);return $t.add($t.create(),Gn,$t.scale($t.create(),or,lr))}},{"../vec3":340}],242:[function(xt,Ct,_t){Ct.exports=xt=>xt[0]},{}],243:[function(xt,Ct,_t){const $t=xt("../vec3"),Vn=xt("./fromPointAndDirection");Ct.exports=(xt,Ct)=>{const _t=$t.clone(Ct[0]),Gn=$t.negate($t.create(),Ct[1]);return Vn(xt,_t,Gn)}},{"../vec3":340,"./fromPointAndDirection":238}],244:[function(xt,Ct,_t){Ct.exports=xt=>{const Ct=xt[0],_t=xt[1];return`line3: point: (${Ct[0].toFixed(7)}, ${Ct[1].toFixed(7)}, ${Ct[2].toFixed(7)}) direction: (${_t[0].toFixed(7)}, ${_t[1].toFixed(7)}, ${_t[2].toFixed(7)})`}},{}],245:[function(xt,Ct,_t){const $t=xt("../vec3"),Vn=xt("./fromPointAndDirection");Ct.exports=(xt,Ct,_t)=>{const Gn=Ct[0],or=Ct[1],lr=$t.add($t.create(),Gn,or),Fr=$t.transform($t.create(),Gn,_t),Hr=$t.transform(lr,lr,_t),xo=$t.subtract(Hr,Hr,Fr);return Vn(xt,Fr,xo)}},{"../vec3":340,"./fromPointAndDirection":238}],246:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]+_t[0],xt[1]=Ct[1]+_t[1],xt[2]=Ct[2]+_t[2],xt[3]=Ct[3]+_t[3],xt[4]=Ct[4]+_t[4],xt[5]=Ct[5]+_t[5],xt[6]=Ct[6]+_t[6],xt[7]=Ct[7]+_t[7],xt[8]=Ct[8]+_t[8],xt[9]=Ct[9]+_t[9],xt[10]=Ct[10]+_t[10],xt[11]=Ct[11]+_t[11],xt[12]=Ct[12]+_t[12],xt[13]=Ct[13]+_t[13],xt[14]=Ct[14]+_t[14],xt[15]=Ct[15]+_t[15],xt)},{}],247:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=xt=>{const Ct=$t();return Ct[0]=xt[0],Ct[1]=xt[1],Ct[2]=xt[2],Ct[3]=xt[3],Ct[4]=xt[4],Ct[5]=xt[5],Ct[6]=xt[6],Ct[7]=xt[7],Ct[8]=xt[8],Ct[9]=xt[9],Ct[10]=xt[10],Ct[11]=xt[11],Ct[12]=xt[12],Ct[13]=xt[13],Ct[14]=xt[14],Ct[15]=xt[15],Ct}},{"./create":249}],248:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Ct[0],xt[1]=Ct[1],xt[2]=Ct[2],xt[3]=Ct[3],xt[4]=Ct[4],xt[5]=Ct[5],xt[6]=Ct[6],xt[7]=Ct[7],xt[8]=Ct[8],xt[9]=Ct[9],xt[10]=Ct[10],xt[11]=Ct[11],xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15],xt)},{}],249:[function(xt,Ct,_t){Ct.exports=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},{}],250:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>xt[0]===Ct[0]&&xt[1]===Ct[1]&&xt[2]===Ct[2]&&xt[3]===Ct[3]&&xt[4]===Ct[4]&&xt[5]===Ct[5]&&xt[6]===Ct[6]&&xt[7]===Ct[7]&&xt[8]===Ct[8]&&xt[9]===Ct[9]&&xt[10]===Ct[10]&&xt[11]===Ct[11]&&xt[12]===Ct[12]&&xt[13]===Ct[13]&&xt[14]===Ct[14]&&xt[15]===Ct[15]},{}],251:[function(xt,Ct,_t){const{EPS:$t}=xt("../constants"),{sin:Vn,cos:Gn}=xt("../utils/trigonometry"),or=xt("./identity");Ct.exports=(xt,Ct,_t)=>{let[lr,Fr,Hr]=_t;const xo=lr*lr+Fr*Fr+Hr*Hr;if(Math.abs(xo)<$t)return or(xt);const Eo=1/Math.sqrt(xo);lr*=Eo,Fr*=Eo,Hr*=Eo;const Mo=Vn(Ct),Oo=Gn(Ct),Ro=1-Oo;return xt[0]=lr*lr*Ro+Oo,xt[1]=Fr*lr*Ro+Hr*Mo,xt[2]=Hr*lr*Ro-Fr*Mo,xt[3]=0,xt[4]=lr*Fr*Ro-Hr*Mo,xt[5]=Fr*Fr*Ro+Oo,xt[6]=Hr*Fr*Ro+lr*Mo,xt[7]=0,xt[8]=lr*Hr*Ro+Fr*Mo,xt[9]=Fr*Hr*Ro-lr*Mo,xt[10]=Hr*Hr*Ro+Oo,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{"../constants":212,"../utils/trigonometry":291,"./identity":260}],252:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Ct[0],xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=Ct[1],xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=Ct[2],xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt)},{}],253:[function(xt,Ct,_t){const{sin:$t,cos:Vn}=xt("../utils/trigonometry");Ct.exports=(xt,Ct,_t,Gn)=>{const or=$t(Ct),lr=Vn(Ct),Fr=$t(_t),Hr=Vn(_t),xo=$t(Gn),Eo=Vn(Gn);return xt[0]=Hr*lr,xt[1]=Hr*or,xt[2]=-Fr,xt[3]=0,xt[4]=xo*Fr*lr-Eo*or,xt[5]=Eo*lr+xo*Fr*or,xt[6]=xo*Hr,xt[7]=0,xt[8]=xo*or+Eo*Fr*lr,xt[9]=Eo*Fr*or-xo*lr,xt[10]=Eo*Hr,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{"../utils/trigonometry":291}],254:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=1,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=1,xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=1,xt[11]=0,xt[12]=Ct[0],xt[13]=Ct[1],xt[14]=Ct[2],xt[15]=1,xt)},{}],255:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=(xt,Ct,_t,Vn,Gn,or,lr,Fr,Hr,xo,Eo,Mo,Oo,Ro,Io,Bo)=>{const zo=$t();return zo[0]=xt,zo[1]=Ct,zo[2]=_t,zo[3]=Vn,zo[4]=Gn,zo[5]=or,zo[6]=lr,zo[7]=Fr,zo[8]=Hr,zo[9]=xo,zo[10]=Eo,zo[11]=Mo,zo[12]=Oo,zo[13]=Ro,zo[14]=Io,zo[15]=Bo,zo}},{"./create":249}],256:[function(xt,Ct,_t){const $t=xt("../vec3"),Vn=xt("./fromRotation");Ct.exports=(xt,Ct,_t)=>{const Gn=$t.normalize($t.create(),Ct),or=$t.normalize($t.create(),_t),lr=$t.cross($t.create(),or,Gn),Fr=$t.dot(or,Gn);if(-1===Fr)return Vn(xt,Math.PI,$t.orthogonal(lr,Gn));const Hr=1/(1+Fr);return xt[0]=lr[0]*lr[0]*Hr+Fr,xt[1]=lr[1]*lr[0]*Hr-lr[2],xt[2]=lr[2]*lr[0]*Hr+lr[1],xt[3]=0,xt[4]=lr[0]*lr[1]*Hr+lr[2],xt[5]=lr[1]*lr[1]*Hr+Fr,xt[6]=lr[2]*lr[1]*Hr-lr[0],xt[7]=0,xt[8]=lr[0]*lr[2]*Hr-lr[1],xt[9]=lr[1]*lr[2]*Hr+lr[0],xt[10]=lr[2]*lr[2]*Hr+Fr,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{"../vec3":340,"./fromRotation":251}],257:[function(xt,Ct,_t){const{sin:$t,cos:Vn}=xt("../utils/trigonometry");Ct.exports=(xt,Ct)=>{const _t=$t(Ct),Gn=Vn(Ct);return xt[0]=1,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=Gn,xt[6]=_t,xt[7]=0,xt[8]=0,xt[9]=-_t,xt[10]=Gn,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{"../utils/trigonometry":291}],258:[function(xt,Ct,_t){const{sin:$t,cos:Vn}=xt("../utils/trigonometry");Ct.exports=(xt,Ct)=>{const _t=$t(Ct),Gn=Vn(Ct);return xt[0]=Gn,xt[1]=0,xt[2]=-_t,xt[3]=0,xt[4]=0,xt[5]=1,xt[6]=0,xt[7]=0,xt[8]=_t,xt[9]=0,xt[10]=Gn,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{"../utils/trigonometry":291}],259:[function(xt,Ct,_t){const{sin:$t,cos:Vn}=xt("../utils/trigonometry");Ct.exports=(xt,Ct)=>{const _t=$t(Ct),Gn=Vn(Ct);return xt[0]=Gn,xt[1]=_t,xt[2]=0,xt[3]=0,xt[4]=-_t,xt[5]=Gn,xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=1,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{"../utils/trigonometry":291}],260:[function(xt,Ct,_t){Ct.exports=xt=>(xt[0]=1,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=1,xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=1,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt)},{}],261:[function(xt,Ct,_t){Ct.exports={add:xt("./add"),clone:xt("./clone"),copy:xt("./copy"),create:xt("./create"),invert:xt("./invert"),equals:xt("./equals"),fromRotation:xt("./fromRotation"),fromScaling:xt("./fromScaling"),fromTaitBryanRotation:xt("./fromTaitBryanRotation"),fromTranslation:xt("./fromTranslation"),fromValues:xt("./fromValues"),fromVectorRotation:xt("./fromVectorRotation"),fromXRotation:xt("./fromXRotation"),fromYRotation:xt("./fromYRotation"),fromZRotation:xt("./fromZRotation"),identity:xt("./identity"),isIdentity:xt("./isIdentity"),isOnlyTransformScale:xt("./isOnlyTransformScale"),isMirroring:xt("./isMirroring"),mirrorByPlane:xt("./mirrorByPlane"),multiply:xt("./multiply"),rotate:xt("./rotate"),rotateX:xt("./rotateX"),rotateY:xt("./rotateY"),rotateZ:xt("./rotateZ"),scale:xt("./scale"),subtract:xt("./subtract"),toString:xt("./toString"),translate:xt("./translate")}},{"./add":246,"./clone":247,"./copy":248,"./create":249,"./equals":250,"./fromRotation":251,"./fromScaling":252,"./fromTaitBryanRotation":253,"./fromTranslation":254,"./fromValues":255,"./fromVectorRotation":256,"./fromXRotation":257,"./fromYRotation":258,"./fromZRotation":259,"./identity":260,"./invert":262,"./isIdentity":263,"./isMirroring":264,"./isOnlyTransformScale":265,"./mirrorByPlane":266,"./multiply":267,"./rotate":268,"./rotateX":269,"./rotateY":270,"./rotateZ":271,"./scale":272,"./subtract":273,"./toString":274,"./translate":275}],262:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{const _t=Ct[0],$t=Ct[1],Vn=Ct[2],Gn=Ct[3],or=Ct[4],lr=Ct[5],Fr=Ct[6],Hr=Ct[7],xo=Ct[8],Eo=Ct[9],Mo=Ct[10],Oo=Ct[11],Ro=Ct[12],Io=Ct[13],Bo=Ct[14],zo=Ct[15],Ho=_t*lr-$t*or,Qo=_t*Fr-Vn*or,pi=_t*Hr-Gn*or,gi=$t*Fr-Vn*lr,es=$t*Hr-Gn*lr,ts=Vn*Hr-Gn*Fr,ns=xo*Io-Eo*Ro,rs=xo*Bo-Mo*Ro,os=xo*zo-Oo*Ro,is=Eo*Bo-Mo*Io,ss=Eo*zo-Oo*Io,as=Mo*zo-Oo*Bo;let ls=Ho*as-Qo*ss+pi*is+gi*os-es*rs+ts*ns;return ls?(ls=1/ls,xt[0]=(lr*as-Fr*ss+Hr*is)*ls,xt[1]=(Vn*ss-$t*as-Gn*is)*ls,xt[2]=(Io*ts-Bo*es+zo*gi)*ls,xt[3]=(Mo*es-Eo*ts-Oo*gi)*ls,xt[4]=(Fr*os-or*as-Hr*rs)*ls,xt[5]=(_t*as-Vn*os+Gn*rs)*ls,xt[6]=(Bo*pi-Ro*ts-zo*Qo)*ls,xt[7]=(xo*ts-Mo*pi+Oo*Qo)*ls,xt[8]=(or*ss-lr*os+Hr*ns)*ls,xt[9]=($t*os-_t*ss-Gn*ns)*ls,xt[10]=(Ro*es-Io*pi+zo*Ho)*ls,xt[11]=(Eo*pi-xo*es-Oo*Ho)*ls,xt[12]=(lr*rs-or*is-Fr*ns)*ls,xt[13]=(_t*is-$t*rs+Vn*ns)*ls,xt[14]=(Io*Qo-Ro*gi-Bo*Ho)*ls,xt[15]=(xo*gi-Eo*Qo+Mo*Ho)*ls,xt):null}},{}],263:[function(xt,Ct,_t){Ct.exports=xt=>1===xt[0]&&0===xt[1]&&0===xt[2]&&0===xt[3]&&0===xt[4]&&1===xt[5]&&0===xt[6]&&0===xt[7]&&0===xt[8]&&0===xt[9]&&1===xt[10]&&0===xt[11]&&0===xt[12]&&0===xt[13]&&0===xt[14]&&1===xt[15]},{}],264:[function(xt,Ct,_t){Ct.exports=xt=>{const Ct=xt[4]*xt[9]-xt[8]*xt[5],_t=xt[8]*xt[1]-xt[0]*xt[9],$t=xt[0]*xt[5]-xt[4]*xt[1];return Ct*xt[2]+_t*xt[6]+$t*xt[10]<0}},{}],265:[function(xt,Ct,_t){const isZero=xt=>Math.abs(xt)<Number.EPSILON;Ct.exports=xt=>isZero(xt[1])&&isZero(xt[2])&&isZero(xt[3])&&isZero(xt[4])&&isZero(xt[6])&&isZero(xt[7])&&isZero(xt[8])&&isZero(xt[9])&&isZero(xt[11])&&1===xt[15]},{}],266:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{const[_t,$t,Vn,Gn]=Ct;return xt[0]=1-2*_t*_t,xt[1]=-2*$t*_t,xt[2]=-2*Vn*_t,xt[3]=0,xt[4]=-2*_t*$t,xt[5]=1-2*$t*$t,xt[6]=-2*Vn*$t,xt[7]=0,xt[8]=-2*_t*Vn,xt[9]=-2*$t*Vn,xt[10]=1-2*Vn*Vn,xt[11]=0,xt[12]=2*_t*Gn,xt[13]=2*$t*Gn,xt[14]=2*Vn*Gn,xt[15]=1,xt}},{}],267:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{const $t=Ct[0],Vn=Ct[1],Gn=Ct[2],or=Ct[3],lr=Ct[4],Fr=Ct[5],Hr=Ct[6],xo=Ct[7],Eo=Ct[8],Mo=Ct[9],Oo=Ct[10],Ro=Ct[11],Io=Ct[12],Bo=Ct[13],zo=Ct[14],Ho=Ct[15];let Qo=_t[0],pi=_t[1],gi=_t[2],es=_t[3];return xt[0]=Qo*$t+pi*lr+gi*Eo+es*Io,xt[1]=Qo*Vn+pi*Fr+gi*Mo+es*Bo,xt[2]=Qo*Gn+pi*Hr+gi*Oo+es*zo,xt[3]=Qo*or+pi*xo+gi*Ro+es*Ho,Qo=_t[4],pi=_t[5],gi=_t[6],es=_t[7],xt[4]=Qo*$t+pi*lr+gi*Eo+es*Io,xt[5]=Qo*Vn+pi*Fr+gi*Mo+es*Bo,xt[6]=Qo*Gn+pi*Hr+gi*Oo+es*zo,xt[7]=Qo*or+pi*xo+gi*Ro+es*Ho,Qo=_t[8],pi=_t[9],gi=_t[10],es=_t[11],xt[8]=Qo*$t+pi*lr+gi*Eo+es*Io,xt[9]=Qo*Vn+pi*Fr+gi*Mo+es*Bo,xt[10]=Qo*Gn+pi*Hr+gi*Oo+es*zo,xt[11]=Qo*or+pi*xo+gi*Ro+es*Ho,Qo=_t[12],pi=_t[13],gi=_t[14],es=_t[15],xt[12]=Qo*$t+pi*lr+gi*Eo+es*Io,xt[13]=Qo*Vn+pi*Fr+gi*Mo+es*Bo,xt[14]=Qo*Gn+pi*Hr+gi*Oo+es*zo,xt[15]=Qo*or+pi*xo+gi*Ro+es*Ho,xt}},{}],268:[function(xt,Ct,_t){const{EPS:$t}=xt("../constants"),{sin:Vn,cos:Gn}=xt("../utils/trigonometry"),or=xt("./copy");Ct.exports=(xt,Ct,_t,lr)=>{let[Fr,Hr,xo]=lr;const Eo=Fr*Fr+Hr*Hr+xo*xo;if(Math.abs(Eo)<$t)return or(xt,Ct);const Mo=1/Math.sqrt(Eo);Fr*=Mo,Hr*=Mo,xo*=Mo;const Oo=Vn(_t),Ro=Gn(_t),Io=1-Ro,Bo=Ct[0],zo=Ct[1],Ho=Ct[2],Qo=Ct[3],pi=Ct[4],gi=Ct[5],es=Ct[6],ts=Ct[7],ns=Ct[8],rs=Ct[9],os=Ct[10],is=Ct[11],ss=Fr*Fr*Io+Ro,as=Hr*Fr*Io+xo*Oo,ls=xo*Fr*Io-Hr*Oo,cs=Fr*Hr*Io-xo*Oo,us=Hr*Hr*Io+Ro,fs=xo*Hr*Io+Fr*Oo,hs=Fr*xo*Io+Hr*Oo,ps=Hr*xo*Io-Fr*Oo,ds=xo*xo*Io+Ro;return xt[0]=Bo*ss+pi*as+ns*ls,xt[1]=zo*ss+gi*as+rs*ls,xt[2]=Ho*ss+es*as+os*ls,xt[3]=Qo*ss+ts*as+is*ls,xt[4]=Bo*cs+pi*us+ns*fs,xt[5]=zo*cs+gi*us+rs*fs,xt[6]=Ho*cs+es*us+os*fs,xt[7]=Qo*cs+ts*us+is*fs,xt[8]=Bo*hs+pi*ps+ns*ds,xt[9]=zo*hs+gi*ps+rs*ds,xt[10]=Ho*hs+es*ps+os*ds,xt[11]=Qo*hs+ts*ps+is*ds,Ct!==xt&&(xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15]),xt}},{"../constants":212,"../utils/trigonometry":291,"./copy":248}],269:[function(xt,Ct,_t){const{sin:$t,cos:Vn}=xt("../utils/trigonometry");Ct.exports=(xt,Ct,_t)=>{const Gn=$t(_t),or=Vn(_t),lr=Ct[4],Fr=Ct[5],Hr=Ct[6],xo=Ct[7],Eo=Ct[8],Mo=Ct[9],Oo=Ct[10],Ro=Ct[11];return Ct!==xt&&(xt[0]=Ct[0],xt[1]=Ct[1],xt[2]=Ct[2],xt[3]=Ct[3],xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15]),xt[4]=lr*or+Eo*Gn,xt[5]=Fr*or+Mo*Gn,xt[6]=Hr*or+Oo*Gn,xt[7]=xo*or+Ro*Gn,xt[8]=Eo*or-lr*Gn,xt[9]=Mo*or-Fr*Gn,xt[10]=Oo*or-Hr*Gn,xt[11]=Ro*or-xo*Gn,xt}},{"../utils/trigonometry":291}],270:[function(xt,Ct,_t){const{sin:$t,cos:Vn}=xt("../utils/trigonometry");Ct.exports=(xt,Ct,_t)=>{const Gn=$t(_t),or=Vn(_t),lr=Ct[0],Fr=Ct[1],Hr=Ct[2],xo=Ct[3],Eo=Ct[8],Mo=Ct[9],Oo=Ct[10],Ro=Ct[11];return Ct!==xt&&(xt[4]=Ct[4],xt[5]=Ct[5],xt[6]=Ct[6],xt[7]=Ct[7],xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15]),xt[0]=lr*or-Eo*Gn,xt[1]=Fr*or-Mo*Gn,xt[2]=Hr*or-Oo*Gn,xt[3]=xo*or-Ro*Gn,xt[8]=lr*Gn+Eo*or,xt[9]=Fr*Gn+Mo*or,xt[10]=Hr*Gn+Oo*or,xt[11]=xo*Gn+Ro*or,xt}},{"../utils/trigonometry":291}],271:[function(xt,Ct,_t){const{sin:$t,cos:Vn}=xt("../utils/trigonometry");Ct.exports=(xt,Ct,_t)=>{const Gn=$t(_t),or=Vn(_t),lr=Ct[0],Fr=Ct[1],Hr=Ct[2],xo=Ct[3],Eo=Ct[4],Mo=Ct[5],Oo=Ct[6],Ro=Ct[7];return Ct!==xt&&(xt[8]=Ct[8],xt[9]=Ct[9],xt[10]=Ct[10],xt[11]=Ct[11],xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15]),xt[0]=lr*or+Eo*Gn,xt[1]=Fr*or+Mo*Gn,xt[2]=Hr*or+Oo*Gn,xt[3]=xo*or+Ro*Gn,xt[4]=Eo*or-lr*Gn,xt[5]=Mo*or-Fr*Gn,xt[6]=Oo*or-Hr*Gn,xt[7]=Ro*or-xo*Gn,xt}},{"../utils/trigonometry":291}],272:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{const $t=_t[0],Vn=_t[1],Gn=_t[2];return xt[0]=Ct[0]*$t,xt[1]=Ct[1]*$t,xt[2]=Ct[2]*$t,xt[3]=Ct[3]*$t,xt[4]=Ct[4]*Vn,xt[5]=Ct[5]*Vn,xt[6]=Ct[6]*Vn,xt[7]=Ct[7]*Vn,xt[8]=Ct[8]*Gn,xt[9]=Ct[9]*Gn,xt[10]=Ct[10]*Gn,xt[11]=Ct[11]*Gn,xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15],xt}},{}],273:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]-_t[0],xt[1]=Ct[1]-_t[1],xt[2]=Ct[2]-_t[2],xt[3]=Ct[3]-_t[3],xt[4]=Ct[4]-_t[4],xt[5]=Ct[5]-_t[5],xt[6]=Ct[6]-_t[6],xt[7]=Ct[7]-_t[7],xt[8]=Ct[8]-_t[8],xt[9]=Ct[9]-_t[9],xt[10]=Ct[10]-_t[10],xt[11]=Ct[11]-_t[11],xt[12]=Ct[12]-_t[12],xt[13]=Ct[13]-_t[13],xt[14]=Ct[14]-_t[14],xt[15]=Ct[15]-_t[15],xt)},{}],274:[function(xt,Ct,_t){Ct.exports=xt=>xt.map((xt=>xt.toFixed(7))).toString()},{}],275:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{const $t=_t[0],Vn=_t[1],Gn=_t[2];let or,lr,Fr,Hr,xo,Eo,Mo,Oo,Ro,Io,Bo,zo;return Ct===xt?(xt[12]=Ct[0]*$t+Ct[4]*Vn+Ct[8]*Gn+Ct[12],xt[13]=Ct[1]*$t+Ct[5]*Vn+Ct[9]*Gn+Ct[13],xt[14]=Ct[2]*$t+Ct[6]*Vn+Ct[10]*Gn+Ct[14],xt[15]=Ct[3]*$t+Ct[7]*Vn+Ct[11]*Gn+Ct[15]):(or=Ct[0],lr=Ct[1],Fr=Ct[2],Hr=Ct[3],xo=Ct[4],Eo=Ct[5],Mo=Ct[6],Oo=Ct[7],Ro=Ct[8],Io=Ct[9],Bo=Ct[10],zo=Ct[11],xt[0]=or,xt[1]=lr,xt[2]=Fr,xt[3]=Hr,xt[4]=xo,xt[5]=Eo,xt[6]=Mo,xt[7]=Oo,xt[8]=Ro,xt[9]=Io,xt[10]=Bo,xt[11]=zo,xt[12]=or*$t+xo*Vn+Ro*Gn+Ct[12],xt[13]=lr*$t+Eo*Vn+Io*Gn+Ct[13],xt[14]=Fr*$t+Mo*Vn+Bo*Gn+Ct[14],xt[15]=Hr*$t+Oo*Vn+zo*Gn+Ct[15]),xt}},{}],276:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=-Ct[0],xt[1]=-Ct[1],xt[2]=-Ct[2],xt[3]=-Ct[3],xt)},{}],277:[function(xt,Ct,_t){const $t=xt("../vec3"),Vn=xt("./fromNormalAndPoint");Ct.exports=(xt,...Ct)=>{xt[0]=0,xt[1]=0,xt[2]=0,xt[3]=0;const _t=Ct.length;Ct.forEach((Ct=>{$t.add(xt,xt,Ct)})),$t.scale(xt,xt,1/_t);let Gn=0,or=0,lr=0,Fr=0,Hr=0,xo=0;const Eo=$t.create();Ct.forEach((Ct=>{$t.subtract(Eo,Ct,xt),Gn+=Eo[0]*Eo[0],or+=Eo[0]*Eo[1],lr+=Eo[0]*Eo[2],Fr+=Eo[1]*Eo[1],Hr+=Eo[1]*Eo[2],xo+=Eo[2]*Eo[2]})),Gn/=_t,or/=_t,lr/=_t,Fr/=_t,Hr/=_t,xo/=_t,Eo[0]=0,Eo[1]=0,Eo[2]=0;const Mo=$t.create();let Oo=Fr*xo-Hr*Hr;Mo[0]=Oo,Mo[1]=lr*Hr-or*xo,Mo[2]=or*Hr-lr*Fr;let Ro=Oo*Oo;return $t.add(Eo,Eo,$t.scale(Mo,Mo,Ro)),Oo=Gn*xo-lr*lr,Mo[0]=lr*Hr-or*xo,Mo[1]=Oo,Mo[2]=or*lr-Hr*Gn,Ro=Oo*Oo,$t.dot(Eo,Mo)<0&&(Ro=-Ro),$t.add(Eo,Eo,$t.scale(Mo,Mo,Ro)),Oo=Gn*Fr-or*or,Mo[0]=or*Hr-lr*Fr,Mo[1]=or*lr-Hr*Gn,Mo[2]=Oo,Ro=Oo*Oo,$t.dot(Eo,Mo)<0&&(Ro=-Ro),$t.add(Eo,Eo,$t.scale(Mo,Mo,Ro)),Vn(xt,Eo,xt)}},{"../vec3":340,"./fromNormalAndPoint":278}],278:[function(xt,Ct,_t){const $t=xt("../vec3");Ct.exports=(xt,Ct,_t)=>{const Vn=$t.normalize($t.create(),Ct),Gn=$t.dot(_t,Vn);return xt[0]=Vn[0],xt[1]=Vn[1],xt[2]=Vn[2],xt[3]=Gn,xt}},{"../vec3":340}],279:[function(xt,Ct,_t){const $t=xt("../vec3");Ct.exports=(xt,...Ct)=>{const _t=Ct.length,Vn=$t.create(),Gn=$t.create(),v=xt=>{const or=Ct[xt],lr=Ct[(xt+1)%_t],Fr=Ct[(xt+2)%_t];return $t.subtract(Vn,lr,or),$t.subtract(Gn,Fr,or),$t.cross(Vn,Vn,Gn),$t.normalize(Vn,Vn),Vn};return xt[0]=0,xt[1]=0,xt[2]=0,3===_t?$t.copy(xt,v(0)):(Ct.forEach(((Ct,_t)=>{$t.add(xt,xt,v(_t))})),$t.normalize(xt,xt)),xt[3]=$t.dot(xt,Ct[0]),xt}},{"../vec3":340}],280:[function(xt,Ct,_t){const{EPS:$t}=xt("../constants"),Vn=xt("../vec3");Ct.exports=(xt,Ct,_t,Gn)=>{let or=Vn.subtract(Vn.create(),_t,Ct),lr=Vn.subtract(Vn.create(),Gn,Ct);Vn.length(or)<$t&&(or=Vn.orthogonal(or,lr)),Vn.length(lr)<$t&&(lr=Vn.orthogonal(lr,or));let Fr=Vn.cross(Vn.create(),or,lr);Vn.length(Fr)<$t&&(lr=Vn.orthogonal(lr,or),Fr=Vn.cross(Fr,or,lr)),Fr=Vn.normalize(Fr,Fr);const Hr=Vn.dot(Fr,Ct);return xt[0]=Fr[0],xt[1]=Fr[1],xt[2]=Fr[2],xt[3]=Hr,xt}},{"../constants":212,"../vec3":340}],281:[function(xt,Ct,_t){Ct.exports={clone:xt("../vec4/clone"),copy:xt("../vec4/copy"),create:xt("../vec4/create"),equals:xt("../vec4/equals"),flip:xt("./flip"),fromNormalAndPoint:xt("./fromNormalAndPoint"),fromValues:xt("../vec4/fromValues"),fromNoisyPoints:xt("./fromNoisyPoints"),fromPoints:xt("./fromPoints"),fromPointsRandom:xt("./fromPointsRandom"),projectionOfPoint:xt("./projectionOfPoint"),signedDistanceToPoint:xt("./signedDistanceToPoint"),toString:xt("../vec4/toString"),transform:xt("./transform")}},{"../vec4/clone":359,"../vec4/copy":360,"../vec4/create":361,"../vec4/equals":363,"../vec4/fromValues":365,"../vec4/toString":367,"./flip":276,"./fromNoisyPoints":277,"./fromNormalAndPoint":278,"./fromPoints":279,"./fromPointsRandom":280,"./projectionOfPoint":282,"./signedDistanceToPoint":283,"./transform":284}],282:[function(xt,Ct,_t){const $t=xt("../vec3");Ct.exports=(xt,Ct)=>{const _t=Ct[0]*xt[0]+Ct[1]*xt[1]+Ct[2]*xt[2]-xt[3],Vn=Ct[0]-_t*xt[0],Gn=Ct[1]-_t*xt[1],or=Ct[2]-_t*xt[2];return $t.fromValues(Vn,Gn,or)}},{"../vec3":340}],283:[function(xt,Ct,_t){const $t=xt("../vec3");Ct.exports=(xt,Ct)=>$t.dot(xt,Ct)-xt[3]},{"../vec3":340}],284:[function(xt,Ct,_t){const $t=xt("../mat4"),Vn=xt("../vec3"),Gn=xt("./fromPoints"),or=xt("./flip");Ct.exports=(xt,Ct,_t)=>{const lr=$t.isMirroring(_t),Fr=Vn.orthogonal(Vn.create(),Ct),Hr=Vn.cross(Fr,Ct,Fr),xo=Vn.cross(Vn.create(),Ct,Hr);let Eo=Vn.fromScalar(Vn.create(),Ct[3]);Vn.multiply(Eo,Eo,Ct);let Mo=Vn.add(Vn.create(),Eo,Hr),Oo=Vn.add(Vn.create(),Eo,xo);return Eo=Vn.transform(Eo,Eo,_t),Mo=Vn.transform(Mo,Mo,_t),Oo=Vn.transform(Oo,Oo,_t),Gn(xt,Eo,Mo,Oo),lr&&or(xt,xt),xt}},{"../mat4":261,"../vec3":340,"./flip":276,"./fromPoints":279}],285:[function(xt,Ct,_t){const{NEPS:$t}=xt("../constants");Ct.exports=(xt,Ct)=>Math.abs(xt[0]-Ct[0])<=$t&&Math.abs(xt[1]-Ct[1])<=$t&&Math.abs(xt[2]-Ct[2])<=$t},{"../constants":212}],286:[function(xt,Ct,_t){Ct.exports=xt=>{let Ct=0;for(let _t=0;_t<xt.length;_t++){const $t=(_t+1)%xt.length;Ct+=xt[_t][0]*xt[$t][1],Ct-=xt[$t][0]*xt[_t][1]}return Ct/2}},{}],287:[function(xt,Ct,_t){Ct.exports={aboutEqualNormals:xt("./aboutEqualNormals"),area:xt("./area"),cos:xt("./trigonometry").cos,interpolateBetween2DPointsForY:xt("./interpolateBetween2DPointsForY"),intersect:xt("./intersect"),sin:xt("./trigonometry").sin,solve2Linear:xt("./solve2Linear")}},{"./aboutEqualNormals":285,"./area":286,"./interpolateBetween2DPointsForY":288,"./intersect":289,"./solve2Linear":290,"./trigonometry":291}],288:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{let $t,Vn=_t-xt[1],Gn=Ct[1]-xt[1];return Gn<0&&(Vn=-Vn,Gn=-Gn),$t=Vn<=0?0:Vn>=Gn?1:Gn<1e-10?.5:Vn/Gn,xt[0]+$t*(Ct[0]-xt[0])}},{}],289:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t,$t)=>{if(xt[0]===Ct[0]&&xt[1]===Ct[1]||_t[0]===$t[0]&&_t[1]===$t[1])return;const Vn=($t[1]-_t[1])*(Ct[0]-xt[0])-($t[0]-_t[0])*(Ct[1]-xt[1]);if(Math.abs(Vn)<Number.MIN_VALUE)return;const Gn=(($t[0]-_t[0])*(xt[1]-_t[1])-($t[1]-_t[1])*(xt[0]-_t[0]))/Vn,or=((Ct[0]-xt[0])*(xt[1]-_t[1])-(Ct[1]-xt[1])*(xt[0]-_t[0]))/Vn;return Gn<0||Gn>1||or<0||or>1?void 0:[xt[0]+Gn*(Ct[0]-xt[0]),xt[1]+Gn*(Ct[1]-xt[1])]}},{}],290:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t,$t,Vn,Gn)=>{const or=1/(xt*$t-Ct*_t);let lr=Vn*$t-Ct*Gn,Fr=-Vn*_t+xt*Gn;return[lr*=or,Fr*=or]}},{}],291:[function(xt,Ct,_t){const{NEPS:$t}=xt("../constants"),rezero=xt=>Math.abs(xt)<$t?0:xt;Ct.exports={sin:xt=>rezero(Math.sin(xt)),cos:xt=>rezero(Math.cos(xt))}},{"../constants":212}],292:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Math.abs(Ct[0]),xt[1]=Math.abs(Ct[1]),xt)},{}],293:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]+_t[0],xt[1]=Ct[1]+_t[1],xt)},{}],294:[function(xt,Ct,_t){Ct.exports=xt("./angleRadians")},{"./angleRadians":296}],295:[function(xt,Ct,_t){const $t=xt("./angleRadians");Ct.exports=xt=>57.29577951308232*$t(xt)},{"./angleRadians":296}],296:[function(xt,Ct,_t){Ct.exports=xt=>Math.atan2(xt[1],xt[0])},{}],297:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=xt=>{const Ct=$t();return Ct[0]=xt[0],Ct[1]=xt[1],Ct}},{"./create":299}],298:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Ct[0],xt[1]=Ct[1],xt)},{}],299:[function(xt,Ct,_t){Ct.exports=()=>[0,0]},{}],300:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=0,xt[1]=0,xt[2]=Ct[0]*_t[1]-Ct[1]*_t[0],xt)},{}],301:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{const _t=Ct[0]-xt[0],$t=Ct[1]-xt[1];return Math.sqrt(_t*_t+$t*$t)}},{}],302:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]/_t[0],xt[1]=Ct[1]/_t[1],xt)},{}],303:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>xt[0]*Ct[0]+xt[1]*Ct[1]},{}],304:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>xt[0]===Ct[0]&&xt[1]===Ct[1]},{}],305:[function(xt,Ct,_t){const $t=xt("./fromAngleRadians");Ct.exports=(xt,Ct)=>$t(xt,.017453292519943295*Ct)},{"./fromAngleRadians":306}],306:[function(xt,Ct,_t){const{sin:$t,cos:Vn}=xt("../utils/trigonometry");Ct.exports=(xt,Ct)=>(xt[0]=Vn(Ct),xt[1]=$t(Ct),xt)},{"../utils/trigonometry":291}],307:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Ct,xt[1]=Ct,xt)},{}],308:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=(xt,Ct)=>{const _t=$t();return _t[0]=xt,_t[1]=Ct,_t}},{"./create":299}],309:[function(xt,Ct,_t){Ct.exports={abs:xt("./abs"),add:xt("./add"),angle:xt("./angle"),angleDegrees:xt("./angleDegrees"),angleRadians:xt("./angleRadians"),clone:xt("./clone"),copy:xt("./copy"),create:xt("./create"),cross:xt("./cross"),distance:xt("./distance"),divide:xt("./divide"),dot:xt("./dot"),equals:xt("./equals"),fromAngleDegrees:xt("./fromAngleDegrees"),fromAngleRadians:xt("./fromAngleRadians"),fromScalar:xt("./fromScalar"),fromValues:xt("./fromValues"),length:xt("./length"),lerp:xt("./lerp"),max:xt("./max"),min:xt("./min"),multiply:xt("./multiply"),negate:xt("./negate"),normal:xt("./normal"),normalize:xt("./normalize"),rotate:xt("./rotate"),scale:xt("./scale"),snap:xt("./snap"),squaredDistance:xt("./squaredDistance"),squaredLength:xt("./squaredLength"),subtract:xt("./subtract"),toString:xt("./toString"),transform:xt("./transform")}},{"./abs":292,"./add":293,"./angle":294,"./angleDegrees":295,"./angleRadians":296,"./clone":297,"./copy":298,"./create":299,"./cross":300,"./distance":301,"./divide":302,"./dot":303,"./equals":304,"./fromAngleDegrees":305,"./fromAngleRadians":306,"./fromScalar":307,"./fromValues":308,"./length":310,"./lerp":311,"./max":312,"./min":313,"./multiply":314,"./negate":315,"./normal":316,"./normalize":317,"./rotate":318,"./scale":319,"./snap":320,"./squaredDistance":321,"./squaredLength":322,"./subtract":323,"./toString":324,"./transform":325}],310:[function(xt,Ct,_t){Ct.exports=xt=>Math.sqrt(xt[0]*xt[0]+xt[1]*xt[1])},{}],311:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t,$t)=>{const Vn=Ct[0],Gn=Ct[1];return xt[0]=Vn+$t*(_t[0]-Vn),xt[1]=Gn+$t*(_t[1]-Gn),xt}},{}],312:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Math.max(Ct[0],_t[0]),xt[1]=Math.max(Ct[1],_t[1]),xt)},{}],313:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Math.min(Ct[0],_t[0]),xt[1]=Math.min(Ct[1],_t[1]),xt)},{}],314:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]*_t[0],xt[1]=Ct[1]*_t[1],xt)},{}],315:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=-Ct[0],xt[1]=-Ct[1],xt)},{}],316:[function(xt,Ct,_t){const{TAU:$t}=xt("../constants"),Vn=xt("./create"),Gn=xt("./rotate");Ct.exports=(xt,Ct)=>Gn(xt,Ct,Vn(),$t/4)},{"../constants":212,"./create":299,"./rotate":318}],317:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{const _t=Ct[0],$t=Ct[1];let Vn=_t*_t+$t*$t;return Vn>0&&(Vn=1/Math.sqrt(Vn)),xt[0]=_t*Vn,xt[1]=$t*Vn,xt}},{}],318:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t,$t)=>{const Vn=Ct[0]-_t[0],Gn=Ct[1]-_t[1],or=Math.cos($t),lr=Math.sin($t);return xt[0]=Vn*or-Gn*lr+_t[0],xt[1]=Vn*lr+Gn*or+_t[1],xt}},{}],319:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]*_t,xt[1]=Ct[1]*_t,xt)},{}],320:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Math.round(Ct[0]/_t)*_t+0,xt[1]=Math.round(Ct[1]/_t)*_t+0,xt)},{}],321:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{const _t=Ct[0]-xt[0],$t=Ct[1]-xt[1];return _t*_t+$t*$t}},{}],322:[function(xt,Ct,_t){Ct.exports=xt=>{const Ct=xt[0],_t=xt[1];return Ct*Ct+_t*_t}},{}],323:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]-_t[0],xt[1]=Ct[1]-_t[1],xt)},{}],324:[function(xt,Ct,_t){Ct.exports=xt=>`[${xt[0].toFixed(7)}, ${xt[1].toFixed(7)}]`},{}],325:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{const $t=Ct[0],Vn=Ct[1];return xt[0]=_t[0]*$t+_t[4]*Vn+_t[12],xt[1]=_t[1]*$t+_t[5]*Vn+_t[13],xt}},{}],326:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Math.abs(Ct[0]),xt[1]=Math.abs(Ct[1]),xt[2]=Math.abs(Ct[2]),xt)},{}],327:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]+_t[0],xt[1]=Ct[1]+_t[1],xt[2]=Ct[2]+_t[2],xt)},{}],328:[function(xt,Ct,_t){const $t=xt("./dot");Ct.exports=(xt,Ct)=>{const _t=xt[0],Vn=xt[1],Gn=xt[2],or=Ct[0],lr=Ct[1],Fr=Ct[2],Hr=Math.sqrt(_t*_t+Vn*Vn+Gn*Gn)*Math.sqrt(or*or+lr*lr+Fr*Fr),xo=Hr&&$t(xt,Ct)/Hr;return Math.acos(Math.min(Math.max(xo,-1),1))}},{"./dot":335}],329:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=xt=>{const Ct=$t();return Ct[0]=xt[0],Ct[1]=xt[1],Ct[2]=xt[2],Ct}},{"./create":331}],330:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Ct[0],xt[1]=Ct[1],xt[2]=Ct[2],xt)},{}],331:[function(xt,Ct,_t){Ct.exports=()=>[0,0,0]},{}],332:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{const $t=Ct[0],Vn=Ct[1],Gn=Ct[2],or=_t[0],lr=_t[1],Fr=_t[2];return xt[0]=Vn*Fr-Gn*lr,xt[1]=Gn*or-$t*Fr,xt[2]=$t*lr-Vn*or,xt}},{}],333:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{const _t=Ct[0]-xt[0],$t=Ct[1]-xt[1],Vn=Ct[2]-xt[2];return Math.sqrt(_t*_t+$t*$t+Vn*Vn)}},{}],334:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]/_t[0],xt[1]=Ct[1]/_t[1],xt[2]=Ct[2]/_t[2],xt)},{}],335:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>xt[0]*Ct[0]+xt[1]*Ct[1]+xt[2]*Ct[2]},{}],336:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>xt[0]===Ct[0]&&xt[1]===Ct[1]&&xt[2]===Ct[2]},{}],337:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Ct,xt[1]=Ct,xt[2]=Ct,xt)},{}],338:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=(xt,Ct,_t)=>{const Vn=$t();return Vn[0]=xt,Vn[1]=Ct,Vn[2]=_t,Vn}},{"./create":331}],339:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t=0)=>(xt[0]=Ct[0],xt[1]=Ct[1],xt[2]=_t,xt)},{}],340:[function(xt,Ct,_t){Ct.exports={abs:xt("./abs"),add:xt("./add"),angle:xt("./angle"),clone:xt("./clone"),copy:xt("./copy"),create:xt("./create"),cross:xt("./cross"),distance:xt("./distance"),divide:xt("./divide"),dot:xt("./dot"),equals:xt("./equals"),fromScalar:xt("./fromScalar"),fromValues:xt("./fromValues"),fromVec2:xt("./fromVec2"),length:xt("./length"),lerp:xt("./lerp"),max:xt("./max"),min:xt("./min"),multiply:xt("./multiply"),negate:xt("./negate"),normalize:xt("./normalize"),orthogonal:xt("./orthogonal"),rotateX:xt("./rotateX"),rotateY:xt("./rotateY"),rotateZ:xt("./rotateZ"),scale:xt("./scale"),snap:xt("./snap"),squaredDistance:xt("./squaredDistance"),squaredLength:xt("./squaredLength"),subtract:xt("./subtract"),toString:xt("./toString"),transform:xt("./transform")}},{"./abs":326,"./add":327,"./angle":328,"./clone":329,"./copy":330,"./create":331,"./cross":332,"./distance":333,"./divide":334,"./dot":335,"./equals":336,"./fromScalar":337,"./fromValues":338,"./fromVec2":339,"./length":341,"./lerp":342,"./max":343,"./min":344,"./multiply":345,"./negate":346,"./normalize":347,"./orthogonal":348,"./rotateX":349,"./rotateY":350,"./rotateZ":351,"./scale":352,"./snap":353,"./squaredDistance":354,"./squaredLength":355,"./subtract":356,"./toString":357,"./transform":358}],341:[function(xt,Ct,_t){Ct.exports=xt=>{const Ct=xt[0],_t=xt[1],$t=xt[2];return Math.sqrt(Ct*Ct+_t*_t+$t*$t)}},{}],342:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t,$t)=>(xt[0]=Ct[0]+$t*(_t[0]-Ct[0]),xt[1]=Ct[1]+$t*(_t[1]-Ct[1]),xt[2]=Ct[2]+$t*(_t[2]-Ct[2]),xt)},{}],343:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Math.max(Ct[0],_t[0]),xt[1]=Math.max(Ct[1],_t[1]),xt[2]=Math.max(Ct[2],_t[2]),xt)},{}],344:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Math.min(Ct[0],_t[0]),xt[1]=Math.min(Ct[1],_t[1]),xt[2]=Math.min(Ct[2],_t[2]),xt)},{}],345:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]*_t[0],xt[1]=Ct[1]*_t[1],xt[2]=Ct[2]*_t[2],xt)},{}],346:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=-Ct[0],xt[1]=-Ct[1],xt[2]=-Ct[2],xt)},{}],347:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{const _t=Ct[0],$t=Ct[1],Vn=Ct[2];let Gn=_t*_t+$t*$t+Vn*Vn;return Gn>0&&(Gn=1/Math.sqrt(Gn)),xt[0]=_t*Gn,xt[1]=$t*Gn,xt[2]=Vn*Gn,xt}},{}],348:[function(xt,Ct,_t){const $t=xt("./abs"),Vn=xt("./create"),Gn=xt("./cross");Ct.exports=(xt,Ct)=>{const _t=$t(Vn(),Ct),or=0+(_t[0]<_t[1]&&_t[0]<_t[2]),lr=0+(_t[1]<=_t[0]&&_t[1]<_t[2]),Fr=0+(_t[2]<=_t[0]&&_t[2]<=_t[1]);return Gn(xt,Ct,[or,lr,Fr])}},{"./abs":326,"./create":331,"./cross":332}],349:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t,$t)=>{const Vn=[],Gn=[];return Vn[0]=Ct[0]-_t[0],Vn[1]=Ct[1]-_t[1],Vn[2]=Ct[2]-_t[2],Gn[0]=Vn[0],Gn[1]=Vn[1]*Math.cos($t)-Vn[2]*Math.sin($t),Gn[2]=Vn[1]*Math.sin($t)+Vn[2]*Math.cos($t),xt[0]=Gn[0]+_t[0],xt[1]=Gn[1]+_t[1],xt[2]=Gn[2]+_t[2],xt}},{}],350:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t,$t)=>{const Vn=[],Gn=[];return Vn[0]=Ct[0]-_t[0],Vn[1]=Ct[1]-_t[1],Vn[2]=Ct[2]-_t[2],Gn[0]=Vn[2]*Math.sin($t)+Vn[0]*Math.cos($t),Gn[1]=Vn[1],Gn[2]=Vn[2]*Math.cos($t)-Vn[0]*Math.sin($t),xt[0]=Gn[0]+_t[0],xt[1]=Gn[1]+_t[1],xt[2]=Gn[2]+_t[2],xt}},{}],351:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t,$t)=>{const Vn=[],Gn=[];return Vn[0]=Ct[0]-_t[0],Vn[1]=Ct[1]-_t[1],Gn[0]=Vn[0]*Math.cos($t)-Vn[1]*Math.sin($t),Gn[1]=Vn[0]*Math.sin($t)+Vn[1]*Math.cos($t),xt[0]=Gn[0]+_t[0],xt[1]=Gn[1]+_t[1],xt[2]=Ct[2],xt}},{}],352:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]*_t,xt[1]=Ct[1]*_t,xt[2]=Ct[2]*_t,xt)},{}],353:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Math.round(Ct[0]/_t)*_t+0,xt[1]=Math.round(Ct[1]/_t)*_t+0,xt[2]=Math.round(Ct[2]/_t)*_t+0,xt)},{}],354:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{const _t=Ct[0]-xt[0],$t=Ct[1]-xt[1],Vn=Ct[2]-xt[2];return _t*_t+$t*$t+Vn*Vn}},{}],355:[function(xt,Ct,_t){Ct.exports=xt=>{const Ct=xt[0],_t=xt[1],$t=xt[2];return Ct*Ct+_t*_t+$t*$t}},{}],356:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>(xt[0]=Ct[0]-_t[0],xt[1]=Ct[1]-_t[1],xt[2]=Ct[2]-_t[2],xt)},{}],357:[function(xt,Ct,_t){Ct.exports=xt=>`[${xt[0].toFixed(7)}, ${xt[1].toFixed(7)}, ${xt[2].toFixed(7)}]`},{}],358:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{const $t=Ct[0],Vn=Ct[1],Gn=Ct[2];let or=_t[3]*$t+_t[7]*Vn+_t[11]*Gn+_t[15];return or=or||1,xt[0]=(_t[0]*$t+_t[4]*Vn+_t[8]*Gn+_t[12])/or,xt[1]=(_t[1]*$t+_t[5]*Vn+_t[9]*Gn+_t[13])/or,xt[2]=(_t[2]*$t+_t[6]*Vn+_t[10]*Gn+_t[14])/or,xt}},{}],359:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=xt=>{const Ct=$t();return Ct[0]=xt[0],Ct[1]=xt[1],Ct[2]=xt[2],Ct[3]=xt[3],Ct}},{"./create":361}],360:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Ct[0],xt[1]=Ct[1],xt[2]=Ct[2],xt[3]=Ct[3],xt)},{}],361:[function(xt,Ct,_t){Ct.exports=()=>[0,0,0,0]},{}],362:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>xt[0]*Ct[0]+xt[1]*Ct[1]+xt[2]*Ct[2]+xt[3]*Ct[3]},{}],363:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>xt[0]===Ct[0]&&xt[1]===Ct[1]&&xt[2]===Ct[2]&&xt[3]===Ct[3]},{}],364:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>(xt[0]=Ct,xt[1]=Ct,xt[2]=Ct,xt[3]=Ct,xt)},{}],365:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=(xt,Ct,_t,Vn)=>{const Gn=$t();return Gn[0]=xt,Gn[1]=Ct,Gn[2]=_t,Gn[3]=Vn,Gn}},{"./create":361}],366:[function(xt,Ct,_t){Ct.exports={clone:xt("./clone"),copy:xt("./copy"),create:xt("./create"),dot:xt("./dot"),equals:xt("./equals"),fromScalar:xt("./fromScalar"),fromValues:xt("./fromValues"),toString:xt("./toString"),transform:xt("./transform")}},{"./clone":359,"./copy":360,"./create":361,"./dot":362,"./equals":363,"./fromScalar":364,"./fromValues":365,"./toString":367,"./transform":368}],367:[function(xt,Ct,_t){Ct.exports=xt=>`(${xt[0].toFixed(9)}, ${xt[1].toFixed(9)}, ${xt[2].toFixed(9)}, ${xt[3].toFixed(9)})`},{}],368:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{const[$t,Vn,Gn,or]=Ct;return xt[0]=_t[0]*$t+_t[4]*Vn+_t[8]*Gn+_t[12]*or,xt[1]=_t[1]*$t+_t[5]*Vn+_t[9]*Gn+_t[13]*or,xt[2]=_t[2]*$t+_t[6]*Vn+_t[10]*Gn+_t[14]*or,xt[3]=_t[3]*$t+_t[7]*Vn+_t[11]*Gn+_t[15]*or,xt}},{}],369:[function(xt,Ct,_t){const{EPS:$t}=xt("../maths/constants");Ct.exports=(xt,Ct)=>{let _t=0;for(let $t=0;$t<Ct;$t++)_t+=xt[1][$t]-xt[0][$t];return $t*_t/Ct}},{"../maths/constants":212}],370:[function(xt,Ct,_t){Ct.exports={measureAggregateArea:xt("./measureAggregateArea"),measureAggregateBoundingBox:xt("./measureAggregateBoundingBox"),measureAggregateEpsilon:xt("./measureAggregateEpsilon"),measureAggregateVolume:xt("./measureAggregateVolume"),measureArea:xt("./measureArea"),measureBoundingBox:xt("./measureBoundingBox"),measureBoundingSphere:xt("./measureBoundingSphere"),measureCenter:xt("./measureCenter"),measureCenterOfMass:xt("./measureCenterOfMass"),measureDimensions:xt("./measureDimensions"),measureEpsilon:xt("./measureEpsilon"),measureVolume:xt("./measureVolume")}},{"./measureAggregateArea":371,"./measureAggregateBoundingBox":372,"./measureAggregateEpsilon":373,"./measureAggregateVolume":374,"./measureArea":375,"./measureBoundingBox":376,"./measureBoundingSphere":377,"./measureCenter":378,"./measureCenterOfMass":379,"./measureDimensions":380,"./measureEpsilon":381,"./measureVolume":382}],371:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("./measureArea");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("measureAggregateArea: no geometries supplied");const Ct=Vn(xt);return 1===xt.length?Ct:Ct.reduce(((xt,Ct)=>xt+Ct),0)}},{"../utils/flatten":515,"./measureArea":375}],372:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("../maths/vec3/min"),Gn=xt("../maths/vec3/max"),or=xt("./measureBoundingBox");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("measureAggregateBoundingBox: no geometries supplied");const Ct=or(xt);if(1===xt.length)return Ct;const _t=[[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]];return Ct.reduce(((xt,Ct)=>[Vn(xt[0],xt[0],Ct[0]),Gn(xt[1],xt[1],Ct[1])]),_t)}},{"../maths/vec3/max":343,"../maths/vec3/min":344,"../utils/flatten":515,"./measureBoundingBox":376}],373:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("./measureAggregateBoundingBox"),Gn=xt("./calculateEpsilonFromBounds"),{geom2:or,geom3:lr,path2:Fr}=xt("../geometries");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("measureAggregateEpsilon: no geometries supplied");const Ct=Vn(xt);let _t=0;return _t=xt.reduce(((xt,Ct)=>Fr.isA(Ct)||or.isA(Ct)?Math.max(xt,2):lr.isA(Ct)?Math.max(xt,3):0),_t),Gn(Ct,_t)}},{"../geometries":168,"../utils/flatten":515,"./calculateEpsilonFromBounds":369,"./measureAggregateBoundingBox":372}],374:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("./measureVolume");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("measureAggregateVolume: no geometries supplied");const Ct=Vn(xt);return 1===xt.length?Ct:Ct.reduce(((xt,Ct)=>xt+Ct),0)}},{"../utils/flatten":515,"./measureVolume":382}],375:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("../geometries/geom2"),Gn=xt("../geometries/geom3"),or=xt("../geometries/path2"),lr=xt("../geometries/poly3"),Fr=new WeakMap;Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("wrong number of arguments");const Ct=xt.map((xt=>or.isA(xt)?0:Vn.isA(xt)?(xt=>{let Ct=Fr.get(xt);return Ct||(Ct=Vn.toSides(xt).reduce(((xt,Ct)=>xt+(Ct[0][0]*Ct[1][1]-Ct[0][1]*Ct[1][0])),0),Ct*=.5,Fr.set(xt,Ct),Ct)})(xt):Gn.isA(xt)?(xt=>{let Ct=Fr.get(xt);return Ct||(Ct=Gn.toPolygons(xt).reduce(((xt,Ct)=>xt+lr.measureArea(Ct)),0),Fr.set(xt,Ct),Ct)})(xt):0));return 1===Ct.length?Ct[0]:Ct}},{"../geometries/geom2":144,"../geometries/geom3":159,"../geometries/path2":180,"../geometries/poly3":197,"../utils/flatten":515}],376:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("../maths/vec2"),Gn=xt("../maths/vec3"),or=xt("../geometries/geom2"),lr=xt("../geometries/geom3"),Fr=xt("../geometries/path2"),Hr=xt("../geometries/poly3"),xo=new WeakMap;Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("wrong number of arguments");const Ct=xt.map((xt=>Fr.isA(xt)?(xt=>{let Ct=xo.get(xt);if(Ct)return Ct;const _t=Fr.toPoints(xt);let $t;$t=0===_t.length?Vn.create():Vn.clone(_t[0]);let Gn=Vn.clone($t);return _t.forEach((xt=>{Vn.min($t,$t,xt),Vn.max(Gn,Gn,xt)})),$t=[$t[0],$t[1],0],Gn=[Gn[0],Gn[1],0],Ct=[$t,Gn],xo.set(xt,Ct),Ct})(xt):or.isA(xt)?(xt=>{let Ct=xo.get(xt);if(Ct)return Ct;const _t=or.toPoints(xt);let $t;$t=0===_t.length?Vn.create():Vn.clone(_t[0]);let Gn=Vn.clone($t);return _t.forEach((xt=>{Vn.min($t,$t,xt),Vn.max(Gn,Gn,xt)})),$t=[$t[0],$t[1],0],Gn=[Gn[0],Gn[1],0],Ct=[$t,Gn],xo.set(xt,Ct),Ct})(xt):lr.isA(xt)?(xt=>{let Ct=xo.get(xt);if(Ct)return Ct;const _t=lr.toPolygons(xt);let $t=Gn.create();if(_t.length>0){const xt=Hr.toPoints(_t[0]);Gn.copy($t,xt[0])}let Vn=Gn.clone($t);return _t.forEach((xt=>{Hr.toPoints(xt).forEach((xt=>{Gn.min($t,$t,xt),Gn.max(Vn,Vn,xt)}))})),$t=[$t[0],$t[1],$t[2]],Vn=[Vn[0],Vn[1],Vn[2]],Ct=[$t,Vn],xo.set(xt,Ct),Ct})(xt):[[0,0,0],[0,0,0]]));return 1===Ct.length?Ct[0]:Ct}},{"../geometries/geom2":144,"../geometries/geom3":159,"../geometries/path2":180,"../geometries/poly3":197,"../maths/vec2":309,"../maths/vec3":340,"../utils/flatten":515}],377:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("../maths/vec2"),Gn=xt("../maths/vec3"),or=xt("../geometries/geom2"),lr=xt("../geometries/geom3"),Fr=xt("../geometries/path2"),Hr=xt("../geometries/poly3"),xo=new WeakMap;Ct.exports=(...xt)=>{const Ct=(xt=$t(xt)).map((xt=>Fr.isA(xt)?(xt=>{let Ct=xo.get(xt);if(void 0!==Ct)return Ct;const _t=Gn.create();let $t=0;const or=Fr.toPoints(xt);if(or.length>0){let xt=0;const Ct=Gn.create();or.forEach(($t=>{Gn.add(_t,_t,Gn.fromVec2(Ct,$t,0)),xt++})),Gn.scale(_t,_t,1/xt),or.forEach((xt=>{$t=Math.max($t,Vn.squaredDistance(_t,xt))})),$t=Math.sqrt($t)}return Ct=[_t,$t],xo.set(xt,Ct),Ct})(xt):or.isA(xt)?(xt=>{let Ct=xo.get(xt);if(void 0!==Ct)return Ct;const _t=Gn.create();let $t=0;const lr=or.toSides(xt);if(lr.length>0){let xt=0;const Ct=Gn.create();lr.forEach(($t=>{Gn.add(_t,_t,Gn.fromVec2(Ct,$t[0],0)),xt++})),Gn.scale(_t,_t,1/xt),lr.forEach((xt=>{$t=Math.max($t,Vn.squaredDistance(_t,xt[0]))})),$t=Math.sqrt($t)}return Ct=[_t,$t],xo.set(xt,Ct),Ct})(xt):lr.isA(xt)?(xt=>{let Ct=xo.get(xt);if(void 0!==Ct)return Ct;const _t=Gn.create();let $t=0;const Vn=lr.toPolygons(xt);if(Vn.length>0){let xt=0;Vn.forEach((Ct=>{Hr.toPoints(Ct).forEach((Ct=>{Gn.add(_t,_t,Ct),xt++}))})),Gn.scale(_t,_t,1/xt),Vn.forEach((xt=>{Hr.toPoints(xt).forEach((xt=>{$t=Math.max($t,Gn.squaredDistance(_t,xt))}))})),$t=Math.sqrt($t)}return Ct=[_t,$t],xo.set(xt,Ct),Ct})(xt):[[0,0,0],0]));return 1===Ct.length?Ct[0]:Ct}},{"../geometries/geom2":144,"../geometries/geom3":159,"../geometries/path2":180,"../geometries/poly3":197,"../maths/vec2":309,"../maths/vec3":340,"../utils/flatten":515}],378:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("./measureBoundingBox");Ct.exports=(...xt)=>{const Ct=(xt=$t(xt)).map((xt=>{const Ct=Vn(xt);return[Ct[0][0]+(Ct[1][0]-Ct[0][0])/2,Ct[0][1]+(Ct[1][1]-Ct[0][1])/2,Ct[0][2]+(Ct[1][2]-Ct[0][2])/2]}));return 1===Ct.length?Ct[0]:Ct}},{"../utils/flatten":515,"./measureBoundingBox":376}],379:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("../maths/vec3"),Gn=xt("../geometries/geom2"),or=xt("../geometries/geom3"),lr=new WeakMap;Ct.exports=(...xt)=>{const Ct=(xt=$t(xt)).map((xt=>Gn.isA(xt)?(xt=>{let Ct=lr.get(xt);if(void 0!==Ct)return Ct;const _t=Gn.toSides(xt);let $t=0,or=0,Fr=0;if(_t.length>0){for(let xt=0;xt<_t.length;xt++){const Ct=_t[xt][0],Vn=_t[xt][1],Gn=Ct[0]*Vn[1]-Ct[1]*Vn[0];$t+=Gn,or+=(Ct[0]+Vn[0])*Gn,Fr+=(Ct[1]+Vn[1])*Gn}const xt=1/(6*($t/=2));or*=xt,Fr*=xt}return Ct=Vn.fromValues(or,Fr,0),lr.set(xt,Ct),Ct})(xt):or.isA(xt)?(xt=>{let Ct=lr.get(xt);if(void 0!==Ct)return Ct;Ct=Vn.create();const _t=or.toPolygons(xt);if(0===_t.length)return Ct;let $t=0;const Gn=Vn.create();return _t.forEach((xt=>{const _t=xt.vertices;for(let xt=0;xt<_t.length-2;xt++){Vn.cross(Gn,_t[xt+1],_t[xt+2]);const or=Vn.dot(_t[0],Gn)/6;$t+=or,Vn.add(Gn,_t[0],_t[xt+1]),Vn.add(Gn,Gn,_t[xt+2]);const lr=Vn.scale(Gn,Gn,.25*or);Vn.add(Ct,Ct,lr)}})),Vn.scale(Ct,Ct,1/$t),lr.set(xt,Ct),Ct})(xt):[0,0,0]));return 1===Ct.length?Ct[0]:Ct}},{"../geometries/geom2":144,"../geometries/geom3":159,"../maths/vec3":340,"../utils/flatten":515}],380:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("./measureBoundingBox");Ct.exports=(...xt)=>{const Ct=(xt=$t(xt)).map((xt=>{const Ct=Vn(xt);return[Ct[1][0]-Ct[0][0],Ct[1][1]-Ct[0][1],Ct[1][2]-Ct[0][2]]}));return 1===Ct.length?Ct[0]:Ct}},{"../utils/flatten":515,"./measureBoundingBox":376}],381:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),{geom2:Vn,geom3:Gn,path2:or}=xt("../geometries"),lr=xt("./calculateEpsilonFromBounds"),Fr=xt("./measureBoundingBox");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("wrong number of arguments");const Ct=xt.map((xt=>or.isA(xt)||Vn.isA(xt)?(xt=>lr(Fr(xt),2))(xt):Gn.isA(xt)?(xt=>lr(Fr(xt),3))(xt):0));return 1===Ct.length?Ct[0]:Ct}},{"../geometries":168,"../utils/flatten":515,"./calculateEpsilonFromBounds":369,"./measureBoundingBox":376}],382:[function(xt,Ct,_t){const $t=xt("../utils/flatten"),Vn=xt("../geometries/geom2"),Gn=xt("../geometries/geom3"),or=xt("../geometries/path2"),lr=xt("../geometries/poly3"),Fr=new WeakMap;Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("wrong number of arguments");const Ct=xt.map((xt=>or.isA(xt)||Vn.isA(xt)?0:Gn.isA(xt)?(xt=>{let Ct=Fr.get(xt);return Ct||(Ct=Gn.toPolygons(xt).reduce(((xt,Ct)=>xt+lr.measureSignedVolume(Ct)),0),Fr.set(xt,Ct),Ct)})(xt):0));return 1===Ct.length?Ct[0]:Ct}},{"../geometries/geom2":144,"../geometries/geom3":159,"../geometries/path2":180,"../geometries/poly3":197,"../utils/flatten":515}],383:[function(xt,Ct,_t){const $t=xt("../../maths/vec2"),Vn=xt("../../geometries/geom2");Ct.exports=(xt,Ct)=>{const _t=Ct.map((Ct=>((xt,Ct)=>{if(Ct.vertices.length<4)return null;const _t=[],Vn=Ct.vertices.filter(((xt,Ct)=>xt[2]>0&&(_t.push(Ct),!0)));if(2!==Vn.length)throw new Error("Assertion failed: fromFakePolygon: not enough points found");const Gn=Vn.map((Ct=>{const _t=Math.round(Ct[0]/xt)*xt+0,Vn=Math.round(Ct[1]/xt)*xt+0;return $t.fromValues(_t,Vn)}));if($t.equals(Gn[0],Gn[1]))return null;const or=_t[1]-_t[0];if(1!==or&&3!==or)throw new Error("Assertion failed: fromFakePolygon: unknown index ordering");return 1===or&&Gn.reverse(),Gn})(xt,Ct))).filter((xt=>null!==xt));return Vn.create(_t)}},{"../../geometries/geom2":144,"../../maths/vec2":309}],384:[function(xt,Ct,_t){Ct.exports={intersect:xt("./intersect"),scission:xt("./scission"),subtract:xt("./subtract"),union:xt("./union")}},{"./intersect":385,"./scission":390,"./subtract":392,"./union":403}],385:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../utils/areAllShapesTheSameType"),Gn=xt("../../geometries/geom2"),or=xt("../../geometries/geom3"),lr=xt("./intersectGeom2"),Fr=xt("./intersectGeom3");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("wrong number of arguments");if(!Vn(xt))throw new Error("only intersect of the types are supported");const Ct=xt[0];return Gn.isA(Ct)?lr(xt):or.isA(Ct)?Fr(xt):Ct}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../utils/areAllShapesTheSameType":513,"../../utils/flatten":515,"./intersectGeom2":386,"./intersectGeom3":387}],386:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom3"),Gn=xt("../../measurements/measureEpsilon"),or=xt("./fromFakePolygons"),lr=xt("./to3DWalls"),Fr=xt("./intersectGeom3");Ct.exports=(...xt)=>{const Ct=(xt=$t(xt)).map((xt=>lr({z0:-1,z1:1},xt))),_t=Fr(Ct),Hr=Gn(_t);return or(Hr,Vn.toPolygons(_t))}},{"../../geometries/geom3":159,"../../measurements/measureEpsilon":381,"../../utils/flatten":515,"./fromFakePolygons":383,"./intersectGeom3":387,"./to3DWalls":396}],387:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../modifiers/retessellate"),Gn=xt("./intersectGeom3Sub");Ct.exports=(...xt)=>{let Ct=(xt=$t(xt)).shift();return xt.forEach((xt=>{Ct=Gn(Ct,xt)})),Ct=Vn(Ct)}},{"../../utils/flatten":515,"../modifiers/retessellate":473,"./intersectGeom3Sub":388}],388:[function(xt,Ct,_t){const $t=xt("../../geometries/geom3"),Vn=xt("./mayOverlap"),{Tree:Gn}=xt("./trees");Ct.exports=(xt,Ct)=>{if(!Vn(xt,Ct))return $t.create();const _t=new Gn($t.toPolygons(xt)),or=new Gn($t.toPolygons(Ct));_t.invert(),or.clipTo(_t),or.invert(),_t.clipTo(or),or.clipTo(_t),_t.addPolygons(or.allPolygons()),_t.invert();const lr=_t.allPolygons();return $t.create(lr)}},{"../../geometries/geom3":159,"./mayOverlap":389,"./trees":400}],389:[function(xt,Ct,_t){const{EPS:$t}=xt("../../maths/constants"),Vn=xt("../../measurements/measureBoundingBox");Ct.exports=(xt,Ct)=>{if(0===xt.polygons.length||0===Ct.polygons.length)return!1;const _t=Vn(xt),Gn=_t[0],or=_t[1],lr=Vn(Ct),Fr=lr[0],Hr=lr[1];return!(Fr[0]-or[0]>$t||Gn[0]-Hr[0]>$t||Fr[1]-or[1]>$t||Gn[1]-Hr[1]>$t||Fr[2]-or[2]>$t||Gn[2]-Hr[2]>$t)}},{"../../maths/constants":212,"../../measurements/measureBoundingBox":376}],390:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom3"),Gn=xt("./scissionGeom3");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("wrong number of arguments");const Ct=xt.map((xt=>Vn.isA(xt)?Gn(xt):xt));return 1===Ct.length?Ct[0]:Ct}},{"../../geometries/geom3":159,"../../utils/flatten":515,"./scissionGeom3":391}],391:[function(xt,Ct,_t){const $t=xt("../../maths/vec3"),Vn=xt("../../measurements/measureEpsilon"),Gn=xt("../../geometries/geom3"),sortNb=xt=>xt.sort(((xt,Ct)=>xt-Ct)).filter(((xt,Ct,_t)=>!Ct||xt!==_t[Ct-1]));Ct.exports=xt=>{const Ct=Vn(xt),_t=Gn.toPolygons(xt),or=_t.length,lr=new Map,Fr=$t.create();_t.forEach(((xt,_t)=>{xt.vertices.forEach((xt=>{((xt,Ct,_t)=>{const $t=`${Ct}`,Vn=xt.get($t);void 0===Vn?xt.set($t,[_t]):Vn.push(_t)})(lr,$t.snap(Fr,xt,Ct),_t)}))}));const Hr=_t.map((xt=>{let _t=[];return xt.vertices.forEach((xt=>{_t=_t.concat(((xt,Ct)=>{const _t=`${Ct}`;return xt.get(_t)})(lr,$t.snap(Fr,xt,Ct)))})),{e:1,d:sortNb(_t)}}));lr.clear();let xo=0;const Eo=Hr.length;for(let xt=0;xt<Eo;xt++){const Ct=Hr[xt];if(Ct.e>0){const _t=new Array(or);_t[xt]=!0;do{xo=0,_t.forEach(((xt,Ct)=>{const $t=Hr[Ct];if($t.e>0){$t.e=-1;for(let xt=0;xt<$t.d.length;xt++)_t[$t.d[xt]]=!0;xo++}}))}while(xo>0);Ct.indexes=_t}}const Mo=[];for(let xt=0;xt<Eo;xt++)if(Hr[xt].indexes){const Ct=[];Hr[xt].indexes.forEach(((xt,$t)=>Ct.push(_t[$t]))),Mo.push(Gn.create(Ct))}return Mo}},{"../../geometries/geom3":159,"../../maths/vec3":340,"../../measurements/measureEpsilon":381}],392:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../utils/areAllShapesTheSameType"),Gn=xt("../../geometries/geom2"),or=xt("../../geometries/geom3"),lr=xt("./subtractGeom2"),Fr=xt("./subtractGeom3");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("wrong number of arguments");if(!Vn(xt))throw new Error("only subtract of the types are supported");const Ct=xt[0];return Gn.isA(Ct)?lr(xt):or.isA(Ct)?Fr(xt):Ct}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../utils/areAllShapesTheSameType":513,"../../utils/flatten":515,"./subtractGeom2":393,"./subtractGeom3":394}],393:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom3"),Gn=xt("../../measurements/measureEpsilon"),or=xt("./fromFakePolygons"),lr=xt("./to3DWalls"),Fr=xt("./subtractGeom3");Ct.exports=(...xt)=>{const Ct=(xt=$t(xt)).map((xt=>lr({z0:-1,z1:1},xt))),_t=Fr(Ct),Hr=Gn(_t);return or(Hr,Vn.toPolygons(_t))}},{"../../geometries/geom3":159,"../../measurements/measureEpsilon":381,"../../utils/flatten":515,"./fromFakePolygons":383,"./subtractGeom3":394,"./to3DWalls":396}],394:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../modifiers/retessellate"),Gn=xt("./subtractGeom3Sub");Ct.exports=(...xt)=>{let Ct=(xt=$t(xt)).shift();return xt.forEach((xt=>{Ct=Gn(Ct,xt)})),Ct=Vn(Ct)}},{"../../utils/flatten":515,"../modifiers/retessellate":473,"./subtractGeom3Sub":395}],395:[function(xt,Ct,_t){const $t=xt("../../geometries/geom3"),Vn=xt("./mayOverlap"),{Tree:Gn}=xt("./trees");Ct.exports=(xt,Ct)=>{if(!Vn(xt,Ct))return $t.clone(xt);const _t=new Gn($t.toPolygons(xt)),or=new Gn($t.toPolygons(Ct));_t.invert(),_t.clipTo(or),or.clipTo(_t,!0),_t.addPolygons(or.allPolygons()),_t.invert();const lr=_t.allPolygons();return $t.create(lr)}},{"../../geometries/geom3":159,"./mayOverlap":389,"./trees":400}],396:[function(xt,Ct,_t){const $t=xt("../../maths/vec3"),Vn=xt("../../geometries/geom2"),Gn=xt("../../geometries/geom3"),or=xt("../../geometries/poly3");Ct.exports=(xt,Ct)=>{const _t=Vn.toSides(Ct).map((Ct=>((xt,Ct,_t)=>{const Vn=[$t.fromVec2($t.create(),_t[0],xt),$t.fromVec2($t.create(),_t[1],xt),$t.fromVec2($t.create(),_t[1],Ct),$t.fromVec2($t.create(),_t[0],Ct)];return or.create(Vn)})(xt.z0,xt.z1,Ct)));return Gn.create(_t)}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/poly3":197,"../../maths/vec3":340}],397:[function(xt,Ct,_t){const $t=xt("../../../maths/plane"),Vn=xt("../../../geometries/poly3");class Node{constructor(xt){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=xt}invert(){const xt=[this];let Ct;for(let _t=0;_t<xt.length;_t++){(Ct=xt[_t]).plane&&(Ct.plane=$t.flip($t.create(),Ct.plane)),Ct.front&&xt.push(Ct.front),Ct.back&&xt.push(Ct.back);const Vn=Ct.front;Ct.front=Ct.back,Ct.back=Vn}}clipPolygons(xt,Ct){let _t,$t={node:this,polygontreenodes:xt};const Vn=[];do{if(_t=$t.node,xt=$t.polygontreenodes,_t.plane){const $t=_t.plane,Gn=[],or=[],lr=Ct?Gn:or,Fr=xt.length;for(let Ct=0;Ct<Fr;Ct++){const _t=xt[Ct];_t.isRemoved()||_t.splitByPlane($t,lr,Gn,or,Gn)}_t.front&&or.length>0&&Vn.push({node:_t.front,polygontreenodes:or});const Hr=Gn.length;if(_t.back&&Hr>0)Vn.push({node:_t.back,polygontreenodes:Gn});else for(let xt=0;xt<Hr;xt++)Gn[xt].remove()}$t=Vn.pop()}while(void 0!==$t)}clipTo(xt,Ct){let _t=this;const $t=[];do{_t.polygontreenodes.length>0&&xt.rootnode.clipPolygons(_t.polygontreenodes,Ct),_t.front&&$t.push(_t.front),_t.back&&$t.push(_t.back),_t=$t.pop()}while(void 0!==_t)}addPolygonTreeNodes(xt){let Ct={node:this,polygontreenodes:xt};const _t=[];do{const xt=Ct.node,$t=Ct.polygontreenodes;if(0===$t.length){Ct=_t.pop();continue}if(!xt.plane){let Ct=0;const _t=$t[Ct=Math.floor($t.length/2)].getPolygon();xt.plane=Vn.plane(_t)}const Gn=[],or=[],lr=$t.length;for(let Ct=0;Ct<lr;++Ct)$t[Ct].splitByPlane(xt.plane,xt.polygontreenodes,or,Gn,or);Gn.length>0&&(xt.front||(xt.front=new Node(xt)),lr===Gn.length&&0===or.length?xt.front.polygontreenodes=Gn:_t.push({node:xt.front,polygontreenodes:Gn})),or.length>0&&(xt.back||(xt.back=new Node(xt)),lr===or.length&&0===Gn.length?xt.back.polygontreenodes=or:_t.push({node:xt.back,polygontreenodes:or})),Ct=_t.pop()}while(void 0!==Ct)}}Ct.exports=Node},{"../../../geometries/poly3":197,"../../../maths/plane":281}],398:[function(xt,Ct,_t){const{EPS:$t}=xt("../../../maths/constants"),Vn=xt("../../../maths/vec3"),Gn=xt("../../../geometries/poly3"),or=xt("./splitPolygonByPlane");class PolygonTreeNode{constructor(xt,Ct){this.parent=xt,this.children=[],this.polygon=Ct,this.removed=!1}addPolygons(xt){if(!this.isRootNode())throw new Error("Assertion failed");const Ct=this;xt.forEach((xt=>{Ct.addChild(xt)}))}remove(){if(!this.removed){this.removed=!0,this.polygon=null;const xt=this.parent.children,Ct=xt.indexOf(this);if(Ct<0)throw new Error("Assertion failed");xt.splice(Ct,1),this.parent.recursivelyInvalidatePolygon()}}isRemoved(){return this.removed}isRootNode(){return!this.parent}invert(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()}getPolygon(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon}getPolygons(xt){let Ct=[this];const _t=[Ct];let $t,Vn,Gn,or;for($t=0;$t<_t.length;++$t)for(Vn=0,Gn=(Ct=_t[$t]).length;Vn<Gn;Vn++)(or=Ct[Vn]).polygon?xt.push(or.polygon):or.children.length>0&&_t.push(or.children)}splitByPlane(xt,Ct,_t,$t,Vn){if(this.children.length){const Gn=[this.children];let or,lr,Fr,Hr,xo;for(or=0;or<Gn.length;or++)for(xo=Gn[or],lr=0,Fr=xo.length;lr<Fr;lr++)(Hr=xo[lr]).children.length>0?Gn.push(Hr.children):Hr._splitByPlane(xt,Ct,_t,$t,Vn)}else this._splitByPlane(xt,Ct,_t,$t,Vn)}_splitByPlane(xt,Ct,_t,lr,Fr){const Hr=this.polygon;if(Hr){const xo=Gn.measureBoundingSphere(Hr),Eo=xo[3]+$t,Mo=xo,Oo=Vn.dot(xt,Mo)-xt[3];if(Oo>Eo)lr.push(this);else if(Oo<-Eo)Fr.push(this);else{const $t=or(xt,Hr);switch($t.type){case 0:Ct.push(this);break;case 1:_t.push(this);break;case 2:lr.push(this);break;case 3:Fr.push(this);break;case 4:if($t.front){const xt=this.addChild($t.front);lr.push(xt)}if($t.back){const xt=this.addChild($t.back);Fr.push(xt)}}}}}addChild(xt){const Ct=new PolygonTreeNode(this,xt);return this.children.push(Ct),Ct}invertSub(){let xt=[this];const Ct=[xt];let _t,$t,Vn,or;for(_t=0;_t<Ct.length;_t++)for($t=0,Vn=(xt=Ct[_t]).length;$t<Vn;$t++)(or=xt[$t]).polygon&&(or.polygon=Gn.invert(or.polygon)),or.children.length>0&&Ct.push(or.children)}recursivelyInvalidatePolygon(){this.polygon=null,this.parent&&this.parent.recursivelyInvalidatePolygon()}clear(){let xt=[this];const Ct=[xt];for(let _t=0;_t<Ct.length;++_t){const $t=(xt=Ct[_t]).length;for(let _t=0;_t<$t;_t++){const $t=xt[_t];$t.polygon&&($t.polygon=null),$t.parent&&($t.parent=null),$t.children.length>0&&Ct.push($t.children),$t.children=[]}}}toString(){let xt="",Ct=[this];const _t=[Ct];let $t,Vn,Gn,or;for($t=0;$t<_t.length;++$t){Ct=_t[$t];const lr=" ".repeat($t);for(Vn=0,Gn=Ct.length;Vn<Gn;Vn++)xt+=`${lr}PolygonTreeNode (${(or=Ct[Vn]).isRootNode()}): ${or.children.length}`,or.polygon?xt+=`\n ${lr}polygon: ${or.polygon.vertices}\n`:xt+="\n",or.children.length>0&&_t.push(or.children)}return xt}}Ct.exports=PolygonTreeNode},{"../../../geometries/poly3":197,"../../../maths/constants":212,"../../../maths/vec3":340,"./splitPolygonByPlane":402}],399:[function(xt,Ct,_t){const $t=xt("./Node"),Vn=xt("./PolygonTreeNode");Ct.exports=class Tree{constructor(xt){this.polygonTree=new Vn,this.rootnode=new $t(null),xt&&this.addPolygons(xt)}invert(){this.polygonTree.invert(),this.rootnode.invert()}clipTo(xt,Ct=!1){this.rootnode.clipTo(xt,Ct)}allPolygons(){const xt=[];return this.polygonTree.getPolygons(xt),xt}addPolygons(xt){const Ct=new Array(xt.length);for(let _t=0;_t<xt.length;_t++)Ct[_t]=this.polygonTree.addChild(xt[_t]);this.rootnode.addPolygonTreeNodes(Ct)}clear(){this.polygonTree.clear()}toString(){return"Tree: "+this.polygonTree.toString("")}}},{"./Node":397,"./PolygonTreeNode":398}],400:[function(xt,Ct,_t){Ct.exports={Tree:xt("./Tree")}},{"./Tree":399}],401:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3");Ct.exports=(xt,Ct,_t)=>{const Vn=$t.subtract($t.create(),_t,Ct);let Gn=(xt[3]-$t.dot(xt,Ct))/$t.dot(xt,Vn);return Number.isNaN(Gn)&&(Gn=0),Gn>1&&(Gn=1),Gn<0&&(Gn=0),$t.scale(Vn,Vn,Gn),$t.add(Vn,Ct,Vn),Vn}},{"../../../maths/vec3":340}],402:[function(xt,Ct,_t){const{EPS:$t}=xt("../../../maths/constants"),Vn=xt("../../../maths/plane"),Gn=xt("../../../maths/vec3"),or=xt("../../../geometries/poly3"),lr=xt("./splitLineSegmentByPlane");Ct.exports=(xt,Ct)=>{const _t={type:null,front:null,back:null},Fr=Ct.vertices,Hr=Fr.length,xo=or.plane(Ct);if(Vn.equals(xo,xt))_t.type=0;else{let Ct=!1,Vn=!1;const Eo=[],Mo=-$t;for(let _t=0;_t<Hr;_t++){const or=Gn.dot(xt,Fr[_t])-xt[3],lr=or<Mo;Eo.push(lr),or>$t&&(Ct=!0),or<Mo&&(Vn=!0)}if(Ct||Vn)if(Vn)if(Ct){_t.type=4;const Ct=[],Vn=[];let Mo=Eo[0];for(let _t=0;_t<Hr;_t++){const $t=Fr[_t];let Gn=_t+1;Gn>=Hr&&(Gn=0);const or=Eo[Gn];if(Mo===or)Mo?Vn.push($t):Ct.push($t);else{const _t=Fr[Gn],or=lr(xt,$t,_t);Mo?(Vn.push($t),Vn.push(or),Ct.push(or)):(Ct.push($t),Ct.push(or),Vn.push(or))}Mo=or}const Oo=$t*$t;if(Vn.length>=3){let xt=Vn[Vn.length-1];for(let Ct=0;Ct<Vn.length;Ct++){const _t=Vn[Ct];Gn.squaredDistance(_t,xt)<Oo&&(Vn.splice(Ct,1),Ct--),xt=_t}}if(Ct.length>=3){let xt=Ct[Ct.length-1];for(let _t=0;_t<Ct.length;_t++){const $t=Ct[_t];Gn.squaredDistance($t,xt)<Oo&&(Ct.splice(_t,1),_t--),xt=$t}}Ct.length>=3&&(_t.front=or.fromPointsAndPlane(Ct,xo)),Vn.length>=3&&(_t.back=or.fromPointsAndPlane(Vn,xo))}else _t.type=3;else _t.type=2;else{const Ct=Gn.dot(xt,xo);_t.type=Ct>=0?0:1}}return _t}},{"../../../geometries/poly3":197,"../../../maths/constants":212,"../../../maths/plane":281,"../../../maths/vec3":340,"./splitLineSegmentByPlane":401}],403:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../utils/areAllShapesTheSameType"),Gn=xt("../../geometries/geom2"),or=xt("../../geometries/geom3"),lr=xt("./unionGeom2"),Fr=xt("./unionGeom3");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("wrong number of arguments");if(!Vn(xt))throw new Error("only unions of the same type are supported");const Ct=xt[0];return Gn.isA(Ct)?lr(xt):or.isA(Ct)?Fr(xt):Ct}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../utils/areAllShapesTheSameType":513,"../../utils/flatten":515,"./unionGeom2":404,"./unionGeom3":405}],404:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom3"),Gn=xt("../../measurements/measureEpsilon"),or=xt("./fromFakePolygons"),lr=xt("./to3DWalls"),Fr=xt("./unionGeom3");Ct.exports=(...xt)=>{const Ct=(xt=$t(xt)).map((xt=>lr({z0:-1,z1:1},xt))),_t=Fr(Ct),Hr=Gn(_t);return or(Hr,Vn.toPolygons(_t))}},{"../../geometries/geom3":159,"../../measurements/measureEpsilon":381,"../../utils/flatten":515,"./fromFakePolygons":383,"./to3DWalls":396,"./unionGeom3":405}],405:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../modifiers/retessellate"),Gn=xt("./unionGeom3Sub");Ct.exports=(...xt)=>{let Ct;for(xt=$t(xt),Ct=1;Ct<xt.length;Ct+=2)xt.push(Gn(xt[Ct-1],xt[Ct]));let _t=xt[Ct-1];return Vn(_t)}},{"../../utils/flatten":515,"../modifiers/retessellate":473,"./unionGeom3Sub":406}],406:[function(xt,Ct,_t){const $t=xt("../../geometries/geom3"),Vn=xt("./mayOverlap"),{Tree:Gn}=xt("./trees"),unionForNonIntersecting=(xt,Ct)=>{let _t=$t.toPolygons(xt);return _t=_t.concat($t.toPolygons(Ct)),$t.create(_t)};Ct.exports=(xt,Ct)=>{if(!Vn(xt,Ct))return unionForNonIntersecting(xt,Ct);const _t=new Gn($t.toPolygons(xt)),or=new Gn($t.toPolygons(Ct));_t.clipTo(or,!1),or.clipTo(_t),or.invert(),or.clipTo(_t),or.invert();const lr=_t.allPolygons().concat(or.allPolygons());return $t.create(lr)}},{"../../geometries/geom3":159,"./mayOverlap":389,"./trees":400}],407:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom2"),Gn=xt("../../geometries/geom3"),or=xt("../../geometries/path2"),lr=xt("./expandGeom2"),Fr=xt("./expandGeom3"),Hr=xt("./expandPath2");Ct.exports=(xt,...Ct)=>{if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");const _t=Ct.map((Ct=>or.isA(Ct)?Hr(xt,Ct):Vn.isA(Ct)?lr(xt,Ct):Gn.isA(Ct)?Fr(xt,Ct):Ct));return 1===_t.length?_t[0]:_t}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180,"../../utils/flatten":515,"./expandGeom2":408,"./expandGeom3":409,"./expandPath2":410}],408:[function(xt,Ct,_t){const $t=xt("../../geometries/geom2"),Vn=xt("./offsetFromPoints");Ct.exports=(xt,Ct)=>{const{delta:_t,corners:Gn,segments:or}=Object.assign({},{delta:1,corners:"edge",segments:16},xt);if("edge"!==Gn&&"chamfer"!==Gn&&"round"!==Gn)throw new Error('corners must be "edge", "chamfer", or "round"');const lr=$t.toOutlines(Ct).map((Ct=>Vn(xt={delta:_t,corners:Gn,closed:!0,segments:or},Ct))).reduce(((xt,Ct)=>xt.concat($t.toSides($t.fromPoints(Ct)))),[]);return $t.create(lr)}},{"../../geometries/geom2":144,"./offsetFromPoints":415}],409:[function(xt,Ct,_t){const $t=xt("../../geometries/geom3"),Vn=xt("../booleans/union"),Gn=xt("./expandShell");Ct.exports=(xt,Ct)=>{const{delta:_t,corners:or,segments:lr}=Object.assign({},{delta:1,corners:"round",segments:12},xt);if("round"!==or)throw new Error('corners must be "round" for 3D geometries');if(0===$t.toPolygons(Ct).length)throw new Error("the given geometry cannot be empty");const Fr=Gn(xt={delta:_t,corners:or,segments:lr},Ct);return Vn(Ct,Fr)}},{"../../geometries/geom3":159,"../booleans/union":403,"./expandShell":411}],410:[function(xt,Ct,_t){const $t=xt("../../maths/utils/area"),Vn=xt("../../maths/vec2"),Gn=xt("../../geometries/geom2"),or=xt("../../geometries/path2"),lr=xt("./offsetFromPoints");Ct.exports=(xt,Ct)=>{xt=Object.assign({},{delta:1,corners:"edge",segments:16},xt);const{delta:_t,corners:Fr,segments:Hr}=xt;if(_t<=0)throw new Error("the given delta must be positive for paths");if("edge"!==Fr&&"chamfer"!==Fr&&"round"!==Fr)throw new Error('corners must be "edge", "chamfer", or "round"');const xo=Ct.isClosed,Eo=or.toPoints(Ct);if(0===Eo.length)throw new Error("the given geometry cannot be empty");const Mo={points:Eo,external:lr({delta:_t,corners:Fr,segments:Hr,closed:xo},Eo),internal:lr({delta:-_t,corners:Fr,segments:Hr,closed:xo},Eo)};return Ct.isClosed?(xt=>{let{external:Ct,internal:_t}=xt;$t(Ct)<0?Ct=Ct.reverse():_t=_t.reverse();const Vn=or.fromPoints({closed:!0},Ct),lr=or.fromPoints({closed:!0},_t),Fr=Gn.toSides(Gn.fromPoints(or.toPoints(Vn))),Hr=Gn.toSides(Gn.fromPoints(or.toPoints(lr)));return Fr.push(...Hr),Gn.create(Fr)})(Mo):((xt,Ct,_t,$t)=>{const{points:or,external:lr,internal:Fr}=xt,Hr=Math.floor(Ct/2),xo=[],Eo=[];if("round"===_t&&Hr>0){const xt=Math.PI/Hr,Ct=or[or.length-1],_t=Vn.angle(Vn.subtract(Vn.create(),lr[lr.length-1],Ct)),Gn=or[0],Mo=Vn.angle(Vn.subtract(Vn.create(),Fr[0],Gn));for(let or=1;or<Hr;or++){let lr=_t+xt*or,Fr=Vn.fromAngleRadians(Vn.create(),lr);Vn.scale(Fr,Fr,$t),Vn.add(Fr,Fr,Ct),xo.push(Fr),lr=Mo+xt*or,Fr=Vn.fromAngleRadians(Vn.create(),lr),Vn.scale(Fr,Fr,$t),Vn.add(Fr,Fr,Gn),Eo.push(Fr)}}const Mo=[];return Mo.push(...lr,...xo,...Fr.reverse(),...Eo),Gn.fromPoints(Mo)})(Mo,Hr,Fr,_t)}},{"../../geometries/geom2":144,"../../geometries/path2":180,"../../maths/utils/area":286,"../../maths/vec2":309,"./offsetFromPoints":415}],411:[function(xt,Ct,_t){const{EPS:$t,TAU:Vn}=xt("../../maths/constants"),Gn=xt("../../maths/mat4"),or=xt("../../maths/vec3"),lr=xt("../../utils/fnNumberSort"),Fr=xt("../../geometries/geom3"),Hr=xt("../../geometries/poly3"),xo=xt("../../primitives/sphere"),Eo=xt("../modifiers/retessellate"),Mo=xt("../booleans/unionGeom3Sub"),Oo=xt("./extrudePolygon"),mapPlaneToVertex=(xt,Ct,_t)=>{const $t=Ct.toString();if(xt.has($t))xt.get($t)[1].push(_t);else{const Vn=[Ct,[_t]];xt.set($t,Vn)}},mapPlaneToEdge=(xt,Ct,_t)=>{const $t=Ct[0].toString(),Vn=Ct[1].toString(),Gn=$t<Vn?`${$t},${Vn}`:`${Vn},${$t}`;if(xt.has(Gn))xt.get(Gn)[1].push(_t);else{const $t=[Ct,[_t]];xt.set(Gn,$t)}},addUniqueAngle=(xt,Ct)=>{xt.findIndex((xt=>xt===Ct))<0&&xt.push(Ct)};Ct.exports=(xt,Ct)=>{const{delta:_t,segments:Ro}=Object.assign({},{delta:1,segments:12},xt);let Io=Fr.create();const Bo=new Map,zo=new Map,Ho=or.create(),Qo=or.create();return Fr.toPolygons(Ct).forEach(((xt,Ct)=>{const $t=or.scale(or.create(),Hr.plane(xt),2*_t),Vn=Hr.transform(Gn.fromTranslation(Gn.create(),or.scale(or.create(),$t,-.5)),xt),lr=Oo($t,Vn);Io=Mo(Io,lr);const Fr=xt.vertices;for(let Ct=0;Ct<Fr.length;Ct++){mapPlaneToVertex(Bo,Fr[Ct],Hr.plane(xt));const _t=(Ct+1)%Fr.length,$t=[Fr[Ct],Fr[_t]];mapPlaneToEdge(zo,$t,Hr.plane(xt))}})),zo.forEach((xt=>{const Ct=xt[0],Gn=xt[1],xo=Ct[0],Eo=Ct[1],Oo=or.subtract(or.create(),Eo,xo);or.normalize(Oo,Oo);const Bo=Gn[0],zo=or.cross(or.create(),Bo,Oo);let pi=[];for(let xt=0;xt<Ro;xt++)addUniqueAngle(pi,xt*Vn/Ro);for(let xt=0,Ct=Gn.length;xt<Ct;xt++){const Ct=Gn[xt],_t=or.dot(zo,Ct),$t=or.dot(Bo,Ct);let lr=Math.atan2(_t,$t);lr<0&&(lr+=Vn),addUniqueAngle(pi,lr),(lr=Math.atan2(-_t,-$t))<0&&(lr+=Vn),addUniqueAngle(pi,lr)}const gi=(pi=pi.sort(lr)).length;let es,ts;const ns=[],rs=[],os=[];for(let xt=-1;xt<gi;xt++){const Ct=pi[xt<0?xt+gi:xt],Vn=Math.sin(Ct),Gn=Math.cos(Ct);or.scale(Ho,Bo,Gn*_t),or.scale(Qo,zo,Vn*_t),or.add(Ho,Ho,Qo);const lr=or.add(or.create(),xo,Ho),Fr=or.add(or.create(),Eo,Ho);let Mo=!1;if(xt>=0&&or.distance(lr,es)<$t&&(Mo=!0),!Mo){if(xt>=0){ns.push(lr),rs.push(Fr);const xt=[ts,Fr,lr,es],Ct=Hr.create(xt);os.push(Ct)}es=lr,ts=Fr}}rs.reverse(),os.push(Hr.create(ns)),os.push(Hr.create(rs));const is=Fr.create(os);Io=Mo(Io,is)})),Bo.forEach((xt=>{const Ct=xt[0],$t=xt[1],Vn=$t[0];let Gn=null,lr=0;for(let xt=1;xt<$t.length;xt++){const Ct=$t[xt],_t=or.cross(Ho,Vn,Ct),Fr=or.length(_t);Fr>.05&&Fr>lr&&(lr=Fr,Gn=Ct)}Gn||(Gn=or.orthogonal(Ho,Vn));const Fr=or.cross(Ho,Vn,Gn);or.normalize(Fr,Fr);const Hr=or.cross(Qo,Fr,Vn),Eo=xo({center:[Ct[0],Ct[1],Ct[2]],radius:_t,segments:Ro,axes:[Vn,Fr,Hr]});Io=Mo(Io,Eo)})),Eo(Io)}},{"../../geometries/geom3":159,"../../geometries/poly3":197,"../../maths/constants":212,"../../maths/mat4":261,"../../maths/vec3":340,"../../primitives/sphere":503,"../../utils/fnNumberSort":516,"../booleans/unionGeom3Sub":406,"../modifiers/retessellate":473,"./extrudePolygon":412}],412:[function(xt,Ct,_t){const $t=xt("../../maths/mat4"),Vn=xt("../../maths/vec3"),Gn=xt("../../geometries/geom3"),or=xt("../../geometries/poly3");Ct.exports=(xt,Ct)=>{Vn.dot(or.plane(Ct),xt)>0&&(Ct=or.invert(Ct));const _t=[Ct],lr=or.transform($t.fromTranslation($t.create(),xt),Ct),Fr=Ct.vertices.length;for(let xt=0;xt<Fr;xt++){const $t=xt<Fr-1?xt+1:0,Vn=or.create([Ct.vertices[xt],lr.vertices[xt],lr.vertices[$t],Ct.vertices[$t]]);_t.push(Vn)}return _t.push(or.invert(lr)),Gn.create(_t)}},{"../../geometries/geom3":159,"../../geometries/poly3":197,"../../maths/mat4":261,"../../maths/vec3":340}],413:[function(xt,Ct,_t){Ct.exports={expand:xt("./expand"),offset:xt("./offset")}},{"./expand":407,"./offset":414}],414:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom2"),Gn=xt("../../geometries/path2"),or=xt("./offsetGeom2"),lr=xt("./offsetPath2");Ct.exports=(xt,...Ct)=>{if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");const _t=Ct.map((Ct=>Gn.isA(Ct)?lr(xt,Ct):Vn.isA(Ct)?or(xt,Ct):Ct));return 1===_t.length?_t[0]:_t}},{"../../geometries/geom2":144,"../../geometries/path2":180,"../../utils/flatten":515,"./offsetGeom2":416,"./offsetPath2":417}],415:[function(xt,Ct,_t){const{EPS:$t,TAU:Vn}=xt("../../maths/constants"),Gn=xt("../../maths/utils/intersect"),or=xt("../../maths/line2"),lr=xt("../../maths/vec2"),Fr=xt("../../maths/utils/area");Ct.exports=(xt,Ct)=>{let{delta:_t,corners:Hr,closed:xo,segments:Eo}=Object.assign({},{delta:1,corners:"edge",closed:!1,segments:16},xt);if(Math.abs(_t)<$t)return Ct;let Mo=xt.closed?Fr(Ct):1;0===Mo&&(Mo=1);const Oo=Mo>0&&_t>=0||Mo<0&&_t<0;_t=Math.abs(_t);let Ro=null,Io=[];const Bo=[],zo=lr.create(),Ho=Ct.length;for(let xt=0;xt<Ho;xt++){const $t=(xt+1)%Ho,Vn=Ct[xt],or=Ct[$t];Oo?lr.subtract(zo,Vn,or):lr.subtract(zo,or,Vn),lr.normal(zo,zo),lr.normalize(zo,zo),lr.scale(zo,zo,_t);const Fr=lr.add(lr.create(),Vn,zo),Hr=lr.add(lr.create(),or,zo),Eo=[Fr,Hr];if(null!=Ro&&(xo||!xo&&0!==$t)){const xt=Gn(Ro[0],Ro[1],Eo[0],Eo[1]);xt?(Io.pop(),Eo[0]=xt):Bo.push({c:Vn,s0:Ro,s1:Eo})}Ro=[Fr,Hr],(0!==$t||xo)&&(Io.push(Eo[0]),Io.push(Eo[1]))}if(xo&&null!=Ro){const xt=Io[0],_t=Io[1],$t=Gn(Ro[0],Ro[1],xt,_t);if($t)Io[0]=$t,Io.pop();else{const $t=Ct[0],Vn=[xt,_t];Bo.push({c:$t,s0:Ro,s1:Vn})}}if("edge"===Hr){const xt=new Map;Io.forEach(((Ct,_t)=>xt.set(Ct,_t)));const Ct=or.create(),_t=or.create();Bo.forEach(($t=>{or.fromPoints(Ct,$t.s0[0],$t.s0[1]),or.fromPoints(_t,$t.s1[0],$t.s1[1]);const Vn=or.intersectPointOfLines(Ct,_t);if(Number.isFinite(Vn[0])&&Number.isFinite(Vn[1])){const Ct=$t.s0[1],_t=xt.get(Ct);Io[_t]=Vn,Io[(_t+1)%Io.length]=void 0}else{const Ct=$t.s1[0],_t=xt.get(Ct);Io[_t]=void 0}})),Io=Io.filter((xt=>void 0!==xt))}if("round"===Hr){let xt=Math.floor(Eo/4);const Ct=lr.create();Bo.forEach(($t=>{let Gn=lr.angle(lr.subtract(Ct,$t.s1[0],$t.c));if(Gn-=lr.angle(lr.subtract(Ct,$t.s0[1],$t.c)),Oo&&Gn<0&&(Gn+=Math.PI)<0&&(Gn+=Math.PI),!Oo&&Gn>0&&(Gn-=Math.PI)>0&&(Gn-=Math.PI),0!==Gn){const or=Gn/(xt=Math.floor(Eo*(Math.abs(Gn)/Vn))),Fr=lr.angle(lr.subtract(Ct,$t.s0[1],$t.c)),Hr=[];for(let Ct=1;Ct<xt;Ct++){const xt=Fr+or*Ct,Vn=lr.fromAngleRadians(lr.create(),xt);lr.scale(Vn,Vn,_t),lr.add(Vn,Vn,$t.c),Hr.push(Vn)}if(Hr.length>0){const xt=$t.s0[1];let Ct=Io.findIndex((Ct=>lr.equals(xt,Ct)));Ct=(Ct+1)%Io.length,Io.splice(Ct,0,...Hr)}}else{const xt=$t.s1[0],Ct=Io.findIndex((Ct=>lr.equals(xt,Ct)));Io.splice(Ct,1)}}))}return Io}},{"../../maths/constants":212,"../../maths/line2":223,"../../maths/utils/area":286,"../../maths/utils/intersect":289,"../../maths/vec2":309}],416:[function(xt,Ct,_t){const $t=xt("../../geometries/geom2"),Vn=xt("../../geometries/poly2"),Gn=xt("./offsetFromPoints");Ct.exports=(xt,Ct)=>{const{delta:_t,corners:or,segments:lr}=Object.assign({},{delta:1,corners:"edge",segments:0},xt);if("edge"!==or&&"chamfer"!==or&&"round"!==or)throw new Error('corners must be "edge", "chamfer", or "round"');const Fr=$t.toOutlines(Ct),Hr=Fr.map((Ct=>{const $t=Fr.reduce(((xt,_t)=>xt+Vn.arePointsInside(Ct,Vn.create(_t))),0);return Gn(xt={delta:$t%2==0?_t:-_t,corners:or,closed:!0,segments:lr},Ct)})).reduce(((xt,Ct)=>xt.concat($t.toSides($t.fromPoints(Ct)))),[]);return $t.create(Hr)}},{"../../geometries/geom2":144,"../../geometries/poly2":191,"./offsetFromPoints":415}],417:[function(xt,Ct,_t){const $t=xt("../../geometries/path2"),Vn=xt("./offsetFromPoints");Ct.exports=(xt,Ct)=>{const _t={delta:1,corners:"edge",closed:Ct.isClosed,segments:16},{delta:Gn,corners:or,closed:lr,segments:Fr}=Object.assign({},_t,xt);if("edge"!==or&&"chamfer"!==or&&"round"!==or)throw new Error('corners must be "edge", "chamfer", or "round"');const Hr=Vn(xt={delta:Gn,corners:or,closed:lr,segments:Fr},$t.toPoints(Ct));return $t.fromPoints({closed:lr},Hr)}},{"../../geometries/path2":180,"./offsetFromPoints":415}],418:[function(xt,Ct,_t){const{area:$t}=xt("../../../maths/utils"),{toOutlines:Vn}=xt("../../../geometries/geom2"),{arePointsInside:Gn}=xt("../../../geometries/poly2"),minIndex=(xt,Ct)=>{let _t,$t;return xt.forEach(((xt,Vn)=>{const Gn=Ct(xt);(void 0===$t||Gn<$t)&&(_t=Vn,$t=Gn)})),_t};Ct.exports=xt=>{const Ct=Vn(xt),_t=[],or=[];Ct.forEach(((xt,Ct)=>{const Vn=$t(xt);Vn<0?or.push(Ct):Vn>0&&_t.push(Ct)}));const lr=[],Fr=[];return _t.forEach(((xt,_t)=>{const $t=Ct[xt];lr[_t]=[],or.forEach(((xt,Vn)=>{const or=Ct[xt];Gn([or[0]],{vertices:$t})&&(lr[_t].push(xt),Fr[Vn]||(Fr[Vn]=[]),Fr[Vn].push(_t))}))})),or.forEach(((xt,Ct)=>{if(Fr[Ct]&&Fr[Ct].length>1){const _t=minIndex(Fr[Ct],(xt=>lr[xt].length));Fr[Ct].forEach(((Ct,$t)=>{$t!==_t&&(lr[Ct]=lr[Ct].filter((Ct=>Ct!==xt)))}))}})),lr.map(((xt,$t)=>({solid:Ct[_t[$t]],holes:xt.map((xt=>Ct[xt]))})))}},{"../../../geometries/geom2":144,"../../../geometries/poly2":191,"../../../maths/utils":287}],419:[function(xt,Ct,_t){const{filterPoints:$t,linkedPolygon:Vn,locallyInside:Gn,splitPolygon:or}=xt("./linkedPolygon"),{area:lr,pointInTriangle:Fr}=xt("./triangle"),eliminateHole=(xt,Ct)=>{const _t=findHoleBridge(xt,Ct);if(!_t)return Ct;const Vn=or(_t,xt),Gn=$t(_t,_t.next);return $t(Vn,Vn.next),Ct===_t?Gn:Ct},findHoleBridge=(xt,Ct)=>{let _t=Ct;const $t=xt.x,Vn=xt.y;let or,lr=-1/0;do{if(Vn<=_t.y&&Vn>=_t.next.y&&_t.next.y!==_t.y){const xt=_t.x+(Vn-_t.y)*(_t.next.x-_t.x)/(_t.next.y-_t.y);if(xt<=$t&&xt>lr){if(lr=xt,xt===$t){if(Vn===_t.y)return _t;if(Vn===_t.next.y)return _t.next}or=_t.x<_t.next.x?_t:_t.next}}_t=_t.next}while(_t!==Ct);if(!or)return null;if($t===lr)return or;const Hr=or,xo=or.x,Eo=or.y;let Mo=1/0;_t=or;do{if($t>=_t.x&&_t.x>=xo&&$t!==_t.x&&Fr(Vn<Eo?$t:lr,Vn,xo,Eo,Vn<Eo?lr:$t,Vn,_t.x,_t.y)){const Ct=Math.abs(Vn-_t.y)/($t-_t.x);Gn(_t,xt)&&(Ct<Mo||Ct===Mo&&(_t.x>or.x||_t.x===or.x&&sectorContainsSector(or,_t)))&&(or=_t,Mo=Ct)}_t=_t.next}while(_t!==Hr);return or},sectorContainsSector=(xt,Ct)=>lr(xt.prev,xt,Ct.prev)<0&&lr(Ct.next,xt,xt.next)<0,getLeftmost=xt=>{let Ct=xt,_t=xt;do{(Ct.x<_t.x||Ct.x===_t.x&&Ct.y<_t.y)&&(_t=Ct),Ct=Ct.next}while(Ct!==xt);return _t};Ct.exports=(xt,Ct,_t,Gn)=>{const or=[];for(let _t=0,$t=Ct.length;_t<$t;_t++){const lr=Ct[_t]*Gn,Fr=_t<$t-1?Ct[_t+1]*Gn:xt.length,Hr=Vn(xt,lr,Fr,Gn,!1);Hr===Hr.next&&(Hr.steiner=!0),or.push(getLeftmost(Hr))}or.sort(((xt,Ct)=>xt.x-Ct.x));for(let xt=0;xt<or.length;xt++)_t=eliminateHole(or[xt],_t),_t=$t(_t,_t.next);return _t}},{"./linkedPolygon":423,"./triangle":425}],420:[function(xt,Ct,_t){const $t=xt("./eliminateHoles"),{removeNode:Vn,sortLinked:Gn}=xt("./linkedList"),{cureLocalIntersections:or,filterPoints:lr,isValidDiagonal:Fr,linkedPolygon:Hr,splitPolygon:xo}=xt("./linkedPolygon"),{area:Eo,pointInTriangle:Mo}=xt("./triangle"),earcutLinked=(xt,Ct,_t,$t,Gn,Fr,Hr)=>{if(!xt)return;!Hr&&Fr&&indexCurve(xt,$t,Gn,Fr);let xo,Eo,Mo=xt;for(;xt.prev!==xt.next;)if(xo=xt.prev,Eo=xt.next,Fr?isEarHashed(xt,$t,Gn,Fr):isEar(xt))Ct.push(xo.i/_t),Ct.push(xt.i/_t),Ct.push(Eo.i/_t),Vn(xt),xt=Eo.next,Mo=Eo.next;else if((xt=Eo)===Mo){Hr?1===Hr?(xt=or(lr(xt),Ct,_t),earcutLinked(xt,Ct,_t,$t,Gn,Fr,2)):2===Hr&&splitEarcut(xt,Ct,_t,$t,Gn,Fr):earcutLinked(lr(xt),Ct,_t,$t,Gn,Fr,1);break}},isEar=xt=>{const Ct=xt.prev,_t=xt,$t=xt.next;if(Eo(Ct,_t,$t)>=0)return!1;let Vn=xt.next.next;for(;Vn!==xt.prev;){if(Mo(Ct.x,Ct.y,_t.x,_t.y,$t.x,$t.y,Vn.x,Vn.y)&&Eo(Vn.prev,Vn,Vn.next)>=0)return!1;Vn=Vn.next}return!0},isEarHashed=(xt,Ct,_t,$t)=>{const Vn=xt.prev,Gn=xt,or=xt.next;if(Eo(Vn,Gn,or)>=0)return!1;const lr=Vn.x<Gn.x?Vn.x<or.x?Vn.x:or.x:Gn.x<or.x?Gn.x:or.x,Fr=Vn.y<Gn.y?Vn.y<or.y?Vn.y:or.y:Gn.y<or.y?Gn.y:or.y,Hr=Vn.x>Gn.x?Vn.x>or.x?Vn.x:or.x:Gn.x>or.x?Gn.x:or.x,xo=Vn.y>Gn.y?Vn.y>or.y?Vn.y:or.y:Gn.y>or.y?Gn.y:or.y,Oo=zOrder(lr,Fr,Ct,_t,$t),Ro=zOrder(Hr,xo,Ct,_t,$t);let Io=xt.prevZ,Bo=xt.nextZ;for(;Io&&Io.z>=Oo&&Bo&&Bo.z<=Ro;){if(Io!==xt.prev&&Io!==xt.next&&Mo(Vn.x,Vn.y,Gn.x,Gn.y,or.x,or.y,Io.x,Io.y)&&Eo(Io.prev,Io,Io.next)>=0)return!1;if(Io=Io.prevZ,Bo!==xt.prev&&Bo!==xt.next&&Mo(Vn.x,Vn.y,Gn.x,Gn.y,or.x,or.y,Bo.x,Bo.y)&&Eo(Bo.prev,Bo,Bo.next)>=0)return!1;Bo=Bo.nextZ}for(;Io&&Io.z>=Oo;){if(Io!==xt.prev&&Io!==xt.next&&Mo(Vn.x,Vn.y,Gn.x,Gn.y,or.x,or.y,Io.x,Io.y)&&Eo(Io.prev,Io,Io.next)>=0)return!1;Io=Io.prevZ}for(;Bo&&Bo.z<=Ro;){if(Bo!==xt.prev&&Bo!==xt.next&&Mo(Vn.x,Vn.y,Gn.x,Gn.y,or.x,or.y,Bo.x,Bo.y)&&Eo(Bo.prev,Bo,Bo.next)>=0)return!1;Bo=Bo.nextZ}return!0},splitEarcut=(xt,Ct,_t,$t,Vn,Gn)=>{let or=xt;do{let xt=or.next.next;for(;xt!==or.prev;){if(or.i!==xt.i&&Fr(or,xt)){let Fr=xo(or,xt);return or=lr(or,or.next),Fr=lr(Fr,Fr.next),earcutLinked(or,Ct,_t,$t,Vn,Gn),void earcutLinked(Fr,Ct,_t,$t,Vn,Gn)}xt=xt.next}or=or.next}while(or!==xt)},indexCurve=(xt,Ct,_t,$t)=>{let Vn=xt;do{null===Vn.z&&(Vn.z=zOrder(Vn.x,Vn.y,Ct,_t,$t)),Vn.prevZ=Vn.prev,Vn.nextZ=Vn.next,Vn=Vn.next}while(Vn!==xt);Vn.prevZ.nextZ=null,Vn.prevZ=null,Gn(Vn,(xt=>xt.z))},zOrder=(xt,Ct,_t,$t,Vn)=>(xt=1431655765&((xt=858993459&((xt=252645135&((xt=16711935&((xt=32767*(xt-_t)*Vn)|xt<<8))|xt<<4))|xt<<2))|xt<<1))|(Ct=1431655765&((Ct=858993459&((Ct=252645135&((Ct=16711935&((Ct=32767*(Ct-$t)*Vn)|Ct<<8))|Ct<<4))|Ct<<2))|Ct<<1))<<1;Ct.exports=(xt,Ct,_t=2)=>{const Vn=Ct&&Ct.length,Gn=Vn?Ct[0]*_t:xt.length;let or=Hr(xt,0,Gn,_t,!0);const lr=[];if(!or||or.next===or.prev)return lr;let Fr,xo,Eo,Mo,Oo;if(Vn&&(or=$t(xt,Ct,or,_t)),xt.length>80*_t){Fr=Eo=xt[0],xo=Mo=xt[1];for(let Ct=_t;Ct<Gn;Ct+=_t){const _t=xt[Ct],$t=xt[Ct+1];_t<Fr&&(Fr=_t),$t<xo&&(xo=$t),_t>Eo&&(Eo=_t),$t>Mo&&(Mo=$t)}Oo=0!==(Oo=Math.max(Eo-Fr,Mo-xo))?1/Oo:0}return earcutLinked(or,lr,_t,Fr,xo,Oo),lr}},{"./eliminateHoles":419,"./linkedList":421,"./linkedPolygon":423,"./triangle":425}],421:[function(xt,Ct,_t){const $t=xt("./linkedListSort");class Node{constructor(xt,Ct,_t){this.i=xt,this.x=Ct,this.y=_t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}}Ct.exports={Node:Node,insertNode:(xt,Ct,_t,$t)=>{const Vn=new Node(xt,Ct,_t);return $t?(Vn.next=$t.next,Vn.prev=$t,$t.next.prev=Vn,$t.next=Vn):(Vn.prev=Vn,Vn.next=Vn),Vn},removeNode:xt=>{xt.next.prev=xt.prev,xt.prev.next=xt.next,xt.prevZ&&(xt.prevZ.nextZ=xt.nextZ),xt.nextZ&&(xt.nextZ.prevZ=xt.prevZ)},sortLinked:$t}},{"./linkedListSort":422}],422:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{let _t,$t,Vn,Gn,or,lr=1;do{$t=xt,xt=null;let Fr=null;for(or=0;$t;){or++,Vn=$t;let Hr=0;for(_t=0;_t<lr&&(Hr++,Vn=Vn.nextZ);_t++);let xo=lr;for(;Hr>0||xo>0&&Vn;)0!==Hr&&(0===xo||!Vn||Ct($t)<=Ct(Vn))?(Gn=$t,$t=$t.nextZ,Hr--):(Gn=Vn,Vn=Vn.nextZ,xo--),Fr?Fr.nextZ=Gn:xt=Gn,Gn.prevZ=Fr,Fr=Gn;$t=Vn}Fr.nextZ=null,lr*=2}while(or>1);return xt}},{}],423:[function(xt,Ct,_t){const{Node:$t,insertNode:Vn,removeNode:Gn}=xt("./linkedList"),{area:or}=xt("./triangle"),filterPoints=(xt,Ct)=>{if(!xt)return xt;Ct||(Ct=xt);let _t,$t=xt;do{if(_t=!1,$t.steiner||!equals($t,$t.next)&&0!==or($t.prev,$t,$t.next))$t=$t.next;else{if(Gn($t),($t=Ct=$t.prev)===$t.next)break;_t=!0}}while(_t||$t!==Ct);return Ct},locallyInside=(xt,Ct)=>or(xt.prev,xt,xt.next)<0?or(xt,Ct,xt.next)>=0&&or(xt,xt.prev,Ct)>=0:or(xt,Ct,xt.prev)<0||or(xt,xt.next,Ct)<0,intersects=(xt,Ct,_t,$t)=>{const Vn=Math.sign(or(xt,Ct,_t)),Gn=Math.sign(or(xt,Ct,$t)),lr=Math.sign(or(_t,$t,xt)),Fr=Math.sign(or(_t,$t,Ct));return Vn!==Gn&&lr!==Fr||!(0!==Vn||!onSegment(xt,_t,Ct))||!(0!==Gn||!onSegment(xt,$t,Ct))||!(0!==lr||!onSegment(_t,xt,$t))||!(0!==Fr||!onSegment(_t,Ct,$t))},onSegment=(xt,Ct,_t)=>Ct.x<=Math.max(xt.x,_t.x)&&Ct.x>=Math.min(xt.x,_t.x)&&Ct.y<=Math.max(xt.y,_t.y)&&Ct.y>=Math.min(xt.y,_t.y),signedArea=(xt,Ct,_t,$t)=>{let Vn=0;for(let Gn=Ct,or=_t-$t;Gn<_t;Gn+=$t)Vn+=(xt[or]-xt[Gn])*(xt[Gn+1]+xt[or+1]),or=Gn;return Vn},equals=(xt,Ct)=>xt.x===Ct.x&&xt.y===Ct.y;Ct.exports={cureLocalIntersections:(xt,Ct,_t)=>{let $t=xt;do{const Vn=$t.prev,or=$t.next.next;!equals(Vn,or)&&intersects(Vn,$t,$t.next,or)&&locallyInside(Vn,or)&&locallyInside(or,Vn)&&(Ct.push(Vn.i/_t),Ct.push($t.i/_t),Ct.push(or.i/_t),Gn($t),Gn($t.next),$t=xt=or),$t=$t.next}while($t!==xt);return filterPoints($t)},filterPoints:filterPoints,isValidDiagonal:(xt,Ct)=>xt.next.i!==Ct.i&&xt.prev.i!==Ct.i&&!((xt,Ct)=>{let _t=xt;do{if(_t.i!==xt.i&&_t.next.i!==xt.i&&_t.i!==Ct.i&&_t.next.i!==Ct.i&&intersects(_t,_t.next,xt,Ct))return!0;_t=_t.next}while(_t!==xt);return!1})(xt,Ct)&&(locallyInside(xt,Ct)&&locallyInside(Ct,xt)&&((xt,Ct)=>{let _t=xt,$t=!1;const Vn=(xt.x+Ct.x)/2,Gn=(xt.y+Ct.y)/2;do{_t.y>Gn!=_t.next.y>Gn&&_t.next.y!==_t.y&&Vn<(_t.next.x-_t.x)*(Gn-_t.y)/(_t.next.y-_t.y)+_t.x&&($t=!$t),_t=_t.next}while(_t!==xt);return $t})(xt,Ct)&&(or(xt.prev,xt,Ct.prev)||or(xt,Ct.prev,Ct))||equals(xt,Ct)&&or(xt.prev,xt,xt.next)>0&&or(Ct.prev,Ct,Ct.next)>0),linkedPolygon:(xt,Ct,_t,$t,or)=>{let lr;if(or===signedArea(xt,Ct,_t,$t)>0)for(let Gn=Ct;Gn<_t;Gn+=$t)lr=Vn(Gn,xt[Gn],xt[Gn+1],lr);else for(let Gn=_t-$t;Gn>=Ct;Gn-=$t)lr=Vn(Gn,xt[Gn],xt[Gn+1],lr);return lr&&equals(lr,lr.next)&&(Gn(lr),lr=lr.next),lr},locallyInside:locallyInside,splitPolygon:(xt,Ct)=>{const _t=new $t(xt.i,xt.x,xt.y),Vn=new $t(Ct.i,Ct.x,Ct.y),Gn=xt.next,or=Ct.prev;return xt.next=Ct,Ct.prev=xt,_t.next=Gn,Gn.prev=_t,Vn.next=_t,_t.prev=Vn,or.next=Vn,Vn.prev=or,Vn}}},{"./linkedList":421,"./triangle":425}],424:[function(xt,Ct,_t){const $t=xt("../../../geometries/geom2"),Vn=xt("../../../maths/plane"),Gn=xt("../../../maths/vec2"),or=xt("../../../maths/vec3"),lr=xt("../slice/calculatePlane"),Fr=xt("./assignHoles");Ct.exports=class PolygonHierarchy{constructor(xt){this.plane=lr(xt);const Ct=or.orthogonal(or.create(),this.plane),_t=or.cross(or.create(),this.plane,Ct);this.v=or.normalize(_t,_t),this.u=or.cross(or.create(),this.v,this.plane),this.basisMap=new Map;const Vn=xt.edges.map((xt=>xt.map((xt=>this.to2D(xt))))),Gn=$t.create(Vn);this.roots=Fr(Gn)}to2D(xt){const Ct=Gn.fromValues(or.dot(xt,this.u),or.dot(xt,this.v));return this.basisMap.set(Ct,xt),Ct}to3D(xt){const Ct=this.basisMap.get(xt);if(Ct)return Ct;{console.log("Warning: point not in original slice");const Ct=or.scale(or.create(),this.u,xt[0]),_t=or.scale(or.create(),this.v,xt[1]),$t=or.scale(or.create(),Vn,Vn[3]),Gn=or.add(Ct,Ct,$t);return or.add(_t,_t,Gn)}}}},{"../../../geometries/geom2":144,"../../../maths/plane":281,"../../../maths/vec2":309,"../../../maths/vec3":340,"../slice/calculatePlane":438,"./assignHoles":418}],425:[function(xt,Ct,_t){Ct.exports={area:(xt,Ct,_t)=>(Ct.y-xt.y)*(_t.x-Ct.x)-(Ct.x-xt.x)*(_t.y-Ct.y),pointInTriangle:(xt,Ct,_t,$t,Vn,Gn,or,lr)=>(Vn-or)*(Ct-lr)-(xt-or)*(Gn-lr)>=0&&(xt-or)*($t-lr)-(_t-or)*(Ct-lr)>=0&&(_t-or)*(Gn-lr)-(Vn-or)*($t-lr)>=0}},{}],426:[function(xt,Ct,_t){const $t=xt("../../maths/mat4"),Vn=xt("../../geometries/geom2"),Gn=xt("../../geometries/geom3"),or=xt("../../geometries/poly3"),lr=xt("./slice"),Fr=xt("./slice/repair"),Hr=xt("./extrudeWalls"),defaultCallback=(xt,Ct,_t)=>{let Gn=null;return Vn.isA(_t)&&(Gn=lr.fromSides(Vn.toSides(_t))),or.isA(_t)&&(Gn=lr.fromPoints(or.toPoints(_t))),0===xt||1===xt?lr.transform($t.fromTranslation($t.create(),[0,0,xt]),Gn):null};Ct.exports=(xt,Ct)=>{const _t={numberOfSlices:2,capStart:!0,capEnd:!0,close:!1,repair:!0,callback:defaultCallback},{numberOfSlices:$t,capStart:Vn,capEnd:xo,close:Eo,repair:Mo,callback:Oo}=Object.assign({},_t,xt);if($t<2)throw new Error("numberOfSlices must be 2 or more");Mo&&(Ct=Fr(Ct));const Ro=$t-1;let Io=null,Bo=null,zo=null,Ho=[];for(let xt=0;xt<$t;xt++){const _t=Oo(xt/Ro,xt,Ct);if(_t){if(!lr.isA(_t))throw new Error("the callback function must return slice objects");if(0===lr.toEdges(_t).length)throw new Error("the callback function must return slices with one or more edges");zo&&(Ho=Ho.concat(Hr(zo,_t))),0===xt&&(Io=_t),xt===$t-1&&(Bo=_t),zo=_t}}if(xo){const xt=lr.toPolygons(Bo);Ho=Ho.concat(xt)}if(Vn){const xt=lr.toPolygons(Io).map(or.invert);Ho=Ho.concat(xt)}return Vn||xo||Eo&&!lr.equals(Bo,Io)&&(Ho=Ho.concat(Hr(Bo,Io))),Gn.create(Ho)}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/poly3":197,"../../maths/mat4":261,"./extrudeWalls":435,"./slice":444,"./slice/repair":446}],427:[function(xt,Ct,_t){const{TAU:$t}=xt("../../maths/constants"),Vn=xt("./slice"),Gn=xt("../../maths/mat4"),or=xt("./extrudeFromSlices"),lr=xt("../../geometries/geom2");Ct.exports=(xt,Ct)=>{const _t={angle:$t,startAngle:0,pitch:10,endOffset:0,segmentsPerRotation:32},{angle:Fr,endOffset:Hr,segmentsPerRotation:xo,startAngle:Eo}=Object.assign({},_t,xt);let Mo;if(Mo=!xt.pitch&&xt.height?xt.height/(Fr/$t):xt.pitch?xt.pitch:_t.pitch,xo<3)throw new Error("The number of segments per rotation needs to be at least 3.");const Oo=lr.toSides(Ct);if(0===Oo.length)throw new Error("the given geometry cannot be empty");const Ro=Oo.filter((xt=>xt[0][0]>=0));let Io=Vn.fromSides(Oo);0===Ro.length&&(Io=Vn.reverse(Io));const Bo=Math.round(xo/$t*Math.abs(Fr)),zo=Bo>=2?Bo:2,Ho=Gn.create();let Qo;return or({numberOfSlices:zo+1,callback:(xt,Ct,_t)=>{const or=Eo+Fr/zo*Ct,lr=Hr/zo*Ct,xo=(or-Eo)/$t*Mo;return Gn.multiply(Ho,Gn.fromTranslation(Gn.create(),[lr,0,xo*Math.sign(Fr)]),Gn.fromXRotation(Gn.create(),-$t/4*Math.sign(Fr))),Qo=Gn.create(),Gn.multiply(Qo,Gn.fromZRotation(Gn.create(),or),Ho),Vn.transform(Qo,_t)}},Io)}},{"../../geometries/geom2":144,"../../maths/constants":212,"../../maths/mat4":261,"./extrudeFromSlices":426,"./slice":444}],428:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom2"),Gn=xt("../../geometries/path2"),or=xt("./extrudeLinearGeom2"),lr=xt("./extrudeLinearPath2");Ct.exports=(xt,...Ct)=>{const{height:_t,twistAngle:Fr,twistSteps:Hr,repair:xo}=Object.assign({},{height:1,twistAngle:0,twistSteps:1,repair:!0},xt);if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");xt={offset:[0,0,_t],twistAngle:Fr,twistSteps:Hr,repair:xo};const Eo=Ct.map((Ct=>Gn.isA(Ct)?lr(xt,Ct):Vn.isA(Ct)?or(xt,Ct):Ct));return 1===Eo.length?Eo[0]:Eo}},{"../../geometries/geom2":144,"../../geometries/path2":180,"../../utils/flatten":515,"./extrudeLinearGeom2":429,"./extrudeLinearPath2":430}],429:[function(xt,Ct,_t){const $t=xt("../../maths/mat4"),Vn=xt("../../maths/vec3"),Gn=xt("../../geometries/geom2"),or=xt("./slice"),lr=xt("./extrudeFromSlices");Ct.exports=(xt,Ct)=>{let{offset:_t,twistAngle:Fr,twistSteps:Hr,repair:xo}=Object.assign({},{offset:[0,0,1],twistAngle:0,twistSteps:12,repair:!0},xt);if(Hr<1)throw new Error("twistSteps must be 1 or more");0===Fr&&(Hr=1);const Eo=Vn.clone(_t),Mo=Gn.toSides(Ct);if(0===Mo.length)throw new Error("the given geometry cannot be empty");const Oo=or.fromSides(Mo);Eo[2]<0&&or.reverse(Oo,Oo);const Ro=$t.create();return lr(xt={numberOfSlices:Hr+1,capStart:!0,capEnd:!0,repair:xo,callback:(xt,Ct,_t)=>{const Gn=Ct/Hr*Fr,lr=Vn.scale(Vn.create(),Eo,Ct/Hr);return $t.multiply(Ro,$t.fromZRotation(Ro,Gn),$t.fromTranslation($t.create(),lr)),or.transform(Ro,_t)}},Oo)}},{"../../geometries/geom2":144,"../../maths/mat4":261,"../../maths/vec3":340,"./extrudeFromSlices":426,"./slice":444}],430:[function(xt,Ct,_t){const $t=xt("../../geometries/geom2"),Vn=xt("../../geometries/path2"),Gn=xt("./extrudeLinearGeom2");Ct.exports=(xt,Ct)=>{if(!Ct.isClosed)throw new Error("extruded path must be closed");const _t=Vn.toPoints(Ct),or=$t.fromPoints(_t);return Gn(xt,or)}},{"../../geometries/geom2":144,"../../geometries/path2":180,"./extrudeLinearGeom2":429}],431:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom2"),Gn=xt("../../geometries/path2"),or=xt("./extrudeRectangularPath2"),lr=xt("./extrudeRectangularGeom2");Ct.exports=(xt,...Ct)=>{const{size:_t,height:Fr}=Object.assign({},{size:1,height:1},xt);if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");if(_t<=0)throw new Error("size must be positive");if(Fr<=0)throw new Error("height must be positive");const Hr=Ct.map((Ct=>Gn.isA(Ct)?or(xt,Ct):Vn.isA(Ct)?lr(xt,Ct):Ct));return 1===Hr.length?Hr[0]:Hr}},{"../../geometries/geom2":144,"../../geometries/path2":180,"../../utils/flatten":515,"./extrudeRectangularGeom2":432,"./extrudeRectangularPath2":433}],432:[function(xt,Ct,_t){const{area:$t}=xt("../../maths/utils"),Vn=xt("../../geometries/geom2"),Gn=xt("../../geometries/path2"),or=xt("../expansions/expand"),lr=xt("./extrudeLinearGeom2");Ct.exports=(xt,Ct)=>{const{size:_t,height:Fr}=Object.assign({},{size:1,height:1},xt);xt.delta=_t,xt.offset=[0,0,Fr];const Hr=Vn.toOutlines(Ct);if(0===Hr.length)throw new Error("the given geometry cannot be empty");const xo=Hr.map((Ct=>($t(Ct)<0&&Ct.reverse(),or(xt,Gn.fromPoints({closed:!0},Ct))))).reduce(((xt,Ct)=>xt.concat(Vn.toSides(Ct))),[]),Eo=Vn.create(xo);return lr(xt,Eo)}},{"../../geometries/geom2":144,"../../geometries/path2":180,"../../maths/utils":287,"../expansions/expand":407,"./extrudeLinearGeom2":429}],433:[function(xt,Ct,_t){const $t=xt("../../geometries/path2"),Vn=xt("../expansions/expand"),Gn=xt("./extrudeLinearGeom2");Ct.exports=(xt,Ct)=>{const{size:_t,height:or}=Object.assign({},{size:1,height:1},xt);if(xt.delta=_t,xt.offset=[0,0,or],0===$t.toPoints(Ct).length)throw new Error("the given geometry cannot be empty");const lr=Vn(xt,Ct);return Gn(xt,lr)}},{"../../geometries/path2":180,"../expansions/expand":407,"./extrudeLinearGeom2":429}],434:[function(xt,Ct,_t){const{TAU:$t}=xt("../../maths/constants"),Vn=xt("../../maths/mat4"),{mirrorX:Gn}=xt("../transforms/mirror"),or=xt("../../geometries/geom2"),lr=xt("./slice"),Fr=xt("./extrudeFromSlices");Ct.exports=(xt,Ct)=>{const _t={segments:12,startAngle:0,angle:$t,overflow:"cap"};let{segments:Hr,startAngle:xo,angle:Eo,overflow:Mo}=Object.assign({},_t,xt);if(Hr<3)throw new Error("segments must be greater then 3");xo=Math.abs(xo)>$t?xo%$t:xo,Eo=Math.abs(Eo)>$t?Eo%$t:Eo;let Oo=xo+Eo;if((Oo=Math.abs(Oo)>$t?Oo%$t:Oo)<xo){const xt=xo;xo=Oo,Oo=xt}let Ro=Oo-xo;if(Ro<=0&&(Ro=$t),Math.abs(Ro)<$t){const xt=$t/Hr;Hr=Math.floor(Math.abs(Ro)/xt),Math.abs(Ro)>Hr*xt&&Hr++}let Io=or.toSides(Ct);if(0===Io.length)throw new Error("the given geometry cannot be empty");const Bo=Io.filter((xt=>xt[0][0]<0)),zo=Io.filter((xt=>xt[0][0]>=0));Bo.length>0&&zo.length>0&&"cap"===Mo&&(Bo.length>zo.length?(Io=Io.map((xt=>{let Ct=xt[0],_t=xt[1];return[Ct=[Math.min(Ct[0],0),Ct[1]],_t=[Math.min(_t[0],0),_t[1]]]})),Ct=or.create(Io),Ct=Gn(Ct)):zo.length>=Bo.length&&(Io=Io.map((xt=>{let Ct=xt[0],_t=xt[1];return[Ct=[Math.max(Ct[0],0),Ct[1]],_t=[Math.max(_t[0],0),_t[1]]]})),Ct=or.create(Io)));const Ho=Ro/Hr,Qo=Math.abs(Ro)<$t,pi=lr.fromSides(or.toSides(Ct));lr.reverse(pi,pi);const gi=Vn.create();return Fr(xt={numberOfSlices:Hr+1,capStart:Qo,capEnd:Qo,close:!Qo,callback:(xt,Ct,_t)=>{let Gn=Ho*Ct+xo;return Ro===$t&&Ct===Hr&&(Gn=xo),Vn.multiply(gi,Vn.fromZRotation(gi,Gn),Vn.fromXRotation(Vn.create(),$t/4)),lr.transform(gi,_t)}},pi)}},{"../../geometries/geom2":144,"../../maths/constants":212,"../../maths/mat4":261,"../transforms/mirror":480,"./extrudeFromSlices":426,"./slice":444}],435:[function(xt,Ct,_t){const{EPS:$t}=xt("../../maths/constants"),Vn=xt("../../maths/vec3"),Gn=xt("../../geometries/poly3"),or=xt("./slice"),gcd=(xt,Ct)=>xt===Ct?xt:xt<Ct?gcd(Ct,xt):1===Ct?1:0===Ct?xt:gcd(Ct,xt%Ct),repartitionEdges=(xt,Ct)=>{const _t=xt/Ct.length;if(1===_t)return Ct;const $t=Vn.fromValues(_t,_t,_t),Gn=[];return Ct.forEach((xt=>{const Ct=Vn.subtract(Vn.create(),xt[1],xt[0]);Vn.divide(Ct,Ct,$t);let or=xt[0];for(let xt=1;xt<=_t;++xt){const xt=Vn.add(Vn.create(),or,Ct);Gn.push([or,xt]),or=xt}})),Gn},lr=$t*$t/2*Math.sin(Math.PI/3);Ct.exports=(xt,Ct)=>{let _t=or.toEdges(xt),$t=or.toEdges(Ct);if(_t.length!==$t.length){const xt=((xt,Ct)=>xt*Ct/gcd(xt,Ct))(_t.length,$t.length);xt!==_t.length&&(_t=repartitionEdges(xt,_t)),xt!==$t.length&&($t=repartitionEdges(xt,$t))}const Vn=[];return _t.forEach(((xt,Ct)=>{const _t=$t[Ct],or=Gn.create([xt[0],xt[1],_t[1]]),Fr=Gn.measureArea(or);Number.isFinite(Fr)&&Fr>lr&&Vn.push(or);const Hr=Gn.create([xt[0],_t[1],_t[0]]),xo=Gn.measureArea(Hr);Number.isFinite(xo)&&xo>lr&&Vn.push(Hr)})),Vn}},{"../../geometries/poly3":197,"../../maths/constants":212,"../../maths/vec3":340,"./slice":444}],436:[function(xt,Ct,_t){Ct.exports={extrudeFromSlices:xt("./extrudeFromSlices"),extrudeLinear:xt("./extrudeLinear"),extrudeRectangular:xt("./extrudeRectangular"),extrudeRotate:xt("./extrudeRotate"),extrudeHelical:xt("./extrudeHelical"),project:xt("./project"),slice:xt("./slice")}},{"./extrudeFromSlices":426,"./extrudeHelical":427,"./extrudeLinear":428,"./extrudeRectangular":431,"./extrudeRotate":434,"./project":437,"./slice":444}],437:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../maths/utils/aboutEqualNormals"),Gn=xt("../../maths/plane"),or=xt("../../maths/mat4"),lr=xt("../../geometries/geom2"),Fr=xt("../../geometries/geom3"),Hr=xt("../../geometries/poly3"),xo=xt("../../measurements/measureEpsilon"),Eo=xt("../booleans/unionGeom2");Ct.exports=(xt,...Ct)=>{const{axis:_t,origin:Mo}=Object.assign({},{axis:[0,0,1],origin:[0,0,0]},xt);if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");xt={axis:_t,origin:Mo};const Oo=Ct.map((Ct=>Fr.isA(Ct)?((xt,Ct)=>{const _t=Gn.fromNormalAndPoint(Gn.create(),xt.axis,xt.origin);if(Number.isNaN(_t[0])||Number.isNaN(_t[1])||Number.isNaN(_t[2])||Number.isNaN(_t[3]))throw new Error("project: invalid axis or origin");const $t=xo(Ct),Mo=$t*$t*Math.sqrt(3)/4;if(0===$t)return lr.create();const Oo=Fr.toPolygons(Ct);let Ro=[];for(let xt=0;xt<Oo.length;xt++){const Ct=Oo[xt].vertices.map((xt=>Gn.projectionOfPoint(_t,xt))),$t=Hr.create(Ct),or=Hr.plane($t);Vn(_t,or)&&(Hr.measureArea($t)<Mo||Ro.push($t))}if(!Vn(_t,[0,0,1])){const xt=or.fromVectorRotation(or.create(),_t,[0,0,1]);Ro=Ro.map((Ct=>Hr.transform(xt,Ct)))}const Io=(Ro=Ro.sort(((xt,Ct)=>Hr.measureArea(Ct)-Hr.measureArea(xt)))).map((xt=>lr.fromPoints(xt.vertices)));return Eo(Io)})(xt,Ct):Ct));return 1===Oo.length?Oo[0]:Oo}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/poly3":197,"../../maths/mat4":261,"../../maths/plane":281,"../../maths/utils/aboutEqualNormals":285,"../../measurements/measureEpsilon":381,"../../utils/flatten":515,"../booleans/unionGeom2":404}],438:[function(xt,Ct,_t){const $t=xt("../../../maths/plane"),Vn=xt("../../../maths/vec3");Ct.exports=xt=>{const Ct=xt.edges;if(Ct.length<3)throw new Error("slices must have 3 or more edges to calculate a plane");const _t=Ct.reduce(((xt,Ct)=>Vn.add(Vn.create(),xt,Ct[0])),Vn.create());let Gn;Vn.scale(_t,_t,1/Ct.length);let or=0;Ct.forEach((xt=>{if(!Vn.equals(xt[0],xt[1])){const Ct=Vn.squaredDistance(_t,xt[0]);Ct>or&&(Gn=xt,or=Ct)}}));const lr=Ct.find((xt=>Vn.equals(xt[1],Gn[0])));return $t.fromPoints($t.create(),lr[0],Gn[0],Gn[1])}},{"../../../maths/plane":281,"../../../maths/vec3":340}],439:[function(xt,Ct,_t){const $t=xt("./create"),Vn=xt("../../../maths/vec3");Ct.exports=(...xt)=>{let Ct,_t;return 1===xt.length?(Ct=$t(),_t=xt[0]):(Ct=xt[0],_t=xt[1]),Ct.edges=_t.edges.map((xt=>[Vn.clone(xt[0]),Vn.clone(xt[1])])),Ct}},{"../../../maths/vec3":340,"./create":440}],440:[function(xt,Ct,_t){Ct.exports=xt=>(xt||(xt=[]),{edges:xt})},{}],441:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3");Ct.exports=(xt,Ct)=>{const _t=xt.edges,Vn=Ct.edges;return _t.length===Vn.length&&_t.reduce(((xt,Ct,_t)=>{const Gn=Vn[_t],or=$t.squaredDistance(Ct[0],Gn[0]);return xt&&or<Number.EPSILON}),!0)}},{"../../../maths/vec3":340}],442:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3"),Vn=xt("./create");Ct.exports=xt=>{if(!Array.isArray(xt))throw new Error("the given points must be an array");if(xt.length<3)throw new Error("the given points must contain THREE or more points");const Ct=[];let _t=xt[xt.length-1];return xt.forEach((xt=>{2===xt.length&&Ct.push([$t.fromVec2($t.create(),_t),$t.fromVec2($t.create(),xt)]),3===xt.length&&Ct.push([_t,xt]),_t=xt})),Vn(Ct)}},{"../../../maths/vec3":340,"./create":440}],443:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3"),Vn=xt("./create");Ct.exports=xt=>{if(!Array.isArray(xt))throw new Error("the given sides must be an array");const Ct=[];return xt.forEach((xt=>{Ct.push([$t.fromVec2($t.create(),xt[0]),$t.fromVec2($t.create(),xt[1])])})),Vn(Ct)}},{"../../../maths/vec3":340,"./create":440}],444:[function(xt,Ct,_t){Ct.exports={calculatePlane:xt("./calculatePlane"),clone:xt("./clone"),create:xt("./create"),equals:xt("./equals"),fromPoints:xt("./fromPoints"),fromSides:xt("./fromSides"),isA:xt("./isA"),reverse:xt("./reverse"),toEdges:xt("./toEdges"),toPolygons:xt("./toPolygons"),toString:xt("./toString"),transform:xt("./transform")}},{"./calculatePlane":438,"./clone":439,"./create":440,"./equals":441,"./fromPoints":442,"./fromSides":443,"./isA":445,"./reverse":447,"./toEdges":448,"./toPolygons":449,"./toString":450,"./transform":451}],445:[function(xt,Ct,_t){Ct.exports=xt=>!!(xt&&"object"==typeof xt&&"edges"in xt&&Array.isArray(xt.edges))},{}],446:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3"),Vn=xt("./create");Ct.exports=xt=>{if(!xt.edges)return xt;let Ct=xt.edges;const _t=new Map,Gn=new Map;(Ct=Ct.filter((xt=>!$t.equals(xt[0],xt[1])))).forEach((xt=>{const Ct=xt[0].toString(),$t=xt[1].toString();_t.set(Ct,xt[0]),_t.set($t,xt[1]),Gn.set(Ct,(Gn.get(Ct)||0)+1),Gn.set($t,(Gn.get($t)||0)-1)}));const or=[],lr=[];return Gn.forEach(((xt,Ct)=>{xt<0&&or.push(Ct),xt>0&&lr.push(Ct)})),or.forEach((xt=>{const Vn=_t.get(xt);let Gn,or=1/0;lr.forEach((xt=>{const Ct=_t.get(xt),lr=$t.distance(Vn,Ct);lr<or&&(or=lr,Gn=Ct)})),console.warn(`slice.repair: repairing vertex gap ${Vn} to ${Gn} distance ${or}`),Ct=Ct.map((Ct=>Ct[0].toString()===xt?[Gn,Ct[1]]:Ct[1].toString()===xt?[Ct[0],Gn]:Ct))})),Vn(Ct)}},{"../../../maths/vec3":340,"./create":440}],447:[function(xt,Ct,_t){const $t=xt("./create");Ct.exports=(...xt)=>{let Ct,_t;return 1===xt.length?(Ct=$t(),_t=xt[0]):(Ct=xt[0],_t=xt[1]),Ct.edges=_t.edges.map((xt=>[xt[1],xt[0]])),Ct}},{"./create":440}],448:[function(xt,Ct,_t){Ct.exports=xt=>xt.edges},{}],449:[function(xt,Ct,_t){const $t=xt("../../../geometries/poly3"),Vn=xt("../earcut"),Gn=xt("../earcut/polygonHierarchy");Ct.exports=xt=>{const Ct=new Gn(xt),_t=[];return Ct.roots.forEach((({solid:xt,holes:Gn})=>{let or=xt.length;const lr=[];Gn.forEach(((xt,Ct)=>{lr.push(or),or+=xt.length}));const Fr=[xt,...Gn].flat(),Hr=Fr.flat(),a=xt=>Ct.to3D(Fr[xt]),xo=Vn(Hr,lr);for(let xt=0;xt<xo.length;xt+=3){const Vn=xo.slice(xt,xt+3).map(a);_t.push($t.fromPointsAndPlane(Vn,Ct.plane))}})),_t}},{"../../../geometries/poly3":197,"../earcut":420,"../earcut/polygonHierarchy":424}],450:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3");Ct.exports=xt=>`[${(xt=>xt.reduce(((xt,Ct)=>xt+`[${$t.toString(Ct[0])}, ${$t.toString(Ct[1])}], `),""))(xt.edges)}]`},{"../../../maths/vec3":340}],451:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3"),Vn=xt("./create");Ct.exports=(xt,Ct)=>{const _t=Ct.edges.map((Ct=>[$t.transform($t.create(),Ct[0],xt),$t.transform($t.create(),Ct[1],xt)]));return Vn(_t)}},{"../../../maths/vec3":340,"./create":440}],452:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../utils/areAllShapesTheSameType"),Gn=xt("../../geometries/geom2"),or=xt("../../geometries/geom3"),lr=xt("../../geometries/path2"),Fr=xt("./hullPath2"),Hr=xt("./hullGeom2"),xo=xt("./hullGeom3");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("wrong number of arguments");if(!Vn(xt))throw new Error("only hulls of the same type are supported");const Ct=xt[0];return lr.isA(Ct)?Fr(xt):Gn.isA(Ct)?Hr(xt):or.isA(Ct)?xo(xt):Ct}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180,"../../utils/areAllShapesTheSameType":513,"../../utils/flatten":515,"./hullGeom2":454,"./hullGeom3":455,"./hullPath2":456}],453:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../booleans/union"),Gn=xt("./hull");Ct.exports=(...xt)=>{if((xt=$t(xt)).length<2)throw new Error("wrong number of arguments");const Ct=[];for(let _t=1;_t<xt.length;_t++)Ct.push(Gn(xt[_t-1],xt[_t]));return Vn(Ct)}},{"../../utils/flatten":515,"../booleans/union":403,"./hull":452}],454:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom2"),Gn=xt("./hullPoints2"),or=xt("./toUniquePoints");Ct.exports=(...xt)=>{xt=$t(xt);const Ct=or(xt),_t=Gn(Ct);return _t.length<3?Vn.create():Vn.fromPoints(_t)}},{"../../geometries/geom2":144,"../../utils/flatten":515,"./hullPoints2":457,"./toUniquePoints":467}],455:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom3"),Gn=xt("../../geometries/poly3"),or=xt("./quickhull"),lr=xt("./toUniquePoints");Ct.exports=(...xt)=>{if(1===(xt=$t(xt)).length)return xt[0];const Ct=lr(xt),_t=or(Ct,{skipTriangulation:!0}).map((xt=>{const _t=xt.map((xt=>Ct[xt]));return Gn.create(_t)}));return Vn.create(_t)}},{"../../geometries/geom3":159,"../../geometries/poly3":197,"../../utils/flatten":515,"./quickhull":465,"./toUniquePoints":467}],456:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/path2"),Gn=xt("./hullPoints2"),or=xt("./toUniquePoints");Ct.exports=(...xt)=>{xt=$t(xt);const Ct=or(xt),_t=Gn(Ct);return Vn.fromPoints({closed:!0},_t)}},{"../../geometries/path2":180,"../../utils/flatten":515,"./hullPoints2":457,"./toUniquePoints":467}],457:[function(xt,Ct,_t){const $t=xt("../../maths/vec2"),ccw=(xt,Ct,_t)=>(Ct[0]-xt[0])*(_t[1]-xt[1])-(Ct[1]-xt[1])*(_t[0]-xt[0]),fakeAtan2=(xt,Ct)=>0===xt&&0===Ct?-1/0:-Ct/xt;Ct.exports=xt=>{let Ct=$t.fromValues(1/0,1/0);xt.forEach((xt=>{(xt[1]<Ct[1]||xt[1]===Ct[1]&&xt[0]<Ct[0])&&(Ct=xt)}));const _t=[];xt.forEach((xt=>{const Vn=fakeAtan2(xt[1]-Ct[1],xt[0]-Ct[0]),Gn=$t.squaredDistance(xt,Ct);_t.push({point:xt,angle:Vn,distSq:Gn})})),_t.sort(((xt,Ct)=>xt.angle!==Ct.angle?xt.angle-Ct.angle:xt.distSq-Ct.distSq));const Vn=[];return _t.forEach((xt=>{let Ct=Vn.length;for(;Ct>1&&ccw(Vn[Ct-2],Vn[Ct-1],xt.point)<=Number.EPSILON;)Vn.pop(),Ct=Vn.length;Vn.push(xt.point)})),Vn}},{"../../maths/vec2":309}],458:[function(xt,Ct,_t){Ct.exports={hull:xt("./hull"),hullChain:xt("./hullChain")}},{"./hull":452,"./hullChain":453}],459:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3/add"),Vn=xt("../../../maths/vec3/copy"),Gn=xt("../../../maths/vec3/cross"),or=xt("../../../maths/vec3/dot"),lr=xt("../../../maths/vec3/length"),Fr=xt("../../../maths/vec3/normalize"),Hr=xt("../../../maths/vec3/scale"),xo=xt("../../../maths/vec3/subtract"),Eo=xt("./HalfEdge");class Face{constructor(){this.normal=[],this.centroid=[],this.offset=0,this.outside=null,this.mark=0,this.edge=null,this.nVertices=0}getEdge(xt){if("number"!=typeof xt)throw Error("requires a number");let Ct=this.edge;for(;xt>0;)Ct=Ct.next,xt-=1;for(;xt<0;)Ct=Ct.prev,xt+=1;return Ct}computeNormal(){const xt=this.edge,Ct=xt.next;let _t=Ct.next;const or=xo([],Ct.head().point,xt.head().point),Fr=[],Eo=[];for(this.nVertices=2,this.normal=[0,0,0];_t!==xt;)Vn(Eo,or),xo(or,_t.head().point,xt.head().point),$t(this.normal,this.normal,Gn(Fr,Eo,or)),_t=_t.next,this.nVertices+=1;this.area=lr(this.normal),this.normal=Hr(this.normal,this.normal,1/this.area)}computeNormalMinArea(xt){if(this.computeNormal(),this.area<xt){let xt,Ct=0,_t=this.edge;do{const $t=_t.lengthSquared();$t>Ct&&(xt=_t,Ct=$t),_t=_t.next}while(_t!==this.edge);const Vn=xt.tail().point,Gn=xt.head().point,lr=xo([],Gn,Vn),Eo=Math.sqrt(Ct);Hr(lr,lr,1/Eo);const Mo=or(this.normal,lr);Hr(lr,lr,-Mo),$t(this.normal,this.normal,lr),Fr(this.normal,this.normal)}}computeCentroid(){this.centroid=[0,0,0];let xt=this.edge;do{$t(this.centroid,this.centroid,xt.head().point),xt=xt.next}while(xt!==this.edge);Hr(this.centroid,this.centroid,1/this.nVertices)}computeNormalAndCentroid(xt){void 0!==xt?this.computeNormalMinArea(xt):this.computeNormal(),this.computeCentroid(),this.offset=or(this.normal,this.centroid)}distanceToPlane(xt){return or(this.normal,xt)-this.offset}connectHalfEdges(xt,Ct){let _t;if(xt.opposite.face===Ct.opposite.face){const $t=Ct.opposite.face;let Vn;xt===this.edge&&(this.edge=Ct),3===$t.nVertices?(Vn=Ct.opposite.prev.opposite,$t.mark=2,_t=$t):(Vn=Ct.opposite.next,$t.edge===Vn.prev&&($t.edge=Vn),Vn.prev=Vn.prev.prev,Vn.prev.next=Vn),Ct.prev=xt.prev,Ct.prev.next=Ct,Ct.setOpposite(Vn),$t.computeNormalAndCentroid()}else xt.next=Ct,Ct.prev=xt;return _t}mergeAdjacentFaces(xt,Ct){const _t=xt.opposite,$t=_t.face;Ct.push($t),$t.mark=2;let Vn,Gn,or=xt.prev,lr=xt.next,Fr=_t.prev,Hr=_t.next;for(;or.opposite.face===$t;)or=or.prev,Hr=Hr.next;for(;lr.opposite.face===$t;)lr=lr.next,Fr=Fr.prev;for(Vn=Hr;Vn!==Fr.next;Vn=Vn.next)Vn.face=this;return this.edge=lr,(Gn=this.connectHalfEdges(Fr,lr))&&Ct.push(Gn),(Gn=this.connectHalfEdges(or,Hr))&&Ct.push(Gn),this.computeNormalAndCentroid(),Ct}collectIndices(){const xt=[];let Ct=this.edge;do{xt.push(Ct.head().index),Ct=Ct.next}while(Ct!==this.edge);return xt}static createTriangle(xt,Ct,_t,$t=0){const Vn=new Face,Gn=new Eo(xt,Vn),or=new Eo(Ct,Vn),lr=new Eo(_t,Vn);return Gn.next=lr.prev=or,or.next=Gn.prev=lr,lr.next=or.prev=Gn,Vn.edge=Gn,Vn.computeNormalAndCentroid($t),Vn}}Ct.exports={VISIBLE:0,NON_CONVEX:1,DELETED:2,Face:Face}},{"../../../maths/vec3/add":327,"../../../maths/vec3/copy":330,"../../../maths/vec3/cross":332,"../../../maths/vec3/dot":335,"../../../maths/vec3/length":341,"../../../maths/vec3/normalize":347,"../../../maths/vec3/scale":352,"../../../maths/vec3/subtract":356,"./HalfEdge":460}],460:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3/distance"),Vn=xt("../../../maths/vec3/squaredDistance");Ct.exports=class HalfEdge{constructor(xt,Ct){this.vertex=xt,this.face=Ct,this.next=null,this.prev=null,this.opposite=null}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){return this.tail()?$t(this.tail().point,this.head().point):-1}lengthSquared(){return this.tail()?Vn(this.tail().point,this.head().point):-1}setOpposite(xt){this.opposite=xt,xt.opposite=this}}},{"../../../maths/vec3/distance":333,"../../../maths/vec3/squaredDistance":354}],461:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3/dot"),Vn=xt("./point-line-distance"),Gn=xt("./get-plane-normal"),or=xt("./VertexList"),lr=xt("./Vertex"),{Face:Fr,VISIBLE:Hr,NON_CONVEX:xo,DELETED:Eo}=xt("./Face");Ct.exports=class QuickHull{constructor(xt){if(!Array.isArray(xt))throw TypeError("input is not a valid array");if(xt.length<4)throw Error("cannot build a simplex out of <4 points");this.tolerance=-1,this.nFaces=0,this.nPoints=xt.length,this.faces=[],this.newFaces=[],this.claimed=new or,this.unclaimed=new or,this.vertices=[];for(let Ct=0;Ct<xt.length;Ct+=1)this.vertices.push(new lr(xt[Ct],Ct));this.discardedFaces=[],this.vertexPointIndices=[]}addVertexToFace(xt,Ct){xt.face=Ct,Ct.outside?this.claimed.insertBefore(Ct.outside,xt):this.claimed.add(xt),Ct.outside=xt}removeVertexFromFace(xt,Ct){xt===Ct.outside&&(xt.next&&xt.next.face===Ct?Ct.outside=xt.next:Ct.outside=null),this.claimed.remove(xt)}removeAllVerticesFromFace(xt){if(xt.outside){let Ct=xt.outside;for(;Ct.next&&Ct.next.face===xt;)Ct=Ct.next;return this.claimed.removeChain(xt.outside,Ct),Ct.next=null,xt.outside}}deleteFaceVertices(xt,Ct){const _t=this.removeAllVerticesFromFace(xt);if(_t)if(Ct){let xt;for(let $t=_t;$t;$t=xt)xt=$t.next,Ct.distanceToPlane($t.point)>this.tolerance?this.addVertexToFace($t,Ct):this.unclaimed.add($t)}else this.unclaimed.addAll(_t)}resolveUnclaimedPoints(xt){let Ct=this.unclaimed.first();for(let _t=Ct;_t;_t=Ct){Ct=_t.next;let $t,Vn=this.tolerance;for(let Ct=0;Ct<xt.length;Ct+=1){const Gn=xt[Ct];if(Gn.mark===Hr){const xt=Gn.distanceToPlane(_t.point);if(xt>Vn&&(Vn=xt,$t=Gn),Vn>1e3*this.tolerance)break}}$t&&this.addVertexToFace(_t,$t)}}computeExtremes(){const xt=[],Ct=[],_t=[],$t=[];let Vn,Gn;for(Vn=0;Vn<3;Vn+=1)_t[Vn]=$t[Vn]=this.vertices[0];for(Vn=0;Vn<3;Vn+=1)xt[Vn]=Ct[Vn]=this.vertices[0].point[Vn];for(Vn=1;Vn<this.vertices.length;Vn+=1){const or=this.vertices[Vn],lr=or.point;for(Gn=0;Gn<3;Gn+=1)lr[Gn]<xt[Gn]&&(xt[Gn]=lr[Gn],_t[Gn]=or);for(Gn=0;Gn<3;Gn+=1)lr[Gn]>Ct[Gn]&&(Ct[Gn]=lr[Gn],$t[Gn]=or)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(xt[0]),Math.abs(Ct[0]))+Math.max(Math.abs(xt[1]),Math.abs(Ct[1]))+Math.max(Math.abs(xt[2]),Math.abs(Ct[2]))),[_t,$t]}createInitialSimplex(){const xt=this.vertices,[Ct,_t]=this.computeExtremes();let or,lr,Hr,xo,Eo=0,Mo=0;for(Hr=0;Hr<3;Hr+=1){const xt=_t[Hr].point[Hr]-Ct[Hr].point[Hr];xt>Eo&&(Eo=xt,Mo=Hr)}const Oo=Ct[Mo],Ro=_t[Mo];for(Eo=0,Hr=0;Hr<this.vertices.length;Hr+=1){const xt=this.vertices[Hr];if(xt!==Oo&&xt!==Ro){const Ct=Vn(xt.point,Oo.point,Ro.point);Ct>Eo&&(Eo=Ct,or=xt)}}const Io=Gn([],Oo.point,Ro.point,or.point),Bo=$t(Oo.point,Io);for(Eo=-1,Hr=0;Hr<this.vertices.length;Hr+=1){const xt=this.vertices[Hr];if(xt!==Oo&&xt!==Ro&&xt!==or){const Ct=Math.abs($t(Io,xt.point)-Bo);Ct>Eo&&(Eo=Ct,lr=xt)}}const zo=[];if($t(lr.point,Io)-Bo<0)for(zo.push(Fr.createTriangle(Oo,Ro,or),Fr.createTriangle(lr,Ro,Oo),Fr.createTriangle(lr,or,Ro),Fr.createTriangle(lr,Oo,or)),Hr=0;Hr<3;Hr+=1){const xt=(Hr+1)%3;zo[Hr+1].getEdge(2).setOpposite(zo[0].getEdge(xt)),zo[Hr+1].getEdge(1).setOpposite(zo[xt+1].getEdge(0))}else for(zo.push(Fr.createTriangle(Oo,or,Ro),Fr.createTriangle(lr,Oo,Ro),Fr.createTriangle(lr,Ro,or),Fr.createTriangle(lr,or,Oo)),Hr=0;Hr<3;Hr+=1){const xt=(Hr+1)%3;zo[Hr+1].getEdge(2).setOpposite(zo[0].getEdge((3-Hr)%3)),zo[Hr+1].getEdge(0).setOpposite(zo[xt+1].getEdge(1))}for(Hr=0;Hr<4;Hr+=1)this.faces.push(zo[Hr]);for(Hr=0;Hr<xt.length;Hr+=1){const Ct=xt[Hr];if(Ct!==Oo&&Ct!==Ro&&Ct!==or&&Ct!==lr){let xt;for(Eo=this.tolerance,xo=0;xo<4;xo+=1){const _t=zo[xo].distanceToPlane(Ct.point);_t>Eo&&(Eo=_t,xt=zo[xo])}xt&&this.addVertexToFace(Ct,xt)}}}reindexFaceAndVertices(){const xt=[];for(let Ct=0;Ct<this.faces.length;Ct+=1){const _t=this.faces[Ct];_t.mark===Hr&&xt.push(_t)}this.faces=xt}collectFaces(xt){const Ct=[];for(let _t=0;_t<this.faces.length;_t+=1){if(this.faces[_t].mark!==Hr)throw Error("attempt to include a destroyed face in the hull");const $t=this.faces[_t].collectIndices();if(xt)Ct.push($t);else for(let xt=0;xt<$t.length-2;xt+=1)Ct.push([$t[0],$t[xt+1],$t[xt+2]])}return Ct}nextVertexToAdd(){if(!this.claimed.isEmpty()){let xt,Ct,_t=0;const $t=this.claimed.first().face;for(Ct=$t.outside;Ct&&Ct.face===$t;Ct=Ct.next){const Vn=$t.distanceToPlane(Ct.point);Vn>_t&&(_t=Vn,xt=Ct)}return xt}}computeHorizon(xt,Ct,_t,$t){let Vn;this.deleteFaceVertices(_t),_t.mark=Eo,Vn=Ct?Ct.next:Ct=_t.getEdge(0);do{const Ct=Vn.opposite,_t=Ct.face;_t.mark===Hr&&(_t.distanceToPlane(xt)>this.tolerance?this.computeHorizon(xt,Ct,_t,$t):$t.push(Vn)),Vn=Vn.next}while(Vn!==Ct)}addAdjoiningFace(xt,Ct){const _t=Fr.createTriangle(xt,Ct.tail(),Ct.head());return this.faces.push(_t),_t.getEdge(-1).setOpposite(Ct.opposite),_t.getEdge(0)}addNewFaces(xt,Ct){let _t,$t;this.newFaces=[];for(let Vn=0;Vn<Ct.length;Vn+=1){const Gn=Ct[Vn],or=this.addAdjoiningFace(xt,Gn);_t?or.next.setOpposite($t):_t=or,this.newFaces.push(or.face),$t=or}_t.next.setOpposite($t)}oppositeFaceDistance(xt){return xt.face.distanceToPlane(xt.opposite.face.centroid)}doAdjacentMerge(xt,Ct){let _t=xt.edge,$t=!0,Vn=0;do{if(Vn>=xt.nVertices)throw Error("merge recursion limit exceeded");const Gn=_t.opposite.face;let or=!1;if(2===Ct?(this.oppositeFaceDistance(_t)>-this.tolerance||this.oppositeFaceDistance(_t.opposite)>-this.tolerance)&&(or=!0):xt.area>Gn.area?this.oppositeFaceDistance(_t)>-this.tolerance?or=!0:this.oppositeFaceDistance(_t.opposite)>-this.tolerance&&($t=!1):this.oppositeFaceDistance(_t.opposite)>-this.tolerance?or=!0:this.oppositeFaceDistance(_t)>-this.tolerance&&($t=!1),or){const Ct=xt.mergeAdjacentFaces(_t,[]);for(let _t=0;_t<Ct.length;_t+=1)this.deleteFaceVertices(Ct[_t],xt);return!0}_t=_t.next,Vn+=1}while(_t!==xt.edge);return $t||(xt.mark=xo),!1}addVertexToHull(xt){const Ct=[];this.unclaimed.clear(),this.removeVertexFromFace(xt,xt.face),this.computeHorizon(xt.point,null,xt.face,Ct),this.addNewFaces(xt,Ct);for(let xt=0;xt<this.newFaces.length;xt+=1){const Ct=this.newFaces[xt];if(Ct.mark===Hr)for(;this.doAdjacentMerge(Ct,1););}for(let xt=0;xt<this.newFaces.length;xt+=1){const Ct=this.newFaces[xt];if(Ct.mark===xo)for(Ct.mark=Hr;this.doAdjacentMerge(Ct,2););}this.resolveUnclaimedPoints(this.newFaces)}build(){let xt;for(this.createInitialSimplex();xt=this.nextVertexToAdd();)this.addVertexToHull(xt);this.reindexFaceAndVertices()}}},{"../../../maths/vec3/dot":335,"./Face":459,"./Vertex":462,"./VertexList":463,"./get-plane-normal":464,"./point-line-distance":466}],462:[function(xt,Ct,_t){Ct.exports=class Vertex{constructor(xt,Ct){this.point=xt,this.index=Ct,this.next=null,this.prev=null,this.face=null}}},{}],463:[function(xt,Ct,_t){Ct.exports=class VertexList{constructor(){this.head=null,this.tail=null}clear(){this.head=this.tail=null}insertBefore(xt,Ct){Ct.prev=xt.prev,Ct.next=xt,Ct.prev?Ct.prev.next=Ct:this.head=Ct,xt.prev=Ct}insertAfter(xt,Ct){Ct.prev=xt,Ct.next=xt.next,Ct.next?Ct.next.prev=Ct:this.tail=Ct,xt.next=Ct}add(xt){this.head?this.tail.next=xt:this.head=xt,xt.prev=this.tail,xt.next=null,this.tail=xt}addAll(xt){for(this.head?this.tail.next=xt:this.head=xt,xt.prev=this.tail;xt.next;)xt=xt.next;this.tail=xt}remove(xt){xt.prev?xt.prev.next=xt.next:this.head=xt.next,xt.next?xt.next.prev=xt.prev:this.tail=xt.prev}removeChain(xt,Ct){xt.prev?xt.prev.next=Ct.next:this.head=Ct.next,Ct.next?Ct.next.prev=xt.prev:this.tail=xt.prev}first(){return this.head}isEmpty(){return!this.head}}},{}],464:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3/cross"),Vn=xt("../../../maths/vec3/normalize"),Gn=xt("../../../maths/vec3/subtract");Ct.exports=(xt,Ct,_t,or)=>{const lr=[0,0,0];return Gn(xt,Ct,_t),Gn(lr,_t,or),$t(xt,xt,lr),Vn(xt,xt)}},{"../../../maths/vec3/cross":332,"../../../maths/vec3/normalize":347,"../../../maths/vec3/subtract":356}],465:[function(xt,Ct,_t){const $t=xt("./QuickHull");Ct.exports=(xt,Ct={})=>{const _t=new $t(xt);return _t.build(),_t.collectFaces(Ct.skipTriangulation)}},{"./QuickHull":461}],466:[function(xt,Ct,_t){const $t=xt("../../../maths/vec3/cross"),Vn=xt("../../../maths/vec3/subtract"),Gn=xt("../../../maths/vec3/squaredLength");Ct.exports=(xt,Ct,_t)=>Math.sqrt(((xt,Ct,_t)=>{const or=[],lr=[];Vn(or,_t,Ct),Vn(lr,xt,Ct);const Fr=Gn($t([],lr,or)),Hr=Gn(or);if(0===Hr)throw Error("a and b are the same point");return Fr/Hr})(xt,Ct,_t))},{"../../../maths/vec3/cross":332,"../../../maths/vec3/squaredLength":355,"../../../maths/vec3/subtract":356}],467:[function(xt,Ct,_t){const $t=xt("../../geometries/geom2"),Vn=xt("../../geometries/geom3"),Gn=xt("../../geometries/path2");Ct.exports=xt=>{const Ct=new Set,_t=[],r=xt=>{const $t=xt.toString();Ct.has($t)||(_t.push(xt),Ct.add($t))};return xt.forEach((xt=>{$t.isA(xt)?$t.toPoints(xt).forEach(r):Vn.isA(xt)?Vn.toPoints(xt).forEach((xt=>xt.forEach(r))):Gn.isA(xt)&&Gn.toPoints(xt).forEach(r)})),_t}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180}],468:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../measurements/measureEpsilon"),Gn=xt("../../geometries/geom2"),or=xt("../../geometries/geom3"),lr=xt("../../geometries/path2"),Fr=xt("./snapPolygons"),Hr=xt("./mergePolygons"),xo=xt("./insertTjunctions"),Eo=xt("./triangulatePolygons");Ct.exports=(xt,...Ct)=>{if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");const _t=Ct.map((Ct=>{if(lr.isA(Ct))return((xt,Ct)=>Ct)(0,Ct);if(Gn.isA(Ct))return((xt,Ct)=>Ct)(0,Ct);if(or.isA(Ct))return((xt,Ct)=>{const{snap:_t,simplify:$t,triangulate:Gn}=Object.assign({},{snap:!1,simplify:!1,triangulate:!1},xt),lr=Vn(Ct);let Mo=or.toPolygons(Ct);_t&&(Mo=Fr(lr,Mo)),$t&&(Mo=Hr(lr,Mo)),Gn&&(Mo=xo(Mo),Mo=Eo(lr,Mo));const Oo=Object.assign({},Ct);return Oo.polygons=Mo,Oo})(xt,Ct);throw new Error("invalid geometry")}));return 1===_t.length?_t[0]:_t}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180,"../../measurements/measureEpsilon":381,"../../utils/flatten":515,"./insertTjunctions":470,"./mergePolygons":471,"./snapPolygons":475,"./triangulatePolygons":476}],469:[function(xt,Ct,_t){Ct.exports={generalize:xt("./generalize"),snap:xt("./snap"),retessellate:xt("./retessellate")}},{"./generalize":468,"./retessellate":473,"./snap":474}],470:[function(xt,Ct,_t){const $t=xt("../../maths/constants"),Vn=xt("../../maths/vec3"),Gn=xt("../../geometries/poly3"),getTag=xt=>`${xt}`,addSide=(xt,Ct,_t,$t,Vn,Gn)=>{const or=getTag($t),lr=getTag(Vn),Fr=`${or}/${lr}`,Hr=`${lr}/${or}`;if(xt.has(Hr))return deleteSide(xt,Ct,_t,Vn,$t,null),null;const xo={vertex0:$t,vertex1:Vn,polygonindex:Gn};return xt.has(Fr)?xt.get(Fr).push(xo):xt.set(Fr,[xo]),Ct.has(or)?Ct.get(or).push(Fr):Ct.set(or,[Fr]),_t.has(lr)?_t.get(lr).push(Fr):_t.set(lr,[Fr]),Fr},deleteSide=(xt,Ct,_t,$t,Vn,Gn)=>{const or=getTag($t),lr=getTag(Vn),Fr=`${or}/${lr}`;let Hr=-1;const xo=xt.get(Fr);for(let xt=0;xt<xo.length;xt++){const Ct=xo[xt];let _t=getTag(Ct.vertex0);if(_t===or&&(_t=getTag(Ct.vertex1))===lr&&(null===Gn||Ct.polygonindex===Gn)){Hr=xt;break}}xo.splice(Hr,1),0===xo.length&&xt.delete(Fr),Hr=Ct.get(or).indexOf(Fr),Ct.get(or).splice(Hr,1),0===Ct.get(or).length&&Ct.delete(or),Hr=_t.get(lr).indexOf(Fr),_t.get(lr).splice(Hr,1),0===_t.get(lr).length&&_t.delete(lr)};Ct.exports=xt=>{const Ct=new Map;for(let _t=0;_t<xt.length;_t++){const $t=xt[_t],Vn=$t.vertices.length;if(Vn>=3){let xt=$t.vertices[0],Gn=getTag(xt);for(let or=0;or<Vn;or++){let lr=or+1;lr===Vn&&(lr=0);const Fr=$t.vertices[lr],Hr=getTag(Fr),xo=`${Gn}/${Hr}`,Eo=`${Hr}/${Gn}`;if(Ct.has(Eo)){const xt=Ct.get(Eo);xt.splice(-1,1),0===xt.length&&Ct.delete(Eo)}else{const $t={vertex0:xt,vertex1:Fr,polygonindex:_t};Ct.has(xo)?Ct.get(xo).push($t):Ct.set(xo,[$t])}xt=Fr,Gn=Hr}}else console.warn("warning: invalid polygon found during insertTjunctions")}if(Ct.size>0){const _t=new Map,or=new Map,lr=new Map;for(const[xt,$t]of Ct)lr.set(xt,!0),$t.forEach((Ct=>{const $t=getTag(Ct.vertex0),Vn=getTag(Ct.vertex1);_t.has($t)?_t.get($t).push(xt):_t.set($t,[xt]),or.has(Vn)?or.get(Vn).push(xt):or.set(Vn,[xt])}));const Fr=xt.slice(0);for(;0!==Ct.size;){for(const xt of Ct.keys())lr.set(xt,!0);let xt=!1;for(;;){const Hr=Array.from(lr.keys());if(0===Hr.length)break;const xo=Hr[0];let Eo=!0;if(Ct.has(xo)){const Hr=Ct.get(xo)[0];for(let xo=0;xo<2;xo++){const Mo=0===xo?Hr.vertex0:Hr.vertex1,Oo=0===xo?Hr.vertex1:Hr.vertex0,Ro=getTag(Mo),Io=getTag(Oo);let Bo=[];0===xo?or.has(Ro)&&(Bo=or.get(Ro)):_t.has(Ro)&&(Bo=_t.get(Ro));for(let Hr=0;Hr<Bo.length;Hr++){const Ro=Bo[Hr],zo=Ct.get(Ro)[0],Ho=0===xo?zo.vertex0:zo.vertex1,Qo=0===xo?zo.vertex1:zo.vertex0,pi=getTag(Ho);if(getTag(Qo),pi===Io){deleteSide(Ct,_t,or,Mo,Oo,null),deleteSide(Ct,_t,or,Oo,Mo,null),Eo=!1,xo=2,xt=!0;break}{const Hr=Mo,Ro=Oo,Io=Ho,Bo=Vn.subtract(Vn.create(),Io,Hr),Qo=Vn.dot(Vn.subtract(Vn.create(),Ro,Hr),Bo)/Vn.dot(Bo,Bo);if(Qo>0&&Qo<1){const Mo=Vn.scale(Vn.create(),Bo,Qo);if(Vn.add(Mo,Mo,Hr),Vn.squaredDistance(Mo,Ro)<$t.EPS*$t.EPS){const $t=zo.polygonindex,Vn=Fr[$t],Hr=getTag(zo.vertex1);let Mo=-1;for(let xt=0;xt<Vn.vertices.length;xt++)if(getTag(Vn.vertices[xt])===Hr){Mo=xt;break}const Ro=Vn.vertices.slice(0);Ro.splice(Mo,0,Oo);const Io=Gn.create(Ro);Fr[$t]=Io,deleteSide(Ct,_t,or,zo.vertex0,zo.vertex1,$t);const Bo=addSide(Ct,_t,or,zo.vertex0,Oo,$t),Ho=addSide(Ct,_t,or,Oo,zo.vertex1,$t);null!==Bo&&lr.set(Bo,!0),null!==Ho&&lr.set(Ho,!0),Eo=!1,xo=2,xt=!0;break}}}}}}Eo&&lr.delete(xo)}if(!xt)break}xt=Fr}return Ct.clear(),xt}},{"../../geometries/poly3":197,"../../maths/constants":212,"../../maths/vec3":340}],471:[function(xt,Ct,_t){const $t=xt("../../maths/utils/aboutEqualNormals"),Vn=xt("../../maths/vec3"),Gn=xt("../../geometries/poly3"),createEdges=xt=>{const Ct=Gn.toPoints(xt),_t=[];for(let xt=0;xt<Ct.length;xt++){const $t=(xt+1)%Ct.length,Vn={v1:Ct[xt],v2:Ct[$t]};_t.push(Vn)}for(let xt=0;xt<_t.length;xt++){const $t=(xt+1)%Ct.length;_t[xt].next=_t[$t],_t[$t].prev=_t[xt]}return _t},insertEdge=(xt,Ct)=>{const _t=`${Ct.v1}:${Ct.v2}`;xt.set(_t,Ct)},deleteEdge=(xt,Ct)=>{const _t=`${Ct.v1}:${Ct.v2}`;xt.delete(_t)},findOppositeEdge=(xt,Ct)=>{const _t=`${Ct.v2}:${Ct.v1}`;return xt.get(_t)},calculateAnglesBetween=(xt,Ct,_t)=>{let $t=xt.prev.v1,Vn=xt.prev.v2,Gn=Ct.next.v2;const or=calculateAngle($t,Vn,Gn,_t);return $t=Ct.prev.v1,Vn=Ct.prev.v2,Gn=xt.next.v2,[or,calculateAngle($t,Vn,Gn,_t)]},or=Vn.create(),lr=Vn.create(),calculateAngle=(xt,Ct,_t,$t)=>{const Gn=Vn.subtract(or,Ct,xt),Fr=Vn.subtract(lr,_t,Ct);return Vn.cross(Gn,Gn,Fr),Vn.dot(Gn,$t)},mergeCoplanarPolygons=xt=>{if(xt.length<2)return xt;const Ct=xt[0].plane,_t=xt.slice(),$t=new Map;for(;_t.length>0;){const xt=_t.shift(),Vn=createEdges(xt);for(let xt=0;xt<Vn.length;xt++){const _t=Vn[xt],Gn=findOppositeEdge($t,_t);if(Gn){const xt=calculateAnglesBetween(_t,Gn,Ct);if(xt[0]>=0&&xt[1]>=0){const Ct=Gn.next,Vn=_t.next;_t.prev.next=Gn.next,_t.next.prev=Gn.prev,Gn.prev.next=_t.next,Gn.next.prev=_t.prev,_t.v1=null,_t.v2=null,_t.next=null,_t.prev=null,deleteEdge($t,Gn),Gn.v1=null,Gn.v2=null,Gn.next=null,Gn.prev=null;const v=(xt,Ct,_t)=>{const $t={v1:_t.v1,v2:Ct.v2,next:Ct.next,prev:_t.prev};_t.prev.next=$t,Ct.next.prev=$t,deleteEdge(xt,Ct),Ct.v1=null,Ct.v2=null,Ct.next=null,Ct.prev=null,deleteEdge(xt,_t),_t.v1=null,_t.v2=null,_t.next=null,_t.prev=null};0===xt[0]&&v($t,Ct,Ct.prev),0===xt[1]&&v($t,Vn,Vn.prev)}}else _t.next&&insertEdge($t,_t)}}const Vn=[];return $t.forEach((xt=>{const Ct=(xt=>{let Ct;const _t=[];for(;xt.next;){const Ct=xt.next;_t.push(xt.v1),xt.v1=null,xt.v2=null,xt.next=null,xt.prev=null,xt=Ct}return _t.length>0&&(Ct=Gn.create(_t)),Ct})(xt);Ct&&Vn.push(Ct)})),$t.clear(),Vn};Ct.exports=(xt,Ct)=>{const _t=[];Ct.forEach((xt=>{const Ct=_t.find((Ct=>((xt,Ct)=>Math.abs(xt[3]-Ct[3])<15e-8&&$t(xt,Ct))(Ct[0],Gn.plane(xt))));Ct?Ct[1].push(xt):_t.push([Gn.plane(xt),[xt]])}));let Vn=[];return _t.forEach((xt=>{const Ct=xt[1],_t=mergeCoplanarPolygons(Ct);Vn=Vn.concat(_t)})),Vn}},{"../../geometries/poly3":197,"../../maths/utils/aboutEqualNormals":285,"../../maths/vec3":340}],472:[function(xt,Ct,_t){const{EPS:$t}=xt("../../maths/constants"),Vn=xt("../../maths/line2"),Gn=xt("../../maths/vec2"),or=xt("../../maths/OrthoNormalBasis"),lr=xt("../../maths/utils/interpolateBetween2DPointsForY"),{insertSorted:Fr,fnNumberSort:Hr}=xt("../../utils"),xo=xt("../../geometries/poly3");Ct.exports=xt=>{if(xt.length<2)return xt;const Ct=[],_t=xt.length,Eo=xo.plane(xt[0]),Mo=new or(Eo),Oo=[],Ro=[],Io=new Map,Bo=new Map,zo=new Map,Ho=10/$t;for(let Ct=0;Ct<_t;Ct++){const _t=xt[Ct];let $t=[],Vn=_t.vertices.length,or=-1;if(Vn>0){let xt,lr;for(let Fr=0;Fr<Vn;Fr++){let Vn=Mo.to2D(_t.vertices[Fr]);const Hr=Math.floor(Vn[1]*Ho);let xo;zo.has(Hr)?xo=zo.get(Hr):zo.has(Hr+1)?xo=zo.get(Hr+1):zo.has(Hr-1)?xo=zo.get(Hr-1):(xo=Vn[1],zo.set(Hr,Vn[1])),Vn=Gn.fromValues(Vn[0],xo),$t.push(Vn);const Eo=Vn[1];(0===Fr||Eo<xt)&&(xt=Eo,or=Fr),(0===Fr||Eo>lr)&&(lr=Eo);let Oo=Bo.get(Eo);Oo||(Oo={},Bo.set(Eo,Oo)),Oo[Ct]=!0}if(xt>=lr)$t=[],Vn=0,or=-1;else{let _t=Io.get(xt);_t||(_t=[],Io.set(xt,_t)),_t.push(Ct)}}$t.reverse(),or=Vn-or-1,Oo.push($t),Ro.push(or)}const Qo=[];Bo.forEach(((xt,Ct)=>Qo.push(Ct))),Qo.sort(Hr);let pi=[],gi=[];for(let xt=0;xt<Qo.length;xt++){const _t=[],or=Qo[xt],Hr=Bo.get(or);for(let xt=0;xt<pi.length;++xt){const Ct=pi[xt],_t=Ct.polygonindex;if(Hr[_t]){const $t=Oo[_t],Vn=$t.length;let Gn=Ct.leftvertexindex,lr=Ct.rightvertexindex;for(;;){let xt=Gn+1;if(xt>=Vn&&(xt=0),$t[xt][1]!==or)break;Gn=xt}let Fr=lr-1;if(Fr<0&&(Fr=Vn-1),$t[Fr][1]===or&&(lr=Fr),Gn!==Ct.leftvertexindex&&Gn===lr)pi.splice(xt,1),--xt;else{Ct.leftvertexindex=Gn,Ct.rightvertexindex=lr,Ct.topleft=$t[Gn],Ct.topright=$t[lr];let xt=Gn+1;xt>=Vn&&(xt=0),Ct.bottomleft=$t[xt];let _t=lr-1;_t<0&&(_t=Vn-1),Ct.bottomright=$t[_t]}}}let zo;if(xt>=Qo.length-1)pi=[],zo=null;else{const Ct=.5*(or+(zo=Number(Qo[xt+1]))),_t=Io.get(or);for(const xt in _t){const $t=_t[xt],Vn=Oo[$t],Gn=Vn.length,Hr=Ro[$t];let xo=Hr;for(;;){let xt=xo+1;if(xt>=Gn&&(xt=0),Vn[xt][1]!==or)break;if(xt===Hr)break;xo=xt}let Eo=Hr;for(;;){let xt=Eo-1;if(xt<0&&(xt=Gn-1),Vn[xt][1]!==or)break;if(xt===xo)break;Eo=xt}let Mo=xo+1;Mo>=Gn&&(Mo=0);let Io=Eo-1;Io<0&&(Io=Gn-1);const Bo={polygonindex:$t,leftvertexindex:xo,rightvertexindex:Eo,topleft:Vn[xo],topright:Vn[Eo],bottomleft:Vn[Mo],bottomright:Vn[Io]};Fr(pi,Bo,((xt,_t)=>{const $t=lr(xt.topleft,xt.bottomleft,Ct),Vn=lr(_t.topleft,_t.bottomleft,Ct);return $t>Vn?1:$t<Vn?-1:0}))}}for(const xt in pi){const Ct=pi[xt];let Fr=lr(Ct.topleft,Ct.bottomleft,or);const Hr=Gn.fromValues(Fr,or);Fr=lr(Ct.topright,Ct.bottomright,or);const xo=Gn.fromValues(Fr,or);Fr=lr(Ct.topleft,Ct.bottomleft,zo);const Eo=Gn.fromValues(Fr,zo);Fr=lr(Ct.topright,Ct.bottomright,zo);const Mo=Gn.fromValues(Fr,zo),Oo={topleft:Hr,topright:xo,bottomleft:Eo,bottomright:Mo,leftline:Vn.fromPoints(Vn.create(),Hr,Eo),rightline:Vn.fromPoints(Vn.create(),Mo,xo)};if(_t.length>0){const xt=_t[_t.length-1],Ct=Gn.distance(Oo.topleft,xt.topright),Vn=Gn.distance(Oo.bottomleft,xt.bottomright);Ct<$t&&Vn<$t&&(Oo.topleft=xt.topleft,Oo.leftline=xt.leftline,Oo.bottomleft=xt.bottomleft,_t.splice(_t.length-1,1))}_t.push(Oo)}if(xt>0){const xt=new Set,or=new Set;for(let Ct=0;Ct<_t.length;Ct++){const lr=_t[Ct];for(let Ct=0;Ct<gi.length;Ct++)if(!or.has(Ct)){const _t=gi[Ct];if(Gn.distance(_t.bottomleft,lr.topleft)<$t&&Gn.distance(_t.bottomright,lr.topright)<$t){or.add(Ct);const Gn=Vn.direction(lr.leftline),Fr=Vn.direction(_t.leftline),Hr=Gn[0]-Fr[0],xo=Vn.direction(lr.rightline),Eo=Vn.direction(_t.rightline),Mo=xo[0]-Eo[0],Oo=Math.abs(Hr)<$t,Ro=Math.abs(Mo)<$t;(Oo||Hr>=0)&&(Ro||Mo>=0)&&(lr.outpolygon=_t.outpolygon,lr.leftlinecontinues=Oo,lr.rightlinecontinues=Ro,xt.add(Ct));break}}}for(let _t=0;_t<gi.length;_t++)if(!xt.has(_t)){const xt=gi[_t];xt.outpolygon.rightpoints.push(xt.bottomright),Gn.distance(xt.bottomright,xt.bottomleft)>$t&&xt.outpolygon.leftpoints.push(xt.bottomleft),xt.outpolygon.leftpoints.reverse();const Vn=xt.outpolygon.rightpoints.concat(xt.outpolygon.leftpoints).map((xt=>Mo.to3D(xt))),or=xo.fromPointsAndPlane(Vn,Eo);or.vertices.length&&Ct.push(or)}}for(let xt=0;xt<_t.length;xt++){const Ct=_t[xt];Ct.outpolygon?(Ct.leftlinecontinues||Ct.outpolygon.leftpoints.push(Ct.topleft),Ct.rightlinecontinues||Ct.outpolygon.rightpoints.push(Ct.topright)):(Ct.outpolygon={leftpoints:[],rightpoints:[]},Ct.outpolygon.leftpoints.push(Ct.topleft),Gn.distance(Ct.topleft,Ct.topright)>$t&&Ct.outpolygon.rightpoints.push(Ct.topright))}gi=_t}return Ct}},{"../../geometries/poly3":197,"../../maths/OrthoNormalBasis":211,"../../maths/constants":212,"../../maths/line2":223,"../../maths/utils/interpolateBetween2DPointsForY":288,"../../maths/vec2":309,"../../utils":517}],473:[function(xt,Ct,_t){const $t=xt("../../geometries/geom3"),Vn=xt("../../geometries/poly3"),{NEPS:Gn}=xt("../../maths/constants"),or=xt("./reTesselateCoplanarPolygons"),classifyPolygons=xt=>{let Ct=[xt];const _t=[];for(let xt=3;xt>=0;xt--){const $t=[],Vn=3===xt?15e-9:Gn;Ct.forEach((Ct=>{Ct.sort(byPlaneComponent(xt,Vn));let Gn=0;for(let or=1;or<Ct.length;or++)Ct[or].plane[xt]-Ct[Gn].plane[xt]>Vn&&(or-Gn==1?_t.push(Ct[Gn]):$t.push(Ct.slice(Gn,or)),Gn=or);Ct.length-Gn==1?_t.push(Ct[Gn]):$t.push(Ct.slice(Gn))})),Ct=$t}const $t=[];return Ct.forEach((xt=>{xt[0]&&($t[xt[0].index]=xt)})),_t.forEach((xt=>{$t[xt.index]=xt})),$t},byPlaneComponent=(xt,Ct)=>(_t,$t)=>_t.plane[xt]-$t.plane[xt]>Ct?1:$t.plane[xt]-_t.plane[xt]>Ct?-1:0;Ct.exports=xt=>{if(xt.isRetesselated)return xt;const Ct=$t.toPolygons(xt).map(((xt,Ct)=>({vertices:xt.vertices,plane:Vn.plane(xt),index:Ct}))),_t=classifyPolygons(Ct),Gn=[];_t.forEach((xt=>{if(Array.isArray(xt)){const Ct=or(xt);Gn.push(...Ct)}else Gn.push(xt)}));const lr=$t.create(Gn);return lr.isRetesselated=!0,lr}},{"../../geometries/geom3":159,"../../geometries/poly3":197,"../../maths/constants":212,"./reTesselateCoplanarPolygons":472}],474:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../maths/vec2"),Gn=xt("../../geometries/geom2"),or=xt("../../geometries/geom3"),lr=xt("../../geometries/path2"),Fr=xt("../../measurements/measureEpsilon"),Hr=xt("./snapPolygons");Ct.exports=(...xt)=>{if(0===(xt=$t(xt)).length)throw new Error("wrong number of arguments");const Ct=xt.map((xt=>lr.isA(xt)?(xt=>{const Ct=Fr(xt),_t=lr.toPoints(xt).map((xt=>Vn.snap(Vn.create(),xt,Ct)));return lr.create(_t)})(xt):Gn.isA(xt)?(xt=>{const Ct=Fr(xt);let _t=Gn.toSides(xt).map((xt=>[Vn.snap(Vn.create(),xt[0],Ct),Vn.snap(Vn.create(),xt[1],Ct)]));return _t=_t.filter((xt=>!Vn.equals(xt[0],xt[1]))),Gn.create(_t)})(xt):or.isA(xt)?(xt=>{const Ct=Fr(xt),_t=or.toPolygons(xt),$t=Hr(Ct,_t);return or.create($t)})(xt):xt));return 1===Ct.length?Ct[0]:Ct}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180,"../../maths/vec2":309,"../../measurements/measureEpsilon":381,"../../utils/flatten":515,"./snapPolygons":475}],475:[function(xt,Ct,_t){const $t=xt("../../maths/vec3"),Vn=xt("../../geometries/poly3");Ct.exports=(xt,Ct)=>{let _t=Ct.map((Ct=>{const _t=Ct.vertices.map((Ct=>$t.snap($t.create(),Ct,xt))),Gn=[];for(let xt=0;xt<_t.length;xt++){const Ct=(xt+1)%_t.length;$t.equals(_t[xt],_t[Ct])||Gn.push(_t[xt])}const or=Vn.create(Gn);return Ct.color&&(or.color=Ct.color),or}));const Gn=xt*xt*Math.sqrt(3)/4;return _t.filter((xt=>((xt,Ct)=>{const _t=Math.abs(Vn.measureArea(Ct));return Number.isFinite(_t)&&_t>xt})(Gn,xt)))}},{"../../geometries/poly3":197,"../../maths/vec3":340}],476:[function(xt,Ct,_t){const $t=xt("../../maths/vec3"),Vn=xt("../../geometries/poly3");Ct.exports=(xt,Ct)=>{const _t=[];return Ct.forEach((Ct=>{((xt,Ct,_t)=>{const Gn=Ct.vertices.length;if(Gn>3){if(Gn>4){const or=[0,0,0];Ct.vertices.forEach((xt=>$t.add(or,or,xt))),$t.snap(or,$t.divide(or,or,[Gn,Gn,Gn]),xt);for(let xt=0;xt<Gn;xt++){const $t=Vn.create([or,Ct.vertices[xt],Ct.vertices[(xt+1)%Gn]]);Ct.color&&($t.color=Ct.color),_t.push($t)}return}const or=Vn.create([Ct.vertices[0],Ct.vertices[1],Ct.vertices[2]]),lr=Vn.create([Ct.vertices[0],Ct.vertices[2],Ct.vertices[3]]);return Ct.color&&(or.color=Ct.color,lr.color=Ct.color),void _t.push(or,lr)}_t.push(Ct)})(xt,Ct,_t)})),_t}},{"../../geometries/poly3":197,"../../maths/vec3":340}],477:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../utils/padArrayToLength"),Gn=xt("../../measurements/measureAggregateBoundingBox"),{translate:or}=xt("./translate"),alignGeometries=(xt,Ct,_t)=>{const $t=Gn(xt),Vn=[0,0,0];for(let xt=0;xt<3;xt++)"center"===Ct[xt]?Vn[xt]=_t[xt]-($t[0][xt]+$t[1][xt])/2:"max"===Ct[xt]?Vn[xt]=_t[xt]-$t[1][xt]:"min"===Ct[xt]&&(Vn[xt]=_t[xt]-$t[0][xt]);return or(Vn,xt)};Ct.exports=(xt,...Ct)=>{xt=(xt=>{if(!Array.isArray(xt.modes)||xt.modes.length>3)throw new Error("align(): modes must be an array of length <= 3");if(xt.modes=Vn(xt.modes,"none",3),3!==xt.modes.filter((xt=>["center","max","min","none"].includes(xt))).length)throw new Error('align(): all modes must be one of "center", "max" or "min"');if(!Array.isArray(xt.relativeTo)||xt.relativeTo.length>3)throw new Error("align(): relativeTo must be an array of length <= 3");if(xt.relativeTo=Vn(xt.relativeTo,0,3),3!==xt.relativeTo.filter((xt=>Number.isFinite(xt)||null==xt)).length)throw new Error("align(): all relativeTo values must be a number, or null.");if("boolean"!=typeof xt.grouped)throw new Error("align(): grouped must be a boolean value.");return xt})(xt=Object.assign({},{modes:["center","center","min"],relativeTo:[0,0,0],grouped:!1},xt));let{modes:_t,relativeTo:or,grouped:lr}=xt;if(0===(Ct=$t(Ct)).length)throw new Error("align(): No geometries were provided to act upon");if(or.filter((xt=>null==xt)).length){const xt=Gn(Ct);or=((xt,Ct,_t)=>{for(let $t=0;$t<3;$t++)null==xt[$t]&&("center"===Ct[$t]?xt[$t]=(_t[0][$t]+_t[1][$t])/2:"max"===Ct[$t]?xt[$t]=_t[1][$t]:"min"===Ct[$t]&&(xt[$t]=_t[0][$t]));return xt})(or,_t,xt)}return 1===(Ct=lr?alignGeometries(Ct,_t,or):Ct.map((xt=>alignGeometries(xt,_t,or)))).length?Ct[0]:Ct}},{"../../measurements/measureAggregateBoundingBox":372,"../../utils/flatten":515,"../../utils/padArrayToLength":519,"./translate":484}],478:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom2"),Gn=xt("../../geometries/geom3"),or=xt("../../geometries/path2"),lr=xt("../../measurements/measureBoundingBox"),{translate:Fr}=xt("./translate"),centerGeometry=(xt,Ct)=>{const{axes:_t,relativeTo:$t}=Object.assign({},{axes:[!0,!0,!0],relativeTo:[0,0,0]},xt),Vn=lr(Ct),Gn=[0,0,0];return _t[0]&&(Gn[0]=$t[0]-(Vn[0][0]+(Vn[1][0]-Vn[0][0])/2)),_t[1]&&(Gn[1]=$t[1]-(Vn[0][1]+(Vn[1][1]-Vn[0][1])/2)),_t[2]&&(Gn[2]=$t[2]-(Vn[0][2]+(Vn[1][2]-Vn[0][2])/2)),Fr(Gn,Ct)},center=(xt,...Ct)=>{const{axes:_t,relativeTo:lr}=Object.assign({},{axes:[!0,!0,!0],relativeTo:[0,0,0]},xt);if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");if(3!==lr.length)throw new Error("relativeTo must be an array of length 3");xt={axes:_t,relativeTo:lr};const Fr=Ct.map((Ct=>or.isA(Ct)||Vn.isA(Ct)||Gn.isA(Ct)?centerGeometry(xt,Ct):Ct));return 1===Fr.length?Fr[0]:Fr};Ct.exports={center:center,centerX:(...xt)=>center({axes:[!0,!1,!1]},xt),centerY:(...xt)=>center({axes:[!1,!0,!1]},xt),centerZ:(...xt)=>center({axes:[!1,!1,!0]},xt)}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180,"../../measurements/measureBoundingBox":376,"../../utils/flatten":515,"./translate":484}],479:[function(xt,Ct,_t){Ct.exports={align:xt("./align"),center:xt("./center").center,centerX:xt("./center").centerX,centerY:xt("./center").centerY,centerZ:xt("./center").centerZ,mirror:xt("./mirror").mirror,mirrorX:xt("./mirror").mirrorX,mirrorY:xt("./mirror").mirrorY,mirrorZ:xt("./mirror").mirrorZ,rotate:xt("./rotate").rotate,rotateX:xt("./rotate").rotateX,rotateY:xt("./rotate").rotateY,rotateZ:xt("./rotate").rotateZ,scale:xt("./scale").scale,scaleX:xt("./scale").scaleX,scaleY:xt("./scale").scaleY,scaleZ:xt("./scale").scaleZ,transform:xt("./transform"),translate:xt("./translate").translate,translateX:xt("./translate").translateX,translateY:xt("./translate").translateY,translateZ:xt("./translate").translateZ}},{"./align":477,"./center":478,"./mirror":480,"./rotate":481,"./scale":482,"./transform":483,"./translate":484}],480:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../maths/mat4"),Gn=xt("../../maths/plane"),or=xt("../../geometries/geom2"),lr=xt("../../geometries/geom3"),Fr=xt("../../geometries/path2"),mirror=(xt,...Ct)=>{const{origin:_t,normal:Hr}=Object.assign({},{origin:[0,0,0],normal:[0,0,1]},xt);if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");const xo=Gn.fromNormalAndPoint(Gn.create(),Hr,_t);if(Number.isNaN(xo[0]))throw new Error("the given origin and normal do not define a proper plane");const Eo=Vn.mirrorByPlane(Vn.create(),xo),Mo=Ct.map((xt=>Fr.isA(xt)?Fr.transform(Eo,xt):or.isA(xt)?or.transform(Eo,xt):lr.isA(xt)?lr.transform(Eo,xt):xt));return 1===Mo.length?Mo[0]:Mo};Ct.exports={mirror:mirror,mirrorX:(...xt)=>mirror({normal:[1,0,0]},xt),mirrorY:(...xt)=>mirror({normal:[0,1,0]},xt),mirrorZ:(...xt)=>mirror({normal:[0,0,1]},xt)}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180,"../../maths/mat4":261,"../../maths/plane":281,"../../utils/flatten":515}],481:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../maths/mat4"),Gn=xt("../../geometries/geom2"),or=xt("../../geometries/geom3"),lr=xt("../../geometries/path2"),rotate=(xt,...Ct)=>{if(!Array.isArray(xt))throw new Error("angles must be an array");if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");for(xt=xt.slice();xt.length<3;)xt.push(0);const _t=xt[2],Fr=xt[1],Hr=xt[0],xo=Vn.fromTaitBryanRotation(Vn.create(),_t,Fr,Hr),Eo=Ct.map((xt=>lr.isA(xt)?lr.transform(xo,xt):Gn.isA(xt)?Gn.transform(xo,xt):or.isA(xt)?or.transform(xo,xt):xt));return 1===Eo.length?Eo[0]:Eo};Ct.exports={rotate:rotate,rotateX:(xt,...Ct)=>rotate([xt,0,0],Ct),rotateY:(xt,...Ct)=>rotate([0,xt,0],Ct),rotateZ:(xt,...Ct)=>rotate([0,0,xt],Ct)}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180,"../../maths/mat4":261,"../../utils/flatten":515}],482:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../maths/mat4"),Gn=xt("../../geometries/geom2"),or=xt("../../geometries/geom3"),lr=xt("../../geometries/path2"),scale=(xt,...Ct)=>{if(!Array.isArray(xt))throw new Error("factors must be an array");if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");for(xt=xt.slice();xt.length<3;)xt.push(1);if(xt[0]<=0||xt[1]<=0||xt[2]<=0)throw new Error("factors must be positive");const _t=Vn.fromScaling(Vn.create(),xt),Fr=Ct.map((xt=>lr.isA(xt)?lr.transform(_t,xt):Gn.isA(xt)?Gn.transform(_t,xt):or.isA(xt)?or.transform(_t,xt):xt));return 1===Fr.length?Fr[0]:Fr};Ct.exports={scale:scale,scaleX:(xt,...Ct)=>scale([xt,1,1],Ct),scaleY:(xt,...Ct)=>scale([1,xt,1],Ct),scaleZ:(xt,...Ct)=>scale([1,1,xt],Ct)}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180,"../../maths/mat4":261,"../../utils/flatten":515}],483:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../geometries/geom2"),Gn=xt("../../geometries/geom3"),or=xt("../../geometries/path2");Ct.exports=(xt,...Ct)=>{if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");const _t=Ct.map((Ct=>or.isA(Ct)?or.transform(xt,Ct):Vn.isA(Ct)?Vn.transform(xt,Ct):Gn.isA(Ct)?Gn.transform(xt,Ct):Ct));return 1===_t.length?_t[0]:_t}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180,"../../utils/flatten":515}],484:[function(xt,Ct,_t){const $t=xt("../../utils/flatten"),Vn=xt("../../maths/mat4"),Gn=xt("../../geometries/geom2"),or=xt("../../geometries/geom3"),lr=xt("../../geometries/path2"),translate=(xt,...Ct)=>{if(!Array.isArray(xt))throw new Error("offset must be an array");if(0===(Ct=$t(Ct)).length)throw new Error("wrong number of arguments");for(xt=xt.slice();xt.length<3;)xt.push(0);const _t=Vn.fromTranslation(Vn.create(),xt),Fr=Ct.map((xt=>lr.isA(xt)?lr.transform(_t,xt):Gn.isA(xt)?Gn.transform(_t,xt):or.isA(xt)?or.transform(_t,xt):xt));return 1===Fr.length?Fr[0]:Fr};Ct.exports={translate:translate,translateX:(xt,...Ct)=>translate([xt,0,0],Ct),translateY:(xt,...Ct)=>translate([0,xt,0],Ct),translateZ:(xt,...Ct)=>translate([0,0,xt],Ct)}},{"../../geometries/geom2":144,"../../geometries/geom3":159,"../../geometries/path2":180,"../../maths/mat4":261,"../../utils/flatten":515}],485:[function(xt,Ct,_t){const{EPS:$t,TAU:Vn}=xt("../maths/constants"),Gn=xt("../maths/vec2"),or=xt("../geometries/path2"),{isGT:lr,isGTE:Fr,isNumberArray:Hr}=xt("./commonChecks");Ct.exports=xt=>{const Ct={center:[0,0],radius:1,startAngle:0,endAngle:Vn,makeTangent:!1,segments:32};let{center:_t,radius:xo,startAngle:Eo,endAngle:Mo,makeTangent:Oo,segments:Ro}=Object.assign({},Ct,xt);if(!Hr(_t,2))throw new Error("center must be an array of X and Y values");if(!lr(xo,0))throw new Error("radius must be greater than zero");if(!Fr(Eo,0))throw new Error("startAngle must be positive");if(!Fr(Mo,0))throw new Error("endAngle must be positive");if(!Fr(Ro,4))throw new Error("segments must be four or more");let Io=Vn;(Eo%=Vn)<(Mo%=Vn)&&(Io=Mo-Eo),Eo>Mo&&(Io=Mo+(Vn-Eo));const Bo=Math.acos((xo*xo+xo*xo-$t*$t)/(2*xo*xo)),zo=Gn.clone(_t);let Ho;const Qo=[];if(Io<Bo)Ho=Gn.fromAngleRadians(Gn.create(),Eo),Gn.scale(Ho,Ho,xo),Gn.add(Ho,Ho,zo),Qo.push(Ho);else{const xt=Math.max(1,Math.floor(Ro*(Io/Vn)))+1;let Ct=.5*xt/Io;Ct>.25&&(Ct=.25);const _t=Oo?xt+2:xt;for(let $t=0;$t<=_t;$t++){let _t=$t;Oo&&((_t=($t-1)*(xt-2*Ct)/xt+Ct)<0&&(_t=0),_t>xt&&(_t=xt));const Vn=Eo+_t*(Io/xt);Ho=Gn.fromAngleRadians(Gn.create(),Vn),Gn.scale(Ho,Ho,xo),Gn.add(Ho,Ho,zo),Qo.push(Ho)}}return or.fromPoints({closed:!1},Qo)}},{"../geometries/path2":180,"../maths/constants":212,"../maths/vec2":309,"./commonChecks":487}],486:[function(xt,Ct,_t){const{TAU:$t}=xt("../maths/constants"),Vn=xt("./ellipse"),{isGTE:Gn}=xt("./commonChecks");Ct.exports=xt=>{const Ct={center:[0,0],radius:1,startAngle:0,endAngle:$t,segments:32};let{center:_t,radius:or,startAngle:lr,endAngle:Fr,segments:Hr}=Object.assign({},Ct,xt);if(!Gn(or,0))throw new Error("radius must be positive");return Vn({center:_t,radius:or=[or,or],startAngle:lr,endAngle:Fr,segments:Hr})}},{"../maths/constants":212,"./commonChecks":487,"./ellipse":492}],487:[function(xt,Ct,_t){Ct.exports={isNumberArray:(xt,Ct)=>!!(Array.isArray(xt)&&xt.length>=Ct)&&xt.every((xt=>Number.isFinite(xt))),isGT:(xt,Ct)=>Number.isFinite(xt)&&xt>Ct,isGTE:(xt,Ct)=>Number.isFinite(xt)&&xt>=Ct}},{}],488:[function(xt,Ct,_t){const $t=xt("./cuboid"),{isGTE:Vn}=xt("./commonChecks");Ct.exports=xt=>{let{center:Ct,size:_t}=Object.assign({},{center:[0,0,0],size:2},xt);if(!Vn(_t,0))throw new Error("size must be positive");return $t({center:Ct,size:_t=[_t,_t,_t]})}},{"./commonChecks":487,"./cuboid":489}],489:[function(xt,Ct,_t){const $t=xt("../geometries/geom3"),Vn=xt("../geometries/poly3"),{isNumberArray:Gn}=xt("./commonChecks");Ct.exports=xt=>{const{center:Ct,size:_t}=Object.assign({},{center:[0,0,0],size:[2,2,2]},xt);if(!Gn(Ct,3))throw new Error("center must be an array of X, Y and Z values");if(!Gn(_t,3))throw new Error("size must be an array of width, depth and height values");if(!_t.every((xt=>xt>=0)))throw new Error("size values must be positive");return 0===_t[0]||0===_t[1]||0===_t[2]?$t.create():$t.create([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map((xt=>{const $t=xt[0].map((xt=>[Ct[0]+_t[0]/2*(2*!!(1&xt)-1),Ct[1]+_t[1]/2*(2*!!(2&xt)-1),Ct[2]+_t[2]/2*(2*!!(4&xt)-1)]));return Vn.create($t)})))}},{"../geometries/geom3":159,"../geometries/poly3":197,"./commonChecks":487}],490:[function(xt,Ct,_t){const $t=xt("../geometries/geom3"),Vn=xt("./cylinderElliptic"),{isGTE:Gn}=xt("./commonChecks");Ct.exports=xt=>{const{center:Ct,height:_t,radius:or,segments:lr}=Object.assign({},{center:[0,0,0],height:2,radius:1,segments:32},xt);if(!Gn(or,0))throw new Error("radius must be positive");return 0===_t||0===or?$t.create():Vn({center:Ct,height:_t,startRadius:[or,or],endRadius:[or,or],segments:lr})}},{"../geometries/geom3":159,"./commonChecks":487,"./cylinderElliptic":491}],491:[function(xt,Ct,_t){const{EPS:$t,TAU:Vn}=xt("../maths/constants"),Gn=xt("../maths/vec3"),or=xt("../geometries/geom3"),lr=xt("../geometries/poly3"),{sin:Fr,cos:Hr}=xt("../maths/utils/trigonometry"),{isGT:xo,isGTE:Eo,isNumberArray:Mo}=xt("./commonChecks");Ct.exports=xt=>{const Ct={center:[0,0,0],height:2,startRadius:[1,1],startAngle:0,endRadius:[1,1],endAngle:Vn,segments:32};let{center:_t,height:Oo,startRadius:Ro,startAngle:Io,endRadius:Bo,endAngle:zo,segments:Ho}=Object.assign({},Ct,xt);if(!Mo(_t,3))throw new Error("center must be an array of X, Y and Z values");if(!xo(Oo,0))throw new Error("height must be greater then zero");if(!Mo(Ro,2))throw new Error("startRadius must be an array of X and Y values");if(!Ro.every((xt=>xt>=0)))throw new Error("startRadius values must be positive");if(!Mo(Bo,2))throw new Error("endRadius must be an array of X and Y values");if(!Bo.every((xt=>xt>=0)))throw new Error("endRadius values must be positive");if(Bo.every((xt=>0===xt))&&Ro.every((xt=>0===xt)))throw new Error("at least one radius must be positive");if(!Eo(Io,0))throw new Error("startAngle must be positive");if(!Eo(zo,0))throw new Error("endAngle must be positive");if(!Eo(Ho,4))throw new Error("segments must be four or more");let Qo=Vn;(Io%=Vn)<(zo%=Vn)&&(Qo=zo-Io),Io>zo&&(Qo=zo+(Vn-Io));const pi=Math.min(Ro[0],Ro[1],Bo[0],Bo[1]),gi=Math.acos((pi*pi+pi*pi-$t*$t)/(2*pi*pi));if(Qo<gi)throw new Error("startAngle and endAngle do not define a significant rotation");const es=Math.floor(Ho*(Qo/Vn)),ts=Gn.fromValues(0,0,-Oo/2),ns=Gn.fromValues(0,0,Oo/2),rs=Gn.subtract(Gn.create(),ns,ts),os=Gn.fromValues(1,0,0),is=Gn.fromValues(0,1,0),ss=Gn.create(),as=Gn.create(),ls=Gn.create(),y=(xt,Ct,_t)=>{const $t=Ct*Qo+Io;return Gn.scale(ss,os,_t[0]*Hr($t)),Gn.scale(as,is,_t[1]*Fr($t)),Gn.add(ss,ss,as),Gn.scale(ls,rs,xt),Gn.add(ls,ls,ts),Gn.add(Gn.create(),ss,ls)},T=(...xt)=>{const Ct=xt.map((xt=>Gn.add(Gn.create(),xt,_t)));return lr.create(Ct)},cs=[];for(let xt=0;xt<es;xt++){const Ct=xt/es;let _t=(xt+1)/es;Qo===Vn&&xt===es-1&&(_t=0),Bo[0]===Ro[0]&&Bo[1]===Ro[1]?(cs.push(T(ts,y(0,_t,Bo),y(0,Ct,Bo))),cs.push(T(y(0,_t,Bo),y(1,_t,Bo),y(1,Ct,Bo),y(0,Ct,Bo))),cs.push(T(ns,y(1,Ct,Bo),y(1,_t,Bo)))):(Ro[0]>0&&Ro[1]>0&&cs.push(T(ts,y(0,_t,Ro),y(0,Ct,Ro))),(Ro[0]>0||Ro[1]>0)&&cs.push(T(y(0,Ct,Ro),y(0,_t,Ro),y(1,Ct,Bo))),Bo[0]>0&&Bo[1]>0&&cs.push(T(ns,y(1,Ct,Bo),y(1,_t,Bo))),(Bo[0]>0||Bo[1]>0)&&cs.push(T(y(1,Ct,Bo),y(0,_t,Ro),y(1,_t,Bo))))}return Qo<Vn&&(cs.push(T(ts,y(0,0,Ro),ns)),cs.push(T(y(0,0,Ro),y(1,0,Bo),ns)),cs.push(T(ts,ns,y(0,1,Ro))),cs.push(T(y(0,1,Ro),ns,y(1,1,Bo)))),or.create(cs)}},{"../geometries/geom3":159,"../geometries/poly3":197,"../maths/constants":212,"../maths/utils/trigonometry":291,"../maths/vec3":340,"./commonChecks":487}],492:[function(xt,Ct,_t){const{EPS:$t,TAU:Vn}=xt("../maths/constants"),Gn=xt("../maths/vec2"),or=xt("../geometries/geom2"),{sin:lr,cos:Fr}=xt("../maths/utils/trigonometry"),{isGTE:Hr,isNumberArray:xo}=xt("./commonChecks");Ct.exports=xt=>{const Ct={center:[0,0],radius:[1,1],startAngle:0,endAngle:Vn,segments:32};let{center:_t,radius:Eo,startAngle:Mo,endAngle:Oo,segments:Ro}=Object.assign({},Ct,xt);if(!xo(_t,2))throw new Error("center must be an array of X and Y values");if(!xo(Eo,2))throw new Error("radius must be an array of X and Y values");if(!Eo.every((xt=>xt>=0)))throw new Error("radius values must be positive");if(!Hr(Mo,0))throw new Error("startAngle must be positive");if(!Hr(Oo,0))throw new Error("endAngle must be positive");if(!Hr(Ro,3))throw new Error("segments must be three or more");if(0===Eo[0]||0===Eo[1])return or.create();let Io=Vn;(Mo%=Vn)<(Oo%=Vn)&&(Io=Oo-Mo),Mo>Oo&&(Io=Oo+(Vn-Mo));const Bo=Math.min(Eo[0],Eo[1]);if(Io<Math.acos((Bo*Bo+Bo*Bo-$t*$t)/(2*Bo*Bo)))throw new Error("startAngle and endAngle do not define a significant rotation");Ro=Math.floor(Ro*(Io/Vn));const zo=Gn.clone(_t),Ho=Io/Ro,Qo=[];Ro=Io<Vn?Ro+1:Ro;for(let xt=0;xt<Ro;xt++){const Ct=Ho*xt+Mo,_t=Gn.fromValues(Eo[0]*Fr(Ct),Eo[1]*lr(Ct));Gn.add(_t,zo,_t),Qo.push(_t)}return Io<Vn&&Qo.push(zo),or.fromPoints(Qo)}},{"../geometries/geom2":144,"../maths/constants":212,"../maths/utils/trigonometry":291,"../maths/vec2":309,"./commonChecks":487}],493:[function(xt,Ct,_t){const{TAU:$t}=xt("../maths/constants"),Vn=xt("../maths/vec3"),Gn=xt("../geometries/geom3"),or=xt("../geometries/poly3"),{sin:lr,cos:Fr}=xt("../maths/utils/trigonometry"),{isGTE:Hr,isNumberArray:xo}=xt("./commonChecks");Ct.exports=xt=>{const{center:Ct,radius:_t,segments:Eo,axes:Mo}=Object.assign({},{center:[0,0,0],radius:[1,1,1],segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},xt);if(!xo(Ct,3))throw new Error("center must be an array of X, Y and Z values");if(!xo(_t,3))throw new Error("radius must be an array of X, Y and Z values");if(!_t.every((xt=>xt>=0)))throw new Error("radius values must be positive");if(!Hr(Eo,4))throw new Error("segments must be four or more");if(0===_t[0]||0===_t[1]||0===_t[2])return Gn.create();const Oo=Vn.scale(Vn.create(),Vn.normalize(Vn.create(),Mo[0]),_t[0]),Ro=Vn.scale(Vn.create(),Vn.normalize(Vn.create(),Mo[1]),_t[1]),Io=Vn.scale(Vn.create(),Vn.normalize(Vn.create(),Mo[2]),_t[2]),Bo=Math.round(Eo/4);let zo;const Ho=[],Qo=Vn.create(),pi=Vn.create();for(let xt=0;xt<=Eo;xt++){const _t=$t*xt/Eo,Gn=Vn.add(Vn.create(),Vn.scale(Qo,Oo,Fr(_t)),Vn.scale(pi,Ro,lr(_t)));if(xt>0){let xt,_t;for(let Hr=0;Hr<=Bo;Hr++){const xo=$t/4*Hr/Bo,Eo=Fr(xo),Mo=lr(xo);if(Hr>0){let $t,lr=[];$t=Vn.subtract(Vn.create(),Vn.scale(Qo,zo,xt),Vn.scale(pi,Io,_t)),lr.push(Vn.add($t,$t,Ct)),$t=Vn.subtract(Vn.create(),Vn.scale(Qo,Gn,xt),Vn.scale(pi,Io,_t)),lr.push(Vn.add($t,$t,Ct)),Hr<Bo&&($t=Vn.subtract(Vn.create(),Vn.scale(Qo,Gn,Eo),Vn.scale(pi,Io,Mo)),lr.push(Vn.add($t,$t,Ct))),$t=Vn.subtract(Vn.create(),Vn.scale(Qo,zo,Eo),Vn.scale(pi,Io,Mo)),lr.push(Vn.add($t,$t,Ct)),Ho.push(or.create(lr)),lr=[],$t=Vn.add(Vn.create(),Vn.scale(Qo,zo,xt),Vn.scale(pi,Io,_t)),lr.push(Vn.add(Vn.create(),Ct,$t)),$t=Vn.add($t,Vn.scale(Qo,Gn,xt),Vn.scale(pi,Io,_t)),lr.push(Vn.add(Vn.create(),Ct,$t)),Hr<Bo&&($t=Vn.add($t,Vn.scale(Qo,Gn,Eo),Vn.scale(pi,Io,Mo)),lr.push(Vn.add(Vn.create(),Ct,$t))),$t=Vn.add($t,Vn.scale(Qo,zo,Eo),Vn.scale(pi,Io,Mo)),lr.push(Vn.add(Vn.create(),Ct,$t)),lr.reverse(),Ho.push(or.create(lr))}xt=Eo,_t=Mo}}zo=Gn}return Gn.create(Ho)}},{"../geometries/geom3":159,"../geometries/poly3":197,"../maths/constants":212,"../maths/utils/trigonometry":291,"../maths/vec3":340,"./commonChecks":487}],494:[function(xt,Ct,_t){const $t=xt("../maths/mat4"),Vn=xt("../maths/vec3"),Gn=xt("../geometries/geom3"),or=xt("./polyhedron"),{isGTE:lr}=xt("./commonChecks");Ct.exports=xt=>{let{radius:Ct,frequency:_t}=Object.assign({},{radius:1,frequency:6},xt);if(!lr(Ct,0))throw new Error("radius must be positive");if(!lr(_t,6))throw new Error("frequency must be six or more");if(0===Ct)return Gn.create();_t=Math.floor(_t/6);const Fr=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],Hr=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],n=(xt,Ct,_t)=>{const $t=xt[0],Gn=xt[1],or=xt[2];let lr=_t;const Fr=[],Hr=[];for(let xt=0;xt<Ct;xt++)for(let _t=0;_t<Ct-xt;_t++){const xo=xt/Ct,Eo=(xt+1)/Ct,Mo=_t/(Ct-xt),Oo=(_t+1)/(Ct-xt),Ro=Ct-xt-1?_t/(Ct-xt-1):1,Io=[];Io[0]=i(i($t,Gn,Mo),or,xo),Io[1]=i(i($t,Gn,Oo),or,xo),Io[2]=i(i($t,Gn,Ro),or,Eo);for(let xt=0;xt<3;xt++){const Ct=Vn.length(Io[xt]);for(let _t=0;_t<3;_t++)Io[xt][_t]/=Ct}if(Fr.push(Io[0],Io[1],Io[2]),Hr.push([lr,lr+1,lr+2]),lr+=3,_t<Ct-xt-1){const Mo=Ct-xt-1?(_t+1)/(Ct-xt-1):1;Io[0]=i(i($t,Gn,Oo),or,xo),Io[1]=i(i($t,Gn,Mo),or,Eo),Io[2]=i(i($t,Gn,Ro),or,Eo);for(let xt=0;xt<3;xt++){const Ct=Vn.length(Io[xt]);for(let _t=0;_t<3;_t++)Io[xt][_t]/=Ct}Fr.push(Io[0],Io[1],Io[2]),Hr.push([lr,lr+1,lr+2]),lr+=3}}return{points:Fr,triangles:Hr,offset:lr}},i=(xt,Ct,_t)=>{const $t=1-_t,Vn=[];for(let Gn=0;Gn<3;Gn++)Vn[Gn]=xt[Gn]*$t+Ct[Gn]*_t;return Vn};let xo=[],Eo=[],Mo=0;for(let xt=0;xt<Hr.length;xt++){const Ct=n([Fr[Hr[xt][0]],Fr[Hr[xt][1]],Fr[Hr[xt][2]]],_t,Mo);xo=xo.concat(Ct.points),Eo=Eo.concat(Ct.triangles),Mo=Ct.offset}let Oo=or({points:xo,faces:Eo,orientation:"inward"});return 1!==Ct&&(Oo=Gn.transform($t.fromScaling($t.create(),[Ct,Ct,Ct]),Oo)),Oo}},{"../geometries/geom3":159,"../maths/mat4":261,"../maths/vec3":340,"./commonChecks":487,"./polyhedron":498}],495:[function(xt,Ct,_t){Ct.exports={arc:xt("./arc"),circle:xt("./circle"),cube:xt("./cube"),cuboid:xt("./cuboid"),cylinder:xt("./cylinder"),cylinderElliptic:xt("./cylinderElliptic"),ellipse:xt("./ellipse"),ellipsoid:xt("./ellipsoid"),geodesicSphere:xt("./geodesicSphere"),line:xt("./line"),polygon:xt("./polygon"),polyhedron:xt("./polyhedron"),rectangle:xt("./rectangle"),roundedCuboid:xt("./roundedCuboid"),roundedCylinder:xt("./roundedCylinder"),roundedRectangle:xt("./roundedRectangle"),sphere:xt("./sphere"),square:xt("./square"),star:xt("./star"),torus:xt("./torus"),triangle:xt("./triangle")}},{"./arc":485,"./circle":486,"./cube":488,"./cuboid":489,"./cylinder":490,"./cylinderElliptic":491,"./ellipse":492,"./ellipsoid":493,"./geodesicSphere":494,"./line":496,"./polygon":497,"./polyhedron":498,"./rectangle":499,"./roundedCuboid":500,"./roundedCylinder":501,"./roundedRectangle":502,"./sphere":503,"./square":504,"./star":505,"./torus":506,"./triangle":507}],496:[function(xt,Ct,_t){const $t=xt("../geometries/path2");Ct.exports=xt=>{if(!Array.isArray(xt))throw new Error("points must be an array");return $t.fromPoints({},xt)}},{"../geometries/path2":180}],497:[function(xt,Ct,_t){const $t=xt("../geometries/geom2");Ct.exports=xt=>{const{points:Ct,paths:_t,orientation:Vn}=Object.assign({},{points:[],paths:[],orientation:"counterclockwise"},xt);if(!Array.isArray(Ct)||!Array.isArray(_t))throw new Error("points and paths must be arrays");let Gn=Ct;Array.isArray(Ct[0])&&(Array.isArray(Ct[0][0])||(Gn=[Ct])),Gn.forEach(((xt,Ct)=>{if(!Array.isArray(xt))throw new Error("list of points "+Ct+" must be an array");if(xt.length<3)throw new Error("list of points "+Ct+" must contain three or more points");xt.forEach(((xt,_t)=>{if(!Array.isArray(xt))throw new Error("list of points "+Ct+", point "+_t+" must be an array");if(xt.length<2)throw new Error("list of points "+Ct+", point "+_t+" must contain by X and Y values")}))}));let or=_t;if(0===_t.length){let xt=0;or=Gn.map((Ct=>Ct.map((Ct=>xt++))))}const lr=[];Gn.forEach((xt=>xt.forEach((xt=>lr.push(xt)))));let Fr=[];or.forEach((xt=>{const Ct=xt.map((xt=>lr[xt])),_t=$t.fromPoints(Ct);Fr=Fr.concat($t.toSides(_t))}));let Hr=$t.create(Fr);return"clockwise"==Vn&&(Hr=$t.reverse(Hr)),Hr}},{"../geometries/geom2":144}],498:[function(xt,Ct,_t){const $t=xt("../geometries/geom3"),Vn=xt("../geometries/poly3"),{isNumberArray:Gn}=xt("./commonChecks");Ct.exports=xt=>{const{points:Ct,faces:_t,colors:or,orientation:lr}=Object.assign({},{points:[],faces:[],colors:void 0,orientation:"outward"},xt);if(!Array.isArray(Ct)||!Array.isArray(_t))throw new Error("points and faces must be arrays");if(Ct.length<3)throw new Error("three or more points are required");if(_t.length<1)throw new Error("one or more faces are required");if(or){if(!Array.isArray(or))throw new Error("colors must be an array");if(or.length!==_t.length)throw new Error("faces and colors must have the same length")}Ct.forEach(((xt,Ct)=>{if(!Gn(xt,3))throw new Error(`point ${Ct} must be an array of X, Y, Z values`)})),_t.forEach(((xt,Ct)=>{if(xt.length<3)throw new Error(`face ${Ct} must contain 3 or more indexes`);if(!Gn(xt,xt.length))throw new Error(`face ${Ct} must be an array of numbers`)})),"outward"!==lr&&_t.forEach((xt=>xt.reverse()));const Fr=_t.map(((xt,_t)=>{const $t=Vn.create(xt.map((xt=>Ct[xt])));return or&&or[_t]&&($t.color=or[_t]),$t}));return $t.create(Fr)}},{"../geometries/geom3":159,"../geometries/poly3":197,"./commonChecks":487}],499:[function(xt,Ct,_t){const $t=xt("../maths/vec2"),Vn=xt("../geometries/geom2"),{isNumberArray:Gn}=xt("./commonChecks");Ct.exports=xt=>{const{center:Ct,size:_t}=Object.assign({},{center:[0,0],size:[2,2]},xt);if(!Gn(Ct,2))throw new Error("center must be an array of X and Y values");if(!Gn(_t,2))throw new Error("size must be an array of X and Y values");if(!_t.every((xt=>xt>=0)))throw new Error("size values must be positive");if(0===_t[0]||0===_t[1])return Vn.create();const or=[_t[0]/2,_t[1]/2],lr=[or[0],-or[1]],Fr=[$t.subtract($t.create(),Ct,or),$t.add($t.create(),Ct,lr),$t.add($t.create(),Ct,or),$t.subtract($t.create(),Ct,lr)];return Vn.fromPoints(Fr)}},{"../geometries/geom2":144,"../maths/vec2":309,"./commonChecks":487}],500:[function(xt,Ct,_t){const{EPS:$t,TAU:Vn}=xt("../maths/constants"),Gn=xt("../maths/vec2"),or=xt("../maths/vec3"),lr=xt("../geometries/geom3"),Fr=xt("../geometries/poly3"),{sin:Hr,cos:xo}=xt("../maths/utils/trigonometry"),{isGTE:Eo,isNumberArray:Mo}=xt("./commonChecks"),Oo=xt("./cuboid"),createCorners=(xt,Ct,_t,lr,Fr,Eo)=>{const Mo=Vn/4*Fr/lr,Oo=xo(Mo),Ro=Hr(Mo),Io=lr-Fr;let Bo=_t*Oo,zo=Ct[2]-(_t-_t*Ro);Eo||(zo=_t-_t*Ro-Ct[2]),Bo=Bo>$t?Bo:0;const Ho=or.add(or.create(),xt,[Ct[0]-_t,Ct[1]-_t,zo]),Qo=or.add(or.create(),xt,[_t-Ct[0],Ct[1]-_t,zo]),pi=or.add(or.create(),xt,[_t-Ct[0],_t-Ct[1],zo]),gi=or.add(or.create(),xt,[Ct[0]-_t,_t-Ct[1],zo]),es=[],ts=[],ns=[],rs=[];for(let xt=0;xt<=Io;xt++){const Ct=Io>0?Vn/4*xt/Io:0,_t=Gn.fromAngleRadians(Gn.create(),Ct);Gn.scale(_t,_t,Bo);const $t=or.fromVec2(or.create(),_t);es.push(or.add(or.create(),Ho,$t)),or.rotateZ($t,$t,[0,0,0],Vn/4),ts.push(or.add(or.create(),Qo,$t)),or.rotateZ($t,$t,[0,0,0],Vn/4),ns.push(or.add(or.create(),pi,$t)),or.rotateZ($t,$t,[0,0,0],Vn/4),rs.push(or.add(or.create(),gi,$t))}return Eo?[es,ts,ns,rs]:(es.reverse(),ts.reverse(),ns.reverse(),rs.reverse(),[rs,ns,ts,es])},stitchCorners=(xt,Ct)=>{const _t=[];for(let $t=0;$t<xt.length;$t++){const Vn=xt[$t],Gn=Ct[$t];for(let xt=0;xt<Vn.length-1;xt++)_t.push(Fr.create([Vn[xt],Vn[xt+1],Gn[xt]])),xt<Gn.length-1&&_t.push(Fr.create([Gn[xt],Vn[xt+1],Gn[xt+1]]))}return _t},stitchWalls=(xt,Ct)=>{const _t=[];for(let $t=0;$t<xt.length;$t++){let Vn=xt[$t],Gn=Ct[$t];const or=Vn[Vn.length-1],lr=Gn[Gn.length-1],Hr=($t+1)%xt.length;Vn=xt[Hr],Gn=Ct[Hr];const xo=Vn[0],Eo=Gn[0];_t.push(Fr.create([or,xo,Eo,lr]))}return _t},stitchSides=(xt,Ct)=>{xt=(xt=[xt[3],xt[2],xt[1],xt[0]]).map((xt=>xt.slice().reverse()));const _t=[];xt.forEach((xt=>{xt.forEach((xt=>_t.push(xt)))}));const $t=[];Ct.forEach((xt=>{xt.forEach((xt=>$t.push(xt)))}));const Vn=[];for(let xt=0;xt<$t.length;xt++){const Ct=(xt+1)%$t.length;Vn.push(Fr.create([_t[xt],_t[Ct],$t[Ct],$t[xt]]))}return Vn};Ct.exports=xt=>{let{center:Ct,size:_t,roundRadius:Vn,segments:Gn}=Object.assign({},{center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32},xt);if(!Mo(Ct,3))throw new Error("center must be an array of X, Y and Z values");if(!Mo(_t,3))throw new Error("size must be an array of X, Y and Z values");if(!_t.every((xt=>xt>=0)))throw new Error("size values must be positive");if(!Eo(Vn,0))throw new Error("roundRadius must be positive");if(!Eo(Gn,4))throw new Error("segments must be four or more");if(0===_t[0]||0===_t[1]||0===_t[2])return lr.create();if(0===Vn)return Oo({center:Ct,size:_t});if(Vn>(_t=_t.map((xt=>xt/2)))[0]-$t||Vn>_t[1]-$t||Vn>_t[2]-$t)throw new Error("roundRadius must be smaller then the radius of all dimensions");Gn=Math.floor(Gn/4);let or=null,Hr=null,xo=[];for(let xt=0;xt<=Gn;xt++){const $t=createCorners(Ct,_t,Vn,Gn,xt,!0),lr=createCorners(Ct,_t,Vn,Gn,xt,!1);if(0===xt&&(xo=xo.concat(stitchSides(lr,$t))),or&&(xo=xo.concat(stitchCorners(or,$t),stitchWalls(or,$t))),Hr&&(xo=xo.concat(stitchCorners(Hr,lr),stitchWalls(Hr,lr))),xt===Gn){let xt=$t.map((xt=>xt[0]));xo.push(Fr.create(xt)),xt=lr.map((xt=>xt[0])),xo.push(Fr.create(xt))}or=$t,Hr=lr}return lr.create(xo)}},{"../geometries/geom3":159,"../geometries/poly3":197,"../maths/constants":212,"../maths/utils/trigonometry":291,"../maths/vec2":309,"../maths/vec3":340,"./commonChecks":487,"./cuboid":489}],501:[function(xt,Ct,_t){const{EPS:$t,TAU:Vn}=xt("../maths/constants"),Gn=xt("../maths/vec3"),or=xt("../geometries/geom3"),lr=xt("../geometries/poly3"),{sin:Fr,cos:Hr}=xt("../maths/utils/trigonometry"),{isGTE:xo,isNumberArray:Eo}=xt("./commonChecks"),Mo=xt("./cylinder");Ct.exports=xt=>{const{center:Ct,height:_t,radius:Oo,roundRadius:Ro,segments:Io}=Object.assign({},{center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},xt);if(!Eo(Ct,3))throw new Error("center must be an array of X, Y and Z values");if(!xo(_t,0))throw new Error("height must be positive");if(!xo(Oo,0))throw new Error("radius must be positive");if(!xo(Ro,0))throw new Error("roundRadius must be positive");if(Ro>Oo)throw new Error("roundRadius must be smaller then the radius");if(!xo(Io,4))throw new Error("segments must be four or more");if(0===_t||0===Oo)return or.create();if(0===Ro)return Mo({center:Ct,height:_t,radius:Oo});const Bo=[0,0,-_t/2],zo=[0,0,_t/2],Ho=Gn.subtract(Gn.create(),zo,Bo);if(2*Ro>Gn.length(Ho)-$t)throw new Error("height must be larger than twice roundRadius");let Qo;Qo=Math.abs(Ho[0])>Math.abs(Ho[1])?Gn.fromValues(0,1,0):Gn.fromValues(1,0,0);const pi=Gn.scale(Gn.create(),Gn.normalize(Gn.create(),Ho),Ro),gi=Gn.scale(Gn.create(),Gn.normalize(Gn.create(),Gn.cross(Gn.create(),pi,Qo)),Oo),es=Gn.scale(Gn.create(),Gn.normalize(Gn.create(),Gn.cross(Gn.create(),gi,pi)),Oo);Gn.add(Bo,Bo,pi),Gn.subtract(zo,zo,pi);const ts=Math.floor(.25*Io),m=xt=>{const _t=xt.map((xt=>Gn.add(xt,xt,Ct)));return lr.create(_t)},ns=[],rs=Gn.create(),os=Gn.create();let is;for(let xt=0;xt<=Io;xt++){const Ct=Vn*xt/Io,_t=Gn.add(Gn.create(),Gn.scale(rs,gi,Hr(Ct)),Gn.scale(os,es,Fr(Ct)));if(xt>0){let xt,Ct,$t=[];$t.push(Gn.add(Gn.create(),Bo,_t)),$t.push(Gn.add(Gn.create(),Bo,is)),$t.push(Gn.add(Gn.create(),zo,is)),$t.push(Gn.add(Gn.create(),zo,_t)),ns.push(m($t));for(let or=0;or<=ts;or++){const lr=Vn/4*or/ts,xo=Hr(lr),Eo=Fr(lr);if(or>0){let Vn;$t=[],Vn=Gn.add(Gn.create(),Bo,Gn.subtract(rs,Gn.scale(rs,is,xt),Gn.scale(os,pi,Ct))),$t.push(Vn),Vn=Gn.add(Gn.create(),Bo,Gn.subtract(rs,Gn.scale(rs,_t,xt),Gn.scale(os,pi,Ct))),$t.push(Vn),or<ts&&(Vn=Gn.add(Gn.create(),Bo,Gn.subtract(rs,Gn.scale(rs,_t,xo),Gn.scale(os,pi,Eo))),$t.push(Vn)),Vn=Gn.add(Gn.create(),Bo,Gn.subtract(rs,Gn.scale(rs,is,xo),Gn.scale(os,pi,Eo))),$t.push(Vn),ns.push(m($t)),$t=[],Vn=Gn.add(Gn.create(),Gn.scale(rs,is,xt),Gn.scale(os,pi,Ct)),Gn.add(Vn,Vn,zo),$t.push(Vn),Vn=Gn.add(Gn.create(),Gn.scale(rs,_t,xt),Gn.scale(os,pi,Ct)),Gn.add(Vn,Vn,zo),$t.push(Vn),or<ts&&(Vn=Gn.add(Gn.create(),Gn.scale(rs,_t,xo),Gn.scale(os,pi,Eo)),Gn.add(Vn,Vn,zo),$t.push(Vn)),Vn=Gn.add(Gn.create(),Gn.scale(rs,is,xo),Gn.scale(os,pi,Eo)),Gn.add(Vn,Vn,zo),$t.push(Vn),$t.reverse(),ns.push(m($t))}xt=xo,Ct=Eo}}is=_t}return or.create(ns)}},{"../geometries/geom3":159,"../geometries/poly3":197,"../maths/constants":212,"../maths/utils/trigonometry":291,"../maths/vec3":340,"./commonChecks":487,"./cylinder":490}],502:[function(xt,Ct,_t){const{EPS:$t,TAU:Vn}=xt("../maths/constants"),Gn=xt("../maths/vec2"),or=xt("../geometries/geom2"),{isGTE:lr,isNumberArray:Fr}=xt("./commonChecks"),Hr=xt("./rectangle");Ct.exports=xt=>{let{center:Ct,size:_t,roundRadius:xo,segments:Eo}=Object.assign({},{center:[0,0],size:[2,2],roundRadius:.2,segments:32},xt);if(!Fr(Ct,2))throw new Error("center must be an array of X and Y values");if(!Fr(_t,2))throw new Error("size must be an array of X and Y values");if(!_t.every((xt=>xt>=0)))throw new Error("size values must be positive");if(!lr(xo,0))throw new Error("roundRadius must be positive");if(!lr(Eo,4))throw new Error("segments must be four or more");if(0===_t[0]||0===_t[1])return or.create();if(0===xo)return Hr({center:Ct,size:_t});if(xo>(_t=_t.map((xt=>xt/2)))[0]-$t||xo>_t[1]-$t)throw new Error("roundRadius must be smaller then the radius of all dimensions");const Mo=Math.floor(Eo/4),Oo=Gn.add(Gn.create(),Ct,[_t[0]-xo,_t[1]-xo]),Ro=Gn.add(Gn.create(),Ct,[xo-_t[0],_t[1]-xo]),Io=Gn.add(Gn.create(),Ct,[xo-_t[0],xo-_t[1]]),Bo=Gn.add(Gn.create(),Ct,[_t[0]-xo,xo-_t[1]]),zo=[],Ho=[],Qo=[],pi=[];for(let xt=0;xt<=Mo;xt++){const Ct=Vn/4*xt/Mo,_t=Gn.fromAngleRadians(Gn.create(),Ct);Gn.scale(_t,_t,xo),zo.push(Gn.add(Gn.create(),Oo,_t)),Gn.rotate(_t,_t,Gn.create(),Vn/4),Ho.push(Gn.add(Gn.create(),Ro,_t)),Gn.rotate(_t,_t,Gn.create(),Vn/4),Qo.push(Gn.add(Gn.create(),Io,_t)),Gn.rotate(_t,_t,Gn.create(),Vn/4),pi.push(Gn.add(Gn.create(),Bo,_t))}return or.fromPoints(zo.concat(Ho,Qo,pi))}},{"../geometries/geom2":144,"../maths/constants":212,"../maths/vec2":309,"./commonChecks":487,"./rectangle":499}],503:[function(xt,Ct,_t){const $t=xt("./ellipsoid"),{isGTE:Vn}=xt("./commonChecks");Ct.exports=xt=>{let{center:Ct,radius:_t,segments:Gn,axes:or}=Object.assign({},{center:[0,0,0],radius:1,segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},xt);if(!Vn(_t,0))throw new Error("radius must be positive");return $t({center:Ct,radius:_t=[_t,_t,_t],segments:Gn,axes:or})}},{"./commonChecks":487,"./ellipsoid":493}],504:[function(xt,Ct,_t){const $t=xt("./rectangle"),{isGTE:Vn}=xt("./commonChecks");Ct.exports=xt=>{let{center:Ct,size:_t}=Object.assign({},{center:[0,0],size:2},xt);if(!Vn(_t,0))throw new Error("size must be positive");return $t({center:Ct,size:_t=[_t,_t]})}},{"./commonChecks":487,"./rectangle":499}],505:[function(xt,Ct,_t){const{TAU:$t}=xt("../maths/constants"),Vn=xt("../maths/vec2"),Gn=xt("../geometries/geom2"),{isGT:or,isGTE:lr,isNumberArray:Fr}=xt("./commonChecks"),getPoints=(xt,Ct,_t,Gn)=>{const or=$t/xt,lr=[];for(let $t=0;$t<xt;$t++){const xt=Vn.fromAngleRadians(Vn.create(),or*$t+_t);Vn.scale(xt,xt,Ct),Vn.add(xt,Gn,xt),lr.push(xt)}return lr};Ct.exports=xt=>{let{center:Ct,vertices:_t,outerRadius:Hr,innerRadius:xo,density:Eo,startAngle:Mo}=Object.assign({},{center:[0,0],vertices:5,outerRadius:1,innerRadius:0,density:2,startAngle:0},xt);if(!Fr(Ct,2))throw new Error("center must be an array of X and Y values");if(!lr(_t,2))throw new Error("vertices must be two or more");if(!or(Hr,0))throw new Error("outerRadius must be greater than zero");if(!lr(xo,0))throw new Error("innerRadius must be greater than zero");if(!lr(Mo,0))throw new Error("startAngle must be greater than zero");if(_t=Math.floor(_t),Eo=Math.floor(Eo),Mo%=$t,0===xo){if(!lr(Eo,2))throw new Error("density must be two or more");xo=Hr*((xt,Ct)=>xt>0&&Ct>1&&Ct<xt/2?Math.cos(Math.PI*Ct/xt)/Math.cos(Math.PI*(Ct-1)/xt):0)(_t,Eo)}const Oo=Vn.clone(Ct),Ro=getPoints(_t,Hr,Mo,Oo),Io=getPoints(_t,xo,Mo+Math.PI/_t,Oo),Bo=[];for(let xt=0;xt<_t;xt++)Bo.push(Ro[xt]),Bo.push(Io[xt]);return Gn.fromPoints(Bo)}},{"../geometries/geom2":144,"../maths/constants":212,"../maths/vec2":309,"./commonChecks":487}],506:[function(xt,Ct,_t){const{TAU:$t}=xt("../maths/constants"),Vn=xt("../operations/extrusions/extrudeRotate"),{rotate:Gn}=xt("../operations/transforms/rotate"),{translate:or}=xt("../operations/transforms/translate"),lr=xt("./circle"),{isGT:Fr,isGTE:Hr}=xt("./commonChecks");Ct.exports=xt=>{const Ct={innerRadius:1,innerSegments:32,outerRadius:4,outerSegments:32,innerRotation:0,startAngle:0,outerRotation:$t},{innerRadius:_t,innerSegments:xo,outerRadius:Eo,outerSegments:Mo,innerRotation:Oo,startAngle:Ro,outerRotation:Io}=Object.assign({},Ct,xt);if(!Fr(_t,0))throw new Error("innerRadius must be greater than zero");if(!Hr(xo,3))throw new Error("innerSegments must be three or more");if(!Fr(Eo,0))throw new Error("outerRadius must be greater than zero");if(!Hr(Mo,3))throw new Error("outerSegments must be three or more");if(!Hr(Ro,0))throw new Error("startAngle must be positive");if(!Fr(Io,0))throw new Error("outerRotation must be greater than zero");if(_t>=Eo)throw new Error("inner circle is two large to rotate about the outer circle");let Bo=lr({radius:_t,segments:xo});return 0!==Oo&&(Bo=Gn([0,0,Oo],Bo)),Bo=or([Eo,0],Bo),Vn({startAngle:Ro,angle:Io,segments:Mo},Bo)}},{"../maths/constants":212,"../operations/extrusions/extrudeRotate":434,"../operations/transforms/rotate":481,"../operations/transforms/translate":484,"./circle":486,"./commonChecks":487}],507:[function(xt,Ct,_t){const{NEPS:$t}=xt("../maths/constants"),Vn=xt("../maths/vec2"),Gn=xt("../geometries/geom2"),{isNumberArray:or}=xt("./commonChecks"),solveAngleFromSSS=(xt,Ct,_t)=>Math.acos((xt*xt+Ct*Ct-_t*_t)/(2*xt*Ct)),solveSAS=xt=>{const Ct=xt[0],_t=xt[1],Vn=xt[2],Gn=((xt,Ct,_t)=>Ct>$t?Math.sqrt(xt*xt+_t*_t-2*xt*_t*Math.cos(Ct)):Math.sqrt((xt-_t)*(xt-_t)+xt*_t*Ct*Ct*(1-Ct*Ct/12)))(Ct,_t,Vn),or=solveAngleFromSSS(Gn,Ct,Vn),lr=Math.PI-or-_t;return createTriangle(or,_t,lr,Vn,Gn,Ct)},createTriangle=(xt,Ct,_t,$t,or,lr)=>{const Fr=Vn.fromValues(0,0),Hr=Vn.fromValues(lr,0),xo=Vn.fromValues($t,0);return Vn.add(xo,Vn.rotate(xo,xo,[0,0],Math.PI-Ct),Hr),Gn.fromPoints([Fr,Hr,xo])};Ct.exports=xt=>{let{type:Ct,values:_t}=Object.assign({},{type:"SSS",values:[1,1,1]},xt);if("string"!=typeof Ct)throw new Error("triangle type must be a string");if("A"!==(Ct=Ct.toUpperCase())[0]&&"S"!==Ct[0]||"A"!==Ct[1]&&"S"!==Ct[1]||"A"!==Ct[2]&&"S"!==Ct[2])throw new Error("triangle type must contain three letters; A or S");if(!or(_t,3))throw new Error("triangle values must contain three values");if(!_t.every((xt=>xt>0)))throw new Error("triangle values must be greater than zero");switch(Ct){case"AAA":return(xt=>{if(Math.abs(xt[0]+xt[1]+xt[2]-Math.PI)>$t)throw new Error("AAA triangles require angles that sum to PI");const Ct=xt[0],_t=xt[1],Vn=Math.PI-Ct-_t,Gn=1/Math.sin(Vn)*Math.sin(Ct),or=1/Math.sin(Vn)*Math.sin(_t);return createTriangle(Ct,_t,Vn,Gn,or,1)})(_t);case"AAS":return(xt=>{const Ct=xt[0],_t=xt[1],Vn=Math.PI+$t-Ct-_t;if(Vn<$t)throw new Error("AAS triangles require angles that sum to PI");const Gn=xt[2],or=Gn/Math.sin(Ct)*Math.sin(_t),lr=Gn/Math.sin(Ct)*Math.sin(Vn);return createTriangle(Ct,_t,Vn,Gn,or,lr)})(_t);case"ASA":return(xt=>{const Ct=xt[0],_t=xt[2],Vn=Math.PI+$t-Ct-_t;if(Vn<$t)throw new Error("ASA triangles require angles that sum to PI");const Gn=xt[1],or=Gn/Math.sin(Vn)*Math.sin(Ct),lr=Gn/Math.sin(Vn)*Math.sin(_t);return createTriangle(Ct,_t,Vn,or,lr,Gn)})(_t);case"SAS":return solveSAS(_t);case"SSA":return(xt=>{const Ct=xt[0],_t=xt[1],$t=xt[2],Vn=Math.asin(_t*Math.sin($t)/Ct),Gn=Math.PI-Vn-$t,or=Ct/Math.sin($t)*Math.sin(Gn);return createTriangle(Vn,Gn,$t,_t,or,Ct)})(_t);case"SSS":return(xt=>{const Ct=xt[1],_t=xt[2],$t=xt[0];if(Ct+_t<=$t||_t+$t<=Ct||$t+Ct<=_t)throw new Error("SSS triangle is incorrect, as the longest side is longer than the sum of the other sides");const Vn=solveAngleFromSSS(_t,$t,Ct),Gn=solveAngleFromSSS($t,Ct,_t),or=Math.PI-Vn-Gn;return createTriangle(Vn,Gn,or,Ct,_t,$t)})(_t);default:throw new Error("invalid triangle type, try again")}}},{"../geometries/geom2":144,"../maths/constants":212,"../maths/vec2":309,"./commonChecks":487}],508:[function(xt,Ct,_t){Ct.exports={height:14,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]}},{}],509:[function(xt,Ct,_t){Ct.exports={vectorChar:xt("./vectorChar"),vectorText:xt("./vectorText")}},{"./vectorChar":510,"./vectorText":512}],510:[function(xt,Ct,_t){const $t=xt("./vectorParams");Ct.exports=(xt,Ct)=>{const{xOffset:_t,yOffset:Vn,input:Gn,font:or,height:lr,extrudeOffset:Fr}=$t(xt,Ct);let Hr=Gn.charCodeAt(0);Hr&&or[Hr]||(Hr=63);const xo=[].concat(or[Hr]),Eo=(lr-Fr)/or.height,Mo=Fr/2,Oo=xo.shift()*Eo,Ro=[];let Io=[];for(let xt=0,Ct=xo.length;xt<Ct;xt+=2){const Ct=Eo*xo[xt]+_t,$t=Eo*xo[xt+1]+Vn+Mo;void 0===xo[xt]?(Ro.push(Io),Io=[],xt--):Io.push([Ct,$t])}return Io.length&&Ro.push(Io),{width:Oo,height:lr,segments:Ro}}},{"./vectorParams":511}],511:[function(xt,Ct,_t){const $t={xOffset:0,yOffset:0,input:"?",align:"left",font:xt("./fonts/single-line/hershey/simplex.js"),height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0};Ct.exports=(xt,Ct)=>{Ct||"string"!=typeof xt||(xt={input:xt}),xt=xt||{};const _t=Object.assign({},$t,xt);return _t.input=Ct||_t.input,_t}},{"./fonts/single-line/hershey/simplex.js":508}],512:[function(xt,Ct,_t){const $t=xt("./vectorChar"),Vn=xt("./vectorParams"),translateLine=(xt,Ct)=>{const{x:_t,y:$t}=Object.assign({x:0,y:0},xt||{}),Vn=Ct.segments;let Gn=null,or=null;for(let xt=0,Ct=Vn.length;xt<Ct;xt++)for(let Ct=0,lr=(Gn=Vn[xt]).length;Ct<lr;Ct++)or=Gn[Ct],Gn[Ct]=[or[0]+_t,or[1]+$t];return Ct};Ct.exports=(xt,Ct)=>{const{xOffset:_t,yOffset:Gn,input:or,font:lr,height:Fr,align:Hr,extrudeOffset:xo,lineSpacing:Eo,letterSpacing:Mo}=Vn(xt,Ct);let Oo,Ro,Io,Bo,zo,Ho,[Qo,pi]=[_t,Gn],gi={width:0,segments:[]};const es=[];let ts=[],ns=0;const rs=Qo,P=()=>{es.push(gi),ns=Math.max(ns,gi.width),gi={width:0,segments:[]}};for(Oo=0,Ro=or.length;Oo<Ro;Oo++)Io=or[Oo],Bo=$t({xOffset:Qo,yOffset:pi,font:lr,height:Fr,extrudeOffset:xo},Io),"\n"!==Io?(zo=Bo.width*Mo,gi.width+=zo,Qo+=zo," "!==Io&&(gi.segments=gi.segments.concat(Bo.segments))):(Qo=rs,pi-=Bo.height*Eo,P());for(gi.segments.length&&P(),Oo=0,Ro=es.length;Oo<Ro;Oo++)gi=es[Oo],ns>gi.width&&(Ho=ns-gi.width,"right"===Hr?gi=translateLine({x:Ho},gi):"center"===Hr&&(gi=translateLine({x:Ho/2},gi))),ts=ts.concat(gi.segments);return ts}},{"./vectorChar":510,"./vectorParams":511}],513:[function(xt,Ct,_t){const $t=xt("../geometries/geom2"),Vn=xt("../geometries/geom3"),Gn=xt("../geometries/path2");Ct.exports=xt=>{let Ct;for(const _t of xt){let xt=0;if($t.isA(_t)&&(xt=1),Vn.isA(_t)&&(xt=2),Gn.isA(_t)&&(xt=3),Ct&&xt!==Ct)return!1;Ct=xt}return!0}},{"../geometries/geom2":144,"../geometries/geom3":159,"../geometries/path2":180}],514:[function(xt,Ct,_t){Ct.exports=xt=>.017453292519943295*xt},{}],515:[function(xt,Ct,_t){const flatten=xt=>xt.reduce(((xt,Ct)=>Array.isArray(Ct)?xt.concat(flatten(Ct)):xt.concat(Ct)),[]);Ct.exports=flatten},{}],516:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>xt-Ct},{}],517:[function(xt,Ct,_t){Ct.exports={areAllShapesTheSameType:xt("./areAllShapesTheSameType"),degToRad:xt("./degToRad"),flatten:xt("./flatten"),fnNumberSort:xt("./fnNumberSort"),insertSorted:xt("./insertSorted"),radiusToSegments:xt("./radiusToSegments"),radToDeg:xt("./radToDeg")}},{"./areAllShapesTheSameType":513,"./degToRad":514,"./flatten":515,"./fnNumberSort":516,"./insertSorted":518,"./radToDeg":520,"./radiusToSegments":521}],518:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{let $t=0,Vn=xt.length;for(;Vn>$t;){const Gn=Math.floor(($t+Vn)/2);_t(Ct,xt[Gn])>0?$t=Gn+1:Vn=Gn}xt.splice($t,0,Ct)}},{}],519:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{for(xt=xt.slice();xt.length<_t;)xt.push(Ct);return xt}},{}],520:[function(xt,Ct,_t){Ct.exports=xt=>57.29577951308232*xt},{}],521:[function(xt,Ct,_t){const{TAU:$t}=xt("../maths/constants");Ct.exports=(xt,Ct,_t)=>{const Vn=Ct>0?xt*$t/Ct:0,Gn=_t>0?$t/_t:0;return Math.ceil(Math.max(Vn,Gn,4))}},{"../maths/constants":212}],522:[function(xt,Ct,_t){const flatten=xt=>xt.reduce(((xt,Ct)=>Array.isArray(Ct)?xt.concat(flatten(Ct)):xt.concat(Ct)),[]);Ct.exports=flatten},{}],523:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>xt-Ct},{}],524:[function(xt,Ct,_t){Ct.exports=xt=>{if(Array.isArray(xt)&&0!==xt.length)return xt[0]}},{}],525:[function(xt,Ct,_t){Ct.exports={flatten:xt("./flatten"),fnNumberSort:xt("./fnNumberSort"),head:xt("./head"),insertSorted:xt("./insertSorted"),nth:xt("./nth"),padToLength:xt("./padToLength"),toArray:xt("./toArray")}},{"./flatten":522,"./fnNumberSort":523,"./head":524,"./insertSorted":526,"./nth":527,"./padToLength":528,"./toArray":529}],526:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{let $t=0,Vn=xt.length;for(;Vn>$t;){const Gn=Math.floor(($t+Vn)/2);_t(Ct,xt[Gn])>0?$t=Gn+1:Vn=Gn}return xt.splice($t,0,Ct),xt}},{}],527:[function(xt,Ct,_t){Ct.exports=(xt,Ct)=>{if(Array.isArray(xt)&&!(xt.length<Ct))return xt[Ct]}},{}],528:[function(xt,Ct,_t){Ct.exports=(xt,Ct,_t)=>{for(xt=xt.slice();xt.length<_t;)xt.push(Ct);return xt}},{}],529:[function(xt,Ct,_t){Ct.exports=xt=>Array.isArray(xt)?xt:null==xt?[]:[xt]},{}],530:[function(xt,Ct,_t){var $t=xt("./lib/projectMat4");Ct.exports=function unproject(xt,Ct,_t,Vn){var Gn=_t[0],or=_t[1],lr=_t[2],Fr=_t[3],Hr=Ct[0],xo=Ct[1],Eo=Ct[2];return Hr-=Gn,xo=Fr-xo-1,xo-=or,xt[0]=2*Hr/lr-1,xt[1]=2*xo/Fr-1,xt[2]=2*Eo-1,$t(xt,xt,Vn)}},{"./lib/projectMat4":531}],531:[function(xt,Ct,_t){Ct.exports=function project(xt,Ct,_t){var $t=Ct[0],Vn=Ct[1],Gn=Ct[2],or=_t[0],lr=_t[1],Fr=_t[2],Hr=_t[3],xo=_t[4],Eo=_t[5],Mo=_t[6],Oo=_t[7],Ro=_t[8],Io=_t[9],Bo=_t[10],zo=_t[11],Ho=_t[12],Qo=_t[13],pi=_t[14],gi=1/($t*Hr+Vn*Oo+Gn*zo+_t[15]);return xt[0]=($t*or+Vn*xo+Gn*Ro+Ho)*gi,xt[1]=($t*lr+Vn*Eo+Gn*Io+Qo)*gi,xt[2]=($t*Fr+Vn*Mo+Gn*Bo+pi)*gi,xt}},{}],532:[function(xt,Ct,_t){Ct.exports=function adjoint(xt,Ct){var _t=Ct[0],$t=Ct[1],Vn=Ct[2],Gn=Ct[3],or=Ct[4],lr=Ct[5],Fr=Ct[6],Hr=Ct[7],xo=Ct[8],Eo=Ct[9],Mo=Ct[10],Oo=Ct[11],Ro=Ct[12],Io=Ct[13],Bo=Ct[14],zo=Ct[15];return xt[0]=lr*(Mo*zo-Oo*Bo)-Eo*(Fr*zo-Hr*Bo)+Io*(Fr*Oo-Hr*Mo),xt[1]=-($t*(Mo*zo-Oo*Bo)-Eo*(Vn*zo-Gn*Bo)+Io*(Vn*Oo-Gn*Mo)),xt[2]=$t*(Fr*zo-Hr*Bo)-lr*(Vn*zo-Gn*Bo)+Io*(Vn*Hr-Gn*Fr),xt[3]=-($t*(Fr*Oo-Hr*Mo)-lr*(Vn*Oo-Gn*Mo)+Eo*(Vn*Hr-Gn*Fr)),xt[4]=-(or*(Mo*zo-Oo*Bo)-xo*(Fr*zo-Hr*Bo)+Ro*(Fr*Oo-Hr*Mo)),xt[5]=_t*(Mo*zo-Oo*Bo)-xo*(Vn*zo-Gn*Bo)+Ro*(Vn*Oo-Gn*Mo),xt[6]=-(_t*(Fr*zo-Hr*Bo)-or*(Vn*zo-Gn*Bo)+Ro*(Vn*Hr-Gn*Fr)),xt[7]=_t*(Fr*Oo-Hr*Mo)-or*(Vn*Oo-Gn*Mo)+xo*(Vn*Hr-Gn*Fr),xt[8]=or*(Eo*zo-Oo*Io)-xo*(lr*zo-Hr*Io)+Ro*(lr*Oo-Hr*Eo),xt[9]=-(_t*(Eo*zo-Oo*Io)-xo*($t*zo-Gn*Io)+Ro*($t*Oo-Gn*Eo)),xt[10]=_t*(lr*zo-Hr*Io)-or*($t*zo-Gn*Io)+Ro*($t*Hr-Gn*lr),xt[11]=-(_t*(lr*Oo-Hr*Eo)-or*($t*Oo-Gn*Eo)+xo*($t*Hr-Gn*lr)),xt[12]=-(or*(Eo*Bo-Mo*Io)-xo*(lr*Bo-Fr*Io)+Ro*(lr*Mo-Fr*Eo)),xt[13]=_t*(Eo*Bo-Mo*Io)-xo*($t*Bo-Vn*Io)+Ro*($t*Mo-Vn*Eo),xt[14]=-(_t*(lr*Bo-Fr*Io)-or*($t*Bo-Vn*Io)+Ro*($t*Fr-Vn*lr)),xt[15]=_t*(lr*Mo-Fr*Eo)-or*($t*Mo-Vn*Eo)+xo*($t*Fr-Vn*lr),xt}},{}],533:[function(xt,Ct,_t){Ct.exports=function clone(xt){var Ct=new Float32Array(16);return Ct[0]=xt[0],Ct[1]=xt[1],Ct[2]=xt[2],Ct[3]=xt[3],Ct[4]=xt[4],Ct[5]=xt[5],Ct[6]=xt[6],Ct[7]=xt[7],Ct[8]=xt[8],Ct[9]=xt[9],Ct[10]=xt[10],Ct[11]=xt[11],Ct[12]=xt[12],Ct[13]=xt[13],Ct[14]=xt[14],Ct[15]=xt[15],Ct}},{}],534:[function(xt,Ct,_t){Ct.exports=function copy(xt,Ct){return xt[0]=Ct[0],xt[1]=Ct[1],xt[2]=Ct[2],xt[3]=Ct[3],xt[4]=Ct[4],xt[5]=Ct[5],xt[6]=Ct[6],xt[7]=Ct[7],xt[8]=Ct[8],xt[9]=Ct[9],xt[10]=Ct[10],xt[11]=Ct[11],xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15],xt}},{}],535:[function(xt,Ct,_t){Ct.exports=function create(){var xt=new Float32Array(16);return xt[0]=1,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=1,xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=1,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{}],536:[function(xt,Ct,_t){Ct.exports=function determinant(xt){var Ct=xt[0],_t=xt[1],$t=xt[2],Vn=xt[3],Gn=xt[4],or=xt[5],lr=xt[6],Fr=xt[7],Hr=xt[8],xo=xt[9],Eo=xt[10],Mo=xt[11],Oo=xt[12],Ro=xt[13],Io=xt[14],Bo=xt[15];return(Ct*or-_t*Gn)*(Eo*Bo-Mo*Io)-(Ct*lr-$t*Gn)*(xo*Bo-Mo*Ro)+(Ct*Fr-Vn*Gn)*(xo*Io-Eo*Ro)+(_t*lr-$t*or)*(Hr*Bo-Mo*Oo)-(_t*Fr-Vn*or)*(Hr*Io-Eo*Oo)+($t*Fr-Vn*lr)*(Hr*Ro-xo*Oo)}},{}],537:[function(xt,Ct,_t){Ct.exports=function fromQuat(xt,Ct){var _t=Ct[0],$t=Ct[1],Vn=Ct[2],Gn=Ct[3],or=_t+_t,lr=$t+$t,Fr=Vn+Vn,Hr=_t*or,xo=$t*or,Eo=$t*lr,Mo=Vn*or,Oo=Vn*lr,Ro=Vn*Fr,Io=Gn*or,Bo=Gn*lr,zo=Gn*Fr;return xt[0]=1-Eo-Ro,xt[1]=xo+zo,xt[2]=Mo-Bo,xt[3]=0,xt[4]=xo-zo,xt[5]=1-Hr-Ro,xt[6]=Oo+Io,xt[7]=0,xt[8]=Mo+Bo,xt[9]=Oo-Io,xt[10]=1-Hr-Eo,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{}],538:[function(xt,Ct,_t){Ct.exports=function fromRotation(xt,Ct,_t){var $t,Vn,Gn,or=_t[0],lr=_t[1],Fr=_t[2],Hr=Math.sqrt(or*or+lr*lr+Fr*Fr);return Math.abs(Hr)<1e-6?null:(or*=Hr=1/Hr,lr*=Hr,Fr*=Hr,$t=Math.sin(Ct),Gn=1-(Vn=Math.cos(Ct)),xt[0]=or*or*Gn+Vn,xt[1]=lr*or*Gn+Fr*$t,xt[2]=Fr*or*Gn-lr*$t,xt[3]=0,xt[4]=or*lr*Gn-Fr*$t,xt[5]=lr*lr*Gn+Vn,xt[6]=Fr*lr*Gn+or*$t,xt[7]=0,xt[8]=or*Fr*Gn+lr*$t,xt[9]=lr*Fr*Gn-or*$t,xt[10]=Fr*Fr*Gn+Vn,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt)}},{}],539:[function(xt,Ct,_t){Ct.exports=function fromRotationTranslation(xt,Ct,_t){var $t=Ct[0],Vn=Ct[1],Gn=Ct[2],or=Ct[3],lr=$t+$t,Fr=Vn+Vn,Hr=Gn+Gn,xo=$t*lr,Eo=$t*Fr,Mo=$t*Hr,Oo=Vn*Fr,Ro=Vn*Hr,Io=Gn*Hr,Bo=or*lr,zo=or*Fr,Ho=or*Hr;return xt[0]=1-(Oo+Io),xt[1]=Eo+Ho,xt[2]=Mo-zo,xt[3]=0,xt[4]=Eo-Ho,xt[5]=1-(xo+Io),xt[6]=Ro+Bo,xt[7]=0,xt[8]=Mo+zo,xt[9]=Ro-Bo,xt[10]=1-(xo+Oo),xt[11]=0,xt[12]=_t[0],xt[13]=_t[1],xt[14]=_t[2],xt[15]=1,xt}},{}],540:[function(xt,Ct,_t){Ct.exports=function fromScaling(xt,Ct){return xt[0]=Ct[0],xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=Ct[1],xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=Ct[2],xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{}],541:[function(xt,Ct,_t){Ct.exports=function fromTranslation(xt,Ct){return xt[0]=1,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=1,xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=1,xt[11]=0,xt[12]=Ct[0],xt[13]=Ct[1],xt[14]=Ct[2],xt[15]=1,xt}},{}],542:[function(xt,Ct,_t){Ct.exports=function fromXRotation(xt,Ct){var _t=Math.sin(Ct),$t=Math.cos(Ct);return xt[0]=1,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=$t,xt[6]=_t,xt[7]=0,xt[8]=0,xt[9]=-_t,xt[10]=$t,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{}],543:[function(xt,Ct,_t){Ct.exports=function fromYRotation(xt,Ct){var _t=Math.sin(Ct),$t=Math.cos(Ct);return xt[0]=$t,xt[1]=0,xt[2]=-_t,xt[3]=0,xt[4]=0,xt[5]=1,xt[6]=0,xt[7]=0,xt[8]=_t,xt[9]=0,xt[10]=$t,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{}],544:[function(xt,Ct,_t){Ct.exports=function fromZRotation(xt,Ct){var _t=Math.sin(Ct),$t=Math.cos(Ct);return xt[0]=$t,xt[1]=_t,xt[2]=0,xt[3]=0,xt[4]=-_t,xt[5]=$t,xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=1,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{}],545:[function(xt,Ct,_t){Ct.exports=function frustum(xt,Ct,_t,$t,Vn,Gn,or){var lr=1/(_t-Ct),Fr=1/(Vn-$t),Hr=1/(Gn-or);return xt[0]=2*Gn*lr,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=2*Gn*Fr,xt[6]=0,xt[7]=0,xt[8]=(_t+Ct)*lr,xt[9]=(Vn+$t)*Fr,xt[10]=(or+Gn)*Hr,xt[11]=-1,xt[12]=0,xt[13]=0,xt[14]=or*Gn*2*Hr,xt[15]=0,xt}},{}],546:[function(xt,Ct,_t){Ct.exports=function identity(xt){return xt[0]=1,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=1,xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=1,xt[11]=0,xt[12]=0,xt[13]=0,xt[14]=0,xt[15]=1,xt}},{}],547:[function(xt,Ct,_t){Ct.exports={create:xt("./create"),clone:xt("./clone"),copy:xt("./copy"),identity:xt("./identity"),transpose:xt("./transpose"),invert:xt("./invert"),adjoint:xt("./adjoint"),determinant:xt("./determinant"),multiply:xt("./multiply"),translate:xt("./translate"),scale:xt("./scale"),rotate:xt("./rotate"),rotateX:xt("./rotateX"),rotateY:xt("./rotateY"),rotateZ:xt("./rotateZ"),fromRotation:xt("./fromRotation"),fromRotationTranslation:xt("./fromRotationTranslation"),fromScaling:xt("./fromScaling"),fromTranslation:xt("./fromTranslation"),fromXRotation:xt("./fromXRotation"),fromYRotation:xt("./fromYRotation"),fromZRotation:xt("./fromZRotation"),fromQuat:xt("./fromQuat"),frustum:xt("./frustum"),perspective:xt("./perspective"),perspectiveFromFieldOfView:xt("./perspectiveFromFieldOfView"),ortho:xt("./ortho"),lookAt:xt("./lookAt"),str:xt("./str")}},{"./adjoint":532,"./clone":533,"./copy":534,"./create":535,"./determinant":536,"./fromQuat":537,"./fromRotation":538,"./fromRotationTranslation":539,"./fromScaling":540,"./fromTranslation":541,"./fromXRotation":542,"./fromYRotation":543,"./fromZRotation":544,"./frustum":545,"./identity":546,"./invert":548,"./lookAt":549,"./multiply":550,"./ortho":551,"./perspective":552,"./perspectiveFromFieldOfView":553,"./rotate":554,"./rotateX":555,"./rotateY":556,"./rotateZ":557,"./scale":558,"./str":559,"./translate":560,"./transpose":561}],548:[function(xt,Ct,_t){Ct.exports=function invert(xt,Ct){var _t=Ct[0],$t=Ct[1],Vn=Ct[2],Gn=Ct[3],or=Ct[4],lr=Ct[5],Fr=Ct[6],Hr=Ct[7],xo=Ct[8],Eo=Ct[9],Mo=Ct[10],Oo=Ct[11],Ro=Ct[12],Io=Ct[13],Bo=Ct[14],zo=Ct[15],Ho=_t*lr-$t*or,Qo=_t*Fr-Vn*or,pi=_t*Hr-Gn*or,gi=$t*Fr-Vn*lr,es=$t*Hr-Gn*lr,ts=Vn*Hr-Gn*Fr,ns=xo*Io-Eo*Ro,rs=xo*Bo-Mo*Ro,os=xo*zo-Oo*Ro,is=Eo*Bo-Mo*Io,ss=Eo*zo-Oo*Io,as=Mo*zo-Oo*Bo,ls=Ho*as-Qo*ss+pi*is+gi*os-es*rs+ts*ns;return ls?(ls=1/ls,xt[0]=(lr*as-Fr*ss+Hr*is)*ls,xt[1]=(Vn*ss-$t*as-Gn*is)*ls,xt[2]=(Io*ts-Bo*es+zo*gi)*ls,xt[3]=(Mo*es-Eo*ts-Oo*gi)*ls,xt[4]=(Fr*os-or*as-Hr*rs)*ls,xt[5]=(_t*as-Vn*os+Gn*rs)*ls,xt[6]=(Bo*pi-Ro*ts-zo*Qo)*ls,xt[7]=(xo*ts-Mo*pi+Oo*Qo)*ls,xt[8]=(or*ss-lr*os+Hr*ns)*ls,xt[9]=($t*os-_t*ss-Gn*ns)*ls,xt[10]=(Ro*es-Io*pi+zo*Ho)*ls,xt[11]=(Eo*pi-xo*es-Oo*Ho)*ls,xt[12]=(lr*rs-or*is-Fr*ns)*ls,xt[13]=(_t*is-$t*rs+Vn*ns)*ls,xt[14]=(Io*Qo-Ro*gi-Bo*Ho)*ls,xt[15]=(xo*gi-Eo*Qo+Mo*Ho)*ls,xt):null}},{}],549:[function(xt,Ct,_t){var $t=xt("./identity");Ct.exports=function lookAt(xt,Ct,_t,Vn){var Gn,or,lr,Fr,Hr,xo,Eo,Mo,Oo,Ro,Io=Ct[0],Bo=Ct[1],zo=Ct[2],Ho=Vn[0],Qo=Vn[1],pi=Vn[2],gi=_t[0],es=_t[1],ts=_t[2];return Math.abs(Io-gi)<1e-6&&Math.abs(Bo-es)<1e-6&&Math.abs(zo-ts)<1e-6?$t(xt):(Eo=Io-gi,Mo=Bo-es,Oo=zo-ts,Gn=Qo*(Oo*=Ro=1/Math.sqrt(Eo*Eo+Mo*Mo+Oo*Oo))-pi*(Mo*=Ro),or=pi*(Eo*=Ro)-Ho*Oo,lr=Ho*Mo-Qo*Eo,(Ro=Math.sqrt(Gn*Gn+or*or+lr*lr))?(Gn*=Ro=1/Ro,or*=Ro,lr*=Ro):(Gn=0,or=0,lr=0),Fr=Mo*lr-Oo*or,Hr=Oo*Gn-Eo*lr,xo=Eo*or-Mo*Gn,(Ro=Math.sqrt(Fr*Fr+Hr*Hr+xo*xo))?(Fr*=Ro=1/Ro,Hr*=Ro,xo*=Ro):(Fr=0,Hr=0,xo=0),xt[0]=Gn,xt[1]=Fr,xt[2]=Eo,xt[3]=0,xt[4]=or,xt[5]=Hr,xt[6]=Mo,xt[7]=0,xt[8]=lr,xt[9]=xo,xt[10]=Oo,xt[11]=0,xt[12]=-(Gn*Io+or*Bo+lr*zo),xt[13]=-(Fr*Io+Hr*Bo+xo*zo),xt[14]=-(Eo*Io+Mo*Bo+Oo*zo),xt[15]=1,xt)}},{"./identity":546}],550:[function(xt,Ct,_t){Ct.exports=function multiply(xt,Ct,_t){var $t=Ct[0],Vn=Ct[1],Gn=Ct[2],or=Ct[3],lr=Ct[4],Fr=Ct[5],Hr=Ct[6],xo=Ct[7],Eo=Ct[8],Mo=Ct[9],Oo=Ct[10],Ro=Ct[11],Io=Ct[12],Bo=Ct[13],zo=Ct[14],Ho=Ct[15],Qo=_t[0],pi=_t[1],gi=_t[2],es=_t[3];return xt[0]=Qo*$t+pi*lr+gi*Eo+es*Io,xt[1]=Qo*Vn+pi*Fr+gi*Mo+es*Bo,xt[2]=Qo*Gn+pi*Hr+gi*Oo+es*zo,xt[3]=Qo*or+pi*xo+gi*Ro+es*Ho,Qo=_t[4],pi=_t[5],gi=_t[6],es=_t[7],xt[4]=Qo*$t+pi*lr+gi*Eo+es*Io,xt[5]=Qo*Vn+pi*Fr+gi*Mo+es*Bo,xt[6]=Qo*Gn+pi*Hr+gi*Oo+es*zo,xt[7]=Qo*or+pi*xo+gi*Ro+es*Ho,Qo=_t[8],pi=_t[9],gi=_t[10],es=_t[11],xt[8]=Qo*$t+pi*lr+gi*Eo+es*Io,xt[9]=Qo*Vn+pi*Fr+gi*Mo+es*Bo,xt[10]=Qo*Gn+pi*Hr+gi*Oo+es*zo,xt[11]=Qo*or+pi*xo+gi*Ro+es*Ho,Qo=_t[12],pi=_t[13],gi=_t[14],es=_t[15],xt[12]=Qo*$t+pi*lr+gi*Eo+es*Io,xt[13]=Qo*Vn+pi*Fr+gi*Mo+es*Bo,xt[14]=Qo*Gn+pi*Hr+gi*Oo+es*zo,xt[15]=Qo*or+pi*xo+gi*Ro+es*Ho,xt}},{}],551:[function(xt,Ct,_t){Ct.exports=function ortho(xt,Ct,_t,$t,Vn,Gn,or){var lr=1/(Ct-_t),Fr=1/($t-Vn),Hr=1/(Gn-or);return xt[0]=-2*lr,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=-2*Fr,xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=2*Hr,xt[11]=0,xt[12]=(Ct+_t)*lr,xt[13]=(Vn+$t)*Fr,xt[14]=(or+Gn)*Hr,xt[15]=1,xt}},{}],552:[function(xt,Ct,_t){Ct.exports=function perspective(xt,Ct,_t,$t,Vn){var Gn=1/Math.tan(Ct/2),or=1/($t-Vn);return xt[0]=Gn/_t,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=Gn,xt[6]=0,xt[7]=0,xt[8]=0,xt[9]=0,xt[10]=(Vn+$t)*or,xt[11]=-1,xt[12]=0,xt[13]=0,xt[14]=2*Vn*$t*or,xt[15]=0,xt}},{}],553:[function(xt,Ct,_t){Ct.exports=function perspectiveFromFieldOfView(xt,Ct,_t,$t){var Vn=Math.tan(Ct.upDegrees*Math.PI/180),Gn=Math.tan(Ct.downDegrees*Math.PI/180),or=Math.tan(Ct.leftDegrees*Math.PI/180),lr=Math.tan(Ct.rightDegrees*Math.PI/180),Fr=2/(or+lr),Hr=2/(Vn+Gn);return xt[0]=Fr,xt[1]=0,xt[2]=0,xt[3]=0,xt[4]=0,xt[5]=Hr,xt[6]=0,xt[7]=0,xt[8]=-(or-lr)*Fr*.5,xt[9]=(Vn-Gn)*Hr*.5,xt[10]=$t/(_t-$t),xt[11]=-1,xt[12]=0,xt[13]=0,xt[14]=$t*_t/(_t-$t),xt[15]=0,xt}},{}],554:[function(xt,Ct,_t){Ct.exports=function rotate(xt,Ct,_t,$t){var Vn,Gn,or,lr,Fr,Hr,xo,Eo,Mo,Oo,Ro,Io,Bo,zo,Ho,Qo,pi,gi,es,ts,ns,rs,os,is,ss=$t[0],as=$t[1],ls=$t[2],cs=Math.sqrt(ss*ss+as*as+ls*ls);return Math.abs(cs)<1e-6?null:(ss*=cs=1/cs,as*=cs,ls*=cs,Vn=Math.sin(_t),or=1-(Gn=Math.cos(_t)),lr=Ct[0],Fr=Ct[1],Hr=Ct[2],xo=Ct[3],Eo=Ct[4],Mo=Ct[5],Oo=Ct[6],Ro=Ct[7],Io=Ct[8],Bo=Ct[9],zo=Ct[10],Ho=Ct[11],Qo=ss*ss*or+Gn,pi=as*ss*or+ls*Vn,gi=ls*ss*or-as*Vn,es=ss*as*or-ls*Vn,ts=as*as*or+Gn,ns=ls*as*or+ss*Vn,rs=ss*ls*or+as*Vn,os=as*ls*or-ss*Vn,is=ls*ls*or+Gn,xt[0]=lr*Qo+Eo*pi+Io*gi,xt[1]=Fr*Qo+Mo*pi+Bo*gi,xt[2]=Hr*Qo+Oo*pi+zo*gi,xt[3]=xo*Qo+Ro*pi+Ho*gi,xt[4]=lr*es+Eo*ts+Io*ns,xt[5]=Fr*es+Mo*ts+Bo*ns,xt[6]=Hr*es+Oo*ts+zo*ns,xt[7]=xo*es+Ro*ts+Ho*ns,xt[8]=lr*rs+Eo*os+Io*is,xt[9]=Fr*rs+Mo*os+Bo*is,xt[10]=Hr*rs+Oo*os+zo*is,xt[11]=xo*rs+Ro*os+Ho*is,Ct!==xt&&(xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15]),xt)}},{}],555:[function(xt,Ct,_t){Ct.exports=function rotateX(xt,Ct,_t){var $t=Math.sin(_t),Vn=Math.cos(_t),Gn=Ct[4],or=Ct[5],lr=Ct[6],Fr=Ct[7],Hr=Ct[8],xo=Ct[9],Eo=Ct[10],Mo=Ct[11];return Ct!==xt&&(xt[0]=Ct[0],xt[1]=Ct[1],xt[2]=Ct[2],xt[3]=Ct[3],xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15]),xt[4]=Gn*Vn+Hr*$t,xt[5]=or*Vn+xo*$t,xt[6]=lr*Vn+Eo*$t,xt[7]=Fr*Vn+Mo*$t,xt[8]=Hr*Vn-Gn*$t,xt[9]=xo*Vn-or*$t,xt[10]=Eo*Vn-lr*$t,xt[11]=Mo*Vn-Fr*$t,xt}},{}],556:[function(xt,Ct,_t){Ct.exports=function rotateY(xt,Ct,_t){var $t=Math.sin(_t),Vn=Math.cos(_t),Gn=Ct[0],or=Ct[1],lr=Ct[2],Fr=Ct[3],Hr=Ct[8],xo=Ct[9],Eo=Ct[10],Mo=Ct[11];return Ct!==xt&&(xt[4]=Ct[4],xt[5]=Ct[5],xt[6]=Ct[6],xt[7]=Ct[7],xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15]),xt[0]=Gn*Vn-Hr*$t,xt[1]=or*Vn-xo*$t,xt[2]=lr*Vn-Eo*$t,xt[3]=Fr*Vn-Mo*$t,xt[8]=Gn*$t+Hr*Vn,xt[9]=or*$t+xo*Vn,xt[10]=lr*$t+Eo*Vn,xt[11]=Fr*$t+Mo*Vn,xt}},{}],557:[function(xt,Ct,_t){Ct.exports=function rotateZ(xt,Ct,_t){var $t=Math.sin(_t),Vn=Math.cos(_t),Gn=Ct[0],or=Ct[1],lr=Ct[2],Fr=Ct[3],Hr=Ct[4],xo=Ct[5],Eo=Ct[6],Mo=Ct[7];return Ct!==xt&&(xt[8]=Ct[8],xt[9]=Ct[9],xt[10]=Ct[10],xt[11]=Ct[11],xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15]),xt[0]=Gn*Vn+Hr*$t,xt[1]=or*Vn+xo*$t,xt[2]=lr*Vn+Eo*$t,xt[3]=Fr*Vn+Mo*$t,xt[4]=Hr*Vn-Gn*$t,xt[5]=xo*Vn-or*$t,xt[6]=Eo*Vn-lr*$t,xt[7]=Mo*Vn-Fr*$t,xt}},{}],558:[function(xt,Ct,_t){Ct.exports=function scale(xt,Ct,_t){var $t=_t[0],Vn=_t[1],Gn=_t[2];return xt[0]=Ct[0]*$t,xt[1]=Ct[1]*$t,xt[2]=Ct[2]*$t,xt[3]=Ct[3]*$t,xt[4]=Ct[4]*Vn,xt[5]=Ct[5]*Vn,xt[6]=Ct[6]*Vn,xt[7]=Ct[7]*Vn,xt[8]=Ct[8]*Gn,xt[9]=Ct[9]*Gn,xt[10]=Ct[10]*Gn,xt[11]=Ct[11]*Gn,xt[12]=Ct[12],xt[13]=Ct[13],xt[14]=Ct[14],xt[15]=Ct[15],xt}},{}],559:[function(xt,Ct,_t){Ct.exports=function str(xt){return"mat4("+xt[0]+", "+xt[1]+", "+xt[2]+", "+xt[3]+", "+xt[4]+", "+xt[5]+", "+xt[6]+", "+xt[7]+", "+xt[8]+", "+xt[9]+", "+xt[10]+", "+xt[11]+", "+xt[12]+", "+xt[13]+", "+xt[14]+", "+xt[15]+")"}},{}],560:[function(xt,Ct,_t){Ct.exports=function translate(xt,Ct,_t){var $t,Vn,Gn,or,lr,Fr,Hr,xo,Eo,Mo,Oo,Ro,Io=_t[0],Bo=_t[1],zo=_t[2];return Ct===xt?(xt[12]=Ct[0]*Io+Ct[4]*Bo+Ct[8]*zo+Ct[12],xt[13]=Ct[1]*Io+Ct[5]*Bo+Ct[9]*zo+Ct[13],xt[14]=Ct[2]*Io+Ct[6]*Bo+Ct[10]*zo+Ct[14],xt[15]=Ct[3]*Io+Ct[7]*Bo+Ct[11]*zo+Ct[15]):($t=Ct[0],Vn=Ct[1],Gn=Ct[2],or=Ct[3],lr=Ct[4],Fr=Ct[5],Hr=Ct[6],xo=Ct[7],Eo=Ct[8],Mo=Ct[9],Oo=Ct[10],Ro=Ct[11],xt[0]=$t,xt[1]=Vn,xt[2]=Gn,xt[3]=or,xt[4]=lr,xt[5]=Fr,xt[6]=Hr,xt[7]=xo,xt[8]=Eo,xt[9]=Mo,xt[10]=Oo,xt[11]=Ro,xt[12]=$t*Io+lr*Bo+Eo*zo+Ct[12],xt[13]=Vn*Io+Fr*Bo+Mo*zo+Ct[13],xt[14]=Gn*Io+Hr*Bo+Oo*zo+Ct[14],xt[15]=or*Io+xo*Bo+Ro*zo+Ct[15]),xt}},{}],561:[function(xt,Ct,_t){Ct.exports=function transpose(xt,Ct){if(xt===Ct){var _t=Ct[1],$t=Ct[2],Vn=Ct[3],Gn=Ct[6],or=Ct[7],lr=Ct[11];xt[1]=Ct[4],xt[2]=Ct[8],xt[3]=Ct[12],xt[4]=_t,xt[6]=Ct[9],xt[7]=Ct[13],xt[8]=$t,xt[9]=Gn,xt[11]=Ct[14],xt[12]=Vn,xt[13]=or,xt[14]=lr}else xt[0]=Ct[0],xt[1]=Ct[4],xt[2]=Ct[8],xt[3]=Ct[12],xt[4]=Ct[1],xt[5]=Ct[5],xt[6]=Ct[9],xt[7]=Ct[13],xt[8]=Ct[2],xt[9]=Ct[6],xt[10]=Ct[10],xt[11]=Ct[14],xt[12]=Ct[3],xt[13]=Ct[7],xt[14]=Ct[11],xt[15]=Ct[15];return xt}},{}],562:[function(xt,Ct,_t){Ct.exports=function add(xt,Ct,_t){return xt[0]=Ct[0]+_t[0],xt[1]=Ct[1]+_t[1],xt[2]=Ct[2]+_t[2],xt}},{}],563:[function(xt,Ct,_t){Ct.exports=function angle(xt,Ct){var _t=$t(xt[0],xt[1],xt[2]),or=$t(Ct[0],Ct[1],Ct[2]);Vn(_t,_t),Vn(or,or);var lr=Gn(_t,or);return lr>1?0:Math.acos(lr)};var $t=xt("./fromValues"),Vn=xt("./normalize"),Gn=xt("./dot")},{"./dot":573,"./fromValues":579,"./normalize":590}],564:[function(xt,Ct,_t){Ct.exports=function ceil(xt,Ct){return xt[0]=Math.ceil(Ct[0]),xt[1]=Math.ceil(Ct[1]),xt[2]=Math.ceil(Ct[2]),xt}},{}],565:[function(xt,Ct,_t){Ct.exports=function clone(xt){var Ct=new Float32Array(3);return Ct[0]=xt[0],Ct[1]=xt[1],Ct[2]=xt[2],Ct}},{}],566:[function(xt,Ct,_t){Ct.exports=function copy(xt,Ct){return xt[0]=Ct[0],xt[1]=Ct[1],xt[2]=Ct[2],xt}},{}],567:[function(xt,Ct,_t){Ct.exports=function create(){var xt=new Float32Array(3);return xt[0]=0,xt[1]=0,xt[2]=0,xt}},{}],568:[function(xt,Ct,_t){Ct.exports=function cross(xt,Ct,_t){var $t=Ct[0],Vn=Ct[1],Gn=Ct[2],or=_t[0],lr=_t[1],Fr=_t[2];return xt[0]=Vn*Fr-Gn*lr,xt[1]=Gn*or-$t*Fr,xt[2]=$t*lr-Vn*or,xt}},{}],569:[function(xt,Ct,_t){Ct.exports=xt("./distance")},{"./distance":570}],570:[function(xt,Ct,_t){Ct.exports=function distance(xt,Ct){var _t=Ct[0]-xt[0],$t=Ct[1]-xt[1],Vn=Ct[2]-xt[2];return Math.sqrt(_t*_t+$t*$t+Vn*Vn)}},{}],571:[function(xt,Ct,_t){Ct.exports=xt("./divide")},{"./divide":572}],572:[function(xt,Ct,_t){Ct.exports=function divide(xt,Ct,_t){return xt[0]=Ct[0]/_t[0],xt[1]=Ct[1]/_t[1],xt[2]=Ct[2]/_t[2],xt}},{}],573:[function(xt,Ct,_t){Ct.exports=function dot(xt,Ct){return xt[0]*Ct[0]+xt[1]*Ct[1]+xt[2]*Ct[2]}},{}],574:[function(xt,Ct,_t){Ct.exports=1e-6},{}],575:[function(xt,Ct,_t){Ct.exports=function equals(xt,Ct){var _t=xt[0],Vn=xt[1],Gn=xt[2],or=Ct[0],lr=Ct[1],Fr=Ct[2];return Math.abs(_t-or)<=$t*Math.max(1,Math.abs(_t),Math.abs(or))&&Math.abs(Vn-lr)<=$t*Math.max(1,Math.abs(Vn),Math.abs(lr))&&Math.abs(Gn-Fr)<=$t*Math.max(1,Math.abs(Gn),Math.abs(Fr))};var $t=xt("./epsilon")},{"./epsilon":574}],576:[function(xt,Ct,_t){Ct.exports=function exactEquals(xt,Ct){return xt[0]===Ct[0]&&xt[1]===Ct[1]&&xt[2]===Ct[2]}},{}],577:[function(xt,Ct,_t){Ct.exports=function floor(xt,Ct){return xt[0]=Math.floor(Ct[0]),xt[1]=Math.floor(Ct[1]),xt[2]=Math.floor(Ct[2]),xt}},{}],578:[function(xt,Ct,_t){Ct.exports=function forEach(xt,Ct,_t,Vn,Gn,or){var lr,Fr;for(Ct||(Ct=3),_t||(_t=0),Fr=Vn?Math.min(Vn*Ct+_t,xt.length):xt.length,lr=_t;lr<Fr;lr+=Ct)$t[0]=xt[lr],$t[1]=xt[lr+1],$t[2]=xt[lr+2],Gn($t,$t,or),xt[lr]=$t[0],xt[lr+1]=$t[1],xt[lr+2]=$t[2];return xt};var $t=xt("./create")()},{"./create":567}],579:[function(xt,Ct,_t){Ct.exports=function fromValues(xt,Ct,_t){var $t=new Float32Array(3);return $t[0]=xt,$t[1]=Ct,$t[2]=_t,$t}},{}],580:[function(xt,Ct,_t){Ct.exports={EPSILON:xt("./epsilon"),create:xt("./create"),clone:xt("./clone"),angle:xt("./angle"),fromValues:xt("./fromValues"),copy:xt("./copy"),set:xt("./set"),equals:xt("./equals"),exactEquals:xt("./exactEquals"),add:xt("./add"),subtract:xt("./subtract"),sub:xt("./sub"),multiply:xt("./multiply"),mul:xt("./mul"),divide:xt("./divide"),div:xt("./div"),min:xt("./min"),max:xt("./max"),floor:xt("./floor"),ceil:xt("./ceil"),round:xt("./round"),scale:xt("./scale"),scaleAndAdd:xt("./scaleAndAdd"),distance:xt("./distance"),dist:xt("./dist"),squaredDistance:xt("./squaredDistance"),sqrDist:xt("./sqrDist"),length:xt("./length"),len:xt("./len"),squaredLength:xt("./squaredLength"),sqrLen:xt("./sqrLen"),negate:xt("./negate"),inverse:xt("./inverse"),normalize:xt("./normalize"),dot:xt("./dot"),cross:xt("./cross"),lerp:xt("./lerp"),random:xt("./random"),transformMat4:xt("./transformMat4"),transformMat3:xt("./transformMat3"),transformQuat:xt("./transformQuat"),rotateX:xt("./rotateX"),rotateY:xt("./rotateY"),rotateZ:xt("./rotateZ"),forEach:xt("./forEach")}},{"./add":562,"./angle":563,"./ceil":564,"./clone":565,"./copy":566,"./create":567,"./cross":568,"./dist":569,"./distance":570,"./div":571,"./divide":572,"./dot":573,"./epsilon":574,"./equals":575,"./exactEquals":576,"./floor":577,"./forEach":578,"./fromValues":579,"./inverse":581,"./len":582,"./length":583,"./lerp":584,"./max":585,"./min":586,"./mul":587,"./multiply":588,"./negate":589,"./normalize":590,"./random":591,"./rotateX":592,"./rotateY":593,"./rotateZ":594,"./round":595,"./scale":596,"./scaleAndAdd":597,"./set":598,"./sqrDist":599,"./sqrLen":600,"./squaredDistance":601,"./squaredLength":602,"./sub":603,"./subtract":604,"./transformMat3":605,"./transformMat4":606,"./transformQuat":607}],581:[function(xt,Ct,_t){Ct.exports=function inverse(xt,Ct){return xt[0]=1/Ct[0],xt[1]=1/Ct[1],xt[2]=1/Ct[2],xt}},{}],582:[function(xt,Ct,_t){Ct.exports=xt("./length")},{"./length":583}],583:[function(xt,Ct,_t){Ct.exports=function length(xt){var Ct=xt[0],_t=xt[1],$t=xt[2];return Math.sqrt(Ct*Ct+_t*_t+$t*$t)}},{}],584:[function(xt,Ct,_t){Ct.exports=function lerp(xt,Ct,_t,$t){var Vn=Ct[0],Gn=Ct[1],or=Ct[2];return xt[0]=Vn+$t*(_t[0]-Vn),xt[1]=Gn+$t*(_t[1]-Gn),xt[2]=or+$t*(_t[2]-or),xt}},{}],585:[function(xt,Ct,_t){Ct.exports=function max(xt,Ct,_t){return xt[0]=Math.max(Ct[0],_t[0]),xt[1]=Math.max(Ct[1],_t[1]),xt[2]=Math.max(Ct[2],_t[2]),xt}},{}],586:[function(xt,Ct,_t){Ct.exports=function min(xt,Ct,_t){return xt[0]=Math.min(Ct[0],_t[0]),xt[1]=Math.min(Ct[1],_t[1]),xt[2]=Math.min(Ct[2],_t[2]),xt}},{}],587:[function(xt,Ct,_t){Ct.exports=xt("./multiply")},{"./multiply":588}],588:[function(xt,Ct,_t){Ct.exports=function multiply(xt,Ct,_t){return xt[0]=Ct[0]*_t[0],xt[1]=Ct[1]*_t[1],xt[2]=Ct[2]*_t[2],xt}},{}],589:[function(xt,Ct,_t){Ct.exports=function negate(xt,Ct){return xt[0]=-Ct[0],xt[1]=-Ct[1],xt[2]=-Ct[2],xt}},{}],590:[function(xt,Ct,_t){Ct.exports=function normalize(xt,Ct){var _t=Ct[0],$t=Ct[1],Vn=Ct[2],Gn=_t*_t+$t*$t+Vn*Vn;return Gn>0&&(Gn=1/Math.sqrt(Gn),xt[0]=Ct[0]*Gn,xt[1]=Ct[1]*Gn,xt[2]=Ct[2]*Gn),xt}},{}],591:[function(xt,Ct,_t){Ct.exports=function random(xt,Ct){Ct=Ct||1;var _t=2*Math.random()*Math.PI,$t=2*Math.random()-1,Vn=Math.sqrt(1-$t*$t)*Ct;return xt[0]=Math.cos(_t)*Vn,xt[1]=Math.sin(_t)*Vn,xt[2]=$t*Ct,xt}},{}],592:[function(xt,Ct,_t){Ct.exports=function rotateX(xt,Ct,_t,$t){var Vn=_t[1],Gn=_t[2],or=Ct[1]-Vn,lr=Ct[2]-Gn,Fr=Math.sin($t),Hr=Math.cos($t);return xt[0]=Ct[0],xt[1]=Vn+or*Hr-lr*Fr,xt[2]=Gn+or*Fr+lr*Hr,xt}},{}],593:[function(xt,Ct,_t){Ct.exports=function rotateY(xt,Ct,_t,$t){var Vn=_t[0],Gn=_t[2],or=Ct[0]-Vn,lr=Ct[2]-Gn,Fr=Math.sin($t),Hr=Math.cos($t);return xt[0]=Vn+lr*Fr+or*Hr,xt[1]=Ct[1],xt[2]=Gn+lr*Hr-or*Fr,xt}},{}],594:[function(xt,Ct,_t){Ct.exports=function rotateZ(xt,Ct,_t,$t){var Vn=_t[0],Gn=_t[1],or=Ct[0]-Vn,lr=Ct[1]-Gn,Fr=Math.sin($t),Hr=Math.cos($t);return xt[0]=Vn+or*Hr-lr*Fr,xt[1]=Gn+or*Fr+lr*Hr,xt[2]=Ct[2],xt}},{}],595:[function(xt,Ct,_t){Ct.exports=function round(xt,Ct){return xt[0]=Math.round(Ct[0]),xt[1]=Math.round(Ct[1]),xt[2]=Math.round(Ct[2]),xt}},{}],596:[function(xt,Ct,_t){Ct.exports=function scale(xt,Ct,_t){return xt[0]=Ct[0]*_t,xt[1]=Ct[1]*_t,xt[2]=Ct[2]*_t,xt}},{}],597:[function(xt,Ct,_t){Ct.exports=function scaleAndAdd(xt,Ct,_t,$t){return xt[0]=Ct[0]+_t[0]*$t,xt[1]=Ct[1]+_t[1]*$t,xt[2]=Ct[2]+_t[2]*$t,xt}},{}],598:[function(xt,Ct,_t){Ct.exports=function set(xt,Ct,_t,$t){return xt[0]=Ct,xt[1]=_t,xt[2]=$t,xt}},{}],599:[function(xt,Ct,_t){Ct.exports=xt("./squaredDistance")},{"./squaredDistance":601}],600:[function(xt,Ct,_t){Ct.exports=xt("./squaredLength")},{"./squaredLength":602}],601:[function(xt,Ct,_t){Ct.exports=function squaredDistance(xt,Ct){var _t=Ct[0]-xt[0],$t=Ct[1]-xt[1],Vn=Ct[2]-xt[2];return _t*_t+$t*$t+Vn*Vn}},{}],602:[function(xt,Ct,_t){Ct.exports=function squaredLength(xt){var Ct=xt[0],_t=xt[1],$t=xt[2];return Ct*Ct+_t*_t+$t*$t}},{}],603:[function(xt,Ct,_t){Ct.exports=xt("./subtract")},{"./subtract":604}],604:[function(xt,Ct,_t){Ct.exports=function subtract(xt,Ct,_t){return xt[0]=Ct[0]-_t[0],xt[1]=Ct[1]-_t[1],xt[2]=Ct[2]-_t[2],xt}},{}],605:[function(xt,Ct,_t){Ct.exports=function transformMat3(xt,Ct,_t){var $t=Ct[0],Vn=Ct[1],Gn=Ct[2];return xt[0]=$t*_t[0]+Vn*_t[3]+Gn*_t[6],xt[1]=$t*_t[1]+Vn*_t[4]+Gn*_t[7],xt[2]=$t*_t[2]+Vn*_t[5]+Gn*_t[8],xt}},{}],606:[function(xt,Ct,_t){Ct.exports=function transformMat4(xt,Ct,_t){var $t=Ct[0],Vn=Ct[1],Gn=Ct[2],or=_t[3]*$t+_t[7]*Vn+_t[11]*Gn+_t[15];return or=or||1,xt[0]=(_t[0]*$t+_t[4]*Vn+_t[8]*Gn+_t[12])/or,xt[1]=(_t[1]*$t+_t[5]*Vn+_t[9]*Gn+_t[13])/or,xt[2]=(_t[2]*$t+_t[6]*Vn+_t[10]*Gn+_t[14])/or,xt}},{}],607:[function(xt,Ct,_t){Ct.exports=function transformQuat(xt,Ct,_t){var $t=Ct[0],Vn=Ct[1],Gn=Ct[2],or=_t[0],lr=_t[1],Fr=_t[2],Hr=_t[3],xo=Hr*$t+lr*Gn-Fr*Vn,Eo=Hr*Vn+Fr*$t-or*Gn,Mo=Hr*Gn+or*Vn-lr*$t,Oo=-or*$t-lr*Vn-Fr*Gn;return xt[0]=xo*Hr+Oo*-or+Eo*-Fr-Mo*-lr,xt[1]=Eo*Hr+Oo*-lr+Mo*-or-xo*-Fr,xt[2]=Mo*Hr+Oo*-Fr+xo*-lr-Eo*-or,xt}},{}],608:[function(xt,Ct,_t){var $t,Vn;$t=this,Vn=function(){function e(Ct,_t){this.id=xt++,this.type=Ct,this.data=_t}function t(xt){return"["+function e(xt){if(0===xt.length)return[];var Ct=xt.charAt(0),_t=xt.charAt(xt.length-1);if(1<xt.length&&Ct===_t&&('"'===Ct||"'"===Ct))return['"'+xt.substr(1,xt.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ct=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(xt))return e(xt.substr(0,Ct.index)).concat(e(Ct[1])).concat(e(xt.substr(Ct.index+Ct[0].length)));if(1===(Ct=xt.split(".")).length)return['"'+xt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(xt=[],_t=0;_t<Ct.length;++_t)xt=xt.concat(e(Ct[_t]));return xt}(xt).join("][")+"]"}function r(xt){return"string"==typeof xt?xt.split():xt}function n(xt){return"string"==typeof xt?document.querySelector(xt):xt}function i(xt){var Ct,_t,$t,Vn,Gn=xt||{};xt={};var or=[],lr=[],Fr="undefined"==typeof window?1:window.devicePixelRatio,Hr=!1,p=function(xt){},d=function(){};if("string"==typeof Gn?Ct=document.querySelector(Gn):"object"==typeof Gn&&("string"==typeof Gn.nodeName&&"function"==typeof Gn.appendChild&&"function"==typeof Gn.getBoundingClientRect?Ct=Gn:"function"==typeof Gn.drawArrays||"function"==typeof Gn.drawElements?$t=(Vn=Gn).canvas:("gl"in Gn?Vn=Gn.gl:"canvas"in Gn?$t=n(Gn.canvas):"container"in Gn&&(_t=n(Gn.container)),"attributes"in Gn&&(xt=Gn.attributes),"extensions"in Gn&&(or=r(Gn.extensions)),"optionalExtensions"in Gn&&(lr=r(Gn.optionalExtensions)),"onDone"in Gn&&(p=Gn.onDone),"profile"in Gn&&(Hr=!!Gn.profile),"pixelRatio"in Gn&&(Fr=+Gn.pixelRatio))),Ct&&("canvas"===Ct.nodeName.toLowerCase()?$t=Ct:_t=Ct),!Vn){if(!$t){if(!(Ct=function(xt,Ct,_t){function n(){var Ct=window.innerWidth,$t=window.innerHeight;xt!==document.body&&(Ct=($t=Vn.getBoundingClientRect()).right-$t.left,$t=$t.bottom-$t.top),Vn.width=_t*Ct,Vn.height=_t*$t}var $t,Vn=document.createElement("canvas");return R(Vn.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),xt.appendChild(Vn),xt===document.body&&(Vn.style.position="absolute",R(xt.style,{margin:0,padding:0})),xt!==document.body&&"function"==typeof ResizeObserver?($t=new ResizeObserver((function(){setTimeout(n)}))).observe(xt):window.addEventListener("resize",n,!1),n(),{canvas:Vn,onDestroy:function(){$t?$t.disconnect():window.removeEventListener("resize",n),xt.removeChild(Vn)}}}(_t||document.body,0,Fr)))return null;$t=Ct.canvas,d=Ct.onDestroy}void 0===xt.premultipliedAlpha&&(xt.premultipliedAlpha=!0),Vn=function(xt,Ct){function r(_t){try{return xt.getContext(_t,Ct)}catch(xt){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}($t,xt)}return Vn?{gl:Vn,canvas:$t,container:_t,extensions:or,optionalExtensions:lr,pixelRatio:Fr,profile:Hr,onDone:p,onDestroy:d}:(d(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function a(xt,Ct){for(var _t=Array(xt),$t=0;$t<xt;++$t)_t[$t]=Ct($t);return _t}function f(xt){var Ct,_t;return Ct=(65535<xt)<<4,Ct|=_t=(255<(xt>>>=Ct))<<3,(Ct|=_t=(15<(xt>>>=_t))<<2)|(_t=(3<(xt>>>=_t))<<1)|xt>>>_t>>1}function o(){function e(Ct){e:{for(var _t=16;268435456>=_t;_t*=16)if(Ct<=_t){Ct=_t;break e}Ct=0}return 0<(_t=xt[f(Ct)>>2]).length?_t.pop():new ArrayBuffer(Ct)}function t(Ct){xt[f(Ct.byteLength)>>2].push(Ct)}var xt=a(8,(function(){return[]}));return{alloc:e,free:t,allocType:function(xt,Ct){var _t=null;switch(xt){case 5120:_t=new Int8Array(e(Ct),0,Ct);break;case 5121:_t=new Uint8Array(e(Ct),0,Ct);break;case 5122:_t=new Int16Array(e(2*Ct),0,Ct);break;case 5123:_t=new Uint16Array(e(2*Ct),0,Ct);break;case 5124:_t=new Int32Array(e(4*Ct),0,Ct);break;case 5125:_t=new Uint32Array(e(4*Ct),0,Ct);break;case 5126:_t=new Float32Array(e(4*Ct),0,Ct);break;default:return null}return _t.length!==Ct?_t.subarray(0,Ct):_t},freeType:function(xt){t(xt.buffer)}}}function u(xt){return!!xt&&"object"==typeof xt&&Array.isArray(xt.shape)&&Array.isArray(xt.stride)&&"number"==typeof xt.offset&&xt.shape.length===xt.stride.length&&(Array.isArray(xt.data)||G(xt.data))}function s(xt,Ct,_t,$t,Vn,Gn){for(var or=0;or<Ct;++or)for(var lr=xt[or],Fr=0;Fr<_t;++Fr)for(var Hr=lr[Fr],xo=0;xo<$t;++xo)Vn[Gn++]=Hr[xo]}function c(xt){return 0|or[Object.prototype.toString.call(xt)]}function l(xt,Ct){for(var _t=0;_t<Ct.length;++_t)xt[_t]=Ct[_t]}function p(xt,Ct,_t,$t,Vn,Gn,or){for(var lr=0,Fr=0;Fr<_t;++Fr)for(var Hr=0;Hr<$t;++Hr)xt[lr++]=Ct[Vn*Fr+Gn*Hr+or]}function d(xt,Ct,_t,$t){function i(Ct){this.id=Gn++,this.buffer=xt.createBuffer(),this.type=Ct,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,_t.profile&&(this.stats={size:0})}function a(Ct,_t,$t){Ct.byteLength=_t.byteLength,xt.bufferData(Ct.type,_t,$t)}function f(xt,Ct,_t,$t,Gn,or){if(xt.usage=_t,Array.isArray(Ct)){if(xt.dtype=$t||5126,0<Ct.length)if(Array.isArray(Ct[0])){Gn=xo(Ct);for(var lr=$t=1;lr<Gn.length;++lr)$t*=Gn[lr];xt.dimension=$t,a(xt,Ct=Hr(Ct,Gn,xt.dtype),_t),or?xt.persistentData=Ct:Vn.freeType(Ct)}else"number"==typeof Ct[0]?(xt.dimension=Gn,l(Gn=Vn.allocType(xt.dtype,Ct.length),Ct),a(xt,Gn,_t),or?xt.persistentData=Gn:Vn.freeType(Gn)):G(Ct[0])&&(xt.dimension=Ct[0].length,xt.dtype=$t||c(Ct[0])||5126,a(xt,Ct=Hr(Ct,[Ct.length,Ct[0].length],xt.dtype),_t),or?xt.persistentData=Ct:Vn.freeType(Ct))}else if(G(Ct))xt.dtype=$t||c(Ct),xt.dimension=Gn,a(xt,Ct,_t),or&&(xt.persistentData=new Uint8Array(new Uint8Array(Ct.buffer)));else if(u(Ct)){Gn=Ct.shape;var Fr=Ct.stride,Eo=(lr=Ct.offset,0),Mo=0,Oo=0,Ro=0;1===Gn.length?(Eo=Gn[0],Mo=1,Oo=Fr[0],Ro=0):2===Gn.length&&(Eo=Gn[0],Mo=Gn[1],Oo=Fr[0],Ro=Fr[1]),xt.dtype=$t||c(Ct.data)||5126,xt.dimension=Mo,p(Gn=Vn.allocType(xt.dtype,Eo*Mo),Ct.data,Eo,Mo,Oo,Ro,lr),a(xt,Gn,_t),or?xt.persistentData=Gn:Vn.freeType(Gn)}else Ct instanceof ArrayBuffer&&(xt.dtype=5121,xt.dimension=Gn,a(xt,Ct,_t),or&&(xt.persistentData=new Uint8Array(new Uint8Array(Ct))))}function o(_t){Ct.bufferCount--,$t(_t),xt.deleteBuffer(_t.buffer),_t.buffer=null,delete or[_t.id]}var Gn=0,or={};i.prototype.bind=function(){xt.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){o(this)};var Mo=[];return _t.profile&&(Ct.getTotalBufferSize=function(){var xt=0;return Object.keys(or).forEach((function(Ct){xt+=or[Ct].stats.size})),xt}),{create:function($t,Gn,Mo,Oo){function m(Ct){var $t=35044,Vn=null,Gn=0,or=0,Hr=1;return Array.isArray(Ct)||G(Ct)||u(Ct)||Ct instanceof ArrayBuffer?Vn=Ct:"number"==typeof Ct?Gn=0|Ct:Ct&&("data"in Ct&&(Vn=Ct.data),"usage"in Ct&&($t=Fr[Ct.usage]),"type"in Ct&&(or=lr[Ct.type]),"dimension"in Ct&&(Hr=0|Ct.dimension),"length"in Ct&&(Gn=0|Ct.length)),Ro.bind(),Vn?f(Ro,Vn,$t,or,Hr,Oo):(Gn&&xt.bufferData(Ro.type,Gn,$t),Ro.dtype=or||5121,Ro.usage=$t,Ro.dimension=Hr,Ro.byteLength=Gn),_t.profile&&(Ro.stats.size=Ro.byteLength*Eo[Ro.dtype]),m}Ct.bufferCount++;var Ro=new i(Gn);return or[Ro.id]=Ro,Mo||m($t),m._reglType="buffer",m._buffer=Ro,m.subdata=function(Ct,_t){var $t,Gn=0|(_t||0);if(Ro.bind(),G(Ct)||Ct instanceof ArrayBuffer)xt.bufferSubData(Ro.type,Gn,Ct);else if(Array.isArray(Ct)){if(0<Ct.length)if("number"==typeof Ct[0]){var or=Vn.allocType(Ro.dtype,Ct.length);l(or,Ct),xt.bufferSubData(Ro.type,Gn,or),Vn.freeType(or)}else(Array.isArray(Ct[0])||G(Ct[0]))&&($t=xo(Ct),or=Hr(Ct,$t,Ro.dtype),xt.bufferSubData(Ro.type,Gn,or),Vn.freeType(or))}else if(u(Ct)){$t=Ct.shape;var lr=Ct.stride,Fr=or=0,Eo=0,Mo=0;1===$t.length?(or=$t[0],Fr=1,Eo=lr[0],Mo=0):2===$t.length&&(or=$t[0],Fr=$t[1],Eo=lr[0],Mo=lr[1]),$t=Array.isArray(Ct.data)?Ro.dtype:c(Ct.data),p($t=Vn.allocType($t,or*Fr),Ct.data,or,Fr,Eo,Mo,Ct.offset),xt.bufferSubData(Ro.type,Gn,$t),Vn.freeType($t)}return m},_t.profile&&(m.stats=Ro.stats),m.destroy=function(){o(Ro)},m},createStream:function(xt,Ct){var _t=Mo.pop();return _t||(_t=new i(xt)),_t.bind(),f(_t,Ct,35040,0,1,!1),_t},destroyStream:function(xt){Mo.push(xt)},clear:function(){Y(or).forEach(o),Mo.forEach(o)},getBuffer:function(xt){return xt&&xt._buffer instanceof i?xt._buffer:null},restore:function(){Y(or).forEach((function(Ct){Ct.buffer=xt.createBuffer(),xt.bindBuffer(Ct.type,Ct.buffer),xt.bufferData(Ct.type,Ct.persistentData||Ct.byteLength,Ct.usage)}))},_initBuffer:f}}function h(xt,Ct,_t,$t){function i(xt){this.id=Gn++,Vn[this.id]=this,this.buffer=xt,this.primType=4,this.type=this.vertCount=0}function a($t,Vn,Gn,or,lr,Fr,Hr){var xo;if($t.buffer.bind(),Vn?((xo=Hr)||G(Vn)&&(!u(Vn)||G(Vn.data))||(xo=Ct.oes_element_index_uint?5125:5123),_t._initBuffer($t.buffer,Vn,Gn,xo,3)):(xt.bufferData(34963,Fr,Gn),$t.buffer.dtype=xo||5121,$t.buffer.usage=Gn,$t.buffer.dimension=3,$t.buffer.byteLength=Fr),xo=Hr,!Hr){switch($t.buffer.dtype){case 5121:case 5120:xo=5121;break;case 5123:case 5122:xo=5123;break;case 5125:case 5124:xo=5125}$t.buffer.dtype=xo}$t.type=xo,0>(Vn=lr)&&(Vn=$t.buffer.byteLength,5123===xo?Vn>>=1:5125===xo&&(Vn>>=2)),$t.vertCount=Vn,Vn=or,0>or&&(Vn=4,1===(or=$t.buffer.dimension)&&(Vn=0),2===or&&(Vn=1),3===or&&(Vn=4)),$t.primType=Vn}function f(xt){$t.elementsCount--,delete Vn[xt.id],xt.buffer.destroy(),xt.buffer=null}var Vn={},Gn=0,or={uint8:5121,uint16:5123};Ct.oes_element_index_uint&&(or.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var lr=[];return{create:function(xt,Ct){function o(xt){if(xt)if("number"==typeof xt)Vn(xt),Gn.primType=4,Gn.vertCount=0|xt,Gn.type=5121;else{var Ct=null,_t=35044,$t=-1,lr=-1,Hr=0,xo=0;Array.isArray(xt)||G(xt)||u(xt)?Ct=xt:("data"in xt&&(Ct=xt.data),"usage"in xt&&(_t=Fr[xt.usage]),"primitive"in xt&&($t=Mo[xt.primitive]),"count"in xt&&(lr=0|xt.count),"type"in xt&&(xo=or[xt.type]),"length"in xt?Hr=0|xt.length:(Hr=lr,5123===xo||5122===xo?Hr*=2:5125!==xo&&5124!==xo||(Hr*=4))),a(Gn,Ct,_t,$t,lr,Hr,xo)}else Vn(),Gn.primType=4,Gn.vertCount=0,Gn.type=5121;return o}var Vn=_t.create(null,34963,!0),Gn=new i(Vn._buffer);return $t.elementsCount++,o(xt),o._reglType="elements",o._elements=Gn,o.subdata=function(xt,Ct){return Vn.subdata(xt,Ct),o},o.destroy=function(){f(Gn)},o},createStream:function(xt){var Ct=lr.pop();return Ct||(Ct=new i(_t.create(null,34963,!0,!1)._buffer)),a(Ct,xt,35040,-1,-1,0,0),Ct},destroyStream:function(xt){lr.push(xt)},getElements:function(xt){return"function"==typeof xt&&xt._elements instanceof i?xt._elements:null},clear:function(){Y(Vn).forEach(f)}}}function m(xt){for(var Ct=Vn.allocType(5123,xt.length),_t=0;_t<xt.length;++_t)if(isNaN(xt[_t]))Ct[_t]=65535;else if(1/0===xt[_t])Ct[_t]=31744;else if(-1/0===xt[_t])Ct[_t]=64512;else{Oo[0]=xt[_t];var $t=(or=Ro[0])>>>31<<15,Gn=(or<<1>>>24)-127,or=or>>13&1023;Ct[_t]=-24>Gn?$t:-14>Gn?$t+(or+1024>>-14-Gn):15<Gn?$t+31744:$t+(Gn+15<<10)+or}return Ct}function b(xt){return Array.isArray(xt)||G(xt)}function g(xt){return"[object "+xt+"]"}function y(xt){return Array.isArray(xt)&&(0===xt.length||"number"==typeof xt[0])}function v(xt){return!(!Array.isArray(xt)||0===xt.length||!b(xt[0]))}function x(xt){return Object.prototype.toString.call(xt)}function w(xt){if(!xt)return!1;var Ct=x(xt);return 0<=ns.indexOf(Ct)||y(xt)||v(xt)||u(xt)}function A(xt,Ct){36193===xt.type?(xt.data=m(Ct),Vn.freeType(Ct)):xt.data=Ct}function k(xt,Ct,_t,$t,Vn,Gn){if(xt=void 0!==os[xt]?os[xt]:zo[xt]*rs[Ct],Gn&&(xt*=6),Vn){for($t=0;1<=_t;)$t+=xt*_t*_t,_t/=2;return $t}return xt*_t*$t}function _(xt,Ct,_t,$t,lr,Fr,Hr){function o(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function s(xt,Ct){xt.internalformat=Ct.internalformat,xt.format=Ct.format,xt.type=Ct.type,xt.compressed=Ct.compressed,xt.premultiplyAlpha=Ct.premultiplyAlpha,xt.flipY=Ct.flipY,xt.unpackAlignment=Ct.unpackAlignment,xt.colorSpace=Ct.colorSpace,xt.width=Ct.width,xt.height=Ct.height,xt.channels=Ct.channels}function c(xt,Ct){if("object"==typeof Ct&&Ct){"premultiplyAlpha"in Ct&&(xt.premultiplyAlpha=Ct.premultiplyAlpha),"flipY"in Ct&&(xt.flipY=Ct.flipY),"alignment"in Ct&&(xt.unpackAlignment=Ct.alignment),"colorSpace"in Ct&&(xt.colorSpace=Ro[Ct.colorSpace]),"type"in Ct&&(xt.type=ns[Ct.type]);var _t=xt.width,$t=xt.height,Vn=xt.channels,Gn=!1;"shape"in Ct?(_t=Ct.shape[0],$t=Ct.shape[1],3===Ct.shape.length&&(Vn=Ct.shape[2],Gn=!0)):("radius"in Ct&&(_t=$t=Ct.radius),"width"in Ct&&(_t=Ct.width),"height"in Ct&&($t=Ct.height),"channels"in Ct&&(Vn=Ct.channels,Gn=!0)),xt.width=0|_t,xt.height=0|$t,xt.channels=0|Vn,_t=!1,"format"in Ct&&(_t=Ct.format,$t=xt.internalformat=rs[_t],xt.format=hs[$t],_t in ns&&!("type"in Ct)&&(xt.type=ns[_t]),_t in os&&(xt.compressed=!0),_t=!0),!Gn&&_t?xt.channels=zo[xt.format]:Gn&&!_t&&xt.channels!==Bo[xt.format]&&(xt.format=xt.internalformat=Bo[xt.channels])}}function l(Ct){xt.pixelStorei(37440,Ct.flipY),xt.pixelStorei(37441,Ct.premultiplyAlpha),xt.pixelStorei(37443,Ct.colorSpace),xt.pixelStorei(3317,Ct.unpackAlignment)}function p(){o.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function d(xt,Ct){var _t=null;if(w(Ct)?_t=Ct:Ct&&(c(xt,Ct),"x"in Ct&&(xt.xOffset=0|Ct.x),"y"in Ct&&(xt.yOffset=0|Ct.y),w(Ct.data)&&(_t=Ct.data)),Ct.copy){var $t=lr.viewportWidth,Fr=lr.viewportHeight;xt.width=xt.width||$t-xt.xOffset,xt.height=xt.height||Fr-xt.yOffset,xt.needsCopy=!0}else if(_t){if(G(_t))xt.channels=xt.channels||4,xt.data=_t,"type"in Ct||5121!==xt.type||(xt.type=0|or[Object.prototype.toString.call(_t)]);else if(y(_t)){switch(xt.channels=xt.channels||4,Fr=($t=_t).length,xt.type){case 5121:case 5123:case 5125:case 5126:(Fr=Vn.allocType(xt.type,Fr)).set($t),xt.data=Fr;break;case 36193:xt.data=m($t)}xt.alignment=1,xt.needsFree=!0}else if(u(_t)){$t=_t.data,Array.isArray($t)||5121!==xt.type||(xt.type=0|or[Object.prototype.toString.call($t)]),Fr=_t.shape;var Hr,xo,Eo,Mo,Oo=_t.stride;3===Fr.length?(Eo=Fr[2],Mo=Oo[2]):Mo=Eo=1,Hr=Fr[0],xo=Fr[1],Fr=Oo[0],Oo=Oo[1],xt.alignment=1,xt.width=Hr,xt.height=xo,xt.channels=Eo,xt.format=xt.internalformat=Bo[Eo],xt.needsFree=!0,Hr=Mo,_t=_t.offset,Eo=xt.width,Mo=xt.height,xo=xt.channels;for(var Ro=Vn.allocType(36193===xt.type?5126:xt.type,Eo*Mo*xo),Io=0,zo=0;zo<Mo;++zo)for(var ns=0;ns<Eo;++ns)for(var rs=0;rs<xo;++rs)Ro[Io++]=$t[Fr*ns+Oo*zo+Hr*rs+_t];A(xt,Ro)}else if(x(_t)===Ho||x(_t)===Qo||x(_t)===pi)x(_t)===Ho||x(_t)===Qo?xt.element=_t:xt.element=_t.canvas,xt.width=xt.element.width,xt.height=xt.element.height,xt.channels=4;else if(x(_t)===gi)xt.element=_t,xt.width=_t.width,xt.height=_t.height,xt.channels=4;else if(x(_t)===es)xt.element=_t,xt.width=_t.naturalWidth,xt.height=_t.naturalHeight,xt.channels=4;else if(x(_t)===ts)xt.element=_t,xt.width=_t.videoWidth,xt.height=_t.videoHeight,xt.channels=4;else if(v(_t)){for($t=xt.width||_t[0].length,Fr=xt.height||_t.length,Oo=xt.channels,Oo=b(_t[0][0])?Oo||_t[0][0].length:Oo||1,Hr=Gn.shape(_t),Eo=1,Mo=0;Mo<Hr.length;++Mo)Eo*=Hr[Mo];Eo=Vn.allocType(36193===xt.type?5126:xt.type,Eo),Gn.flatten(_t,Hr,"",Eo),A(xt,Eo),xt.alignment=1,xt.width=$t,xt.height=Fr,xt.channels=Oo,xt.format=xt.internalformat=Bo[Oo],xt.needsFree=!0}}else xt.width=xt.width||1,xt.height=xt.height||1,xt.channels=xt.channels||4}function h(Ct,_t,Vn,Gn,or){var lr=Ct.element,Fr=Ct.data,Hr=Ct.internalformat,xo=Ct.format,Eo=Ct.type,Mo=Ct.width,Oo=Ct.height;l(Ct),lr?xt.texSubImage2D(_t,or,Vn,Gn,xo,Eo,lr):Ct.compressed?xt.compressedTexSubImage2D(_t,or,Vn,Gn,Hr,Mo,Oo,Fr):Ct.needsCopy?($t(),xt.copyTexSubImage2D(_t,or,Vn,Gn,Ct.xOffset,Ct.yOffset,Mo,Oo)):xt.texSubImage2D(_t,or,Vn,Gn,Mo,Oo,xo,Eo,Fr)}function g(){return ps.pop()||new p}function _(xt){xt.needsFree&&Vn.freeType(xt.data),p.call(xt),ps.push(xt)}function O(){o.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function E(xt,Ct,_t){var $t=xt.images[0]=g();xt.mipmask=1,$t.width=xt.width=Ct,$t.height=xt.height=_t,$t.channels=xt.channels=4}function D(xt,Ct){var _t=null;if(w(Ct))s(_t=xt.images[0]=g(),xt),d(_t,Ct),xt.mipmask=1;else if(c(xt,Ct),Array.isArray(Ct.mipmap))for(var $t=Ct.mipmap,Vn=0;Vn<$t.length;++Vn)s(_t=xt.images[Vn]=g(),xt),_t.width>>=Vn,_t.height>>=Vn,d(_t,$t[Vn]),xt.mipmask|=1<<Vn;else s(_t=xt.images[0]=g(),xt),d(_t,Ct),xt.mipmask=1;s(xt,xt.images[0])}function T(Ct,_t){for(var Vn=Ct.images,Gn=0;Gn<Vn.length&&Vn[Gn];++Gn){var or=Vn[Gn],lr=_t,Fr=Gn,Hr=or.element,xo=or.data,Eo=or.internalformat,Mo=or.format,Oo=or.type,Ro=or.width,Io=or.height;l(or),Hr?xt.texImage2D(lr,Fr,Mo,Mo,Oo,Hr):or.compressed?xt.compressedTexImage2D(lr,Fr,Eo,Ro,Io,0,xo):or.needsCopy?($t(),xt.copyTexImage2D(lr,Fr,Mo,or.xOffset,or.yOffset,Ro,Io,0)):xt.texImage2D(lr,Fr,Mo,Ro,Io,0,Mo,Oo,xo||null)}}function S(){var xt=ds.pop()||new O;o.call(xt);for(var Ct=xt.mipmask=0;16>Ct;++Ct)xt.images[Ct]=null;return xt}function j(xt){for(var Ct=xt.images,_t=0;_t<Ct.length;++_t)Ct[_t]&&_(Ct[_t]),Ct[_t]=null;ds.push(xt)}function C(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function V(xt,Ct){"min"in Ct&&(xt.minFilter=Oo[Ct.min],0<=Io.indexOf(xt.minFilter)&&!("faces"in Ct)&&(xt.genMipmaps=!0)),"mag"in Ct&&(xt.magFilter=Mo[Ct.mag]);var _t=xt.wrapS,$t=xt.wrapT;if("wrap"in Ct){var Vn=Ct.wrap;"string"==typeof Vn?_t=$t=Eo[Vn]:Array.isArray(Vn)&&(_t=Eo[Vn[0]],$t=Eo[Vn[1]])}else"wrapS"in Ct&&(_t=Eo[Ct.wrapS]),"wrapT"in Ct&&($t=Eo[Ct.wrapT]);if(xt.wrapS=_t,xt.wrapT=$t,"anisotropic"in Ct&&(xt.anisotropic=Ct.anisotropic),"mipmap"in Ct){switch(_t=!1,typeof Ct.mipmap){case"string":xt.mipmapHint=xo[Ct.mipmap],_t=xt.genMipmaps=!0;break;case"boolean":_t=xt.genMipmaps=Ct.mipmap;break;case"object":xt.genMipmaps=!1,_t=!0}!_t||"min"in Ct||(xt.minFilter=9984)}}function F(_t,$t){xt.texParameteri($t,10241,_t.minFilter),xt.texParameteri($t,10240,_t.magFilter),xt.texParameteri($t,10242,_t.wrapS),xt.texParameteri($t,10243,_t.wrapT),Ct.ext_texture_filter_anisotropic&&xt.texParameteri($t,34046,_t.anisotropic),_t.genMipmaps&&(xt.hint(33170,_t.mipmapHint),xt.generateMipmap($t))}function B(Ct){o.call(this),this.mipmask=0,this.internalformat=6408,this.id=ms++,this.refCount=1,this.target=Ct,this.texture=xt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new C,Hr.profile&&(this.stats={size:0})}function z(Ct){xt.activeTexture(33984),xt.bindTexture(Ct.target,Ct.texture)}function I(){var Ct=ys[0];Ct?xt.bindTexture(Ct.target,Ct.texture):xt.bindTexture(3553,null)}function P(Ct){var _t=Ct.texture,$t=Ct.unit,Vn=Ct.target;0<=$t&&(xt.activeTexture(33984+$t),xt.bindTexture(Vn,null),ys[$t]=null),xt.deleteTexture(_t),Ct.texture=null,Ct.params=null,Ct.pixels=null,Ct.refCount=0,delete gs[Ct.id],Fr.textureCount--}var xo={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Eo={repeat:10497,clamp:33071,mirror:33648},Mo={nearest:9728,linear:9729},Oo=R({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Mo),Ro={none:0,browser:37444},ns={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},rs={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},os={};Ct.ext_srgb&&(rs.srgb=35904,rs.srgba=35906),Ct.oes_texture_float&&(ns.float32=ns.float=5126),Ct.oes_texture_half_float&&(ns.float16=ns["half float"]=36193),Ct.webgl_depth_texture&&(R(rs,{depth:6402,"depth stencil":34041}),R(ns,{uint16:5123,uint32:5125,"depth stencil":34042})),Ct.webgl_compressed_texture_s3tc&&R(os,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ct.webgl_compressed_texture_atc&&R(os,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ct.webgl_compressed_texture_pvrtc&&R(os,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ct.webgl_compressed_texture_etc1&&(os["rgb etc1"]=36196);var is=Array.prototype.slice.call(xt.getParameter(34467));Object.keys(os).forEach((function(xt){var Ct=os[xt];0<=is.indexOf(Ct)&&(rs[xt]=Ct)}));var ss=Object.keys(rs);_t.textureFormats=ss;var as=[];Object.keys(rs).forEach((function(xt){as[rs[xt]]=xt}));var ls=[];Object.keys(ns).forEach((function(xt){ls[ns[xt]]=xt}));var cs=[];Object.keys(Mo).forEach((function(xt){cs[Mo[xt]]=xt}));var us=[];Object.keys(Oo).forEach((function(xt){us[Oo[xt]]=xt}));var fs=[];Object.keys(Eo).forEach((function(xt){fs[Eo[xt]]=xt}));var hs=ss.reduce((function(xt,_t){var $t=rs[_t];return 6409===$t||6406===$t||6409===$t||6410===$t||6402===$t||34041===$t||Ct.ext_srgb&&(35904===$t||35906===$t)?xt[$t]=$t:32855===$t||0<=_t.indexOf("rgba")?xt[$t]=6408:xt[$t]=6407,xt}),{}),ps=[],ds=[],ms=0,gs={},vs=_t.maxTextureUnits,ys=Array(vs).map((function(){return null}));return R(B.prototype,{bind:function(){this.bindCount+=1;var Ct=this.unit;if(0>Ct){for(var _t=0;_t<vs;++_t){var $t=ys[_t];if($t){if(0<$t.bindCount)continue;$t.unit=-1}ys[_t]=this,Ct=_t;break}Hr.profile&&Fr.maxTextureUnits<Ct+1&&(Fr.maxTextureUnits=Ct+1),this.unit=Ct,xt.activeTexture(33984+Ct),xt.bindTexture(this.target,this.texture)}return Ct},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&P(this)}}),Hr.profile&&(Fr.getTotalTextureSize=function(){var xt=0;return Object.keys(gs).forEach((function(Ct){xt+=gs[Ct].stats.size})),xt}),{create2D:function(Ct,_t){function n(xt,Ct){var _t=$t.texInfo;C.call(_t);var Vn=S();return"number"==typeof xt?E(Vn,0|xt,"number"==typeof Ct?0|Ct:0|xt):xt?(V(_t,xt),D(Vn,xt)):E(Vn,1,1),_t.genMipmaps&&(Vn.mipmask=(Vn.width<<1)-1),$t.mipmask=Vn.mipmask,s($t,Vn),$t.internalformat=Vn.internalformat,n.width=Vn.width,n.height=Vn.height,z($t),T(Vn,3553),F(_t,3553),I(),j(Vn),Hr.profile&&($t.stats.size=k($t.internalformat,$t.type,Vn.width,Vn.height,_t.genMipmaps,!1)),n.format=as[$t.internalformat],n.type=ls[$t.type],n.mag=cs[_t.magFilter],n.min=us[_t.minFilter],n.wrapS=fs[_t.wrapS],n.wrapT=fs[_t.wrapT],n}var $t=new B(3553);return gs[$t.id]=$t,Fr.textureCount++,n(Ct,_t),n.subimage=function(xt,Ct,_t,Vn){Ct|=0,_t|=0,Vn|=0;var Gn=g();return s(Gn,$t),Gn.width=0,Gn.height=0,d(Gn,xt),Gn.width=Gn.width||($t.width>>Vn)-Ct,Gn.height=Gn.height||($t.height>>Vn)-_t,z($t),h(Gn,3553,Ct,_t,Vn),I(),_(Gn),n},n.resize=function(Ct,_t){var Vn=0|Ct,Gn=0|_t||Vn;if(Vn===$t.width&&Gn===$t.height)return n;n.width=$t.width=Vn,n.height=$t.height=Gn,z($t);for(var or=0;$t.mipmask>>or;++or){var lr=Vn>>or,Fr=Gn>>or;if(!lr||!Fr)break;xt.texImage2D(3553,or,$t.format,lr,Fr,0,$t.format,$t.type,null)}return I(),Hr.profile&&($t.stats.size=k($t.internalformat,$t.type,Vn,Gn,!1,!1)),n},n._reglType="texture2d",n._texture=$t,Hr.profile&&(n.stats=$t.stats),n.destroy=function(){$t.decRef()},n},createCube:function(Ct,_t,$t,Vn,Gn,or){function l(xt,Ct,_t,$t,Vn,Gn){var or,Fr=lr.texInfo;for(C.call(Fr),or=0;6>or;++or)xo[or]=S();if("number"!=typeof xt&&xt){if("object"==typeof xt)if(Ct)D(xo[0],xt),D(xo[1],Ct),D(xo[2],_t),D(xo[3],$t),D(xo[4],Vn),D(xo[5],Gn);else if(V(Fr,xt),c(lr,xt),"faces"in xt)for(xt=xt.faces,or=0;6>or;++or)s(xo[or],lr),D(xo[or],xt[or]);else for(or=0;6>or;++or)D(xo[or],xt)}else for(xt=0|xt||1,or=0;6>or;++or)E(xo[or],xt,xt);for(s(lr,xo[0]),lr.mipmask=Fr.genMipmaps?(xo[0].width<<1)-1:xo[0].mipmask,lr.internalformat=xo[0].internalformat,l.width=xo[0].width,l.height=xo[0].height,z(lr),or=0;6>or;++or)T(xo[or],34069+or);for(F(Fr,34067),I(),Hr.profile&&(lr.stats.size=k(lr.internalformat,lr.type,l.width,l.height,Fr.genMipmaps,!0)),l.format=as[lr.internalformat],l.type=ls[lr.type],l.mag=cs[Fr.magFilter],l.min=us[Fr.minFilter],l.wrapS=fs[Fr.wrapS],l.wrapT=fs[Fr.wrapT],or=0;6>or;++or)j(xo[or]);return l}var lr=new B(34067);gs[lr.id]=lr,Fr.cubeCount++;var xo=Array(6);return l(Ct,_t,$t,Vn,Gn,or),l.subimage=function(xt,Ct,_t,$t,Vn){_t|=0,$t|=0,Vn|=0;var Gn=g();return s(Gn,lr),Gn.width=0,Gn.height=0,d(Gn,Ct),Gn.width=Gn.width||(lr.width>>Vn)-_t,Gn.height=Gn.height||(lr.height>>Vn)-$t,z(lr),h(Gn,34069+xt,_t,$t,Vn),I(),_(Gn),l},l.resize=function(Ct){if((Ct|=0)!==lr.width){l.width=lr.width=Ct,l.height=lr.height=Ct,z(lr);for(var _t=0;6>_t;++_t)for(var $t=0;lr.mipmask>>$t;++$t)xt.texImage2D(34069+_t,$t,lr.format,Ct>>$t,Ct>>$t,0,lr.format,lr.type,null);return I(),Hr.profile&&(lr.stats.size=k(lr.internalformat,lr.type,l.width,l.height,!1,!0)),l}},l._reglType="textureCube",l._texture=lr,Hr.profile&&(l.stats=lr.stats),l.destroy=function(){lr.decRef()},l},clear:function(){for(var Ct=0;Ct<vs;++Ct)xt.activeTexture(33984+Ct),xt.bindTexture(3553,null),ys[Ct]=null;Y(gs).forEach(P),Fr.cubeCount=0,Fr.textureCount=0},getTexture:function(xt){return null},restore:function(){for(var Ct=0;Ct<vs;++Ct){var _t=ys[Ct];_t&&(_t.bindCount=0,_t.unit=-1,ys[Ct]=null)}Y(gs).forEach((function(Ct){Ct.texture=xt.createTexture(),xt.bindTexture(Ct.target,Ct.texture);for(var _t=0;32>_t;++_t)if(Ct.mipmask&1<<_t)if(3553===Ct.target)xt.texImage2D(3553,_t,Ct.internalformat,Ct.width>>_t,Ct.height>>_t,0,Ct.internalformat,Ct.type,null);else for(var $t=0;6>$t;++$t)xt.texImage2D(34069+$t,_t,Ct.internalformat,Ct.width>>_t,Ct.height>>_t,0,Ct.internalformat,Ct.type,null);F(Ct.texInfo,Ct.target)}))},refresh:function(){for(var Ct=0;Ct<vs;++Ct){var _t=ys[Ct];_t&&(_t.bindCount=0,_t.unit=-1,ys[Ct]=null),xt.activeTexture(33984+Ct),xt.bindTexture(3553,null),xt.bindTexture(34067,null)}}}}function O(xt,Ct,_t,$t,Vn,Gn){function f(xt,Ct,_t){this.target=xt,this.texture=Ct,this.renderbuffer=_t;var $t=xt=0;Ct?(xt=Ct.width,$t=Ct.height):_t&&(xt=_t.width,$t=_t.height),this.width=xt,this.height=$t}function o(xt){xt&&(xt.texture&&xt.texture._texture.decRef(),xt.renderbuffer&&xt.renderbuffer._renderbuffer.decRef())}function u(xt,Ct,_t){xt&&(xt.texture?xt.texture._texture.refCount+=1:xt.renderbuffer._renderbuffer.refCount+=1)}function s(Ct,_t){_t&&(_t.texture?xt.framebufferTexture2D(36160,Ct,_t.target,_t.texture._texture.texture,0):xt.framebufferRenderbuffer(36160,Ct,36161,_t.renderbuffer._renderbuffer.renderbuffer))}function c(xt){var Ct=3553,_t=null,$t=null,Vn=xt;return"object"==typeof xt&&(Vn=xt.data,"target"in xt&&(Ct=0|xt.target)),"texture2d"===(xt=Vn._reglType)||"textureCube"===xt?_t=Vn:"renderbuffer"===xt&&($t=Vn,Ct=36161),new f(Ct,_t,$t)}function l(xt,Ct,_t,Gn,or){return _t?((xt=$t.create2D({width:xt,height:Ct,format:Gn,type:or}))._texture.refCount=0,new f(3553,xt,null)):((xt=Vn.create({width:xt,height:Ct,format:Gn}))._renderbuffer.refCount=0,new f(36161,null,xt))}function p(xt){return xt&&(xt.texture||xt.renderbuffer)}function d(xt,Ct,_t){xt&&(xt.texture?xt.texture.resize(Ct,_t):xt.renderbuffer&&xt.renderbuffer.resize(Ct,_t),xt.width=Ct,xt.height=_t)}function h(){this.id=xo++,Eo[this.id]=this,this.framebuffer=xt.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function m(xt){xt.colorAttachments.forEach(o),o(xt.depthAttachment),o(xt.stencilAttachment),o(xt.depthStencilAttachment)}function b(Ct){xt.deleteFramebuffer(Ct.framebuffer),Ct.framebuffer=null,Gn.framebufferCount--,delete Eo[Ct.id]}function g(Ct){var $t;xt.bindFramebuffer(36160,Ct.framebuffer);var Vn=Ct.colorAttachments;for($t=0;$t<Vn.length;++$t)s(36064+$t,Vn[$t]);for($t=Vn.length;$t<_t.maxColorAttachments;++$t)xt.framebufferTexture2D(36160,36064+$t,3553,null,0);xt.framebufferTexture2D(36160,33306,3553,null,0),xt.framebufferTexture2D(36160,36096,3553,null,0),xt.framebufferTexture2D(36160,36128,3553,null,0),s(36096,Ct.depthAttachment),s(36128,Ct.stencilAttachment),s(33306,Ct.depthStencilAttachment),xt.checkFramebufferStatus(36160),xt.isContextLost(),xt.bindFramebuffer(36160,or.next?or.next.framebuffer:null),or.cur=or.next,xt.getError()}function y(xt,Ct){function r(xt,Ct){var $t,Vn=0,Gn=0,or=!0,Hr=!0;$t=null;var xo=!0,Eo="rgba",Mo="uint8",Oo=1,Ro=null,Io=null,Bo=null,zo=!1;"number"==typeof xt?(Vn=0|xt,Gn=0|Ct||Vn):xt?("shape"in xt?(Vn=(Gn=xt.shape)[0],Gn=Gn[1]):("radius"in xt&&(Vn=Gn=xt.radius),"width"in xt&&(Vn=xt.width),"height"in xt&&(Gn=xt.height)),("color"in xt||"colors"in xt)&&($t=xt.color||xt.colors,Array.isArray($t)),$t||("colorCount"in xt&&(Oo=0|xt.colorCount),"colorTexture"in xt&&(xo=!!xt.colorTexture,Eo="rgba4"),"colorType"in xt&&(Mo=xt.colorType,!xo)&&("half float"===Mo||"float16"===Mo?Eo="rgba16f":"float"!==Mo&&"float32"!==Mo||(Eo="rgba32f")),"colorFormat"in xt&&(Eo=xt.colorFormat,0<=lr.indexOf(Eo)?xo=!0:0<=Fr.indexOf(Eo)&&(xo=!1))),("depthTexture"in xt||"depthStencilTexture"in xt)&&(zo=!(!xt.depthTexture&&!xt.depthStencilTexture)),"depth"in xt&&("boolean"==typeof xt.depth?or=xt.depth:(Ro=xt.depth,Hr=!1)),"stencil"in xt&&("boolean"==typeof xt.stencil?Hr=xt.stencil:(Io=xt.stencil,or=!1)),"depthStencil"in xt&&("boolean"==typeof xt.depthStencil?or=Hr=xt.depthStencil:(Bo=xt.depthStencil,Hr=or=!1))):Vn=Gn=1;var Ho=null,Qo=null,pi=null,gi=null;if(Array.isArray($t))Ho=$t.map(c);else if($t)Ho=[c($t)];else for(Ho=Array(Oo),$t=0;$t<Oo;++$t)Ho[$t]=l(Vn,Gn,xo,Eo,Mo);for(Vn=Vn||Ho[0].width,Gn=Gn||Ho[0].height,Ro?Qo=c(Ro):or&&!Hr&&(Qo=l(Vn,Gn,zo,"depth","uint32")),Io?pi=c(Io):Hr&&!or&&(pi=l(Vn,Gn,!1,"stencil","uint8")),Bo?gi=c(Bo):!Ro&&!Io&&Hr&&or&&(gi=l(Vn,Gn,zo,"depth stencil","depth stencil")),or=null,$t=0;$t<Ho.length;++$t)u(Ho[$t]),Ho[$t]&&Ho[$t].texture&&(Hr=ss[Ho[$t].texture._texture.format]*as[Ho[$t].texture._texture.type],null===or&&(or=Hr));return u(Qo),u(pi),u(gi),m(_t),_t.width=Vn,_t.height=Gn,_t.colorAttachments=Ho,_t.depthAttachment=Qo,_t.stencilAttachment=pi,_t.depthStencilAttachment=gi,r.color=Ho.map(p),r.depth=p(Qo),r.stencil=p(pi),r.depthStencil=p(gi),r.width=_t.width,r.height=_t.height,g(_t),r}var _t=new h;return Gn.framebufferCount++,r(xt,Ct),R(r,{resize:function(xt,Ct){var $t=Math.max(0|xt,1),Vn=Math.max(0|Ct||$t,1);if($t===_t.width&&Vn===_t.height)return r;for(var Gn=_t.colorAttachments,or=0;or<Gn.length;++or)d(Gn[or],$t,Vn);return d(_t.depthAttachment,$t,Vn),d(_t.stencilAttachment,$t,Vn),d(_t.depthStencilAttachment,$t,Vn),_t.width=r.width=$t,_t.height=r.height=Vn,g(_t),r},_reglType:"framebuffer",_framebuffer:_t,destroy:function(){b(_t),m(_t)},use:function(xt){or.setFBO({framebuffer:r},xt)}})}var or={cur:null,next:null,dirty:!1,setFBO:null},lr=["rgba"],Fr=["rgba4","rgb565","rgb5 a1"];Ct.ext_srgb&&Fr.push("srgba"),Ct.ext_color_buffer_half_float&&Fr.push("rgba16f","rgb16f"),Ct.webgl_color_buffer_float&&Fr.push("rgba32f");var Hr=["uint8"];Ct.oes_texture_half_float&&Hr.push("half float","float16"),Ct.oes_texture_float&&Hr.push("float","float32");var xo=0,Eo={};return R(or,{getFramebuffer:function(xt){return"function"==typeof xt&&"framebuffer"===xt._reglType&&(xt=xt._framebuffer)instanceof h?xt:null},create:y,createCube:function(xt){function t(xt){var _t,Vn={color:null},Gn=0,or=null;_t="rgba";var lr="uint8",Fr=1;if("number"==typeof xt?Gn=0|xt:xt?("shape"in xt?Gn=xt.shape[0]:("radius"in xt&&(Gn=0|xt.radius),"width"in xt?Gn=0|xt.width:"height"in xt&&(Gn=0|xt.height)),("color"in xt||"colors"in xt)&&(or=xt.color||xt.colors,Array.isArray(or)),or||("colorCount"in xt&&(Fr=0|xt.colorCount),"colorType"in xt&&(lr=xt.colorType),"colorFormat"in xt&&(_t=xt.colorFormat)),"depth"in xt&&(Vn.depth=xt.depth),"stencil"in xt&&(Vn.stencil=xt.stencil),"depthStencil"in xt&&(Vn.depthStencil=xt.depthStencil)):Gn=1,or)if(Array.isArray(or))for(xt=[],_t=0;_t<or.length;++_t)xt[_t]=or[_t];else xt=[or];else for(xt=Array(Fr),or={radius:Gn,format:_t,type:lr},_t=0;_t<Fr;++_t)xt[_t]=$t.createCube(or);for(Vn.color=Array(xt.length),_t=0;_t<xt.length;++_t)Fr=xt[_t],Gn=Gn||Fr.width,Vn.color[_t]={target:34069,data:xt[_t]};for(_t=0;6>_t;++_t){for(Fr=0;Fr<xt.length;++Fr)Vn.color[Fr].target=34069+_t;0<_t&&(Vn.depth=Ct[0].depth,Vn.stencil=Ct[0].stencil,Vn.depthStencil=Ct[0].depthStencil),Ct[_t]?Ct[_t](Vn):Ct[_t]=y(Vn)}return R(t,{width:Gn,height:Gn,color:xt})}var Ct=Array(6);return t(xt),R(t,{faces:Ct,resize:function(xt){var _t=0|xt;if(_t===t.width)return t;var $t=t.color;for(xt=0;xt<$t.length;++xt)$t[xt].resize(_t);for(xt=0;6>xt;++xt)Ct[xt].resize(_t);return t.width=t.height=_t,t},_reglType:"framebufferCube",destroy:function(){Ct.forEach((function(xt){xt.destroy()}))}})},clear:function(){Y(Eo).forEach(b)},restore:function(){or.cur=null,or.next=null,or.dirty=!0,Y(Eo).forEach((function(Ct){Ct.framebuffer=xt.createFramebuffer(),g(Ct)}))}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function D(xt,Ct,_t,$t,Vn,Gn,or){function o(){this.id=++xo,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var xt=Ct.oes_vertex_array_object;this.vao=xt?xt.createVertexArrayOES():null,Eo[this.id]=this,this.buffers=[]}var Fr=_t.maxAttributes,Hr=Array(Fr);for(_t=0;_t<Fr;++_t)Hr[_t]=new E;var xo=0,Eo={},Oo={Record:E,scope:{},state:Hr,currentVAO:null,targetVAO:null,restore:Ct.oes_vertex_array_object?function(){Ct.oes_vertex_array_object&&Y(Eo).forEach((function(xt){xt.refresh()}))}:function(){},createVAO:function(xt){function t(xt){var _t;Array.isArray(xt)?(_t=xt,Ct.elements&&Ct.ownsElements&&Ct.elements.destroy(),Ct.elements=null,Ct.ownsElements=!1,Ct.offset=0,Ct.count=0,Ct.instances=-1,Ct.primitive=4):(xt.elements?(_t=xt.elements,Ct.ownsElements?("function"==typeof _t&&"elements"===_t._reglType?Ct.elements.destroy():Ct.elements(_t),Ct.ownsElements=!1):Gn.getElements(xt.elements)?(Ct.elements=xt.elements,Ct.ownsElements=!1):(Ct.elements=Gn.create(xt.elements),Ct.ownsElements=!0)):(Ct.elements=null,Ct.ownsElements=!1),_t=xt.attributes,Ct.offset=0,Ct.count=-1,Ct.instances=-1,Ct.primitive=4,Ct.elements&&(Ct.count=Ct.elements._elements.vertCount,Ct.primitive=Ct.elements._elements.primType),"offset"in xt&&(Ct.offset=0|xt.offset),"count"in xt&&(Ct.count=0|xt.count),"instances"in xt&&(Ct.instances=0|xt.instances),"primitive"in xt&&(Ct.primitive=Mo[xt.primitive])),xt={};var $t=Ct.attributes;$t.length=_t.length;for(var or=0;or<_t.length;++or){var Fr,Hr=_t[or],xo=$t[or]=new E,Eo=Hr.data||Hr;Array.isArray(Eo)||G(Eo)||u(Eo)?(Ct.buffers[or]&&(Fr=Ct.buffers[or],G(Eo)&&Fr._buffer.byteLength>=Eo.byteLength?Fr.subdata(Eo):(Fr.destroy(),Ct.buffers[or]=null)),Ct.buffers[or]||(Fr=Ct.buffers[or]=Vn.create(Hr,34962,!1,!0)),xo.buffer=Vn.getBuffer(Fr),xo.size=0|xo.buffer.dimension,xo.normalized=!1,xo.type=xo.buffer.dtype,xo.offset=0,xo.stride=0,xo.divisor=0,xo.state=1,xt[or]=1):Vn.getBuffer(Hr)?(xo.buffer=Vn.getBuffer(Hr),xo.size=0|xo.buffer.dimension,xo.normalized=!1,xo.type=xo.buffer.dtype,xo.offset=0,xo.stride=0,xo.divisor=0,xo.state=1):Vn.getBuffer(Hr.buffer)?(xo.buffer=Vn.getBuffer(Hr.buffer),xo.size=0|(+Hr.size||xo.buffer.dimension),xo.normalized=!!Hr.normalized||!1,xo.type="type"in Hr?lr[Hr.type]:xo.buffer.dtype,xo.offset=0|(Hr.offset||0),xo.stride=0|(Hr.stride||0),xo.divisor=0|(Hr.divisor||0),xo.state=1):"x"in Hr&&(xo.x=+Hr.x||0,xo.y=+Hr.y||0,xo.z=+Hr.z||0,xo.w=+Hr.w||0,xo.state=2)}for(Fr=0;Fr<Ct.buffers.length;++Fr)!xt[Fr]&&Ct.buffers[Fr]&&(Ct.buffers[Fr].destroy(),Ct.buffers[Fr]=null);return Ct.refresh(),t}var Ct=new o;return $t.vaoCount+=1,t.destroy=function(){for(var xt=0;xt<Ct.buffers.length;++xt)Ct.buffers[xt]&&Ct.buffers[xt].destroy();Ct.buffers.length=0,Ct.ownsElements&&(Ct.elements.destroy(),Ct.elements=null,Ct.ownsElements=!1),Ct.destroy()},t._vao=Ct,t._reglType="vao",t(xt)},getVAO:function(xt){return"function"==typeof xt&&xt._vao?xt._vao:null},destroyBuffer:function(Ct){for(var _t=0;_t<Hr.length;++_t){var $t=Hr[_t];$t.buffer===Ct&&(xt.disableVertexAttribArray(_t),$t.buffer=null)}},setVAO:Ct.oes_vertex_array_object?function(xt){if(xt!==Oo.currentVAO){var _t=Ct.oes_vertex_array_object;xt?_t.bindVertexArrayOES(xt.vao):_t.bindVertexArrayOES(null),Oo.currentVAO=xt}}:function(_t){if(_t!==Oo.currentVAO){if(_t)_t.bindAttrs();else{for(var $t=Ct.angle_instanced_arrays,Vn=0;Vn<Hr.length;++Vn){var Gn=Hr[Vn];Gn.buffer?(xt.enableVertexAttribArray(Vn),Gn.buffer.bind(),xt.vertexAttribPointer(Vn,Gn.size,Gn.type,Gn.normalized,Gn.stride,Gn.offfset),$t&&Gn.divisor&&$t.vertexAttribDivisorANGLE(Vn,Gn.divisor)):(xt.disableVertexAttribArray(Vn),xt.vertexAttrib4f(Vn,Gn.x,Gn.y,Gn.z,Gn.w))}or.elements?xt.bindBuffer(34963,or.elements.buffer.buffer):xt.bindBuffer(34963,null)}Oo.currentVAO=_t}},clear:Ct.oes_vertex_array_object?function(){Y(Eo).forEach((function(xt){xt.destroy()}))}:function(){}};return o.prototype.bindAttrs=function(){for(var _t=Ct.angle_instanced_arrays,$t=this.attributes,Vn=0;Vn<$t.length;++Vn){var or=$t[Vn];or.buffer?(xt.enableVertexAttribArray(Vn),xt.bindBuffer(34962,or.buffer.buffer),xt.vertexAttribPointer(Vn,or.size,or.type,or.normalized,or.stride,or.offset),_t&&or.divisor&&_t.vertexAttribDivisorANGLE(Vn,or.divisor)):(xt.disableVertexAttribArray(Vn),xt.vertexAttrib4f(Vn,or.x,or.y,or.z,or.w))}for(_t=$t.length;_t<Fr;++_t)xt.disableVertexAttribArray(_t);(_t=Gn.getElements(this.elements))?xt.bindBuffer(34963,_t.buffer.buffer):xt.bindBuffer(34963,null)},o.prototype.refresh=function(){var xt=Ct.oes_vertex_array_object;xt&&(xt.bindVertexArrayOES(this.vao),this.bindAttrs(),Oo.currentVAO=null,xt.bindVertexArrayOES(null))},o.prototype.destroy=function(){if(this.vao){var xt=Ct.oes_vertex_array_object;this===Oo.currentVAO&&(Oo.currentVAO=null,xt.bindVertexArrayOES(null)),xt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Eo[this.id]&&(delete Eo[this.id],--$t.vaoCount)},Oo}function T(xt,Ct,_t,$t){function i(xt,Ct,_t,$t){this.name=xt,this.id=Ct,this.location=_t,this.info=$t}function a(xt,Ct){for(var _t=0;_t<xt.length;++_t)if(xt[_t].id===Ct.id)return void(xt[_t].location=Ct.location);xt.push(Ct)}function f(_t,$t,or){if(!(Fr=(or=35632===_t?Vn:Gn)[$t])){var lr=Ct.str($t),Fr=xt.createShader(_t);xt.shaderSource(Fr,lr),xt.compileShader(Fr),or[$t]=Fr}return Fr}function o(xt,Ct){this.id=Fr++,this.fragId=xt,this.vertId=Ct,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,$t.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(_t,Vn,Gn){var or;or=f(35632,_t.fragId);var lr=f(35633,_t.vertId);if(Vn=_t.program=xt.createProgram(),xt.attachShader(Vn,or),xt.attachShader(Vn,lr),Gn)for(or=0;or<Gn.length;++or)lr=Gn[or],xt.bindAttribLocation(Vn,lr[0],lr[1]);xt.linkProgram(Vn),lr=xt.getProgramParameter(Vn,35718),$t.profile&&(_t.stats.uniformsCount=lr);var Fr=_t.uniforms;for(or=0;or<lr;++or)if(Gn=xt.getActiveUniform(Vn,or)){if(1<Gn.size)for(var Hr=0;Hr<Gn.size;++Hr){var xo=Gn.name.replace("[0]","["+Hr+"]");a(Fr,new i(xo,Ct.id(xo),xt.getUniformLocation(Vn,xo),Gn))}Hr=Gn.name,1<Gn.size&&(Hr=Hr.replace("[0]","")),a(Fr,new i(Hr,Ct.id(Hr),xt.getUniformLocation(Vn,Hr),Gn))}for(lr=xt.getProgramParameter(Vn,35721),$t.profile&&(_t.stats.attributesCount=lr),_t=_t.attributes,or=0;or<lr;++or)(Gn=xt.getActiveAttrib(Vn,or))&&a(_t,new i(Gn.name,Ct.id(Gn.name),xt.getAttribLocation(Vn,Gn.name),Gn))}var Vn={},Gn={},or={},lr=[],Fr=0;return $t.profile&&(_t.getMaxUniformsCount=function(){var xt=0;return lr.forEach((function(Ct){Ct.stats.uniformsCount>xt&&(xt=Ct.stats.uniformsCount)})),xt},_t.getMaxAttributesCount=function(){var xt=0;return lr.forEach((function(Ct){Ct.stats.attributesCount>xt&&(xt=Ct.stats.attributesCount)})),xt}),{clear:function(){var Ct=xt.deleteShader.bind(xt);Y(Vn).forEach(Ct),Vn={},Y(Gn).forEach(Ct),Gn={},lr.forEach((function(Ct){xt.deleteProgram(Ct.program)})),lr.length=0,or={},_t.shaderCount=0},program:function(Ct,$t,Fr,Hr){var xo=or[$t];xo||(xo=or[$t]={});var Eo=xo[Ct];if(Eo&&(Eo.refCount++,!Hr))return Eo;var Mo=new o($t,Ct);return _t.shaderCount++,u(Mo,Fr,Hr),Eo||(xo[Ct]=Mo),lr.push(Mo),R(Mo,{destroy:function(){if(Mo.refCount--,0>=Mo.refCount){xt.deleteProgram(Mo.program);var Ct=lr.indexOf(Mo);lr.splice(Ct,1),_t.shaderCount--}0>=xo[Mo.vertId].refCount&&(xt.deleteShader(Gn[Mo.vertId]),delete Gn[Mo.vertId],delete or[Mo.fragId][Mo.vertId]),Object.keys(or[Mo.fragId]).length||(xt.deleteShader(Vn[Mo.fragId]),delete Vn[Mo.fragId],delete or[Mo.fragId])}})},restore:function(){Vn={},Gn={};for(var xt=0;xt<lr.length;++xt)u(lr[xt],null,lr[xt].attributes.map((function(xt){return[xt.location,xt.name]})))},shader:f,frag:-1,vert:-1}}function S(xt,Ct,_t,$t,Vn,Gn,or){function o(Vn){var Gn;Gn=null===Ct.next?5121:Ct.next.colorAttachments[0].texture._texture.type;var or=0,lr=0,Fr=$t.framebufferWidth,Hr=$t.framebufferHeight,xo=null;return G(Vn)?xo=Vn:Vn&&(or=0|Vn.x,lr=0|Vn.y,Fr=0|(Vn.width||$t.framebufferWidth-or),Hr=0|(Vn.height||$t.framebufferHeight-lr),xo=Vn.data||null),_t(),Vn=Fr*Hr*4,xo||(5121===Gn?xo=new Uint8Array(Vn):5126===Gn&&(xo=xo||new Float32Array(Vn))),xt.pixelStorei(3333,4),xt.readPixels(or,lr,Fr,Hr,6408,Gn,xo),xo}return function(xt){return xt&&"framebuffer"in xt?function(xt){var _t;return Ct.setFBO({framebuffer:xt.framebuffer},(function(){_t=o(xt)})),_t}(xt):o(xt)}}function j(xt){return Array.prototype.slice.call(xt)}function C(xt){return j(xt).join("")}function V(xt){return Array.isArray(xt)||G(xt)||u(xt)}function F(xt){return xt.sort((function(xt,Ct){return"viewport"===xt?-1:"viewport"===Ct?1:xt<Ct?-1:1}))}function B(xt,Ct,_t,$t){this.thisDep=xt,this.contextDep=Ct,this.propDep=_t,this.append=$t}function z(xt){return xt&&!(xt.thisDep||xt.contextDep||xt.propDep)}function I(xt){return new B(!1,!1,!1,xt)}function P(xt,Ct){var _t=xt.type;if(0===_t)return new B(!0,1<=(_t=xt.data.length),2<=_t,Ct);if(4===_t)return new B((_t=xt.data).thisDep,_t.contextDep,_t.propDep,Ct);if(5===_t)return new B(!1,!1,!1,Ct);if(6===_t){for(var $t=_t=!1,Vn=!1,Gn=0;Gn<xt.data.length;++Gn){var or=xt.data[Gn];1===or.type?Vn=!0:2===or.type?$t=!0:3===or.type?_t=!0:0===or.type?(_t=!0,1<=(or=or.data)&&($t=!0),2<=or&&(Vn=!0)):4===or.type&&(_t=_t||or.data.thisDep,$t=$t||or.data.contextDep,Vn=Vn||or.data.propDep)}return new B(_t,$t,Vn,Ct)}return new B(3===_t,2===_t,1===_t,Ct)}function L(xt,_t,$t,Vn,Gn,or,Fr,Hr,xo,Eo,Oo,Ro,Io,Bo,zo){function g(xt){return xt.replace(".","_")}function y(xt,Ct,_t){var $t=g(xt);rs.push(xt),ns[$t]=ts[$t]=!!_t,os[$t]=Ct}function v(xt,Ct,_t){var $t=g(xt);rs.push(xt),Array.isArray(_t)?(ts[$t]=_t.slice(),ns[$t]=_t.slice()):ts[$t]=ns[$t]=_t,is[$t]=Ct}function x(){var xt=function(){function e(){var Ct=[],_t=[];return R((function(){Ct.push.apply(Ct,j(arguments))}),{def:function(){var $t="v"+xt++;return _t.push($t),0<arguments.length&&(Ct.push($t,"="),Ct.push.apply(Ct,j(arguments)),Ct.push(";")),$t},toString:function(){return C([0<_t.length?"var "+_t.join(",")+";":"",C(Ct)])}})}function t(){function t(_t,$t){Ct(_t,$t,"=",xt.def(_t,$t),";")}var xt=e(),Ct=e(),_t=xt.toString,$t=Ct.toString;return R((function(){xt.apply(xt,j(arguments))}),{def:xt.def,entry:xt,exit:Ct,save:t,set:function(Ct,_t,$t){t(Ct,_t),xt(Ct,_t,"=",$t,";")},toString:function(){return _t()+$t()}})}var xt=0,Ct=[],_t=[],$t=e(),Vn={};return{global:$t,link:function($t){for(var Vn=0;Vn<_t.length;++Vn)if(_t[Vn]===$t)return Ct[Vn];return Vn="g"+xt++,Ct.push(Vn),_t.push($t),Vn},block:e,proc:function(xt,Ct){function n(){var xt="a"+_t.length;return _t.push(xt),xt}var _t=[];Ct=Ct||0;for(var $t=0;$t<Ct;++$t)n();var Gn=($t=t()).toString;return Vn[xt]=R($t,{arg:n,toString:function(){return C(["function(",_t.join(),"){",Gn(),"}"])}})},scope:t,cond:function(){var xt=C(arguments),Ct=t(),_t=t(),$t=Ct.toString,Vn=_t.toString;return R(Ct,{then:function(){return Ct.apply(Ct,j(arguments)),this},else:function(){return _t.apply(_t,j(arguments)),this},toString:function(){var Ct=Vn();return Ct&&(Ct="else{"+Ct+"}"),C(["if(",xt,"){",$t(),"}",Ct])}})},compile:function(){var xt=['"use strict";',$t,"return {"];Object.keys(Vn).forEach((function(Ct){xt.push('"',Ct,'":',Vn[Ct].toString(),",")})),xt.push("}");var Gn=C(xt).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,Ct.concat(Gn)).apply(null,_t)}}}(),Ct=xt.link,$t=xt.global;xt.id=ms++,xt.batchId="0";var Vn=Ct(ss),Gn=xt.shared={props:"a0"};Object.keys(ss).forEach((function(xt){Gn[xt]=$t.def(Vn,".",xt)}));var or=xt.next={},lr=xt.current={};Object.keys(is).forEach((function(xt){Array.isArray(ts[xt])&&(or[xt]=$t.def(Gn.next,".",xt),lr[xt]=$t.def(Gn.current,".",xt))}));var Fr=xt.constants={};Object.keys(as).forEach((function(xt){Fr[xt]=$t.def(JSON.stringify(as[xt]))})),xt.invoke=function(_t,$t){switch($t.type){case 0:var Vn=["this",Gn.context,Gn.props,xt.batchId];return _t.def(Ct($t.data),".call(",Vn.slice(0,Math.max($t.data.length+1,4)),")");case 1:return _t.def(Gn.props,$t.data);case 2:return _t.def(Gn.context,$t.data);case 3:return _t.def("this",$t.data);case 4:return $t.data.append(xt,_t),$t.data.ref;case 5:return $t.data.toString();case 6:return $t.data.map((function(Ct){return xt.invoke(_t,Ct)}))}},xt.attribCache={};var Hr={};return xt.scopeAttrib=function(xt){if((xt=_t.id(xt))in Hr)return Hr[xt];var $t=Eo.scope[xt];return $t||($t=Eo.scope[xt]=new Ho),Hr[xt]=Ct($t)},xt}function w(xt,Ct){var _t=xt.static,$t=xt.dynamic;if("framebuffer"in _t){var Vn=_t.framebuffer;return Vn?(Vn=Hr.getFramebuffer(Vn),I((function(xt,Ct){var _t=xt.link(Vn),$t=xt.shared;return Ct.set($t.framebuffer,".next",_t),$t=$t.context,Ct.set($t,".framebufferWidth",_t+".width"),Ct.set($t,".framebufferHeight",_t+".height"),_t}))):I((function(xt,Ct){var _t=xt.shared;return Ct.set(_t.framebuffer,".next","null"),_t=_t.context,Ct.set(_t,".framebufferWidth",_t+".drawingBufferWidth"),Ct.set(_t,".framebufferHeight",_t+".drawingBufferHeight"),"null"}))}if("framebuffer"in $t){var Gn=$t.framebuffer;return P(Gn,(function(xt,Ct){var _t=xt.invoke(Ct,Gn),$t=xt.shared,Vn=$t.framebuffer;return _t=Ct.def(Vn,".getFramebuffer(",_t,")"),Ct.set(Vn,".next",_t),$t=$t.context,Ct.set($t,".framebufferWidth",_t+"?"+_t+".width:"+$t+".drawingBufferWidth"),Ct.set($t,".framebufferHeight",_t+"?"+_t+".height:"+$t+".drawingBufferHeight"),_t}))}return null}function A(xt,Ct,$t){function i(xt){if(xt in Vn){var Ct=_t.id(Vn[xt]);return(xt=I((function(){return Ct}))).id=Ct,xt}if(xt in Gn){var $t=Gn[xt];return P($t,(function(xt,Ct){var _t=xt.invoke(Ct,$t);return Ct.def(xt.shared.strings,".id(",_t,")")}))}return null}var Vn=xt.static,Gn=xt.dynamic,or=i("frag"),lr=i("vert"),Fr=null;return z(or)&&z(lr)?(Fr=Oo.program(lr.id,or.id,null,$t),xt=I((function(xt,Ct){return xt.link(Fr)}))):xt=new B(or&&or.thisDep||lr&&lr.thisDep,or&&or.contextDep||lr&&lr.contextDep,or&&or.propDep||lr&&lr.propDep,(function(xt,Ct){var _t,$t,Vn=xt.shared.shader;return _t=or?or.append(xt,Ct):Ct.def(Vn,".","frag"),$t=lr?lr.append(xt,Ct):Ct.def(Vn,".","vert"),Ct.def(Vn+".program("+$t+","+_t+")")})),{frag:or,vert:lr,progVar:xt,program:Fr}}function k(xt,Ct){function r(xt,Ct){if(xt in _t){var or=0|_t[xt];return Ct?Vn.offset=or:Vn.instances=or,I((function(xt,_t){return Ct&&(xt.OFFSET=or),or}))}if(xt in $t){var Hr=$t[xt];return P(Hr,(function(xt,_t){var $t=xt.invoke(_t,Hr);return Ct&&(xt.OFFSET=$t),$t}))}if(Ct){if(Fr)return I((function(xt,Ct){return xt.OFFSET=0}));if(Gn)return new B(lr.thisDep,lr.contextDep,lr.propDep,(function(xt,Ct){return Ct.def(xt.shared.vao+".currentVAO?"+xt.shared.vao+".currentVAO.offset:0")}))}else if(Gn)return new B(lr.thisDep,lr.contextDep,lr.propDep,(function(xt,Ct){return Ct.def(xt.shared.vao+".currentVAO?"+xt.shared.vao+".currentVAO.instances:-1")}));return null}var _t=xt.static,$t=xt.dynamic,Vn={},Gn=!1,lr=function(){if("vao"in _t){var xt=_t.vao;return null!==xt&&null===Eo.getVAO(xt)&&(xt=Eo.createVAO(xt)),Gn=!0,Vn.vao=xt,I((function(Ct){var _t=Eo.getVAO(xt);return _t?Ct.link(_t):"null"}))}if("vao"in $t){Gn=!0;var Ct=$t.vao;return P(Ct,(function(xt,_t){var $t=xt.invoke(_t,Ct);return _t.def(xt.shared.vao+".getVAO("+$t+")")}))}return null}(),Fr=!1,Hr=function(){if("elements"in _t){var xt=_t.elements;if(Vn.elements=xt,V(xt)){var Ct=Vn.elements=or.create(xt,!0);xt=or.getElements(Ct),Fr=!0}else xt&&(xt=or.getElements(xt),Fr=!0);return(Ct=I((function(Ct,_t){if(xt){var $t=Ct.link(xt);return Ct.ELEMENTS=$t}return Ct.ELEMENTS=null}))).value=xt,Ct}if("elements"in $t){Fr=!0;var Hr=$t.elements;return P(Hr,(function(xt,Ct){var _t=($t=xt.shared).isBufferArgs,$t=$t.elements,Vn=xt.invoke(Ct,Hr),Gn=Ct.def("null");return _t=Ct.def(_t,"(",Vn,")"),Vn=xt.cond(_t).then(Gn,"=",$t,".createStream(",Vn,");").else(Gn,"=",$t,".getElements(",Vn,");"),Ct.entry(Vn),Ct.exit(xt.cond(_t).then($t,".destroyStream(",Gn,");")),xt.ELEMENTS=Gn}))}return Gn?new B(lr.thisDep,lr.contextDep,lr.propDep,(function(xt,Ct){return Ct.def(xt.shared.vao+".currentVAO?"+xt.shared.elements+".getElements("+xt.shared.vao+".currentVAO.elements):null")})):null}(),xo=r("offset",!0),Oo=function(){if("primitive"in _t){var xt=_t.primitive;return Vn.primitive=xt,I((function(Ct,_t){return Mo[xt]}))}if("primitive"in $t){var Ct=$t.primitive;return P(Ct,(function(xt,_t){var $t=xt.constants.primTypes,Vn=xt.invoke(_t,Ct);return _t.def($t,"[",Vn,"]")}))}return Fr?z(Hr)?Hr.value?I((function(xt,Ct){return Ct.def(xt.ELEMENTS,".primType")})):I((function(){return 4})):new B(Hr.thisDep,Hr.contextDep,Hr.propDep,(function(xt,Ct){var _t=xt.ELEMENTS;return Ct.def(_t,"?",_t,".primType:",4)})):Gn?new B(lr.thisDep,lr.contextDep,lr.propDep,(function(xt,Ct){return Ct.def(xt.shared.vao+".currentVAO?"+xt.shared.vao+".currentVAO.primitive:4")})):null}(),Ro=function(){if("count"in _t){var xt=0|_t.count;return Vn.count=xt,I((function(){return xt}))}if("count"in $t){var Ct=$t.count;return P(Ct,(function(xt,_t){return xt.invoke(_t,Ct)}))}return Fr?z(Hr)?Hr?xo?new B(xo.thisDep,xo.contextDep,xo.propDep,(function(xt,Ct){return Ct.def(xt.ELEMENTS,".vertCount-",xt.OFFSET)})):I((function(xt,Ct){return Ct.def(xt.ELEMENTS,".vertCount")})):I((function(){return-1})):new B(Hr.thisDep||xo.thisDep,Hr.contextDep||xo.contextDep,Hr.propDep||xo.propDep,(function(xt,Ct){var _t=xt.ELEMENTS;return xt.OFFSET?Ct.def(_t,"?",_t,".vertCount-",xt.OFFSET,":-1"):Ct.def(_t,"?",_t,".vertCount:-1")})):Gn?new B(lr.thisDep,lr.contextDep,lr.propDep,(function(xt,Ct){return Ct.def(xt.shared.vao,".currentVAO?",xt.shared.vao,".currentVAO.count:-1")})):null}(),Io=r("instances",!1);return{elements:Hr,primitive:Oo,count:Ro,instances:Io,offset:xo,vao:lr,vaoActive:Gn,elementsActive:Fr,static:Vn}}function _(xt,Ct){var $t=xt.static,Vn=xt.dynamic,or={};return Object.keys($t).forEach((function(xt){var Ct=$t[xt],Vn=_t.id(xt),Fr=new Ho;if(V(Ct))Fr.state=1,Fr.buffer=Gn.getBuffer(Gn.create(Ct,34962,!1,!0)),Fr.type=0;else if(xo=Gn.getBuffer(Ct))Fr.state=1,Fr.buffer=xo,Fr.type=0;else if("constant"in Ct){var Hr=Ct.constant;Fr.buffer="null",Fr.state=2,"number"==typeof Hr?Fr.x=Hr:ls.forEach((function(xt,Ct){Ct<Hr.length&&(Fr[xt]=Hr[Ct])}))}else{var xo=V(Ct.buffer)?Gn.getBuffer(Gn.create(Ct.buffer,34962,!1,!0)):Gn.getBuffer(Ct.buffer),Eo=0|Ct.offset,Mo=0|Ct.stride,Oo=0|Ct.size,Ro=!!Ct.normalized,Io=0;"type"in Ct&&(Io=lr[Ct.type]),Ct=0|Ct.divisor,Fr.buffer=xo,Fr.state=1,Fr.size=Oo,Fr.normalized=Ro,Fr.type=Io||xo.dtype,Fr.offset=Eo,Fr.stride=Mo,Fr.divisor=Ct}or[xt]=I((function(xt,Ct){var _t=xt.attribCache;if(Vn in _t)return _t[Vn];var $t={isStream:!1};return Object.keys(Fr).forEach((function(xt){$t[xt]=Fr[xt]})),Fr.buffer&&($t.buffer=xt.link(Fr.buffer),$t.type=$t.type||$t.buffer+".dtype"),_t[Vn]=$t}))})),Object.keys(Vn).forEach((function(xt){var Ct=Vn[xt];or[xt]=P(Ct,(function(xt,_t){function n(xt){_t(lr[xt],"=",$t,".",xt,"|0;")}var $t=xt.invoke(_t,Ct),Vn=xt.shared,Gn=xt.constants,or=Vn.isBufferArgs,lr=(Vn=Vn.buffer,{isStream:_t.def(!1)}),Fr=new Ho;Fr.state=1,Object.keys(Fr).forEach((function(xt){lr[xt]=_t.def(""+Fr[xt])}));var Hr=lr.buffer,xo=lr.type;return _t("if(",or,"(",$t,")){",lr.isStream,"=true;",Hr,"=",Vn,".createStream(",34962,",",$t,");",xo,"=",Hr,".dtype;","}else{",Hr,"=",Vn,".getBuffer(",$t,");","if(",Hr,"){",xo,"=",Hr,".dtype;",'}else if("constant" in ',$t,"){",lr.state,"=",2,";","if(typeof "+$t+'.constant === "number"){',lr[ls[0]],"=",$t,".constant;",ls.slice(1).map((function(xt){return lr[xt]})).join("="),"=0;","}else{",ls.map((function(xt,Ct){return lr[xt]+"="+$t+".constant.length>"+Ct+"?"+$t+".constant["+Ct+"]:0;"})).join(""),"}}else{","if(",or,"(",$t,".buffer)){",Hr,"=",Vn,".createStream(",34962,",",$t,".buffer);","}else{",Hr,"=",Vn,".getBuffer(",$t,".buffer);","}",xo,'="type" in ',$t,"?",Gn.glTypes,"[",$t,".type]:",Hr,".dtype;",lr.normalized,"=!!",$t,".normalized;"),n("size"),n("offset"),n("stride"),n("divisor"),_t("}}"),_t.exit("if(",lr.isStream,"){",Vn,".destroyStream(",Hr,");","}"),lr}))})),or}function O(xt,Ct,_t,Vn,Gn){function o(xt){var Ct=lr[xt];Ct&&(Hr[xt]=Ct)}var or=function(xt,Ct){if("string"==typeof(_t=xt.static).frag&&"string"==typeof _t.vert){if(0<Object.keys(Ct.dynamic).length)return null;var _t=Ct.static,$t=Object.keys(_t);if(0<$t.length&&"number"==typeof _t[$t[0]]){for(var Vn=[],Gn=0;Gn<$t.length;++Gn)Vn.push([0|_t[$t[Gn]],$t[Gn]]);return Vn}}return null}(xt,Ct),lr=function(xt,Ct,_t){function n(xt){if(xt in $t){var _t=$t[xt];xt=!0;var Gn,or,lr=0|_t.x,Fr=0|_t.y;return"width"in _t?Gn=0|_t.width:xt=!1,"height"in _t?or=0|_t.height:xt=!1,new B(!xt&&Ct&&Ct.thisDep,!xt&&Ct&&Ct.contextDep,!xt&&Ct&&Ct.propDep,(function(xt,Ct){var $t=xt.shared.context,Vn=Gn;"width"in _t||(Vn=Ct.def($t,".","framebufferWidth","-",lr));var Hr=or;return"height"in _t||(Hr=Ct.def($t,".","framebufferHeight","-",Fr)),[lr,Fr,Vn,Hr]}))}if(xt in Vn){var Hr=Vn[xt];return xt=P(Hr,(function(xt,Ct){var _t=xt.invoke(Ct,Hr),$t=xt.shared.context,Vn=Ct.def(_t,".x|0"),Gn=Ct.def(_t,".y|0");return[Vn,Gn,Ct.def('"width" in ',_t,"?",_t,".width|0:","(",$t,".","framebufferWidth","-",Vn,")"),_t=Ct.def('"height" in ',_t,"?",_t,".height|0:","(",$t,".","framebufferHeight","-",Gn,")")]})),Ct&&(xt.thisDep=xt.thisDep||Ct.thisDep,xt.contextDep=xt.contextDep||Ct.contextDep,xt.propDep=xt.propDep||Ct.propDep),xt}return Ct?new B(Ct.thisDep,Ct.contextDep,Ct.propDep,(function(xt,Ct){var _t=xt.shared.context;return[0,0,Ct.def(_t,".","framebufferWidth"),Ct.def(_t,".","framebufferHeight")]})):null}var $t=xt.static,Vn=xt.dynamic;if(xt=n("viewport")){var Gn=xt;xt=new B(xt.thisDep,xt.contextDep,xt.propDep,(function(xt,Ct){var _t=Gn.append(xt,Ct),$t=xt.shared.context;return Ct.set($t,".viewportWidth",_t[2]),Ct.set($t,".viewportHeight",_t[3]),_t}))}return{viewport:xt,scissor_box:n("scissor.box")}}(xt,Mo=w(xt)),Fr=k(xt),Hr=function(xt,Ct){var _t=xt.static,$t=xt.dynamic,Vn={};return rs.forEach((function(xt){function t(Gn,or){if(xt in _t){var lr=Gn(_t[xt]);Vn[Ct]=I((function(){return lr}))}else if(xt in $t){var Fr=$t[xt];Vn[Ct]=P(Fr,(function(xt,Ct){return or(xt,Ct,xt.invoke(Ct,Fr))}))}}var Ct=g(xt);switch(xt){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return t((function(xt){return xt}),(function(xt,Ct,_t){return _t}));case"depth.func":return t((function(xt){return fs[xt]}),(function(xt,Ct,_t){return Ct.def(xt.constants.compareFuncs,"[",_t,"]")}));case"depth.range":return t((function(xt){return xt}),(function(xt,Ct,_t){return[Ct.def("+",_t,"[0]"),Ct=Ct.def("+",_t,"[1]")]}));case"blend.func":return t((function(xt){return[us["srcRGB"in xt?xt.srcRGB:xt.src],us["dstRGB"in xt?xt.dstRGB:xt.dst],us["srcAlpha"in xt?xt.srcAlpha:xt.src],us["dstAlpha"in xt?xt.dstAlpha:xt.dst]]}),(function(xt,Ct,_t){function n(xt,$t){return Ct.def('"',xt,$t,'" in ',_t,"?",_t,".",xt,$t,":",_t,".",xt)}xt=xt.constants.blendFuncs;var $t=n("src","RGB"),Vn=n("dst","RGB"),Gn=($t=Ct.def(xt,"[",$t,"]"),Ct.def(xt,"[",n("src","Alpha"),"]"));return[$t,Vn=Ct.def(xt,"[",Vn,"]"),Gn,xt=Ct.def(xt,"[",n("dst","Alpha"),"]")]}));case"blend.equation":return t((function(xt){return"string"==typeof xt?[Qo[xt],Qo[xt]]:"object"==typeof xt?[Qo[xt.rgb],Qo[xt.alpha]]:void 0}),(function(xt,Ct,_t){var $t=xt.constants.blendEquations,Vn=Ct.def(),Gn=Ct.def();return(xt=xt.cond("typeof ",_t,'==="string"')).then(Vn,"=",Gn,"=",$t,"[",_t,"];"),xt.else(Vn,"=",$t,"[",_t,".rgb];",Gn,"=",$t,"[",_t,".alpha];"),Ct(xt),[Vn,Gn]}));case"blend.color":return t((function(xt){return a(4,(function(Ct){return+xt[Ct]}))}),(function(xt,Ct,_t){return a(4,(function(xt){return Ct.def("+",_t,"[",xt,"]")}))}));case"stencil.mask":return t((function(xt){return 0|xt}),(function(xt,Ct,_t){return Ct.def(_t,"|0")}));case"stencil.func":return t((function(xt){return[fs[xt.cmp||"keep"],xt.ref||0,"mask"in xt?xt.mask:-1]}),(function(xt,Ct,_t){return[xt=Ct.def('"cmp" in ',_t,"?",xt.constants.compareFuncs,"[",_t,".cmp]",":",7680),Ct.def(_t,".ref|0"),Ct=Ct.def('"mask" in ',_t,"?",_t,".mask|0:-1")]}));case"stencil.opFront":case"stencil.opBack":return t((function(Ct){return["stencil.opBack"===xt?1029:1028,hs[Ct.fail||"keep"],hs[Ct.zfail||"keep"],hs[Ct.zpass||"keep"]]}),(function(Ct,_t,$t){function i(xt){return _t.def('"',xt,'" in ',$t,"?",Vn,"[",$t,".",xt,"]:",7680)}var Vn=Ct.constants.stencilOps;return["stencil.opBack"===xt?1029:1028,i("fail"),i("zfail"),i("zpass")]}));case"polygonOffset.offset":return t((function(xt){return[0|xt.factor,0|xt.units]}),(function(xt,Ct,_t){return[Ct.def(_t,".factor|0"),Ct=Ct.def(_t,".units|0")]}));case"cull.face":return t((function(xt){var Ct=0;return"front"===xt?Ct=1028:"back"===xt&&(Ct=1029),Ct}),(function(xt,Ct,_t){return Ct.def(_t,'==="front"?',1028,":",1029)}));case"frontFace":return t((function(xt){return ps[xt]}),(function(xt,Ct,_t){return Ct.def(_t+'==="cw"?2304:2305')}));case"colorMask":return t((function(xt){return xt.map((function(xt){return!!xt}))}),(function(xt,Ct,_t){return a(4,(function(xt){return"!!"+_t+"["+xt+"]"}))}));case"sample.coverage":return t((function(xt){return["value"in xt?xt.value:1,!!xt.invert]}),(function(xt,Ct,_t){return[Ct.def('"value" in ',_t,"?+",_t,".value:1"),Ct=Ct.def("!!",_t,".invert")]}))}})),Vn}(xt),xo=A(xt,0,or);o("viewport"),o(g("scissor.box"));var Mo,Oo=0<Object.keys(Hr).length;if((Mo={framebuffer:Mo,draw:Fr,shader:xo,state:Hr,dirty:Oo,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(xt){var Ct,_t=xt.static;if(xt=xt.dynamic,"profile"in _t){var $t=!!_t.profile;(Ct=I((function(xt,Ct){return $t}))).enable=$t}else if("profile"in xt){var Vn=xt.profile;Ct=P(Vn,(function(xt,Ct){return xt.invoke(Ct,Vn)}))}return Ct}(xt),Mo.uniforms=function(xt,Ct){var _t=xt.static,$t=xt.dynamic,Vn={};return Object.keys(_t).forEach((function(xt){var Ct,$t=_t[xt];if("number"==typeof $t||"boolean"==typeof $t)Ct=I((function(){return $t}));else if("function"==typeof $t){var Gn=$t._reglType;"texture2d"===Gn||"textureCube"===Gn?Ct=I((function(xt){return xt.link($t)})):"framebuffer"!==Gn&&"framebufferCube"!==Gn||(Ct=I((function(xt){return xt.link($t.color[0])})))}else b($t)&&(Ct=I((function(xt){return xt.global.def("[",a($t.length,(function(xt){return $t[xt]})),"]")})));Ct.value=$t,Vn[xt]=Ct})),Object.keys($t).forEach((function(xt){var Ct=$t[xt];Vn[xt]=P(Ct,(function(xt,_t){return xt.invoke(_t,Ct)}))})),Vn}(_t),Mo.drawVAO=Mo.scopeVAO=Fr.vao,!Mo.drawVAO&&xo.program&&!or&&$t.angle_instanced_arrays&&Fr.static.elements){var Ro=!0;if(xt=xo.program.attributes.map((function(xt){return xt=Ct.static[xt],Ro=Ro&&!!xt,xt})),Ro&&0<xt.length){var Io=Eo.getVAO(Eo.createVAO({attributes:xt,elements:Fr.static.elements}));Mo.drawVAO=new B(null,null,null,(function(xt,Ct){return xt.link(Io)})),Mo.useVAO=!0}}return or?Mo.useVAO=!0:Mo.attributes=_(Ct),Mo.context=function(xt){var Ct=xt.static,_t=xt.dynamic,$t={};return Object.keys(Ct).forEach((function(xt){var _t=Ct[xt];$t[xt]=I((function(xt,Ct){return"number"==typeof _t||"boolean"==typeof _t?""+_t:xt.link(_t)}))})),Object.keys(_t).forEach((function(xt){var Ct=_t[xt];$t[xt]=P(Ct,(function(xt,_t){return xt.invoke(_t,Ct)}))})),$t}(Vn),Mo}function E(xt,Ct,_t){var $t=xt.shared.context,Vn=xt.scope();Object.keys(_t).forEach((function(Gn){Ct.save($t,"."+Gn);var or=_t[Gn].append(xt,Ct);Array.isArray(or)?Vn($t,".",Gn,"=[",or.join(),"];"):Vn($t,".",Gn,"=",or,";")})),Ct(Vn)}function D(xt,Ct,_t,$t){var Vn,Gn=(lr=xt.shared).gl,or=lr.framebuffer;gi&&(Vn=Ct.def(lr.extensions,".webgl_draw_buffers"));var lr=(Fr=xt.constants).drawBuffer,Fr=Fr.backBuffer;xt=_t?_t.append(xt,Ct):Ct.def(or,".next"),$t||Ct("if(",xt,"!==",or,".cur){"),Ct("if(",xt,"){",Gn,".bindFramebuffer(",36160,",",xt,".framebuffer);"),gi&&Ct(Vn,".drawBuffersWEBGL(",lr,"[",xt,".colorAttachments.length]);"),Ct("}else{",Gn,".bindFramebuffer(",36160,",null);"),gi&&Ct(Vn,".drawBuffersWEBGL(",Fr,");"),Ct("}",or,".cur=",xt,";"),$t||Ct("}")}function T(xt,Ct,_t){var $t=xt.shared,Vn=$t.gl,Gn=xt.current,or=xt.next,lr=$t.current,Fr=$t.next,Hr=xt.cond(lr,".dirty");rs.forEach((function(Ct){var $t,xo;if(!((Ct=g(Ct))in _t.state))if(Ct in or){$t=or[Ct],xo=Gn[Ct];var Eo=a(ts[Ct].length,(function(xt){return Hr.def($t,"[",xt,"]")}));Hr(xt.cond(Eo.map((function(xt,Ct){return xt+"!=="+xo+"["+Ct+"]"})).join("||")).then(Vn,".",is[Ct],"(",Eo,");",Eo.map((function(xt,Ct){return xo+"["+Ct+"]="+xt})).join(";"),";"))}else $t=Hr.def(Fr,".",Ct),Eo=xt.cond($t,"!==",lr,".",Ct),Hr(Eo),Ct in os?Eo(xt.cond($t).then(Vn,".enable(",os[Ct],");").else(Vn,".disable(",os[Ct],");"),lr,".",Ct,"=",$t,";"):Eo(Vn,".",is[Ct],"(",$t,");",lr,".",Ct,"=",$t,";")})),0===Object.keys(_t.state).length&&Hr(lr,".dirty=false;"),Ct(Hr)}function S(xt,Ct,_t,$t){var Vn=xt.shared,Gn=xt.current,or=Vn.current,lr=Vn.gl;F(Object.keys(_t)).forEach((function(Vn){var Fr=_t[Vn];if(!$t||$t(Fr)){var Hr=Fr.append(xt,Ct);if(os[Vn]){var xo=os[Vn];z(Fr)?Ct(lr,Hr?".enable(":".disable(",xo,");"):Ct(xt.cond(Hr).then(lr,".enable(",xo,");").else(lr,".disable(",xo,");")),Ct(or,".",Vn,"=",Hr,";")}else if(b(Hr)){var Eo=Gn[Vn];Ct(lr,".",is[Vn],"(",Hr,");",Hr.map((function(xt,Ct){return Eo+"["+Ct+"]="+xt})).join(";"),";")}else Ct(lr,".",is[Vn],"(",Hr,");",or,".",Vn,"=",Hr,";")}}))}function L(xt,Ct){pi&&(xt.instancing=Ct.def(xt.shared.extensions,".angle_instanced_arrays"))}function M(xt,Ct,_t,$t,Vn){function a(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function f(xt){xt(Gn=Ct.def(),"=",a(),";"),"string"==typeof Vn?xt(Fr,".count+=",Vn,";"):xt(Fr,".count++;"),Bo&&($t?xt(or=Ct.def(),"=",xo,".getNumPendingQueries();"):xt(xo,".beginQuery(",Fr,");"))}function o(xt){xt(Fr,".cpuTime+=",a(),"-",Gn,";"),Bo&&($t?xt(xo,".pushScopeStats(",or,",",xo,".getNumPendingQueries(),",Fr,");"):xt(xo,".endQuery();"))}function u(xt){var _t=Ct.def(Hr,".profile");Ct(Hr,".profile=",xt,";"),Ct.exit(Hr,".profile=",_t,";")}var Gn,or,lr=xt.shared,Fr=xt.stats,Hr=lr.current,xo=lr.timer;if(_t=_t.profile){if(z(_t))return void(_t.enable?(f(Ct),o(Ct.exit),u("true")):u("false"));u(_t=_t.append(xt,Ct))}else _t=Ct.def(Hr,".profile");f(lr=xt.block()),Ct("if(",_t,"){",lr,"}"),o(xt=xt.block()),Ct.exit("if(",_t,"){",xt,"}")}function H(xt,Ct,_t,$t,Vn){function a(_t,$t,Vn){function a(){Ct("if(!",Fr,".buffer){",or,".enableVertexAttribArray(",lr,");}");var _t,Gn=Vn.type;_t=Vn.size?Ct.def(Vn.size,"||",$t):$t,Ct("if(",Fr,".type!==",Gn,"||",Fr,".size!==",_t,"||",Eo.map((function(xt){return Fr+"."+xt+"!=="+Vn[xt]})).join("||"),"){",or,".bindBuffer(",34962,",",Hr,".buffer);",or,".vertexAttribPointer(",[lr,_t,Gn,Vn.normalized,Vn.stride,Vn.offset],");",Fr,".type=",Gn,";",Fr,".size=",_t,";",Eo.map((function(xt){return Fr+"."+xt+"="+Vn[xt]+";"})).join(""),"}"),pi&&(Gn=Vn.divisor,Ct("if(",Fr,".divisor!==",Gn,"){",xt.instancing,".vertexAttribDivisorANGLE(",[lr,Gn],");",Fr,".divisor=",Gn,";}"))}function o(){Ct("if(",Fr,".buffer){",or,".disableVertexAttribArray(",lr,");",Fr,".buffer=null;","}if(",ls.map((function(xt,Ct){return Fr+"."+xt+"!=="+xo[Ct]})).join("||"),"){",or,".vertexAttrib4f(",lr,",",xo,");",ls.map((function(xt,Ct){return Fr+"."+xt+"="+xo[Ct]+";"})).join(""),"}")}var or=Gn.gl,lr=Ct.def(_t,".location"),Fr=Ct.def(Gn.attributes,"[",lr,"]");_t=Vn.state;var Hr=Vn.buffer,xo=[Vn.x,Vn.y,Vn.z,Vn.w],Eo=["buffer","normalized","offset","stride"];1===_t?a():2===_t?o():(Ct("if(",_t,"===",1,"){"),a(),Ct("}else{"),o(),Ct("}"))}var Gn=xt.shared;$t.forEach((function($t){var Gn,or=$t.name,lr=_t.attributes[or];if(lr){if(!Vn(lr))return;Gn=lr.append(xt,Ct)}else{if(!Vn(ds))return;var Fr=xt.scopeAttrib(or);Gn={},Object.keys(new Ho).forEach((function(xt){Gn[xt]=Ct.def(Fr,".",xt)}))}a(xt.link($t),function(xt){switch(xt){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}($t.info.type),Gn)}))}function U(xt,Ct,$t,Vn,Gn,or){for(var lr,Fr=xt.shared,Hr=Fr.gl,xo={},Eo=0;Eo<Vn.length;++Eo){var Mo=(Ho=Vn[Eo]).name,Oo=Ho.info.type,Ro=Ho.info.size,Io=$t.uniforms[Mo];if(1<Ro){if(!Io)continue;var Bo=Mo.replace("[0]","");if(xo[Bo])continue;xo[Bo]=1}var zo,Ho=xt.link(Ho)+".location";if(Io){if(!Gn(Io))continue;if(z(Io)){if(Mo=Io.value,35678===Oo||35680===Oo)Ct(Hr,".uniform1i(",Ho,",",(Oo=xt.link(Mo._texture||Mo.color[0]._texture))+".bind());"),Ct.exit(Oo,".unbind();");else if(35674===Oo||35675===Oo||35676===Oo)Ro=xt.global.def("new Float32Array(["+Array.prototype.slice.call(Mo)+"])"),Mo=2,35675===Oo?Mo=3:35676===Oo&&(Mo=4),Ct(Hr,".uniformMatrix",Mo,"fv(",Ho,",false,",Ro,");");else{switch(Oo){case 5126:lr="1f";break;case 35664:lr="2f";break;case 35665:lr="3f";break;case 35666:lr="4f";break;case 35670:case 5124:lr="1i";break;case 35671:case 35667:lr="2i";break;case 35672:case 35668:lr="3i";break;case 35673:case 35669:lr="4i"}1<Ro?(lr+="v",Mo=xt.global.def("["+Array.prototype.slice.call(Mo)+"]")):Mo=b(Mo)?Array.prototype.slice.call(Mo):Mo,Ct(Hr,".uniform",lr,"(",Ho,",",Mo,");")}continue}zo=Io.append(xt,Ct)}else{if(!Gn(ds))continue;zo=Ct.def(Fr.uniforms,"[",_t.id(Mo),"]")}switch(35678===Oo?Ct("if(",zo,"&&",zo,'._reglType==="framebuffer"){',zo,"=",zo,".color[0];","}"):35680===Oo&&Ct("if(",zo,"&&",zo,'._reglType==="framebufferCube"){',zo,"=",zo,".color[0];","}"),Mo=1,Oo){case 35678:case 35680:Oo=Ct.def(zo,"._texture"),Ct(Hr,".uniform1i(",Ho,",",Oo,".bind());"),Ct.exit(Oo,".unbind();");continue;case 5124:case 35670:lr="1i";break;case 35667:case 35671:lr="2i",Mo=2;break;case 35668:case 35672:lr="3i",Mo=3;break;case 35669:case 35673:lr="4i",Mo=4;break;case 5126:lr="1f";break;case 35664:lr="2f",Mo=2;break;case 35665:lr="3f",Mo=3;break;case 35666:lr="4f",Mo=4;break;case 35674:lr="Matrix2fv";break;case 35675:lr="Matrix3fv";break;case 35676:lr="Matrix4fv"}if(-1===lr.indexOf("Matrix")&&1<Ro&&(lr+="v",Mo=1),"M"===lr.charAt(0)){Ct(Hr,".uniform",lr,"(",Ho,","),Ho=Math.pow(Oo-35674+2,2);var Qo=xt.global.def("new Float32Array(",Ho,")");Array.isArray(zo)?Ct("false,(",a(Ho,(function(xt){return Qo+"["+xt+"]="+zo[xt]})),",",Qo,")"):Ct("false,(Array.isArray(",zo,")||",zo," instanceof Float32Array)?",zo,":(",a(Ho,(function(xt){return Qo+"["+xt+"]="+zo+"["+xt+"]"})),",",Qo,")"),Ct(");")}else{if(1<Mo){Oo=[];var pi=[];for(Ro=0;Ro<Mo;++Ro)Array.isArray(zo)?pi.push(zo[Ro]):pi.push(Ct.def(zo+"["+Ro+"]")),or&&Oo.push(Ct.def());or&&Ct("if(!",xt.batchId,"||",Oo.map((function(xt,Ct){return xt+"!=="+pi[Ct]})).join("||"),"){",Oo.map((function(xt,Ct){return xt+"="+pi[Ct]+";"})).join("")),Ct(Hr,".uniform",lr,"(",Ho,",",pi.join(","),");")}else or&&(Oo=Ct.def(),Ct("if(!",xt.batchId,"||",Oo,"!==",zo,"){",Oo,"=",zo,";")),Ct(Hr,".uniform",lr,"(",Ho,",",zo,");");or&&Ct("}")}}}function N(xt,Ct,_t,$t){function i(Vn){var Gn=Hr[Vn];return Gn?Gn.contextDep&&$t.contextDynamic||Gn.propDep?Gn.append(xt,_t):Gn.append(xt,Ct):Ct.def(Fr,".",Vn)}function a(){function e(){_t(Gn,".drawElementsInstancedANGLE(",[Eo,Oo,Ro,Mo+"<<(("+Ro+"-5121)>>1)",Vn],");")}function t(){_t(Gn,".drawArraysInstancedANGLE(",[Eo,Mo,Oo,Vn],");")}xo&&"null"!==xo?Io?e():(_t("if(",xo,"){"),e(),_t("}else{"),t(),_t("}")):t()}function f(){function e(){_t(lr+".drawElements("+[Eo,Oo,Ro,Mo+"<<(("+Ro+"-5121)>>1)"]+");")}function t(){_t(lr+".drawArrays("+[Eo,Mo,Oo]+");")}xo&&"null"!==xo?Io?e():(_t("if(",xo,"){"),e(),_t("}else{"),t(),_t("}")):t()}var Vn,Gn,or=xt.shared,lr=or.gl,Fr=or.draw,Hr=$t.draw,xo=function(){var Vn=Hr.elements,Gn=Ct;return Vn?((Vn.contextDep&&$t.contextDynamic||Vn.propDep)&&(Gn=_t),Vn=Vn.append(xt,Gn),Hr.elementsActive&&Gn("if("+Vn+")"+lr+".bindBuffer(34963,"+Vn+".buffer.buffer);")):(Vn=Gn.def(),Gn(Vn,"=",Fr,".","elements",";","if(",Vn,"){",lr,".bindBuffer(",34963,",",Vn,".buffer.buffer);}","else if(",or.vao,".currentVAO){",Vn,"=",xt.shared.elements+".getElements("+or.vao,".currentVAO.elements);",es?"":"if("+Vn+")"+lr+".bindBuffer(34963,"+Vn+".buffer.buffer);","}")),Vn}(),Eo=i("primitive"),Mo=i("offset"),Oo=function(){var Vn=Hr.count,Gn=Ct;return Vn?((Vn.contextDep&&$t.contextDynamic||Vn.propDep)&&(Gn=_t),Vn=Vn.append(xt,Gn)):Vn=Gn.def(Fr,".","count"),Vn}();if("number"==typeof Oo){if(0===Oo)return}else _t("if(",Oo,"){"),_t.exit("}");pi&&(Vn=i("instances"),Gn=xt.instancing);var Ro=xo+".type",Io=Hr.elements&&z(Hr.elements)&&!Hr.vaoActive;pi&&("number"!=typeof Vn||0<=Vn)?"string"==typeof Vn?(_t("if(",Vn,">0){"),a(),_t("}else if(",Vn,"<0){"),f(),_t("}")):a():f()}function q(xt,Ct,_t,$t,Vn){return Vn=(Ct=x()).proc("body",Vn),pi&&(Ct.instancing=Vn.def(Ct.shared.extensions,".angle_instanced_arrays")),xt(Ct,Vn,_t,$t),Ct.compile().body}function Q(xt,Ct,_t,$t){L(xt,Ct),_t.useVAO?_t.drawVAO?Ct(xt.shared.vao,".setVAO(",_t.drawVAO.append(xt,Ct),");"):Ct(xt.shared.vao,".setVAO(",xt.shared.vao,".targetVAO);"):(Ct(xt.shared.vao,".setVAO(null);"),H(xt,Ct,_t,$t.attributes,(function(){return!0}))),U(xt,Ct,_t,$t.uniforms,(function(){return!0}),!1),N(xt,Ct,Ct,_t)}function G(xt,Ct,_t,$t){function i(){return!0}xt.batchId="a1",L(xt,Ct),H(xt,Ct,_t,$t.attributes,i),U(xt,Ct,_t,$t.uniforms,i,!1),N(xt,Ct,Ct,_t)}function Y(xt,Ct,_t,$t){function i(xt){return xt.contextDep&&Vn||xt.propDep}function a(xt){return!i(xt)}L(xt,Ct);var Vn=_t.contextDep,Gn=Ct.def(),or=Ct.def();xt.shared.props=or,xt.batchId=Gn;var lr=xt.scope(),Fr=xt.scope();Ct(lr.entry,"for(",Gn,"=0;",Gn,"<","a1",";++",Gn,"){",or,"=","a0","[",Gn,"];",Fr,"}",lr.exit),_t.needsContext&&E(xt,Fr,_t.context),_t.needsFramebuffer&&D(xt,Fr,_t.framebuffer),S(xt,Fr,_t.state,i),_t.profile&&i(_t.profile)&&M(xt,Fr,_t,!1,!0),$t?(_t.useVAO?_t.drawVAO?i(_t.drawVAO)?Fr(xt.shared.vao,".setVAO(",_t.drawVAO.append(xt,Fr),");"):lr(xt.shared.vao,".setVAO(",_t.drawVAO.append(xt,lr),");"):lr(xt.shared.vao,".setVAO(",xt.shared.vao,".targetVAO);"):(lr(xt.shared.vao,".setVAO(null);"),H(xt,lr,_t,$t.attributes,a),H(xt,Fr,_t,$t.attributes,i)),U(xt,lr,_t,$t.uniforms,a,!1),U(xt,Fr,_t,$t.uniforms,i,!0),N(xt,lr,Fr,_t)):(Ct=xt.global.def("{}"),$t=_t.shader.progVar.append(xt,Fr),or=Fr.def($t,".id"),lr=Fr.def(Ct,"[",or,"]"),Fr(xt.shared.gl,".useProgram(",$t,".program);","if(!",lr,"){",lr,"=",Ct,"[",or,"]=",xt.link((function(Ct){return q(G,xt,_t,Ct,2)})),"(",$t,");}",lr,".call(this,a0[",Gn,"],",Gn,");"))}function X(xt,Ct){function n(_t){var Gn=Ct.shader[_t];Gn&&$t.set(Vn.shader,"."+_t,Gn.append(xt,$t))}var $t=xt.proc("scope",3);xt.batchId="a2";var Vn=xt.shared,Gn=Vn.current;E(xt,$t,Ct.context),Ct.framebuffer&&Ct.framebuffer.append(xt,$t),F(Object.keys(Ct.state)).forEach((function(_t){var Gn=Ct.state[_t].append(xt,$t);b(Gn)?Gn.forEach((function(Ct,Vn){$t.set(xt.next[_t],"["+Vn+"]",Ct)})):$t.set(Vn.next,"."+_t,Gn)})),M(xt,$t,Ct,!0,!0),["elements","offset","count","instances","primitive"].forEach((function(_t){var Gn=Ct.draw[_t];Gn&&$t.set(Vn.draw,"."+_t,""+Gn.append(xt,$t))})),Object.keys(Ct.uniforms).forEach((function(Gn){var or=Ct.uniforms[Gn].append(xt,$t);Array.isArray(or)&&(or="["+or.join()+"]"),$t.set(Vn.uniforms,"["+_t.id(Gn)+"]",or)})),Object.keys(Ct.attributes).forEach((function(_t){var Vn=Ct.attributes[_t].append(xt,$t),Gn=xt.scopeAttrib(_t);Object.keys(new Ho).forEach((function(xt){$t.set(Gn,"."+xt,Vn[xt])}))})),Ct.scopeVAO&&$t.set(Vn.vao,".targetVAO",Ct.scopeVAO.append(xt,$t)),n("vert"),n("frag"),0<Object.keys(Ct.state).length&&($t(Gn,".dirty=true;"),$t.exit(Gn,".dirty=true;")),$t("a1(",xt.shared.context,",a0,",xt.batchId,");")}function J(xt,_t,$t){var Vn=_t.static[$t];if(Vn&&function(xt){if("object"==typeof xt&&!b(xt)){for(var _t=Object.keys(xt),$t=0;$t<_t.length;++$t)if(Ct.isDynamic(xt[_t[$t]]))return!0;return!1}}(Vn)){var Gn=xt.global,or=Object.keys(Vn),lr=!1,Fr=!1,Hr=!1,xo=xt.global.def("{}");or.forEach((function(_t){var $t=Vn[_t];if(Ct.isDynamic($t))"function"==typeof $t&&($t=Vn[_t]=Ct.unbox($t)),_t=P($t,null),lr=lr||_t.thisDep,Hr=Hr||_t.propDep,Fr=Fr||_t.contextDep;else{switch(Gn(xo,".",_t,"="),typeof $t){case"number":Gn($t);break;case"string":Gn('"',$t,'"');break;case"object":Array.isArray($t)&&Gn("[",$t.join(),"]");break;default:Gn(xt.link($t))}Gn(";")}})),_t.dynamic[$t]=new Ct.DynamicVariable(4,{thisDep:lr,contextDep:Fr,propDep:Hr,ref:xo,append:function(xt,_t){or.forEach((function($t){var Gn=Vn[$t];Ct.isDynamic(Gn)&&(Gn=xt.invoke(_t,Gn),_t(xo,".",$t,"=",Gn,";"))}))}}),delete _t.static[$t]}}var Ho=Eo.Record,Qo={add:32774,subtract:32778,"reverse subtract":32779};$t.ext_blend_minmax&&(Qo.min=32775,Qo.max=32776);var pi=$t.angle_instanced_arrays,gi=$t.webgl_draw_buffers,es=$t.oes_vertex_array_object,ts={dirty:!0,profile:zo.profile},ns={},rs=[],os={},is={};y("dither",3024),y("blend.enable",3042),v("blend.color","blendColor",[0,0,0,0]),v("blend.equation","blendEquationSeparate",[32774,32774]),v("blend.func","blendFuncSeparate",[1,0,1,0]),y("depth.enable",2929,!0),v("depth.func","depthFunc",513),v("depth.range","depthRange",[0,1]),v("depth.mask","depthMask",!0),v("colorMask","colorMask",[!0,!0,!0,!0]),y("cull.enable",2884),v("cull.face","cullFace",1029),v("frontFace","frontFace",2305),v("lineWidth","lineWidth",1),y("polygonOffset.enable",32823),v("polygonOffset.offset","polygonOffset",[0,0]),y("sample.alpha",32926),y("sample.enable",32928),v("sample.coverage","sampleCoverage",[1,!1]),y("stencil.enable",2960),v("stencil.mask","stencilMask",-1),v("stencil.func","stencilFunc",[519,0,-1]),v("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),v("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),y("scissor.enable",3089),v("scissor.box","scissor",[0,0,xt.drawingBufferWidth,xt.drawingBufferHeight]),v("viewport","viewport",[0,0,xt.drawingBufferWidth,xt.drawingBufferHeight]);var ss={gl:xt,context:Io,strings:_t,next:ns,current:ts,draw:Ro,elements:or,buffer:Gn,shader:Oo,attributes:Eo.state,vao:Eo,uniforms:xo,framebuffer:Hr,extensions:$t,timer:Bo,isBufferArgs:V},as={primTypes:Mo,compareFuncs:fs,blendFuncs:us,blendEquations:Qo,stencilOps:hs,glTypes:lr,orientationType:ps};gi&&(as.backBuffer=[1029],as.drawBuffer=a(Vn.maxDrawbuffers,(function(xt){return 0===xt?[0]:a(xt,(function(xt){return 36064+xt}))})));var ms=0;return{next:ns,current:ts,procs:function(){var xt=x(),Ct=xt.proc("poll"),_t=xt.proc("refresh"),Gn=xt.block();Ct(Gn),_t(Gn);var or,lr=xt.shared,Fr=lr.gl,Hr=lr.next,xo=lr.current;Gn(xo,".dirty=false;"),D(xt,Ct),D(xt,_t,null,!0),pi&&(or=xt.link(pi)),$t.oes_vertex_array_object&&_t(xt.link($t.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Eo=0;Eo<Vn.maxAttributes;++Eo){var Mo=_t.def(lr.attributes,"[",Eo,"]"),Oo=xt.cond(Mo,".buffer");Oo.then(Fr,".enableVertexAttribArray(",Eo,");",Fr,".bindBuffer(",34962,",",Mo,".buffer.buffer);",Fr,".vertexAttribPointer(",Eo,",",Mo,".size,",Mo,".type,",Mo,".normalized,",Mo,".stride,",Mo,".offset);").else(Fr,".disableVertexAttribArray(",Eo,");",Fr,".vertexAttrib4f(",Eo,",",Mo,".x,",Mo,".y,",Mo,".z,",Mo,".w);",Mo,".buffer=null;"),_t(Oo),pi&&_t(or,".vertexAttribDivisorANGLE(",Eo,",",Mo,".divisor);")}return _t(xt.shared.vao,".currentVAO=null;",xt.shared.vao,".setVAO(",xt.shared.vao,".targetVAO);"),Object.keys(os).forEach((function($t){var Vn=os[$t],or=Gn.def(Hr,".",$t),lr=xt.block();lr("if(",or,"){",Fr,".enable(",Vn,")}else{",Fr,".disable(",Vn,")}",xo,".",$t,"=",or,";"),_t(lr),Ct("if(",or,"!==",xo,".",$t,"){",lr,"}")})),Object.keys(is).forEach((function($t){var Vn,or,lr=is[$t],Eo=ts[$t],Mo=xt.block();Mo(Fr,".",lr,"("),b(Eo)?(lr=Eo.length,Vn=xt.global.def(Hr,".",$t),or=xt.global.def(xo,".",$t),Mo(a(lr,(function(xt){return Vn+"["+xt+"]"})),");",a(lr,(function(xt){return or+"["+xt+"]="+Vn+"["+xt+"];"})).join("")),Ct("if(",a(lr,(function(xt){return Vn+"["+xt+"]!=="+or+"["+xt+"]"})).join("||"),"){",Mo,"}")):(Vn=Gn.def(Hr,".",$t),or=Gn.def(xo,".",$t),Mo(Vn,");",xo,".",$t,"=",Vn,";"),Ct("if(",Vn,"!==",or,"){",Mo,"}")),_t(Mo)})),xt.compile()}(),compile:function(xt,Ct,_t,$t,Vn){var Gn=x();Gn.stats=Gn.link(Vn),Object.keys(Ct.static).forEach((function(xt){J(Gn,Ct,xt)})),cs.forEach((function(Ct){J(Gn,xt,Ct)}));var or=O(xt,Ct,_t,$t);return function(xt,Ct){var _t=xt.proc("draw",1);L(xt,_t),E(xt,_t,Ct.context),D(xt,_t,Ct.framebuffer),T(xt,_t,Ct),S(xt,_t,Ct.state),M(xt,_t,Ct,!1,!0);var $t=Ct.shader.progVar.append(xt,_t);if(_t(xt.shared.gl,".useProgram(",$t,".program);"),Ct.shader.program)Q(xt,_t,Ct,Ct.shader.program);else{_t(xt.shared.vao,".setVAO(null);");var Vn=xt.global.def("{}"),Gn=_t.def($t,".id"),or=_t.def(Vn,"[",Gn,"]");_t(xt.cond(or).then(or,".call(this,a0);").else(or,"=",Vn,"[",Gn,"]=",xt.link((function(_t){return q(Q,xt,Ct,_t,1)})),"(",$t,");",or,".call(this,a0);"))}0<Object.keys(Ct.state).length&&_t(xt.shared.current,".dirty=true;"),xt.shared.vao&&_t(xt.shared.vao,".setVAO(null);")}(Gn,or),X(Gn,or),function(xt,Ct){function r(xt){return xt.contextDep&&$t||xt.propDep}var _t=xt.proc("batch",2);xt.batchId="0",L(xt,_t);var $t=!1,Vn=!0;Object.keys(Ct.context).forEach((function(xt){$t=$t||Ct.context[xt].propDep})),$t||(E(xt,_t,Ct.context),Vn=!1);var Gn=!1;if((or=Ct.framebuffer)?(or.propDep?$t=Gn=!0:or.contextDep&&$t&&(Gn=!0),Gn||D(xt,_t,or)):D(xt,_t,null),Ct.state.viewport&&Ct.state.viewport.propDep&&($t=!0),T(xt,_t,Ct),S(xt,_t,Ct.state,(function(xt){return!r(xt)})),Ct.profile&&r(Ct.profile)||M(xt,_t,Ct,!1,"a1"),Ct.contextDep=$t,Ct.needsContext=Vn,Ct.needsFramebuffer=Gn,(Vn=Ct.shader.progVar).contextDep&&$t||Vn.propDep)Y(xt,_t,Ct,null);else if(Vn=Vn.append(xt,_t),_t(xt.shared.gl,".useProgram(",Vn,".program);"),Ct.shader.program)Y(xt,_t,Ct,Ct.shader.program);else{_t(xt.shared.vao,".setVAO(null);");var or=xt.global.def("{}"),lr=(Gn=_t.def(Vn,".id"),_t.def(or,"[",Gn,"]"));_t(xt.cond(lr).then(lr,".call(this,a0,a1);").else(lr,"=",or,"[",Gn,"]=",xt.link((function(_t){return q(Y,xt,Ct,_t,2)})),"(",Vn,");",lr,".call(this,a0,a1);"))}0<Object.keys(Ct.state).length&&_t(xt.shared.current,".dirty=true;"),xt.shared.vao&&_t(xt.shared.vao,".setVAO(null);")}(Gn,or),R(Gn.compile(),{destroy:function(){or.shader.program.destroy()}})}}}function M(xt,Ct){for(var _t=0;_t<xt.length;++_t)if(xt[_t]===Ct)return _t;return-1}var R=function(xt,Ct){for(var _t=Object.keys(Ct),$t=0;$t<_t.length;++$t)xt[_t[$t]]=Ct[_t[$t]];return xt},xt=0,Ct={DynamicVariable:e,define:function(xt,Ct){return new e(xt,t(Ct+""))},isDynamic:function(xt){return"function"==typeof xt&&!xt._reglType||xt instanceof e},unbox:function t(xt,Ct){return"function"==typeof xt?new e(0,xt):"number"==typeof xt||"boolean"==typeof xt?new e(5,xt):Array.isArray(xt)?new e(6,xt.map((function(xt,_t){return t(xt,Ct+"["+_t+"]")}))):xt instanceof e?xt:void 0},accessor:t},_t={next:"function"==typeof requestAnimationFrame?function(xt){return requestAnimationFrame(xt)}:function(xt){return setTimeout(xt,16)},cancel:"function"==typeof cancelAnimationFrame?function(xt){return cancelAnimationFrame(xt)}:clearTimeout},$t="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Vn=o();Vn.zero=o();var Q=function(xt,Ct){var _t=1;Ct.ext_texture_filter_anisotropic&&(_t=xt.getParameter(34047));var $t=1,Gn=1;Ct.webgl_draw_buffers&&($t=xt.getParameter(34852),Gn=xt.getParameter(36063));var or=!!Ct.oes_texture_float;if(or){or=xt.createTexture(),xt.bindTexture(3553,or),xt.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var lr=xt.createFramebuffer();if(xt.bindFramebuffer(36160,lr),xt.framebufferTexture2D(36160,36064,3553,or,0),xt.bindTexture(3553,null),36053!==xt.checkFramebufferStatus(36160))or=!1;else{xt.viewport(0,0,1,1),xt.clearColor(1,0,0,1),xt.clear(16384);var Fr=Vn.allocType(5126,4);xt.readPixels(0,0,1,1,6408,5126,Fr),xt.getError()?or=!1:(xt.deleteFramebuffer(lr),xt.deleteTexture(or),or=1===Fr[0]),Vn.freeType(Fr)}}return Fr=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Fr=xt.createTexture(),lr=Vn.allocType(5121,36),xt.activeTexture(33984),xt.bindTexture(34067,Fr),xt.texImage2D(34069,0,6408,3,3,0,6408,5121,lr),Vn.freeType(lr),xt.bindTexture(34067,null),xt.deleteTexture(Fr),Fr=!xt.getError()),{colorBits:[xt.getParameter(3410),xt.getParameter(3411),xt.getParameter(3412),xt.getParameter(3413)],depthBits:xt.getParameter(3414),stencilBits:xt.getParameter(3415),subpixelBits:xt.getParameter(3408),extensions:Object.keys(Ct).filter((function(xt){return!!Ct[xt]})),maxAnisotropic:_t,maxDrawbuffers:$t,maxColorAttachments:Gn,pointSizeDims:xt.getParameter(33901),lineWidthDims:xt.getParameter(33902),maxViewportDims:xt.getParameter(3386),maxCombinedTextureUnits:xt.getParameter(35661),maxCubeMapSize:xt.getParameter(34076),maxRenderbufferSize:xt.getParameter(34024),maxTextureUnits:xt.getParameter(34930),maxTextureSize:xt.getParameter(3379),maxAttributes:xt.getParameter(34921),maxVertexUniforms:xt.getParameter(36347),maxVertexTextureUnits:xt.getParameter(35660),maxVaryingVectors:xt.getParameter(36348),maxFragmentUniforms:xt.getParameter(36349),glsl:xt.getParameter(35724),renderer:xt.getParameter(7937),vendor:xt.getParameter(7936),version:xt.getParameter(7938),readFloat:or,npotTextureCube:Fr}},G=function(xt){return xt instanceof Uint8Array||xt instanceof Uint16Array||xt instanceof Uint32Array||xt instanceof Int8Array||xt instanceof Int16Array||xt instanceof Int32Array||xt instanceof Float32Array||xt instanceof Float64Array||xt instanceof Uint8ClampedArray},Y=function(xt){return Object.keys(xt).map((function(Ct){return xt[Ct]}))},Gn={shape:function(xt){for(var Ct=[];xt.length;xt=xt[0])Ct.push(xt.length);return Ct},flatten:function(xt,Ct,_t,$t){var Gn=1;if(Ct.length)for(var or=0;or<Ct.length;++or)Gn*=Ct[or];else Gn=0;switch(_t=$t||Vn.allocType(_t,Gn),Ct.length){case 0:break;case 1:for($t=Ct[0],Ct=0;Ct<$t;++Ct)_t[Ct]=xt[Ct];break;case 2:for($t=Ct[0],Ct=Ct[1],or=Gn=0;or<$t;++or)for(var lr=xt[or],Fr=0;Fr<Ct;++Fr)_t[Gn++]=lr[Fr];break;case 3:s(xt,Ct[0],Ct[1],Ct[2],_t,0);break;default:!function e(xt,Ct,_t,$t,Vn){for(var Gn=1,or=_t+1;or<Ct.length;++or)Gn*=Ct[or];var lr=Ct[_t];if(4==Ct.length-_t){var Fr=Ct[_t+1],Hr=Ct[_t+2];for(Ct=Ct[_t+3],or=0;or<lr;++or)s(xt[or],Fr,Hr,Ct,$t,Vn),Vn+=Gn}else for(or=0;or<lr;++or)e(xt[or],Ct,_t+1,$t,Vn),Vn+=Gn}(xt,Ct,0,_t,0)}return _t}},or={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},lr={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Fr={dynamic:35048,stream:35040,static:35044},Hr=Gn.flatten,xo=Gn.shape,Eo=[];Eo[5120]=1,Eo[5122]=2,Eo[5124]=4,Eo[5121]=1,Eo[5123]=2,Eo[5125]=4,Eo[5126]=4;var Mo={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Oo=new Float32Array(1),Ro=new Uint32Array(Oo.buffer),Io=[9984,9986,9985,9987],Bo=[0,6409,6410,6407,6408],zo={};zo[6409]=zo[6406]=zo[6402]=1,zo[34041]=zo[6410]=2,zo[6407]=zo[35904]=3,zo[6408]=zo[35906]=4;var Ho=g("HTMLCanvasElement"),Qo=g("OffscreenCanvas"),pi=g("CanvasRenderingContext2D"),gi=g("ImageBitmap"),es=g("HTMLImageElement"),ts=g("HTMLVideoElement"),ns=Object.keys(or).concat([Ho,Qo,pi,gi,es,ts]),rs=[];rs[5121]=1,rs[5126]=4,rs[36193]=2,rs[5123]=2,rs[5125]=4;var os=[];os[32854]=2,os[32855]=2,os[36194]=2,os[34041]=4,os[33776]=.5,os[33777]=.5,os[33778]=1,os[33779]=1,os[35986]=.5,os[35987]=1,os[34798]=1,os[35840]=.5,os[35841]=.25,os[35842]=.5,os[35843]=.25,os[36196]=.5;var is=[];is[32854]=2,is[32855]=2,is[36194]=2,is[33189]=2,is[36168]=1,is[34041]=4,is[35907]=4,is[34836]=16,is[34842]=8,is[34843]=6;var ye=function(xt,Ct,_t,$t,Vn){function a(xt){this.id=lr++,this.refCount=1,this.renderbuffer=xt,this.format=32854,this.height=this.width=0,Vn.profile&&(this.stats={size:0})}function f(Ct){var _t=Ct.renderbuffer;xt.bindRenderbuffer(36161,null),xt.deleteRenderbuffer(_t),Ct.renderbuffer=null,Ct.refCount=0,delete Fr[Ct.id],$t.renderbufferCount--}var Gn={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ct.ext_srgb&&(Gn.srgba=35907),Ct.ext_color_buffer_half_float&&(Gn.rgba16f=34842,Gn.rgb16f=34843),Ct.webgl_color_buffer_float&&(Gn.rgba32f=34836);var or=[];Object.keys(Gn).forEach((function(xt){or[Gn[xt]]=xt}));var lr=0,Fr={};return a.prototype.decRef=function(){0>=--this.refCount&&f(this)},Vn.profile&&($t.getTotalRenderbufferSize=function(){var xt=0;return Object.keys(Fr).forEach((function(Ct){xt+=Fr[Ct].stats.size})),xt}),{create:function(Ct,_t){function f(Ct,_t){var $t=0,Fr=0,Hr=32854;if("object"==typeof Ct&&Ct?("shape"in Ct?($t=0|(Fr=Ct.shape)[0],Fr=0|Fr[1]):("radius"in Ct&&($t=Fr=0|Ct.radius),"width"in Ct&&($t=0|Ct.width),"height"in Ct&&(Fr=0|Ct.height)),"format"in Ct&&(Hr=Gn[Ct.format])):"number"==typeof Ct?($t=0|Ct,Fr="number"==typeof _t?0|_t:$t):Ct||($t=Fr=1),$t!==lr.width||Fr!==lr.height||Hr!==lr.format)return f.width=lr.width=$t,f.height=lr.height=Fr,lr.format=Hr,xt.bindRenderbuffer(36161,lr.renderbuffer),xt.renderbufferStorage(36161,Hr,$t,Fr),Vn.profile&&(lr.stats.size=is[lr.format]*lr.width*lr.height),f.format=or[lr.format],f}var lr=new a(xt.createRenderbuffer());return Fr[lr.id]=lr,$t.renderbufferCount++,f(Ct,_t),f.resize=function(Ct,_t){var $t=0|Ct,Gn=0|_t||$t;return $t===lr.width&&Gn===lr.height||(f.width=lr.width=$t,f.height=lr.height=Gn,xt.bindRenderbuffer(36161,lr.renderbuffer),xt.renderbufferStorage(36161,lr.format,$t,Gn),Vn.profile&&(lr.stats.size=is[lr.format]*lr.width*lr.height)),f},f._reglType="renderbuffer",f._renderbuffer=lr,Vn.profile&&(f.stats=lr.stats),f.destroy=function(){lr.decRef()},f},clear:function(){Y(Fr).forEach(f)},restore:function(){Y(Fr).forEach((function(Ct){Ct.renderbuffer=xt.createRenderbuffer(),xt.bindRenderbuffer(36161,Ct.renderbuffer),xt.renderbufferStorage(36161,Ct.format,Ct.width,Ct.height)})),xt.bindRenderbuffer(36161,null)}}},ss=[];ss[6408]=4,ss[6407]=3;var as=[];as[5121]=1,as[5126]=4,as[36193]=2;var ls=["x","y","z","w"],cs="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),us={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},fs={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},hs={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ps={cw:2304,ccw:2305},ds=new B(!1,!1,!1,(function(){}));return function(xt){function t(){if(0===os.length)xo&&xo.update(),ls=null;else{ls=_t.next(t),l();for(var xt=os.length-1;0<=xt;--xt){var Ct=os[xt];Ct&&Ct(Ro,null,0)}Vn.flush(),xo&&xo.update()}}function r(){!ls&&0<os.length&&(ls=_t.next(t))}function n(){ls&&(_t.cancel(t),ls=null)}function a(xt){xt.preventDefault(),n(),is.forEach((function(xt){xt()}))}function f(xt){Vn.getError(),or.restore(),Qo.restore(),Bo.restore(),pi.restore(),gi.restore(),es.restore(),Ho.restore(),xo&&xo.restore(),ts.procs.refresh(),r(),ss.forEach((function(xt){xt()}))}function o(xt){function t(xt,_t){var $t={},Vn={};return Object.keys(xt).forEach((function(Gn){var or=xt[Gn];if(Ct.isDynamic(or))Vn[Gn]=Ct.unbox(or,Gn);else{if(_t&&Array.isArray(or))for(var lr=0;lr<or.length;++lr)if(Ct.isDynamic(or[lr]))return void(Vn[Gn]=Ct.unbox(or,Gn));$t[Gn]=or}})),{dynamic:Vn,static:$t}}var _t=t(xt.context||{},!0),$t=t(xt.uniforms||{},!0),Vn=t(xt.attributes||{},!1);xt=t(function(xt){function t(xt){if(xt in Ct){var _t=Ct[xt];delete Ct[xt],Object.keys(_t).forEach((function($t){Ct[xt+"."+$t]=_t[$t]}))}}var Ct=R({},xt);return delete Ct.uniforms,delete Ct.attributes,delete Ct.context,delete Ct.vao,"stencil"in Ct&&Ct.stencil.op&&(Ct.stencil.opBack=Ct.stencil.opFront=Ct.stencil.op,delete Ct.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),"vao"in xt&&(Ct.vao=xt.vao),Ct}(xt),!1);var Gn={gpuTime:0,cpuTime:0,count:0},or=ts.compile(xt,Vn,$t,_t,Gn),lr=or.draw,Fr=or.batch,Hr=or.scope,xo=[];return R((function(xt,Ct){var _t;if("function"==typeof xt)return Hr.call(this,null,xt,0);if("function"==typeof Ct)if("number"==typeof xt)for(_t=0;_t<xt;++_t)Hr.call(this,null,Ct,_t);else{if(!Array.isArray(xt))return Hr.call(this,xt,Ct,0);for(_t=0;_t<xt.length;++_t)Hr.call(this,xt[_t],Ct,_t)}else if("number"==typeof xt){if(0<xt)return Fr.call(this,function(xt){for(;xo.length<xt;)xo.push(null);return xo}(0|xt),0|xt)}else{if(!Array.isArray(xt))return lr.call(this,xt);if(xt.length)return Fr.call(this,xt,xt.length)}}),{stats:Gn,destroy:function(){or.destroy()}})}function u(xt,Ct){var _t=0;ts.procs.poll();var $t=Ct.color;$t&&(Vn.clearColor(+$t[0]||0,+$t[1]||0,+$t[2]||0,+$t[3]||0),_t|=16384),"depth"in Ct&&(Vn.clearDepth(+Ct.depth),_t|=256),"stencil"in Ct&&(Vn.clearStencil(0|Ct.stencil),_t|=1024),Vn.clear(_t)}function s(xt){return os.push(xt),r(),{cancel:function(){var Ct=M(os,xt);os[Ct]=function e(){var xt=M(os,e);os[xt]=os[os.length-1],--os.length,0>=os.length&&n()}}}}function c(){var xt=ns.viewport,Ct=ns.scissor_box;xt[0]=xt[1]=Ct[0]=Ct[1]=0,Ro.viewportWidth=Ro.framebufferWidth=Ro.drawingBufferWidth=xt[2]=Ct[2]=Vn.drawingBufferWidth,Ro.viewportHeight=Ro.framebufferHeight=Ro.drawingBufferHeight=xt[3]=Ct[3]=Vn.drawingBufferHeight}function l(){Ro.tick+=1,Ro.time=m(),c(),ts.procs.poll()}function p(){pi.refresh(),c(),ts.procs.refresh(),xo&&xo.update()}function m(){return($t()-Eo)/1e3}if(!(xt=i(xt)))return null;var Vn=xt.gl,Gn=Vn.getContextAttributes();Vn.isContextLost();var or=function(xt,Ct){function r(Ct){var $t;Ct=Ct.toLowerCase();try{$t=_t[Ct]=xt.getExtension(Ct)}catch(xt){}return!!$t}for(var _t={},$t=0;$t<Ct.extensions.length;++$t){var Vn=Ct.extensions[$t];if(!r(Vn))return Ct.onDestroy(),Ct.onDone('"'+Vn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Ct.optionalExtensions.forEach(r),{extensions:_t,restore:function(){Object.keys(_t).forEach((function(xt){if(_t[xt]&&!r(xt))throw Error("(regl): error restoring extension "+xt)}))}}}(Vn,xt);if(!or)return null;var lr=function(){var xt={"":0},Ct=[""];return{id:function(_t){var $t=xt[_t];return $t||($t=xt[_t]=Ct.length,Ct.push(_t),$t)},str:function(xt){return Ct[xt]}}}(),Fr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Hr=or.extensions,xo=function(xt,Ct){function r(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function n(xt,Ct,_t){var $t=Vn.pop()||new r;$t.startQueryIndex=xt,$t.endQueryIndex=Ct,$t.sum=0,$t.stats=_t,Gn.push($t)}if(!Ct.ext_disjoint_timer_query)return null;var _t=[],$t=[],Vn=[],Gn=[],or=[],lr=[];return{beginQuery:function(xt){var Vn=_t.pop()||Ct.ext_disjoint_timer_query.createQueryEXT();Ct.ext_disjoint_timer_query.beginQueryEXT(35007,Vn),$t.push(Vn),n($t.length-1,$t.length,xt)},endQuery:function(){Ct.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:n,update:function(){var xt,Fr;if(0!==(xt=$t.length)){lr.length=Math.max(lr.length,xt+1),or.length=Math.max(or.length,xt+1),or[0]=0;var Hr=lr[0]=0;for(Fr=xt=0;Fr<$t.length;++Fr){var xo=$t[Fr];Ct.ext_disjoint_timer_query.getQueryObjectEXT(xo,34919)?(Hr+=Ct.ext_disjoint_timer_query.getQueryObjectEXT(xo,34918),_t.push(xo)):$t[xt++]=xo,or[Fr+1]=Hr,lr[Fr+1]=xt}for($t.length=xt,Fr=xt=0;Fr<Gn.length;++Fr){var Eo=(Hr=Gn[Fr]).startQueryIndex;xo=Hr.endQueryIndex,Hr.sum+=or[xo]-or[Eo],Eo=lr[Eo],(xo=lr[xo])===Eo?(Hr.stats.gpuTime+=Hr.sum/1e6,Vn.push(Hr)):(Hr.startQueryIndex=Eo,Hr.endQueryIndex=xo,Gn[xt++]=Hr)}Gn.length=xt}},getNumPendingQueries:function(){return $t.length},clear:function(){_t.push.apply(_t,$t);for(var xt=0;xt<_t.length;xt++)Ct.ext_disjoint_timer_query.deleteQueryEXT(_t[xt]);$t.length=0,_t.length=0},restore:function(){$t.length=0,_t.length=0}}}(0,Hr),Eo=$t(),Mo=Vn.drawingBufferWidth,Oo=Vn.drawingBufferHeight,Ro={tick:0,time:0,viewportWidth:Mo,viewportHeight:Oo,framebufferWidth:Mo,framebufferHeight:Oo,drawingBufferWidth:Mo,drawingBufferHeight:Oo,pixelRatio:xt.pixelRatio},Io=(Mo={elements:null,primitive:4,count:-1,offset:0,instances:-1},Q(Vn,Hr)),Bo=d(Vn,Fr,xt,(function(xt){return Ho.destroyBuffer(xt)})),zo=h(Vn,Hr,Bo,Fr),Ho=D(Vn,Hr,Io,Fr,Bo,zo,Mo),Qo=T(Vn,lr,Fr,xt),pi=_(Vn,Hr,Io,(function(){ts.procs.poll()}),Ro,Fr,xt),gi=ye(Vn,Hr,0,Fr,xt),es=O(Vn,Hr,Io,pi,gi,Fr),ts=L(Vn,lr,Hr,Io,Bo,zo,0,es,{},Ho,Qo,Mo,Ro,xo,xt),ns=(lr=S(Vn,es,ts.procs.poll,Ro),ts.next),rs=Vn.canvas,os=[],is=[],ss=[],as=[xt.onDestroy],ls=null;rs&&(rs.addEventListener("webglcontextlost",a,!1),rs.addEventListener("webglcontextrestored",f,!1));var cs=es.setFBO=o({framebuffer:Ct.define.call(null,1,"framebuffer")});return p(),Gn=R(o,{clear:function(xt){if("framebuffer"in xt)if(xt.framebuffer&&"framebufferCube"===xt.framebuffer_reglType)for(var Ct=0;6>Ct;++Ct)cs(R({framebuffer:xt.framebuffer.faces[Ct]},xt),u);else cs(xt,u);else u(0,xt)},prop:Ct.define.bind(null,1),context:Ct.define.bind(null,2),this:Ct.define.bind(null,3),draw:o({}),buffer:function(xt){return Bo.create(xt,34962,!1,!1)},elements:function(xt){return zo.create(xt,!1)},texture:pi.create2D,cube:pi.createCube,renderbuffer:gi.create,framebuffer:es.create,framebufferCube:es.createCube,vao:Ho.createVAO,attributes:Gn,frame:s,on:function(xt,Ct){var _t;switch(xt){case"frame":return s(Ct);case"lost":_t=is;break;case"restore":_t=ss;break;case"destroy":_t=as}return _t.push(Ct),{cancel:function(){for(var xt=0;xt<_t.length;++xt)if(_t[xt]===Ct){_t[xt]=_t[_t.length-1],_t.pop();break}}}},limits:Io,hasExtension:function(xt){return 0<=Io.extensions.indexOf(xt.toLowerCase())},read:lr,destroy:function(){os.length=0,n(),rs&&(rs.removeEventListener("webglcontextlost",a),rs.removeEventListener("webglcontextrestored",f)),Qo.clear(),es.clear(),gi.clear(),Ho.clear(),pi.clear(),zo.clear(),Bo.clear(),xo&&xo.clear(),as.forEach((function(xt){xt()}))},_gl:Vn,_refresh:p,poll:function(){l(),xo&&xo.update()},now:m,stats:Fr}),xt.onDone(null,Gn),Gn}},"object"==typeof _t&&void 0!==Ct?Ct.exports=Vn():$t.createREGL=Vn()},{}],609:[function(xt,Ct,_t){Ct.exports=xt=>{if(0===xt.length)return[[0,0,0],[0,0,0]];const Ct=Array.isArray(xt)&&Array.isArray(xt[0]),_t=Ct?xt[0].length:3,$t=new Array(_t),Vn=new Array(_t);for(let xt=0;xt<_t;xt+=1)$t[xt]=1/0,Vn[xt]=-1/0;if(Ct)xt.forEach((xt=>{for(let Gn=0;Gn<_t;Gn+=1){const _t=Ct?xt[Gn]:xt;Vn[Gn]=_t>Vn[Gn]?_t:Vn[Gn],$t[Gn]=_t<$t[Gn]?_t:$t[Gn]}}));else for(let Ct=0;Ct<xt.length;Ct+=_t)for(let Gn=0;Gn<_t;Gn+=1){const _t=xt[Gn+Ct];Vn[Gn]=_t>Vn[Gn]?_t:Vn[Gn],$t[Gn]=_t<$t[Gn]?_t:$t[Gn]}return[$t,Vn]}},{}],610:[function(xt,Ct,_t){const $t=xt("gl-vec3"),{flatten:Vn}=xt("@jscad/array-utils"),Gn=xt("./boundingBox");Ct.exports=(...xt)=>{let Ct;(xt=Vn(xt)).forEach((xt=>{let _t=Gn(xt.positions);_t=_t.map((Ct=>$t.transformMat4(Ct,Ct,xt.transforms))),Ct?($t.min(Ct[0],Ct[0],_t[0]),$t.max(Ct[1],Ct[1],_t[1])):Ct=_t}));const _t=$t.min($t.create(),Ct[1],Ct[0]),or=$t.max($t.create(),Ct[1],Ct[0]),lr=$t.subtract($t.create(),or,_t);let Fr=$t.scale($t.create(),lr,.5);return Fr=$t.add(Fr,_t,Fr),{dia:$t.distance(Fr,or),center:[...Fr],min:[..._t],max:[...or],size:[...lr]}}},{"./boundingBox":609,"@jscad/array-utils":525,"gl-vec3":580}],611:[function(xt,Ct,_t){const $t=xt("gl-vec3"),Vn=xt("gl-mat4");Ct.exports={toPerspectiveView:({camera:xt})=>{const Ct=$t.distance(xt.position,xt.target),_t=[Ct,Ct,Ct];return{view:Vn.lookAt(Vn.create(),_t,xt.target,xt.up),position:_t}},toPresetView:(xt,{camera:Ct})=>{const _t=$t.distance(Ct.position,Ct.target),Gn=$t.add($t.create(),{top:[0,-1e-6,1],bottom:[0,0,-1],front:[0,1,0],back:[0,-1,0],left:[-1,0,0],right:[1,0,0],undefined:[0,0,0]}[xt].map((xt=>xt*_t)),Ct.target);return{view:Vn.lookAt(Vn.create(),Gn,Ct.target,Ct.up),position:Gn}},fromOrthographicToPerspective:Ct=>{const{near:_t,far:$t,fov:Vn,zoom:Gn}=Ct,{viewport:or}=Ct,lr=xt("./perspectiveCamera").setProjection(Ct,{width:or[2],height:or[3]}),{projectionType:Fr}=xt("./perspectiveCamera").cameraState;return Object.assign({},Ct,lr,{projectionType:Fr},{near:_t,far:$t,fov:Vn})},fromPerspectiveToOrthographic:Ct=>{const{fov:_t,aspect:Vn}=Ct,Gn=.3*$t.length($t.subtract([],Ct.position,Ct.target)),or=Math.tan(_t)*Gn*Vn,lr=Math.tan(_t)*Gn,{near:Fr,far:Hr,viewport:xo}=Ct,Eo={zoom:1,near:Fr,far:Hr},Mo=xt("./orthographicCamera").cameraState,Oo=xt("./orthographicCamera").setProjection(Eo,{width:or,height:lr});return Object.assign({},Mo,Ct,Oo,{projectionType:Mo.projectionType,viewport:xo})}}},{"./orthographicCamera":612,"./perspectiveCamera":613,"gl-mat4":547,"gl-vec3":580}],612:[function(xt,Ct,_t){const $t=xt("gl-mat4"),Vn={view:$t.identity(new Float32Array(16)),projection:$t.identity(new Float32Array(16)),matrix:$t.identity(new Float32Array(16)),near:1,far:1300,up:[0,0,1],eye:new Float32Array(3),position:[150,250,200],target:[0,0,0],fov:Math.PI/4,aspect:1,viewport:[0,0,0,0],zoom:1,projectionType:"orthographic"};Ct.exports={cameraState:Vn,cameraProps:{},setProjection:(xt,Ct)=>{const{width:_t,height:Vn}=Ct,Gn=_t/Vn,or=[0,0,_t,Vn],lr=xt.zoom,Fr=-_t*lr,Hr=_t*lr,xo=-Vn*lr,Eo=Vn*lr;return{projection:$t.ortho([],Fr,Hr,xo,Eo,xt.near,xt.far),aspect:Gn,viewport:or}}}},{"gl-mat4":547}],613:[function(xt,Ct,_t){const $t=xt("gl-mat4"),Vn=xt("gl-vec3"),Gn={view:$t.identity(new Float32Array(16)),projection:$t.identity(new Float32Array(16)),matrix:$t.identity(new Float32Array(16)),near:1,far:18e3,up:[0,0,1],eye:new Float32Array(3),position:[450,550,700],target:[0,0,0],fov:Math.PI/4,aspect:1,viewport:[0,0,0,0],projectionType:"perspective"},or={},lr=Object.assign({},Gn,or);Ct.exports={cameraState:Gn,cameraProps:or,defaults:lr,setProjection:(xt,Ct,_t)=>{const Vn=_t.width/_t.height,Gn=$t.perspective($t.identity([]),Ct.fov,Vn,Ct.near,Ct.far),or=[0,0,_t.width,_t.height],lr=xt||{};return lr.projection=Gn,lr.aspect=Vn,lr.viewport=or,lr},update:(xt,Ct)=>{Ct||(Ct=xt);const{position:_t,target:Gn,up:or}=Ct,lr=Vn.subtract([],_t,Gn),Fr=Vn.add(Vn.create(),Gn,lr),Hr=$t.lookAt($t.create(),Fr,Gn,or),xo=xt||{};return xo.position=Fr,xo.view=Hr,xo}}},{"gl-mat4":547,"gl-vec3":580}],614:[function(xt,Ct,_t){const $t=xt("gl-vec3"),Vn=xt("gl-mat4"),{max:Gn,min:or,sqrt:lr,PI:Fr,sin:Hr,cos:xo,atan2:Eo}=Math,Mo=xt("../bound-utils/computeBounds"),Oo={limits:{minDistance:.01,maxDistance:1e4},drag:.27,EPS:1e-6,zoomToFit:{auto:!0,targets:"all",tightness:1.5},userControl:{zoom:!0,zoomSpeed:1,rotate:!0,rotateSpeed:1,pan:!0,panSpeed:1},autoRotate:{enabled:!1,speed:1},autoAdjustPlanes:!0},Ro={thetaDelta:0,phiDelta:0,scale:1},Io=Object.assign({},Ro,Oo);Ct.exports={controlsProps:Oo,controlsState:Ro,defaults:Io,update:({controls:xt,camera:Ct},_t)=>{const{EPS:Mo,drag:Oo}=xt,{position:Ro,target:Io}=Ct,Bo=xt.up?xt.up:Ct.up;let zo=xt.thetaDelta;const Ho=xt.phiDelta,Qo=xt.scale,pi=$t.subtract([],Ro,Io);let gi,es;1===Bo[2]?(gi=Eo(pi[0],pi[1]),es=Eo(lr(pi[0]*pi[0]+pi[1]*pi[1]),pi[2])):(gi=Eo(pi[0],pi[2]),es=Eo(lr(pi[0]*pi[0]+pi[2]*pi[2]),pi[1])),xt.autoRotate.enabled&&xt.userControl.rotate&&(zo+=2*Math.PI/60/60*xt.autoRotate.speed),gi+=zo,es=Gn(Mo,or(Fr-Mo,es+=Ho));const ts=Gn(xt.limits.minDistance,or(xt.limits.maxDistance,$t.length(pi)*Qo));1===Bo[2]?(pi[0]=ts*Hr(es)*Hr(gi),pi[2]=ts*xo(es),pi[1]=ts*Hr(es)*xo(gi)):(pi[0]=ts*Hr(es)*Hr(gi),pi[1]=ts*xo(es),pi[2]=ts*Hr(es)*xo(gi));const ns=$t.add($t.create(),Io,pi),rs=Vn.lookAt(Vn.create(),ns,Io,Bo),os=1-Gn(or(Oo,1),.01);return{controls:{thetaDelta:zo*os,phiDelta:Ho*os,scale:1,changed:$t.distance(Ro,ns)>.001},camera:{position:ns,view:rs}}},rotate:({controls:xt,camera:Ct,speed:_t=1},$t)=>{let{thetaDelta:Vn,phiDelta:Gn}=xt;return xt.userControl.rotate&&(Vn+=$t[0]*_t,Gn+=$t[1]*_t),{controls:{thetaDelta:Vn,phiDelta:Gn},camera:Ct}},zoom:({controls:Ct,camera:_t,speed:Vn=1},Gn=0)=>{let{scale:or}=Ct;if(Ct.userControl.zoom&&_t&&void 0!==Gn&&0!==Gn&&!isNaN(Gn)){const lr=(Gn=Gn/Gn*(0===Math.sign(Gn)?1:Math.sign(Gn))*Vn)+Ct.scale,Fr=$t.distance(_t.position,_t.target)*lr;if(Fr>Ct.limits.minDistance&&Fr<Ct.limits.maxDistance&&(or+=Gn),"orthographic"===_t.projectionType){const Ct=.3*$t.length($t.subtract([],_t.position,_t.target)),Vn=Math.tan(_t.fov)*Ct*_t.aspect,Gn=Math.tan(_t.fov)*Ct;_t=xt("../cameras/orthographicCamera").setProjection(_t,{width:Vn,height:Gn})}}return{controls:{scale:or},camera:_t}},pan:({controls:Ct,camera:_t,speed:Gn=1},or)=>{const lr=xt("camera-unproject"),{projection:Fr,view:Hr,viewport:xo}=_t,Eo=Vn.multiply([],Fr,Hr),Mo=Vn.invert([],Eo),Oo=[xo[2],xo[3],0],Ro=[xo[2]-or[0],xo[3]+or[1],0],Io=lr([],Oo,xo,Mo),Bo=lr([],Ro,xo,Mo),zo=$t.distance(_t.position,_t.eye),Ho=$t.subtract([],Io,Bo).map((xt=>xt*Gn*zo*Ct.scale));return{controls:Ct,camera:{position:$t.add($t.create(),_t.position,Ho),target:$t.add($t.create(),_t.target,Ho)}}},zoomToFit:({controls:xt,camera:Ct,entities:_t})=>{const{zoomToFit:Vn}=xt;if("all"!==Vn.targets)return{controls:xt,camera:Ct};if(0===_t.length)return{controls:xt,camera:Ct};const Gn=_t.map((xt=>xt.geometry)),or=Mo(Gn),{fov:lr,target:Fr,position:Hr}=Ct,{tightness:xo}=Object.assign({},Vn,Oo.zoomToFit),Eo=or.dia*xo/Math.tan(lr/2)/$t.distance(Fr,Hr);return{camera:{target:or.center},controls:{scale:Eo}}},reset:({controls:xt,camera:Ct},_t)=>({camera:{position:_t.camera.position,target:_t.camera.target,projection:Vn.perspective([],Ct.fov,Ct.aspect,Ct.near,Ct.far),view:_t.camera.view},controls:{thetaDelta:_t.controls.thetaDelta,phiDelta:_t.controls.phiDelta,scale:_t.controls.scale}})}},{"../bound-utils/computeBounds":610,"../cameras/orthographicCamera":612,"camera-unproject":530,"gl-mat4":547,"gl-vec3":580}],615:[function(xt,Ct,_t){const{flatten:$t,toArray:Vn}=xt("@jscad/array-utils"),{meshColor:Gn}=xt("../rendering/renderDefaults"),or=xt("./geom2ToGeometries"),lr=xt("./geom3ToGeometries"),Fr=xt("./path2ToGeometries");Ct.exports=(xt,...Ct)=>{const _t={color:Gn,smoothNormals:!0},{color:Hr,smoothNormals:xo}=Object.assign({},_t,xt);Ct=(Ct=$t(Vn(Ct))).filter((xt=>xt&&xt instanceof Object));const Eo=[];return Ct.forEach((xt=>{let Ct=[];"sides"in xt?Ct=or({color:Hr},xt):"points"in xt?Ct=Fr({color:Hr},xt):"polygons"in xt&&(Ct=lr({smoothLighting:xo,normalThreshold:.3,color:Hr},xt)),Eo.push(...(xt=>xt.map((xt=>({geometry:xt,visuals:{drawCmd:"2d"===xt.type?"drawLines":"drawMesh",show:!0,transparent:xt.isTransparent,useVertexColors:!0}}))))(Ct))})),Eo}},{"../rendering/renderDefaults":632,"./geom2ToGeometries":616,"./geom3ToGeometries":617,"./path2ToGeometries":618,"@jscad/array-utils":525}],616:[function(xt,Ct,_t){const $t=xt("gl-mat4"),Vn=Math.floor(32767.5);Ct.exports=(xt,Ct)=>{let{color:_t}=xt;const Gn=Ct.sides;if(0===Gn.length)return[];"color"in Ct&&(_t=Ct.color);const or=_t[3]<1,lr=[],Fr=Math.floor(Gn.length/Vn)+1,a=(xt,Ct)=>{lr.push(xt,Ct||xt)},Hr=[];for(let xt=0;xt<Fr;xt++){const Fr=xt*Vn,xo=Math.min(Fr+Vn,Gn.length),Eo=[];for(let xt=Fr;xt<xo;xt++){const Ct=Gn[xt];if(Ct.color){if(0===lr.length&&Eo.length>0){const xt=Eo.length;for(let Ct=0;Ct<xt;Ct++)lr.push(_t)}a(Ct.color,Ct.endColor)}else lr.length&&a(_t);Eo.push([Ct[0][0],Ct[0][1],0]),Eo.push([Ct[1][0],Ct[1][1],0])}const Mo=Eo.map((xt=>[0,0,-1])),Oo=Eo.map(((xt,Ct)=>Ct)),Ro=Ct.transforms?$t.clone(Ct.transforms):$t.create();Hr.push({type:"2d",positions:Eo,normals:Mo,indices:Oo,transforms:Ro,color:_t,colors:lr,isTransparent:or})}return Hr}},{"gl-mat4":547}],617:[function(xt,Ct,_t){const $t=xt("gl-vec3"),Vn=xt("gl-mat4"),polygonColor=(xt,Ct)=>{let _t=Ct;return xt.color&&(_t=xt.color),_t&&_t.length<4&&_t.push(1),_t},calculateNormal=xt=>{if(xt.plane)return $t.clone(xt.plane);const Ct=xt.vertices,_t=$t.create();$t.subtract(_t,Ct[1],Ct[0]);const Vn=$t.create();$t.subtract(Vn,Ct[2],Ct[0]);const Gn=$t.create();return $t.cross(Gn,_t,Vn),$t.normalize(Gn,Gn),Gn};Ct.exports=(xt,Ct)=>{let{color:_t,smoothLighting:$t}=xt;"color"in Ct&&(_t=Ct.color);const Gn=Ct.polygons,or=Ct.transforms?Vn.clone(Ct.transforms):Vn.create(),lr=[];let Fr=0;for(;Fr<Gn.length;){let xt=0,Ct=Fr;for(let _t=Fr;_t<Gn.length&&!((xt+=Gn[_t].vertices.length)>65535);_t++)Ct++;const $t=[],Vn=[],Hr=[],xo=[],Eo=_t[3]<1;for(let xt=Fr;xt<Ct;xt++){const Ct=Gn[xt],or=Ct.vertices,lr=calculateNormal(Ct),Fr=polygonColor(Ct,_t),Eo=[];for(let xt=0;xt<or.length;xt++){const Ct=or[xt];$t.push(Ct),Vn.push(lr),xo.push(Fr);const _t=$t.length-1;Eo.push(_t)}for(let xt=2;xt<Eo.length;xt++)Hr.push([Eo[0],Eo[xt-1],Eo[xt]])}const Mo={type:"3d",positions:$t,normals:Vn,indices:Hr,colors:xo,transforms:or,isTransparent:Eo};lr.push(Mo),Fr=Ct}return lr}},{"gl-mat4":547,"gl-vec3":580}],618:[function(xt,Ct,_t){const $t=xt("gl-mat4"),Vn=Math.floor(32767.5)-2;Ct.exports=(xt,Ct)=>{let{color:_t}=xt;const Gn=Ct.points;if(0===Gn.length)return[];"color"in Ct&&(_t=Ct.color);const or=_t[3]<1,lr=Math.floor(Gn.length/Vn)+1,Fr=[];for(let xt=0;xt<lr;xt++){const Hr=xt*Vn,xo=Math.min(Hr+Vn,Gn.length),Eo=[];let Mo;for(let xt=Hr;xt<xo;xt++){const Ct=Gn[xt];Mo&&(Eo.push([Mo[0],Mo[1],0]),Eo.push([Ct[0],Ct[1],0])),Mo=Ct}if(xt+1===lr&&Ct.isClosed&&Mo){const xt=Gn[0];Eo.push([Mo[0],Mo[1],0]),Eo.push([xt[0],xt[1],0])}const Oo=Eo.map((xt=>[0,0,-1])),Ro=Eo.map(((xt,Ct)=>Ct)),Io=Ct.transforms?$t.clone(Ct.transforms):$t.create();Fr.push({type:"2d",positions:Eo,normals:Oo,indices:Ro,transforms:Io,color:_t,isTransparent:or})}return Fr}},{"gl-mat4":547}],619:[function(xt,Ct,_t){Ct.exports={prepareRender:xt("./rendering/render"),drawCommands:{drawGrid:xt("./rendering/commands/drawGrid/multi.js"),drawAxis:xt("./rendering/commands/drawAxis"),drawMesh:xt("./rendering/commands/drawMesh"),drawLines:xt("./rendering/commands/drawLines")},cameras:{camera:xt("./cameras/camera"),orthographic:xt("./cameras/orthographicCamera"),perspective:xt("./cameras/perspectiveCamera")},controls:{orbit:xt("./controls/orbitControls")},entitiesFromSolids:xt("./geometry-utils-V2/entitiesFromSolids")}},{"./cameras/camera":611,"./cameras/orthographicCamera":612,"./cameras/perspectiveCamera":613,"./controls/orbitControls":614,"./geometry-utils-V2/entitiesFromSolids":615,"./rendering/commands/drawAxis":620,"./rendering/commands/drawGrid/multi.js":622,"./rendering/commands/drawLines":624,"./rendering/commands/drawMesh":627,"./rendering/render":630}],620:[function(xt,Ct,_t){const $t=xt("gl-mat4");Ct.exports=(xt,Ct)=>{let{size:_t,xColor:Vn,yColor:Gn,zColor:or,lineWidth:lr,alwaysVisible:Fr}=Object.assign({},{xColor:[1,0,0,1],yColor:[0,1,0,1],zColor:[0,0,1,1],size:10,lineWidth:3,alwaysVisible:!0},Ct);lr>xt.limits.lineWidthDims[1]&&(lr=xt.limits.lineWidthDims[1]);const Hr=[0,0,0,_t,0,0],xo={frag:"precision mediump float;\n    uniform vec4 color;\n    void main() {\n      gl_FragColor = color;\n    }",vert:"\n    precision mediump float;\n    attribute vec3 position;\n    uniform mat4 model, view, projection;\n    void main() {\n      gl_Position = projection * view * model * vec4(position, 1);\n    }",uniforms:{model:(xt,Ct)=>Ct&&Ct.model?Ct.model:$t.identity([]),color:(xt,Ct)=>Ct.color,angle:(xt,Ct)=>Ct.angle},attributes:{position:Hr},count:Hr.length/3,primitive:"line loop",lineWidth:lr,depth:{enable:!Fr}},Eo=$t.identity([]),Mo=$t.rotateZ($t.create(),$t.identity([]),Math.PI/2),Oo=$t.rotateY($t.create(),$t.identity([]),-Math.PI/2),Ro=xt(xo);return xt=>{const Ct={model:$t.identity([])};return xt=Object.assign({},Ct,xt),Ro([{color:Vn,model:$t.multiply($t.create(),xt.model,Eo)},{color:Gn,model:$t.multiply($t.create(),xt.model,Mo)},{color:or,model:$t.multiply($t.create(),xt.model,Oo)}])}}},{"gl-mat4":547}],621:[function(xt,Ct,_t){const $t=xt("gl-mat4");Ct.exports=(xt,Ct={})=>{const _t=[],Vn={visuals:{color:[0,0,1,1],fadeOut:!1},ticks:1,size:[16,16],centered:!1,lineWidth:2},Gn=Object.assign({},Vn.visuals,Ct.visuals||{}),{fadeOut:or,color:lr}=Gn,{size:Fr,ticks:Hr,centered:xo,lineWidth:Eo}=Object.assign({},Vn,Ct),Mo=Fr[0],Oo=Fr[1];if(xo){const xt=.5*Mo,Ct=.5*Oo,$t=xt%Hr-xt,Vn=-$t,Gn=Ct%Hr-Ct,or=-Gn,lr=0;for(let xt=$t,Ct=0;xt<=Vn;xt+=Hr,Ct+=1)Ct%lr!=0&&(_t.push(Gn,xt,0),_t.push(or,xt,0),_t.push(Gn,xt,0));for(let xt=Gn,Ct=0;xt<=or;xt+=Hr,Ct+=1)Ct%lr!=0&&(_t.push(xt,$t,0),_t.push(xt,Vn,0),_t.push(xt,$t,0))}else{for(let xt=.5*-Mo;xt<=.5*Mo;xt+=Hr)_t.push(.5*-Oo,xt,0),_t.push(.5*Oo,xt,0),_t.push(.5*-Oo,xt,0);for(let xt=.5*-Oo;xt<=.5*Oo;xt+=Hr)_t.push(xt,.5*-Mo,0),_t.push(xt,.5*Mo,0),_t.push(xt,.5*-Mo,0)}return xt({vert:"precision mediump float;\n\n    uniform float camNear, camFar;\n    uniform mat4 model, view, projection;\n\n    attribute vec3 position;\n    varying vec3 fragNormal, fragPosition;\n    varying vec4 worldPosition;\n\n    void main() {\n      fragPosition = position;\n      worldPosition = model * vec4(position, 1);\n      vec4 glPosition = projection * view * worldPosition;\n      gl_Position = glPosition;\n    }",frag:"precision mediump float;\n    uniform vec4 color;\n    varying vec3 fragNormal, fragPosition;\n    varying vec4 worldPosition;\n\n    uniform vec4 fogColor;\n    uniform bool fadeOut;\n    void main() {\n      float dist = .5;\n      if(fadeOut){\n        dist = distance( vec2(0.,0.), vec2(worldPosition.x, worldPosition.y));\n        dist *= 0.0025;\n        dist = sqrt(dist);\n      }\n\n      gl_FragColor = mix(color, fogColor, dist);\n    }\n    ",attributes:{position:xt.buffer(_t)},count:_t.length/3,uniforms:{model:(xt,Ct)=>Ct&&Ct.model?Ct.model:$t.identity([]),color:(xt,Ct)=>Ct&&Ct.color?Ct.color:lr,fogColor:(xt,Ct)=>Ct&&Ct.color?[Ct.color[0],Ct.color[1],Ct.color[2],0]:[lr[0],lr[1],lr[2],0],fadeOut:(xt,Ct)=>Ct&&void 0!==Ct.fadeOut?Ct.fadeOut:or},lineWidth:(Ct,_t)=>Math.min(_t&&_t.lineWidth?_t.lineWidth:Eo,xt.limits.lineWidthDims[1]),primitive:"lines",cull:{enable:!0,face:"front"},polygonOffset:{enable:!0,offset:{factor:1,units:10*Math.random()}},blend:{enable:!0,func:{src:"src alpha",dst:"one minus src alpha"}}})}},{"gl-mat4":547}],622:[function(xt,Ct,_t){Ct.exports=(Ct,_t)=>{const{size:$t,ticks:Vn}=Object.assign({},{size:[50,50],ticks:[10,1]},_t),Gn=xt("./index")(Ct,{size:$t,ticks:Vn[0]}),or=xt("./index")(Ct,{size:$t,ticks:Vn[1]});return xt=>{Gn(xt),or({color:xt.subColor,fadeOut:xt.fadeOut})}}},{"./index":621}],623:[function(xt,Ct,_t){Ct.exports={frag:"\nprecision mediump float;\nuniform vec4 ucolor;\n\nvoid main () {\n  gl_FragColor = ucolor;\n}\n"}},{}],624:[function(xt,Ct,_t){const $t=xt("gl-mat4"),{meshColor:Vn}=xt("../../renderDefaults");Ct.exports=(Ct,_t={})=>{const Gn={color:Vn,geometry:void 0};let{geometry:or,color:lr,transparent:Fr}=Object.assign({},Gn,_t);"color"in or&&(lr=or.color);const Hr=!!(or.indices&&or.indices.length>0),xo=!!(or.normals&&or.normals.length>0),Eo=!!(or.colors&&or.colors.length>0),Mo={primitive:"lines",vert:Eo?xt("./vColorShaders").vert:xt("./meshShaders").vert,frag:Eo?xt("./vColorShaders").frag:xt("./colorOnlyShaders").frag,uniforms:{model:(xt,Ct)=>Ct.model||or.transforms||$t.create(),ucolor:(xt,Ct)=>Ct&&Ct.color?Ct.color:lr},attributes:{position:Ct.buffer({usage:"static",type:"float",data:or.positions})}};return Fr&&(Mo.blend={enable:!0,func:{src:"src alpha",dst:"one minus src alpha"}}),Eo&&(Mo.attributes.color=Ct.buffer({usage:"static",type:"float",data:or.colors})),Hr&&(Mo.elements=Ct.elements({usage:"static",type:"uint16",data:or.indices})),xo&&(Mo.attributes.normal=Ct.buffer({usage:"static",type:"float",data:or.normals})),Ct(Mo)}},{"../../renderDefaults":632,"./colorOnlyShaders":623,"./meshShaders":625,"./vColorShaders":626,"gl-mat4":547}],625:[function(xt,Ct,_t){Ct.exports={vert:"\nprecision mediump float;\n\nuniform float camNear, camFar;\nuniform mat4 model, view, projection;\n\nattribute vec3 position, normal;\n\n\nvarying vec3 surfaceNormal, surfacePosition;\nvarying vec4 _worldSpacePosition;\n\n\nvoid main() {\n\n\n  surfacePosition = position;\n  surfaceNormal = normal;\n  vec4 worldSpacePosition = model * vec4(position, 1);\n  _worldSpacePosition = worldSpacePosition;\n\n  vec4 glPosition = projection * view * model * vec4(position, 1);\n  gl_Position = glPosition;\n}\n",frag:"\nprecision mediump float;\nvarying vec3 surfaceNormal;\nuniform float ambientLightAmount;\nuniform float diffuseLightAmount;\nuniform vec4 ucolor;\nuniform vec3 lightDirection;\nuniform vec3 opacity;\n\nvarying vec4 _worldSpacePosition;\n\nuniform vec2 printableArea;\n\nvec4 errorColor = vec4(0.15, 0.15, 0.15, 0.3);\n\nvoid main () {\n  vec4 depth = gl_FragCoord;\n\n  float v = 0.8; // shadow value\n  vec4 endColor = ucolor;\n\n  vec3 ambient = ambientLightAmount * endColor.rgb;\n  float cosTheta = dot(surfaceNormal, lightDirection);\n  vec3 diffuse = diffuseLightAmount * endColor.rgb * clamp(cosTheta , 0.0, 1.0 );\n\n  float cosTheta2 = dot(surfaceNormal, vec3(-lightDirection.x, -lightDirection.y, lightDirection.z));\n  vec3 diffuse2 = diffuseLightAmount * endColor.rgb * clamp(cosTheta2 , 0.0, 1.0 );\n\n  gl_FragColor = vec4((ambient + diffuse + diffuse2 * v), endColor.a);\n}"}},{}],626:[function(xt,Ct,_t){Ct.exports={frag:"\nprecision mediump float;\nvarying vec4 vColor;\n\nvoid main () {\n  gl_FragColor = vColor;\n}\n",vert:"\nprecision mediump float;\n\nuniform float camNear, camFar;\nuniform mat4 model, view, projection;\n\nattribute vec3 position, normal;\nattribute vec4 color;\n\nvarying vec3 surfaceNormal, surfacePosition;\nvarying vec4 _worldSpacePosition;\nvarying vec4 vColor;\n\nvoid main() {\n  vColor = color;\n\n  surfacePosition = position;\n  surfaceNormal = normal;\n  vec4 worldSpacePosition = model * vec4(position, 1);\n  _worldSpacePosition = worldSpacePosition;\n\n  vec4 glPosition = projection * view * model * vec4(position, 1);\n  gl_Position = glPosition;\n}\n"}},{}],627:[function(xt,Ct,_t){const $t=xt("gl-mat4"),{meshColor:Vn}=xt("../../renderDefaults");Ct.exports=(Ct,_t={extras:{}})=>{const Gn={useVertexColors:!0,dynamicCulling:!0,geometry:void 0,color:Vn,visuals:{}},{geometry:or,dynamicCulling:lr,useVertexColors:Fr,color:Hr,visuals:xo}=Object.assign({},Gn,_t),Eo=Ct.buffer([]),Mo=!!(or.indices&&or.indices.length>0),Oo=!!(or.normals&&or.normals.length>0),Ro="transparent"in xo&&xo.transparent,Io=!!(Fr&&or.colors&&or.colors.length>0),Bo=or.transforms||$t.create(),zo=$t.determinant(Bo)<0,Ho=lr&&zo?"front":"back",Qo=Io?xt("./vColorShaders").vert:xt("./meshShaders").vert,pi=Io?xt("./vColorShaders").frag:xt("./meshShaders").frag,gi=$t.invert($t.create(),Bo);let es={primitive:"triangles",vert:Qo,frag:pi,uniforms:{model:(xt,Ct)=>Bo,ucolor:(xt,Ct)=>Ct&&Ct.color?Ct.color:Hr,vColorToggler:(xt,Ct)=>Ct&&Ct.useVertexColors&&!0===Ct.useVertexColors?1:0,unormal:(xt,Ct)=>{const _t=$t.invert($t.create(),Ct.camera.view);return $t.multiply(_t,gi,_t),$t.transpose(_t,_t),_t}},attributes:{position:Ct.buffer({usage:"static",type:"float",data:or.positions}),ao:Eo},cull:{enable:!0,face:Ho}};return Ro&&(es.blend={enable:!0,func:{src:"src alpha",dst:"one minus src alpha"}}),or.cells?es.elements=or.cells:Mo?es.elements=Ct.elements({usage:"static",type:"uint16",data:or.indices}):or.triangles?es.elements=or.triangles:es.count=or.positions.length/3,Oo&&(es.attributes.normal=Ct.buffer({usage:"static",type:"float",data:or.normals})),Io&&(es.attributes.color=Ct.buffer({usage:"static",type:"float",data:or.colors})),Ct(es=Object.assign({},es,_t.extras))}},{"../../renderDefaults":632,"./meshShaders":628,"./vColorShaders":629,"gl-mat4":547}],628:[function(xt,Ct,_t){Ct.exports={vert:"\nprecision mediump float;\n\nuniform float camNear, camFar;\nuniform mat4 model, view, projection;\n\nattribute vec3 position, normal;\n\nvarying vec3 surfaceNormal, surfacePosition;\nvarying vec4 _worldSpacePosition;\n\nvoid main() {\n  surfacePosition = position;\n  surfaceNormal = normal;\n  vec4 worldSpacePosition = model * vec4(position, 1);\n  _worldSpacePosition = worldSpacePosition;\n\n  vec4 glPosition = projection * view * model * vec4(position, 1);\n  gl_Position = glPosition;\n}\n",frag:"\nprecision mediump float;\nvarying vec3 surfaceNormal;\nuniform float ambientLightAmount;\nuniform float diffuseLightAmount;\nuniform vec4 ucolor;\nuniform vec3 lightDirection;\nuniform vec3 opacity;\n\nvarying vec4 _worldSpacePosition;\n\nuniform vec2 printableArea;\n\nvec4 errorColor = vec4(0.15, 0.15, 0.15, 0.3);\n\nvoid main () {\n  vec4 depth = gl_FragCoord;\n\n  float v = 0.8; // shadow value\n  vec4 endColor = ucolor;\n\n  vec3 ambient = ambientLightAmount * endColor.rgb;\n  float cosTheta = dot(surfaceNormal, lightDirection);\n  vec3 diffuse = diffuseLightAmount * endColor.rgb * clamp(cosTheta , 0.0, 1.0 );\n\n  float cosTheta2 = dot(surfaceNormal, vec3(-lightDirection.x, -lightDirection.y, lightDirection.z));\n  vec3 diffuse2 = diffuseLightAmount * endColor.rgb * clamp(cosTheta2 , 0.0, 1.0 );\n\n  gl_FragColor = vec4((ambient + diffuse + diffuse2 * v), endColor.a);\n}"}},{}],629:[function(xt,Ct,_t){Ct.exports={frag:"\nprecision mediump float;\nvarying vec3 surfaceNormal, surfacePosition;\n\nuniform float ambientLightAmount;\nuniform float diffuseLightAmount;\nuniform float specularLightAmount;\n\nuniform vec3 lightDirection;\nuniform vec4 lightColor;\nuniform vec3 opacity;\nuniform float uMaterialShininess;\n\nvarying vec4 vColor;\nuniform vec4 ucolor;\nuniform float vColorToggler;\n\nuniform vec2 printableArea;\nvec4 errorColor = vec4(0.15, 0.15, 0.15, 0.3);//vec4(0.15, 0.15, 0.15, 0.3);\nvarying vec4 _worldSpacePosition;\nvarying float ambientAo;\n\nvoid main () {\n  vec4 depth = gl_FragCoord;\n  vec4 endColor = vColor * vColorToggler + ucolor * (1.0 - vColorToggler);\n\n  vec3 ambient = ambientLightAmount * endColor.rgb ; //ambientAo * \n\n  float diffuseWeight = dot(surfaceNormal, lightDirection);\n  vec3 diffuse = diffuseLightAmount * endColor.rgb * clamp(diffuseWeight , 0.0, 1.0 );\n\n  //specular\n  \n  vec4 specularColor = vec4(lightColor);\n  vec3 eyeDirection = normalize(surfacePosition.xyz);\n  vec3 reflectionDirection = reflect(-lightDirection, -surfaceNormal);\n  float specularLightWeight = pow(max(dot(reflectionDirection, eyeDirection), 0.0), uMaterialShininess);\n  vec3 specular = specularColor.rgb * specularLightWeight * specularLightAmount;\n\n  gl_FragColor = vec4((ambient + diffuse + specular), endColor.a);\n}\n",vert:"\nprecision mediump float;\n\nuniform float camNear, camFar;\nuniform mat4 model, view, projection, unormal;\n\nattribute vec3 position, normal;\nattribute vec4 color;\n\nattribute float ao;\nvarying float ambientAo;\n\nvarying vec3 surfaceNormal, surfacePosition;\nvarying vec4 _worldSpacePosition;\nvarying vec4 vColor;\n\nvoid main() {\n  surfacePosition = (unormal * vec4(position, 1.0)).xyz;\n  surfaceNormal = normalize((unormal * vec4(normal, 1.0)).xyz); //vec4 transformedNormal = uNormalMatrix * vec4(aVertexNormal, 1.0);\n  vec4 worldSpacePosition = model * vec4(position, 1);\n  _worldSpacePosition = worldSpacePosition;\n  //gl_Position = projection * view * worldSpacePosition;\n\n  vColor = color;\n\n  //ambientAo = (1. - ao) * (0.5 * max(normal.x, 0.) + 0.5);\n\n  vec4 glPosition = projection * view * model * vec4(position, 1);\n  gl_Position = glPosition;\n  //gl_Position = zBufferAdjust(glPosition, camNear, camFar);\n}\n"}},{}],630:[function(xt,Ct,_t){const $t=xt("./renderContext"),Vn=xt("./renderDefaults");Ct.exports=Ct=>{const _t=Object.assign({},{},Ct.glOptions,{onDone:(xt,Ct)=>{if(xt)throw xt}}),Gn=xt("regl")(_t),or=new Map;return function(xt){var Ct;Gn.poll(),(Ct=xt).rendering=Object.assign({},Vn,Ct.rendering),$t(Gn)(Ct,(xt=>{Gn.clear({color:Ct.rendering.background,depth:1}),Ct.entities&&Ct.entities.sort(((xt,Ct)=>{const _t="transparent"in xt.visuals&&xt.visuals.transparent;return _t===("transparent"in Ct.visuals&&Ct.visuals.transparent)?0:_t?1:-1})).forEach((xt=>{const{visuals:_t}=xt;if((!("show"in _t)||_t.show)&&_t.drawCmd&&Ct.drawCommands[_t.drawCmd]){let $t;_t.cacheId?$t=or.get(_t.cacheId):(_t.cacheId=or.size,$t=Ct.drawCommands[_t.drawCmd](Gn,xt),or.set(_t.cacheId,$t)),$t({...xt,..._t,camera:Ct.camera})}}))}))}}},{"./renderContext":631,"./renderDefaults":632,regl:608}],631:[function(xt,Ct,_t){const $t=xt("gl-mat4");Ct.exports=(xt,Ct={})=>{const{fbo:_t}=Ct,Vn={cull:{enable:!0},context:{lightDirection:[.2,.2,1]},uniforms:{view:(xt,Ct)=>Ct.camera.view,eye:(xt,Ct)=>Ct.camera.position,projection:(xt,Ct)=>Ct.camera.projection,camNear:(xt,Ct)=>Ct.camera.near,camFar:(xt,Ct)=>Ct.camera.far,invertedView:(xt,Ct)=>$t.invert([],Ct.camera.view),lightPosition:(xt,Ct)=>Ct&&Ct.rendering&&Ct.rendering.lightPosition?Ct.rendering.lightPosition:[100,200,100],lightDirection:(xt,Ct)=>Ct&&Ct.rendering&&Ct.rendering.lightDirection?Ct.rendering.lightDirection:xt.lightDirection||[0,0,0],lightView:xt=>$t.lookAt([],xt.lightDirection,[0,0,0],[0,0,1]),lightProjection:$t.ortho([],-25,-25,-20,20,-25,25),lightColor:(xt,Ct)=>Ct&&Ct.rendering&&Ct.rendering.lightColor?Ct.rendering.lightColor:[1,.8,0],ambientLightAmount:(xt,Ct)=>Ct&&Ct.rendering&&Ct.rendering.ambientLightAmount?Ct.rendering.ambientLightAmount:.3,diffuseLightAmount:(xt,Ct)=>Ct&&Ct.rendering&&Ct.rendering.diffuseLightAmount?Ct&&Ct.rendering&&Ct.rendering.diffuseLightAmount:.89,specularLightAmount:(xt,Ct)=>Ct&&Ct.rendering&&Ct.rendering.specularLightAmount?Ct.rendering.specularLightAmount:.16,uMaterialShininess:(xt,Ct)=>Ct&&Ct.rendering&&Ct.rendering.materialShininess?Ct.rendering.materialShininess:8,materialAmbient:[.5,.8,.3],materialDiffuse:[.5,.8,.3],materialSpecular:[.5,.8,.3]},framebuffer:_t};return xt(Object.assign({},Vn,Ct.extras))}},{"gl-mat4":547}],632:[function(xt,Ct,_t){Ct.exports={background:[1,1,1,1],meshColor:[0,.6,1,1],lightColor:[1,1,1,1],lightDirection:[.2,.2,1],lightPosition:[100,200,100],ambientLightAmount:.3,diffuseLightAmount:.89,specularLightAmount:.16,materialShininess:8}},{}],633:[function(xt,Ct,_t){Ct.exports=[{key:"f",command:"toPresetView",args:"front"},{key:"b",command:"toPresetView",args:"back"},{key:"t",command:"toPresetView",args:"top"},{key:"c",command:"toPresetView",args:"bottom"},{key:"l",command:"toPresetView",args:"left"},{key:"r",command:"toPresetView",args:"right"},{key:"p",command:"setProjectionType",args:"perspective"},{key:"o",command:"setProjectionType",args:"orthographic"},{key:"shift+enter",command:"editorCommand",args:"reevaluate"}]},{}],634:[function(xt,Ct,_t){Ct.exports={livereloadUrl:"ws://127.0.0.1:35729/livereload"}},{}],635:[function(xt,Ct,_t){Ct.exports={name:"Arctic Sunrise",viewer:{rendering:{background:[1,.8,.7333333333333333,1],meshColor:[.43137254901960786,.7098039215686275,.7529411764705882,1]},grid:{color:[0,.4235294117647059,.5176470588235295,1],subColor:[.8862745098039215,.9098039215686274,.8941176470588236,1]}},mainTextColor:[0,.4235294117647059,.5176470588235295,1],secondaryTextColor:"#000000"}},{}],636:[function(xt,Ct,_t){Ct.exports={name:"Back to School",viewer:{rendering:{background:[.5058823529411764,.44313725490196076,.3686274509803922,1],meshColor:[.9803921568627451,.6823529411764706,.23921568627450981,1]},grid:{color:[.9215686274509803,.5411764705882353,.26666666666666666,1],subColor:[.9176470588235294,.3254901960784314,.3686274509803922,1]}},mainTextColor:[.9215686274509803,.5411764705882353,.26666666666666666,1],secondaryTextColor:"#000000"}},{}],637:[function(xt,Ct,_t){Ct.exports={name:"Beyond Black & White",viewer:{rendering:{background:[.3568627450980392,.7843137254901961,.6745098039215687,1],meshColor:[.6862745098039216,.10980392156862745,.10980392156862745,1]},grid:{color:[.9411764705882353,.9372549019607843,.996078431372549,1],subColor:[.00784313725490196,.0196078431372549,.03529411764705882,1]}},mainTextColor:[.9411764705882353,.9372549019607843,.996078431372549,1],secondaryTextColor:"#000000"}},{}],638:[function(xt,Ct,_t){Ct.exports={name:"Bold Berries",viewer:{rendering:{background:[.3137254901960784,.19215686274509805,.1843137254901961,1],meshColor:[.796078431372549,0,0,1]},grid:{color:[.8941176470588236,.9176470588235294,.5490196078431373,1],subColor:[.24705882352941178,.4235294117647059,.27058823529411763,1]}},mainTextColor:[.8941176470588236,.9176470588235294,.5490196078431373,1],secondaryTextColor:"#000000"}},{}],639:[function(xt,Ct,_t){Ct.exports={name:"Candy-coated Brights",viewer:{rendering:{background:[.9215686274509803,.5411764705882353,.26666666666666666,1],meshColor:[.8823529411764706,.19215686274509805,.34509803921568627,1]},grid:{color:[1,.9254901960784314,.3607843137254902,1],subColor:[0,.5529411764705883,.796078431372549,1]}},mainTextColor:[1,.9254901960784314,.3607843137254902,1],secondaryTextColor:"#000000"}},{}],640:[function(xt,Ct,_t){Ct.exports={name:"Cheerful & Friendly",viewer:{rendering:{background:[.16862745098039217,.3803921568627451,.42745098039215684,1],meshColor:[.6980392156862745,.8588235294117647,.8352941176470589,1]},grid:{color:[1,1,1,1],subColor:[.9803921568627451,.5529411764705883,.3843137254901961,1]}},mainTextColor:[1,1,1,1],secondaryTextColor:"#000000"}},{}],641:[function(xt,Ct,_t){Ct.exports={name:"Classic Metallics",viewer:{rendering:{background:[.03137254901960784,.027450980392156862,.023529411764705882,1],meshColor:[.9568627450980393,.9568627450980393,.9372549019607843,1]},grid:{color:[.8196078431372549,.6980392156862745,.5019607843137255,1],subColor:[.34901960784313724,.30196078431372547,.27450980392156865,1]}},mainTextColor:[.8196078431372549,.6980392156862745,.5019607843137255,1],secondaryTextColor:"#000000"}},{}],642:[function(xt,Ct,_t){Ct.exports={name:"Cozy & Warm",viewer:{rendering:{background:[.4,.13333333333333333,.1450980392156863,1],meshColor:[.7098039215686275,.11372549019607843,.0392156862745098,1]},grid:{color:[.9176470588235294,.8274509803921568,.611764705882353,1],subColor:[.49019607843137253,.3686274509803922,.23529411764705882,1]}},mainTextColor:[.9176470588235294,.8274509803921568,.611764705882353,1],secondaryTextColor:"#000000"}},{}],643:[function(xt,Ct,_t){Ct.exports={name:"Crisp & Dramatic",viewer:{rendering:{background:[.3137254901960784,.3176470588235294,.3764705882352941,1],meshColor:[.40784313725490196,.5098039215686274,.6196078431372549,1]},grid:{color:[.6823529411764706,.7411764705882353,.2196078431372549,1],subColor:[.34901960784313724,.5098039215686274,.20392156862745098,1]}},mainTextColor:[.6823529411764706,.7411764705882353,.2196078431372549,1],secondaryTextColor:"#000000"}},{}],644:[function(xt,Ct,_t){Ct.exports={name:"Dark",viewer:{rendering:{background:[.211,.2,.207,1],meshColor:[1,.4,0,1]},grid:{color:[1,1,1,.5],subColor:[0,1,1,.5]}},mainTextColor:"#FFF",secondaryTextColor:"#000"}},{}],645:[function(xt,Ct,_t){Ct.exports={name:"Distinctive & Unexpected",viewer:{rendering:{background:[.3568627450980392,.7843137254901961,.6745098039215687,1],meshColor:[.6941176470588235,.8431372549019608,.8235294117647058,1]},grid:{color:[.2627450980392157,.1803921568627451,.2,1],subColor:[.9058823529411765,.2784313725490196,.1803921568627451,1]}},mainTextColor:[.2627450980392157,.1803921568627451,.2,1],secondaryTextColor:"#000000"}},{}],646:[function(xt,Ct,_t){Ct.exports={name:"Exotic & High-impact",viewer:{rendering:{background:[.058823529411764705,.12156862745098039,.2196078431372549,1],meshColor:[.45098039215686275,.3764705882352941,.3568627450980392,1]},grid:{color:[.9607843137254902,.32941176470588235,.28627450980392155,1],subColor:[.10588235294117647,.29411764705882354,.35294117647058826,1]}},mainTextColor:[.9607843137254902,.32941176470588235,.28627450980392155,1],secondaryTextColor:"#000000"}},{}],647:[function(xt,Ct,_t){Ct.exports={name:"Golden Afternoon",viewer:{rendering:{background:[.5333333333333333,.1411764705882353,.14901960784313725,1],meshColor:[.803921568627451,.7450980392156863,.6549019607843137,1]},grid:{color:[.19607843137254902,.18823529411764706,.18823529411764706,1],subColor:[.7607843137254902,.5843137254901961,.27058823529411763,1]}},mainTextColor:[.19607843137254902,.18823529411764706,.18823529411764706,1],secondaryTextColor:"#000000"}},{}],648:[function(xt,Ct,_t){Ct.exports={name:"Grass",viewer:{rendering:{background:[.23,.45,.26,1],meshColor:[.51,.18,.07,1]},grid:{color:[.98,.94,.68,1],subColor:[.93,.7,.32,.5]}},mainTextColor:"#A95030",secondaryTextColor:"#000"}},{}],649:[function(xt,Ct,_t){Ct.exports={name:"Grecian Holiday",viewer:{rendering:{background:[.1607843137254902,.5333333333333333,.7372549019607844,1],meshColor:[.12549019607843137,.5803921568627451,.5450980392156862,1]},grid:{color:[.9568627450980393,.9176470588235294,.8705882352941177,1],subColor:[.9294117647058824,.5490196078431373,.4470588235294118,1]}},mainTextColor:[.9568627450980393,.9176470588235294,.8705882352941177,1],secondaryTextColor:"#000000"}},{}],650:[function(xt,Ct,_t){Ct.exports={name:"Green Fields",viewer:{rendering:{background:[.5686274509803921,.5882352941176471,.21176470588235294,1],meshColor:[.3215686274509804,.2901960784313726,.22745098039215686,1]},grid:{color:[1,.9803921568627451,.8823529411764706,1],subColor:[.35294117647058826,.37254901960784315,.21568627450980393,1]}},mainTextColor:[1,.9803921568627451,.8823529411764706,1],secondaryTextColor:"#000000"}},{}],651:[function(xt,Ct,_t){Ct.exports={name:"Icy Blues and Grays",viewer:{rendering:{background:[.9450980392156862,.9450980392156862,.9490196078431372,1],meshColor:[.7372549019607844,.7294117647058823,.7450980392156863,1]},grid:{color:[.6313725490196078,.8392156862745098,.8862745098039215,1],subColor:[.09803921568627451,.5843137254901961,.6784313725490196,1]}},mainTextColor:[.6313725490196078,.8392156862745098,.8862745098039215,1],secondaryTextColor:"#000000"}},{}],652:[function(xt,Ct,_t){Ct.exports={name:"Light",viewer:{rendering:{background:[1,1,1,1],meshColor:[0,.6,1,1]},grid:{color:[0,0,0,1],subColor:[0,0,1,.5]}},mainTextColor:"#424242",secondaryTextColor:"#000"}},{}],653:[function(xt,Ct,_t){Ct.exports={name:"Light & Natural",viewer:{rendering:{background:[.2,.4196078431372549,.5294117647058824,1],meshColor:[.6313725490196078,.7450980392156863,.5843137254901961,1]},grid:{color:[.9803921568627451,.9372549019607843,.8313725490196079,1],subColor:[.6470588235294118,.48627450980392156,.396078431372549,1]}},mainTextColor:[.9803921568627451,.9372549019607843,.8313725490196079,1],secondaryTextColor:"#000000"}},{}],654:[function(xt,Ct,_t){Ct.exports={name:"Modern & Urban",viewer:{rendering:{background:[.9764705882352941,.7294117647058823,.19607843137254902,1],meshColor:[.25882352941176473,.43137254901960786,.5254901960784314,1]},grid:{color:[.9725490196078431,.9450980392156862,.8980392156862745,1],subColor:[.1843137254901961,.19215686274509805,.19215686274509805,1]}},mainTextColor:[.9725490196078431,.9450980392156862,.8980392156862745,1],secondaryTextColor:"#000000"}},{}],655:[function(xt,Ct,_t){Ct.exports={name:"Naturally Elegant",viewer:{rendering:{background:[.9215686274509803,.8745098039215686,0,1],meshColor:[.49411764705882355,.4823529411764706,.08235294117647059,1]},grid:{color:[.33725490196078434,.24313725490196078,.12549019607843137,1],subColor:[.788235294117647,.6196078431372549,.06274509803921569,1]}},mainTextColor:[.33725490196078434,.24313725490196078,.12549019607843137,1],secondaryTextColor:"#000000"}},{}],656:[function(xt,Ct,_t){Ct.exports={name:"Neon Night",viewer:{rendering:{background:[.9686274509803922,.4627450980392157,.01568627450980392,1],meshColor:[.1450980392156863,.5019607843137255,.2235294117647059,1]},grid:{color:[.9607843137254902,.4235294117647059,.3411764705882353,1],subColor:[.13725490196078433,.10588235294117647,.07058823529411765,1]}},mainTextColor:[.9607843137254902,.4235294117647059,.3411764705882353,1],secondaryTextColor:"#000000"}},{}],657:[function(xt,Ct,_t){Ct.exports={name:"Nightlife",viewer:{rendering:{background:[0,.8117647058823529,.9803921568627451,1],meshColor:[1,0,.2196078431372549,1]},grid:{color:[.9764705882352941,.8627450980392157,.1411764705882353,1],subColor:[.00784313725490196,.0196078431372549,.03529411764705882,1]}},mainTextColor:[.9764705882352941,.8627450980392157,.1411764705882353,1],secondaryTextColor:"#000000"}},{}],658:[function(xt,Ct,_t){Ct.exports={name:"Ocean",viewer:{rendering:{background:[.23,.39,.76,1],meshColor:[.61,.61,.61,1]},grid:{color:[1,1,1,1],subColor:[.29,.52,.96,.5]}},mainTextColor:"#4A85F7",secondaryTextColor:"#000"}},{}],659:[function(xt,Ct,_t){Ct.exports={name:"Outdoorsy & Natural",viewer:{rendering:{background:[.1803921568627451,.27450980392156865,0,1],meshColor:[.2823529411764706,.4196078431372549,0,1]},grid:{color:[.6352941176470588,.7725490196078432,.13725490196078433,1],subColor:[.49019607843137253,.26666666666666666,.15294117647058825,1]}},mainTextColor:[.6352941176470588,.7725490196078432,.13725490196078433,1],secondaryTextColor:"#000000"}},{}],660:[function(xt,Ct,_t){Ct.exports={name:"Pool Party",viewer:{rendering:{background:[.20392156862745098,.30196078431372547,.5647058823529412,1],meshColor:[.3607843137254902,.7725490196078432,.9372549019607843,1]},grid:{color:[.9764705882352941,.6509803921568628,.011764705882352941,1],subColor:[.9058823529411765,.3333333333333333,.17254901960784313,1]}},mainTextColor:[.9764705882352941,.6509803921568628,.011764705882352941,1],secondaryTextColor:"#000000"}},{}],661:[function(xt,Ct,_t){Ct.exports={name:"Primary Colors",viewer:{rendering:{background:[.21568627450980393,.3686274509803922,.592156862745098,1],meshColor:[.984313725490196,.396078431372549,.25882352941176473,1]},grid:{color:[1,.7333333333333333,0,1],subColor:[.2823529411764706,.4196078431372549,0,1]}},mainTextColor:[1,.7333333333333333,0,1],secondaryTextColor:"#000000"}},{}],662:[function(xt,Ct,_t){Ct.exports={name:"Serene & Spa-like",viewer:{rendering:{background:[.6313725490196078,.7450980392156863,.5843137254901961,1],meshColor:[.8862745098039215,.8745098039215686,.6352941176470588,1]},grid:{color:[.5725490196078431,.6666666666666666,.7803921568627451,1],subColor:[.9294117647058824,.3411764705882353,.3215686274509804,1]}},mainTextColor:[.5725490196078431,.6666666666666666,.7803921568627451,1],secondaryTextColor:"#000000"}},{}],663:[function(xt,Ct,_t){Ct.exports={name:"Shades of Citrus",viewer:{rendering:{background:[.9215686274509803,.5411764705882353,.26666666666666666,1],meshColor:[.9764705882352941,.8627450980392157,.1411764705882353,1]},grid:{color:[.29411764705882354,.4549019607843137,.2784313725490196,1],subColor:[.6352941176470588,.7725490196078432,.13725490196078433,1]}},mainTextColor:[.29411764705882354,.4549019607843137,.2784313725490196,1],secondaryTextColor:"#000000"}},{}],664:[function(xt,Ct,_t){Ct.exports={name:"Sleek & Modern",viewer:{rendering:{background:[.00784313725490196,.10980392156862745,.11764705882352941,1],meshColor:[.6941176470588235,.8431372549019608,.8235294117647058,1]},grid:{color:[1,1,1,1],subColor:[.22745098039215686,.3176470588235294,.6,1]}},mainTextColor:[1,1,1,1],secondaryTextColor:"#000000"}},{}],665:[function(xt,Ct,_t){Ct.exports={name:"Smoky Purples",viewer:{rendering:{background:[.7372549019607844,.7294117647058823,.7450980392156863,1],meshColor:[.4470588235294118,.4392156862745098,.4666666666666667,1]},grid:{color:[.9333333333333333,.8470588235294118,.788235294117647,1],subColor:[.9137254901960784,.592156862745098,.5294117647058824,1]}},mainTextColor:[.9333333333333333,.8470588235294118,.788235294117647,1],secondaryTextColor:"#000000"}},{}],666:[function(xt,Ct,_t){Ct.exports={name:"Subtle & Versatile",viewer:{rendering:{background:[.17254901960784313,.2901960784313726,.3215686274509804,1],meshColor:[.7490196078431373,.8627450980392157,.8117647058823529,1]},grid:{color:[.8784313725490196,.34509803921568627,.34509803921568627,1],subColor:[.8352941176470589,.788235294117647,.6941176470588235,1]}},mainTextColor:[.8784313725490196,.34509803921568627,.34509803921568627,1],secondaryTextColor:"#000000"}},{}],667:[function(xt,Ct,_t){Ct.exports={name:"Summer Barbeque",viewer:{rendering:{background:[.3607843137254902,.5607843137254902,.13333333333333333,1],meshColor:[.4588235294117647,.16470588235294117,.027450980392156862,1]},grid:{color:[.984313725490196,.796078431372549,.4823529411764706,1],subColor:[.8117647058823529,.21568627450980393,.12941176470588237,1]}},mainTextColor:[.984313725490196,.796078431372549,.4823529411764706,1],secondaryTextColor:"#000000"}},{}],668:[function(xt,Ct,_t){Ct.exports={name:"Summer Sunflower",viewer:{rendering:{background:[.30196078431372547,.5215686274509804,.7411764705882353,1],meshColor:[.48627450980392156,.6666666666666666,.17647058823529413,1]},grid:{color:[1,.7333333333333333,0,1],subColor:[.796078431372549,.38823529411764707,.09411764705882353,1]}},mainTextColor:[1,.7333333333333333,0,1],secondaryTextColor:"#000000"}},{}],669:[function(xt,Ct,_t){Ct.exports={name:"Surf & Turf",viewer:{rendering:{background:[.9568627450980393,.8,.4392156862745098,1],meshColor:[.8705882352941177,.47843137254901963,.13333333333333333,1]},grid:{color:[.12549019607843137,.5803921568627451,.5450980392156862,1],subColor:[.41568627450980394,.6941176470588235,.5294117647058824,1]}},mainTextColor:[.12549019607843137,.5803921568627451,.5450980392156862,1],secondaryTextColor:"#000000"}},{}],670:[function(xt,Ct,_t){Ct.exports={name:"Technology Meets Nature",viewer:{rendering:{background:[.984313725490196,.803921568627451,.29411764705882354,1],meshColor:[.6392156862745098,.6470588235294118,.6,1]},grid:{color:[.11764705882352941,0,0,1],subColor:[.3607843137254902,.5607843137254902,.13333333333333333,1]}},mainTextColor:[.11764705882352941,0,0,1],secondaryTextColor:"#000000"}},{}],671:[function(xt,Ct,_t){Ct.exports={name:"Understated & Versatile",viewer:{rendering:{background:[.2,.3215686274509804,.3215686274509804,1],meshColor:[.788235294117647,.8196078431372549,.7843137254901961,1]},grid:{color:[.6078431372549019,.30980392156862746,.058823529411764705,1],subColor:[.17647058823529413,.18823529411764706,.2,1]}},mainTextColor:[.6078431372549019,.30980392156862746,.058823529411764705,1],secondaryTextColor:"#000000"}},{}],672:[function(xt,Ct,_t){Ct.exports={name:"Warm & Cool",viewer:{rendering:{background:[.26666666666666666,.2980392156862745,.3607843137254902,1],meshColor:[.807843137254902,.35294117647058826,.3411764705882353,1]},grid:{color:[.47058823529411764,.6470588235294118,.6392156862745098,1],subColor:[.8823529411764706,.6941176470588235,.41568627450980394,1]}},mainTextColor:[.47058823529411764,.6470588235294118,.6392156862745098,1],secondaryTextColor:"#000000"}},{}],673:[function(xt,Ct,_t){Ct.exports={name:"Warm & Rustic",viewer:{rendering:{background:[.996078431372549,.9490196078431372,.8941176470588236,1],meshColor:[.9921568627450981,.592156862745098,.30980392156862746,1]},grid:{color:[.7764705882352941,0,0,1],subColor:[.5019607843137255,.35294117647058826,.23137254901960785,1]}},mainTextColor:[.7764705882352941,0,0,1],secondaryTextColor:"#000000"}},{}],674:[function(xt,Ct,_t){Ct.exports={name:"Wintery Reds",viewer:{rendering:{background:[.9254901960784314,.5882352941176471,.6431372549019608,1],meshColor:[.8431372549019608,.17254901960784313,.08627450980392157,1]},grid:{color:[.9411764705882353,.9372549019607843,.9176470588235294,1],subColor:[.7529411764705882,.6980392156862745,.7098039215686275,1]}},mainTextColor:[.9411764705882353,.9372549019607843,.9176470588235294,1],secondaryTextColor:"#000000"}},{}],675:[function(xt,Ct,_t){Ct.exports={dark:xt("./theme.dark.json"),grass:xt("./theme.grass.json"),light:xt("./theme.light.json"),ocean:xt("./theme.ocean.json"),arcticsunrise:xt("./theme.arcticsunrise.json"),backtoschool:xt("./theme.backtoschool.json"),beyondblackwhite:xt("./theme.beyondblackwhite.json"),boldberries:xt("./theme.boldberries.json"),candycoatedbrights:xt("./theme.candycoatedbrights.json"),cheerfulfriendly:xt("./theme.cheerfulfriendly.json"),classicmetallics:xt("./theme.classicmetallics.json"),cozywarm:xt("./theme.cozywarm.json"),crispdramatic:xt("./theme.crispdramatic.json"),distinctiveunexpected:xt("./theme.distinctiveunexpected.json"),exotichighimpact:xt("./theme.exotichighimpact.json"),goldenafternoon:xt("./theme.goldenafternoon.json"),grecianholiday:xt("./theme.grecianholiday.json"),greenfields:xt("./theme.greenfields.json"),icybluesandgrays:xt("./theme.icybluesandgrays.json"),lightnatural:xt("./theme.lightnatural.json"),modernurban:xt("./theme.modernurban.json"),naturallyelegant:xt("./theme.naturallyelegant.json"),neonnight:xt("./theme.neonnight.json"),nightlife:xt("./theme.nightlife.json"),outdoorsynatural:xt("./theme.outdoorsynatural.json"),poolparty:xt("./theme.poolparty.json"),primarycolors:xt("./theme.primarycolors.json"),serenespalike:xt("./theme.serenespalike.json"),shadesofcitrus:xt("./theme.shadesofcitrus.json"),sleekmodern:xt("./theme.sleekmodern.json"),smokypurples:xt("./theme.smokypurples.json"),subtleversatile:xt("./theme.subtleversatile.json"),summerbarbeque:xt("./theme.summerbarbeque.json"),summersunflower:xt("./theme.summersunflower.json"),surfturf:xt("./theme.surfturf.json"),technologymeetsnature:xt("./theme.technologymeetsnature.json"),understatedversatile:xt("./theme.understatedversatile.json"),warmcool:xt("./theme.warmcool.json"),warmrustic:xt("./theme.warmrustic.json"),winteryreds:xt("./theme.winteryreds.json")}},{"./theme.arcticsunrise.json":635,"./theme.backtoschool.json":636,"./theme.beyondblackwhite.json":637,"./theme.boldberries.json":638,"./theme.candycoatedbrights.json":639,"./theme.cheerfulfriendly.json":640,"./theme.classicmetallics.json":641,"./theme.cozywarm.json":642,"./theme.crispdramatic.json":643,"./theme.dark.json":644,"./theme.distinctiveunexpected.json":645,"./theme.exotichighimpact.json":646,"./theme.goldenafternoon.json":647,"./theme.grass.json":648,"./theme.grecianholiday.json":649,"./theme.greenfields.json":650,"./theme.icybluesandgrays.json":651,"./theme.light.json":652,"./theme.lightnatural.json":653,"./theme.modernurban.json":654,"./theme.naturallyelegant.json":655,"./theme.neonnight.json":656,"./theme.nightlife.json":657,"./theme.ocean.json":658,"./theme.outdoorsynatural.json":659,"./theme.poolparty.json":660,"./theme.primarycolors.json":661,"./theme.serenespalike.json":662,"./theme.shadesofcitrus.json":663,"./theme.sleekmodern.json":664,"./theme.smokypurples.json":665,"./theme.subtleversatile.json":666,"./theme.summerbarbeque.json":667,"./theme.summersunflower.json":668,"./theme.surfturf.json":669,"./theme.technologymeetsnature.json":670,"./theme.understatedversatile.json":671,"./theme.warmcool.json":672,"./theme.warmrustic.json":673,"./theme.winteryreds.json":674}],676:[function(xt,Ct,_t){Ct.exports={"Creating Shapes":[{title:"2D Primitives Demonstration",filePath:"examples/core/primitives/primitives2D.js",sort:1,description:"Demonstrating the basics of a variety of 2D primitives"},{title:"3D Primitives Demonstration",filePath:"examples/core/primitives/primitives3D.js",sort:1,description:"Demonstrating the basics of a variety of 3D primitives"},{title:"Rounded Cuboid",filePath:"examples/core/primitives/roundedCuboid.js",sort:1,description:"Demonstrating the roundedCuboid() functiom"},{title:"Spheres of all sorts",filePath:"examples/core/primitives/sphere.js",sort:1,description:"Demonstrating the sphere() and geodesicSphere() functions"},{title:"Building a Dodecahedron",filePath:"examples/core/primitives/dodecahedron.js",sort:2,description:"building dodecahedron() from cuboids"},{title:"Torus Variety",filePath:"examples/core/primitives/torus.js",sort:2,description:"Demonstrating the capabilities and variations of the torus() primitive"},{title:"Building a Polyhedron from scratch",filePath:"examples/core/primitives/polyhedron.js",sort:4,description:"Demonstrating the polyhedron() function"},{title:"Basic Extrude Functions",filePath:"examples/core/extrusions/basicExtrusions.js",sort:5,description:"Demonstrating the basic types of extrusions, and the variety of objects they can create."},{title:"Extrude Along a Bezier Path",filePath:"examples/core/curves/bezier/extrudeAlongPath.js",sort:5,description:"Using a 3D bezier path to create a solid tube"},{title:"Extrude From Slices",filePath:"examples/core/extrusions/extrudeFromSlices.js",sort:5,description:"Demonstrating the advanced extrusion using slices with varying numbers of points."},{title:"Simple Bezier Extrude",filePath:"examples/core/curves/bezier/simpleExtrude.js",sort:5,description:"Using a 1D bezier function to create a non-uniform extrusion"},{title:"Hull and HullChain 2D example",filePath:"examples/core/hulls/hull2D.js",sort:8,description:"Demonstrating the basics of Hulls in two dimensions"},{title:"Hull and HullChain 3D example",filePath:"examples/core/hulls/hull3D.js",sort:8,description:"Demonstrating the basics of Hulls in three dimensions"},{title:"Nuts and Bolts",filePath:"examples/core/extrusions/nutsAndBolts.js",sort:8,description:"Demonstrating the advanced extrusion using slices to generate screw threads."},{title:"Basic Text Creation",filePath:"examples/core/text/text.js",sort:10,description:"Demonstrating methods of building 3D text"}],"Manipulating Shapes":[{title:"Basic Booleans Demonstration",filePath:"examples/core/booleans/basicBooleans.js",sort:2,description:"Demonstrating the basics of boolean shape combinations"},{title:"Align function demonstration",filePath:"examples/core/transforms/align.js",sort:3,description:"Demonstrating aligning shapes using the align function"},{title:"Expanding 2D and 3D Shapes",filePath:"examples/core/expansions/expand.js",sort:5,description:"Exploring the expand() function on 2D and 3D geometries"},{title:"Offsetting 2D Shapes",filePath:"examples/core/expansions/offset.js",sort:5,description:"Demonstrating the offset() function. Moves all points in a 2d path or 2D geometry perpendicular to the line&#39;s tangent."},{title:"Center function demonstration",filePath:"examples/core/transforms/center.js",sort:10,description:"Using center() to translate objects"},{title:"Measure Aggregate Bounding Box",filePath:"examples/core/measurements/measureAggregateBounds.js",sort:10,description:"Examples of measureAggregateBoundingBox function"},{title:"Measure Area and Volume",filePath:"examples/core/measurements/measureAreaAndVolume.js",sort:10,description:"Examples of measureArea() and measureVolume() function"},{title:"Measure Bounding Box",filePath:"examples/core/measurements/measureBounds.js",sort:10,description:"Examples of measureBoundingBox function"}],Colors:[{title:"Basic Colors",filePath:"examples/core/colors/basicColors.js",sort:1,description:"showing various color functions"},{title:"Color Cube",filePath:"examples/core/colors/colorCube.js",sort:2,description:"looking at the different ways to specify a color"},{title:"Transparency",filePath:"examples/core/colors/transparency.js",sort:2,description:"showing transparent objects"}],Parameters:[{title:"All Parameter Types Demo",filePath:"examples/parameters/allParamTypes.js",sort:1,description:"Example of interactive parameters"},{title:"Birthday Balloons",filePath:"examples/parameters/balloons.js",sort:1,description:"Example of building models from interactive parameters"},{title:"Parametric Involute Gear",filePath:"examples/parameters/gear.js",sort:1,description:"Build a proper involute gear, demonstrating parameters, and how they can be used in complex math."}],Other:[{title:"Coordinate system and Rotation demonstration",filePath:"examples/core/other/orientation.js",sort:1,description:"Demonstrating rotation about the three axes."}]}},{}],677:[function(xt,Ct,_t){Ct.exports={language:"german",english:"Englisch",german:"Deutsch",french:"FranzÃ¶sich",japanese:"Japanisch",croatian:"Kroatisch",chinese:"Chinesisch",Languages:"Sprache",Themes:"Thema",Generation:"Generieren von Geometrie","enable geometry caching":"Experimenteles caching von Geometrie,","timeout for generation":"Abfallzeit fÃ¼r generieren von Soliden (ms)",Shortcuts:"Tastenkombinationen",Command:"Befehl","Key Binding":"Tastenkombination",When:"Wann","type and hit enter":"type and hit enter","not settable":"(nicht verrÃ¤nderbar)",see:"Sehe",grid:"Gitter",axes:"Achsen","auto rotate":"Auto Drehung","auto reload":"Auto Laden","auto zoom":"Auto Zoom",export:"Exportieren","load project":"JSCAD Projekt Laden","AMF (experimental)":"AMF","DXF (ASCII)":"DXF (ascii)",json:"JSON","STL (Binary)":"STL (binÃ¤r)","STL (ASCII)":"STL (ascii)",update:"Aktualisieren",reset:"ZurÃ¼cksetzen","instant update":"Auto Aktualisieren",toPresetView:"Reset view",front:"Forne",back:"Hinten",top:"Oben",bottom:"Unten",left:"Links",right:"Rechts",setProjectionType:"View type",perspective:"Perspektive",orthographic:"Orthographic",editorCommand:"Editor command",reevaluate:"Kompilieren",always:"Immer"}},{}],678:[function(xt,Ct,_t){Ct.exports={language:"english",english:"English",german:"German",french:"French",japanese:"Japanese",croatian:"Croatian",chinese:"Chinese",Languages:"Languages",Themes:"Themes",Generation:"Geometry Generation","enable geometry caching":"Enable Experimental Geometry Caching, ","timeout for generation":"Timeout for Solid Generation (ms)",Shortcuts:"Keyboard Shortcuts",Command:"Command","Key Binding":"Key Stroke",When:"When","type and hit enter":"type and hit enter","not settable":"(read only)",see:"see",grid:"Show Grid",axes:"Show Axis","auto rotate":"Enable Auto-rotate","auto reload":"Enable Auto-reload","auto zoom":"Enable Auto-zoom",export:"Export","load project":"Load a JSCAD project","AMF (experimental)":"AMF","DXF (ASCII)":"DXF (ascii)",json:"JSON","STL (Binary)":"STL (binary)","STL (ASCII)":"STL (ascii)",update:"Update",reset:"Reset","instant update":"Instant Update",toPresetView:"Reset view",front:"Front",back:"Back",top:"Top",bottom:"Bottom",left:"Left",right:"Right",setProjectionType:"View type",perspective:"Perspective",orthographic:"Orthographic",editorCommand:"Editor command",reevaluate:"Compile",always:"Always"}},{}],679:[function(xt,Ct,_t){Ct.exports={language:"french",english:"Anglais",german:"Allemand",french:"FranÃ§ais",japanese:"Japonais",croatian:"Croate",chinese:"Chinois",Languages:"Langue",Themes:"Theme",Generation:"GÃ©nÃ©ration de GÃ©ometrie","enable geometry caching":"Systeme de cache experimental de la geometrie","timeout for generation":"Timeout gÃ©nÃ©ration de solides (ms)",Shortcuts:"Racourcis Clavier",Command:"Commande","Key Binding":"Racourci",When:"Quand","type and hit enter":"type and hit enter","not settable":"(non modifiable)",see:"voir",grid:"Grille",axes:"Axes","auto rotate":"Auto rotation","auto reload":"Auto chargement","auto zoom":"Auto zoom",export:"Exporter","load project":"Charger projet jscad","AMF (experimental)":"AMF","DXF (ASCII)":"DXF (ascii)",json:"JSON","STL (Binary)":"STL (binaire)","STL (ASCII)":"STL (ascii)",update:"Actualiser",reset:"RÃ©initialiser","instant update":"Actualisation InstantanÃ©e",toPresetView:"Reset view",front:"Devant",back:"DerriÃ¨re",top:"Dessus",bottom:"Dessous",left:"Gauche",right:"Droite",setProjectionType:"View type",perspective:"Perspective",orthographic:"Orthographique",editorCommand:"Ã‰diteur commande",reevaluate:"Compiler",always:"Toujours"}},{}],680:[function(xt,Ct,_t){Ct.exports={language:"croatian",english:"Engleski",german:"NjemaÄki",french:"Francuski",japanese:"Japanski",croatian:"Hrvatski",chinese:"Kineski",Languages:"Jezici",Themes:"Tema",Generation:"Generiranje geometrije","enable geometry caching":"OmoguÄ‡i eksperimentalno cachiranje geometrije, ","timeout for generation":"Timeout za generiranje modela (ms)",Shortcuts:"Kratice za tipkovnicu",Command:"Komanda","Key Binding":"Kombinacija tipki",When:"Kada","type and hit enter":"tipkaj i pritisni [enter]","not settable":"(samo pregled)",see:"vidi",grid:"PrikaÅ¾i podlogu",axes:"PrikaÅ¾i osi","auto rotate":"Auto rotacija","auto reload":"Automatsko uÄitavanje","auto zoom":"Auto zoom",export:"Izvoz","load project":"UÄitaj JSCAD projekt","AMF (experimental)":"AMF","DXF (ASCII)":"DXF (ascii)",json:"JSON","STL (Binary)":"STL (binarno)","STL (ASCII)":"STL (ascii)",update:"OsvjeÅ¾i",reset:"PoÄetne postavke","instant update":"Instant osvjeÅ¾avanje",toPresetView:"PoÄetni pregled",front:"Naprijed",back:"Iza",top:"Vrh",bottom:"Dno",left:"Lijevo",right:"Desno",setProjectionType:"Tip pogleda",perspective:"Perspektiva",orthographic:"Ortografski",editorCommand:"Kommanda",reevaluate:"Kompajliraj",always:"Uvijek"}},{}],681:[function(xt,Ct,_t){Ct.exports={language:"japanese",english:"è‹±èªž",german:"ãƒ‰ã‚¤ãƒ„èªž",french:"ãƒ•ãƒ©ãƒ³ã‚¹èªž",japanese:"æ—¥æœ¬èªž",croatian:"ã‚¯ãƒ­ã‚¢ãƒã‚¢èªž",chinese:"ä¸­å›½èªž",Languages:"è¨€èªž",Themes:"ãƒ†ãƒ¼ãƒž",Generation:"Geometry Generation","enable geometry caching":"experimental geometry caching","timeout for generation":"å›³å½¢ã®ç”Ÿæˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ",Shortcuts:"ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ",Command:"ã‚³ãƒžãƒ³ãƒ‰","Key Binding":"ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°",When:"å ´åˆ","type and hit enter":"type and hit enter","not settable":"(å¤‰æ›´ä¸å¯)",see:"see",grid:"ã‚°ãƒªãƒƒãƒ‰",axes:"ã‚¢ã‚¯ã‚·ã‚¹","auto rotate":"è‡ªå‹•å›žè»¢","auto reload":"è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰","auto zoom":"è‡ªå‹•ã‚ºãƒ¼ãƒ ",export:"ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ","load project":"JSCADãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ãƒ‰","AMF (experimental)":"AMF","DXF (ASCII)":"DXF (ã‚¢ã‚¹ã‚­ãƒ¼)",json:"JSON","STL (Binary)":"STL (ãƒã‚¤ãƒŠãƒª)","STL (ASCII)":"STL (ã‚¢ã‚¹ã‚­ãƒ¼)",update:"ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ","instant update":"è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ",reset:"ãƒªã‚»ãƒƒãƒˆ",toPresetView:"ãƒ“ãƒ¥ãƒ¼ã®ãƒªã‚»ãƒƒãƒˆ",front:"å‰é¢",back:"èƒŒé¢",top:"ä¸Šé¢",bottom:"ä¸‹é¢",left:"å·¦å´",right:"å³å´",setProjectionType:"æŠ•å½±å›³",perspective:"é€è¦–å›³",orthographic:"æ­£æŠ•å½±å›³",editorCommand:"ã‚¨ãƒ‡ã‚£ã‚¿ ã‚³ãƒžãƒ³ãƒ‰",reevaluate:"ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«",Documentation:"ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ","User Guide":"ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚¬ã‚¤ãƒ‰","API Reference":"API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹","Open Issues":"ã‚ªãƒ¼ãƒ—ãƒ³å•é¡Œ",Forums:"ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ","User Group":"ãƒ¦ãƒ¼ã‚¶ãƒ¼ ã‚°ãƒ«ãƒ¼ãƒ—","Discord Community":"ãƒ‡ã‚£ã‚¹ã‚³ãƒ¼ãƒ‰ã€€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£",Announcements:"ã‚¢ãƒŒãƒ¼ã‚»ãƒ¡ãƒ³ãƒˆ",Examples:"è¨­è¨ˆä¾‹",always:"ã„ã¤ã‚‚"}},{}],682:[function(xt,Ct,_t){Ct.exports={language:"chinese",english:"è‹±æ–‡",german:"å¾·æ–‡",french:"æ³•æ–‡",japanese:"æ—¥æ–‡",croatian:"å…‹ç½—åœ°äºšè¯­",chinese:"ä¸­æ–‡",Languages:"è¯­è¨€",Themes:"å·¥åœºå¤–è§‚",Generation:"ç”Ÿæˆå‡ ä½•å›¾å½¢","enable geometry caching":"å¼€å¯å›¾å½¢ç¼“å­˜ï¼ˆå®žéªŒæ€§ï¼‰","timeout for generation":"è¶…æ—¶åœæ­¢ç”Ÿæˆæ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰",Shortcuts:"å¿«æ·é”®",Command:"å‘½ä»¤","Key Binding":"å¿«æ·é”®ç»‘å®š",When:"èµ·æ•ˆæ¡ä»¶","type and hit enter":"è¾“å…¥å¿«æ·é”®ï¼ŒæŒ‰å›žè½¦ç”Ÿæ•ˆ","not settable":"(åªè¯»)",see:"è§",grid:"æ˜¾ç¤ºç½‘æ ¼",axes:"æ˜¾ç¤ºåæ ‡è½´","auto rotate":"å¼€å¯è‡ªåŠ¨æ—‹è½¬","auto reload":"å¼€å¯è‡ªåŠ¨åˆ·æ–°","auto zoom":"å¼€å¯è‡ªåŠ¨ç¼©æ”¾",export:"å¯¼å‡º","load project":"è½½å…¥é¡¹ç›®","AMF (experimental)":"AMFï¼ˆå®žéªŒæ€§ï¼‰","DXF (ASCII)":"DXF (å­—ç¬¦ç‰ˆ)",json:"JSON","STL (Binary)":"STL (äºŒè¿›åˆ¶ç‰ˆ)","STL (ASCII)":"STL (å­—ç¬¦ç‰ˆ)",update:"æ›´æ–°",reset:"é‡ç½®","instant update":"ç«‹å³åˆ·æ–°",toPresetView:"é‡ç½®è§†å›¾",front:"å‰",back:"åŽ",top:"ä¸Š",bottom:"ä¸‹",left:"å·¦",right:"å³",setProjectionType:"è§†å›¾ç±»åž‹",perspective:"é€è§†",orthographic:"æ­£è§†",editorCommand:"ç¼–è¾‘å™¨å‘½ä»¤",reevaluate:"ç¼–è¯‘",always:"æ°¸è¿œ"}},{}],683:[function(xt,Ct,_t){var $t,Vn;$t=this,Vn=function(xt,Ct,_t){"use strict";function n(xt){return Promise.resolve(xt).then(s)}function s(xt){try{return xt.run()}catch(Ct){return xt.error(Ct)}}var r=function(xt,Ct,_t){this.sink=xt,this.time=Ct,this.events=_t};r.prototype.run=function(){for(var xt,Ct=this.events,_t=this.sink,$t=0,Vn=Ct.length;$t<Vn;++$t)xt=Ct[$t],this.time=xt.time,_t.event(xt.time,xt.value);Ct.length=0},r.prototype.error=function(xt){this.sink.error(this.time,xt)};var o=function(xt,Ct,_t){this.time=xt,this.value=Ct,this.sink=_t};o.prototype.run=function(){this.sink.end(this.time,this.value)},o.prototype.error=function(xt){this.sink.error(this.time,xt)};var u=function(xt,Ct,_t){this.time=xt,this.value=Ct,this.sink=_t};u.prototype.run=function(){this.sink.error(this.time,this.value)},u.prototype.error=function(xt){throw xt};var h=function(xt){this.sink=xt,this.events=[],this.active=!0};h.prototype.event=function(xt,Ct){this.active&&(0===this.events.length&&n(new r(this.sink,xt,this.events)),this.events.push({time:xt,value:Ct}))},h.prototype.end=function(xt,Ct){this.active&&this._end(new o(xt,Ct,this.sink))},h.prototype.error=function(xt,Ct){this._end(new u(xt,Ct,this.sink))},h.prototype._end=function(xt){this.active=!1,n(xt)};var c=function(xt,Ct,_t){this.sink=xt,this.scheduler=Ct,this._unsubscribe=this._init(_t)};c.prototype._init=function(xt){var Ct=this,i=function(xt){return Ct.sink.error(Ct.scheduler.now(),xt)};try{return xt((function(xt){return Ct.sink.event(Ct.scheduler.now(),xt)}),(function(xt){return Ct.sink.end(Ct.scheduler.now(),xt)}),i)}catch(xt){i(xt)}},c.prototype.dispose=function(){if("function"==typeof this._unsubscribe)return this._unsubscribe.call(void 0)};var f=function(xt){this._subscribe=xt};f.prototype.run=function(xt,Ct){return new c(new h(xt),Ct,this._subscribe)},xt.create=function(xt){return new Ct.Stream(new _t.MulticastSource(new f(xt)))},Object.defineProperty(xt,"__esModule",{value:!0})},"object"==typeof _t&&void 0!==Ct?Vn(_t,xt("most"),xt("@most/multicast")):Vn($t.mostCreate=$t.mostCreate||{},$t.most,$t.mostMulticast)},{"@most/multicast":684,most:770}],684:[function(xt,Ct,_t){var $t,Vn;$t=this,Vn=function(xt,Ct){"use strict";var s=function(xt,Ct){this.source=xt,this.sink=Ct,this.disposed=!1};function i(xt,Ct,_t){try{_t.event(xt,Ct)}catch(Ct){_t.error(xt,Ct)}}function n(xt,Ct,_t){try{_t.end(xt,Ct)}catch(Ct){_t.error(xt,Ct)}}s.prototype.dispose=function(){if(!this.disposed)return this.disposed=!0,0===this.source.remove(this.sink)&&this.source._dispose()};var o=function(xt){return xt.dispose()},_t={dispose:function(){}},u=function(xt){this.source=xt,this.sinks=[],this._disposable=_t};u.prototype.run=function(xt,Ct){return 1===this.add(xt)&&(this._disposable=this.source.run(this,Ct)),new s(this,xt)},u.prototype._dispose=function(){var xt=this._disposable;return this._disposable=_t,Promise.resolve(xt).then(o)},u.prototype.add=function(xt){return this.sinks=Ct.append(xt,this.sinks),this.sinks.length},u.prototype.remove=function(xt){var _t=Ct.findIndex(xt,this.sinks);return _t>=0&&(this.sinks=Ct.remove(_t,this.sinks)),this.sinks.length},u.prototype.event=function(xt,Ct){var _t=this.sinks;if(1===_t.length)return _t[0].event(xt,Ct);for(var $t=0;$t<_t.length;++$t)i(xt,Ct,_t[$t])},u.prototype.end=function(xt,Ct){for(var _t=this.sinks,$t=0;$t<_t.length;++$t)n(xt,Ct,_t[$t])},u.prototype.error=function(xt,Ct){for(var _t=this.sinks,$t=0;$t<_t.length;++$t)_t[$t].error(xt,Ct)},xt.default=function(xt){var Ct=xt.source;return Ct instanceof u?xt:new xt.constructor(new u(Ct))},xt.MulticastSource=u,Object.defineProperty(xt,"__esModule",{value:!0})},"object"==typeof _t&&void 0!==Ct?Vn(_t,xt("@most/prelude")):Vn($t.mostMulticast=$t.mostMulticast||{},$t.mostPrelude)},{"@most/prelude":685}],685:[function(xt,Ct,_t){var $t,Vn;$t=this,Vn=function(xt){"use strict";function n(xt,Ct){if(xt<0)throw new TypeError("n must be >= 0");var _t=Ct.length;return 0===xt||0===_t?Ct:xt>=_t?[]:function(xt,Ct,_t){for(var $t=new Array(_t),Vn=0;Vn<_t;++Vn)$t[Vn]=Ct[xt+Vn];return $t}(xt,Ct,_t-xt)}function e(xt){return function n(Ct,_t){switch(arguments.length){case 0:return n;case 1:return function(_t){return xt(Ct,_t)};default:return xt(Ct,_t)}}}function t(xt){return function n(Ct,_t,$t){switch(arguments.length){case 0:return n;case 1:return e((function(_t,$t){return xt(Ct,_t,$t)}));case 2:return function($t){return xt(Ct,_t,$t)};default:return xt(Ct,_t,$t)}}}xt.append=function(xt,Ct){for(var _t=Ct.length,$t=new Array(_t+1),Vn=0;Vn<_t;++Vn)$t[Vn]=Ct[Vn];return $t[_t]=xt,$t},xt.apply=function(xt,Ct){return xt(Ct)},xt.compose=function(xt,Ct){return function(_t){return xt(Ct(_t))}},xt.concat=function(xt,Ct){var _t=xt.length,$t=Ct.length,Vn=new Array(_t+$t),Gn=0;for(Gn=0;Gn<_t;Gn++)Vn[Gn]=xt[Gn];for(var or=0;or<$t;or++)Vn[Gn++]=Ct[or];return Vn},xt.cons=function(xt,Ct){var _t=Ct.length,$t=new Array(_t+1);$t[0]=xt;for(var Vn=0;Vn<_t;++Vn)$t[Vn+1]=Ct[Vn];return $t},xt.copy=function(xt){for(var Ct=xt.length,_t=new Array(Ct),$t=0;$t<Ct;++$t)_t[$t]=xt[$t];return _t},xt.curry2=e,xt.curry3=t,xt.curry4=function(xt){return function n(Ct,_t,$t,Vn){switch(arguments.length){case 0:return n;case 1:return t((function(_t,$t,Vn){return xt(Ct,_t,$t,Vn)}));case 2:return e((function($t,Vn){return xt(Ct,_t,$t,Vn)}));case 3:return function(Vn){return xt(Ct,_t,$t,Vn)};default:return xt(Ct,_t,$t,Vn)}}},xt.drop=n,xt.findIndex=function(xt,Ct){for(var _t=0,$t=Ct.length;_t<$t;++_t)if(xt===Ct[_t])return _t;return-1},xt.id=function(xt){return xt},xt.isArrayLike=function(xt){return null!=xt&&"number"==typeof xt.length&&"function"!=typeof xt},xt.map=function(xt,Ct){for(var _t=Ct.length,$t=new Array(_t),Vn=0;Vn<_t;++Vn)$t[Vn]=xt(Ct[Vn]);return $t},xt.reduce=function(xt,Ct,_t){for(var $t=Ct,Vn=0,Gn=_t.length;Vn<Gn;++Vn)$t=xt($t,_t[Vn],Vn);return $t},xt.remove=function(xt,Ct){if(xt<0)throw new TypeError("i must be >= 0");var _t=Ct.length;return 0===_t||xt>=_t?Ct:1===_t?[]:function(xt,Ct,_t){var $t,Vn=new Array(_t);for($t=0;$t<xt;++$t)Vn[$t]=Ct[$t];for($t=xt;$t<_t;++$t)Vn[$t]=Ct[$t+1];return Vn}(xt,Ct,_t-1)},xt.removeAll=function(xt,Ct){for(var _t=Ct.length,$t=new Array(_t),Vn=0,Gn=void 0,or=0;or<_t;++or)xt(Gn=Ct[or])||($t[Vn]=Gn,++Vn);return $t.length=Vn,$t},xt.replace=function(xt,Ct,_t){if(Ct<0)throw new TypeError("i must be >= 0");for(var $t=_t.length,Vn=new Array($t),Gn=0;Gn<$t;++Gn)Vn[Gn]=Ct===Gn?xt:_t[Gn];return Vn},xt.tail=function(xt){return n(1,xt)},Object.defineProperty(xt,"__esModule",{value:!0})},Vn("object"==typeof _t&&void 0!==Ct?_t:($t=$t||self).mostPrelude={})},{}],686:[function(xt,Ct,_t){"use strict";_t.byteLength=function byteLength(xt){var Ct=getLens(xt),_t=Ct[0],$t=Ct[1];return 3*(_t+$t)/4-$t},_t.toByteArray=function toByteArray(xt){var Ct,_t,$t=getLens(xt),or=$t[0],lr=$t[1],Fr=new Gn(function _byteLength(xt,Ct,_t){return 3*(Ct+_t)/4-_t}(0,or,lr)),Hr=0,xo=lr>0?or-4:or;for(_t=0;_t<xo;_t+=4)Ct=Vn[xt.charCodeAt(_t)]<<18|Vn[xt.charCodeAt(_t+1)]<<12|Vn[xt.charCodeAt(_t+2)]<<6|Vn[xt.charCodeAt(_t+3)],Fr[Hr++]=Ct>>16&255,Fr[Hr++]=Ct>>8&255,Fr[Hr++]=255&Ct;return 2===lr&&(Ct=Vn[xt.charCodeAt(_t)]<<2|Vn[xt.charCodeAt(_t+1)]>>4,Fr[Hr++]=255&Ct),1===lr&&(Ct=Vn[xt.charCodeAt(_t)]<<10|Vn[xt.charCodeAt(_t+1)]<<4|Vn[xt.charCodeAt(_t+2)]>>2,Fr[Hr++]=Ct>>8&255,Fr[Hr++]=255&Ct),Fr},_t.fromByteArray=function fromByteArray(xt){for(var Ct,_t=xt.length,Vn=_t%3,Gn=[],or=0,lr=_t-Vn;or<lr;or+=16383)Gn.push(encodeChunk(xt,or,or+16383>lr?lr:or+16383));return 1===Vn?(Ct=xt[_t-1],Gn.push($t[Ct>>2]+$t[Ct<<4&63]+"==")):2===Vn&&(Ct=(xt[_t-2]<<8)+xt[_t-1],Gn.push($t[Ct>>10]+$t[Ct>>4&63]+$t[Ct<<2&63]+"=")),Gn.join("")};for(var $t=[],Vn=[],Gn="undefined"!=typeof Uint8Array?Uint8Array:Array,or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lr=0;lr<64;++lr)$t[lr]=or[lr],Vn[or.charCodeAt(lr)]=lr;function getLens(xt){var Ct=xt.length;if(Ct%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _t=xt.indexOf("=");return-1===_t&&(_t=Ct),[_t,_t===Ct?0:4-_t%4]}function tripletToBase64(xt){return $t[xt>>18&63]+$t[xt>>12&63]+$t[xt>>6&63]+$t[63&xt]}function encodeChunk(xt,Ct,_t){for(var $t,Vn=[],Gn=Ct;Gn<_t;Gn+=3)$t=(xt[Gn]<<16&16711680)+(xt[Gn+1]<<8&65280)+(255&xt[Gn+2]),Vn.push(tripletToBase64($t));return Vn.join("")}Vn["-".charCodeAt(0)]=62,Vn["_".charCodeAt(0)]=63},{}],687:[function(xt,Ct,_t){},{}],688:[function(xt,Ct,_t){(function(Ct){(function(){"use strict";var Ct=xt("base64-js"),$t=xt("ieee754");_t.Buffer=Buffer,_t.SlowBuffer=function SlowBuffer(xt){return+xt!=xt&&(xt=0),Buffer.alloc(+xt)},_t.INSPECT_MAX_BYTES=50;var Vn=2147483647;function createBuffer(xt){if(xt>Vn)throw new RangeError('The value "'+xt+'" is invalid for option "size"');var Ct=new Uint8Array(xt);return Ct.__proto__=Buffer.prototype,Ct}function Buffer(xt,Ct,_t){if("number"==typeof xt){if("string"==typeof Ct)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(xt)}return from(xt,Ct,_t)}function from(xt,Ct,_t){if("string"==typeof xt)return function fromString(xt,Ct){if("string"==typeof Ct&&""!==Ct||(Ct="utf8"),!Buffer.isEncoding(Ct))throw new TypeError("Unknown encoding: "+Ct);var _t=0|byteLength(xt,Ct),$t=createBuffer(_t),Vn=$t.write(xt,Ct);return Vn!==_t&&($t=$t.slice(0,Vn)),$t}(xt,Ct);if(ArrayBuffer.isView(xt))return fromArrayLike(xt);if(null==xt)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xt);if(isInstance(xt,ArrayBuffer)||xt&&isInstance(xt.buffer,ArrayBuffer))return function fromArrayBuffer(xt,Ct,_t){if(Ct<0||xt.byteLength<Ct)throw new RangeError('"offset" is outside of buffer bounds');if(xt.byteLength<Ct+(_t||0))throw new RangeError('"length" is outside of buffer bounds');var $t;return($t=void 0===Ct&&void 0===_t?new Uint8Array(xt):void 0===_t?new Uint8Array(xt,Ct):new Uint8Array(xt,Ct,_t)).__proto__=Buffer.prototype,$t}(xt,Ct,_t);if("number"==typeof xt)throw new TypeError('The "value" argument must not be of type number. Received type number');var $t=xt.valueOf&&xt.valueOf();if(null!=$t&&$t!==xt)return Buffer.from($t,Ct,_t);var Vn=function fromObject(xt){if(Buffer.isBuffer(xt)){var Ct=0|checked(xt.length),_t=createBuffer(Ct);return 0===_t.length||xt.copy(_t,0,0,Ct),_t}return void 0!==xt.length?"number"!=typeof xt.length||numberIsNaN(xt.length)?createBuffer(0):fromArrayLike(xt):"Buffer"===xt.type&&Array.isArray(xt.data)?fromArrayLike(xt.data):void 0}(xt);if(Vn)return Vn;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof xt[Symbol.toPrimitive])return Buffer.from(xt[Symbol.toPrimitive]("string"),Ct,_t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof xt)}function assertSize(xt){if("number"!=typeof xt)throw new TypeError('"size" argument must be of type number');if(xt<0)throw new RangeError('The value "'+xt+'" is invalid for option "size"')}function allocUnsafe(xt){return assertSize(xt),createBuffer(xt<0?0:0|checked(xt))}function fromArrayLike(xt){for(var Ct=xt.length<0?0:0|checked(xt.length),_t=createBuffer(Ct),$t=0;$t<Ct;$t+=1)_t[$t]=255&xt[$t];return _t}function checked(xt){if(xt>=Vn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Vn.toString(16)+" bytes");return 0|xt}function byteLength(xt,Ct){if(Buffer.isBuffer(xt))return xt.length;if(ArrayBuffer.isView(xt)||isInstance(xt,ArrayBuffer))return xt.byteLength;if("string"!=typeof xt)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof xt);var _t=xt.length,$t=arguments.length>2&&!0===arguments[2];if(!$t&&0===_t)return 0;for(var Vn=!1;;)switch(Ct){case"ascii":case"latin1":case"binary":return _t;case"utf8":case"utf-8":return utf8ToBytes(xt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*_t;case"hex":return _t>>>1;case"base64":return base64ToBytes(xt).length;default:if(Vn)return $t?-1:utf8ToBytes(xt).length;Ct=(""+Ct).toLowerCase(),Vn=!0}}function slowToString(xt,Ct,_t){var $t=!1;if((void 0===Ct||Ct<0)&&(Ct=0),Ct>this.length)return"";if((void 0===_t||_t>this.length)&&(_t=this.length),_t<=0)return"";if((_t>>>=0)<=(Ct>>>=0))return"";for(xt||(xt="utf8");;)switch(xt){case"hex":return hexSlice(this,Ct,_t);case"utf8":case"utf-8":return utf8Slice(this,Ct,_t);case"ascii":return asciiSlice(this,Ct,_t);case"latin1":case"binary":return latin1Slice(this,Ct,_t);case"base64":return base64Slice(this,Ct,_t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,Ct,_t);default:if($t)throw new TypeError("Unknown encoding: "+xt);xt=(xt+"").toLowerCase(),$t=!0}}function swap(xt,Ct,_t){var $t=xt[Ct];xt[Ct]=xt[_t],xt[_t]=$t}function bidirectionalIndexOf(xt,Ct,_t,$t,Vn){if(0===xt.length)return-1;if("string"==typeof _t?($t=_t,_t=0):_t>2147483647?_t=2147483647:_t<-2147483648&&(_t=-2147483648),numberIsNaN(_t=+_t)&&(_t=Vn?0:xt.length-1),_t<0&&(_t=xt.length+_t),_t>=xt.length){if(Vn)return-1;_t=xt.length-1}else if(_t<0){if(!Vn)return-1;_t=0}if("string"==typeof Ct&&(Ct=Buffer.from(Ct,$t)),Buffer.isBuffer(Ct))return 0===Ct.length?-1:arrayIndexOf(xt,Ct,_t,$t,Vn);if("number"==typeof Ct)return Ct&=255,"function"==typeof Uint8Array.prototype.indexOf?Vn?Uint8Array.prototype.indexOf.call(xt,Ct,_t):Uint8Array.prototype.lastIndexOf.call(xt,Ct,_t):arrayIndexOf(xt,[Ct],_t,$t,Vn);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(xt,Ct,_t,$t,Vn){var Gn,or=1,lr=xt.length,Fr=Ct.length;if(void 0!==$t&&("ucs2"===($t=String($t).toLowerCase())||"ucs-2"===$t||"utf16le"===$t||"utf-16le"===$t)){if(xt.length<2||Ct.length<2)return-1;or=2,lr/=2,Fr/=2,_t/=2}function a(xt,Ct){return 1===or?xt[Ct]:xt.readUInt16BE(Ct*or)}if(Vn){var Hr=-1;for(Gn=_t;Gn<lr;Gn++)if(a(xt,Gn)===a(Ct,-1===Hr?0:Gn-Hr)){if(-1===Hr&&(Hr=Gn),Gn-Hr+1===Fr)return Hr*or}else-1!==Hr&&(Gn-=Gn-Hr),Hr=-1}else for(_t+Fr>lr&&(_t=lr-Fr),Gn=_t;Gn>=0;Gn--){for(var xo=!0,Eo=0;Eo<Fr;Eo++)if(a(xt,Gn+Eo)!==a(Ct,Eo)){xo=!1;break}if(xo)return Gn}return-1}function hexWrite(xt,Ct,_t,$t){_t=Number(_t)||0;var Vn=xt.length-_t;$t?($t=Number($t))>Vn&&($t=Vn):$t=Vn;var Gn=Ct.length;$t>Gn/2&&($t=Gn/2);for(var or=0;or<$t;++or){var lr=parseInt(Ct.substr(2*or,2),16);if(numberIsNaN(lr))return or;xt[_t+or]=lr}return or}function utf8Write(xt,Ct,_t,$t){return blitBuffer(utf8ToBytes(Ct,xt.length-_t),xt,_t,$t)}function asciiWrite(xt,Ct,_t,$t){return blitBuffer(function asciiToBytes(xt){for(var Ct=[],_t=0;_t<xt.length;++_t)Ct.push(255&xt.charCodeAt(_t));return Ct}(Ct),xt,_t,$t)}function latin1Write(xt,Ct,_t,$t){return asciiWrite(xt,Ct,_t,$t)}function base64Write(xt,Ct,_t,$t){return blitBuffer(base64ToBytes(Ct),xt,_t,$t)}function ucs2Write(xt,Ct,_t,$t){return blitBuffer(function utf16leToBytes(xt,Ct){for(var _t,$t,Vn,Gn=[],or=0;or<xt.length&&!((Ct-=2)<0);++or)$t=(_t=xt.charCodeAt(or))>>8,Vn=_t%256,Gn.push(Vn),Gn.push($t);return Gn}(Ct,xt.length-_t),xt,_t,$t)}function base64Slice(xt,_t,$t){return 0===_t&&$t===xt.length?Ct.fromByteArray(xt):Ct.fromByteArray(xt.slice(_t,$t))}function utf8Slice(xt,Ct,_t){_t=Math.min(xt.length,_t);for(var $t=[],Vn=Ct;Vn<_t;){var or,lr,Fr,Hr,xo=xt[Vn],Eo=null,Mo=xo>239?4:xo>223?3:xo>191?2:1;if(Vn+Mo<=_t)switch(Mo){case 1:xo<128&&(Eo=xo);break;case 2:128==(192&(or=xt[Vn+1]))&&(Hr=(31&xo)<<6|63&or)>127&&(Eo=Hr);break;case 3:or=xt[Vn+1],lr=xt[Vn+2],128==(192&or)&&128==(192&lr)&&(Hr=(15&xo)<<12|(63&or)<<6|63&lr)>2047&&(Hr<55296||Hr>57343)&&(Eo=Hr);break;case 4:or=xt[Vn+1],lr=xt[Vn+2],Fr=xt[Vn+3],128==(192&or)&&128==(192&lr)&&128==(192&Fr)&&(Hr=(15&xo)<<18|(63&or)<<12|(63&lr)<<6|63&Fr)>65535&&Hr<1114112&&(Eo=Hr)}null===Eo?(Eo=65533,Mo=1):Eo>65535&&(Eo-=65536,$t.push(Eo>>>10&1023|55296),Eo=56320|1023&Eo),$t.push(Eo),Vn+=Mo}return function decodeCodePointsArray(xt){var Ct=xt.length;if(Ct<=Gn)return String.fromCharCode.apply(String,xt);for(var _t="",$t=0;$t<Ct;)_t+=String.fromCharCode.apply(String,xt.slice($t,$t+=Gn));return _t}($t)}_t.kMaxLength=Vn,Buffer.TYPED_ARRAY_SUPPORT=function typedArraySupport(){try{var xt=new Uint8Array(1);return xt.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===xt.foo()}catch(xt){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=function(xt,Ct,_t){return from(xt,Ct,_t)},Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function(xt,Ct,_t){return function alloc(xt,Ct,_t){return assertSize(xt),xt<=0?createBuffer(xt):void 0!==Ct?"string"==typeof _t?createBuffer(xt).fill(Ct,_t):createBuffer(xt).fill(Ct):createBuffer(xt)}(xt,Ct,_t)},Buffer.allocUnsafe=function(xt){return allocUnsafe(xt)},Buffer.allocUnsafeSlow=function(xt){return allocUnsafe(xt)},Buffer.isBuffer=function(xt){return null!=xt&&!0===xt._isBuffer&&xt!==Buffer.prototype},Buffer.compare=function(xt,Ct){if(isInstance(xt,Uint8Array)&&(xt=Buffer.from(xt,xt.offset,xt.byteLength)),isInstance(Ct,Uint8Array)&&(Ct=Buffer.from(Ct,Ct.offset,Ct.byteLength)),!Buffer.isBuffer(xt)||!Buffer.isBuffer(Ct))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(xt===Ct)return 0;for(var _t=xt.length,$t=Ct.length,Vn=0,Gn=Math.min(_t,$t);Vn<Gn;++Vn)if(xt[Vn]!==Ct[Vn]){_t=xt[Vn],$t=Ct[Vn];break}return _t<$t?-1:$t<_t?1:0},Buffer.isEncoding=function(xt){switch(String(xt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(xt,Ct){if(!Array.isArray(xt))throw new TypeError('"list" argument must be an Array of Buffers');if(0===xt.length)return Buffer.alloc(0);var _t;if(void 0===Ct)for(Ct=0,_t=0;_t<xt.length;++_t)Ct+=xt[_t].length;var $t=Buffer.allocUnsafe(Ct),Vn=0;for(_t=0;_t<xt.length;++_t){var Gn=xt[_t];if(isInstance(Gn,Uint8Array)&&(Gn=Buffer.from(Gn)),!Buffer.isBuffer(Gn))throw new TypeError('"list" argument must be an Array of Buffers');Gn.copy($t,Vn),Vn+=Gn.length}return $t},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var xt=this.length;if(xt%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Ct=0;Ct<xt;Ct+=2)swap(this,Ct,Ct+1);return this},Buffer.prototype.swap32=function(){var xt=this.length;if(xt%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Ct=0;Ct<xt;Ct+=4)swap(this,Ct,Ct+3),swap(this,Ct+1,Ct+2);return this},Buffer.prototype.swap64=function(){var xt=this.length;if(xt%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Ct=0;Ct<xt;Ct+=8)swap(this,Ct,Ct+7),swap(this,Ct+1,Ct+6),swap(this,Ct+2,Ct+5),swap(this,Ct+3,Ct+4);return this},Buffer.prototype.toString=function(){var xt=this.length;return 0===xt?"":0===arguments.length?utf8Slice(this,0,xt):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(xt){if(!Buffer.isBuffer(xt))throw new TypeError("Argument must be a Buffer");return this===xt||0===Buffer.compare(this,xt)},Buffer.prototype.inspect=function(){var xt="",Ct=_t.INSPECT_MAX_BYTES;return xt=this.toString("hex",0,Ct).replace(/(.{2})/g,"$1 ").trim(),this.length>Ct&&(xt+=" ... "),"<Buffer "+xt+">"},Buffer.prototype.compare=function(xt,Ct,_t,$t,Vn){if(isInstance(xt,Uint8Array)&&(xt=Buffer.from(xt,xt.offset,xt.byteLength)),!Buffer.isBuffer(xt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof xt);if(void 0===Ct&&(Ct=0),void 0===_t&&(_t=xt?xt.length:0),void 0===$t&&($t=0),void 0===Vn&&(Vn=this.length),Ct<0||_t>xt.length||$t<0||Vn>this.length)throw new RangeError("out of range index");if($t>=Vn&&Ct>=_t)return 0;if($t>=Vn)return-1;if(Ct>=_t)return 1;if(this===xt)return 0;for(var Gn=(Vn>>>=0)-($t>>>=0),or=(_t>>>=0)-(Ct>>>=0),lr=Math.min(Gn,or),Fr=this.slice($t,Vn),Hr=xt.slice(Ct,_t),xo=0;xo<lr;++xo)if(Fr[xo]!==Hr[xo]){Gn=Fr[xo],or=Hr[xo];break}return Gn<or?-1:or<Gn?1:0},Buffer.prototype.includes=function(xt,Ct,_t){return-1!==this.indexOf(xt,Ct,_t)},Buffer.prototype.indexOf=function(xt,Ct,_t){return bidirectionalIndexOf(this,xt,Ct,_t,!0)},Buffer.prototype.lastIndexOf=function(xt,Ct,_t){return bidirectionalIndexOf(this,xt,Ct,_t,!1)},Buffer.prototype.write=function(xt,Ct,_t,$t){if(void 0===Ct)$t="utf8",_t=this.length,Ct=0;else if(void 0===_t&&"string"==typeof Ct)$t=Ct,_t=this.length,Ct=0;else{if(!isFinite(Ct))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Ct>>>=0,isFinite(_t)?(_t>>>=0,void 0===$t&&($t="utf8")):($t=_t,_t=void 0)}var Vn=this.length-Ct;if((void 0===_t||_t>Vn)&&(_t=Vn),xt.length>0&&(_t<0||Ct<0)||Ct>this.length)throw new RangeError("Attempt to write outside buffer bounds");$t||($t="utf8");for(var Gn=!1;;)switch($t){case"hex":return hexWrite(this,xt,Ct,_t);case"utf8":case"utf-8":return utf8Write(this,xt,Ct,_t);case"ascii":return asciiWrite(this,xt,Ct,_t);case"latin1":case"binary":return latin1Write(this,xt,Ct,_t);case"base64":return base64Write(this,xt,Ct,_t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,xt,Ct,_t);default:if(Gn)throw new TypeError("Unknown encoding: "+$t);$t=(""+$t).toLowerCase(),Gn=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Gn=4096;function asciiSlice(xt,Ct,_t){var $t="";_t=Math.min(xt.length,_t);for(var Vn=Ct;Vn<_t;++Vn)$t+=String.fromCharCode(127&xt[Vn]);return $t}function latin1Slice(xt,Ct,_t){var $t="";_t=Math.min(xt.length,_t);for(var Vn=Ct;Vn<_t;++Vn)$t+=String.fromCharCode(xt[Vn]);return $t}function hexSlice(xt,Ct,_t){var $t=xt.length;(!Ct||Ct<0)&&(Ct=0),(!_t||_t<0||_t>$t)&&(_t=$t);for(var Vn="",Gn=Ct;Gn<_t;++Gn)Vn+=toHex(xt[Gn]);return Vn}function utf16leSlice(xt,Ct,_t){for(var $t=xt.slice(Ct,_t),Vn="",Gn=0;Gn<$t.length;Gn+=2)Vn+=String.fromCharCode($t[Gn]+256*$t[Gn+1]);return Vn}function checkOffset(xt,Ct,_t){if(xt%1!=0||xt<0)throw new RangeError("offset is not uint");if(xt+Ct>_t)throw new RangeError("Trying to access beyond buffer length")}function checkInt(xt,Ct,_t,$t,Vn,Gn){if(!Buffer.isBuffer(xt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ct>Vn||Ct<Gn)throw new RangeError('"value" argument is out of bounds');if(_t+$t>xt.length)throw new RangeError("Index out of range")}function checkIEEE754(xt,Ct,_t,$t,Vn,Gn){if(_t+$t>xt.length)throw new RangeError("Index out of range");if(_t<0)throw new RangeError("Index out of range")}function writeFloat(xt,Ct,_t,Vn,Gn){return Ct=+Ct,_t>>>=0,Gn||checkIEEE754(xt,0,_t,4),$t.write(xt,Ct,_t,Vn,23,4),_t+4}function writeDouble(xt,Ct,_t,Vn,Gn){return Ct=+Ct,_t>>>=0,Gn||checkIEEE754(xt,0,_t,8),$t.write(xt,Ct,_t,Vn,52,8),_t+8}Buffer.prototype.slice=function(xt,Ct){var _t=this.length;(xt=~~xt)<0?(xt+=_t)<0&&(xt=0):xt>_t&&(xt=_t),(Ct=void 0===Ct?_t:~~Ct)<0?(Ct+=_t)<0&&(Ct=0):Ct>_t&&(Ct=_t),Ct<xt&&(Ct=xt);var $t=this.subarray(xt,Ct);return $t.__proto__=Buffer.prototype,$t},Buffer.prototype.readUIntLE=function(xt,Ct,_t){xt>>>=0,Ct>>>=0,_t||checkOffset(xt,Ct,this.length);for(var $t=this[xt],Vn=1,Gn=0;++Gn<Ct&&(Vn*=256);)$t+=this[xt+Gn]*Vn;return $t},Buffer.prototype.readUIntBE=function(xt,Ct,_t){xt>>>=0,Ct>>>=0,_t||checkOffset(xt,Ct,this.length);for(var $t=this[xt+--Ct],Vn=1;Ct>0&&(Vn*=256);)$t+=this[xt+--Ct]*Vn;return $t},Buffer.prototype.readUInt8=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,1,this.length),this[xt]},Buffer.prototype.readUInt16LE=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,2,this.length),this[xt]|this[xt+1]<<8},Buffer.prototype.readUInt16BE=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,2,this.length),this[xt]<<8|this[xt+1]},Buffer.prototype.readUInt32LE=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,4,this.length),(this[xt]|this[xt+1]<<8|this[xt+2]<<16)+16777216*this[xt+3]},Buffer.prototype.readUInt32BE=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,4,this.length),16777216*this[xt]+(this[xt+1]<<16|this[xt+2]<<8|this[xt+3])},Buffer.prototype.readIntLE=function(xt,Ct,_t){xt>>>=0,Ct>>>=0,_t||checkOffset(xt,Ct,this.length);for(var $t=this[xt],Vn=1,Gn=0;++Gn<Ct&&(Vn*=256);)$t+=this[xt+Gn]*Vn;return $t>=(Vn*=128)&&($t-=Math.pow(2,8*Ct)),$t},Buffer.prototype.readIntBE=function(xt,Ct,_t){xt>>>=0,Ct>>>=0,_t||checkOffset(xt,Ct,this.length);for(var $t=Ct,Vn=1,Gn=this[xt+--$t];$t>0&&(Vn*=256);)Gn+=this[xt+--$t]*Vn;return Gn>=(Vn*=128)&&(Gn-=Math.pow(2,8*Ct)),Gn},Buffer.prototype.readInt8=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,1,this.length),128&this[xt]?-1*(255-this[xt]+1):this[xt]},Buffer.prototype.readInt16LE=function(xt,Ct){xt>>>=0,Ct||checkOffset(xt,2,this.length);var _t=this[xt]|this[xt+1]<<8;return 32768&_t?4294901760|_t:_t},Buffer.prototype.readInt16BE=function(xt,Ct){xt>>>=0,Ct||checkOffset(xt,2,this.length);var _t=this[xt+1]|this[xt]<<8;return 32768&_t?4294901760|_t:_t},Buffer.prototype.readInt32LE=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,4,this.length),this[xt]|this[xt+1]<<8|this[xt+2]<<16|this[xt+3]<<24},Buffer.prototype.readInt32BE=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,4,this.length),this[xt]<<24|this[xt+1]<<16|this[xt+2]<<8|this[xt+3]},Buffer.prototype.readFloatLE=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,4,this.length),$t.read(this,xt,!0,23,4)},Buffer.prototype.readFloatBE=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,4,this.length),$t.read(this,xt,!1,23,4)},Buffer.prototype.readDoubleLE=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,8,this.length),$t.read(this,xt,!0,52,8)},Buffer.prototype.readDoubleBE=function(xt,Ct){return xt>>>=0,Ct||checkOffset(xt,8,this.length),$t.read(this,xt,!1,52,8)},Buffer.prototype.writeUIntLE=function(xt,Ct,_t,$t){xt=+xt,Ct>>>=0,_t>>>=0,$t||checkInt(this,xt,Ct,_t,Math.pow(2,8*_t)-1,0);var Vn=1,Gn=0;for(this[Ct]=255&xt;++Gn<_t&&(Vn*=256);)this[Ct+Gn]=xt/Vn&255;return Ct+_t},Buffer.prototype.writeUIntBE=function(xt,Ct,_t,$t){xt=+xt,Ct>>>=0,_t>>>=0,$t||checkInt(this,xt,Ct,_t,Math.pow(2,8*_t)-1,0);var Vn=_t-1,Gn=1;for(this[Ct+Vn]=255&xt;--Vn>=0&&(Gn*=256);)this[Ct+Vn]=xt/Gn&255;return Ct+_t},Buffer.prototype.writeUInt8=function(xt,Ct,_t){return xt=+xt,Ct>>>=0,_t||checkInt(this,xt,Ct,1,255,0),this[Ct]=255&xt,Ct+1},Buffer.prototype.writeUInt16LE=function(xt,Ct,_t){return xt=+xt,Ct>>>=0,_t||checkInt(this,xt,Ct,2,65535,0),this[Ct]=255&xt,this[Ct+1]=xt>>>8,Ct+2},Buffer.prototype.writeUInt16BE=function(xt,Ct,_t){return xt=+xt,Ct>>>=0,_t||checkInt(this,xt,Ct,2,65535,0),this[Ct]=xt>>>8,this[Ct+1]=255&xt,Ct+2},Buffer.prototype.writeUInt32LE=function(xt,Ct,_t){return xt=+xt,Ct>>>=0,_t||checkInt(this,xt,Ct,4,4294967295,0),this[Ct+3]=xt>>>24,this[Ct+2]=xt>>>16,this[Ct+1]=xt>>>8,this[Ct]=255&xt,Ct+4},Buffer.prototype.writeUInt32BE=function(xt,Ct,_t){return xt=+xt,Ct>>>=0,_t||checkInt(this,xt,Ct,4,4294967295,0),this[Ct]=xt>>>24,this[Ct+1]=xt>>>16,this[Ct+2]=xt>>>8,this[Ct+3]=255&xt,Ct+4},Buffer.prototype.writeIntLE=function(xt,Ct,_t,$t){if(xt=+xt,Ct>>>=0,!$t){var Vn=Math.pow(2,8*_t-1);checkInt(this,xt,Ct,_t,Vn-1,-Vn)}var Gn=0,or=1,lr=0;for(this[Ct]=255&xt;++Gn<_t&&(or*=256);)xt<0&&0===lr&&0!==this[Ct+Gn-1]&&(lr=1),this[Ct+Gn]=(xt/or|0)-lr&255;return Ct+_t},Buffer.prototype.writeIntBE=function(xt,Ct,_t,$t){if(xt=+xt,Ct>>>=0,!$t){var Vn=Math.pow(2,8*_t-1);checkInt(this,xt,Ct,_t,Vn-1,-Vn)}var Gn=_t-1,or=1,lr=0;for(this[Ct+Gn]=255&xt;--Gn>=0&&(or*=256);)xt<0&&0===lr&&0!==this[Ct+Gn+1]&&(lr=1),this[Ct+Gn]=(xt/or|0)-lr&255;return Ct+_t},Buffer.prototype.writeInt8=function(xt,Ct,_t){return xt=+xt,Ct>>>=0,_t||checkInt(this,xt,Ct,1,127,-128),xt<0&&(xt=255+xt+1),this[Ct]=255&xt,Ct+1},Buffer.prototype.writeInt16LE=function(xt,Ct,_t){return xt=+xt,Ct>>>=0,_t||checkInt(this,xt,Ct,2,32767,-32768),this[Ct]=255&xt,this[Ct+1]=xt>>>8,Ct+2},Buffer.prototype.writeInt16BE=function(xt,Ct,_t){return xt=+xt,Ct>>>=0,_t||checkInt(this,xt,Ct,2,32767,-32768),this[Ct]=xt>>>8,this[Ct+1]=255&xt,Ct+2},Buffer.prototype.writeInt32LE=function(xt,Ct,_t){return xt=+xt,Ct>>>=0,_t||checkInt(this,xt,Ct,4,2147483647,-2147483648),this[Ct]=255&xt,this[Ct+1]=xt>>>8,this[Ct+2]=xt>>>16,this[Ct+3]=xt>>>24,Ct+4},Buffer.prototype.writeInt32BE=function(xt,Ct,_t){return xt=+xt,Ct>>>=0,_t||checkInt(this,xt,Ct,4,2147483647,-2147483648),xt<0&&(xt=4294967295+xt+1),this[Ct]=xt>>>24,this[Ct+1]=xt>>>16,this[Ct+2]=xt>>>8,this[Ct+3]=255&xt,Ct+4},Buffer.prototype.writeFloatLE=function(xt,Ct,_t){return writeFloat(this,xt,Ct,!0,_t)},Buffer.prototype.writeFloatBE=function(xt,Ct,_t){return writeFloat(this,xt,Ct,!1,_t)},Buffer.prototype.writeDoubleLE=function(xt,Ct,_t){return writeDouble(this,xt,Ct,!0,_t)},Buffer.prototype.writeDoubleBE=function(xt,Ct,_t){return writeDouble(this,xt,Ct,!1,_t)},Buffer.prototype.copy=function(xt,Ct,_t,$t){if(!Buffer.isBuffer(xt))throw new TypeError("argument should be a Buffer");if(_t||(_t=0),$t||0===$t||($t=this.length),Ct>=xt.length&&(Ct=xt.length),Ct||(Ct=0),$t>0&&$t<_t&&($t=_t),$t===_t)return 0;if(0===xt.length||0===this.length)return 0;if(Ct<0)throw new RangeError("targetStart out of bounds");if(_t<0||_t>=this.length)throw new RangeError("Index out of range");if($t<0)throw new RangeError("sourceEnd out of bounds");$t>this.length&&($t=this.length),xt.length-Ct<$t-_t&&($t=xt.length-Ct+_t);var Vn=$t-_t;if(this===xt&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(Ct,_t,$t);else if(this===xt&&_t<Ct&&Ct<$t)for(var Gn=Vn-1;Gn>=0;--Gn)xt[Gn+Ct]=this[Gn+_t];else Uint8Array.prototype.set.call(xt,this.subarray(_t,$t),Ct);return Vn},Buffer.prototype.fill=function(xt,Ct,_t,$t){if("string"==typeof xt){if("string"==typeof Ct?($t=Ct,Ct=0,_t=this.length):"string"==typeof _t&&($t=_t,_t=this.length),void 0!==$t&&"string"!=typeof $t)throw new TypeError("encoding must be a string");if("string"==typeof $t&&!Buffer.isEncoding($t))throw new TypeError("Unknown encoding: "+$t);if(1===xt.length){var Vn=xt.charCodeAt(0);("utf8"===$t&&Vn<128||"latin1"===$t)&&(xt=Vn)}}else"number"==typeof xt&&(xt&=255);if(Ct<0||this.length<Ct||this.length<_t)throw new RangeError("Out of range index");if(_t<=Ct)return this;var Gn;if(Ct>>>=0,_t=void 0===_t?this.length:_t>>>0,xt||(xt=0),"number"==typeof xt)for(Gn=Ct;Gn<_t;++Gn)this[Gn]=xt;else{var or=Buffer.isBuffer(xt)?xt:Buffer.from(xt,$t),lr=or.length;if(0===lr)throw new TypeError('The value "'+xt+'" is invalid for argument "value"');for(Gn=0;Gn<_t-Ct;++Gn)this[Gn+Ct]=or[Gn%lr]}return this};var or=/[^+/0-9A-Za-z-_]/g;function toHex(xt){return xt<16?"0"+xt.toString(16):xt.toString(16)}function utf8ToBytes(xt,Ct){var _t;Ct=Ct||1/0;for(var $t=xt.length,Vn=null,Gn=[],or=0;or<$t;++or){if((_t=xt.charCodeAt(or))>55295&&_t<57344){if(!Vn){if(_t>56319){(Ct-=3)>-1&&Gn.push(239,191,189);continue}if(or+1===$t){(Ct-=3)>-1&&Gn.push(239,191,189);continue}Vn=_t;continue}if(_t<56320){(Ct-=3)>-1&&Gn.push(239,191,189),Vn=_t;continue}_t=65536+(Vn-55296<<10|_t-56320)}else Vn&&(Ct-=3)>-1&&Gn.push(239,191,189);if(Vn=null,_t<128){if((Ct-=1)<0)break;Gn.push(_t)}else if(_t<2048){if((Ct-=2)<0)break;Gn.push(_t>>6|192,63&_t|128)}else if(_t<65536){if((Ct-=3)<0)break;Gn.push(_t>>12|224,_t>>6&63|128,63&_t|128)}else{if(!(_t<1114112))throw new Error("Invalid code point");if((Ct-=4)<0)break;Gn.push(_t>>18|240,_t>>12&63|128,_t>>6&63|128,63&_t|128)}}return Gn}function base64ToBytes(xt){return Ct.toByteArray(function base64clean(xt){if((xt=(xt=xt.split("=")[0]).trim().replace(or,"")).length<2)return"";for(;xt.length%4!=0;)xt+="=";return xt}(xt))}function blitBuffer(xt,Ct,_t,$t){for(var Vn=0;Vn<$t&&!(Vn+_t>=Ct.length||Vn>=xt.length);++Vn)Ct[Vn+_t]=xt[Vn];return Vn}function isInstance(xt,Ct){return xt instanceof Ct||null!=xt&&null!=xt.constructor&&null!=xt.constructor.name&&xt.constructor.name===Ct.name}function numberIsNaN(xt){return xt!=xt}}).call(this)}).call(this,xt("buffer").Buffer)},{"base64-js":686,buffer:688,ieee754:709}],689:[function(xt,Ct,_t){"use strict";var $t=xt("get-intrinsic"),Vn=xt("./"),Gn=Vn($t("String.prototype.indexOf"));Ct.exports=function(xt,Ct){var _t=$t(xt,!!Ct);return"function"==typeof _t&&Gn(xt,".prototype.")>-1?Vn(_t):_t}},{"./":690,"get-intrinsic":702}],690:[function(xt,Ct,_t){"use strict";var $t=xt("function-bind"),Vn=xt("get-intrinsic"),Gn=xt("set-function-length"),or=xt("es-errors/type"),lr=Vn("%Function.prototype.apply%"),Fr=Vn("%Function.prototype.call%"),Hr=Vn("%Reflect.apply%",!0)||$t.call(Fr,lr),xo=xt("es-define-property"),Eo=Vn("%Math.max%");Ct.exports=function(xt){if("function"!=typeof xt)throw new or("a function is required");var Ct=Hr($t,Fr,arguments);return Gn(Ct,1+Eo(0,xt.length-(arguments.length-1)),!0)};var applyBind=function(){return Hr($t,lr,arguments)};xo?xo(Ct.exports,"apply",{value:applyBind}):Ct.exports.apply=applyBind},{"es-define-property":692,"es-errors/type":698,"function-bind":701,"get-intrinsic":702,"set-function-length":719}],691:[function(xt,Ct,_t){"use strict";var $t=xt("es-define-property"),Vn=xt("es-errors/syntax"),Gn=xt("es-errors/type"),or=xt("gopd");Ct.exports=function(xt,Ct,_t){if(!xt||"object"!=typeof xt&&"function"!=typeof xt)throw new Gn("`obj` must be an object or a function`");if("string"!=typeof Ct&&"symbol"!=typeof Ct)throw new Gn("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new Gn("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new Gn("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new Gn("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new Gn("`loose`, if provided, must be a boolean");var lr=arguments.length>3?arguments[3]:null,Fr=arguments.length>4?arguments[4]:null,Hr=arguments.length>5?arguments[5]:null,xo=arguments.length>6&&arguments[6],Eo=!!or&&or(xt,Ct);if($t)$t(xt,Ct,{configurable:null===Hr&&Eo?Eo.configurable:!Hr,enumerable:null===lr&&Eo?Eo.enumerable:!lr,value:_t,writable:null===Fr&&Eo?Eo.writable:!Fr});else{if(!xo&&(lr||Fr||Hr))throw new Vn("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");xt[Ct]=_t}}},{"es-define-property":692,"es-errors/syntax":697,"es-errors/type":698,gopd:703}],692:[function(xt,Ct,_t){"use strict";var $t=xt("get-intrinsic")("%Object.defineProperty%",!0)||!1;if($t)try{$t({},"a",{value:1})}catch(xt){$t=!1}Ct.exports=$t},{"get-intrinsic":702}],693:[function(xt,Ct,_t){"use strict";Ct.exports=EvalError},{}],694:[function(xt,Ct,_t){"use strict";Ct.exports=Error},{}],695:[function(xt,Ct,_t){"use strict";Ct.exports=RangeError},{}],696:[function(xt,Ct,_t){"use strict";Ct.exports=ReferenceError},{}],697:[function(xt,Ct,_t){"use strict";Ct.exports=SyntaxError},{}],698:[function(xt,Ct,_t){"use strict";Ct.exports=TypeError},{}],699:[function(xt,Ct,_t){"use strict";Ct.exports=URIError},{}],700:[function(xt,Ct,_t){"use strict";var $t=Object.prototype.toString,Vn=Math.max,concatty=function(xt,Ct){for(var _t=[],$t=0;$t<xt.length;$t+=1)_t[$t]=xt[$t];for(var Vn=0;Vn<Ct.length;Vn+=1)_t[Vn+xt.length]=Ct[Vn];return _t};Ct.exports=function(xt){var Ct=this;if("function"!=typeof Ct||"[object Function]"!==$t.apply(Ct))throw new TypeError("Function.prototype.bind called on incompatible "+Ct);for(var _t,Gn=function(xt,Ct){for(var _t=[],$t=Ct||0,Vn=0;$t<xt.length;$t+=1,Vn+=1)_t[Vn]=xt[$t];return _t}(arguments,1),or=Vn(0,Ct.length-Gn.length),lr=[],Fr=0;Fr<or;Fr++)lr[Fr]="$"+Fr;if(_t=Function("binder","return function ("+function(xt,Ct){for(var _t="",$t=0;$t<xt.length;$t+=1)_t+=xt[$t],$t+1<xt.length&&(_t+=Ct);return _t}(lr,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof _t){var $t=Ct.apply(this,concatty(Gn,arguments));return Object($t)===$t?$t:this}return Ct.apply(xt,concatty(Gn,arguments))})),Ct.prototype){var p=function(){};p.prototype=Ct.prototype,_t.prototype=new p,p.prototype=null}return _t}},{}],701:[function(xt,Ct,_t){"use strict";var $t=xt("./implementation");Ct.exports=Function.prototype.bind||$t},{"./implementation":700}],702:[function(xt,Ct,_t){"use strict";var $t,Vn=xt("es-errors"),Gn=xt("es-errors/eval"),or=xt("es-errors/range"),lr=xt("es-errors/ref"),Fr=xt("es-errors/syntax"),Hr=xt("es-errors/type"),xo=xt("es-errors/uri"),Eo=Function,getEvalledConstructor=function(xt){try{return Eo('"use strict"; return ('+xt+").constructor;")()}catch(xt){}},Mo=Object.getOwnPropertyDescriptor;if(Mo)try{Mo({},"")}catch(xt){Mo=null}var throwTypeError=function(){throw new Hr},Oo=Mo?function(){try{return throwTypeError}catch(xt){try{return Mo(arguments,"callee").get}catch(xt){return throwTypeError}}}():throwTypeError,Ro=xt("has-symbols")(),Io=xt("has-proto")(),Bo=Object.getPrototypeOf||(Io?function(xt){return xt.__proto__}:null),zo={},Ho="undefined"!=typeof Uint8Array&&Bo?Bo(Uint8Array):$t,Qo={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?$t:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?$t:ArrayBuffer,"%ArrayIteratorPrototype%":Ro&&Bo?Bo([][Symbol.iterator]()):$t,"%AsyncFromSyncIteratorPrototype%":$t,"%AsyncFunction%":zo,"%AsyncGenerator%":zo,"%AsyncGeneratorFunction%":zo,"%AsyncIteratorPrototype%":zo,"%Atomics%":"undefined"==typeof Atomics?$t:Atomics,"%BigInt%":"undefined"==typeof BigInt?$t:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?$t:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?$t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?$t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Vn,"%eval%":eval,"%EvalError%":Gn,"%Float32Array%":"undefined"==typeof Float32Array?$t:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?$t:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?$t:FinalizationRegistry,"%Function%":Eo,"%GeneratorFunction%":zo,"%Int8Array%":"undefined"==typeof Int8Array?$t:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?$t:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?$t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ro&&Bo?Bo(Bo([][Symbol.iterator]())):$t,"%JSON%":"object"==typeof JSON?JSON:$t,"%Map%":"undefined"==typeof Map?$t:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Ro&&Bo?Bo((new Map)[Symbol.iterator]()):$t,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?$t:Promise,"%Proxy%":"undefined"==typeof Proxy?$t:Proxy,"%RangeError%":or,"%ReferenceError%":lr,"%Reflect%":"undefined"==typeof Reflect?$t:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?$t:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Ro&&Bo?Bo((new Set)[Symbol.iterator]()):$t,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?$t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ro&&Bo?Bo(""[Symbol.iterator]()):$t,"%Symbol%":Ro?Symbol:$t,"%SyntaxError%":Fr,"%ThrowTypeError%":Oo,"%TypedArray%":Ho,"%TypeError%":Hr,"%Uint8Array%":"undefined"==typeof Uint8Array?$t:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?$t:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?$t:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?$t:Uint32Array,"%URIError%":xo,"%WeakMap%":"undefined"==typeof WeakMap?$t:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?$t:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?$t:WeakSet};if(Bo)try{null.error}catch(xt){var pi=Bo(Bo(xt));Qo["%Error.prototype%"]=pi}var gi=function r(xt){var Ct;if("%AsyncFunction%"===xt)Ct=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===xt)Ct=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===xt)Ct=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===xt){var _t=r("%AsyncGeneratorFunction%");_t&&(Ct=_t.prototype)}else if("%AsyncIteratorPrototype%"===xt){var $t=r("%AsyncGenerator%");$t&&Bo&&(Ct=Bo($t.prototype))}return Qo[xt]=Ct,Ct},es={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ts=xt("function-bind"),ns=xt("hasown"),rs=ts.call(Function.call,Array.prototype.concat),os=ts.call(Function.apply,Array.prototype.splice),is=ts.call(Function.call,String.prototype.replace),ss=ts.call(Function.call,String.prototype.slice),as=ts.call(Function.call,RegExp.prototype.exec),ls=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,cs=/\\(\\)?/g,getBaseIntrinsic=function(xt,Ct){var _t,$t=xt;if(ns(es,$t)&&($t="%"+(_t=es[$t])[0]+"%"),ns(Qo,$t)){var Vn=Qo[$t];if(Vn===zo&&(Vn=gi($t)),void 0===Vn&&!Ct)throw new Hr("intrinsic "+xt+" exists, but is not available. Please file an issue!");return{alias:_t,name:$t,value:Vn}}throw new Fr("intrinsic "+xt+" does not exist!")};Ct.exports=function(xt,Ct){if("string"!=typeof xt||0===xt.length)throw new Hr("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof Ct)throw new Hr('"allowMissing" argument must be a boolean');if(null===as(/^%?[^%]*%?$/,xt))throw new Fr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var _t=function(xt){var Ct=ss(xt,0,1),_t=ss(xt,-1);if("%"===Ct&&"%"!==_t)throw new Fr("invalid intrinsic syntax, expected closing `%`");if("%"===_t&&"%"!==Ct)throw new Fr("invalid intrinsic syntax, expected opening `%`");var $t=[];return is(xt,ls,(function(xt,Ct,_t,Vn){$t[$t.length]=_t?is(Vn,cs,"$1"):Ct||xt})),$t}(xt),$t=_t.length>0?_t[0]:"",Vn=getBaseIntrinsic("%"+$t+"%",Ct),Gn=Vn.name,or=Vn.value,lr=!1,xo=Vn.alias;xo&&($t=xo[0],os(_t,rs([0,1],xo)));for(var Eo=1,Oo=!0;Eo<_t.length;Eo+=1){var Ro=_t[Eo],Io=ss(Ro,0,1),Bo=ss(Ro,-1);if(('"'===Io||"'"===Io||"`"===Io||'"'===Bo||"'"===Bo||"`"===Bo)&&Io!==Bo)throw new Fr("property names with quotes must have matching quotes");if("constructor"!==Ro&&Oo||(lr=!0),ns(Qo,Gn="%"+($t+="."+Ro)+"%"))or=Qo[Gn];else if(null!=or){if(!(Ro in or)){if(!Ct)throw new Hr("base intrinsic for "+xt+" exists, but the property is not available.");return}if(Mo&&Eo+1>=_t.length){var zo=Mo(or,Ro);or=(Oo=!!zo)&&"get"in zo&&!("originalValue"in zo.get)?zo.get:or[Ro]}else Oo=ns(or,Ro),or=or[Ro];Oo&&!lr&&(Qo[Gn]=or)}}return or}},{"es-errors":694,"es-errors/eval":693,"es-errors/range":695,"es-errors/ref":696,"es-errors/syntax":697,"es-errors/type":698,"es-errors/uri":699,"function-bind":701,"has-proto":705,"has-symbols":706,hasown:708}],703:[function(xt,Ct,_t){"use strict";var $t=xt("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if($t)try{$t([],"length")}catch(xt){$t=null}Ct.exports=$t},{"get-intrinsic":702}],704:[function(xt,Ct,_t){"use strict";var $t=xt("es-define-property"),hasPropertyDescriptors=function(){return!!$t};hasPropertyDescriptors.hasArrayLengthDefineBug=function(){if(!$t)return null;try{return 1!==$t([],"length",{value:1}).length}catch(xt){return!0}},Ct.exports=hasPropertyDescriptors},{"es-define-property":692}],705:[function(xt,Ct,_t){"use strict";var $t={foo:{}},Vn=Object;Ct.exports=function(){return{__proto__:$t}.foo===$t.foo&&!({__proto__:null}instanceof Vn)}},{}],706:[function(xt,Ct,_t){"use strict";var $t="undefined"!=typeof Symbol&&Symbol,Vn=xt("./shams");Ct.exports=function(){return"function"==typeof $t&&"function"==typeof Symbol&&"symbol"==typeof $t("foo")&&"symbol"==typeof Symbol("bar")&&Vn()}},{"./shams":707}],707:[function(xt,Ct,_t){"use strict";Ct.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var xt={},Ct=Symbol("test"),_t=Object(Ct);if("string"==typeof Ct)return!1;if("[object Symbol]"!==Object.prototype.toString.call(Ct))return!1;if("[object Symbol]"!==Object.prototype.toString.call(_t))return!1;for(Ct in xt[Ct]=42,xt)return!1;if("function"==typeof Object.keys&&0!==Object.keys(xt).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(xt).length)return!1;var $t=Object.getOwnPropertySymbols(xt);if(1!==$t.length||$t[0]!==Ct)return!1;if(!Object.prototype.propertyIsEnumerable.call(xt,Ct))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var Vn=Object.getOwnPropertyDescriptor(xt,Ct);if(42!==Vn.value||!0!==Vn.enumerable)return!1}return!0}},{}],708:[function(xt,Ct,_t){"use strict";var $t=Function.prototype.call,Vn=Object.prototype.hasOwnProperty,Gn=xt("function-bind");Ct.exports=Gn.call($t,Vn)},{"function-bind":701}],709:[function(xt,Ct,_t){_t.read=function(xt,Ct,_t,$t,Vn){var Gn,or,lr=8*Vn-$t-1,Fr=(1<<lr)-1,Hr=Fr>>1,xo=-7,Eo=_t?Vn-1:0,Mo=_t?-1:1,Oo=xt[Ct+Eo];for(Eo+=Mo,Gn=Oo&(1<<-xo)-1,Oo>>=-xo,xo+=lr;xo>0;Gn=256*Gn+xt[Ct+Eo],Eo+=Mo,xo-=8);for(or=Gn&(1<<-xo)-1,Gn>>=-xo,xo+=$t;xo>0;or=256*or+xt[Ct+Eo],Eo+=Mo,xo-=8);if(0===Gn)Gn=1-Hr;else{if(Gn===Fr)return or?NaN:1/0*(Oo?-1:1);or+=Math.pow(2,$t),Gn-=Hr}return(Oo?-1:1)*or*Math.pow(2,Gn-$t)},_t.write=function(xt,Ct,_t,$t,Vn,Gn){var or,lr,Fr,Hr=8*Gn-Vn-1,xo=(1<<Hr)-1,Eo=xo>>1,Mo=23===Vn?Math.pow(2,-24)-Math.pow(2,-77):0,Oo=$t?0:Gn-1,Ro=$t?1:-1,Io=Ct<0||0===Ct&&1/Ct<0?1:0;for(Ct=Math.abs(Ct),isNaN(Ct)||Ct===1/0?(lr=isNaN(Ct)?1:0,or=xo):(or=Math.floor(Math.log(Ct)/Math.LN2),Ct*(Fr=Math.pow(2,-or))<1&&(or--,Fr*=2),(Ct+=or+Eo>=1?Mo/Fr:Mo*Math.pow(2,1-Eo))*Fr>=2&&(or++,Fr/=2),or+Eo>=xo?(lr=0,or=xo):or+Eo>=1?(lr=(Ct*Fr-1)*Math.pow(2,Vn),or+=Eo):(lr=Ct*Math.pow(2,Eo-1)*Math.pow(2,Vn),or=0));Vn>=8;xt[_t+Oo]=255&lr,Oo+=Ro,lr/=256,Vn-=8);for(or=or<<Vn|lr,Hr+=Vn;Hr>0;xt[_t+Oo]=255&or,Oo+=Ro,or/=256,Hr-=8);xt[_t+Oo-Ro]|=128*Io}},{}],710:[function(xt,Ct,_t){(function(_t){(function(){var $t="function"==typeof Map&&Map.prototype,Vn=Object.getOwnPropertyDescriptor&&$t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Gn=$t&&Vn&&"function"==typeof Vn.get?Vn.get:null,or=$t&&Map.prototype.forEach,lr="function"==typeof Set&&Set.prototype,Fr=Object.getOwnPropertyDescriptor&&lr?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Hr=lr&&Fr&&"function"==typeof Fr.get?Fr.get:null,xo=lr&&Set.prototype.forEach,Eo="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Mo="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,Oo="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Ro=Boolean.prototype.valueOf,Io=Object.prototype.toString,Bo=Function.prototype.toString,zo=String.prototype.match,Ho=String.prototype.slice,Qo=String.prototype.replace,pi=String.prototype.toUpperCase,gi=String.prototype.toLowerCase,es=RegExp.prototype.test,ts=Array.prototype.concat,ns=Array.prototype.join,rs=Array.prototype.slice,os=Math.floor,is="function"==typeof BigInt?BigInt.prototype.valueOf:null,ss=Object.getOwnPropertySymbols,as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ls="function"==typeof Symbol&&"object"==typeof Symbol.iterator,cs="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,us=Object.prototype.propertyIsEnumerable,fs=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(xt){return xt.__proto__}:null);function addNumericSeparator(xt,Ct){if(xt===1/0||xt===-1/0||xt!=xt||xt&&xt>-1e3&&xt<1e3||es.call(/e/,Ct))return Ct;var _t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof xt){var $t=xt<0?-os(-xt):os(xt);if($t!==xt){var Vn=String($t),Gn=Ho.call(Ct,Vn.length+1);return Qo.call(Vn,_t,"$&_")+"."+Qo.call(Qo.call(Gn,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Qo.call(Ct,_t,"$&_")}var hs=xt("./util.inspect"),ps=hs.custom,ds=isSymbol(ps)?ps:null;function wrapQuotes(xt,Ct,_t){var $t="double"===(_t.quoteStyle||Ct)?'"':"'";return $t+xt+$t}function quote(xt){return Qo.call(String(xt),/"/g,"&quot;")}function isArray(xt){return!("[object Array]"!==toStr(xt)||cs&&"object"==typeof xt&&cs in xt)}function isRegExp(xt){return!("[object RegExp]"!==toStr(xt)||cs&&"object"==typeof xt&&cs in xt)}function isSymbol(xt){if(ls)return xt&&"object"==typeof xt&&xt instanceof Symbol;if("symbol"==typeof xt)return!0;if(!xt||"object"!=typeof xt||!as)return!1;try{return as.call(xt),!0}catch(xt){}return!1}Ct.exports=function t(xt,Ct,$t,Vn){var lr=Ct||{};if(has(lr,"quoteStyle")&&"single"!==lr.quoteStyle&&"double"!==lr.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has(lr,"maxStringLength")&&("number"==typeof lr.maxStringLength?lr.maxStringLength<0&&lr.maxStringLength!==1/0:null!==lr.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Fr=!has(lr,"customInspect")||lr.customInspect;if("boolean"!=typeof Fr&&"symbol"!==Fr)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has(lr,"indent")&&null!==lr.indent&&"\t"!==lr.indent&&!(parseInt(lr.indent,10)===lr.indent&&lr.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has(lr,"numericSeparator")&&"boolean"!=typeof lr.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Io=lr.numericSeparator;if(void 0===xt)return"undefined";if(null===xt)return"null";if("boolean"==typeof xt)return xt?"true":"false";if("string"==typeof xt)return inspectString(xt,lr);if("number"==typeof xt){if(0===xt)return 1/0/xt>0?"0":"-0";var pi=String(xt);return Io?addNumericSeparator(xt,pi):pi}if("bigint"==typeof xt){var es=String(xt)+"n";return Io?addNumericSeparator(xt,es):es}var os=void 0===lr.depth?5:lr.depth;if(void 0===$t&&($t=0),$t>=os&&os>0&&"object"==typeof xt)return isArray(xt)?"[Array]":"[Object]";var ss=function getIndent(xt,Ct){var _t;if("\t"===xt.indent)_t="\t";else{if(!("number"==typeof xt.indent&&xt.indent>0))return null;_t=ns.call(Array(xt.indent+1)," ")}return{base:_t,prev:ns.call(Array(Ct+1),_t)}}(lr,$t);if(void 0===Vn)Vn=[];else if(indexOf(Vn,xt)>=0)return"[Circular]";function s(xt,Ct,_t){if(Ct&&(Vn=rs.call(Vn)).push(Ct),_t){var Gn={depth:lr.depth};return has(lr,"quoteStyle")&&(Gn.quoteStyle=lr.quoteStyle),t(xt,Gn,$t+1,Vn)}return t(xt,lr,$t+1,Vn)}if("function"==typeof xt&&!isRegExp(xt)){var ps=function nameOf(xt){if(xt.name)return xt.name;var Ct=zo.call(Bo.call(xt),/^function\s*([\w$]+)/);return Ct?Ct[1]:null}(xt),ms=arrObjKeys(xt,s);return"[Function"+(ps?": "+ps:" (anonymous)")+"]"+(ms.length>0?" { "+ns.call(ms,", ")+" }":"")}if(isSymbol(xt)){var gs=ls?Qo.call(String(xt),/^(Symbol\(.*\))_[^)]*$/,"$1"):as.call(xt);return"object"!=typeof xt||ls?gs:markBoxed(gs)}if(function isElement(xt){return!(!xt||"object"!=typeof xt)&&("undefined"!=typeof HTMLElement&&xt instanceof HTMLElement||"string"==typeof xt.nodeName&&"function"==typeof xt.getAttribute)}(xt)){for(var vs="<"+gi.call(String(xt.nodeName)),ys=xt.attributes||[],bs=0;bs<ys.length;bs++)vs+=" "+ys[bs].name+"="+wrapQuotes(quote(ys[bs].value),"double",lr);return vs+=">",xt.childNodes&&xt.childNodes.length&&(vs+="..."),vs+"</"+gi.call(String(xt.nodeName))+">"}if(isArray(xt)){if(0===xt.length)return"[]";var xs=arrObjKeys(xt,s);return ss&&!function singleLineValues(xt){for(var Ct=0;Ct<xt.length;Ct++)if(indexOf(xt[Ct],"\n")>=0)return!1;return!0}(xs)?"["+indentedJoin(xs,ss)+"]":"[ "+ns.call(xs,", ")+" ]"}if(function isError(xt){return!("[object Error]"!==toStr(xt)||cs&&"object"==typeof xt&&cs in xt)}(xt)){var ws=arrObjKeys(xt,s);return"cause"in Error.prototype||!("cause"in xt)||us.call(xt,"cause")?0===ws.length?"["+String(xt)+"]":"{ ["+String(xt)+"] "+ns.call(ws,", ")+" }":"{ ["+String(xt)+"] "+ns.call(ts.call("[cause]: "+s(xt.cause),ws),", ")+" }"}if("object"==typeof xt&&Fr){if(ds&&"function"==typeof xt[ds]&&hs)return hs(xt,{depth:os-$t});if("symbol"!==Fr&&"function"==typeof xt.inspect)return xt.inspect()}if(function isMap(xt){if(!Gn||!xt||"object"!=typeof xt)return!1;try{Gn.call(xt);try{Hr.call(xt)}catch(xt){return!0}return xt instanceof Map}catch(xt){}return!1}(xt)){var As=[];return or&&or.call(xt,(function(Ct,_t){As.push(s(_t,xt,!0)+" => "+s(Ct,xt))})),collectionOf("Map",Gn.call(xt),As,ss)}if(function isSet(xt){if(!Hr||!xt||"object"!=typeof xt)return!1;try{Hr.call(xt);try{Gn.call(xt)}catch(xt){return!0}return xt instanceof Set}catch(xt){}return!1}(xt)){var Ds=[];return xo&&xo.call(xt,(function(Ct){Ds.push(s(Ct,xt))})),collectionOf("Set",Hr.call(xt),Ds,ss)}if(function isWeakMap(xt){if(!Eo||!xt||"object"!=typeof xt)return!1;try{Eo.call(xt,Eo);try{Mo.call(xt,Mo)}catch(xt){return!0}return xt instanceof WeakMap}catch(xt){}return!1}(xt))return weakCollectionOf("WeakMap");if(function isWeakSet(xt){if(!Mo||!xt||"object"!=typeof xt)return!1;try{Mo.call(xt,Mo);try{Eo.call(xt,Eo)}catch(xt){return!0}return xt instanceof WeakSet}catch(xt){}return!1}(xt))return weakCollectionOf("WeakSet");if(function isWeakRef(xt){if(!Oo||!xt||"object"!=typeof xt)return!1;try{return Oo.call(xt),!0}catch(xt){}return!1}(xt))return weakCollectionOf("WeakRef");if(function isNumber(xt){return!("[object Number]"!==toStr(xt)||cs&&"object"==typeof xt&&cs in xt)}(xt))return markBoxed(s(Number(xt)));if(function isBigInt(xt){if(!xt||"object"!=typeof xt||!is)return!1;try{return is.call(xt),!0}catch(xt){}return!1}(xt))return markBoxed(s(is.call(xt)));if(function isBoolean(xt){return!("[object Boolean]"!==toStr(xt)||cs&&"object"==typeof xt&&cs in xt)}(xt))return markBoxed(Ro.call(xt));if(function isString(xt){return!("[object String]"!==toStr(xt)||cs&&"object"==typeof xt&&cs in xt)}(xt))return markBoxed(s(String(xt)));if("undefined"!=typeof window&&xt===window)return"{ [object Window] }";if(xt===_t)return"{ [object globalThis] }";if(!function isDate(xt){return!("[object Date]"!==toStr(xt)||cs&&"object"==typeof xt&&cs in xt)}(xt)&&!isRegExp(xt)){var Es=arrObjKeys(xt,s),Cs=fs?fs(xt)===Object.prototype:xt instanceof Object||xt.constructor===Object,Ss=xt instanceof Object?"":"null prototype",ks=!Cs&&cs&&Object(xt)===xt&&cs in xt?Ho.call(toStr(xt),8,-1):Ss?"Object":"",Ts=(Cs||"function"!=typeof xt.constructor?"":xt.constructor.name?xt.constructor.name+" ":"")+(ks||Ss?"["+ns.call(ts.call([],ks||[],Ss||[]),": ")+"] ":"");return 0===Es.length?Ts+"{}":ss?Ts+"{"+indentedJoin(Es,ss)+"}":Ts+"{ "+ns.call(Es,", ")+" }"}return String(xt)};var ms=Object.prototype.hasOwnProperty||function(xt){return xt in this};function has(xt,Ct){return ms.call(xt,Ct)}function toStr(xt){return Io.call(xt)}function indexOf(xt,Ct){if(xt.indexOf)return xt.indexOf(Ct);for(var _t=0,$t=xt.length;_t<$t;_t++)if(xt[_t]===Ct)return _t;return-1}function inspectString(xt,Ct){if(xt.length>Ct.maxStringLength){var _t=xt.length-Ct.maxStringLength,$t="... "+_t+" more character"+(_t>1?"s":"");return inspectString(Ho.call(xt,0,Ct.maxStringLength),Ct)+$t}return wrapQuotes(Qo.call(Qo.call(xt,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte),"single",Ct)}function lowbyte(xt){var Ct=xt.charCodeAt(0),_t={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ct];return _t?"\\"+_t:"\\x"+(Ct<16?"0":"")+pi.call(Ct.toString(16))}function markBoxed(xt){return"Object("+xt+")"}function weakCollectionOf(xt){return xt+" { ? }"}function collectionOf(xt,Ct,_t,$t){return xt+" ("+Ct+") {"+($t?indentedJoin(_t,$t):ns.call(_t,", "))+"}"}function indentedJoin(xt,Ct){if(0===xt.length)return"";var _t="\n"+Ct.prev+Ct.base;return _t+ns.call(xt,","+_t)+"\n"+Ct.prev}function arrObjKeys(xt,Ct){var _t=isArray(xt),$t=[];if(_t){$t.length=xt.length;for(var Vn=0;Vn<xt.length;Vn++)$t[Vn]=has(xt,Vn)?Ct(xt[Vn],xt):""}var Gn,or="function"==typeof ss?ss(xt):[];if(ls){Gn={};for(var lr=0;lr<or.length;lr++)Gn["$"+or[lr]]=or[lr]}for(var Fr in xt)has(xt,Fr)&&(_t&&String(Number(Fr))===Fr&&Fr<xt.length||ls&&Gn["$"+Fr]instanceof Symbol||(es.call(/[^\w$]/,Fr)?$t.push(Ct(Fr,xt)+": "+Ct(xt[Fr],xt)):$t.push(Fr+": "+Ct(xt[Fr],xt))));if("function"==typeof ss)for(var Hr=0;Hr<or.length;Hr++)us.call(xt,or[Hr])&&$t.push("["+Ct(or[Hr])+"]: "+Ct(xt[or[Hr]],xt));return $t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util.inspect":687}],711:[function(xt,Ct,_t){(function(xt){(function(){function normalizeArray(xt,Ct){for(var _t=0,$t=xt.length-1;$t>=0;$t--){var Vn=xt[$t];"."===Vn?xt.splice($t,1):".."===Vn?(xt.splice($t,1),_t++):_t&&(xt.splice($t,1),_t--)}if(Ct)for(;_t--;_t)xt.unshift("..");return xt}function filter(xt,Ct){if(xt.filter)return xt.filter(Ct);for(var _t=[],$t=0;$t<xt.length;$t++)Ct(xt[$t],$t,xt)&&_t.push(xt[$t]);return _t}_t.resolve=function(){for(var Ct="",_t=!1,$t=arguments.length-1;$t>=-1&&!_t;$t--){var Vn=$t>=0?arguments[$t]:xt.cwd();if("string"!=typeof Vn)throw new TypeError("Arguments to path.resolve must be strings");Vn&&(Ct=Vn+"/"+Ct,_t="/"===Vn.charAt(0))}return(_t?"/":"")+(Ct=normalizeArray(filter(Ct.split("/"),(function(xt){return!!xt})),!_t).join("/"))||"."},_t.normalize=function(xt){var $t=_t.isAbsolute(xt),Vn="/"===Ct(xt,-1);return(xt=normalizeArray(filter(xt.split("/"),(function(xt){return!!xt})),!$t).join("/"))||$t||(xt="."),xt&&Vn&&(xt+="/"),($t?"/":"")+xt},_t.isAbsolute=function(xt){return"/"===xt.charAt(0)},_t.join=function(){var xt=Array.prototype.slice.call(arguments,0);return _t.normalize(filter(xt,(function(xt,Ct){if("string"!=typeof xt)throw new TypeError("Arguments to path.join must be strings");return xt})).join("/"))},_t.relative=function(xt,Ct){function e(xt){for(var Ct=0;Ct<xt.length&&""===xt[Ct];Ct++);for(var _t=xt.length-1;_t>=0&&""===xt[_t];_t--);return Ct>_t?[]:xt.slice(Ct,_t-Ct+1)}xt=_t.resolve(xt).substr(1),Ct=_t.resolve(Ct).substr(1);for(var $t=e(xt.split("/")),Vn=e(Ct.split("/")),Gn=Math.min($t.length,Vn.length),or=Gn,lr=0;lr<Gn;lr++)if($t[lr]!==Vn[lr]){or=lr;break}var Fr=[];for(lr=or;lr<$t.length;lr++)Fr.push("..");return(Fr=Fr.concat(Vn.slice(or))).join("/")},_t.sep="/",_t.delimiter=":",_t.dirname=function(xt){if("string"!=typeof xt&&(xt+=""),0===xt.length)return".";for(var Ct=xt.charCodeAt(0),_t=47===Ct,$t=-1,Vn=!0,Gn=xt.length-1;Gn>=1;--Gn)if(47===(Ct=xt.charCodeAt(Gn))){if(!Vn){$t=Gn;break}}else Vn=!1;return-1===$t?_t?"/":".":_t&&1===$t?"/":xt.slice(0,$t)},_t.basename=function(xt,Ct){var _t=function basename(xt){"string"!=typeof xt&&(xt+="");var Ct,_t=0,$t=-1,Vn=!0;for(Ct=xt.length-1;Ct>=0;--Ct)if(47===xt.charCodeAt(Ct)){if(!Vn){_t=Ct+1;break}}else-1===$t&&(Vn=!1,$t=Ct+1);return-1===$t?"":xt.slice(_t,$t)}(xt);return Ct&&_t.substr(-1*Ct.length)===Ct&&(_t=_t.substr(0,_t.length-Ct.length)),_t},_t.extname=function(xt){"string"!=typeof xt&&(xt+="");for(var Ct=-1,_t=0,$t=-1,Vn=!0,Gn=0,or=xt.length-1;or>=0;--or){var lr=xt.charCodeAt(or);if(47!==lr)-1===$t&&(Vn=!1,$t=or+1),46===lr?-1===Ct?Ct=or:1!==Gn&&(Gn=1):-1!==Ct&&(Gn=-1);else if(!Vn){_t=or+1;break}}return-1===Ct||-1===$t||0===Gn||1===Gn&&Ct===$t-1&&Ct===_t+1?"":xt.slice(Ct,$t)};var Ct="b"==="ab".substr(-1)?function(xt,Ct,_t){return xt.substr(Ct,_t)}:function(xt,Ct,_t){return Ct<0&&(Ct=xt.length+Ct),xt.substr(Ct,_t)}}).call(this)}).call(this,xt("_process"))},{_process:712}],712:[function(xt,Ct,_t){var $t,Vn,Gn=Ct.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(xt){if($t===setTimeout)return setTimeout(xt,0);if(($t===defaultSetTimout||!$t)&&setTimeout)return $t=setTimeout,setTimeout(xt,0);try{return $t(xt,0)}catch(Ct){try{return $t.call(null,xt,0)}catch(Ct){return $t.call(this,xt,0)}}}!function(){try{$t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(xt){$t=defaultSetTimout}try{Vn="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(xt){Vn=defaultClearTimeout}}();var or,lr=[],Fr=!1,Hr=-1;function cleanUpNextTick(){Fr&&or&&(Fr=!1,or.length?lr=or.concat(lr):Hr=-1,lr.length&&drainQueue())}function drainQueue(){if(!Fr){var xt=runTimeout(cleanUpNextTick);Fr=!0;for(var Ct=lr.length;Ct;){for(or=lr,lr=[];++Hr<Ct;)or&&or[Hr].run();Hr=-1,Ct=lr.length}or=null,Fr=!1,function runClearTimeout(xt){if(Vn===clearTimeout)return clearTimeout(xt);if((Vn===defaultClearTimeout||!Vn)&&clearTimeout)return Vn=clearTimeout,clearTimeout(xt);try{return Vn(xt)}catch(Ct){try{return Vn.call(null,xt)}catch(Ct){return Vn.call(this,xt)}}}(xt)}}function Item(xt,Ct){this.fun=xt,this.array=Ct}function noop(){}Gn.nextTick=function(xt){var Ct=new Array(arguments.length-1);if(arguments.length>1)for(var _t=1;_t<arguments.length;_t++)Ct[_t-1]=arguments[_t];lr.push(new Item(xt,Ct)),1!==lr.length||Fr||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},Gn.title="browser",Gn.browser=!0,Gn.env={},Gn.argv=[],Gn.version="",Gn.versions={},Gn.on=noop,Gn.addListener=noop,Gn.once=noop,Gn.off=noop,Gn.removeListener=noop,Gn.removeAllListeners=noop,Gn.emit=noop,Gn.prependListener=noop,Gn.prependOnceListener=noop,Gn.listeners=function(xt){return[]},Gn.binding=function(xt){throw new Error("process.binding is not supported")},Gn.cwd=function(){return"/"},Gn.chdir=function(xt){throw new Error("process.chdir is not supported")},Gn.umask=function(){return 0}},{}],713:[function(xt,Ct,_t){(function(xt){(function(){!function($t){var Vn="object"==typeof _t&&_t&&!_t.nodeType&&_t,Gn="object"==typeof Ct&&Ct&&!Ct.nodeType&&Ct,or="object"==typeof xt&&xt;or.global!==or&&or.window!==or&&or.self!==or||($t=or);var lr,Fr,Hr=2147483647,xo=36,Eo=26,Mo=38,Oo=700,Ro=/^xn--/,Io=/[^\x20-\x7E]/,Bo=/[\x2E\u3002\uFF0E\uFF61]/g,zo={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Ho=xo-1,Qo=Math.floor,pi=String.fromCharCode;function m(xt){throw new RangeError(zo[xt])}function j(xt,Ct){for(var _t=xt.length,$t=[];_t--;)$t[_t]=Ct(xt[_t]);return $t}function A(xt,Ct){var _t=xt.split("@"),$t="";return _t.length>1&&($t=_t[0]+"@",xt=_t[1]),$t+j((xt=xt.replace(Bo,".")).split("."),Ct).join(".")}function I(xt){for(var Ct,_t,$t=[],Vn=0,Gn=xt.length;Vn<Gn;)(Ct=xt.charCodeAt(Vn++))>=55296&&Ct<=56319&&Vn<Gn?56320==(64512&(_t=xt.charCodeAt(Vn++)))?$t.push(((1023&Ct)<<10)+(1023&_t)+65536):($t.push(Ct),Vn--):$t.push(Ct);return $t}function E(xt){return j(xt,(function(xt){var Ct="";return xt>65535&&(Ct+=pi((xt-=65536)>>>10&1023|55296),xt=56320|1023&xt),Ct+pi(xt)})).join("")}function F(xt,Ct){return xt+22+75*(xt<26)-((0!=Ct)<<5)}function O(xt,Ct,_t){var $t=0;for(xt=_t?Qo(xt/Oo):xt>>1,xt+=Qo(xt/Ct);xt>Ho*Eo>>1;$t+=xo)xt=Qo(xt/Ho);return Qo($t+(Ho+1)*xt/(xt+Mo))}function S(xt){var Ct,_t,$t,Vn,Gn,or,lr,Fr,Mo,Oo,Ro,Io=[],Bo=xt.length,zo=0,Ho=128,pi=72;for((_t=xt.lastIndexOf("-"))<0&&(_t=0),$t=0;$t<_t;++$t)xt.charCodeAt($t)>=128&&m("not-basic"),Io.push(xt.charCodeAt($t));for(Vn=_t>0?_t+1:0;Vn<Bo;){for(Gn=zo,or=1,lr=xo;Vn>=Bo&&m("invalid-input"),((Fr=(Ro=xt.charCodeAt(Vn++))-48<10?Ro-22:Ro-65<26?Ro-65:Ro-97<26?Ro-97:xo)>=xo||Fr>Qo((Hr-zo)/or))&&m("overflow"),zo+=Fr*or,!(Fr<(Mo=lr<=pi?1:lr>=pi+Eo?Eo:lr-pi));lr+=xo)or>Qo(Hr/(Oo=xo-Mo))&&m("overflow"),or*=Oo;pi=O(zo-Gn,Ct=Io.length+1,0==Gn),Qo(zo/Ct)>Hr-Ho&&m("overflow"),Ho+=Qo(zo/Ct),zo%=Ct,Io.splice(zo++,0,Ho)}return E(Io)}function T(xt){var Ct,_t,$t,Vn,Gn,or,lr,Fr,Mo,Oo,Ro,Io,Bo,zo,Ho,gi=[];for(Io=(xt=I(xt)).length,Ct=128,_t=0,Gn=72,or=0;or<Io;++or)(Ro=xt[or])<128&&gi.push(pi(Ro));for($t=Vn=gi.length,Vn&&gi.push("-");$t<Io;){for(lr=Hr,or=0;or<Io;++or)(Ro=xt[or])>=Ct&&Ro<lr&&(lr=Ro);for(lr-Ct>Qo((Hr-_t)/(Bo=$t+1))&&m("overflow"),_t+=(lr-Ct)*Bo,Ct=lr,or=0;or<Io;++or)if((Ro=xt[or])<Ct&&++_t>Hr&&m("overflow"),Ro==Ct){for(Fr=_t,Mo=xo;!(Fr<(Oo=Mo<=Gn?1:Mo>=Gn+Eo?Eo:Mo-Gn));Mo+=xo)Ho=Fr-Oo,zo=xo-Oo,gi.push(pi(F(Oo+Ho%zo,0))),Fr=Qo(Ho/zo);gi.push(pi(F(Fr,0))),Gn=O(_t,Bo,$t==Vn),_t=0,++$t}++_t,++Ct}return gi.join("")}if(lr={version:"1.4.1",ucs2:{decode:I,encode:E},decode:S,encode:T,toASCII:function(xt){return A(xt,(function(xt){return Io.test(xt)?"xn--"+T(xt):xt}))},toUnicode:function(xt){return A(xt,(function(xt){return Ro.test(xt)?S(xt.slice(4).toLowerCase()):xt}))}},Vn&&Gn)if(Ct.exports==Vn)Gn.exports=lr;else for(Fr in lr)lr.hasOwnProperty(Fr)&&(Vn[Fr]=lr[Fr]);else $t.punycode=lr}(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],714:[function(xt,Ct,_t){"use strict";var $t=String.prototype.replace,Vn=/%20/g,Gn="RFC1738",or="RFC3986";Ct.exports={default:or,formatters:{RFC1738:function(xt){return $t.call(xt,Vn,"+")},RFC3986:function(xt){return String(xt)}},RFC1738:Gn,RFC3986:or}},{}],715:[function(xt,Ct,_t){"use strict";var $t=xt("./stringify"),Vn=xt("./parse"),Gn=xt("./formats");Ct.exports={formats:Gn,parse:Vn,stringify:$t}},{"./formats":714,"./parse":716,"./stringify":717}],716:[function(xt,Ct,_t){"use strict";var $t=xt("./utils"),Vn=Object.prototype.hasOwnProperty,Gn=Array.isArray,or={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:$t.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(xt){return xt.replace(/&#(\d+);/g,(function(xt,Ct){return String.fromCharCode(parseInt(Ct,10))}))},parseArrayValue=function(xt,Ct){return xt&&"string"==typeof xt&&Ct.comma&&xt.indexOf(",")>-1?xt.split(","):xt},parseKeys=function(xt,Ct,_t,$t){if(xt){var Gn=_t.allowDots?xt.replace(/\.([^.[]+)/g,"[$1]"):xt,or=/(\[[^[\]]*])/g,lr=_t.depth>0&&/(\[[^[\]]*])/.exec(Gn),Fr=lr?Gn.slice(0,lr.index):Gn,Hr=[];if(Fr){if(!_t.plainObjects&&Vn.call(Object.prototype,Fr)&&!_t.allowPrototypes)return;Hr.push(Fr)}for(var xo=0;_t.depth>0&&null!==(lr=or.exec(Gn))&&xo<_t.depth;){if(xo+=1,!_t.plainObjects&&Vn.call(Object.prototype,lr[1].slice(1,-1))&&!_t.allowPrototypes)return;Hr.push(lr[1])}return lr&&Hr.push("["+Gn.slice(lr.index)+"]"),function(xt,Ct,_t,$t){for(var Vn=$t?Ct:parseArrayValue(Ct,_t),Gn=xt.length-1;Gn>=0;--Gn){var or,lr=xt[Gn];if("[]"===lr&&_t.parseArrays)or=[].concat(Vn);else{or=_t.plainObjects?Object.create(null):{};var Fr="["===lr.charAt(0)&&"]"===lr.charAt(lr.length-1)?lr.slice(1,-1):lr,Hr=parseInt(Fr,10);_t.parseArrays||""!==Fr?!isNaN(Hr)&&lr!==Fr&&String(Hr)===Fr&&Hr>=0&&_t.parseArrays&&Hr<=_t.arrayLimit?(or=[])[Hr]=Vn:"__proto__"!==Fr&&(or[Fr]=Vn):or={0:Vn}}Vn=or}return Vn}(Hr,Ct,_t,$t)}};Ct.exports=function(xt,Ct){var _t=function(xt){if(!xt)return or;if(null!==xt.decoder&&void 0!==xt.decoder&&"function"!=typeof xt.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==xt.charset&&"utf-8"!==xt.charset&&"iso-8859-1"!==xt.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Ct=void 0===xt.charset?or.charset:xt.charset;return{allowDots:void 0===xt.allowDots?or.allowDots:!!xt.allowDots,allowPrototypes:"boolean"==typeof xt.allowPrototypes?xt.allowPrototypes:or.allowPrototypes,allowSparse:"boolean"==typeof xt.allowSparse?xt.allowSparse:or.allowSparse,arrayLimit:"number"==typeof xt.arrayLimit?xt.arrayLimit:or.arrayLimit,charset:Ct,charsetSentinel:"boolean"==typeof xt.charsetSentinel?xt.charsetSentinel:or.charsetSentinel,comma:"boolean"==typeof xt.comma?xt.comma:or.comma,decoder:"function"==typeof xt.decoder?xt.decoder:or.decoder,delimiter:"string"==typeof xt.delimiter||$t.isRegExp(xt.delimiter)?xt.delimiter:or.delimiter,depth:"number"==typeof xt.depth||!1===xt.depth?+xt.depth:or.depth,ignoreQueryPrefix:!0===xt.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof xt.interpretNumericEntities?xt.interpretNumericEntities:or.interpretNumericEntities,parameterLimit:"number"==typeof xt.parameterLimit?xt.parameterLimit:or.parameterLimit,parseArrays:!1!==xt.parseArrays,plainObjects:"boolean"==typeof xt.plainObjects?xt.plainObjects:or.plainObjects,strictNullHandling:"boolean"==typeof xt.strictNullHandling?xt.strictNullHandling:or.strictNullHandling}}(Ct);if(""===xt||null==xt)return _t.plainObjects?Object.create(null):{};for(var lr="string"==typeof xt?function(xt,Ct){var _t,lr={__proto__:null},Fr=Ct.ignoreQueryPrefix?xt.replace(/^\?/,""):xt,Hr=Ct.parameterLimit===1/0?void 0:Ct.parameterLimit,xo=Fr.split(Ct.delimiter,Hr),Eo=-1,Mo=Ct.charset;if(Ct.charsetSentinel)for(_t=0;_t<xo.length;++_t)0===xo[_t].indexOf("utf8=")&&("utf8=%E2%9C%93"===xo[_t]?Mo="utf-8":"utf8=%26%2310003%3B"===xo[_t]&&(Mo="iso-8859-1"),Eo=_t,_t=xo.length);for(_t=0;_t<xo.length;++_t)if(_t!==Eo){var Oo,Ro,Io=xo[_t],Bo=Io.indexOf("]="),zo=-1===Bo?Io.indexOf("="):Bo+1;-1===zo?(Oo=Ct.decoder(Io,or.decoder,Mo,"key"),Ro=Ct.strictNullHandling?null:""):(Oo=Ct.decoder(Io.slice(0,zo),or.decoder,Mo,"key"),Ro=$t.maybeMap(parseArrayValue(Io.slice(zo+1),Ct),(function(xt){return Ct.decoder(xt,or.decoder,Mo,"value")}))),Ro&&Ct.interpretNumericEntities&&"iso-8859-1"===Mo&&(Ro=interpretNumericEntities(Ro)),Io.indexOf("[]=")>-1&&(Ro=Gn(Ro)?[Ro]:Ro),Vn.call(lr,Oo)?lr[Oo]=$t.combine(lr[Oo],Ro):lr[Oo]=Ro}return lr}(xt,_t):xt,Fr=_t.plainObjects?Object.create(null):{},Hr=Object.keys(lr),xo=0;xo<Hr.length;++xo){var Eo=Hr[xo],Mo=parseKeys(Eo,lr[Eo],_t,"string"==typeof xt);Fr=$t.merge(Fr,Mo,_t)}return!0===_t.allowSparse?Fr:$t.compact(Fr)}},{"./utils":718}],717:[function(xt,Ct,_t){"use strict";var $t=xt("side-channel"),Vn=xt("./utils"),Gn=xt("./formats"),or=Object.prototype.hasOwnProperty,lr={brackets:function(xt){return xt+"[]"},comma:"comma",indices:function(xt,Ct){return xt+"["+Ct+"]"},repeat:function(xt){return xt}},Fr=Array.isArray,Hr=Array.prototype.push,pushToArray=function(xt,Ct){Hr.apply(xt,Fr(Ct)?Ct:[Ct])},xo=Date.prototype.toISOString,Eo=Gn.default,Mo={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Vn.encode,encodeValuesOnly:!1,format:Eo,formatter:Gn.formatters[Eo],indices:!1,serializeDate:function(xt){return xo.call(xt)},skipNulls:!1,strictNullHandling:!1},Oo={},Ro=function e(xt,Ct,_t,Gn,or,lr,Hr,xo,Eo,Ro,Io,Bo,zo,Ho,Qo,pi){for(var gi=xt,es=pi,ts=0,ns=!1;void 0!==(es=es.get(Oo))&&!ns;){var rs=es.get(xt);if(ts+=1,void 0!==rs){if(rs===ts)throw new RangeError("Cyclic object value");ns=!0}void 0===es.get(Oo)&&(ts=0)}if("function"==typeof xo?gi=xo(Ct,gi):gi instanceof Date?gi=Io(gi):"comma"===_t&&Fr(gi)&&(gi=Vn.maybeMap(gi,(function(xt){return xt instanceof Date?Io(xt):xt}))),null===gi){if(or)return Hr&&!Ho?Hr(Ct,Mo.encoder,Qo,"key",Bo):Ct;gi=""}if(function(xt){return"string"==typeof xt||"number"==typeof xt||"boolean"==typeof xt||"symbol"==typeof xt||"bigint"==typeof xt}(gi)||Vn.isBuffer(gi))return Hr?[zo(Ho?Ct:Hr(Ct,Mo.encoder,Qo,"key",Bo))+"="+zo(Hr(gi,Mo.encoder,Qo,"value",Bo))]:[zo(Ct)+"="+zo(String(gi))];var os,is=[];if(void 0===gi)return is;if("comma"===_t&&Fr(gi))Ho&&Hr&&(gi=Vn.maybeMap(gi,Hr)),os=[{value:gi.length>0?gi.join(",")||null:void 0}];else if(Fr(xo))os=xo;else{var ss=Object.keys(gi);os=Eo?ss.sort(Eo):ss}for(var as=Gn&&Fr(gi)&&1===gi.length?Ct+"[]":Ct,ls=0;ls<os.length;++ls){var cs=os[ls],us="object"==typeof cs&&void 0!==cs.value?cs.value:gi[cs];if(!lr||null!==us){var fs=Fr(gi)?"function"==typeof _t?_t(as,cs):as:as+(Ro?"."+cs:"["+cs+"]");pi.set(xt,ts);var hs=$t();hs.set(Oo,pi),pushToArray(is,e(us,fs,_t,Gn,or,lr,"comma"===_t&&Ho&&Fr(gi)?null:Hr,xo,Eo,Ro,Io,Bo,zo,Ho,Qo,hs))}}return is};Ct.exports=function(xt,Ct){var _t,Vn=xt,Hr=function(xt){if(!xt)return Mo;if(null!==xt.encoder&&void 0!==xt.encoder&&"function"!=typeof xt.encoder)throw new TypeError("Encoder has to be a function.");var Ct=xt.charset||Mo.charset;if(void 0!==xt.charset&&"utf-8"!==xt.charset&&"iso-8859-1"!==xt.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var _t=Gn.default;if(void 0!==xt.format){if(!or.call(Gn.formatters,xt.format))throw new TypeError("Unknown format option provided.");_t=xt.format}var $t=Gn.formatters[_t],Vn=Mo.filter;return("function"==typeof xt.filter||Fr(xt.filter))&&(Vn=xt.filter),{addQueryPrefix:"boolean"==typeof xt.addQueryPrefix?xt.addQueryPrefix:Mo.addQueryPrefix,allowDots:void 0===xt.allowDots?Mo.allowDots:!!xt.allowDots,charset:Ct,charsetSentinel:"boolean"==typeof xt.charsetSentinel?xt.charsetSentinel:Mo.charsetSentinel,delimiter:void 0===xt.delimiter?Mo.delimiter:xt.delimiter,encode:"boolean"==typeof xt.encode?xt.encode:Mo.encode,encoder:"function"==typeof xt.encoder?xt.encoder:Mo.encoder,encodeValuesOnly:"boolean"==typeof xt.encodeValuesOnly?xt.encodeValuesOnly:Mo.encodeValuesOnly,filter:Vn,format:_t,formatter:$t,serializeDate:"function"==typeof xt.serializeDate?xt.serializeDate:Mo.serializeDate,skipNulls:"boolean"==typeof xt.skipNulls?xt.skipNulls:Mo.skipNulls,sort:"function"==typeof xt.sort?xt.sort:null,strictNullHandling:"boolean"==typeof xt.strictNullHandling?xt.strictNullHandling:Mo.strictNullHandling}}(Ct);"function"==typeof Hr.filter?Vn=(0,Hr.filter)("",Vn):Fr(Hr.filter)&&(_t=Hr.filter);var xo,Eo=[];if("object"!=typeof Vn||null===Vn)return"";xo=Ct&&Ct.arrayFormat in lr?Ct.arrayFormat:Ct&&"indices"in Ct?Ct.indices?"indices":"repeat":"indices";var Oo=lr[xo];if(Ct&&"commaRoundTrip"in Ct&&"boolean"!=typeof Ct.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Io="comma"===Oo&&Ct&&Ct.commaRoundTrip;_t||(_t=Object.keys(Vn)),Hr.sort&&_t.sort(Hr.sort);for(var Bo=$t(),zo=0;zo<_t.length;++zo){var Ho=_t[zo];Hr.skipNulls&&null===Vn[Ho]||pushToArray(Eo,Ro(Vn[Ho],Ho,Oo,Io,Hr.strictNullHandling,Hr.skipNulls,Hr.encode?Hr.encoder:null,Hr.filter,Hr.sort,Hr.allowDots,Hr.serializeDate,Hr.format,Hr.formatter,Hr.encodeValuesOnly,Hr.charset,Bo))}var Qo=Eo.join(Hr.delimiter),pi=!0===Hr.addQueryPrefix?"?":"";return Hr.charsetSentinel&&("iso-8859-1"===Hr.charset?pi+="utf8=%26%2310003%3B&":pi+="utf8=%E2%9C%93&"),Qo.length>0?pi+Qo:""}},{"./formats":714,"./utils":718,"side-channel":720}],718:[function(xt,Ct,_t){"use strict";var $t=xt("./formats"),Vn=Object.prototype.hasOwnProperty,Gn=Array.isArray,or=function(){for(var xt=[],Ct=0;Ct<256;++Ct)xt.push("%"+((Ct<16?"0":"")+Ct.toString(16)).toUpperCase());return xt}(),arrayToObject=function(xt,Ct){for(var _t=Ct&&Ct.plainObjects?Object.create(null):{},$t=0;$t<xt.length;++$t)void 0!==xt[$t]&&(_t[$t]=xt[$t]);return _t};Ct.exports={arrayToObject:arrayToObject,assign:function(xt,Ct){return Object.keys(Ct).reduce((function(xt,_t){return xt[_t]=Ct[_t],xt}),xt)},combine:function(xt,Ct){return[].concat(xt,Ct)},compact:function(xt){for(var Ct=[{obj:{o:xt},prop:"o"}],_t=[],$t=0;$t<Ct.length;++$t)for(var Vn=Ct[$t],or=Vn.obj[Vn.prop],lr=Object.keys(or),Fr=0;Fr<lr.length;++Fr){var Hr=lr[Fr],xo=or[Hr];"object"==typeof xo&&null!==xo&&-1===_t.indexOf(xo)&&(Ct.push({obj:or,prop:Hr}),_t.push(xo))}return function(xt){for(;xt.length>1;){var Ct=xt.pop(),_t=Ct.obj[Ct.prop];if(Gn(_t)){for(var $t=[],Vn=0;Vn<_t.length;++Vn)void 0!==_t[Vn]&&$t.push(_t[Vn]);Ct.obj[Ct.prop]=$t}}}(Ct),xt},decode:function(xt,Ct,_t){var $t=xt.replace(/\+/g," ");if("iso-8859-1"===_t)return $t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent($t)}catch(xt){return $t}},encode:function(xt,Ct,_t,Vn,Gn){if(0===xt.length)return xt;var lr=xt;if("symbol"==typeof xt?lr=Symbol.prototype.toString.call(xt):"string"!=typeof xt&&(lr=String(xt)),"iso-8859-1"===_t)return escape(lr).replace(/%u[0-9a-f]{4}/gi,(function(xt){return"%26%23"+parseInt(xt.slice(2),16)+"%3B"}));for(var Fr="",Hr=0;Hr<lr.length;++Hr){var xo=lr.charCodeAt(Hr);45===xo||46===xo||95===xo||126===xo||xo>=48&&xo<=57||xo>=65&&xo<=90||xo>=97&&xo<=122||Gn===$t.RFC1738&&(40===xo||41===xo)?Fr+=lr.charAt(Hr):xo<128?Fr+=or[xo]:xo<2048?Fr+=or[192|xo>>6]+or[128|63&xo]:xo<55296||xo>=57344?Fr+=or[224|xo>>12]+or[128|xo>>6&63]+or[128|63&xo]:(Hr+=1,xo=65536+((1023&xo)<<10|1023&lr.charCodeAt(Hr)),Fr+=or[240|xo>>18]+or[128|xo>>12&63]+or[128|xo>>6&63]+or[128|63&xo])}return Fr},isBuffer:function(xt){return!(!xt||"object"!=typeof xt||!(xt.constructor&&xt.constructor.isBuffer&&xt.constructor.isBuffer(xt)))},isRegExp:function(xt){return"[object RegExp]"===Object.prototype.toString.call(xt)},maybeMap:function(xt,Ct){if(Gn(xt)){for(var _t=[],$t=0;$t<xt.length;$t+=1)_t.push(Ct(xt[$t]));return _t}return Ct(xt)},merge:function e(xt,Ct,_t){if(!Ct)return xt;if("object"!=typeof Ct){if(Gn(xt))xt.push(Ct);else{if(!xt||"object"!=typeof xt)return[xt,Ct];(_t&&(_t.plainObjects||_t.allowPrototypes)||!Vn.call(Object.prototype,Ct))&&(xt[Ct]=!0)}return xt}if(!xt||"object"!=typeof xt)return[xt].concat(Ct);var $t=xt;return Gn(xt)&&!Gn(Ct)&&($t=arrayToObject(xt,_t)),Gn(xt)&&Gn(Ct)?(Ct.forEach((function(Ct,$t){if(Vn.call(xt,$t)){var Gn=xt[$t];Gn&&"object"==typeof Gn&&Ct&&"object"==typeof Ct?xt[$t]=e(Gn,Ct,_t):xt.push(Ct)}else xt[$t]=Ct})),xt):Object.keys(Ct).reduce((function(xt,$t){var Gn=Ct[$t];return Vn.call(xt,$t)?xt[$t]=e(xt[$t],Gn,_t):xt[$t]=Gn,xt}),$t)}}},{"./formats":714}],719:[function(xt,Ct,_t){"use strict";var $t=xt("get-intrinsic"),Vn=xt("define-data-property"),Gn=xt("has-property-descriptors")(),or=xt("gopd"),lr=xt("es-errors/type"),Fr=$t("%Math.floor%");Ct.exports=function(xt,Ct){if("function"!=typeof xt)throw new lr("`fn` is not a function");if("number"!=typeof Ct||Ct<0||Ct>4294967295||Fr(Ct)!==Ct)throw new lr("`length` must be a positive 32-bit integer");var _t=arguments.length>2&&!!arguments[2],$t=!0,Hr=!0;if("length"in xt&&or){var xo=or(xt,"length");xo&&!xo.configurable&&($t=!1),xo&&!xo.writable&&(Hr=!1)}return($t||Hr||!_t)&&(Gn?Vn(xt,"length",Ct,!0,!0):Vn(xt,"length",Ct)),xt}},{"define-data-property":691,"es-errors/type":698,"get-intrinsic":702,gopd:703,"has-property-descriptors":704}],720:[function(xt,Ct,_t){"use strict";var $t=xt("get-intrinsic"),Vn=xt("call-bind/callBound"),Gn=xt("object-inspect"),or=xt("es-errors/type"),lr=$t("%WeakMap%",!0),Fr=$t("%Map%",!0),Hr=Vn("WeakMap.prototype.get",!0),xo=Vn("WeakMap.prototype.set",!0),Eo=Vn("WeakMap.prototype.has",!0),Mo=Vn("Map.prototype.get",!0),Oo=Vn("Map.prototype.set",!0),Ro=Vn("Map.prototype.has",!0),listGetNode=function(xt,Ct){for(var _t,$t=xt;null!==(_t=$t.next);$t=_t)if(_t.key===Ct)return $t.next=_t.next,_t.next=xt.next,xt.next=_t,_t};Ct.exports=function(){var xt,Ct,_t,$t={assert:function(xt){if(!$t.has(xt))throw new or("Side channel does not contain "+Gn(xt))},get:function($t){if(lr&&$t&&("object"==typeof $t||"function"==typeof $t)){if(xt)return Hr(xt,$t)}else if(Fr){if(Ct)return Mo(Ct,$t)}else if(_t)return function(xt,Ct){var _t=listGetNode(xt,Ct);return _t&&_t.value}(_t,$t)},has:function($t){if(lr&&$t&&("object"==typeof $t||"function"==typeof $t)){if(xt)return Eo(xt,$t)}else if(Fr){if(Ct)return Ro(Ct,$t)}else if(_t)return function(xt,Ct){return!!listGetNode(xt,Ct)}(_t,$t);return!1},set:function($t,Vn){lr&&$t&&("object"==typeof $t||"function"==typeof $t)?(xt||(xt=new lr),xo(xt,$t,Vn)):Fr?(Ct||(Ct=new Fr),Oo(Ct,$t,Vn)):(_t||(_t={key:{},next:null}),function(xt,Ct,_t){var $t=listGetNode(xt,Ct);$t?$t.value=_t:xt.next={key:Ct,next:xt.next,value:_t}}(_t,$t,Vn))}};return $t}},{"call-bind/callBound":689,"es-errors/type":698,"get-intrinsic":702,"object-inspect":710}],721:[function(xt,Ct,_t){"use strict";var $t=xt("punycode");function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Vn=/^([a-z0-9.+-]+:)/i,Gn=/:[0-9]*$/,or=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,lr=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Fr=["'"].concat(lr),Hr=["%","/","?",";","#"].concat(Fr),xo=["/","?","#"],Eo=/^[+a-z0-9A-Z_-]{0,63}$/,Mo=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Oo={javascript:!0,"javascript:":!0},Ro={javascript:!0,"javascript:":!0},Io={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Bo=xt("qs");function urlParse(xt,Ct,_t){if(xt&&"object"==typeof xt&&xt instanceof Url)return xt;var $t=new Url;return $t.parse(xt,Ct,_t),$t}Url.prototype.parse=function(xt,Ct,_t){if("string"!=typeof xt)throw new TypeError("Parameter 'url' must be a string, not "+typeof xt);var Gn=xt.indexOf("?"),lr=-1!==Gn&&Gn<xt.indexOf("#")?"?":"#",zo=xt.split(lr);zo[0]=zo[0].replace(/\\/g,"/");var Ho=xt=zo.join(lr);if(Ho=Ho.trim(),!_t&&1===xt.split("#").length){var Qo=or.exec(Ho);if(Qo)return this.path=Ho,this.href=Ho,this.pathname=Qo[1],Qo[2]?(this.search=Qo[2],this.query=Ct?Bo.parse(this.search.substr(1)):this.search.substr(1)):Ct&&(this.search="",this.query={}),this}var pi=Vn.exec(Ho);if(pi){var gi=(pi=pi[0]).toLowerCase();this.protocol=gi,Ho=Ho.substr(pi.length)}if(_t||pi||Ho.match(/^\/\/[^@/]+@[^@/]+/)){var es="//"===Ho.substr(0,2);!es||pi&&Ro[pi]||(Ho=Ho.substr(2),this.slashes=!0)}if(!Ro[pi]&&(es||pi&&!Io[pi])){for(var ts,ns,rs=-1,os=0;os<xo.length;os++)-1!==(is=Ho.indexOf(xo[os]))&&(-1===rs||is<rs)&&(rs=is);for(-1!==(ns=-1===rs?Ho.lastIndexOf("@"):Ho.lastIndexOf("@",rs))&&(ts=Ho.slice(0,ns),Ho=Ho.slice(ns+1),this.auth=decodeURIComponent(ts)),rs=-1,os=0;os<Hr.length;os++){var is;-1!==(is=Ho.indexOf(Hr[os]))&&(-1===rs||is<rs)&&(rs=is)}-1===rs&&(rs=Ho.length),this.host=Ho.slice(0,rs),Ho=Ho.slice(rs),this.parseHost(),this.hostname=this.hostname||"";var ss="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ss)for(var as=this.hostname.split(/\./),ls=(os=0,as.length);os<ls;os++){var cs=as[os];if(cs&&!cs.match(Eo)){for(var us="",fs=0,hs=cs.length;fs<hs;fs++)cs.charCodeAt(fs)>127?us+="x":us+=cs[fs];if(!us.match(Eo)){var ps=as.slice(0,os),ds=as.slice(os+1),ms=cs.match(Mo);ms&&(ps.push(ms[1]),ds.unshift(ms[2])),ds.length&&(Ho="/"+ds.join(".")+Ho),this.hostname=ps.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),ss||(this.hostname=$t.toASCII(this.hostname));var gs=this.port?":"+this.port:"",vs=this.hostname||"";this.host=vs+gs,this.href+=this.host,ss&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==Ho[0]&&(Ho="/"+Ho))}if(!Oo[gi])for(os=0,ls=Fr.length;os<ls;os++){var ys=Fr[os];if(-1!==Ho.indexOf(ys)){var bs=encodeURIComponent(ys);bs===ys&&(bs=escape(ys)),Ho=Ho.split(ys).join(bs)}}var xs=Ho.indexOf("#");-1!==xs&&(this.hash=Ho.substr(xs),Ho=Ho.slice(0,xs));var ws=Ho.indexOf("?");if(-1!==ws?(this.search=Ho.substr(ws),this.query=Ho.substr(ws+1),Ct&&(this.query=Bo.parse(this.query)),Ho=Ho.slice(0,ws)):Ct&&(this.search="",this.query={}),Ho&&(this.pathname=Ho),Io[gi]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){gs=this.pathname||"";var As=this.search||"";this.path=gs+As}return this.href=this.format(),this},Url.prototype.format=function(){var xt=this.auth||"";xt&&(xt=(xt=encodeURIComponent(xt)).replace(/%3A/i,":"),xt+="@");var Ct=this.protocol||"",_t=this.pathname||"",$t=this.hash||"",Vn=!1,Gn="";this.host?Vn=xt+this.host:this.hostname&&(Vn=xt+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Vn+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(Gn=Bo.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var or=this.search||Gn&&"?"+Gn||"";return Ct&&":"!==Ct.substr(-1)&&(Ct+=":"),this.slashes||(!Ct||Io[Ct])&&!1!==Vn?(Vn="//"+(Vn||""),_t&&"/"!==_t.charAt(0)&&(_t="/"+_t)):Vn||(Vn=""),$t&&"#"!==$t.charAt(0)&&($t="#"+$t),or&&"?"!==or.charAt(0)&&(or="?"+or),Ct+Vn+(_t=_t.replace(/[?#]/g,(function(xt){return encodeURIComponent(xt)})))+(or=or.replace("#","%23"))+$t},Url.prototype.resolve=function(xt){return this.resolveObject(urlParse(xt,!1,!0)).format()},Url.prototype.resolveObject=function(xt){if("string"==typeof xt){var Ct=new Url;Ct.parse(xt,!1,!0),xt=Ct}for(var _t=new Url,$t=Object.keys(this),Vn=0;Vn<$t.length;Vn++){var Gn=$t[Vn];_t[Gn]=this[Gn]}if(_t.hash=xt.hash,""===xt.href)return _t.href=_t.format(),_t;if(xt.slashes&&!xt.protocol){for(var or=Object.keys(xt),lr=0;lr<or.length;lr++){var Fr=or[lr];"protocol"!==Fr&&(_t[Fr]=xt[Fr])}return Io[_t.protocol]&&_t.hostname&&!_t.pathname&&(_t.pathname="/",_t.path=_t.pathname),_t.href=_t.format(),_t}if(xt.protocol&&xt.protocol!==_t.protocol){if(!Io[xt.protocol]){for(var Hr=Object.keys(xt),xo=0;xo<Hr.length;xo++){var Eo=Hr[xo];_t[Eo]=xt[Eo]}return _t.href=_t.format(),_t}if(_t.protocol=xt.protocol,xt.host||Ro[xt.protocol])_t.pathname=xt.pathname;else{for(var Mo=(xt.pathname||"").split("/");Mo.length&&!(xt.host=Mo.shift()););xt.host||(xt.host=""),xt.hostname||(xt.hostname=""),""!==Mo[0]&&Mo.unshift(""),Mo.length<2&&Mo.unshift(""),_t.pathname=Mo.join("/")}if(_t.search=xt.search,_t.query=xt.query,_t.host=xt.host||"",_t.auth=xt.auth,_t.hostname=xt.hostname||xt.host,_t.port=xt.port,_t.pathname||_t.search){var Oo=_t.pathname||"",Bo=_t.search||"";_t.path=Oo+Bo}return _t.slashes=_t.slashes||xt.slashes,_t.href=_t.format(),_t}var zo=_t.pathname&&"/"===_t.pathname.charAt(0),Ho=xt.host||xt.pathname&&"/"===xt.pathname.charAt(0),Qo=Ho||zo||_t.host&&xt.pathname,pi=Qo,gi=_t.pathname&&_t.pathname.split("/")||[],es=(Mo=xt.pathname&&xt.pathname.split("/")||[],_t.protocol&&!Io[_t.protocol]);if(es&&(_t.hostname="",_t.port=null,_t.host&&(""===gi[0]?gi[0]=_t.host:gi.unshift(_t.host)),_t.host="",xt.protocol&&(xt.hostname=null,xt.port=null,xt.host&&(""===Mo[0]?Mo[0]=xt.host:Mo.unshift(xt.host)),xt.host=null),Qo=Qo&&(""===Mo[0]||""===gi[0])),Ho)_t.host=xt.host||""===xt.host?xt.host:_t.host,_t.hostname=xt.hostname||""===xt.hostname?xt.hostname:_t.hostname,_t.search=xt.search,_t.query=xt.query,gi=Mo;else if(Mo.length)gi||(gi=[]),gi.pop(),gi=gi.concat(Mo),_t.search=xt.search,_t.query=xt.query;else if(null!=xt.search)return es&&(_t.host=gi.shift(),_t.hostname=_t.host,(is=!!(_t.host&&_t.host.indexOf("@")>0)&&_t.host.split("@"))&&(_t.auth=is.shift(),_t.hostname=is.shift(),_t.host=_t.hostname)),_t.search=xt.search,_t.query=xt.query,null===_t.pathname&&null===_t.search||(_t.path=(_t.pathname?_t.pathname:"")+(_t.search?_t.search:"")),_t.href=_t.format(),_t;if(!gi.length)return _t.pathname=null,_t.search?_t.path="/"+_t.search:_t.path=null,_t.href=_t.format(),_t;for(var ts=gi.slice(-1)[0],ns=(_t.host||xt.host||gi.length>1)&&("."===ts||".."===ts)||""===ts,rs=0,os=gi.length;os>=0;os--)"."===(ts=gi[os])?gi.splice(os,1):".."===ts?(gi.splice(os,1),rs++):rs&&(gi.splice(os,1),rs--);if(!Qo&&!pi)for(;rs--;rs)gi.unshift("..");!Qo||""===gi[0]||gi[0]&&"/"===gi[0].charAt(0)||gi.unshift(""),ns&&"/"!==gi.join("/").substr(-1)&&gi.push("");var is,ss=""===gi[0]||gi[0]&&"/"===gi[0].charAt(0);return es&&(_t.hostname=ss?"":gi.length?gi.shift():"",_t.host=_t.hostname,(is=!!(_t.host&&_t.host.indexOf("@")>0)&&_t.host.split("@"))&&(_t.auth=is.shift(),_t.hostname=is.shift(),_t.host=_t.hostname)),(Qo=Qo||_t.host&&gi.length)&&!ss&&gi.unshift(""),gi.length>0?_t.pathname=gi.join("/"):(_t.pathname=null,_t.path=null),null===_t.pathname&&null===_t.search||(_t.path=(_t.pathname?_t.pathname:"")+(_t.search?_t.search:"")),_t.auth=xt.auth||_t.auth,_t.slashes=_t.slashes||xt.slashes,_t.href=_t.format(),_t},Url.prototype.parseHost=function(){var xt=this.host,Ct=Gn.exec(xt);Ct&&(":"!==(Ct=Ct[0])&&(this.port=Ct.substr(1)),xt=xt.substr(0,xt.length-Ct.length)),xt&&(this.hostname=xt)},_t.parse=urlParse,_t.resolve=function urlResolve(xt,Ct){return urlParse(xt,!1,!0).resolve(Ct)},_t.resolveObject=function urlResolveObject(xt,Ct){return xt?urlParse(xt,!1,!0).resolveObject(Ct):Ct},_t.format=function urlFormat(xt){return"string"==typeof xt&&(xt=urlParse(xt)),xt instanceof Url?xt.format():Url.prototype.format.call(xt)},_t.Url=Url},{punycode:713,qs:715}],722:[function(xt,Ct,_t){(function(xt){var Ct=xt.Pos;function r(xt,Ct){for(var _t=0,$t=xt.length;_t<$t;++_t)Ct(xt[_t])}function n(_t,$t,Vn,Gn){var or=_t.getCursor(),lr=Vn(_t,or);if(!/\b(?:string|comment)\b/.test(lr.type)){var Fr=xt.innerMode(_t.getMode(),lr.state);if("json"!==Fr.mode.helperType){lr.state=Fr.state,/^[\w$_]*$/.test(lr.string)?lr.end>or.ch&&(lr.end=or.ch,lr.string=lr.string.slice(0,or.ch-lr.start)):lr={start:or.ch,end:or.ch,string:"",state:lr.state,type:"."==lr.string?"property":null};for(var Hr=lr;"property"==Hr.type;){if("."!=(Hr=Vn(_t,Ct(or.line,Hr.start))).string)return;if(Hr=Vn(_t,Ct(or.line,Hr.start)),!xo)var xo=[];xo.push(Hr)}return{list:c(lr,xo,$t,Gn),from:Ct(or.line,lr.start),to:Ct(or.line,lr.end)}}}}function i(xt,Ct){var _t=xt.getTokenAt(Ct);return Ct.ch==_t.start+1&&"."==_t.string.charAt(0)?(_t.end=_t.start,_t.string=".",_t.type="property"):/^\.[\w$_]*$/.test(_t.string)&&(_t.type="property",_t.start++,_t.string=_t.string.replace(/\./,"")),_t}xt.registerHelper("hint","javascript",(function(xt,Ct){return n(xt,Gn,(function(xt,Ct){return xt.getTokenAt(Ct)}),Ct)})),xt.registerHelper("hint","coffeescript",(function(xt,Ct){return n(xt,or,i,Ct)}));var _t="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),$t="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),Vn="prototype apply call bind".split(" "),Gn="break case catch class const continue debugger default delete do else export extends false finally for function if in import instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),or="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ");function c(xt,Ct,Gn,or){var lr=[],Fr=xt.string,Hr=or&&or.globalScope||window;function p(xt){0!=xt.lastIndexOf(Fr,0)||function(xt,Ct){if(!Array.prototype.indexOf){for(var _t=xt.length;_t--;)if(xt[_t]===Ct)return!0;return!1}return-1!=xt.indexOf(Ct)}(lr,xt)||lr.push(xt)}function u(xt){"string"==typeof xt?r(_t,p):xt instanceof Array?r($t,p):xt instanceof Function&&r(Vn,p),function(xt,Ct){if(Object.getOwnPropertyNames&&Object.getPrototypeOf)for(var _t=xt;_t;_t=Object.getPrototypeOf(_t))Object.getOwnPropertyNames(_t).forEach(Ct);else for(var $t in xt)Ct($t)}(xt,p)}if(Ct&&Ct.length){var xo,Eo=Ct.pop();for(Eo.type&&0===Eo.type.indexOf("variable")?(or&&or.additionalContext&&(xo=or.additionalContext[Eo.string]),or&&!1===or.useGlobalScope||(xo=xo||Hr[Eo.string])):"string"==Eo.type?xo="":"atom"==Eo.type?xo=1:"function"==Eo.type&&(null==Hr.jQuery||"$"!=Eo.string&&"jQuery"!=Eo.string||"function"!=typeof Hr.jQuery?null!=Hr._&&"_"==Eo.string&&"function"==typeof Hr._&&(xo=Hr._()):xo=Hr.jQuery());null!=xo&&Ct.length;)xo=xo[Ct.pop().string];null!=xo&&u(xo)}else{for(var Mo=xt.state.localVars;Mo;Mo=Mo.next)p(Mo.name);for(var Oo=xt.state.context;Oo;Oo=Oo.prev)for(Mo=Oo.vars;Mo;Mo=Mo.next)p(Mo.name);for(Mo=xt.state.globalVars;Mo;Mo=Mo.next)p(Mo.name);if(or&&null!=or.additionalContext)for(var Ro in or.additionalContext)p(Ro);or&&!1===or.useGlobalScope||u(Hr),r(Gn,p)}return lr}})("object"==typeof _t&&"object"==typeof Ct?xt("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":723}],723:[function(xt,Ct,_t){var $t,Vn;$t=this,Vn=function(){"use strict";var xt=navigator.userAgent,Ct=navigator.platform,_t=/gecko\/\d/i.test(xt),$t=/MSIE \d/.test(xt),Vn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xt),Gn=/Edge\/(\d+)/.exec(xt),or=$t||Vn||Gn,lr=or&&($t?document.documentMode||6:+(Gn||Vn)[1]),Fr=!Gn&&/WebKit\//.test(xt),Hr=Fr&&/Qt\/\d+\.\d+/.test(xt),xo=!Gn&&/Chrome\//.test(xt),Eo=/Opera\//.test(xt),Mo=/Apple Computer/.test(navigator.vendor),Oo=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(xt),Ro=/PhantomJS/.test(xt),Io=Mo&&(/Mobile\/\w+/.test(xt)||navigator.maxTouchPoints>2),Bo=/Android/.test(xt),zo=Io||Bo||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(xt),Ho=Io||/Mac/.test(Ct),Qo=/\bCrOS\b/.test(xt),pi=/win/i.test(Ct),gi=Eo&&xt.match(/Version\/(\d*\.\d*)/);gi&&(gi=Number(gi[1])),gi&&gi>=15&&(Eo=!1,Fr=!0);var es=Ho&&(Hr||Eo&&(null==gi||gi<12.11)),ts=_t||or&&lr>=9;function L(xt){return new RegExp("(^|\\s)"+xt+"(?:$|\\s)\\s*")}var ns,T=function(xt,Ct){var _t=xt.className,$t=L(Ct).exec(_t);if($t){var Vn=_t.slice($t.index+$t[0].length);xt.className=_t.slice(0,$t.index)+(Vn?$t[1]+Vn:"")}};function M(xt){for(var Ct=xt.childNodes.length;Ct>0;--Ct)xt.removeChild(xt.firstChild);return xt}function N(xt,Ct){return M(xt).appendChild(Ct)}function O(xt,Ct,_t,$t){var Vn=document.createElement(xt);if(_t&&(Vn.className=_t),$t&&(Vn.style.cssText=$t),"string"==typeof Ct)Vn.appendChild(document.createTextNode(Ct));else if(Ct)for(var Gn=0;Gn<Ct.length;++Gn)Vn.appendChild(Ct[Gn]);return Vn}function A(xt,Ct,_t,$t){var Vn=O(xt,Ct,_t,$t);return Vn.setAttribute("role","presentation"),Vn}function D(xt,Ct){if(3==Ct.nodeType&&(Ct=Ct.parentNode),xt.contains)return xt.contains(Ct);do{if(11==Ct.nodeType&&(Ct=Ct.host),Ct==xt)return!0}while(Ct=Ct.parentNode)}function W(){var xt;try{xt=document.activeElement}catch(Ct){xt=document.body||null}for(;xt&&xt.shadowRoot&&xt.shadowRoot.activeElement;)xt=xt.shadowRoot.activeElement;return xt}function H(xt,Ct){var _t=xt.className;L(Ct).test(_t)||(xt.className+=(_t?" ":"")+Ct)}function F(xt,Ct){for(var _t=xt.split(" "),$t=0;$t<_t.length;$t++)_t[$t]&&!L(_t[$t]).test(Ct)&&(Ct+=" "+_t[$t]);return Ct}ns=document.createRange?function(xt,Ct,_t,$t){var Vn=document.createRange();return Vn.setEnd($t||xt,_t),Vn.setStart(xt,Ct),Vn}:function(xt,Ct,_t){var $t=document.body.createTextRange();try{$t.moveToElementText(xt.parentNode)}catch(xt){return $t}return $t.collapse(!0),$t.moveEnd("character",_t),$t.moveStart("character",Ct),$t};var P=function(xt){xt.select()};function E(xt){var Ct=Array.prototype.slice.call(arguments,1);return function(){return xt.apply(null,Ct)}}function I(xt,Ct,_t){for(var $t in Ct||(Ct={}),xt)!xt.hasOwnProperty($t)||!1===_t&&Ct.hasOwnProperty($t)||(Ct[$t]=xt[$t]);return Ct}function R(xt,Ct,_t,$t,Vn){null==Ct&&-1==(Ct=xt.search(/[^\s\u00a0]/))&&(Ct=xt.length);for(var Gn=$t||0,or=Vn||0;;){var lr=xt.indexOf("\t",Gn);if(lr<0||lr>=Ct)return or+(Ct-Gn);or+=lr-Gn,or+=_t-or%_t,Gn=lr+1}}Io?P=function(xt){xt.selectionStart=0,xt.selectionEnd=xt.value.length}:or&&(P=function(xt){try{xt.select()}catch(xt){}});var z=function(){this.id=null,this.f=null,this.time=0,this.handler=E(this.onTimeout,this)};function B(xt,Ct){for(var _t=0;_t<xt.length;++_t)if(xt[_t]==Ct)return _t;return-1}z.prototype.onTimeout=function(xt){xt.id=0,xt.time<=+new Date?xt.f():setTimeout(xt.handler,xt.time-+new Date)},z.prototype.set=function(xt,Ct){this.f=Ct;var _t=+new Date+xt;(!this.id||_t<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,xt),this.time=_t)};var rs=50,os={toString:function(){return"CodeMirror.Pass"}},is={scroll:!1},ss={origin:"*mouse"},as={origin:"+move"};function X(xt,Ct,_t){for(var $t=0,Vn=0;;){var Gn=xt.indexOf("\t",$t);-1==Gn&&(Gn=xt.length);var or=Gn-$t;if(Gn==xt.length||Vn+or>=Ct)return $t+Math.min(or,Ct-Vn);if(Vn+=Gn-$t,$t=Gn+1,(Vn+=_t-Vn%_t)>=Ct)return $t}}var ls=[""];function $(xt){for(;ls.length<=xt;)ls.push(_(ls)+" ");return ls[xt]}function _(xt){return xt[xt.length-1]}function q(xt,Ct){for(var _t=[],$t=0;$t<xt.length;$t++)_t[$t]=Ct(xt[$t],$t);return _t}function Z(){}function Q(xt,Ct){var _t;return Object.create?_t=Object.create(xt):(Z.prototype=xt,_t=new Z),Ct&&I(Ct,_t),_t}var cs=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(xt){return/\w/.test(xt)||xt>"Â€"&&(xt.toUpperCase()!=xt.toLowerCase()||cs.test(xt))}function te(xt,Ct){return Ct?!!(Ct.source.indexOf("\\w")>-1&&ee(xt))||Ct.test(xt):ee(xt)}function re(xt){for(var Ct in xt)if(xt.hasOwnProperty(Ct)&&xt[Ct])return!1;return!0}var us=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ie(xt){return xt.charCodeAt(0)>=768&&us.test(xt)}function oe(xt,Ct,_t){for(;(_t<0?Ct>0:Ct<xt.length)&&ie(xt.charAt(Ct));)Ct+=_t;return Ct}function le(xt,Ct,_t){for(var $t=Ct>_t?-1:1;;){if(Ct==_t)return Ct;var Vn=(Ct+_t)/2,Gn=$t<0?Math.ceil(Vn):Math.floor(Vn);if(Gn==Ct)return xt(Gn)?Ct:_t;xt(Gn)?_t=Gn:Ct=Gn+$t}}var fs=null;function ae(xt,Ct,_t){var $t;fs=null;for(var Vn=0;Vn<xt.length;++Vn){var Gn=xt[Vn];if(Gn.from<Ct&&Gn.to>Ct)return Vn;Gn.to==Ct&&(Gn.from!=Gn.to&&"before"==_t?$t=Vn:fs=Vn),Gn.from==Ct&&(Gn.from!=Gn.to&&"before"!=_t?$t=Vn:fs=Vn)}return null!=$t?$t:fs}var hs=function(){var xt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Ct=/[stwN]/,_t=/[LRr]/,$t=/[Lb1n]/,Vn=/[1n]/;function s(xt,Ct,_t){this.level=xt,this.from=Ct,this.to=_t}return function(Gn,or){var lr="ltr"==or?"L":"R";if(0==Gn.length||"ltr"==or&&!xt.test(Gn))return!1;for(var Fr,Hr=Gn.length,xo=[],Eo=0;Eo<Hr;++Eo)xo.push((Fr=Gn.charCodeAt(Eo))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(Fr):1424<=Fr&&Fr<=1524?"R":1536<=Fr&&Fr<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(Fr-1536):1774<=Fr&&Fr<=2220?"r":8192<=Fr&&Fr<=8203?"w":8204==Fr?"b":"L");for(var Mo=0,Oo=lr;Mo<Hr;++Mo){var Ro=xo[Mo];"m"==Ro?xo[Mo]=Oo:Oo=Ro}for(var Io=0,Bo=lr;Io<Hr;++Io){var zo=xo[Io];"1"==zo&&"r"==Bo?xo[Io]="n":_t.test(zo)&&(Bo=zo,"r"==zo&&(xo[Io]="R"))}for(var Ho=1,Qo=xo[0];Ho<Hr-1;++Ho){var pi=xo[Ho];"+"==pi&&"1"==Qo&&"1"==xo[Ho+1]?xo[Ho]="1":","!=pi||Qo!=xo[Ho+1]||"1"!=Qo&&"n"!=Qo||(xo[Ho]=Qo),Qo=pi}for(var gi=0;gi<Hr;++gi){var es=xo[gi];if(","==es)xo[gi]="N";else if("%"==es){var ts=void 0;for(ts=gi+1;ts<Hr&&"%"==xo[ts];++ts);for(var ns=gi&&"!"==xo[gi-1]||ts<Hr&&"1"==xo[ts]?"1":"N",rs=gi;rs<ts;++rs)xo[rs]=ns;gi=ts-1}}for(var os=0,is=lr;os<Hr;++os){var ss=xo[os];"L"==is&&"1"==ss?xo[os]="L":_t.test(ss)&&(is=ss)}for(var as=0;as<Hr;++as)if(Ct.test(xo[as])){var ls=void 0;for(ls=as+1;ls<Hr&&Ct.test(xo[ls]);++ls);for(var cs="L"==(as?xo[as-1]:lr),us=cs==("L"==(ls<Hr?xo[ls]:lr))?cs?"L":"R":lr,fs=as;fs<ls;++fs)xo[fs]=us;as=ls-1}for(var hs,ps=[],ds=0;ds<Hr;)if($t.test(xo[ds])){var ms=ds;for(++ds;ds<Hr&&$t.test(xo[ds]);++ds);ps.push(new s(0,ms,ds))}else{var gs=ds,vs=ps.length,ys="rtl"==or?1:0;for(++ds;ds<Hr&&"L"!=xo[ds];++ds);for(var bs=gs;bs<ds;)if(Vn.test(xo[bs])){gs<bs&&(ps.splice(vs,0,new s(1,gs,bs)),vs+=ys);var xs=bs;for(++bs;bs<ds&&Vn.test(xo[bs]);++bs);ps.splice(vs,0,new s(2,xs,bs)),vs+=ys,gs=bs}else++bs;gs<ds&&ps.splice(vs,0,new s(1,gs,ds))}return"ltr"==or&&(1==ps[0].level&&(hs=Gn.match(/^\s+/))&&(ps[0].from=hs[0].length,ps.unshift(new s(0,0,hs[0].length))),1==_(ps).level&&(hs=Gn.match(/\s+$/))&&(_(ps).to-=hs[0].length,ps.push(new s(0,Hr-hs[0].length,Hr)))),"rtl"==or?ps.reverse():ps}}();function ce(xt,Ct){var _t=xt.order;return null==_t&&(_t=xt.order=hs(xt.text,Ct)),_t}var ps=[],fe=function(xt,Ct,_t){if(xt.addEventListener)xt.addEventListener(Ct,_t,!1);else if(xt.attachEvent)xt.attachEvent("on"+Ct,_t);else{var $t=xt._handlers||(xt._handlers={});$t[Ct]=($t[Ct]||ps).concat(_t)}};function de(xt,Ct){return xt._handlers&&xt._handlers[Ct]||ps}function pe(xt,Ct,_t){if(xt.removeEventListener)xt.removeEventListener(Ct,_t,!1);else if(xt.detachEvent)xt.detachEvent("on"+Ct,_t);else{var $t=xt._handlers,Vn=$t&&$t[Ct];if(Vn){var Gn=B(Vn,_t);Gn>-1&&($t[Ct]=Vn.slice(0,Gn).concat(Vn.slice(Gn+1)))}}}function ge(xt,Ct){var _t=de(xt,Ct);if(_t.length)for(var $t=Array.prototype.slice.call(arguments,2),Vn=0;Vn<_t.length;++Vn)_t[Vn].apply(null,$t)}function ve(xt,Ct,_t){return"string"==typeof Ct&&(Ct={type:Ct,preventDefault:function(){this.defaultPrevented=!0}}),ge(xt,_t||Ct.type,xt,Ct),Ce(Ct)||Ct.codemirrorIgnore}function me(xt){var Ct=xt._handlers&&xt._handlers.cursorActivity;if(Ct)for(var _t=xt.curOp.cursorActivityHandlers||(xt.curOp.cursorActivityHandlers=[]),$t=0;$t<Ct.length;++$t)-1==B(_t,Ct[$t])&&_t.push(Ct[$t])}function ye(xt,Ct){return de(xt,Ct).length>0}function be(xt){xt.prototype.on=function(xt,Ct){fe(this,xt,Ct)},xt.prototype.off=function(xt,Ct){pe(this,xt,Ct)}}function we(xt){xt.preventDefault?xt.preventDefault():xt.returnValue=!1}function xe(xt){xt.stopPropagation?xt.stopPropagation():xt.cancelBubble=!0}function Ce(xt){return null!=xt.defaultPrevented?xt.defaultPrevented:0==xt.returnValue}function Se(xt){we(xt),xe(xt)}function Le(xt){return xt.target||xt.srcElement}function ke(xt){var Ct=xt.which;return null==Ct&&(1&xt.button?Ct=1:2&xt.button?Ct=3:4&xt.button&&(Ct=2)),Ho&&xt.ctrlKey&&1==Ct&&(Ct=3),Ct}var ds,ms,gs=function(){if(or&&lr<9)return!1;var xt=O("div");return"draggable"in xt||"dragDrop"in xt}();function Oe(xt){if(null==ds){var Ct=O("span","â€‹");N(xt,O("span",[Ct,document.createTextNode("x")])),0!=xt.firstChild.offsetHeight&&(ds=Ct.offsetWidth<=1&&Ct.offsetHeight>2&&!(or&&lr<8))}var _t=ds?O("span","â€‹"):O("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return _t.setAttribute("cm-text",""),_t}function Ae(xt){if(null!=ms)return ms;var Ct=N(xt,document.createTextNode("AØ®A")),_t=ns(Ct,0,1).getBoundingClientRect(),$t=ns(Ct,1,2).getBoundingClientRect();return M(xt),!(!_t||_t.left==_t.right)&&(ms=$t.right-_t.right<3)}var vs,ys=3!="\n\nb".split(/\n/).length?function(xt){for(var Ct=0,_t=[],$t=xt.length;Ct<=$t;){var Vn=xt.indexOf("\n",Ct);-1==Vn&&(Vn=xt.length);var Gn=xt.slice(Ct,"\r"==xt.charAt(Vn-1)?Vn-1:Vn),or=Gn.indexOf("\r");-1!=or?(_t.push(Gn.slice(0,or)),Ct+=or+1):(_t.push(Gn),Ct=Vn+1)}return _t}:function(xt){return xt.split(/\r\n?|\n/)},bs=window.getSelection?function(xt){try{return xt.selectionStart!=xt.selectionEnd}catch(xt){return!1}}:function(xt){var Ct;try{Ct=xt.ownerDocument.selection.createRange()}catch(xt){}return!(!Ct||Ct.parentElement()!=xt)&&0!=Ct.compareEndPoints("StartToEnd",Ct)},xs="oncopy"in(vs=O("div"))||(vs.setAttribute("oncopy","return;"),"function"==typeof vs.oncopy),ws=null,As={},Ds={};function Re(xt){if("string"==typeof xt&&Ds.hasOwnProperty(xt))xt=Ds[xt];else if(xt&&"string"==typeof xt.name&&Ds.hasOwnProperty(xt.name)){var Ct=Ds[xt.name];"string"==typeof Ct&&(Ct={name:Ct}),(xt=Q(Ct,xt)).name=Ct.name}else{if("string"==typeof xt&&/^[\w\-]+\/[\w\-]+\+xml$/.test(xt))return Re("application/xml");if("string"==typeof xt&&/^[\w\-]+\/[\w\-]+\+json$/.test(xt))return Re("application/json")}return"string"==typeof xt?{name:xt}:xt||{name:"null"}}function ze(xt,Ct){Ct=Re(Ct);var _t=As[Ct.name];if(!_t)return ze(xt,"text/plain");var $t=_t(xt,Ct);if(Es.hasOwnProperty(Ct.name)){var Vn=Es[Ct.name];for(var Gn in Vn)Vn.hasOwnProperty(Gn)&&($t.hasOwnProperty(Gn)&&($t["_"+Gn]=$t[Gn]),$t[Gn]=Vn[Gn])}if($t.name=Ct.name,Ct.helperType&&($t.helperType=Ct.helperType),Ct.modeProps)for(var or in Ct.modeProps)$t[or]=Ct.modeProps[or];return $t}var Es={};function Ge(xt,Ct){I(Ct,Es.hasOwnProperty(xt)?Es[xt]:Es[xt]={})}function Ue(xt,Ct){if(!0===Ct)return Ct;if(xt.copyState)return xt.copyState(Ct);var _t={};for(var $t in Ct){var Vn=Ct[$t];Vn instanceof Array&&(Vn=Vn.concat([])),_t[$t]=Vn}return _t}function Ve(xt,Ct){for(var _t;xt.innerMode&&(_t=xt.innerMode(Ct))&&_t.mode!=xt;)Ct=_t.state,xt=_t.mode;return _t||{mode:xt,state:Ct}}function Ke(xt,Ct,_t){return!xt.startState||xt.startState(Ct,_t)}var je=function(xt,Ct,_t){this.pos=this.start=0,this.string=xt,this.tabSize=Ct||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=_t};function Xe(xt,Ct){if((Ct-=xt.first)<0||Ct>=xt.size)throw new Error("There is no line "+(Ct+xt.first)+" in the document.");for(var _t=xt;!_t.lines;)for(var $t=0;;++$t){var Vn=_t.children[$t],Gn=Vn.chunkSize();if(Ct<Gn){_t=Vn;break}Ct-=Gn}return _t.lines[Ct]}function Ye(xt,Ct,_t){var $t=[],Vn=Ct.line;return xt.iter(Ct.line,_t.line+1,(function(xt){var Gn=xt.text;Vn==_t.line&&(Gn=Gn.slice(0,_t.ch)),Vn==Ct.line&&(Gn=Gn.slice(Ct.ch)),$t.push(Gn),++Vn})),$t}function $e(xt,Ct,_t){var $t=[];return xt.iter(Ct,_t,(function(xt){$t.push(xt.text)})),$t}function _e(xt,Ct){var _t=Ct-xt.height;if(_t)for(var $t=xt;$t;$t=$t.parent)$t.height+=_t}function qe(xt){if(null==xt.parent)return null;for(var Ct=xt.parent,_t=B(Ct.lines,xt),$t=Ct.parent;$t;Ct=$t,$t=$t.parent)for(var Vn=0;$t.children[Vn]!=Ct;++Vn)_t+=$t.children[Vn].chunkSize();return _t+Ct.first}function Ze(xt,Ct){var _t=xt.first;e:do{for(var $t=0;$t<xt.children.length;++$t){var Vn=xt.children[$t],Gn=Vn.height;if(Ct<Gn){xt=Vn;continue e}Ct-=Gn,_t+=Vn.chunkSize()}return _t}while(!xt.lines);for(var or=0;or<xt.lines.length;++or){var lr=xt.lines[or].height;if(Ct<lr)break;Ct-=lr}return _t+or}function Qe(xt,Ct){return Ct>=xt.first&&Ct<xt.first+xt.size}function Je(xt,Ct){return String(xt.lineNumberFormatter(Ct+xt.firstLineNumber))}function et(xt,Ct,_t){if(void 0===_t&&(_t=null),!(this instanceof et))return new et(xt,Ct,_t);this.line=xt,this.ch=Ct,this.sticky=_t}function tt(xt,Ct){return xt.line-Ct.line||xt.ch-Ct.ch}function rt(xt,Ct){return xt.sticky==Ct.sticky&&0==tt(xt,Ct)}function nt(xt){return et(xt.line,xt.ch)}function it(xt,Ct){return tt(xt,Ct)<0?Ct:xt}function ot(xt,Ct){return tt(xt,Ct)<0?xt:Ct}function lt(xt,Ct){return Math.max(xt.first,Math.min(Ct,xt.first+xt.size-1))}function st(xt,Ct){if(Ct.line<xt.first)return et(xt.first,0);var _t=xt.first+xt.size-1;return Ct.line>_t?et(_t,Xe(xt,_t).text.length):function(xt,Ct){var _t=xt.ch;return null==_t||_t>Ct?et(xt.line,Ct):_t<0?et(xt.line,0):xt}(Ct,Xe(xt,Ct.line).text.length)}function at(xt,Ct){for(var _t=[],$t=0;$t<Ct.length;$t++)_t[$t]=st(xt,Ct[$t]);return _t}je.prototype.eol=function(){return this.pos>=this.string.length},je.prototype.sol=function(){return this.pos==this.lineStart},je.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},je.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},je.prototype.eat=function(xt){var Ct=this.string.charAt(this.pos);if("string"==typeof xt?Ct==xt:Ct&&(xt.test?xt.test(Ct):xt(Ct)))return++this.pos,Ct},je.prototype.eatWhile=function(xt){for(var Ct=this.pos;this.eat(xt););return this.pos>Ct},je.prototype.eatSpace=function(){for(var xt=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>xt},je.prototype.skipToEnd=function(){this.pos=this.string.length},je.prototype.skipTo=function(xt){var Ct=this.string.indexOf(xt,this.pos);if(Ct>-1)return this.pos=Ct,!0},je.prototype.backUp=function(xt){this.pos-=xt},je.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=R(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},je.prototype.indentation=function(){return R(this.string,null,this.tabSize)-(this.lineStart?R(this.string,this.lineStart,this.tabSize):0)},je.prototype.match=function(xt,Ct,_t){if("string"!=typeof xt){var $t=this.string.slice(this.pos).match(xt);return $t&&$t.index>0?null:($t&&!1!==Ct&&(this.pos+=$t[0].length),$t)}var i=function(xt){return _t?xt.toLowerCase():xt};if(i(this.string.substr(this.pos,xt.length))==i(xt))return!1!==Ct&&(this.pos+=xt.length),!0},je.prototype.current=function(){return this.string.slice(this.start,this.pos)},je.prototype.hideFirstChars=function(xt,Ct){this.lineStart+=xt;try{return Ct()}finally{this.lineStart-=xt}},je.prototype.lookAhead=function(xt){var Ct=this.lineOracle;return Ct&&Ct.lookAhead(xt)},je.prototype.baseToken=function(){var xt=this.lineOracle;return xt&&xt.baseToken(this.pos)};var ut=function(xt,Ct){this.state=xt,this.lookAhead=Ct},ct=function(xt,Ct,_t,$t){this.state=Ct,this.doc=xt,this.line=_t,this.maxLookAhead=$t||0,this.baseTokens=null,this.baseTokenPos=1};function ht(xt,Ct,_t,$t){var Vn=[xt.state.modeGen],Gn={};wt(xt,Ct.text,xt.doc.mode,_t,(function(xt,Ct){return Vn.push(xt,Ct)}),Gn,$t);for(var or=_t.state,s=function($t){_t.baseTokens=Vn;var lr=xt.state.overlays[$t],Fr=1,Hr=0;_t.state=!0,wt(xt,Ct.text,lr.mode,_t,(function(xt,Ct){for(var _t=Fr;Hr<xt;){var $t=Vn[Fr];$t>xt&&Vn.splice(Fr,1,xt,Vn[Fr+1],$t),Fr+=2,Hr=Math.min(xt,$t)}if(Ct)if(lr.opaque)Vn.splice(_t,Fr-_t,xt,"overlay "+Ct),Fr=_t+2;else for(;_t<Fr;_t+=2){var Gn=Vn[_t+1];Vn[_t+1]=(Gn?Gn+" ":"")+"overlay "+Ct}}),Gn),_t.state=or,_t.baseTokens=null,_t.baseTokenPos=1},lr=0;lr<xt.state.overlays.length;++lr)s(lr);return{styles:Vn,classes:Gn.bgClass||Gn.textClass?Gn:null}}function ft(xt,Ct,_t){if(!Ct.styles||Ct.styles[0]!=xt.state.modeGen){var $t=dt(xt,qe(Ct)),Vn=Ct.text.length>xt.options.maxHighlightLength&&Ue(xt.doc.mode,$t.state),Gn=ht(xt,Ct,$t);Vn&&($t.state=Vn),Ct.stateAfter=$t.save(!Vn),Ct.styles=Gn.styles,Gn.classes?Ct.styleClasses=Gn.classes:Ct.styleClasses&&(Ct.styleClasses=null),_t===xt.doc.highlightFrontier&&(xt.doc.modeFrontier=Math.max(xt.doc.modeFrontier,++xt.doc.highlightFrontier))}return Ct.styles}function dt(xt,Ct,_t){var $t=xt.doc,Vn=xt.display;if(!$t.mode.startState)return new ct($t,!0,Ct);var Gn=function(xt,Ct,_t){for(var $t,Vn,Gn=xt.doc,or=_t?-1:Ct-(xt.doc.mode.innerMode?1e3:100),lr=Ct;lr>or;--lr){if(lr<=Gn.first)return Gn.first;var Fr=Xe(Gn,lr-1),Hr=Fr.stateAfter;if(Hr&&(!_t||lr+(Hr instanceof ut?Hr.lookAhead:0)<=Gn.modeFrontier))return lr;var xo=R(Fr.text,null,xt.options.tabSize);(null==Vn||$t>xo)&&(Vn=lr-1,$t=xo)}return Vn}(xt,Ct,_t),or=Gn>$t.first&&Xe($t,Gn-1).stateAfter,lr=or?ct.fromSaved($t,or,Gn):new ct($t,Ke($t.mode),Gn);return $t.iter(Gn,Ct,(function(_t){pt(xt,_t.text,lr);var $t=lr.line;_t.stateAfter=$t==Ct-1||$t%5==0||$t>=Vn.viewFrom&&$t<Vn.viewTo?lr.save():null,lr.nextLine()})),_t&&($t.modeFrontier=lr.line),lr}function pt(xt,Ct,_t,$t){var Vn=xt.doc.mode,Gn=new je(Ct,xt.options.tabSize,_t);for(Gn.start=Gn.pos=$t||0,""==Ct&&gt(Vn,_t.state);!Gn.eol();)vt(Vn,Gn,_t.state),Gn.start=Gn.pos}function gt(xt,Ct){if(xt.blankLine)return xt.blankLine(Ct);if(xt.innerMode){var _t=Ve(xt,Ct);return _t.mode.blankLine?_t.mode.blankLine(_t.state):void 0}}function vt(xt,Ct,_t,$t){for(var Vn=0;Vn<10;Vn++){$t&&($t[0]=Ve(xt,_t).mode);var Gn=xt.token(Ct,_t);if(Ct.pos>Ct.start)return Gn}throw new Error("Mode "+xt.name+" failed to advance stream.")}ct.prototype.lookAhead=function(xt){var Ct=this.doc.getLine(this.line+xt);return null!=Ct&&xt>this.maxLookAhead&&(this.maxLookAhead=xt),Ct},ct.prototype.baseToken=function(xt){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=xt;)this.baseTokenPos+=2;var Ct=this.baseTokens[this.baseTokenPos+1];return{type:Ct&&Ct.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-xt}},ct.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ct.fromSaved=function(xt,Ct,_t){return Ct instanceof ut?new ct(xt,Ue(xt.mode,Ct.state),_t,Ct.lookAhead):new ct(xt,Ue(xt.mode,Ct),_t)},ct.prototype.save=function(xt){var Ct=!1!==xt?Ue(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ut(Ct,this.maxLookAhead):Ct};var mt=function(xt,Ct,_t){this.start=xt.start,this.end=xt.pos,this.string=xt.current(),this.type=Ct||null,this.state=_t};function yt(xt,Ct,_t,$t){var Vn,Gn,or=xt.doc,lr=or.mode,Fr=Xe(or,(Ct=st(or,Ct)).line),Hr=dt(xt,Ct.line,_t),xo=new je(Fr.text,xt.options.tabSize,Hr);for($t&&(Gn=[]);($t||xo.pos<Ct.ch)&&!xo.eol();)xo.start=xo.pos,Vn=vt(lr,xo,Hr.state),$t&&Gn.push(new mt(xo,Vn,Ue(or.mode,Hr.state)));return $t?Gn:new mt(xo,Vn,Hr.state)}function bt(xt,Ct){if(xt)for(;;){var _t=xt.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!_t)break;xt=xt.slice(0,_t.index)+xt.slice(_t.index+_t[0].length);var $t=_t[1]?"bgClass":"textClass";null==Ct[$t]?Ct[$t]=_t[2]:new RegExp("(?:^|\\s)"+_t[2]+"(?:$|\\s)").test(Ct[$t])||(Ct[$t]+=" "+_t[2])}return xt}function wt(xt,Ct,_t,$t,Vn,Gn,or){var lr=_t.flattenSpans;null==lr&&(lr=xt.options.flattenSpans);var Fr,Hr=0,xo=null,Eo=new je(Ct,xt.options.tabSize,$t),Mo=xt.options.addModeClass&&[null];for(""==Ct&&bt(gt(_t,$t.state),Gn);!Eo.eol();){if(Eo.pos>xt.options.maxHighlightLength?(lr=!1,or&&pt(xt,Ct,$t,Eo.pos),Eo.pos=Ct.length,Fr=null):Fr=bt(vt(_t,Eo,$t.state,Mo),Gn),Mo){var Oo=Mo[0].name;Oo&&(Fr="m-"+(Fr?Oo+" "+Fr:Oo))}if(!lr||xo!=Fr){for(;Hr<Eo.start;)Vn(Hr=Math.min(Eo.start,Hr+5e3),xo);xo=Fr}Eo.start=Eo.pos}for(;Hr<Eo.pos;){var Ro=Math.min(Eo.pos,Hr+5e3);Vn(Ro,xo),Hr=Ro}}var Cs=!1,Ss=!1;function St(xt,Ct,_t){this.marker=xt,this.from=Ct,this.to=_t}function Lt(xt,Ct){if(xt)for(var _t=0;_t<xt.length;++_t){var $t=xt[_t];if($t.marker==Ct)return $t}}function kt(xt,Ct){for(var _t,$t=0;$t<xt.length;++$t)xt[$t]!=Ct&&(_t||(_t=[])).push(xt[$t]);return _t}function Tt(xt,Ct){if(Ct.full)return null;var _t=Qe(xt,Ct.from.line)&&Xe(xt,Ct.from.line).markedSpans,$t=Qe(xt,Ct.to.line)&&Xe(xt,Ct.to.line).markedSpans;if(!_t&&!$t)return null;var Vn=Ct.from.ch,Gn=Ct.to.ch,or=0==tt(Ct.from,Ct.to),lr=function(xt,Ct,_t){var $t;if(xt)for(var Vn=0;Vn<xt.length;++Vn){var Gn=xt[Vn],or=Gn.marker;if(null==Gn.from||(or.inclusiveLeft?Gn.from<=Ct:Gn.from<Ct)||Gn.from==Ct&&"bookmark"==or.type&&(!_t||!Gn.marker.insertLeft)){var lr=null==Gn.to||(or.inclusiveRight?Gn.to>=Ct:Gn.to>Ct);($t||($t=[])).push(new St(or,Gn.from,lr?null:Gn.to))}}return $t}(_t,Vn,or),Fr=function(xt,Ct,_t){var $t;if(xt)for(var Vn=0;Vn<xt.length;++Vn){var Gn=xt[Vn],or=Gn.marker;if(null==Gn.to||(or.inclusiveRight?Gn.to>=Ct:Gn.to>Ct)||Gn.from==Ct&&"bookmark"==or.type&&(!_t||Gn.marker.insertLeft)){var lr=null==Gn.from||(or.inclusiveLeft?Gn.from<=Ct:Gn.from<Ct);($t||($t=[])).push(new St(or,lr?null:Gn.from-Ct,null==Gn.to?null:Gn.to-Ct))}}return $t}($t,Gn,or),Hr=1==Ct.text.length,xo=_(Ct.text).length+(Hr?Vn:0);if(lr)for(var Eo=0;Eo<lr.length;++Eo){var Mo=lr[Eo];if(null==Mo.to){var Oo=Lt(Fr,Mo.marker);Oo?Hr&&(Mo.to=null==Oo.to?null:Oo.to+xo):Mo.to=Vn}}if(Fr)for(var Ro=0;Ro<Fr.length;++Ro){var Io=Fr[Ro];null!=Io.to&&(Io.to+=xo),null==Io.from?Lt(lr,Io.marker)||(Io.from=xo,Hr&&(lr||(lr=[])).push(Io)):(Io.from+=xo,Hr&&(lr||(lr=[])).push(Io))}lr&&(lr=Mt(lr)),Fr&&Fr!=lr&&(Fr=Mt(Fr));var Bo=[lr];if(!Hr){var zo,Ho=Ct.text.length-2;if(Ho>0&&lr)for(var Qo=0;Qo<lr.length;++Qo)null==lr[Qo].to&&(zo||(zo=[])).push(new St(lr[Qo].marker,null,null));for(var pi=0;pi<Ho;++pi)Bo.push(zo);Bo.push(Fr)}return Bo}function Mt(xt){for(var Ct=0;Ct<xt.length;++Ct){var _t=xt[Ct];null!=_t.from&&_t.from==_t.to&&!1!==_t.marker.clearWhenEmpty&&xt.splice(Ct--,1)}return xt.length?xt:null}function Nt(xt){var Ct=xt.markedSpans;if(Ct){for(var _t=0;_t<Ct.length;++_t)Ct[_t].marker.detachLine(xt);xt.markedSpans=null}}function Ot(xt,Ct){if(Ct){for(var _t=0;_t<Ct.length;++_t)Ct[_t].marker.attachLine(xt);xt.markedSpans=Ct}}function At(xt){return xt.inclusiveLeft?-1:0}function Dt(xt){return xt.inclusiveRight?1:0}function Wt(xt,Ct){var _t=xt.lines.length-Ct.lines.length;if(0!=_t)return _t;var $t=xt.find(),Vn=Ct.find(),Gn=tt($t.from,Vn.from)||At(xt)-At(Ct);return Gn?-Gn:tt($t.to,Vn.to)||Dt(xt)-Dt(Ct)||Ct.id-xt.id}function Ht(xt,Ct){var _t,$t=Ss&&xt.markedSpans;if($t)for(var Vn=void 0,Gn=0;Gn<$t.length;++Gn)(Vn=$t[Gn]).marker.collapsed&&null==(Ct?Vn.from:Vn.to)&&(!_t||Wt(_t,Vn.marker)<0)&&(_t=Vn.marker);return _t}function Ft(xt){return Ht(xt,!0)}function Pt(xt){return Ht(xt,!1)}function Et(xt,Ct){var _t,$t=Ss&&xt.markedSpans;if($t)for(var Vn=0;Vn<$t.length;++Vn){var Gn=$t[Vn];Gn.marker.collapsed&&(null==Gn.from||Gn.from<Ct)&&(null==Gn.to||Gn.to>Ct)&&(!_t||Wt(_t,Gn.marker)<0)&&(_t=Gn.marker)}return _t}function It(xt,Ct,_t,$t,Vn){var Gn=Xe(xt,Ct),or=Ss&&Gn.markedSpans;if(or)for(var lr=0;lr<or.length;++lr){var Fr=or[lr];if(Fr.marker.collapsed){var Hr=Fr.marker.find(0),xo=tt(Hr.from,_t)||At(Fr.marker)-At(Vn),Eo=tt(Hr.to,$t)||Dt(Fr.marker)-Dt(Vn);if(!(xo>=0&&Eo<=0||xo<=0&&Eo>=0)&&(xo<=0&&(Fr.marker.inclusiveRight&&Vn.inclusiveLeft?tt(Hr.to,_t)>=0:tt(Hr.to,_t)>0)||xo>=0&&(Fr.marker.inclusiveRight&&Vn.inclusiveLeft?tt(Hr.from,$t)<=0:tt(Hr.from,$t)<0)))return!0}}}function Rt(xt){for(var Ct;Ct=Ft(xt);)xt=Ct.find(-1,!0).line;return xt}function zt(xt,Ct){var _t=Xe(xt,Ct),$t=Rt(_t);return _t==$t?Ct:qe($t)}function Bt(xt,Ct){if(Ct>xt.lastLine())return Ct;var _t,$t=Xe(xt,Ct);if(!Gt(xt,$t))return Ct;for(;_t=Pt($t);)$t=_t.find(1,!0).line;return qe($t)+1}function Gt(xt,Ct){var _t=Ss&&Ct.markedSpans;if(_t)for(var $t=void 0,Vn=0;Vn<_t.length;++Vn)if(($t=_t[Vn]).marker.collapsed){if(null==$t.from)return!0;if(!$t.marker.widgetNode&&0==$t.from&&$t.marker.inclusiveLeft&&Ut(xt,Ct,$t))return!0}}function Ut(xt,Ct,_t){if(null==_t.to){var $t=_t.marker.find(1,!0);return Ut(xt,$t.line,Lt($t.line.markedSpans,_t.marker))}if(_t.marker.inclusiveRight&&_t.to==Ct.text.length)return!0;for(var Vn=void 0,Gn=0;Gn<Ct.markedSpans.length;++Gn)if((Vn=Ct.markedSpans[Gn]).marker.collapsed&&!Vn.marker.widgetNode&&Vn.from==_t.to&&(null==Vn.to||Vn.to!=_t.from)&&(Vn.marker.inclusiveLeft||_t.marker.inclusiveRight)&&Ut(xt,Ct,Vn))return!0}function Vt(xt){for(var Ct=0,_t=(xt=Rt(xt)).parent,$t=0;$t<_t.lines.length;++$t){var Vn=_t.lines[$t];if(Vn==xt)break;Ct+=Vn.height}for(var Gn=_t.parent;Gn;Gn=(_t=Gn).parent)for(var or=0;or<Gn.children.length;++or){var lr=Gn.children[or];if(lr==_t)break;Ct+=lr.height}return Ct}function Kt(xt){if(0==xt.height)return 0;for(var Ct,_t=xt.text.length,$t=xt;Ct=Ft($t);){var Vn=Ct.find(0,!0);$t=Vn.from.line,_t+=Vn.from.ch-Vn.to.ch}for($t=xt;Ct=Pt($t);){var Gn=Ct.find(0,!0);_t-=$t.text.length-Gn.from.ch,_t+=($t=Gn.to.line).text.length-Gn.to.ch}return _t}function jt(xt){var Ct=xt.display,_t=xt.doc;Ct.maxLine=Xe(_t,_t.first),Ct.maxLineLength=Kt(Ct.maxLine),Ct.maxLineChanged=!0,_t.iter((function(xt){var _t=Kt(xt);_t>Ct.maxLineLength&&(Ct.maxLineLength=_t,Ct.maxLine=xt)}))}var Xt=function(xt,Ct,_t){this.text=xt,Ot(this,Ct),this.height=_t?_t(this):1};function Yt(xt){xt.parent=null,Nt(xt)}Xt.prototype.lineNo=function(){return qe(this)},be(Xt);var ks={},Ts={};function qt(xt,Ct){if(!xt||/^\s*$/.test(xt))return null;var _t=Ct.addModeClass?Ts:ks;return _t[xt]||(_t[xt]=xt.replace(/\S+/g,"cm-$&"))}function Zt(xt,Ct){var _t=A("span",null,null,Fr?"padding-right: .1px":null),$t={pre:A("pre",[_t],"CodeMirror-line"),content:_t,col:0,pos:0,cm:xt,trailingSpace:!1,splitSpaces:xt.getOption("lineWrapping")};Ct.measure={};for(var Vn=0;Vn<=(Ct.rest?Ct.rest.length:0);Vn++){var Gn=Vn?Ct.rest[Vn-1]:Ct.line,or=void 0;$t.pos=0,$t.addToken=Jt,Ae(xt.display.measure)&&(or=ce(Gn,xt.doc.direction))&&($t.addToken=er($t.addToken,or)),$t.map=[],rr(Gn,$t,ft(xt,Gn,Ct!=xt.display.externalMeasured&&qe(Gn))),Gn.styleClasses&&(Gn.styleClasses.bgClass&&($t.bgClass=F(Gn.styleClasses.bgClass,$t.bgClass||"")),Gn.styleClasses.textClass&&($t.textClass=F(Gn.styleClasses.textClass,$t.textClass||""))),0==$t.map.length&&$t.map.push(0,0,$t.content.appendChild(Oe(xt.display.measure))),0==Vn?(Ct.measure.map=$t.map,Ct.measure.cache={}):((Ct.measure.maps||(Ct.measure.maps=[])).push($t.map),(Ct.measure.caches||(Ct.measure.caches=[])).push({}))}if(Fr){var lr=$t.content.lastChild;(/\bcm-tab\b/.test(lr.className)||lr.querySelector&&lr.querySelector(".cm-tab"))&&($t.content.className="cm-tab-wrap-hack")}return ge(xt,"renderLine",xt,Ct.line,$t.pre),$t.pre.className&&($t.textClass=F($t.pre.className,$t.textClass||"")),$t}function Qt(xt){var Ct=O("span","â€¢","cm-invalidchar");return Ct.title="\\u"+xt.charCodeAt(0).toString(16),Ct.setAttribute("aria-label",Ct.title),Ct}function Jt(xt,Ct,_t,$t,Vn,Gn,Fr){if(Ct){var Hr,xo=xt.splitSpaces?function(xt,Ct){if(xt.length>1&&!/  /.test(xt))return xt;for(var _t=Ct,$t="",Vn=0;Vn<xt.length;Vn++){var Gn=xt.charAt(Vn);" "!=Gn||!_t||Vn!=xt.length-1&&32!=xt.charCodeAt(Vn+1)||(Gn="Â "),$t+=Gn,_t=" "==Gn}return $t}(Ct,xt.trailingSpace):Ct,Eo=xt.cm.state.specialChars,Mo=!1;if(Eo.test(Ct)){Hr=document.createDocumentFragment();for(var Oo=0;;){Eo.lastIndex=Oo;var Ro=Eo.exec(Ct),Io=Ro?Ro.index-Oo:Ct.length-Oo;if(Io){var Bo=document.createTextNode(xo.slice(Oo,Oo+Io));or&&lr<9?Hr.appendChild(O("span",[Bo])):Hr.appendChild(Bo),xt.map.push(xt.pos,xt.pos+Io,Bo),xt.col+=Io,xt.pos+=Io}if(!Ro)break;Oo+=Io+1;var zo=void 0;if("\t"==Ro[0]){var Ho=xt.cm.options.tabSize,Qo=Ho-xt.col%Ho;(zo=Hr.appendChild(O("span",$(Qo),"cm-tab"))).setAttribute("role","presentation"),zo.setAttribute("cm-text","\t"),xt.col+=Qo}else"\r"==Ro[0]||"\n"==Ro[0]?((zo=Hr.appendChild(O("span","\r"==Ro[0]?"â":"â¤","cm-invalidchar"))).setAttribute("cm-text",Ro[0]),xt.col+=1):((zo=xt.cm.options.specialCharPlaceholder(Ro[0])).setAttribute("cm-text",Ro[0]),or&&lr<9?Hr.appendChild(O("span",[zo])):Hr.appendChild(zo),xt.col+=1);xt.map.push(xt.pos,xt.pos+1,zo),xt.pos++}}else xt.col+=Ct.length,Hr=document.createTextNode(xo),xt.map.push(xt.pos,xt.pos+Ct.length,Hr),or&&lr<9&&(Mo=!0),xt.pos+=Ct.length;if(xt.trailingSpace=32==xo.charCodeAt(Ct.length-1),_t||$t||Vn||Mo||Gn||Fr){var pi=_t||"";$t&&(pi+=$t),Vn&&(pi+=Vn);var gi=O("span",[Hr],pi,Gn);if(Fr)for(var es in Fr)Fr.hasOwnProperty(es)&&"style"!=es&&"class"!=es&&gi.setAttribute(es,Fr[es]);return xt.content.appendChild(gi)}xt.content.appendChild(Hr)}}function er(xt,Ct){return function(_t,$t,Vn,Gn,or,lr,Fr){Vn=Vn?Vn+" cm-force-border":"cm-force-border";for(var Hr=_t.pos,xo=Hr+$t.length;;){for(var Eo=void 0,Mo=0;Mo<Ct.length&&!((Eo=Ct[Mo]).to>Hr&&Eo.from<=Hr);Mo++);if(Eo.to>=xo)return xt(_t,$t,Vn,Gn,or,lr,Fr);xt(_t,$t.slice(0,Eo.to-Hr),Vn,Gn,null,lr,Fr),Gn=null,$t=$t.slice(Eo.to-Hr),Hr=Eo.to}}}function tr(xt,Ct,_t,$t){var Vn=!$t&&_t.widgetNode;Vn&&xt.map.push(xt.pos,xt.pos+Ct,Vn),!$t&&xt.cm.display.input.needsContentAttribute&&(Vn||(Vn=xt.content.appendChild(document.createElement("span"))),Vn.setAttribute("cm-marker",_t.id)),Vn&&(xt.cm.display.input.setUneditable(Vn),xt.content.appendChild(Vn)),xt.pos+=Ct,xt.trailingSpace=!1}function rr(xt,Ct,_t){var $t=xt.markedSpans,Vn=xt.text,Gn=0;if($t)for(var or,lr,Fr,Hr,xo,Eo,Mo,Oo=Vn.length,Ro=0,Io=1,Bo="",zo=0;;){if(zo==Ro){Fr=Hr=xo=lr="",Mo=null,Eo=null,zo=1/0;for(var Ho=[],Qo=void 0,pi=0;pi<$t.length;++pi){var gi=$t[pi],es=gi.marker;if("bookmark"==es.type&&gi.from==Ro&&es.widgetNode)Ho.push(es);else if(gi.from<=Ro&&(null==gi.to||gi.to>Ro||es.collapsed&&gi.to==Ro&&gi.from==Ro)){if(null!=gi.to&&gi.to!=Ro&&zo>gi.to&&(zo=gi.to,Hr=""),es.className&&(Fr+=" "+es.className),es.css&&(lr=(lr?lr+";":"")+es.css),es.startStyle&&gi.from==Ro&&(xo+=" "+es.startStyle),es.endStyle&&gi.to==zo&&(Qo||(Qo=[])).push(es.endStyle,gi.to),es.title&&((Mo||(Mo={})).title=es.title),es.attributes)for(var ts in es.attributes)(Mo||(Mo={}))[ts]=es.attributes[ts];es.collapsed&&(!Eo||Wt(Eo.marker,es)<0)&&(Eo=gi)}else gi.from>Ro&&zo>gi.from&&(zo=gi.from)}if(Qo)for(var ns=0;ns<Qo.length;ns+=2)Qo[ns+1]==zo&&(Hr+=" "+Qo[ns]);if(!Eo||Eo.from==Ro)for(var rs=0;rs<Ho.length;++rs)tr(Ct,0,Ho[rs]);if(Eo&&(Eo.from||0)==Ro){if(tr(Ct,(null==Eo.to?Oo+1:Eo.to)-Ro,Eo.marker,null==Eo.from),null==Eo.to)return;Eo.to==Ro&&(Eo=!1)}}if(Ro>=Oo)break;for(var os=Math.min(Oo,zo);;){if(Bo){var is=Ro+Bo.length;if(!Eo){var ss=is>os?Bo.slice(0,os-Ro):Bo;Ct.addToken(Ct,ss,or?or+Fr:Fr,xo,Ro+ss.length==zo?Hr:"",lr,Mo)}if(is>=os){Bo=Bo.slice(os-Ro),Ro=os;break}Ro=is,xo=""}Bo=Vn.slice(Gn,Gn=_t[Io++]),or=qt(_t[Io++],Ct.cm.options)}}else for(var as=1;as<_t.length;as+=2)Ct.addToken(Ct,Vn.slice(Gn,Gn=_t[as]),qt(_t[as+1],Ct.cm.options))}function nr(xt,Ct,_t){this.line=Ct,this.rest=function(xt){for(var Ct,_t;Ct=Pt(xt);)xt=Ct.find(1,!0).line,(_t||(_t=[])).push(xt);return _t}(Ct),this.size=this.rest?qe(_(this.rest))-_t+1:1,this.node=this.text=null,this.hidden=Gt(xt,Ct)}function ir(xt,Ct,_t){for(var $t,Vn=[],Gn=Ct;Gn<_t;Gn=$t){var or=new nr(xt.doc,Xe(xt.doc,Gn),Gn);$t=Gn+or.size,Vn.push(or)}return Vn}var Ps=null,Fs=null;function sr(xt,Ct){var _t=de(xt,Ct);if(_t.length){var $t,Vn=Array.prototype.slice.call(arguments,2);Ps?$t=Ps.delayedCallbacks:Fs?$t=Fs:($t=Fs=[],setTimeout(ar,0));for(var o=function(xt){$t.push((function(){return _t[xt].apply(null,Vn)}))},Gn=0;Gn<_t.length;++Gn)o(Gn)}}function ar(){var xt=Fs;Fs=null;for(var Ct=0;Ct<xt.length;++Ct)xt[Ct]()}function ur(xt,Ct,_t,$t){for(var Vn=0;Vn<Ct.changes.length;Vn++){var Gn=Ct.changes[Vn];"text"==Gn?fr(xt,Ct):"gutter"==Gn?pr(xt,Ct,_t,$t):"class"==Gn?dr(xt,Ct):"widget"==Gn&&gr(xt,Ct,$t)}Ct.changes=null}function cr(xt){return xt.node==xt.text&&(xt.node=O("div",null,null,"position: relative"),xt.text.parentNode&&xt.text.parentNode.replaceChild(xt.node,xt.text),xt.node.appendChild(xt.text),or&&lr<8&&(xt.node.style.zIndex=2)),xt.node}function hr(xt,Ct){var _t=xt.display.externalMeasured;return _t&&_t.line==Ct.line?(xt.display.externalMeasured=null,Ct.measure=_t.measure,_t.built):Zt(xt,Ct)}function fr(xt,Ct){var _t=Ct.text.className,$t=hr(xt,Ct);Ct.text==Ct.node&&(Ct.node=$t.pre),Ct.text.parentNode.replaceChild($t.pre,Ct.text),Ct.text=$t.pre,$t.bgClass!=Ct.bgClass||$t.textClass!=Ct.textClass?(Ct.bgClass=$t.bgClass,Ct.textClass=$t.textClass,dr(xt,Ct)):_t&&(Ct.text.className=_t)}function dr(xt,Ct){!function(xt,Ct){var _t=Ct.bgClass?Ct.bgClass+" "+(Ct.line.bgClass||""):Ct.line.bgClass;if(_t&&(_t+=" CodeMirror-linebackground"),Ct.background)_t?Ct.background.className=_t:(Ct.background.parentNode.removeChild(Ct.background),Ct.background=null);else if(_t){var $t=cr(Ct);Ct.background=$t.insertBefore(O("div",null,_t),$t.firstChild),xt.display.input.setUneditable(Ct.background)}}(xt,Ct),Ct.line.wrapClass?cr(Ct).className=Ct.line.wrapClass:Ct.node!=Ct.text&&(Ct.node.className="");var _t=Ct.textClass?Ct.textClass+" "+(Ct.line.textClass||""):Ct.line.textClass;Ct.text.className=_t||""}function pr(xt,Ct,_t,$t){if(Ct.gutter&&(Ct.node.removeChild(Ct.gutter),Ct.gutter=null),Ct.gutterBackground&&(Ct.node.removeChild(Ct.gutterBackground),Ct.gutterBackground=null),Ct.line.gutterClass){var Vn=cr(Ct);Ct.gutterBackground=O("div",null,"CodeMirror-gutter-background "+Ct.line.gutterClass,"left: "+(xt.options.fixedGutter?$t.fixedPos:-$t.gutterTotalWidth)+"px; width: "+$t.gutterTotalWidth+"px"),xt.display.input.setUneditable(Ct.gutterBackground),Vn.insertBefore(Ct.gutterBackground,Ct.text)}var Gn=Ct.line.gutterMarkers;if(xt.options.lineNumbers||Gn){var or=cr(Ct),lr=Ct.gutter=O("div",null,"CodeMirror-gutter-wrapper","left: "+(xt.options.fixedGutter?$t.fixedPos:-$t.gutterTotalWidth)+"px");if(lr.setAttribute("aria-hidden","true"),xt.display.input.setUneditable(lr),or.insertBefore(lr,Ct.text),Ct.line.gutterClass&&(lr.className+=" "+Ct.line.gutterClass),!xt.options.lineNumbers||Gn&&Gn["CodeMirror-linenumbers"]||(Ct.lineNumber=lr.appendChild(O("div",Je(xt.options,_t),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+$t.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+xt.display.lineNumInnerWidth+"px"))),Gn)for(var Fr=0;Fr<xt.display.gutterSpecs.length;++Fr){var Hr=xt.display.gutterSpecs[Fr].className,xo=Gn.hasOwnProperty(Hr)&&Gn[Hr];xo&&lr.appendChild(O("div",[xo],"CodeMirror-gutter-elt","left: "+$t.gutterLeft[Hr]+"px; width: "+$t.gutterWidth[Hr]+"px"))}}}function gr(xt,Ct,_t){Ct.alignable&&(Ct.alignable=null);for(var $t=L("CodeMirror-linewidget"),Vn=Ct.node.firstChild,Gn=void 0;Vn;Vn=Gn)Gn=Vn.nextSibling,$t.test(Vn.className)&&Ct.node.removeChild(Vn);mr(xt,Ct,_t)}function vr(xt,Ct,_t,$t){var Vn=hr(xt,Ct);return Ct.text=Ct.node=Vn.pre,Vn.bgClass&&(Ct.bgClass=Vn.bgClass),Vn.textClass&&(Ct.textClass=Vn.textClass),dr(xt,Ct),pr(xt,Ct,_t,$t),mr(xt,Ct,$t),Ct.node}function mr(xt,Ct,_t){if(yr(xt,Ct.line,Ct,_t,!0),Ct.rest)for(var $t=0;$t<Ct.rest.length;$t++)yr(xt,Ct.rest[$t],Ct,_t,!1)}function yr(xt,Ct,_t,$t,Vn){if(Ct.widgets)for(var Gn=cr(_t),or=0,lr=Ct.widgets;or<lr.length;++or){var Fr=lr[or],Hr=O("div",[Fr.node],"CodeMirror-linewidget"+(Fr.className?" "+Fr.className:""));Fr.handleMouseEvents||Hr.setAttribute("cm-ignore-events","true"),br(Fr,Hr,_t,$t),xt.display.input.setUneditable(Hr),Vn&&Fr.above?Gn.insertBefore(Hr,_t.gutter||_t.text):Gn.appendChild(Hr),sr(Fr,"redraw")}}function br(xt,Ct,_t,$t){if(xt.noHScroll){(_t.alignable||(_t.alignable=[])).push(Ct);var Vn=$t.wrapperWidth;Ct.style.left=$t.fixedPos+"px",xt.coverGutter||(Vn-=$t.gutterTotalWidth,Ct.style.paddingLeft=$t.gutterTotalWidth+"px"),Ct.style.width=Vn+"px"}xt.coverGutter&&(Ct.style.zIndex=5,Ct.style.position="relative",xt.noHScroll||(Ct.style.marginLeft=-$t.gutterTotalWidth+"px"))}function wr(xt){if(null!=xt.height)return xt.height;var Ct=xt.doc.cm;if(!Ct)return 0;if(!D(document.body,xt.node)){var _t="position: relative;";xt.coverGutter&&(_t+="margin-left: -"+Ct.display.gutters.offsetWidth+"px;"),xt.noHScroll&&(_t+="width: "+Ct.display.wrapper.clientWidth+"px;"),N(Ct.display.measure,O("div",[xt.node],null,_t))}return xt.height=xt.node.parentNode.offsetHeight}function xr(xt,Ct){for(var _t=Le(Ct);_t!=xt.wrapper;_t=_t.parentNode)if(!_t||1==_t.nodeType&&"true"==_t.getAttribute("cm-ignore-events")||_t.parentNode==xt.sizer&&_t!=xt.mover)return!0}function Cr(xt){return xt.lineSpace.offsetTop}function Sr(xt){return xt.mover.offsetHeight-xt.lineSpace.offsetHeight}function Lr(xt){if(xt.cachedPaddingH)return xt.cachedPaddingH;var Ct=N(xt.measure,O("pre","x","CodeMirror-line-like")),_t=window.getComputedStyle?window.getComputedStyle(Ct):Ct.currentStyle,$t={left:parseInt(_t.paddingLeft),right:parseInt(_t.paddingRight)};return isNaN($t.left)||isNaN($t.right)||(xt.cachedPaddingH=$t),$t}function kr(xt){return rs-xt.display.nativeBarWidth}function Tr(xt){return xt.display.scroller.clientWidth-kr(xt)-xt.display.barWidth}function Mr(xt){return xt.display.scroller.clientHeight-kr(xt)-xt.display.barHeight}function Nr(xt,Ct,_t){if(xt.line==Ct)return{map:xt.measure.map,cache:xt.measure.cache};if(xt.rest){for(var $t=0;$t<xt.rest.length;$t++)if(xt.rest[$t]==Ct)return{map:xt.measure.maps[$t],cache:xt.measure.caches[$t]};for(var Vn=0;Vn<xt.rest.length;Vn++)if(qe(xt.rest[Vn])>_t)return{map:xt.measure.maps[Vn],cache:xt.measure.caches[Vn],before:!0}}}function Or(xt,Ct,_t,$t){return Wr(xt,Dr(xt,Ct),_t,$t)}function Ar(xt,Ct){if(Ct>=xt.display.viewFrom&&Ct<xt.display.viewTo)return xt.display.view[an(xt,Ct)];var _t=xt.display.externalMeasured;return _t&&Ct>=_t.lineN&&Ct<_t.lineN+_t.size?_t:void 0}function Dr(xt,Ct){var _t=qe(Ct),$t=Ar(xt,_t);$t&&!$t.text?$t=null:$t&&$t.changes&&(ur(xt,$t,_t,rn(xt)),xt.curOp.forceUpdate=!0),$t||($t=function(xt,Ct){var _t=qe(Ct=Rt(Ct)),$t=xt.display.externalMeasured=new nr(xt.doc,Ct,_t);$t.lineN=_t;var Vn=$t.built=Zt(xt,$t);return $t.text=Vn.pre,N(xt.display.lineMeasure,Vn.pre),$t}(xt,Ct));var Vn=Nr($t,Ct,_t);return{line:Ct,view:$t,rect:null,map:Vn.map,cache:Vn.cache,before:Vn.before,hasHeights:!1}}function Wr(xt,Ct,_t,$t,Vn){Ct.before&&(_t=-1);var Gn,Fr=_t+($t||"");return Ct.cache.hasOwnProperty(Fr)?Gn=Ct.cache[Fr]:(Ct.rect||(Ct.rect=Ct.view.text.getBoundingClientRect()),Ct.hasHeights||(function(xt,Ct,_t){var $t=xt.options.lineWrapping,Vn=$t&&Tr(xt);if(!Ct.measure.heights||$t&&Ct.measure.width!=Vn){var Gn=Ct.measure.heights=[];if($t){Ct.measure.width=Vn;for(var or=Ct.text.firstChild.getClientRects(),lr=0;lr<or.length-1;lr++){var Fr=or[lr],Hr=or[lr+1];Math.abs(Fr.bottom-Hr.bottom)>2&&Gn.push((Fr.bottom+Hr.top)/2-_t.top)}}Gn.push(_t.bottom-_t.top)}}(xt,Ct.view,Ct.rect),Ct.hasHeights=!0),(Gn=function(xt,Ct,_t,$t){var Vn,Gn=Pr(Ct.map,_t,$t),Fr=Gn.node,Hr=Gn.start,xo=Gn.end,Eo=Gn.collapse;if(3==Fr.nodeType){for(var Mo=0;Mo<4;Mo++){for(;Hr&&ie(Ct.line.text.charAt(Gn.coverStart+Hr));)--Hr;for(;Gn.coverStart+xo<Gn.coverEnd&&ie(Ct.line.text.charAt(Gn.coverStart+xo));)++xo;if((Vn=or&&lr<9&&0==Hr&&xo==Gn.coverEnd-Gn.coverStart?Fr.parentNode.getBoundingClientRect():Er(ns(Fr,Hr,xo).getClientRects(),$t)).left||Vn.right||0==Hr)break;xo=Hr,Hr-=1,Eo="right"}or&&lr<11&&(Vn=function(xt,Ct){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(xt){if(null!=ws)return ws;var Ct=N(xt,O("span","x")),_t=Ct.getBoundingClientRect(),$t=ns(Ct,0,1).getBoundingClientRect();return ws=Math.abs(_t.left-$t.left)>1}(xt))return Ct;var _t=screen.logicalXDPI/screen.deviceXDPI,$t=screen.logicalYDPI/screen.deviceYDPI;return{left:Ct.left*_t,right:Ct.right*_t,top:Ct.top*$t,bottom:Ct.bottom*$t}}(xt.display.measure,Vn))}else{var Oo;Hr>0&&(Eo=$t="right"),Vn=xt.options.lineWrapping&&(Oo=Fr.getClientRects()).length>1?Oo["right"==$t?Oo.length-1:0]:Fr.getBoundingClientRect()}if(or&&lr<9&&!Hr&&(!Vn||!Vn.left&&!Vn.right)){var Ro=Fr.parentNode.getClientRects()[0];Vn=Ro?{left:Ro.left,right:Ro.left+tn(xt.display),top:Ro.top,bottom:Ro.bottom}:Os}for(var Io=Vn.top-Ct.rect.top,Bo=Vn.bottom-Ct.rect.top,zo=(Io+Bo)/2,Ho=Ct.view.measure.heights,Qo=0;Qo<Ho.length-1&&!(zo<Ho[Qo]);Qo++);var pi=Qo?Ho[Qo-1]:0,gi=Ho[Qo],es={left:("right"==Eo?Vn.right:Vn.left)-Ct.rect.left,right:("left"==Eo?Vn.left:Vn.right)-Ct.rect.left,top:pi,bottom:gi};return Vn.left||Vn.right||(es.bogus=!0),xt.options.singleCursorHeightPerLine||(es.rtop=Io,es.rbottom=Bo),es}(xt,Ct,_t,$t)).bogus||(Ct.cache[Fr]=Gn)),{left:Gn.left,right:Gn.right,top:Vn?Gn.rtop:Gn.top,bottom:Vn?Gn.rbottom:Gn.bottom}}var Ms,Os={left:0,right:0,top:0,bottom:0};function Pr(xt,Ct,_t){for(var $t,Vn,Gn,or,lr,Fr,Hr=0;Hr<xt.length;Hr+=3)if(lr=xt[Hr],Fr=xt[Hr+1],Ct<lr?(Vn=0,Gn=1,or="left"):Ct<Fr?Gn=1+(Vn=Ct-lr):(Hr==xt.length-3||Ct==Fr&&xt[Hr+3]>Ct)&&(Vn=(Gn=Fr-lr)-1,Ct>=Fr&&(or="right")),null!=Vn){if($t=xt[Hr+2],lr==Fr&&_t==($t.insertLeft?"left":"right")&&(or=_t),"left"==_t&&0==Vn)for(;Hr&&xt[Hr-2]==xt[Hr-3]&&xt[Hr-1].insertLeft;)$t=xt[2+(Hr-=3)],or="left";if("right"==_t&&Vn==Fr-lr)for(;Hr<xt.length-3&&xt[Hr+3]==xt[Hr+4]&&!xt[Hr+5].insertLeft;)$t=xt[(Hr+=3)+2],or="right";break}return{node:$t,start:Vn,end:Gn,collapse:or,coverStart:lr,coverEnd:Fr}}function Er(xt,Ct){var _t=Os;if("left"==Ct)for(var $t=0;$t<xt.length&&(_t=xt[$t]).left==_t.right;$t++);else for(var Vn=xt.length-1;Vn>=0&&(_t=xt[Vn]).left==_t.right;Vn--);return _t}function Ir(xt){if(xt.measure&&(xt.measure.cache={},xt.measure.heights=null,xt.rest))for(var Ct=0;Ct<xt.rest.length;Ct++)xt.measure.caches[Ct]={}}function Rr(xt){xt.display.externalMeasure=null,M(xt.display.lineMeasure);for(var Ct=0;Ct<xt.display.view.length;Ct++)Ir(xt.display.view[Ct])}function zr(xt){Rr(xt),xt.display.cachedCharWidth=xt.display.cachedTextHeight=xt.display.cachedPaddingH=null,xt.options.lineWrapping||(xt.display.maxLineChanged=!0),xt.display.lineNumChars=null}function Br(){return xo&&Bo?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Gr(){return xo&&Bo?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ur(xt){var Ct=Rt(xt).widgets,_t=0;if(Ct)for(var $t=0;$t<Ct.length;++$t)Ct[$t].above&&(_t+=wr(Ct[$t]));return _t}function Vr(xt,Ct,_t,$t,Vn){if(!Vn){var Gn=Ur(Ct);_t.top+=Gn,_t.bottom+=Gn}if("line"==$t)return _t;$t||($t="local");var or=Vt(Ct);if("local"==$t?or+=Cr(xt.display):or-=xt.display.viewOffset,"page"==$t||"window"==$t){var lr=xt.display.lineSpace.getBoundingClientRect();or+=lr.top+("window"==$t?0:Gr());var Fr=lr.left+("window"==$t?0:Br());_t.left+=Fr,_t.right+=Fr}return _t.top+=or,_t.bottom+=or,_t}function Kr(xt,Ct,_t){if("div"==_t)return Ct;var $t=Ct.left,Vn=Ct.top;if("page"==_t)$t-=Br(),Vn-=Gr();else if("local"==_t||!_t){var Gn=xt.display.sizer.getBoundingClientRect();$t+=Gn.left,Vn+=Gn.top}var or=xt.display.lineSpace.getBoundingClientRect();return{left:$t-or.left,top:Vn-or.top}}function jr(xt,Ct,_t,$t,Vn){return $t||($t=Xe(xt.doc,Ct.line)),Vr(xt,$t,Or(xt,$t,Ct.ch,Vn),_t)}function Xr(xt,Ct,_t,$t,Vn,Gn){function l(Ct,or){var lr=Wr(xt,Vn,Ct,or?"right":"left",Gn);return or?lr.left=lr.right:lr.right=lr.left,Vr(xt,$t,lr,_t)}$t=$t||Xe(xt.doc,Ct.line),Vn||(Vn=Dr(xt,$t));var or=ce($t,xt.doc.direction),lr=Ct.ch,Fr=Ct.sticky;if(lr>=$t.text.length?(lr=$t.text.length,Fr="before"):lr<=0&&(lr=0,Fr="after"),!or)return l("before"==Fr?lr-1:lr,"before"==Fr);function c(xt,Ct,_t){return l(_t?xt-1:xt,1==or[Ct].level!=_t)}var Hr=ae(or,lr,Fr),xo=fs,Eo=c(lr,Hr,"before"==Fr);return null!=xo&&(Eo.other=c(lr,xo,"before"!=Fr)),Eo}function Yr(xt,Ct){var _t=0;Ct=st(xt.doc,Ct),xt.options.lineWrapping||(_t=tn(xt.display)*Ct.ch);var $t=Xe(xt.doc,Ct.line),Vn=Vt($t)+Cr(xt.display);return{left:_t,right:_t,top:Vn,bottom:Vn+$t.height}}function $r(xt,Ct,_t,$t,Vn){var Gn=et(xt,Ct,_t);return Gn.xRel=Vn,$t&&(Gn.outside=$t),Gn}function _r(xt,Ct,_t){var $t=xt.doc;if((_t+=xt.display.viewOffset)<0)return $r($t.first,0,null,-1,-1);var Vn=Ze($t,_t),Gn=$t.first+$t.size-1;if(Vn>Gn)return $r($t.first+$t.size-1,Xe($t,Gn).text.length,null,1,1);Ct<0&&(Ct=0);for(var or=Xe($t,Vn);;){var lr=Jr(xt,or,Vn,Ct,_t),Fr=Et(or,lr.ch+(lr.xRel>0||lr.outside>0?1:0));if(!Fr)return lr;var Hr=Fr.find(1);if(Hr.line==Vn)return Hr;or=Xe($t,Vn=Hr.line)}}function qr(xt,Ct,_t,$t){$t-=Ur(Ct);var Vn=Ct.text.length,Gn=le((function(Ct){return Wr(xt,_t,Ct-1).bottom<=$t}),Vn,0);return{begin:Gn,end:Vn=le((function(Ct){return Wr(xt,_t,Ct).top>$t}),Gn,Vn)}}function Zr(xt,Ct,_t,$t){return _t||(_t=Dr(xt,Ct)),qr(xt,Ct,_t,Vr(xt,Ct,Wr(xt,_t,$t),"line").top)}function Qr(xt,Ct,_t,$t){return!(xt.bottom<=_t)&&(xt.top>_t||($t?xt.left:xt.right)>Ct)}function Jr(xt,Ct,_t,$t,Vn){Vn-=Vt(Ct);var Gn=Dr(xt,Ct),or=Ur(Ct),lr=0,Fr=Ct.text.length,Hr=!0,xo=ce(Ct,xt.doc.direction);if(xo){var Eo=(xt.options.lineWrapping?function(xt,Ct,_t,$t,Vn,Gn,or){var lr=qr(xt,Ct,$t,or),Fr=lr.begin,Hr=lr.end;/\s/.test(Ct.text.charAt(Hr-1))&&Hr--;for(var xo=null,Eo=null,Mo=0;Mo<Vn.length;Mo++){var Oo=Vn[Mo];if(!(Oo.from>=Hr||Oo.to<=Fr)){var Ro=Wr(xt,$t,1!=Oo.level?Math.min(Hr,Oo.to)-1:Math.max(Fr,Oo.from)).right,Io=Ro<Gn?Gn-Ro+1e9:Ro-Gn;(!xo||Eo>Io)&&(xo=Oo,Eo=Io)}}return xo||(xo=Vn[Vn.length-1]),xo.from<Fr&&(xo={from:Fr,to:xo.to,level:xo.level}),xo.to>Hr&&(xo={from:xo.from,to:Hr,level:xo.level}),xo}:function(xt,Ct,_t,$t,Vn,Gn,or){var lr=le((function(lr){var Fr=Vn[lr],Hr=1!=Fr.level;return Qr(Xr(xt,et(_t,Hr?Fr.to:Fr.from,Hr?"before":"after"),"line",Ct,$t),Gn,or,!0)}),0,Vn.length-1),Fr=Vn[lr];if(lr>0){var Hr=1!=Fr.level,xo=Xr(xt,et(_t,Hr?Fr.from:Fr.to,Hr?"after":"before"),"line",Ct,$t);Qr(xo,Gn,or,!0)&&xo.top>or&&(Fr=Vn[lr-1])}return Fr})(xt,Ct,_t,Gn,xo,$t,Vn);lr=(Hr=1!=Eo.level)?Eo.from:Eo.to-1,Fr=Hr?Eo.to:Eo.from-1}var Mo,Oo,Ro=null,Io=null,Bo=le((function(Ct){var _t=Wr(xt,Gn,Ct);return _t.top+=or,_t.bottom+=or,!!Qr(_t,$t,Vn,!1)&&(_t.top<=Vn&&_t.left<=$t&&(Ro=Ct,Io=_t),!0)}),lr,Fr),zo=!1;if(Io){var Ho=$t-Io.left<Io.right-$t,Qo=Ho==Hr;Bo=Ro+(Qo?0:1),Oo=Qo?"after":"before",Mo=Ho?Io.left:Io.right}else{Hr||Bo!=Fr&&Bo!=lr||Bo++,Oo=0==Bo?"after":Bo==Ct.text.length?"before":Wr(xt,Gn,Bo-(Hr?1:0)).bottom+or<=Vn==Hr?"after":"before";var pi=Xr(xt,et(_t,Bo,Oo),"line",Ct,Gn);Mo=pi.left,zo=Vn<pi.top?-1:Vn>=pi.bottom?1:0}return $r(_t,Bo=oe(Ct.text,Bo,1),Oo,zo,$t-Mo)}function en(xt){if(null!=xt.cachedTextHeight)return xt.cachedTextHeight;if(null==Ms){Ms=O("pre",null,"CodeMirror-line-like");for(var Ct=0;Ct<49;++Ct)Ms.appendChild(document.createTextNode("x")),Ms.appendChild(O("br"));Ms.appendChild(document.createTextNode("x"))}N(xt.measure,Ms);var _t=Ms.offsetHeight/50;return _t>3&&(xt.cachedTextHeight=_t),M(xt.measure),_t||1}function tn(xt){if(null!=xt.cachedCharWidth)return xt.cachedCharWidth;var Ct=O("span","xxxxxxxxxx"),_t=O("pre",[Ct],"CodeMirror-line-like");N(xt.measure,_t);var $t=Ct.getBoundingClientRect(),Vn=($t.right-$t.left)/10;return Vn>2&&(xt.cachedCharWidth=Vn),Vn||10}function rn(xt){for(var Ct=xt.display,_t={},$t={},Vn=Ct.gutters.clientLeft,Gn=Ct.gutters.firstChild,or=0;Gn;Gn=Gn.nextSibling,++or){var lr=xt.display.gutterSpecs[or].className;_t[lr]=Gn.offsetLeft+Gn.clientLeft+Vn,$t[lr]=Gn.clientWidth}return{fixedPos:nn(Ct),gutterTotalWidth:Ct.gutters.offsetWidth,gutterLeft:_t,gutterWidth:$t,wrapperWidth:Ct.wrapper.clientWidth}}function nn(xt){return xt.scroller.getBoundingClientRect().left-xt.sizer.getBoundingClientRect().left}function on(xt){var Ct=en(xt.display),_t=xt.options.lineWrapping,$t=_t&&Math.max(5,xt.display.scroller.clientWidth/tn(xt.display)-3);return function(Vn){if(Gt(xt.doc,Vn))return 0;var Gn=0;if(Vn.widgets)for(var or=0;or<Vn.widgets.length;or++)Vn.widgets[or].height&&(Gn+=Vn.widgets[or].height);return _t?Gn+(Math.ceil(Vn.text.length/$t)||1)*Ct:Gn+Ct}}function ln(xt){var Ct=xt.doc,_t=on(xt);Ct.iter((function(xt){var Ct=_t(xt);Ct!=xt.height&&_e(xt,Ct)}))}function sn(xt,Ct,_t,$t){var Vn=xt.display;if(!_t&&"true"==Le(Ct).getAttribute("cm-not-content"))return null;var Gn,or,lr=Vn.lineSpace.getBoundingClientRect();try{Gn=Ct.clientX-lr.left,or=Ct.clientY-lr.top}catch(xt){return null}var Fr,Hr=_r(xt,Gn,or);if($t&&Hr.xRel>0&&(Fr=Xe(xt.doc,Hr.line).text).length==Hr.ch){var xo=R(Fr,Fr.length,xt.options.tabSize)-Fr.length;Hr=et(Hr.line,Math.max(0,Math.round((Gn-Lr(xt.display).left)/tn(xt.display))-xo))}return Hr}function an(xt,Ct){if(Ct>=xt.display.viewTo)return null;if((Ct-=xt.display.viewFrom)<0)return null;for(var _t=xt.display.view,$t=0;$t<_t.length;$t++)if((Ct-=_t[$t].size)<0)return $t}function un(xt,Ct,_t,$t){null==Ct&&(Ct=xt.doc.first),null==_t&&(_t=xt.doc.first+xt.doc.size),$t||($t=0);var Vn=xt.display;if($t&&_t<Vn.viewTo&&(null==Vn.updateLineNumbers||Vn.updateLineNumbers>Ct)&&(Vn.updateLineNumbers=Ct),xt.curOp.viewChanged=!0,Ct>=Vn.viewTo)Ss&&zt(xt.doc,Ct)<Vn.viewTo&&hn(xt);else if(_t<=Vn.viewFrom)Ss&&Bt(xt.doc,_t+$t)>Vn.viewFrom?hn(xt):(Vn.viewFrom+=$t,Vn.viewTo+=$t);else if(Ct<=Vn.viewFrom&&_t>=Vn.viewTo)hn(xt);else if(Ct<=Vn.viewFrom){var Gn=fn(xt,_t,_t+$t,1);Gn?(Vn.view=Vn.view.slice(Gn.index),Vn.viewFrom=Gn.lineN,Vn.viewTo+=$t):hn(xt)}else if(_t>=Vn.viewTo){var or=fn(xt,Ct,Ct,-1);or?(Vn.view=Vn.view.slice(0,or.index),Vn.viewTo=or.lineN):hn(xt)}else{var lr=fn(xt,Ct,Ct,-1),Fr=fn(xt,_t,_t+$t,1);lr&&Fr?(Vn.view=Vn.view.slice(0,lr.index).concat(ir(xt,lr.lineN,Fr.lineN)).concat(Vn.view.slice(Fr.index)),Vn.viewTo+=$t):hn(xt)}var Hr=Vn.externalMeasured;Hr&&(_t<Hr.lineN?Hr.lineN+=$t:Ct<Hr.lineN+Hr.size&&(Vn.externalMeasured=null))}function cn(xt,Ct,_t){xt.curOp.viewChanged=!0;var $t=xt.display,Vn=xt.display.externalMeasured;if(Vn&&Ct>=Vn.lineN&&Ct<Vn.lineN+Vn.size&&($t.externalMeasured=null),!(Ct<$t.viewFrom||Ct>=$t.viewTo)){var Gn=$t.view[an(xt,Ct)];if(null!=Gn.node){var or=Gn.changes||(Gn.changes=[]);-1==B(or,_t)&&or.push(_t)}}}function hn(xt){xt.display.viewFrom=xt.display.viewTo=xt.doc.first,xt.display.view=[],xt.display.viewOffset=0}function fn(xt,Ct,_t,$t){var Vn,Gn=an(xt,Ct),or=xt.display.view;if(!Ss||_t==xt.doc.first+xt.doc.size)return{index:Gn,lineN:_t};for(var lr=xt.display.viewFrom,Fr=0;Fr<Gn;Fr++)lr+=or[Fr].size;if(lr!=Ct){if($t>0){if(Gn==or.length-1)return null;Vn=lr+or[Gn].size-Ct,Gn++}else Vn=lr-Ct;Ct+=Vn,_t+=Vn}for(;zt(xt.doc,_t)!=_t;){if(Gn==($t<0?0:or.length-1))return null;_t+=$t*or[Gn-($t<0?1:0)].size,Gn+=$t}return{index:Gn,lineN:_t}}function dn(xt){for(var Ct=xt.display.view,_t=0,$t=0;$t<Ct.length;$t++){var Vn=Ct[$t];Vn.hidden||Vn.node&&!Vn.changes||++_t}return _t}function pn(xt){xt.display.input.showSelection(xt.display.input.prepareSelection())}function gn(xt,Ct){void 0===Ct&&(Ct=!0);var _t=xt.doc,$t={},Vn=$t.cursors=document.createDocumentFragment(),Gn=$t.selection=document.createDocumentFragment(),or=xt.options.$customCursor;or&&(Ct=!0);for(var lr=0;lr<_t.sel.ranges.length;lr++)if(Ct||lr!=_t.sel.primIndex){var Fr=_t.sel.ranges[lr];if(!(Fr.from().line>=xt.display.viewTo||Fr.to().line<xt.display.viewFrom)){var Hr=Fr.empty();if(or){var xo=or(xt,Fr);xo&&vn(xt,xo,Vn)}else(Hr||xt.options.showCursorWhenSelecting)&&vn(xt,Fr.head,Vn);Hr||yn(xt,Fr,Gn)}}return $t}function vn(xt,Ct,_t){var $t=Xr(xt,Ct,"div",null,null,!xt.options.singleCursorHeightPerLine),Vn=_t.appendChild(O("div","Â ","CodeMirror-cursor"));if(Vn.style.left=$t.left+"px",Vn.style.top=$t.top+"px",Vn.style.height=Math.max(0,$t.bottom-$t.top)*xt.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(xt.getWrapperElement().className)){var Gn=jr(xt,Ct,"div",null,null),or=Gn.right-Gn.left;Vn.style.width=(or>0?or:xt.defaultCharWidth())+"px"}if($t.other){var lr=_t.appendChild(O("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));lr.style.display="",lr.style.left=$t.other.left+"px",lr.style.top=$t.other.top+"px",lr.style.height=.85*($t.other.bottom-$t.other.top)+"px"}}function mn(xt,Ct){return xt.top-Ct.top||xt.left-Ct.left}function yn(xt,Ct,_t){var $t=xt.display,Vn=xt.doc,Gn=document.createDocumentFragment(),or=Lr(xt.display),lr=or.left,Fr=Math.max($t.sizerWidth,Tr(xt)-$t.sizer.offsetLeft)-or.right,Hr="ltr"==Vn.direction;function c(xt,Ct,_t,$t){Ct<0&&(Ct=0),Ct=Math.round(Ct),$t=Math.round($t),Gn.appendChild(O("div",null,"CodeMirror-selected","position: absolute; left: "+xt+"px;\n                             top: "+Ct+"px; width: "+(null==_t?Fr-xt:_t)+"px;\n                             height: "+($t-Ct)+"px"))}function h(Ct,_t,$t){var Gn,or,xo=Xe(Vn,Ct),Eo=xo.text.length;function d(_t,$t){return jr(xt,et(Ct,_t),"div",xo,$t)}function p(Ct,_t,$t){var Vn=Zr(xt,xo,null,Ct),Gn="ltr"==_t==("after"==$t)?"left":"right";return d("after"==$t?Vn.begin:Vn.end-(/\s/.test(xo.text.charAt(Vn.end-1))?2:1),Gn)[Gn]}var Mo=ce(xo,Vn.direction);return function(xt,Ct,_t,$t){if(!xt)return $t(Ct,_t,"ltr",0);for(var Vn=!1,Gn=0;Gn<xt.length;++Gn){var or=xt[Gn];(or.from<_t&&or.to>Ct||Ct==_t&&or.to==Ct)&&($t(Math.max(or.from,Ct),Math.min(or.to,_t),1==or.level?"rtl":"ltr",Gn),Vn=!0)}Vn||$t(Ct,_t,"ltr")}(Mo,_t||0,null==$t?Eo:$t,(function(xt,Ct,Vn,xo){var Oo="ltr"==Vn,Ro=d(xt,Oo?"left":"right"),Io=d(Ct-1,Oo?"right":"left"),Bo=null==_t&&0==xt,zo=null==$t&&Ct==Eo,Ho=0==xo,Qo=!Mo||xo==Mo.length-1;if(Io.top-Ro.top<=3){var pi=(Hr?zo:Bo)&&Qo,gi=(Hr?Bo:zo)&&Ho?lr:(Oo?Ro:Io).left,es=pi?Fr:(Oo?Io:Ro).right;c(gi,Ro.top,es-gi,Ro.bottom)}else{var ts,ns,rs,os;Oo?(ts=Hr&&Bo&&Ho?lr:Ro.left,ns=Hr?Fr:p(xt,Vn,"before"),rs=Hr?lr:p(Ct,Vn,"after"),os=Hr&&zo&&Qo?Fr:Io.right):(ts=Hr?p(xt,Vn,"before"):lr,ns=!Hr&&Bo&&Ho?Fr:Ro.right,rs=!Hr&&zo&&Qo?lr:Io.left,os=Hr?p(Ct,Vn,"after"):Fr),c(ts,Ro.top,ns-ts,Ro.bottom),Ro.bottom<Io.top&&c(lr,Ro.bottom,null,Io.top),c(rs,Io.top,os-rs,Io.bottom)}(!Gn||mn(Ro,Gn)<0)&&(Gn=Ro),mn(Io,Gn)<0&&(Gn=Io),(!or||mn(Ro,or)<0)&&(or=Ro),mn(Io,or)<0&&(or=Io)})),{start:Gn,end:or}}var xo=Ct.from(),Eo=Ct.to();if(xo.line==Eo.line)h(xo.line,xo.ch,Eo.ch);else{var Mo=Xe(Vn,xo.line),Oo=Xe(Vn,Eo.line),Ro=Rt(Mo)==Rt(Oo),Io=h(xo.line,xo.ch,Ro?Mo.text.length+1:null).end,Bo=h(Eo.line,Ro?0:null,Eo.ch).start;Ro&&(Io.top<Bo.top-2?(c(Io.right,Io.top,null,Io.bottom),c(lr,Bo.top,Bo.left,Bo.bottom)):c(Io.right,Io.top,Bo.left-Io.right,Io.bottom)),Io.bottom<Bo.top&&c(lr,Io.bottom,null,Bo.top)}_t.appendChild(Gn)}function bn(xt){if(xt.state.focused){var Ct=xt.display;clearInterval(Ct.blinker);var _t=!0;Ct.cursorDiv.style.visibility="",xt.options.cursorBlinkRate>0?Ct.blinker=setInterval((function(){xt.hasFocus()||Sn(xt),Ct.cursorDiv.style.visibility=(_t=!_t)?"":"hidden"}),xt.options.cursorBlinkRate):xt.options.cursorBlinkRate<0&&(Ct.cursorDiv.style.visibility="hidden")}}function wn(xt){xt.hasFocus()||(xt.display.input.focus(),xt.state.focused||Cn(xt))}function xn(xt){xt.state.delayingBlurEvent=!0,setTimeout((function(){xt.state.delayingBlurEvent&&(xt.state.delayingBlurEvent=!1,xt.state.focused&&Sn(xt))}),100)}function Cn(xt,Ct){xt.state.delayingBlurEvent&&!xt.state.draggingText&&(xt.state.delayingBlurEvent=!1),"nocursor"!=xt.options.readOnly&&(xt.state.focused||(ge(xt,"focus",xt,Ct),xt.state.focused=!0,H(xt.display.wrapper,"CodeMirror-focused"),xt.curOp||xt.display.selForContextMenu==xt.doc.sel||(xt.display.input.reset(),Fr&&setTimeout((function(){return xt.display.input.reset(!0)}),20)),xt.display.input.receivedFocus()),bn(xt))}function Sn(xt,Ct){xt.state.delayingBlurEvent||(xt.state.focused&&(ge(xt,"blur",xt,Ct),xt.state.focused=!1,T(xt.display.wrapper,"CodeMirror-focused")),clearInterval(xt.display.blinker),setTimeout((function(){xt.state.focused||(xt.display.shift=!1)}),150))}function Ln(xt){for(var Ct=xt.display,_t=Ct.lineDiv.offsetTop,$t=Math.max(0,Ct.scroller.getBoundingClientRect().top),Vn=Ct.lineDiv.getBoundingClientRect().top,Gn=0,Fr=0;Fr<Ct.view.length;Fr++){var Hr=Ct.view[Fr],xo=xt.options.lineWrapping,Eo=void 0,Mo=0;if(!Hr.hidden){if(Vn+=Hr.line.height,or&&lr<8){var Oo=Hr.node.offsetTop+Hr.node.offsetHeight;Eo=Oo-_t,_t=Oo}else{var Ro=Hr.node.getBoundingClientRect();Eo=Ro.bottom-Ro.top,!xo&&Hr.text.firstChild&&(Mo=Hr.text.firstChild.getBoundingClientRect().right-Ro.left-1)}var Io=Hr.line.height-Eo;if((Io>.005||Io<-.005)&&(Vn<$t&&(Gn-=Io),_e(Hr.line,Eo),kn(Hr.line),Hr.rest))for(var Bo=0;Bo<Hr.rest.length;Bo++)kn(Hr.rest[Bo]);if(Mo>xt.display.sizerWidth){var zo=Math.ceil(Mo/tn(xt.display));zo>xt.display.maxLineLength&&(xt.display.maxLineLength=zo,xt.display.maxLine=Hr.line,xt.display.maxLineChanged=!0)}}}Math.abs(Gn)>2&&(Ct.scroller.scrollTop+=Gn)}function kn(xt){if(xt.widgets)for(var Ct=0;Ct<xt.widgets.length;++Ct){var _t=xt.widgets[Ct],$t=_t.node.parentNode;$t&&(_t.height=$t.offsetHeight)}}function Tn(xt,Ct,_t){var $t=_t&&null!=_t.top?Math.max(0,_t.top):xt.scroller.scrollTop;$t=Math.floor($t-Cr(xt));var Vn=_t&&null!=_t.bottom?_t.bottom:$t+xt.wrapper.clientHeight,Gn=Ze(Ct,$t),or=Ze(Ct,Vn);if(_t&&_t.ensure){var lr=_t.ensure.from.line,Fr=_t.ensure.to.line;lr<Gn?(Gn=lr,or=Ze(Ct,Vt(Xe(Ct,lr))+xt.wrapper.clientHeight)):Math.min(Fr,Ct.lastLine())>=or&&(Gn=Ze(Ct,Vt(Xe(Ct,Fr))-xt.wrapper.clientHeight),or=Fr)}return{from:Gn,to:Math.max(or,Gn+1)}}function Mn(xt,Ct){var _t=xt.display,$t=en(xt.display);Ct.top<0&&(Ct.top=0);var Vn=xt.curOp&&null!=xt.curOp.scrollTop?xt.curOp.scrollTop:_t.scroller.scrollTop,Gn=Mr(xt),or={};Ct.bottom-Ct.top>Gn&&(Ct.bottom=Ct.top+Gn);var lr=xt.doc.height+Sr(_t),Fr=Ct.top<$t,Hr=Ct.bottom>lr-$t;if(Ct.top<Vn)or.scrollTop=Fr?0:Ct.top;else if(Ct.bottom>Vn+Gn){var xo=Math.min(Ct.top,(Hr?lr:Ct.bottom)-Gn);xo!=Vn&&(or.scrollTop=xo)}var Eo=xt.options.fixedGutter?0:_t.gutters.offsetWidth,Mo=xt.curOp&&null!=xt.curOp.scrollLeft?xt.curOp.scrollLeft:_t.scroller.scrollLeft-Eo,Oo=Tr(xt)-_t.gutters.offsetWidth,Ro=Ct.right-Ct.left>Oo;return Ro&&(Ct.right=Ct.left+Oo),Ct.left<10?or.scrollLeft=0:Ct.left<Mo?or.scrollLeft=Math.max(0,Ct.left+Eo-(Ro?0:10)):Ct.right>Oo+Mo-3&&(or.scrollLeft=Ct.right+(Ro?0:10)-Oo),or}function Nn(xt,Ct){null!=Ct&&(Dn(xt),xt.curOp.scrollTop=(null==xt.curOp.scrollTop?xt.doc.scrollTop:xt.curOp.scrollTop)+Ct)}function On(xt){Dn(xt);var Ct=xt.getCursor();xt.curOp.scrollToPos={from:Ct,to:Ct,margin:xt.options.cursorScrollMargin}}function An(xt,Ct,_t){null==Ct&&null==_t||Dn(xt),null!=Ct&&(xt.curOp.scrollLeft=Ct),null!=_t&&(xt.curOp.scrollTop=_t)}function Dn(xt){var Ct=xt.curOp.scrollToPos;Ct&&(xt.curOp.scrollToPos=null,Wn(xt,Yr(xt,Ct.from),Yr(xt,Ct.to),Ct.margin))}function Wn(xt,Ct,_t,$t){var Vn=Mn(xt,{left:Math.min(Ct.left,_t.left),top:Math.min(Ct.top,_t.top)-$t,right:Math.max(Ct.right,_t.right),bottom:Math.max(Ct.bottom,_t.bottom)+$t});An(xt,Vn.scrollLeft,Vn.scrollTop)}function Hn(xt,Ct){Math.abs(xt.doc.scrollTop-Ct)<2||(_t||oi(xt,{top:Ct}),Fn(xt,Ct,!0),_t&&oi(xt),ei(xt,100))}function Fn(xt,Ct,_t){Ct=Math.max(0,Math.min(xt.display.scroller.scrollHeight-xt.display.scroller.clientHeight,Ct)),(xt.display.scroller.scrollTop!=Ct||_t)&&(xt.doc.scrollTop=Ct,xt.display.scrollbars.setScrollTop(Ct),xt.display.scroller.scrollTop!=Ct&&(xt.display.scroller.scrollTop=Ct))}function Pn(xt,Ct,_t,$t){Ct=Math.max(0,Math.min(Ct,xt.display.scroller.scrollWidth-xt.display.scroller.clientWidth)),(_t?Ct==xt.doc.scrollLeft:Math.abs(xt.doc.scrollLeft-Ct)<2)&&!$t||(xt.doc.scrollLeft=Ct,ai(xt),xt.display.scroller.scrollLeft!=Ct&&(xt.display.scroller.scrollLeft=Ct),xt.display.scrollbars.setScrollLeft(Ct))}function En(xt){var Ct=xt.display,_t=Ct.gutters.offsetWidth,$t=Math.round(xt.doc.height+Sr(xt.display));return{clientHeight:Ct.scroller.clientHeight,viewHeight:Ct.wrapper.clientHeight,scrollWidth:Ct.scroller.scrollWidth,clientWidth:Ct.scroller.clientWidth,viewWidth:Ct.wrapper.clientWidth,barLeft:xt.options.fixedGutter?_t:0,docHeight:$t,scrollHeight:$t+kr(xt)+Ct.barHeight,nativeBarWidth:Ct.nativeBarWidth,gutterWidth:_t}}var In=function(xt,Ct,_t){this.cm=_t;var $t=this.vert=O("div",[O("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),Vn=this.horiz=O("div",[O("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");$t.tabIndex=Vn.tabIndex=-1,xt($t),xt(Vn),fe($t,"scroll",(function(){$t.clientHeight&&Ct($t.scrollTop,"vertical")})),fe(Vn,"scroll",(function(){Vn.clientWidth&&Ct(Vn.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,or&&lr<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};In.prototype.update=function(xt){var Ct=xt.scrollWidth>xt.clientWidth+1,_t=xt.scrollHeight>xt.clientHeight+1,$t=xt.nativeBarWidth;if(_t){this.vert.style.display="block",this.vert.style.bottom=Ct?$t+"px":"0";var Vn=xt.viewHeight-(Ct?$t:0);this.vert.firstChild.style.height=Math.max(0,xt.scrollHeight-xt.clientHeight+Vn)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(Ct){this.horiz.style.display="block",this.horiz.style.right=_t?$t+"px":"0",this.horiz.style.left=xt.barLeft+"px";var Gn=xt.viewWidth-xt.barLeft-(_t?$t:0);this.horiz.firstChild.style.width=Math.max(0,xt.scrollWidth-xt.clientWidth+Gn)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&xt.clientHeight>0&&(0==$t&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:_t?$t:0,bottom:Ct?$t:0}},In.prototype.setScrollLeft=function(xt){this.horiz.scrollLeft!=xt&&(this.horiz.scrollLeft=xt),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},In.prototype.setScrollTop=function(xt){this.vert.scrollTop!=xt&&(this.vert.scrollTop=xt),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},In.prototype.zeroWidthHack=function(){var xt=Ho&&!Oo?"12px":"18px";this.horiz.style.height=this.vert.style.width=xt,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new z,this.disableVert=new z},In.prototype.enableZeroWidthBar=function(xt,Ct,_t){xt.style.pointerEvents="auto",Ct.set(1e3,(function n(){var $t=xt.getBoundingClientRect();("vert"==_t?document.elementFromPoint($t.right-1,($t.top+$t.bottom)/2):document.elementFromPoint(($t.right+$t.left)/2,$t.bottom-1))!=xt?xt.style.pointerEvents="none":Ct.set(1e3,n)}))},In.prototype.clear=function(){var xt=this.horiz.parentNode;xt.removeChild(this.horiz),xt.removeChild(this.vert)};var Rn=function(){};function zn(xt,Ct){Ct||(Ct=En(xt));var _t=xt.display.barWidth,$t=xt.display.barHeight;Bn(xt,Ct);for(var Vn=0;Vn<4&&_t!=xt.display.barWidth||$t!=xt.display.barHeight;Vn++)_t!=xt.display.barWidth&&xt.options.lineWrapping&&Ln(xt),Bn(xt,En(xt)),_t=xt.display.barWidth,$t=xt.display.barHeight}function Bn(xt,Ct){var _t=xt.display,$t=_t.scrollbars.update(Ct);_t.sizer.style.paddingRight=(_t.barWidth=$t.right)+"px",_t.sizer.style.paddingBottom=(_t.barHeight=$t.bottom)+"px",_t.heightForcer.style.borderBottom=$t.bottom+"px solid transparent",$t.right&&$t.bottom?(_t.scrollbarFiller.style.display="block",_t.scrollbarFiller.style.height=$t.bottom+"px",_t.scrollbarFiller.style.width=$t.right+"px"):_t.scrollbarFiller.style.display="",$t.bottom&&xt.options.coverGutterNextToScrollbar&&xt.options.fixedGutter?(_t.gutterFiller.style.display="block",_t.gutterFiller.style.height=$t.bottom+"px",_t.gutterFiller.style.width=Ct.gutterWidth+"px"):_t.gutterFiller.style.display=""}Rn.prototype.update=function(){return{bottom:0,right:0}},Rn.prototype.setScrollLeft=function(){},Rn.prototype.setScrollTop=function(){},Rn.prototype.clear=function(){};var js={native:In,null:Rn};function Un(xt){xt.display.scrollbars&&(xt.display.scrollbars.clear(),xt.display.scrollbars.addClass&&T(xt.display.wrapper,xt.display.scrollbars.addClass)),xt.display.scrollbars=new js[xt.options.scrollbarStyle]((function(Ct){xt.display.wrapper.insertBefore(Ct,xt.display.scrollbarFiller),fe(Ct,"mousedown",(function(){xt.state.focused&&setTimeout((function(){return xt.display.input.focus()}),0)})),Ct.setAttribute("cm-not-content","true")}),(function(Ct,_t){"horizontal"==_t?Pn(xt,Ct):Hn(xt,Ct)}),xt),xt.display.scrollbars.addClass&&H(xt.display.wrapper,xt.display.scrollbars.addClass)}var Rs=0;function Kn(xt){var Ct;xt.curOp={cm:xt,viewChanged:!1,startHeight:xt.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Rs,markArrays:null},Ct=xt.curOp,Ps?Ps.ops.push(Ct):Ct.ownsGroup=Ps={ops:[Ct],delayedCallbacks:[]}}function jn(xt){var Ct=xt.curOp;Ct&&function(xt,Ct){var _t=xt.ownsGroup;if(_t)try{!function(xt){var Ct=xt.delayedCallbacks,_t=0;do{for(;_t<Ct.length;_t++)Ct[_t].call(null);for(var $t=0;$t<xt.ops.length;$t++){var Vn=xt.ops[$t];if(Vn.cursorActivityHandlers)for(;Vn.cursorActivityCalled<Vn.cursorActivityHandlers.length;)Vn.cursorActivityHandlers[Vn.cursorActivityCalled++].call(null,Vn.cm)}}while(_t<Ct.length)}(_t)}finally{Ps=null,function(xt){for(var Ct=0;Ct<xt.ops.length;Ct++)xt.ops[Ct].cm.curOp=null;!function(xt){for(var Ct=xt.ops,_t=0;_t<Ct.length;_t++)Xn(Ct[_t]);for(var $t=0;$t<Ct.length;$t++)(Vn=Ct[$t]).updatedDisplay=Vn.mustUpdate&&ni(Vn.cm,Vn.update);for(var Vn,Gn=0;Gn<Ct.length;Gn++)Yn(Ct[Gn]);for(var or=0;or<Ct.length;or++)$n(Ct[or]);for(var lr=0;lr<Ct.length;lr++)_n(Ct[lr])}(xt)}(_t)}}(Ct)}function Xn(xt){var Ct=xt.cm,_t=Ct.display;!function(xt){var Ct=xt.display;!Ct.scrollbarsClipped&&Ct.scroller.offsetWidth&&(Ct.nativeBarWidth=Ct.scroller.offsetWidth-Ct.scroller.clientWidth,Ct.heightForcer.style.height=kr(xt)+"px",Ct.sizer.style.marginBottom=-Ct.nativeBarWidth+"px",Ct.sizer.style.borderRightWidth=kr(xt)+"px",Ct.scrollbarsClipped=!0)}(Ct),xt.updateMaxLine&&jt(Ct),xt.mustUpdate=xt.viewChanged||xt.forceUpdate||null!=xt.scrollTop||xt.scrollToPos&&(xt.scrollToPos.from.line<_t.viewFrom||xt.scrollToPos.to.line>=_t.viewTo)||_t.maxLineChanged&&Ct.options.lineWrapping,xt.update=xt.mustUpdate&&new ri(Ct,xt.mustUpdate&&{top:xt.scrollTop,ensure:xt.scrollToPos},xt.forceUpdate)}function Yn(xt){var Ct=xt.cm,_t=Ct.display;xt.updatedDisplay&&Ln(Ct),xt.barMeasure=En(Ct),_t.maxLineChanged&&!Ct.options.lineWrapping&&(xt.adjustWidthTo=Or(Ct,_t.maxLine,_t.maxLine.text.length).left+3,Ct.display.sizerWidth=xt.adjustWidthTo,xt.barMeasure.scrollWidth=Math.max(_t.scroller.clientWidth,_t.sizer.offsetLeft+xt.adjustWidthTo+kr(Ct)+Ct.display.barWidth),xt.maxScrollLeft=Math.max(0,_t.sizer.offsetLeft+xt.adjustWidthTo-Tr(Ct))),(xt.updatedDisplay||xt.selectionChanged)&&(xt.preparedSelection=_t.input.prepareSelection())}function $n(xt){var Ct=xt.cm;null!=xt.adjustWidthTo&&(Ct.display.sizer.style.minWidth=xt.adjustWidthTo+"px",xt.maxScrollLeft<Ct.doc.scrollLeft&&Pn(Ct,Math.min(Ct.display.scroller.scrollLeft,xt.maxScrollLeft),!0),Ct.display.maxLineChanged=!1);var _t=xt.focus&&xt.focus==W();xt.preparedSelection&&Ct.display.input.showSelection(xt.preparedSelection,_t),(xt.updatedDisplay||xt.startHeight!=Ct.doc.height)&&zn(Ct,xt.barMeasure),xt.updatedDisplay&&si(Ct,xt.barMeasure),xt.selectionChanged&&bn(Ct),Ct.state.focused&&xt.updateInput&&Ct.display.input.reset(xt.typing),_t&&wn(xt.cm)}function _n(xt){var Ct=xt.cm,_t=Ct.display,$t=Ct.doc;xt.updatedDisplay&&ii(Ct,xt.update),null==_t.wheelStartX||null==xt.scrollTop&&null==xt.scrollLeft&&!xt.scrollToPos||(_t.wheelStartX=_t.wheelStartY=null),null!=xt.scrollTop&&Fn(Ct,xt.scrollTop,xt.forceScroll),null!=xt.scrollLeft&&Pn(Ct,xt.scrollLeft,!0,!0),xt.scrollToPos&&function(xt,Ct){if(!ve(xt,"scrollCursorIntoView")){var _t=xt.display,$t=_t.sizer.getBoundingClientRect(),Vn=null;if(Ct.top+$t.top<0?Vn=!0:Ct.bottom+$t.top>(window.innerHeight||document.documentElement.clientHeight)&&(Vn=!1),null!=Vn&&!Ro){var Gn=O("div","â€‹",null,"position: absolute;\n                         top: "+(Ct.top-_t.viewOffset-Cr(xt.display))+"px;\n                         height: "+(Ct.bottom-Ct.top+kr(xt)+_t.barHeight)+"px;\n                         left: "+Ct.left+"px; width: "+Math.max(2,Ct.right-Ct.left)+"px;");xt.display.lineSpace.appendChild(Gn),Gn.scrollIntoView(Vn),xt.display.lineSpace.removeChild(Gn)}}}(Ct,function(xt,Ct,_t,$t){var Vn;null==$t&&($t=0),xt.options.lineWrapping||Ct!=_t||(_t="before"==Ct.sticky?et(Ct.line,Ct.ch+1,"before"):Ct,Ct=Ct.ch?et(Ct.line,"before"==Ct.sticky?Ct.ch-1:Ct.ch,"after"):Ct);for(var Gn=0;Gn<5;Gn++){var or=!1,lr=Xr(xt,Ct),Fr=_t&&_t!=Ct?Xr(xt,_t):lr,Hr=Mn(xt,Vn={left:Math.min(lr.left,Fr.left),top:Math.min(lr.top,Fr.top)-$t,right:Math.max(lr.left,Fr.left),bottom:Math.max(lr.bottom,Fr.bottom)+$t}),xo=xt.doc.scrollTop,Eo=xt.doc.scrollLeft;if(null!=Hr.scrollTop&&(Hn(xt,Hr.scrollTop),Math.abs(xt.doc.scrollTop-xo)>1&&(or=!0)),null!=Hr.scrollLeft&&(Pn(xt,Hr.scrollLeft),Math.abs(xt.doc.scrollLeft-Eo)>1&&(or=!0)),!or)break}return Vn}(Ct,st($t,xt.scrollToPos.from),st($t,xt.scrollToPos.to),xt.scrollToPos.margin));var Vn=xt.maybeHiddenMarkers,Gn=xt.maybeUnhiddenMarkers;if(Vn)for(var or=0;or<Vn.length;++or)Vn[or].lines.length||ge(Vn[or],"hide");if(Gn)for(var lr=0;lr<Gn.length;++lr)Gn[lr].lines.length&&ge(Gn[lr],"unhide");_t.wrapper.offsetHeight&&($t.scrollTop=Ct.display.scroller.scrollTop),xt.changeObjs&&ge(Ct,"changes",Ct,xt.changeObjs),xt.update&&xt.update.finish()}function qn(xt,Ct){if(xt.curOp)return Ct();Kn(xt);try{return Ct()}finally{jn(xt)}}function Zn(xt,Ct){return function(){if(xt.curOp)return Ct.apply(xt,arguments);Kn(xt);try{return Ct.apply(xt,arguments)}finally{jn(xt)}}}function Qn(xt){return function(){if(this.curOp)return xt.apply(this,arguments);Kn(this);try{return xt.apply(this,arguments)}finally{jn(this)}}}function Jn(xt){return function(){var Ct=this.cm;if(!Ct||Ct.curOp)return xt.apply(this,arguments);Kn(Ct);try{return xt.apply(this,arguments)}finally{jn(Ct)}}}function ei(xt,Ct){xt.doc.highlightFrontier<xt.display.viewTo&&xt.state.highlight.set(Ct,E(ti,xt))}function ti(xt){var Ct=xt.doc;if(!(Ct.highlightFrontier>=xt.display.viewTo)){var _t=+new Date+xt.options.workTime,$t=dt(xt,Ct.highlightFrontier),Vn=[];Ct.iter($t.line,Math.min(Ct.first+Ct.size,xt.display.viewTo+500),(function(Gn){if($t.line>=xt.display.viewFrom){var or=Gn.styles,lr=Gn.text.length>xt.options.maxHighlightLength?Ue(Ct.mode,$t.state):null,Fr=ht(xt,Gn,$t,!0);lr&&($t.state=lr),Gn.styles=Fr.styles;var Hr=Gn.styleClasses,xo=Fr.classes;xo?Gn.styleClasses=xo:Hr&&(Gn.styleClasses=null);for(var Eo=!or||or.length!=Gn.styles.length||Hr!=xo&&(!Hr||!xo||Hr.bgClass!=xo.bgClass||Hr.textClass!=xo.textClass),Mo=0;!Eo&&Mo<or.length;++Mo)Eo=or[Mo]!=Gn.styles[Mo];Eo&&Vn.push($t.line),Gn.stateAfter=$t.save(),$t.nextLine()}else Gn.text.length<=xt.options.maxHighlightLength&&pt(xt,Gn.text,$t),Gn.stateAfter=$t.line%5==0?$t.save():null,$t.nextLine();if(+new Date>_t)return ei(xt,xt.options.workDelay),!0})),Ct.highlightFrontier=$t.line,Ct.modeFrontier=Math.max(Ct.modeFrontier,$t.line),Vn.length&&qn(xt,(function(){for(var Ct=0;Ct<Vn.length;Ct++)cn(xt,Vn[Ct],"text")}))}}var ri=function(xt,Ct,_t){var $t=xt.display;this.viewport=Ct,this.visible=Tn($t,xt.doc,Ct),this.editorIsHidden=!$t.wrapper.offsetWidth,this.wrapperHeight=$t.wrapper.clientHeight,this.wrapperWidth=$t.wrapper.clientWidth,this.oldDisplayWidth=Tr(xt),this.force=_t,this.dims=rn(xt),this.events=[]};function ni(xt,Ct){var _t=xt.display,$t=xt.doc;if(Ct.editorIsHidden)return hn(xt),!1;if(!Ct.force&&Ct.visible.from>=_t.viewFrom&&Ct.visible.to<=_t.viewTo&&(null==_t.updateLineNumbers||_t.updateLineNumbers>=_t.viewTo)&&_t.renderedView==_t.view&&0==dn(xt))return!1;ui(xt)&&(hn(xt),Ct.dims=rn(xt));var Vn=$t.first+$t.size,Gn=Math.max(Ct.visible.from-xt.options.viewportMargin,$t.first),or=Math.min(Vn,Ct.visible.to+xt.options.viewportMargin);_t.viewFrom<Gn&&Gn-_t.viewFrom<20&&(Gn=Math.max($t.first,_t.viewFrom)),_t.viewTo>or&&_t.viewTo-or<20&&(or=Math.min(Vn,_t.viewTo)),Ss&&(Gn=zt(xt.doc,Gn),or=Bt(xt.doc,or));var lr=Gn!=_t.viewFrom||or!=_t.viewTo||_t.lastWrapHeight!=Ct.wrapperHeight||_t.lastWrapWidth!=Ct.wrapperWidth;!function(xt,Ct,_t){var $t=xt.display;0==$t.view.length||Ct>=$t.viewTo||_t<=$t.viewFrom?($t.view=ir(xt,Ct,_t),$t.viewFrom=Ct):($t.viewFrom>Ct?$t.view=ir(xt,Ct,$t.viewFrom).concat($t.view):$t.viewFrom<Ct&&($t.view=$t.view.slice(an(xt,Ct))),$t.viewFrom=Ct,$t.viewTo<_t?$t.view=$t.view.concat(ir(xt,$t.viewTo,_t)):$t.viewTo>_t&&($t.view=$t.view.slice(0,an(xt,_t)))),$t.viewTo=_t}(xt,Gn,or),_t.viewOffset=Vt(Xe(xt.doc,_t.viewFrom)),xt.display.mover.style.top=_t.viewOffset+"px";var Hr=dn(xt);if(!lr&&0==Hr&&!Ct.force&&_t.renderedView==_t.view&&(null==_t.updateLineNumbers||_t.updateLineNumbers>=_t.viewTo))return!1;var xo=function(xt){if(xt.hasFocus())return null;var Ct=W();if(!Ct||!D(xt.display.lineDiv,Ct))return null;var _t={activeElt:Ct};if(window.getSelection){var $t=window.getSelection();$t.anchorNode&&$t.extend&&D(xt.display.lineDiv,$t.anchorNode)&&(_t.anchorNode=$t.anchorNode,_t.anchorOffset=$t.anchorOffset,_t.focusNode=$t.focusNode,_t.focusOffset=$t.focusOffset)}return _t}(xt);return Hr>4&&(_t.lineDiv.style.display="none"),function(xt,Ct,_t){var $t=xt.display,Vn=xt.options.lineNumbers,Gn=$t.lineDiv,or=Gn.firstChild;function s(Ct){var _t=Ct.nextSibling;return Fr&&Ho&&xt.display.currentWheelTarget==Ct?Ct.style.display="none":Ct.parentNode.removeChild(Ct),_t}for(var lr=$t.view,Hr=$t.viewFrom,xo=0;xo<lr.length;xo++){var Eo=lr[xo];if(Eo.hidden);else if(Eo.node&&Eo.node.parentNode==Gn){for(;or!=Eo.node;)or=s(or);var Mo=Vn&&null!=Ct&&Ct<=Hr&&Eo.lineNumber;Eo.changes&&(B(Eo.changes,"gutter")>-1&&(Mo=!1),ur(xt,Eo,Hr,_t)),Mo&&(M(Eo.lineNumber),Eo.lineNumber.appendChild(document.createTextNode(Je(xt.options,Hr)))),or=Eo.node.nextSibling}else{var Oo=vr(xt,Eo,Hr,_t);Gn.insertBefore(Oo,or)}Hr+=Eo.size}for(;or;)or=s(or)}(xt,_t.updateLineNumbers,Ct.dims),Hr>4&&(_t.lineDiv.style.display=""),_t.renderedView=_t.view,function(xt){if(xt&&xt.activeElt&&xt.activeElt!=W()&&(xt.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(xt.activeElt.nodeName)&&xt.anchorNode&&D(document.body,xt.anchorNode)&&D(document.body,xt.focusNode))){var Ct=window.getSelection(),_t=document.createRange();_t.setEnd(xt.anchorNode,xt.anchorOffset),_t.collapse(!1),Ct.removeAllRanges(),Ct.addRange(_t),Ct.extend(xt.focusNode,xt.focusOffset)}}(xo),M(_t.cursorDiv),M(_t.selectionDiv),_t.gutters.style.height=_t.sizer.style.minHeight=0,lr&&(_t.lastWrapHeight=Ct.wrapperHeight,_t.lastWrapWidth=Ct.wrapperWidth,ei(xt,400)),_t.updateLineNumbers=null,!0}function ii(xt,Ct){for(var _t=Ct.viewport,$t=!0;;$t=!1){if($t&&xt.options.lineWrapping&&Ct.oldDisplayWidth!=Tr(xt))$t&&(Ct.visible=Tn(xt.display,xt.doc,_t));else if(_t&&null!=_t.top&&(_t={top:Math.min(xt.doc.height+Sr(xt.display)-Mr(xt),_t.top)}),Ct.visible=Tn(xt.display,xt.doc,_t),Ct.visible.from>=xt.display.viewFrom&&Ct.visible.to<=xt.display.viewTo)break;if(!ni(xt,Ct))break;Ln(xt);var Vn=En(xt);pn(xt),zn(xt,Vn),si(xt,Vn),Ct.force=!1}Ct.signal(xt,"update",xt),xt.display.viewFrom==xt.display.reportedViewFrom&&xt.display.viewTo==xt.display.reportedViewTo||(Ct.signal(xt,"viewportChange",xt,xt.display.viewFrom,xt.display.viewTo),xt.display.reportedViewFrom=xt.display.viewFrom,xt.display.reportedViewTo=xt.display.viewTo)}function oi(xt,Ct){var _t=new ri(xt,Ct);if(ni(xt,_t)){Ln(xt),ii(xt,_t);var $t=En(xt);pn(xt),zn(xt,$t),si(xt,$t),_t.finish()}}function li(xt){var Ct=xt.gutters.offsetWidth;xt.sizer.style.marginLeft=Ct+"px",sr(xt,"gutterChanged",xt)}function si(xt,Ct){xt.display.sizer.style.minHeight=Ct.docHeight+"px",xt.display.heightForcer.style.top=Ct.docHeight+"px",xt.display.gutters.style.height=Ct.docHeight+xt.display.barHeight+kr(xt)+"px"}function ai(xt){var Ct=xt.display,_t=Ct.view;if(Ct.alignWidgets||Ct.gutters.firstChild&&xt.options.fixedGutter){for(var $t=nn(Ct)-Ct.scroller.scrollLeft+xt.doc.scrollLeft,Vn=Ct.gutters.offsetWidth,Gn=$t+"px",or=0;or<_t.length;or++)if(!_t[or].hidden){xt.options.fixedGutter&&(_t[or].gutter&&(_t[or].gutter.style.left=Gn),_t[or].gutterBackground&&(_t[or].gutterBackground.style.left=Gn));var lr=_t[or].alignable;if(lr)for(var Fr=0;Fr<lr.length;Fr++)lr[Fr].style.left=Gn}xt.options.fixedGutter&&(Ct.gutters.style.left=$t+Vn+"px")}}function ui(xt){if(!xt.options.lineNumbers)return!1;var Ct=xt.doc,_t=Je(xt.options,Ct.first+Ct.size-1),$t=xt.display;if(_t.length!=$t.lineNumChars){var Vn=$t.measure.appendChild(O("div",[O("div",_t)],"CodeMirror-linenumber CodeMirror-gutter-elt")),Gn=Vn.firstChild.offsetWidth,or=Vn.offsetWidth-Gn;return $t.lineGutter.style.width="",$t.lineNumInnerWidth=Math.max(Gn,$t.lineGutter.offsetWidth-or)+1,$t.lineNumWidth=$t.lineNumInnerWidth+or,$t.lineNumChars=$t.lineNumInnerWidth?_t.length:-1,$t.lineGutter.style.width=$t.lineNumWidth+"px",li(xt.display),!0}return!1}function ci(xt,Ct){for(var _t=[],$t=!1,Vn=0;Vn<xt.length;Vn++){var Gn=xt[Vn],or=null;if("string"!=typeof Gn&&(or=Gn.style,Gn=Gn.className),"CodeMirror-linenumbers"==Gn){if(!Ct)continue;$t=!0}_t.push({className:Gn,style:or})}return Ct&&!$t&&_t.push({className:"CodeMirror-linenumbers",style:null}),_t}function hi(xt){var Ct=xt.gutters,_t=xt.gutterSpecs;M(Ct),xt.lineGutter=null;for(var $t=0;$t<_t.length;++$t){var Vn=_t[$t],Gn=Vn.className,or=Vn.style,lr=Ct.appendChild(O("div",null,"CodeMirror-gutter "+Gn));or&&(lr.style.cssText=or),"CodeMirror-linenumbers"==Gn&&(xt.lineGutter=lr,lr.style.width=(xt.lineNumWidth||1)+"px")}Ct.style.display=_t.length?"":"none",li(xt)}function fi(xt){hi(xt.display),un(xt),ai(xt)}function di(xt,Ct,$t,Vn){var Gn=this;this.input=$t,Gn.scrollbarFiller=O("div",null,"CodeMirror-scrollbar-filler"),Gn.scrollbarFiller.setAttribute("cm-not-content","true"),Gn.gutterFiller=O("div",null,"CodeMirror-gutter-filler"),Gn.gutterFiller.setAttribute("cm-not-content","true"),Gn.lineDiv=A("div",null,"CodeMirror-code"),Gn.selectionDiv=O("div",null,null,"position: relative; z-index: 1"),Gn.cursorDiv=O("div",null,"CodeMirror-cursors"),Gn.measure=O("div",null,"CodeMirror-measure"),Gn.lineMeasure=O("div",null,"CodeMirror-measure"),Gn.lineSpace=A("div",[Gn.measure,Gn.lineMeasure,Gn.selectionDiv,Gn.cursorDiv,Gn.lineDiv],null,"position: relative; outline: none");var Hr=A("div",[Gn.lineSpace],"CodeMirror-lines");Gn.mover=O("div",[Hr],null,"position: relative"),Gn.sizer=O("div",[Gn.mover],"CodeMirror-sizer"),Gn.sizerWidth=null,Gn.heightForcer=O("div",null,null,"position: absolute; height: "+rs+"px; width: 1px;"),Gn.gutters=O("div",null,"CodeMirror-gutters"),Gn.lineGutter=null,Gn.scroller=O("div",[Gn.sizer,Gn.heightForcer,Gn.gutters],"CodeMirror-scroll"),Gn.scroller.setAttribute("tabIndex","-1"),Gn.wrapper=O("div",[Gn.scrollbarFiller,Gn.gutterFiller,Gn.scroller],"CodeMirror"),Gn.wrapper.setAttribute("translate","no"),or&&lr<8&&(Gn.gutters.style.zIndex=-1,Gn.scroller.style.paddingRight=0),Fr||_t&&zo||(Gn.scroller.draggable=!0),xt&&(xt.appendChild?xt.appendChild(Gn.wrapper):xt(Gn.wrapper)),Gn.viewFrom=Gn.viewTo=Ct.first,Gn.reportedViewFrom=Gn.reportedViewTo=Ct.first,Gn.view=[],Gn.renderedView=null,Gn.externalMeasured=null,Gn.viewOffset=0,Gn.lastWrapHeight=Gn.lastWrapWidth=0,Gn.updateLineNumbers=null,Gn.nativeBarWidth=Gn.barHeight=Gn.barWidth=0,Gn.scrollbarsClipped=!1,Gn.lineNumWidth=Gn.lineNumInnerWidth=Gn.lineNumChars=null,Gn.alignWidgets=!1,Gn.cachedCharWidth=Gn.cachedTextHeight=Gn.cachedPaddingH=null,Gn.maxLine=null,Gn.maxLineLength=0,Gn.maxLineChanged=!1,Gn.wheelDX=Gn.wheelDY=Gn.wheelStartX=Gn.wheelStartY=null,Gn.shift=!1,Gn.selForContextMenu=null,Gn.activeTouch=null,Gn.gutterSpecs=ci(Vn.gutters,Vn.lineNumbers),hi(Gn),$t.init(Gn)}ri.prototype.signal=function(xt,Ct){ye(xt,Ct)&&this.events.push(arguments)},ri.prototype.finish=function(){for(var xt=0;xt<this.events.length;xt++)ge.apply(null,this.events[xt])};var Ns=0,_s=null;function vi(xt){var Ct=xt.wheelDeltaX,_t=xt.wheelDeltaY;return null==Ct&&xt.detail&&xt.axis==xt.HORIZONTAL_AXIS&&(Ct=xt.detail),null==_t&&xt.detail&&xt.axis==xt.VERTICAL_AXIS?_t=xt.detail:null==_t&&(_t=xt.wheelDelta),{x:Ct,y:_t}}function mi(xt){var Ct=vi(xt);return Ct.x*=_s,Ct.y*=_s,Ct}function yi(xt,Ct){var $t=vi(Ct),Vn=$t.x,Gn=$t.y,or=_s;0===Ct.deltaMode&&(Vn=Ct.deltaX,Gn=Ct.deltaY,or=1);var lr=xt.display,Hr=lr.scroller,xo=Hr.scrollWidth>Hr.clientWidth,Mo=Hr.scrollHeight>Hr.clientHeight;if(Vn&&xo||Gn&&Mo){if(Gn&&Ho&&Fr)e:for(var Oo=Ct.target,Ro=lr.view;Oo!=Hr;Oo=Oo.parentNode)for(var Io=0;Io<Ro.length;Io++)if(Ro[Io].node==Oo){xt.display.currentWheelTarget=Oo;break e}if(Vn&&!_t&&!Eo&&null!=or)return Gn&&Mo&&Hn(xt,Math.max(0,Hr.scrollTop+Gn*or)),Pn(xt,Math.max(0,Hr.scrollLeft+Vn*or)),(!Gn||Gn&&Mo)&&we(Ct),void(lr.wheelStartX=null);if(Gn&&null!=or){var Bo=Gn*or,zo=xt.doc.scrollTop,Qo=zo+lr.wrapper.clientHeight;Bo<0?zo=Math.max(0,zo+Bo-50):Qo=Math.min(xt.doc.height,Qo+Bo+50),oi(xt,{top:zo,bottom:Qo})}Ns<20&&0!==Ct.deltaMode&&(null==lr.wheelStartX?(lr.wheelStartX=Hr.scrollLeft,lr.wheelStartY=Hr.scrollTop,lr.wheelDX=Vn,lr.wheelDY=Gn,setTimeout((function(){if(null!=lr.wheelStartX){var xt=Hr.scrollLeft-lr.wheelStartX,Ct=Hr.scrollTop-lr.wheelStartY,_t=Ct&&lr.wheelDY&&Ct/lr.wheelDY||xt&&lr.wheelDX&&xt/lr.wheelDX;lr.wheelStartX=lr.wheelStartY=null,_t&&(_s=(_s*Ns+_t)/(Ns+1),++Ns)}}),200)):(lr.wheelDX+=Vn,lr.wheelDY+=Gn))}}or?_s=-.53:_t?_s=15:xo?_s=-.7:Mo&&(_s=-1/3);var bi=function(xt,Ct){this.ranges=xt,this.primIndex=Ct};bi.prototype.primary=function(){return this.ranges[this.primIndex]},bi.prototype.equals=function(xt){if(xt==this)return!0;if(xt.primIndex!=this.primIndex||xt.ranges.length!=this.ranges.length)return!1;for(var Ct=0;Ct<this.ranges.length;Ct++){var _t=this.ranges[Ct],$t=xt.ranges[Ct];if(!rt(_t.anchor,$t.anchor)||!rt(_t.head,$t.head))return!1}return!0},bi.prototype.deepCopy=function(){for(var xt=[],Ct=0;Ct<this.ranges.length;Ct++)xt[Ct]=new wi(nt(this.ranges[Ct].anchor),nt(this.ranges[Ct].head));return new bi(xt,this.primIndex)},bi.prototype.somethingSelected=function(){for(var xt=0;xt<this.ranges.length;xt++)if(!this.ranges[xt].empty())return!0;return!1},bi.prototype.contains=function(xt,Ct){Ct||(Ct=xt);for(var _t=0;_t<this.ranges.length;_t++){var $t=this.ranges[_t];if(tt(Ct,$t.from())>=0&&tt(xt,$t.to())<=0)return _t}return-1};var wi=function(xt,Ct){this.anchor=xt,this.head=Ct};function xi(xt,Ct,_t){var $t=xt&&xt.options.selectionsMayTouch,Vn=Ct[_t];Ct.sort((function(xt,Ct){return tt(xt.from(),Ct.from())})),_t=B(Ct,Vn);for(var Gn=1;Gn<Ct.length;Gn++){var or=Ct[Gn],lr=Ct[Gn-1],Fr=tt(lr.to(),or.from());if($t&&!or.empty()?Fr>0:Fr>=0){var Hr=ot(lr.from(),or.from()),xo=it(lr.to(),or.to()),Eo=lr.empty()?or.from()==or.head:lr.from()==lr.head;Gn<=_t&&--_t,Ct.splice(--Gn,2,new wi(Eo?xo:Hr,Eo?Hr:xo))}}return new bi(Ct,_t)}function Ci(xt,Ct){return new bi([new wi(xt,Ct||xt)],0)}function Si(xt){return xt.text?et(xt.from.line+xt.text.length-1,_(xt.text).length+(1==xt.text.length?xt.from.ch:0)):xt.to}function Li(xt,Ct){if(tt(xt,Ct.from)<0)return xt;if(tt(xt,Ct.to)<=0)return Si(Ct);var _t=xt.line+Ct.text.length-(Ct.to.line-Ct.from.line)-1,$t=xt.ch;return xt.line==Ct.to.line&&($t+=Si(Ct).ch-Ct.to.ch),et(_t,$t)}function ki(xt,Ct){for(var _t=[],$t=0;$t<xt.sel.ranges.length;$t++){var Vn=xt.sel.ranges[$t];_t.push(new wi(Li(Vn.anchor,Ct),Li(Vn.head,Ct)))}return xi(xt.cm,_t,xt.sel.primIndex)}function Ti(xt,Ct,_t){return xt.line==Ct.line?et(_t.line,xt.ch-Ct.ch+_t.ch):et(_t.line+(xt.line-Ct.line),xt.ch)}function Mi(xt){xt.doc.mode=ze(xt.options,xt.doc.modeOption),Ni(xt)}function Ni(xt){xt.doc.iter((function(xt){xt.stateAfter&&(xt.stateAfter=null),xt.styles&&(xt.styles=null)})),xt.doc.modeFrontier=xt.doc.highlightFrontier=xt.doc.first,ei(xt,100),xt.state.modeGen++,xt.curOp&&un(xt)}function Oi(xt,Ct){return 0==Ct.from.ch&&0==Ct.to.ch&&""==_(Ct.text)&&(!xt.cm||xt.cm.options.wholeLineUpdateBefore)}function Ai(xt,Ct,_t,$t){function i(xt){return _t?_t[xt]:null}function o(xt,_t,Vn){!function(xt,Ct,_t,$t){xt.text=Ct,xt.stateAfter&&(xt.stateAfter=null),xt.styles&&(xt.styles=null),null!=xt.order&&(xt.order=null),Nt(xt),Ot(xt,_t);var Vn=$t?$t(xt):1;Vn!=xt.height&&_e(xt,Vn)}(xt,_t,Vn,$t),sr(xt,"change",xt,Ct)}function l(xt,Ct){for(var _t=[],Vn=xt;Vn<Ct;++Vn)_t.push(new Xt(or[Vn],i(Vn),$t));return _t}var Vn=Ct.from,Gn=Ct.to,or=Ct.text,lr=Xe(xt,Vn.line),Fr=Xe(xt,Gn.line),Hr=_(or),xo=i(or.length-1),Eo=Gn.line-Vn.line;if(Ct.full)xt.insert(0,l(0,or.length)),xt.remove(or.length,xt.size-or.length);else if(Oi(xt,Ct)){var Mo=l(0,or.length-1);o(Fr,Fr.text,xo),Eo&&xt.remove(Vn.line,Eo),Mo.length&&xt.insert(Vn.line,Mo)}else if(lr==Fr)if(1==or.length)o(lr,lr.text.slice(0,Vn.ch)+Hr+lr.text.slice(Gn.ch),xo);else{var Oo=l(1,or.length-1);Oo.push(new Xt(Hr+lr.text.slice(Gn.ch),xo,$t)),o(lr,lr.text.slice(0,Vn.ch)+or[0],i(0)),xt.insert(Vn.line+1,Oo)}else if(1==or.length)o(lr,lr.text.slice(0,Vn.ch)+or[0]+Fr.text.slice(Gn.ch),i(0)),xt.remove(Vn.line+1,Eo);else{o(lr,lr.text.slice(0,Vn.ch)+or[0],i(0)),o(Fr,Hr+Fr.text.slice(Gn.ch),xo);var Ro=l(1,or.length-1);Eo>1&&xt.remove(Vn.line+1,Eo-1),xt.insert(Vn.line+1,Ro)}sr(xt,"change",xt,Ct)}function Di(xt,Ct,_t){!function e(xt,$t,Vn){if(xt.linked)for(var Gn=0;Gn<xt.linked.length;++Gn){var or=xt.linked[Gn];if(or.doc!=$t){var lr=Vn&&or.sharedHist;_t&&!lr||(Ct(or.doc,lr),e(or.doc,xt,lr))}}}(xt,null,!0)}function Wi(xt,Ct){if(Ct.cm)throw new Error("This document is already in use.");xt.doc=Ct,Ct.cm=xt,ln(xt),Mi(xt),Hi(xt),xt.options.direction=Ct.direction,xt.options.lineWrapping||jt(xt),xt.options.mode=Ct.modeOption,un(xt)}function Hi(xt){("rtl"==xt.doc.direction?H:T)(xt.display.lineDiv,"CodeMirror-rtl")}function Fi(xt){this.done=[],this.undone=[],this.undoDepth=xt?xt.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=xt?xt.maxGeneration:1}function Pi(xt,Ct){var _t={from:nt(Ct.from),to:Si(Ct),text:Ye(xt,Ct.from,Ct.to)};return Bi(xt,_t,Ct.from.line,Ct.to.line+1),Di(xt,(function(xt){return Bi(xt,_t,Ct.from.line,Ct.to.line+1)}),!0),_t}function Ei(xt){for(;xt.length&&_(xt).ranges;)xt.pop()}function Ii(xt,Ct,_t,$t){var Vn=xt.history;Vn.undone.length=0;var Gn,or,lr=+new Date;if((Vn.lastOp==$t||Vn.lastOrigin==Ct.origin&&Ct.origin&&("+"==Ct.origin.charAt(0)&&Vn.lastModTime>lr-(xt.cm?xt.cm.options.historyEventDelay:500)||"*"==Ct.origin.charAt(0)))&&(Gn=function(xt,Ct){return Ct?(Ei(xt.done),_(xt.done)):xt.done.length&&!_(xt.done).ranges?_(xt.done):xt.done.length>1&&!xt.done[xt.done.length-2].ranges?(xt.done.pop(),_(xt.done)):void 0}(Vn,Vn.lastOp==$t)))or=_(Gn.changes),0==tt(Ct.from,Ct.to)&&0==tt(Ct.from,or.to)?or.to=Si(Ct):Gn.changes.push(Pi(xt,Ct));else{var Fr=_(Vn.done);for(Fr&&Fr.ranges||zi(xt.sel,Vn.done),Gn={changes:[Pi(xt,Ct)],generation:Vn.generation},Vn.done.push(Gn);Vn.done.length>Vn.undoDepth;)Vn.done.shift(),Vn.done[0].ranges||Vn.done.shift()}Vn.done.push(_t),Vn.generation=++Vn.maxGeneration,Vn.lastModTime=Vn.lastSelTime=lr,Vn.lastOp=Vn.lastSelOp=$t,Vn.lastOrigin=Vn.lastSelOrigin=Ct.origin,or||ge(xt,"historyAdded")}function zi(xt,Ct){var _t=_(Ct);_t&&_t.ranges&&_t.equals(xt)||Ct.push(xt)}function Bi(xt,Ct,_t,$t){var Vn=Ct["spans_"+xt.id],Gn=0;xt.iter(Math.max(xt.first,_t),Math.min(xt.first+xt.size,$t),(function(_t){_t.markedSpans&&((Vn||(Vn=Ct["spans_"+xt.id]={}))[Gn]=_t.markedSpans),++Gn}))}function Gi(xt){if(!xt)return null;for(var Ct,_t=0;_t<xt.length;++_t)xt[_t].marker.explicitlyCleared?Ct||(Ct=xt.slice(0,_t)):Ct&&Ct.push(xt[_t]);return Ct?Ct.length?Ct:null:xt}function Ui(xt,Ct){var _t=function(xt,Ct){var _t=Ct["spans_"+xt.id];if(!_t)return null;for(var $t=[],Vn=0;Vn<Ct.text.length;++Vn)$t.push(Gi(_t[Vn]));return $t}(xt,Ct),$t=Tt(xt,Ct);if(!_t)return $t;if(!$t)return _t;for(var Vn=0;Vn<_t.length;++Vn){var Gn=_t[Vn],or=$t[Vn];if(Gn&&or)e:for(var lr=0;lr<or.length;++lr){for(var Fr=or[lr],Hr=0;Hr<Gn.length;++Hr)if(Gn[Hr].marker==Fr.marker)continue e;Gn.push(Fr)}else or&&(_t[Vn]=or)}return _t}function Vi(xt,Ct,_t){for(var $t=[],Vn=0;Vn<xt.length;++Vn){var Gn=xt[Vn];if(Gn.ranges)$t.push(_t?bi.prototype.deepCopy.call(Gn):Gn);else{var or=Gn.changes,lr=[];$t.push({changes:lr});for(var Fr=0;Fr<or.length;++Fr){var Hr=or[Fr],xo=void 0;if(lr.push({from:Hr.from,to:Hr.to,text:Hr.text}),Ct)for(var Eo in Hr)(xo=Eo.match(/^spans_(\d+)$/))&&B(Ct,Number(xo[1]))>-1&&(_(lr)[Eo]=Hr[Eo],delete Hr[Eo])}}}return $t}function Ki(xt,Ct,_t,$t){if($t){var Vn=xt.anchor;if(_t){var Gn=tt(Ct,Vn)<0;Gn!=tt(_t,Vn)<0?(Vn=Ct,Ct=_t):Gn!=tt(Ct,_t)<0&&(Ct=_t)}return new wi(Vn,Ct)}return new wi(_t||Ct,Ct)}function ji(xt,Ct,_t,$t,Vn){null==Vn&&(Vn=xt.cm&&(xt.cm.display.shift||xt.extend)),qi(xt,new bi([Ki(xt.sel.primary(),Ct,_t,Vn)],0),$t)}function Xi(xt,Ct,_t){for(var $t=[],Vn=xt.cm&&(xt.cm.display.shift||xt.extend),Gn=0;Gn<xt.sel.ranges.length;Gn++)$t[Gn]=Ki(xt.sel.ranges[Gn],Ct[Gn],null,Vn);qi(xt,xi(xt.cm,$t,xt.sel.primIndex),_t)}function Yi(xt,Ct,_t,$t){var Vn=xt.sel.ranges.slice(0);Vn[Ct]=_t,qi(xt,xi(xt.cm,Vn,xt.sel.primIndex),$t)}function $i(xt,Ct,_t,$t){qi(xt,Ci(Ct,_t),$t)}function _i(xt,Ct,_t){var $t=xt.history.done,Vn=_($t);Vn&&Vn.ranges?($t[$t.length-1]=Ct,Zi(xt,Ct,_t)):qi(xt,Ct,_t)}function qi(xt,Ct,_t){Zi(xt,Ct,_t),function Ri(xt,Ct,_t,$t){var Vn=xt.history,Gn=$t&&$t.origin;_t==Vn.lastSelOp||Gn&&Vn.lastSelOrigin==Gn&&(Vn.lastModTime==Vn.lastSelTime&&Vn.lastOrigin==Gn||function(xt,Ct,_t,$t){var Vn=Ct.charAt(0);return"*"==Vn||"+"==Vn&&_t.ranges.length==$t.ranges.length&&_t.somethingSelected()==$t.somethingSelected()&&new Date-xt.history.lastSelTime<=(xt.cm?xt.cm.options.historyEventDelay:500)}(xt,Gn,_(Vn.done),Ct))?Vn.done[Vn.done.length-1]=Ct:zi(Ct,Vn.done),Vn.lastSelTime=+new Date,Vn.lastSelOrigin=Gn,Vn.lastSelOp=_t,$t&&!1!==$t.clearRedo&&Ei(Vn.undone)}(xt,xt.sel,xt.cm?xt.cm.curOp.id:NaN,_t)}function Zi(xt,Ct,_t){(ye(xt,"beforeSelectionChange")||xt.cm&&ye(xt.cm,"beforeSelectionChange"))&&(Ct=function(xt,Ct,_t){var $t={ranges:Ct.ranges,update:function(Ct){this.ranges=[];for(var _t=0;_t<Ct.length;_t++)this.ranges[_t]=new wi(st(xt,Ct[_t].anchor),st(xt,Ct[_t].head))},origin:_t&&_t.origin};return ge(xt,"beforeSelectionChange",xt,$t),xt.cm&&ge(xt.cm,"beforeSelectionChange",xt.cm,$t),$t.ranges!=Ct.ranges?xi(xt.cm,$t.ranges,$t.ranges.length-1):Ct}(xt,Ct,_t));var $t=_t&&_t.bias||(tt(Ct.primary().head,xt.sel.primary().head)<0?-1:1);Qi(xt,eo(xt,Ct,$t,!0)),_t&&!1===_t.scroll||!xt.cm||"nocursor"==xt.cm.getOption("readOnly")||On(xt.cm)}function Qi(xt,Ct){Ct.equals(xt.sel)||(xt.sel=Ct,xt.cm&&(xt.cm.curOp.updateInput=1,xt.cm.curOp.selectionChanged=!0,me(xt.cm)),sr(xt,"cursorActivity",xt))}function Ji(xt){Qi(xt,eo(xt,xt.sel,null,!1))}function eo(xt,Ct,_t,$t){for(var Vn,Gn=0;Gn<Ct.ranges.length;Gn++){var or=Ct.ranges[Gn],lr=Ct.ranges.length==xt.sel.ranges.length&&xt.sel.ranges[Gn],Fr=ro(xt,or.anchor,lr&&lr.anchor,_t,$t),Hr=ro(xt,or.head,lr&&lr.head,_t,$t);(Vn||Fr!=or.anchor||Hr!=or.head)&&(Vn||(Vn=Ct.ranges.slice(0,Gn)),Vn[Gn]=new wi(Fr,Hr))}return Vn?xi(xt.cm,Vn,Ct.primIndex):Ct}function to(xt,Ct,_t,$t,Vn){var Gn=Xe(xt,Ct.line);if(Gn.markedSpans)for(var or=0;or<Gn.markedSpans.length;++or){var lr=Gn.markedSpans[or],Fr=lr.marker,Hr="selectLeft"in Fr?!Fr.selectLeft:Fr.inclusiveLeft,xo="selectRight"in Fr?!Fr.selectRight:Fr.inclusiveRight;if((null==lr.from||(Hr?lr.from<=Ct.ch:lr.from<Ct.ch))&&(null==lr.to||(xo?lr.to>=Ct.ch:lr.to>Ct.ch))){if(Vn&&(ge(Fr,"beforeCursorEnter"),Fr.explicitlyCleared)){if(Gn.markedSpans){--or;continue}break}if(!Fr.atomic)continue;if(_t){var Eo=Fr.find($t<0?1:-1),Mo=void 0;if(($t<0?xo:Hr)&&(Eo=no(xt,Eo,-$t,Eo&&Eo.line==Ct.line?Gn:null)),Eo&&Eo.line==Ct.line&&(Mo=tt(Eo,_t))&&($t<0?Mo<0:Mo>0))return to(xt,Eo,Ct,$t,Vn)}var Oo=Fr.find($t<0?-1:1);return($t<0?Hr:xo)&&(Oo=no(xt,Oo,$t,Oo.line==Ct.line?Gn:null)),Oo?to(xt,Oo,Ct,$t,Vn):null}}return Ct}function ro(xt,Ct,_t,$t,Vn){var Gn=$t||1;return to(xt,Ct,_t,Gn,Vn)||!Vn&&to(xt,Ct,_t,Gn,!0)||to(xt,Ct,_t,-Gn,Vn)||!Vn&&to(xt,Ct,_t,-Gn,!0)||(xt.cantEdit=!0,et(xt.first,0))}function no(xt,Ct,_t,$t){return _t<0&&0==Ct.ch?Ct.line>xt.first?st(xt,et(Ct.line-1)):null:_t>0&&Ct.ch==($t||Xe(xt,Ct.line)).text.length?Ct.line<xt.first+xt.size-1?et(Ct.line+1,0):null:new et(Ct.line,Ct.ch+_t)}function io(xt){xt.setSelection(et(xt.firstLine(),0),et(xt.lastLine()),is)}function oo(xt,Ct,_t){var $t={canceled:!1,from:Ct.from,to:Ct.to,text:Ct.text,origin:Ct.origin,cancel:function(){return $t.canceled=!0}};return _t&&($t.update=function(Ct,_t,Vn,Gn){Ct&&($t.from=st(xt,Ct)),_t&&($t.to=st(xt,_t)),Vn&&($t.text=Vn),void 0!==Gn&&($t.origin=Gn)}),ge(xt,"beforeChange",xt,$t),xt.cm&&ge(xt.cm,"beforeChange",xt.cm,$t),$t.canceled?(xt.cm&&(xt.cm.curOp.updateInput=2),null):{from:$t.from,to:$t.to,text:$t.text,origin:$t.origin}}function lo(xt,Ct,_t){if(xt.cm){if(!xt.cm.curOp)return Zn(xt.cm,lo)(xt,Ct,_t);if(xt.cm.state.suppressEdits)return}if(!(ye(xt,"beforeChange")||xt.cm&&ye(xt.cm,"beforeChange"))||(Ct=oo(xt,Ct,!0))){var $t=Cs&&!_t&&function(xt,Ct,_t){var $t=null;if(xt.iter(Ct.line,_t.line+1,(function(xt){if(xt.markedSpans)for(var Ct=0;Ct<xt.markedSpans.length;++Ct){var _t=xt.markedSpans[Ct].marker;!_t.readOnly||$t&&-1!=B($t,_t)||($t||($t=[])).push(_t)}})),!$t)return null;for(var Vn=[{from:Ct,to:_t}],Gn=0;Gn<$t.length;++Gn)for(var or=$t[Gn],lr=or.find(0),Fr=0;Fr<Vn.length;++Fr){var Hr=Vn[Fr];if(!(tt(Hr.to,lr.from)<0||tt(Hr.from,lr.to)>0)){var xo=[Fr,1],Eo=tt(Hr.from,lr.from),Mo=tt(Hr.to,lr.to);(Eo<0||!or.inclusiveLeft&&!Eo)&&xo.push({from:Hr.from,to:lr.from}),(Mo>0||!or.inclusiveRight&&!Mo)&&xo.push({from:lr.to,to:Hr.to}),Vn.splice.apply(Vn,xo),Fr+=xo.length-3}}return Vn}(xt,Ct.from,Ct.to);if($t)for(var Vn=$t.length-1;Vn>=0;--Vn)so(xt,{from:$t[Vn].from,to:$t[Vn].to,text:Vn?[""]:Ct.text,origin:Ct.origin});else so(xt,Ct)}}function so(xt,Ct){if(1!=Ct.text.length||""!=Ct.text[0]||0!=tt(Ct.from,Ct.to)){var _t=ki(xt,Ct);Ii(xt,Ct,_t,xt.cm?xt.cm.curOp.id:NaN),co(xt,Ct,_t,Tt(xt,Ct));var $t=[];Di(xt,(function(xt,_t){_t||-1!=B($t,xt.history)||(go(xt.history,Ct),$t.push(xt.history)),co(xt,Ct,null,Tt(xt,Ct))}))}}function ao(xt,Ct,_t){var $t=xt.cm&&xt.cm.state.suppressEdits;if(!$t||_t){for(var Vn,Gn=xt.history,or=xt.sel,lr="undo"==Ct?Gn.done:Gn.undone,Fr="undo"==Ct?Gn.undone:Gn.done,Hr=0;Hr<lr.length&&(Vn=lr[Hr],_t?!Vn.ranges||Vn.equals(xt.sel):Vn.ranges);Hr++);if(Hr!=lr.length){for(Gn.lastOrigin=Gn.lastSelOrigin=null;;){if(!(Vn=lr.pop()).ranges){if($t)return void lr.push(Vn);break}if(zi(Vn,Fr),_t&&!Vn.equals(xt.sel))return void qi(xt,Vn,{clearRedo:!1});or=Vn}var xo=[];zi(or,Fr),Fr.push({changes:xo,generation:Gn.generation}),Gn.generation=Vn.generation||++Gn.maxGeneration;for(var Eo=ye(xt,"beforeChange")||xt.cm&&ye(xt.cm,"beforeChange"),f=function(_t){var $t=Vn.changes[_t];if($t.origin=Ct,Eo&&!oo(xt,$t,!1))return lr.length=0,{};xo.push(Pi(xt,$t));var Gn=_t?ki(xt,$t):_(lr);co(xt,$t,Gn,Ui(xt,$t)),!_t&&xt.cm&&xt.cm.scrollIntoView({from:$t.from,to:Si($t)});var or=[];Di(xt,(function(xt,Ct){Ct||-1!=B(or,xt.history)||(go(xt.history,$t),or.push(xt.history)),co(xt,$t,null,Ui(xt,$t))}))},Mo=Vn.changes.length-1;Mo>=0;--Mo){var Oo=f(Mo);if(Oo)return Oo.v}}}}function uo(xt,Ct){if(0!=Ct&&(xt.first+=Ct,xt.sel=new bi(q(xt.sel.ranges,(function(xt){return new wi(et(xt.anchor.line+Ct,xt.anchor.ch),et(xt.head.line+Ct,xt.head.ch))})),xt.sel.primIndex),xt.cm)){un(xt.cm,xt.first,xt.first-Ct,Ct);for(var _t=xt.cm.display,$t=_t.viewFrom;$t<_t.viewTo;$t++)cn(xt.cm,$t,"gutter")}}function co(xt,Ct,_t,$t){if(xt.cm&&!xt.cm.curOp)return Zn(xt.cm,co)(xt,Ct,_t,$t);if(Ct.to.line<xt.first)uo(xt,Ct.text.length-1-(Ct.to.line-Ct.from.line));else if(!(Ct.from.line>xt.lastLine())){if(Ct.from.line<xt.first){var Vn=Ct.text.length-1-(xt.first-Ct.from.line);uo(xt,Vn),Ct={from:et(xt.first,0),to:et(Ct.to.line+Vn,Ct.to.ch),text:[_(Ct.text)],origin:Ct.origin}}var Gn=xt.lastLine();Ct.to.line>Gn&&(Ct={from:Ct.from,to:et(Gn,Xe(xt,Gn).text.length),text:[Ct.text[0]],origin:Ct.origin}),Ct.removed=Ye(xt,Ct.from,Ct.to),_t||(_t=ki(xt,Ct)),xt.cm?function(xt,Ct,_t){var $t=xt.doc,Vn=xt.display,Gn=Ct.from,or=Ct.to,lr=!1,Fr=Gn.line;xt.options.lineWrapping||(Fr=qe(Rt(Xe($t,Gn.line))),$t.iter(Fr,or.line+1,(function(xt){if(xt==Vn.maxLine)return lr=!0,!0}))),$t.sel.contains(Ct.from,Ct.to)>-1&&me(xt),Ai($t,Ct,_t,on(xt)),xt.options.lineWrapping||($t.iter(Fr,Gn.line+Ct.text.length,(function(xt){var Ct=Kt(xt);Ct>Vn.maxLineLength&&(Vn.maxLine=xt,Vn.maxLineLength=Ct,Vn.maxLineChanged=!0,lr=!1)})),lr&&(xt.curOp.updateMaxLine=!0)),function(xt,Ct){if(xt.modeFrontier=Math.min(xt.modeFrontier,Ct),!(xt.highlightFrontier<Ct-10)){for(var _t=xt.first,$t=Ct-1;$t>_t;$t--){var Vn=Xe(xt,$t).stateAfter;if(Vn&&(!(Vn instanceof ut)||$t+Vn.lookAhead<Ct)){_t=$t+1;break}}xt.highlightFrontier=Math.min(xt.highlightFrontier,_t)}}($t,Gn.line),ei(xt,400);var Hr=Ct.text.length-(or.line-Gn.line)-1;Ct.full?un(xt):Gn.line!=or.line||1!=Ct.text.length||Oi(xt.doc,Ct)?un(xt,Gn.line,or.line+1,Hr):cn(xt,Gn.line,"text");var xo=ye(xt,"changes"),Eo=ye(xt,"change");if(Eo||xo){var Mo={from:Gn,to:or,text:Ct.text,removed:Ct.removed,origin:Ct.origin};Eo&&sr(xt,"change",xt,Mo),xo&&(xt.curOp.changeObjs||(xt.curOp.changeObjs=[])).push(Mo)}xt.display.selForContextMenu=null}(xt.cm,Ct,$t):Ai(xt,Ct,$t),Zi(xt,_t,is),xt.cantEdit&&ro(xt,et(xt.firstLine(),0))&&(xt.cantEdit=!1)}}function ho(xt,Ct,_t,$t,Vn){var Gn;$t||($t=_t),tt($t,_t)<0&&(_t=(Gn=[$t,_t])[0],$t=Gn[1]),"string"==typeof Ct&&(Ct=xt.splitLines(Ct)),lo(xt,{from:_t,to:$t,text:Ct,origin:Vn})}function fo(xt,Ct,_t,$t){_t<xt.line?xt.line+=$t:Ct<xt.line&&(xt.line=Ct,xt.ch=0)}function po(xt,Ct,_t,$t){for(var Vn=0;Vn<xt.length;++Vn){var Gn=xt[Vn],or=!0;if(Gn.ranges){Gn.copied||((Gn=xt[Vn]=Gn.deepCopy()).copied=!0);for(var lr=0;lr<Gn.ranges.length;lr++)fo(Gn.ranges[lr].anchor,Ct,_t,$t),fo(Gn.ranges[lr].head,Ct,_t,$t)}else{for(var Fr=0;Fr<Gn.changes.length;++Fr){var Hr=Gn.changes[Fr];if(_t<Hr.from.line)Hr.from=et(Hr.from.line+$t,Hr.from.ch),Hr.to=et(Hr.to.line+$t,Hr.to.ch);else if(Ct<=Hr.to.line){or=!1;break}}or||(xt.splice(0,Vn+1),Vn=0)}}}function go(xt,Ct){var _t=Ct.from.line,$t=Ct.to.line,Vn=Ct.text.length-($t-_t)-1;po(xt.done,_t,$t,Vn),po(xt.undone,_t,$t,Vn)}function vo(xt,Ct,_t,$t){var Vn=Ct,Gn=Ct;return"number"==typeof Ct?Gn=Xe(xt,lt(xt,Ct)):Vn=qe(Ct),null==Vn?null:($t(Gn,Vn)&&xt.cm&&cn(xt.cm,Vn,_t),Gn)}function mo(xt){this.lines=xt,this.parent=null;for(var Ct=0,_t=0;_t<xt.length;++_t)xt[_t].parent=this,Ct+=xt[_t].height;this.height=Ct}function yo(xt){this.children=xt;for(var Ct=0,_t=0,$t=0;$t<xt.length;++$t){var Vn=xt[$t];Ct+=Vn.chunkSize(),_t+=Vn.height,Vn.parent=this}this.size=Ct,this.height=_t,this.parent=null}wi.prototype.from=function(){return ot(this.anchor,this.head)},wi.prototype.to=function(){return it(this.anchor,this.head)},wi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},mo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(xt,Ct){for(var _t=xt,$t=xt+Ct;_t<$t;++_t){var Vn=this.lines[_t];this.height-=Vn.height,Yt(Vn),sr(Vn,"delete")}this.lines.splice(xt,Ct)},collapse:function(xt){xt.push.apply(xt,this.lines)},insertInner:function(xt,Ct,_t){this.height+=_t,this.lines=this.lines.slice(0,xt).concat(Ct).concat(this.lines.slice(xt));for(var $t=0;$t<Ct.length;++$t)Ct[$t].parent=this},iterN:function(xt,Ct,_t){for(var $t=xt+Ct;xt<$t;++xt)if(_t(this.lines[xt]))return!0}},yo.prototype={chunkSize:function(){return this.size},removeInner:function(xt,Ct){this.size-=Ct;for(var _t=0;_t<this.children.length;++_t){var $t=this.children[_t],Vn=$t.chunkSize();if(xt<Vn){var Gn=Math.min(Ct,Vn-xt),or=$t.height;if($t.removeInner(xt,Gn),this.height-=or-$t.height,Vn==Gn&&(this.children.splice(_t--,1),$t.parent=null),0==(Ct-=Gn))break;xt=0}else xt-=Vn}if(this.size-Ct<25&&(this.children.length>1||!(this.children[0]instanceof mo))){var lr=[];this.collapse(lr),this.children=[new mo(lr)],this.children[0].parent=this}},collapse:function(xt){for(var Ct=0;Ct<this.children.length;++Ct)this.children[Ct].collapse(xt)},insertInner:function(xt,Ct,_t){this.size+=Ct.length,this.height+=_t;for(var $t=0;$t<this.children.length;++$t){var Vn=this.children[$t],Gn=Vn.chunkSize();if(xt<=Gn){if(Vn.insertInner(xt,Ct,_t),Vn.lines&&Vn.lines.length>50){for(var or=Vn.lines.length%25+25,lr=or;lr<Vn.lines.length;){var Fr=new mo(Vn.lines.slice(lr,lr+=25));Vn.height-=Fr.height,this.children.splice(++$t,0,Fr),Fr.parent=this}Vn.lines=Vn.lines.slice(0,or),this.maybeSpill()}break}xt-=Gn}},maybeSpill:function(){if(!(this.children.length<=10)){var xt=this;do{var Ct=new yo(xt.children.splice(xt.children.length-5,5));if(xt.parent){xt.size-=Ct.size,xt.height-=Ct.height;var _t=B(xt.parent.children,xt);xt.parent.children.splice(_t+1,0,Ct)}else{var $t=new yo(xt.children);$t.parent=xt,xt.children=[$t,Ct],xt=$t}Ct.parent=xt.parent}while(xt.children.length>10);xt.parent.maybeSpill()}},iterN:function(xt,Ct,_t){for(var $t=0;$t<this.children.length;++$t){var Vn=this.children[$t],Gn=Vn.chunkSize();if(xt<Gn){var or=Math.min(Ct,Gn-xt);if(Vn.iterN(xt,or,_t))return!0;if(0==(Ct-=or))break;xt=0}else xt-=Gn}}};var bo=function(xt,Ct,_t){if(_t)for(var $t in _t)_t.hasOwnProperty($t)&&(this[$t]=_t[$t]);this.doc=xt,this.node=Ct};function wo(xt,Ct,_t){Vt(Ct)<(xt.curOp&&xt.curOp.scrollTop||xt.doc.scrollTop)&&Nn(xt,_t)}bo.prototype.clear=function(){var xt=this.doc.cm,Ct=this.line.widgets,_t=this.line,$t=qe(_t);if(null!=$t&&Ct){for(var Vn=0;Vn<Ct.length;++Vn)Ct[Vn]==this&&Ct.splice(Vn--,1);Ct.length||(_t.widgets=null);var Gn=wr(this);_e(_t,Math.max(0,_t.height-Gn)),xt&&(qn(xt,(function(){wo(xt,_t,-Gn),cn(xt,$t,"widget")})),sr(xt,"lineWidgetCleared",xt,this,$t))}},bo.prototype.changed=function(){var xt=this,Ct=this.height,_t=this.doc.cm,$t=this.line;this.height=null;var Vn=wr(this)-Ct;Vn&&(Gt(this.doc,$t)||_e($t,$t.height+Vn),_t&&qn(_t,(function(){_t.curOp.forceUpdate=!0,wo(_t,$t,Vn),sr(_t,"lineWidgetChanged",_t,xt,qe($t))})))},be(bo);var Ls=0,Co=function(xt,Ct){this.lines=[],this.type=Ct,this.doc=xt,this.id=++Ls};function So(xt,Ct,_t,$t,Vn){if($t&&$t.shared)return function(xt,Ct,_t,$t,Vn){($t=I($t)).shared=!1;var Gn=[So(xt,Ct,_t,$t,Vn)],or=Gn[0],lr=$t.widgetNode;return Di(xt,(function(xt){lr&&($t.widgetNode=lr.cloneNode(!0)),Gn.push(So(xt,st(xt,Ct),st(xt,_t),$t,Vn));for(var Fr=0;Fr<xt.linked.length;++Fr)if(xt.linked[Fr].isParent)return;or=_(Gn)})),new Lo(Gn,or)}(xt,Ct,_t,$t,Vn);if(xt.cm&&!xt.cm.curOp)return Zn(xt.cm,So)(xt,Ct,_t,$t,Vn);var Gn=new Co(xt,Vn),or=tt(Ct,_t);if($t&&I($t,Gn,!1),or>0||0==or&&!1!==Gn.clearWhenEmpty)return Gn;if(Gn.replacedWith&&(Gn.collapsed=!0,Gn.widgetNode=A("span",[Gn.replacedWith],"CodeMirror-widget"),$t.handleMouseEvents||Gn.widgetNode.setAttribute("cm-ignore-events","true"),$t.insertLeft&&(Gn.widgetNode.insertLeft=!0)),Gn.collapsed){if(It(xt,Ct.line,Ct,_t,Gn)||Ct.line!=_t.line&&It(xt,_t.line,Ct,_t,Gn))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ss=!0}Gn.addToHistory&&Ii(xt,{from:Ct,to:_t,origin:"markText"},xt.sel,NaN);var lr,Fr=Ct.line,Hr=xt.cm;if(xt.iter(Fr,_t.line+1,(function($t){Hr&&Gn.collapsed&&!Hr.options.lineWrapping&&Rt($t)==Hr.display.maxLine&&(lr=!0),Gn.collapsed&&Fr!=Ct.line&&_e($t,0),function(xt,Ct,_t){var $t=_t&&window.WeakSet&&(_t.markedSpans||(_t.markedSpans=new WeakSet));$t&&$t.has(xt.markedSpans)?xt.markedSpans.push(Ct):(xt.markedSpans=xt.markedSpans?xt.markedSpans.concat([Ct]):[Ct],$t&&$t.add(xt.markedSpans)),Ct.marker.attachLine(xt)}($t,new St(Gn,Fr==Ct.line?Ct.ch:null,Fr==_t.line?_t.ch:null),xt.cm&&xt.cm.curOp),++Fr})),Gn.collapsed&&xt.iter(Ct.line,_t.line+1,(function(Ct){Gt(xt,Ct)&&_e(Ct,0)})),Gn.clearOnEnter&&fe(Gn,"beforeCursorEnter",(function(){return Gn.clear()})),Gn.readOnly&&(Cs=!0,(xt.history.done.length||xt.history.undone.length)&&xt.clearHistory()),Gn.collapsed&&(Gn.id=++Ls,Gn.atomic=!0),Hr){if(lr&&(Hr.curOp.updateMaxLine=!0),Gn.collapsed)un(Hr,Ct.line,_t.line+1);else if(Gn.className||Gn.startStyle||Gn.endStyle||Gn.css||Gn.attributes||Gn.title)for(var xo=Ct.line;xo<=_t.line;xo++)cn(Hr,xo,"text");Gn.atomic&&Ji(Hr.doc),sr(Hr,"markerAdded",Hr,Gn)}return Gn}Co.prototype.clear=function(){if(!this.explicitlyCleared){var xt=this.doc.cm,Ct=xt&&!xt.curOp;if(Ct&&Kn(xt),ye(this,"clear")){var _t=this.find();_t&&sr(this,"clear",_t.from,_t.to)}for(var $t=null,Vn=null,Gn=0;Gn<this.lines.length;++Gn){var or=this.lines[Gn],lr=Lt(or.markedSpans,this);xt&&!this.collapsed?cn(xt,qe(or),"text"):xt&&(null!=lr.to&&(Vn=qe(or)),null!=lr.from&&($t=qe(or))),or.markedSpans=kt(or.markedSpans,lr),null==lr.from&&this.collapsed&&!Gt(this.doc,or)&&xt&&_e(or,en(xt.display))}if(xt&&this.collapsed&&!xt.options.lineWrapping)for(var Fr=0;Fr<this.lines.length;++Fr){var Hr=Rt(this.lines[Fr]),xo=Kt(Hr);xo>xt.display.maxLineLength&&(xt.display.maxLine=Hr,xt.display.maxLineLength=xo,xt.display.maxLineChanged=!0)}null!=$t&&xt&&this.collapsed&&un(xt,$t,Vn+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,xt&&Ji(xt.doc)),xt&&sr(xt,"markerCleared",xt,this,$t,Vn),Ct&&jn(xt),this.parent&&this.parent.clear()}},Co.prototype.find=function(xt,Ct){var _t,$t;null==xt&&"bookmark"==this.type&&(xt=1);for(var Vn=0;Vn<this.lines.length;++Vn){var Gn=this.lines[Vn],or=Lt(Gn.markedSpans,this);if(null!=or.from&&(_t=et(Ct?Gn:qe(Gn),or.from),-1==xt))return _t;if(null!=or.to&&($t=et(Ct?Gn:qe(Gn),or.to),1==xt))return $t}return _t&&{from:_t,to:$t}},Co.prototype.changed=function(){var xt=this,Ct=this.find(-1,!0),_t=this,$t=this.doc.cm;Ct&&$t&&qn($t,(function(){var Vn=Ct.line,Gn=qe(Ct.line),or=Ar($t,Gn);if(or&&(Ir(or),$t.curOp.selectionChanged=$t.curOp.forceUpdate=!0),$t.curOp.updateMaxLine=!0,!Gt(_t.doc,Vn)&&null!=_t.height){var lr=_t.height;_t.height=null;var Fr=wr(_t)-lr;Fr&&_e(Vn,Vn.height+Fr)}sr($t,"markerChanged",$t,xt)}))},Co.prototype.attachLine=function(xt){if(!this.lines.length&&this.doc.cm){var Ct=this.doc.cm.curOp;Ct.maybeHiddenMarkers&&-1!=B(Ct.maybeHiddenMarkers,this)||(Ct.maybeUnhiddenMarkers||(Ct.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(xt)},Co.prototype.detachLine=function(xt){if(this.lines.splice(B(this.lines,xt),1),!this.lines.length&&this.doc.cm){var Ct=this.doc.cm.curOp;(Ct.maybeHiddenMarkers||(Ct.maybeHiddenMarkers=[])).push(this)}},be(Co);var Lo=function(xt,Ct){this.markers=xt,this.primary=Ct;for(var _t=0;_t<xt.length;++_t)xt[_t].parent=this};function ko(xt){return xt.findMarks(et(xt.first,0),xt.clipPos(et(xt.lastLine())),(function(xt){return xt.parent}))}function To(xt){for(var t=function(Ct){var _t=xt[Ct],$t=[_t.primary.doc];Di(_t.primary.doc,(function(xt){return $t.push(xt)}));for(var Vn=0;Vn<_t.markers.length;Vn++){var Gn=_t.markers[Vn];-1==B($t,Gn.doc)&&(Gn.parent=null,_t.markers.splice(Vn--,1))}},Ct=0;Ct<xt.length;Ct++)t(Ct)}Lo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var xt=0;xt<this.markers.length;++xt)this.markers[xt].clear();sr(this,"clear")}},Lo.prototype.find=function(xt,Ct){return this.primary.find(xt,Ct)},be(Lo);var Is=0,No=function(xt,Ct,_t,$t,Vn){if(!(this instanceof No))return new No(xt,Ct,_t,$t,Vn);null==_t&&(_t=0),yo.call(this,[new mo([new Xt("",null)])]),this.first=_t,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=_t;var Gn=et(_t,0);this.sel=Ci(Gn),this.history=new Fi(null),this.id=++Is,this.modeOption=Ct,this.lineSep=$t,this.direction="rtl"==Vn?"rtl":"ltr",this.extend=!1,"string"==typeof xt&&(xt=this.splitLines(xt)),Ai(this,{from:Gn,to:Gn,text:xt}),qi(this,Ci(Gn),is)};No.prototype=Q(yo.prototype,{constructor:No,iter:function(xt,Ct,_t){_t?this.iterN(xt-this.first,Ct-xt,_t):this.iterN(this.first,this.first+this.size,xt)},insert:function(xt,Ct){for(var _t=0,$t=0;$t<Ct.length;++$t)_t+=Ct[$t].height;this.insertInner(xt-this.first,Ct,_t)},remove:function(xt,Ct){this.removeInner(xt-this.first,Ct)},getValue:function(xt){var Ct=$e(this,this.first,this.first+this.size);return!1===xt?Ct:Ct.join(xt||this.lineSeparator())},setValue:Jn((function(xt){var Ct=et(this.first,0),_t=this.first+this.size-1;lo(this,{from:Ct,to:et(_t,Xe(this,_t).text.length),text:this.splitLines(xt),origin:"setValue",full:!0},!0),this.cm&&An(this.cm,0,0),qi(this,Ci(Ct),is)})),replaceRange:function(xt,Ct,_t,$t){ho(this,xt,Ct=st(this,Ct),_t=_t?st(this,_t):Ct,$t)},getRange:function(xt,Ct,_t){var $t=Ye(this,st(this,xt),st(this,Ct));return!1===_t?$t:""===_t?$t.join(""):$t.join(_t||this.lineSeparator())},getLine:function(xt){var Ct=this.getLineHandle(xt);return Ct&&Ct.text},getLineHandle:function(xt){if(Qe(this,xt))return Xe(this,xt)},getLineNumber:function(xt){return qe(xt)},getLineHandleVisualStart:function(xt){return"number"==typeof xt&&(xt=Xe(this,xt)),Rt(xt)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(xt){return st(this,xt)},getCursor:function(xt){var Ct=this.sel.primary();return null==xt||"head"==xt?Ct.head:"anchor"==xt?Ct.anchor:"end"==xt||"to"==xt||!1===xt?Ct.to():Ct.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Jn((function(xt,Ct,_t){$i(this,st(this,"number"==typeof xt?et(xt,Ct||0):xt),null,_t)})),setSelection:Jn((function(xt,Ct,_t){$i(this,st(this,xt),st(this,Ct||xt),_t)})),extendSelection:Jn((function(xt,Ct,_t){ji(this,st(this,xt),Ct&&st(this,Ct),_t)})),extendSelections:Jn((function(xt,Ct){Xi(this,at(this,xt),Ct)})),extendSelectionsBy:Jn((function(xt,Ct){Xi(this,at(this,q(this.sel.ranges,xt)),Ct)})),setSelections:Jn((function(xt,Ct,_t){if(xt.length){for(var $t=[],Vn=0;Vn<xt.length;Vn++)$t[Vn]=new wi(st(this,xt[Vn].anchor),st(this,xt[Vn].head||xt[Vn].anchor));null==Ct&&(Ct=Math.min(xt.length-1,this.sel.primIndex)),qi(this,xi(this.cm,$t,Ct),_t)}})),addSelection:Jn((function(xt,Ct,_t){var $t=this.sel.ranges.slice(0);$t.push(new wi(st(this,xt),st(this,Ct||xt))),qi(this,xi(this.cm,$t,$t.length-1),_t)})),getSelection:function(xt){for(var Ct,_t=this.sel.ranges,$t=0;$t<_t.length;$t++){var Vn=Ye(this,_t[$t].from(),_t[$t].to());Ct=Ct?Ct.concat(Vn):Vn}return!1===xt?Ct:Ct.join(xt||this.lineSeparator())},getSelections:function(xt){for(var Ct=[],_t=this.sel.ranges,$t=0;$t<_t.length;$t++){var Vn=Ye(this,_t[$t].from(),_t[$t].to());!1!==xt&&(Vn=Vn.join(xt||this.lineSeparator())),Ct[$t]=Vn}return Ct},replaceSelection:function(xt,Ct,_t){for(var $t=[],Vn=0;Vn<this.sel.ranges.length;Vn++)$t[Vn]=xt;this.replaceSelections($t,Ct,_t||"+input")},replaceSelections:Jn((function(xt,Ct,_t){for(var $t=[],Vn=this.sel,Gn=0;Gn<Vn.ranges.length;Gn++){var or=Vn.ranges[Gn];$t[Gn]={from:or.from(),to:or.to(),text:this.splitLines(xt[Gn]),origin:_t}}for(var lr=Ct&&"end"!=Ct&&function(xt,Ct,_t){for(var $t=[],Vn=et(xt.first,0),Gn=Vn,or=0;or<Ct.length;or++){var lr=Ct[or],Fr=Ti(lr.from,Vn,Gn),Hr=Ti(Si(lr),Vn,Gn);if(Vn=lr.to,Gn=Hr,"around"==_t){var xo=xt.sel.ranges[or],Eo=tt(xo.head,xo.anchor)<0;$t[or]=new wi(Eo?Hr:Fr,Eo?Fr:Hr)}else $t[or]=new wi(Fr,Fr)}return new bi($t,xt.sel.primIndex)}(this,$t,Ct),Fr=$t.length-1;Fr>=0;Fr--)lo(this,$t[Fr]);lr?_i(this,lr):this.cm&&On(this.cm)})),undo:Jn((function(){ao(this,"undo")})),redo:Jn((function(){ao(this,"redo")})),undoSelection:Jn((function(){ao(this,"undo",!0)})),redoSelection:Jn((function(){ao(this,"redo",!0)})),setExtending:function(xt){this.extend=xt},getExtending:function(){return this.extend},historySize:function(){for(var xt=this.history,Ct=0,_t=0,$t=0;$t<xt.done.length;$t++)xt.done[$t].ranges||++Ct;for(var Vn=0;Vn<xt.undone.length;Vn++)xt.undone[Vn].ranges||++_t;return{undo:Ct,redo:_t}},clearHistory:function(){var xt=this;this.history=new Fi(this.history),Di(this,(function(Ct){return Ct.history=xt.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(xt){return xt&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(xt){return this.history.generation==(xt||this.cleanGeneration)},getHistory:function(){return{done:Vi(this.history.done),undone:Vi(this.history.undone)}},setHistory:function(xt){var Ct=this.history=new Fi(this.history);Ct.done=Vi(xt.done.slice(0),null,!0),Ct.undone=Vi(xt.undone.slice(0),null,!0)},setGutterMarker:Jn((function(xt,Ct,_t){return vo(this,xt,"gutter",(function(xt){var $t=xt.gutterMarkers||(xt.gutterMarkers={});return $t[Ct]=_t,!_t&&re($t)&&(xt.gutterMarkers=null),!0}))})),clearGutter:Jn((function(xt){var Ct=this;this.iter((function(_t){_t.gutterMarkers&&_t.gutterMarkers[xt]&&vo(Ct,_t,"gutter",(function(){return _t.gutterMarkers[xt]=null,re(_t.gutterMarkers)&&(_t.gutterMarkers=null),!0}))}))})),lineInfo:function(xt){var Ct;if("number"==typeof xt){if(!Qe(this,xt))return null;if(Ct=xt,!(xt=Xe(this,xt)))return null}else if(null==(Ct=qe(xt)))return null;return{line:Ct,handle:xt,text:xt.text,gutterMarkers:xt.gutterMarkers,textClass:xt.textClass,bgClass:xt.bgClass,wrapClass:xt.wrapClass,widgets:xt.widgets}},addLineClass:Jn((function(xt,Ct,_t){return vo(this,xt,"gutter"==Ct?"gutter":"class",(function(xt){var $t="text"==Ct?"textClass":"background"==Ct?"bgClass":"gutter"==Ct?"gutterClass":"wrapClass";if(xt[$t]){if(L(_t).test(xt[$t]))return!1;xt[$t]+=" "+_t}else xt[$t]=_t;return!0}))})),removeLineClass:Jn((function(xt,Ct,_t){return vo(this,xt,"gutter"==Ct?"gutter":"class",(function(xt){var $t="text"==Ct?"textClass":"background"==Ct?"bgClass":"gutter"==Ct?"gutterClass":"wrapClass",Vn=xt[$t];if(!Vn)return!1;if(null==_t)xt[$t]=null;else{var Gn=Vn.match(L(_t));if(!Gn)return!1;var or=Gn.index+Gn[0].length;xt[$t]=Vn.slice(0,Gn.index)+(Gn.index&&or!=Vn.length?" ":"")+Vn.slice(or)||null}return!0}))})),addLineWidget:Jn((function(xt,Ct,_t){return function(xt,Ct,_t,$t){var Vn=new bo(xt,_t,$t),Gn=xt.cm;return Gn&&Vn.noHScroll&&(Gn.display.alignWidgets=!0),vo(xt,Ct,"widget",(function(Ct){var _t=Ct.widgets||(Ct.widgets=[]);if(null==Vn.insertAt?_t.push(Vn):_t.splice(Math.min(_t.length,Math.max(0,Vn.insertAt)),0,Vn),Vn.line=Ct,Gn&&!Gt(xt,Ct)){var $t=Vt(Ct)<xt.scrollTop;_e(Ct,Ct.height+wr(Vn)),$t&&Nn(Gn,Vn.height),Gn.curOp.forceUpdate=!0}return!0})),Gn&&sr(Gn,"lineWidgetAdded",Gn,Vn,"number"==typeof Ct?Ct:qe(Ct)),Vn}(this,xt,Ct,_t)})),removeLineWidget:function(xt){xt.clear()},markText:function(xt,Ct,_t){return So(this,st(this,xt),st(this,Ct),_t,_t&&_t.type||"range")},setBookmark:function(xt,Ct){var _t={replacedWith:Ct&&(null==Ct.nodeType?Ct.widget:Ct),insertLeft:Ct&&Ct.insertLeft,clearWhenEmpty:!1,shared:Ct&&Ct.shared,handleMouseEvents:Ct&&Ct.handleMouseEvents};return So(this,xt=st(this,xt),xt,_t,"bookmark")},findMarksAt:function(xt){var Ct=[],_t=Xe(this,(xt=st(this,xt)).line).markedSpans;if(_t)for(var $t=0;$t<_t.length;++$t){var Vn=_t[$t];(null==Vn.from||Vn.from<=xt.ch)&&(null==Vn.to||Vn.to>=xt.ch)&&Ct.push(Vn.marker.parent||Vn.marker)}return Ct},findMarks:function(xt,Ct,_t){xt=st(this,xt),Ct=st(this,Ct);var $t=[],Vn=xt.line;return this.iter(xt.line,Ct.line+1,(function(Gn){var or=Gn.markedSpans;if(or)for(var lr=0;lr<or.length;lr++){var Fr=or[lr];null!=Fr.to&&Vn==xt.line&&xt.ch>=Fr.to||null==Fr.from&&Vn!=xt.line||null!=Fr.from&&Vn==Ct.line&&Fr.from>=Ct.ch||_t&&!_t(Fr.marker)||$t.push(Fr.marker.parent||Fr.marker)}++Vn})),$t},getAllMarks:function(){var xt=[];return this.iter((function(Ct){var _t=Ct.markedSpans;if(_t)for(var $t=0;$t<_t.length;++$t)null!=_t[$t].from&&xt.push(_t[$t].marker)})),xt},posFromIndex:function(xt){var Ct,_t=this.first,$t=this.lineSeparator().length;return this.iter((function(Vn){var Gn=Vn.text.length+$t;if(Gn>xt)return Ct=xt,!0;xt-=Gn,++_t})),st(this,et(_t,Ct))},indexFromPos:function(xt){var Ct=(xt=st(this,xt)).ch;if(xt.line<this.first||xt.ch<0)return 0;var _t=this.lineSeparator().length;return this.iter(this.first,xt.line,(function(xt){Ct+=xt.text.length+_t})),Ct},copy:function(xt){var Ct=new No($e(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return Ct.scrollTop=this.scrollTop,Ct.scrollLeft=this.scrollLeft,Ct.sel=this.sel,Ct.extend=!1,xt&&(Ct.history.undoDepth=this.history.undoDepth,Ct.setHistory(this.getHistory())),Ct},linkedDoc:function(xt){xt||(xt={});var Ct=this.first,_t=this.first+this.size;null!=xt.from&&xt.from>Ct&&(Ct=xt.from),null!=xt.to&&xt.to<_t&&(_t=xt.to);var $t=new No($e(this,Ct,_t),xt.mode||this.modeOption,Ct,this.lineSep,this.direction);return xt.sharedHist&&($t.history=this.history),(this.linked||(this.linked=[])).push({doc:$t,sharedHist:xt.sharedHist}),$t.linked=[{doc:this,isParent:!0,sharedHist:xt.sharedHist}],function(xt,Ct){for(var _t=0;_t<Ct.length;_t++){var $t=Ct[_t],Vn=$t.find(),Gn=xt.clipPos(Vn.from),or=xt.clipPos(Vn.to);if(tt(Gn,or)){var lr=So(xt,Gn,or,$t.primary,$t.primary.type);$t.markers.push(lr),lr.parent=$t}}}($t,ko(this)),$t},unlinkDoc:function(xt){if(xt instanceof Ll&&(xt=xt.doc),this.linked)for(var Ct=0;Ct<this.linked.length;++Ct)if(this.linked[Ct].doc==xt){this.linked.splice(Ct,1),xt.unlinkDoc(this),To(ko(this));break}if(xt.history==this.history){var _t=[xt.id];Di(xt,(function(xt){return _t.push(xt.id)}),!0),xt.history=new Fi(null),xt.history.done=Vi(this.history.done,_t),xt.history.undone=Vi(this.history.undone,_t)}},iterLinkedDocs:function(xt){Di(this,xt)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(xt){return this.lineSep?xt.split(this.lineSep):ys(xt)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Jn((function(xt){var Ct;"rtl"!=xt&&(xt="ltr"),xt!=this.direction&&(this.direction=xt,this.iter((function(xt){return xt.order=null})),this.cm&&qn(Ct=this.cm,(function(){Hi(Ct),un(Ct)})))}))}),No.prototype.eachLine=No.prototype.iter;var Bs=0;function Ao(xt){var Ct=this;if(Do(Ct),!ve(Ct,xt)&&!xr(Ct.display,xt)){we(xt),or&&(Bs=+new Date);var _t=sn(Ct,xt,!0),$t=xt.dataTransfer.files;if(_t&&!Ct.isReadOnly())if($t&&$t.length&&window.FileReader&&window.File)for(var Vn=$t.length,Gn=Array(Vn),lr=0,a=function(){++lr==Vn&&Zn(Ct,(function(){var xt={from:_t=st(Ct.doc,_t),to:_t,text:Ct.doc.splitLines(Gn.filter((function(xt){return null!=xt})).join(Ct.doc.lineSeparator())),origin:"paste"};lo(Ct.doc,xt),_i(Ct.doc,Ci(st(Ct.doc,_t),st(Ct.doc,Si(xt))))}))()},u=function(xt,_t){if(Ct.options.allowDropFileTypes&&-1==B(Ct.options.allowDropFileTypes,xt.type))a();else{var $t=new FileReader;$t.onerror=function(){return a()},$t.onload=function(){var xt=$t.result;/[\x00-\x08\x0e-\x1f]{2}/.test(xt)||(Gn[_t]=xt),a()},$t.readAsText(xt)}},Fr=0;Fr<$t.length;Fr++)u($t[Fr],Fr);else{if(Ct.state.draggingText&&Ct.doc.sel.contains(_t)>-1)return Ct.state.draggingText(xt),void setTimeout((function(){return Ct.display.input.focus()}),20);try{var Hr=xt.dataTransfer.getData("Text");if(Hr){var xo;if(Ct.state.draggingText&&!Ct.state.draggingText.copy&&(xo=Ct.listSelections()),Zi(Ct.doc,Ci(_t,_t)),xo)for(var Eo=0;Eo<xo.length;++Eo)ho(Ct.doc,"",xo[Eo].anchor,xo[Eo].head,"drag");Ct.replaceSelection(Hr,"around","paste"),Ct.display.input.focus()}}catch(xt){}}}}function Do(xt){xt.display.dragCursor&&(xt.display.lineSpace.removeChild(xt.display.dragCursor),xt.display.dragCursor=null)}function Wo(xt){if(document.getElementsByClassName){for(var Ct=document.getElementsByClassName("CodeMirror"),_t=[],$t=0;$t<Ct.length;$t++){var Vn=Ct[$t].CodeMirror;Vn&&_t.push(Vn)}_t.length&&_t[0].operation((function(){for(var Ct=0;Ct<_t.length;Ct++)xt(_t[Ct])}))}}var $s=!1;function Po(xt){var Ct=xt.display;Ct.cachedCharWidth=Ct.cachedTextHeight=Ct.cachedPaddingH=null,Ct.scrollbarsClipped=!1,xt.setSize()}for(var zs={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ws=0;Ws<10;Ws++)zs[Ws+48]=zs[Ws+96]=String(Ws);for(var Vs=65;Vs<=90;Vs++)zs[Vs]=String.fromCharCode(Vs);for(var Us=1;Us<=12;Us++)zs[Us+111]=zs[Us+63235]="F"+Us;var qs={};function Go(xt){var Ct,_t,$t,Vn,Gn=xt.split(/-(?!$)/);xt=Gn[Gn.length-1];for(var or=0;or<Gn.length-1;or++){var lr=Gn[or];if(/^(cmd|meta|m)$/i.test(lr))Vn=!0;else if(/^a(lt)?$/i.test(lr))Ct=!0;else if(/^(c|ctrl|control)$/i.test(lr))_t=!0;else{if(!/^s(hift)?$/i.test(lr))throw new Error("Unrecognized modifier name: "+lr);$t=!0}}return Ct&&(xt="Alt-"+xt),_t&&(xt="Ctrl-"+xt),Vn&&(xt="Cmd-"+xt),$t&&(xt="Shift-"+xt),xt}function Uo(xt){var Ct={};for(var _t in xt)if(xt.hasOwnProperty(_t)){var $t=xt[_t];if(/^(name|fallthrough|(de|at)tach)$/.test(_t))continue;if("..."==$t){delete xt[_t];continue}for(var Vn=q(_t.split(" "),Go),Gn=0;Gn<Vn.length;Gn++){var or=void 0,lr=void 0;Gn==Vn.length-1?(lr=Vn.join(" "),or=$t):(lr=Vn.slice(0,Gn+1).join(" "),or="...");var Fr=Ct[lr];if(Fr){if(Fr!=or)throw new Error("Inconsistent bindings for "+lr)}else Ct[lr]=or}delete xt[_t]}for(var Hr in Ct)xt[Hr]=Ct[Hr];return xt}function Vo(xt,Ct,_t,$t){var Vn=(Ct=Yo(Ct)).call?Ct.call(xt,$t):Ct[xt];if(!1===Vn)return"nothing";if("..."===Vn)return"multi";if(null!=Vn&&_t(Vn))return"handled";if(Ct.fallthrough){if("[object Array]"!=Object.prototype.toString.call(Ct.fallthrough))return Vo(xt,Ct.fallthrough,_t,$t);for(var Gn=0;Gn<Ct.fallthrough.length;Gn++){var or=Vo(xt,Ct.fallthrough[Gn],_t,$t);if(or)return or}}}function Ko(xt){var Ct="string"==typeof xt?xt:zs[xt.keyCode];return"Ctrl"==Ct||"Alt"==Ct||"Shift"==Ct||"Mod"==Ct}function jo(xt,Ct,_t){var $t=xt;return Ct.altKey&&"Alt"!=$t&&(xt="Alt-"+xt),(es?Ct.metaKey:Ct.ctrlKey)&&"Ctrl"!=$t&&(xt="Ctrl-"+xt),(es?Ct.ctrlKey:Ct.metaKey)&&"Mod"!=$t&&(xt="Cmd-"+xt),!_t&&Ct.shiftKey&&"Shift"!=$t&&(xt="Shift-"+xt),xt}function Xo(xt,Ct){if(Eo&&34==xt.keyCode&&xt.char)return!1;var _t=zs[xt.keyCode];return null!=_t&&!xt.altGraphKey&&(3==xt.keyCode&&xt.code&&(_t=xt.code),jo(_t,xt,Ct))}function Yo(xt){return"string"==typeof xt?qs[xt]:xt}function $o(xt,Ct){for(var _t=xt.doc.sel.ranges,$t=[],Vn=0;Vn<_t.length;Vn++){for(var Gn=Ct(_t[Vn]);$t.length&&tt(Gn.from,_($t).to)<=0;){var or=$t.pop();if(tt(or.from,Gn.from)<0){Gn.from=or.from;break}}$t.push(Gn)}qn(xt,(function(){for(var Ct=$t.length-1;Ct>=0;Ct--)ho(xt.doc,"",$t[Ct].from,$t[Ct].to,"+delete");On(xt)}))}function _o(xt,Ct,_t){var $t=oe(xt.text,Ct+_t,_t);return $t<0||$t>xt.text.length?null:$t}function qo(xt,Ct,_t){var $t=_o(xt,Ct.ch,_t);return null==$t?null:new et(Ct.line,$t,_t<0?"after":"before")}function Zo(xt,Ct,_t,$t,Vn){if(xt){"rtl"==Ct.doc.direction&&(Vn=-Vn);var Gn=ce(_t,Ct.doc.direction);if(Gn){var or,lr=Vn<0?_(Gn):Gn[0],Fr=Vn<0==(1==lr.level)?"after":"before";if(lr.level>0||"rtl"==Ct.doc.direction){var Hr=Dr(Ct,_t);or=Vn<0?_t.text.length-1:0;var xo=Wr(Ct,Hr,or).top;or=le((function(xt){return Wr(Ct,Hr,xt).top==xo}),Vn<0==(1==lr.level)?lr.from:lr.to-1,or),"before"==Fr&&(or=_o(_t,or,1))}else or=Vn<0?lr.to:lr.from;return new et($t,or,Fr)}}return new et($t,Vn<0?_t.text.length:0,Vn<0?"before":"after")}qs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},qs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},qs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},qs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},qs.default=Ho?qs.macDefault:qs.pcDefault;var Hs={selectAll:io,singleSelection:function(xt){return xt.setSelection(xt.getCursor("anchor"),xt.getCursor("head"),is)},killLine:function(xt){return $o(xt,(function(Ct){if(Ct.empty()){var _t=Xe(xt.doc,Ct.head.line).text.length;return Ct.head.ch==_t&&Ct.head.line<xt.lastLine()?{from:Ct.head,to:et(Ct.head.line+1,0)}:{from:Ct.head,to:et(Ct.head.line,_t)}}return{from:Ct.from(),to:Ct.to()}}))},deleteLine:function(xt){return $o(xt,(function(Ct){return{from:et(Ct.from().line,0),to:st(xt.doc,et(Ct.to().line+1,0))}}))},delLineLeft:function(xt){return $o(xt,(function(xt){return{from:et(xt.from().line,0),to:xt.from()}}))},delWrappedLineLeft:function(xt){return $o(xt,(function(Ct){var _t=xt.charCoords(Ct.head,"div").top+5;return{from:xt.coordsChar({left:0,top:_t},"div"),to:Ct.from()}}))},delWrappedLineRight:function(xt){return $o(xt,(function(Ct){var _t=xt.charCoords(Ct.head,"div").top+5,$t=xt.coordsChar({left:xt.display.lineDiv.offsetWidth+100,top:_t},"div");return{from:Ct.from(),to:$t}}))},undo:function(xt){return xt.undo()},redo:function(xt){return xt.redo()},undoSelection:function(xt){return xt.undoSelection()},redoSelection:function(xt){return xt.redoSelection()},goDocStart:function(xt){return xt.extendSelection(et(xt.firstLine(),0))},goDocEnd:function(xt){return xt.extendSelection(et(xt.lastLine()))},goLineStart:function(xt){return xt.extendSelectionsBy((function(Ct){return Jo(xt,Ct.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(xt){return xt.extendSelectionsBy((function(Ct){return el(xt,Ct.head)}),{origin:"+move",bias:1})},goLineEnd:function(xt){return xt.extendSelectionsBy((function(Ct){return function(xt,Ct){var _t=Xe(xt.doc,Ct),$t=function(xt){for(var Ct;Ct=Pt(xt);)xt=Ct.find(1,!0).line;return xt}(_t);return $t!=_t&&(Ct=qe($t)),Zo(!0,xt,_t,Ct,-1)}(xt,Ct.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(xt){return xt.extendSelectionsBy((function(Ct){var _t=xt.cursorCoords(Ct.head,"div").top+5;return xt.coordsChar({left:xt.display.lineDiv.offsetWidth+100,top:_t},"div")}),as)},goLineLeft:function(xt){return xt.extendSelectionsBy((function(Ct){var _t=xt.cursorCoords(Ct.head,"div").top+5;return xt.coordsChar({left:0,top:_t},"div")}),as)},goLineLeftSmart:function(xt){return xt.extendSelectionsBy((function(Ct){var _t=xt.cursorCoords(Ct.head,"div").top+5,$t=xt.coordsChar({left:0,top:_t},"div");return $t.ch<xt.getLine($t.line).search(/\S/)?el(xt,Ct.head):$t}),as)},goLineUp:function(xt){return xt.moveV(-1,"line")},goLineDown:function(xt){return xt.moveV(1,"line")},goPageUp:function(xt){return xt.moveV(-1,"page")},goPageDown:function(xt){return xt.moveV(1,"page")},goCharLeft:function(xt){return xt.moveH(-1,"char")},goCharRight:function(xt){return xt.moveH(1,"char")},goColumnLeft:function(xt){return xt.moveH(-1,"column")},goColumnRight:function(xt){return xt.moveH(1,"column")},goWordLeft:function(xt){return xt.moveH(-1,"word")},goGroupRight:function(xt){return xt.moveH(1,"group")},goGroupLeft:function(xt){return xt.moveH(-1,"group")},goWordRight:function(xt){return xt.moveH(1,"word")},delCharBefore:function(xt){return xt.deleteH(-1,"codepoint")},delCharAfter:function(xt){return xt.deleteH(1,"char")},delWordBefore:function(xt){return xt.deleteH(-1,"word")},delWordAfter:function(xt){return xt.deleteH(1,"word")},delGroupBefore:function(xt){return xt.deleteH(-1,"group")},delGroupAfter:function(xt){return xt.deleteH(1,"group")},indentAuto:function(xt){return xt.indentSelection("smart")},indentMore:function(xt){return xt.indentSelection("add")},indentLess:function(xt){return xt.indentSelection("subtract")},insertTab:function(xt){return xt.replaceSelection("\t")},insertSoftTab:function(xt){for(var Ct=[],_t=xt.listSelections(),$t=xt.options.tabSize,Vn=0;Vn<_t.length;Vn++){var Gn=_t[Vn].from(),or=R(xt.getLine(Gn.line),Gn.ch,$t);Ct.push($($t-or%$t))}xt.replaceSelections(Ct)},defaultTab:function(xt){xt.somethingSelected()?xt.indentSelection("add"):xt.execCommand("insertTab")},transposeChars:function(xt){return qn(xt,(function(){for(var Ct=xt.listSelections(),_t=[],$t=0;$t<Ct.length;$t++)if(Ct[$t].empty()){var Vn=Ct[$t].head,Gn=Xe(xt.doc,Vn.line).text;if(Gn)if(Vn.ch==Gn.length&&(Vn=new et(Vn.line,Vn.ch-1)),Vn.ch>0)Vn=new et(Vn.line,Vn.ch+1),xt.replaceRange(Gn.charAt(Vn.ch-1)+Gn.charAt(Vn.ch-2),et(Vn.line,Vn.ch-2),Vn,"+transpose");else if(Vn.line>xt.doc.first){var or=Xe(xt.doc,Vn.line-1).text;or&&(Vn=new et(Vn.line,1),xt.replaceRange(Gn.charAt(0)+xt.doc.lineSeparator()+or.charAt(or.length-1),et(Vn.line-1,or.length-1),Vn,"+transpose"))}_t.push(new wi(Vn,Vn))}xt.setSelections(_t)}))},newlineAndIndent:function(xt){return qn(xt,(function(){for(var Ct=xt.listSelections(),_t=Ct.length-1;_t>=0;_t--)xt.replaceRange(xt.doc.lineSeparator(),Ct[_t].anchor,Ct[_t].head,"+input");Ct=xt.listSelections();for(var $t=0;$t<Ct.length;$t++)xt.indentLine(Ct[$t].from().line,null,!0);On(xt)}))},openLine:function(xt){return xt.replaceSelection("\n","start")},toggleOverwrite:function(xt){return xt.toggleOverwrite()}};function Jo(xt,Ct){var _t=Xe(xt.doc,Ct),$t=Rt(_t);return $t!=_t&&(Ct=qe($t)),Zo(!0,xt,$t,Ct,1)}function el(xt,Ct){var _t=Jo(xt,Ct.line),$t=Xe(xt.doc,_t.line),Vn=ce($t,xt.doc.direction);if(!Vn||0==Vn[0].level){var Gn=Math.max(_t.ch,$t.text.search(/\S/)),or=Ct.line==_t.line&&Ct.ch<=Gn&&Ct.ch;return et(_t.line,or?0:Gn,_t.sticky)}return _t}function tl(xt,Ct,_t){if("string"==typeof Ct&&!(Ct=Hs[Ct]))return!1;xt.display.input.ensurePolled();var $t=xt.display.shift,Vn=!1;try{xt.isReadOnly()&&(xt.state.suppressEdits=!0),_t&&(xt.display.shift=!1),Vn=Ct(xt)!=os}finally{xt.display.shift=$t,xt.state.suppressEdits=!1}return Vn}var Gs=new z;function nl(xt,Ct,_t,$t){var Vn=xt.state.keySeq;if(Vn){if(Ko(Ct))return"handled";if(/\'$/.test(Ct)?xt.state.keySeq=null:Gs.set(50,(function(){xt.state.keySeq==Vn&&(xt.state.keySeq=null,xt.display.input.reset())})),il(xt,Vn+" "+Ct,_t,$t))return!0}return il(xt,Ct,_t,$t)}function il(xt,Ct,_t,$t){var Vn=function(xt,Ct,_t){for(var $t=0;$t<xt.state.keyMaps.length;$t++){var Vn=Vo(Ct,xt.state.keyMaps[$t],_t,xt);if(Vn)return Vn}return xt.options.extraKeys&&Vo(Ct,xt.options.extraKeys,_t,xt)||Vo(Ct,xt.options.keyMap,_t,xt)}(xt,Ct,$t);return"multi"==Vn&&(xt.state.keySeq=Ct),"handled"==Vn&&sr(xt,"keyHandled",xt,Ct,_t),"handled"!=Vn&&"multi"!=Vn||(we(_t),bn(xt)),!!Vn}function ol(xt,Ct){var _t=Xo(Ct,!0);return!!_t&&(Ct.shiftKey&&!xt.state.keySeq?nl(xt,"Shift-"+_t,Ct,(function(Ct){return tl(xt,Ct,!0)}))||nl(xt,_t,Ct,(function(Ct){if("string"==typeof Ct?/^go[A-Z]/.test(Ct):Ct.motion)return tl(xt,Ct)})):nl(xt,_t,Ct,(function(Ct){return tl(xt,Ct)})))}var Xs=null;function sl(xt){var Ct=this;if(!(xt.target&&xt.target!=Ct.display.input.getField()||(Ct.curOp.focus=W(),ve(Ct,xt)))){or&&lr<11&&27==xt.keyCode&&(xt.returnValue=!1);var $t=xt.keyCode;Ct.display.shift=16==$t||xt.shiftKey;var Vn=ol(Ct,xt);Eo&&(Xs=Vn?$t:null,!Vn&&88==$t&&!xs&&(Ho?xt.metaKey:xt.ctrlKey)&&Ct.replaceSelection("",null,"cut")),_t&&!Ho&&!Vn&&46==$t&&xt.shiftKey&&!xt.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=$t||/\bCodeMirror-crosshair\b/.test(Ct.display.lineDiv.className)||function(xt){var Ct=xt.display.lineDiv;function r(xt){18!=xt.keyCode&&xt.altKey||(T(Ct,"CodeMirror-crosshair"),pe(document,"keyup",r),pe(document,"mouseover",r))}H(Ct,"CodeMirror-crosshair"),fe(document,"keyup",r),fe(document,"mouseover",r)}(Ct)}}function al(xt){16==xt.keyCode&&(this.doc.sel.shift=!1),ve(this,xt)}function ul(xt){var Ct=this;if(!(xt.target&&xt.target!=Ct.display.input.getField()||xr(Ct.display,xt)||ve(Ct,xt)||xt.ctrlKey&&!xt.altKey||Ho&&xt.metaKey)){var _t=xt.keyCode,$t=xt.charCode;if(Eo&&_t==Xs)return Xs=null,void we(xt);if(!Eo||xt.which&&!(xt.which<10)||!ol(Ct,xt)){var Vn=String.fromCharCode(null==$t?_t:$t);"\b"!=Vn&&(function(xt,Ct,_t){return nl(xt,"'"+_t+"'",Ct,(function(Ct){return tl(xt,Ct,!0)}))}(Ct,xt,Vn)||Ct.display.input.onKeyPress(xt))}}}var Ys,Zs,fl=function(xt,Ct,_t){this.time=xt,this.pos=Ct,this.button=_t};function dl(xt){var Ct=this,_t=Ct.display;if(!(ve(Ct,xt)||_t.activeTouch&&_t.input.supportsTouch()))if(_t.input.ensurePolled(),_t.shift=xt.shiftKey,xr(_t,xt))Fr||(_t.scroller.draggable=!1,setTimeout((function(){return _t.scroller.draggable=!0}),100));else if(!vl(Ct,xt)){var $t=sn(Ct,xt),Vn=ke(xt),Gn=$t?function(xt,Ct){var _t=+new Date;return Zs&&Zs.compare(_t,xt,Ct)?(Ys=Zs=null,"triple"):Ys&&Ys.compare(_t,xt,Ct)?(Zs=new fl(_t,xt,Ct),Ys=null,"double"):(Ys=new fl(_t,xt,Ct),Zs=null,"single")}($t,Vn):"single";window.focus(),1==Vn&&Ct.state.selectingText&&Ct.state.selectingText(xt),$t&&function(xt,Ct,_t,$t,Vn){var Gn="Click";return"double"==$t?Gn="Double"+Gn:"triple"==$t&&(Gn="Triple"+Gn),nl(xt,jo(Gn=(1==Ct?"Left":2==Ct?"Middle":"Right")+Gn,Vn),Vn,(function(Ct){if("string"==typeof Ct&&(Ct=Hs[Ct]),!Ct)return!1;var $t=!1;try{xt.isReadOnly()&&(xt.state.suppressEdits=!0),$t=Ct(xt,_t)!=os}finally{xt.state.suppressEdits=!1}return $t}))}(Ct,Vn,$t,Gn,xt)||(1==Vn?$t?function(xt,Ct,_t,$t){or?setTimeout(E(wn,xt),0):xt.curOp.focus=W();var Vn,Gn=function(xt,Ct,_t){var $t=xt.getOption("configureMouse"),Vn=$t?$t(xt,Ct,_t):{};if(null==Vn.unit){var Gn=Qo?_t.shiftKey&&_t.metaKey:_t.altKey;Vn.unit=Gn?"rectangle":"single"==Ct?"char":"double"==Ct?"word":"line"}return(null==Vn.extend||xt.doc.extend)&&(Vn.extend=xt.doc.extend||_t.shiftKey),null==Vn.addNew&&(Vn.addNew=Ho?_t.metaKey:_t.ctrlKey),null==Vn.moveOnDrag&&(Vn.moveOnDrag=!(Ho?_t.altKey:_t.ctrlKey)),Vn}(xt,_t,$t),Hr=xt.doc.sel;xt.options.dragDrop&&gs&&!xt.isReadOnly()&&"single"==_t&&(Vn=Hr.contains(Ct))>-1&&(tt((Vn=Hr.ranges[Vn]).from(),Ct)<0||Ct.xRel>0)&&(tt(Vn.to(),Ct)>0||Ct.xRel<0)?function(xt,Ct,_t,$t){var Vn=xt.display,Gn=!1,Hr=Zn(xt,(function(Ct){Fr&&(Vn.scroller.draggable=!1),xt.state.draggingText=!1,xt.state.delayingBlurEvent&&(xt.hasFocus()?xt.state.delayingBlurEvent=!1:xn(xt)),pe(Vn.wrapper.ownerDocument,"mouseup",Hr),pe(Vn.wrapper.ownerDocument,"mousemove",c),pe(Vn.scroller,"dragstart",h),pe(Vn.scroller,"drop",Hr),Gn||(we(Ct),$t.addNew||ji(xt.doc,_t,null,null,$t.extend),Fr&&!Mo||or&&9==lr?setTimeout((function(){Vn.wrapper.ownerDocument.body.focus({preventScroll:!0}),Vn.input.focus()}),20):Vn.input.focus())})),c=function(xt){Gn=Gn||Math.abs(Ct.clientX-xt.clientX)+Math.abs(Ct.clientY-xt.clientY)>=10},h=function(){return Gn=!0};Fr&&(Vn.scroller.draggable=!0),xt.state.draggingText=Hr,Hr.copy=!$t.moveOnDrag,fe(Vn.wrapper.ownerDocument,"mouseup",Hr),fe(Vn.wrapper.ownerDocument,"mousemove",c),fe(Vn.scroller,"dragstart",h),fe(Vn.scroller,"drop",Hr),xt.state.delayingBlurEvent=!0,setTimeout((function(){return Vn.input.focus()}),20),Vn.scroller.dragDrop&&Vn.scroller.dragDrop()}(xt,$t,Ct,Gn):function(xt,Ct,_t,$t){or&&xn(xt);var Vn=xt.display,Gn=xt.doc;we(Ct);var lr,Fr,Hr=Gn.sel,xo=Hr.ranges;if($t.addNew&&!$t.extend?(Fr=Gn.sel.contains(_t),lr=Fr>-1?xo[Fr]:new wi(_t,_t)):(lr=Gn.sel.primary(),Fr=Gn.sel.primIndex),"rectangle"==$t.unit)$t.addNew||(lr=new wi(_t,_t)),_t=sn(xt,Ct,!0,!0),Fr=-1;else{var Eo=pl(xt,_t,$t.unit);lr=$t.extend?Ki(lr,Eo.anchor,Eo.head,$t.extend):Eo}$t.addNew?-1==Fr?(Fr=xo.length,qi(Gn,xi(xt,xo.concat([lr]),Fr),{scroll:!1,origin:"*mouse"})):xo.length>1&&xo[Fr].empty()&&"char"==$t.unit&&!$t.extend?(qi(Gn,xi(xt,xo.slice(0,Fr).concat(xo.slice(Fr+1)),0),{scroll:!1,origin:"*mouse"}),Hr=Gn.sel):Yi(Gn,Fr,lr,ss):(Fr=0,qi(Gn,new bi([lr],0),ss),Hr=Gn.sel);var Mo=_t;function d(Ct){if(0!=tt(Mo,Ct))if(Mo=Ct,"rectangle"==$t.unit){for(var Vn=[],or=xt.options.tabSize,xo=R(Xe(Gn,_t.line).text,_t.ch,or),Eo=R(Xe(Gn,Ct.line).text,Ct.ch,or),Oo=Math.min(xo,Eo),Ro=Math.max(xo,Eo),Io=Math.min(_t.line,Ct.line),Bo=Math.min(xt.lastLine(),Math.max(_t.line,Ct.line));Io<=Bo;Io++){var zo=Xe(Gn,Io).text,Ho=X(zo,Oo,or);Oo==Ro?Vn.push(new wi(et(Io,Ho),et(Io,Ho))):zo.length>Ho&&Vn.push(new wi(et(Io,Ho),et(Io,X(zo,Ro,or))))}Vn.length||Vn.push(new wi(_t,_t)),qi(Gn,xi(xt,Hr.ranges.slice(0,Fr).concat(Vn),Fr),{origin:"*mouse",scroll:!1}),xt.scrollIntoView(Ct)}else{var Qo,pi=lr,gi=pl(xt,Ct,$t.unit),es=pi.anchor;tt(gi.anchor,es)>0?(Qo=gi.head,es=ot(pi.from(),gi.anchor)):(Qo=gi.anchor,es=it(pi.to(),gi.head));var ts=Hr.ranges.slice(0);ts[Fr]=function(xt,Ct){var _t=Ct.anchor,$t=Ct.head,Vn=Xe(xt.doc,_t.line);if(0==tt(_t,$t)&&_t.sticky==$t.sticky)return Ct;var Gn=ce(Vn);if(!Gn)return Ct;var or=ae(Gn,_t.ch,_t.sticky),lr=Gn[or];if(lr.from!=_t.ch&&lr.to!=_t.ch)return Ct;var Fr,Hr=or+(lr.from==_t.ch==(1!=lr.level)?0:1);if(0==Hr||Hr==Gn.length)return Ct;if($t.line!=_t.line)Fr=($t.line-_t.line)*("ltr"==xt.doc.direction?1:-1)>0;else{var xo=ae(Gn,$t.ch,$t.sticky),Eo=xo-or||($t.ch-_t.ch)*(1==lr.level?-1:1);Fr=xo==Hr-1||xo==Hr?Eo<0:Eo>0}var Mo=Gn[Hr+(Fr?-1:0)],Oo=Fr==(1==Mo.level),Ro=Oo?Mo.from:Mo.to,Io=Oo?"after":"before";return _t.ch==Ro&&_t.sticky==Io?Ct:new wi(new et(_t.line,Ro,Io),$t)}(xt,new wi(st(Gn,es),Qo)),qi(Gn,xi(xt,ts,Fr),ss)}}var Oo=Vn.wrapper.getBoundingClientRect(),Ro=0;function v(Ct){xt.state.selectingText=!1,Ro=1/0,Ct&&(we(Ct),Vn.input.focus()),pe(Vn.wrapper.ownerDocument,"mousemove",Io),pe(Vn.wrapper.ownerDocument,"mouseup",Bo),Gn.history.lastSelOrigin=null}var Io=Zn(xt,(function(Ct){0!==Ct.buttons&&ke(Ct)?function t(Ct){var _t=++Ro,or=sn(xt,Ct,!0,"rectangle"==$t.unit);if(or)if(0!=tt(or,Mo)){xt.curOp.focus=W(),d(or);var lr=Tn(Vn,Gn);(or.line>=lr.to||or.line<lr.from)&&setTimeout(Zn(xt,(function(){Ro==_t&&t(Ct)})),150)}else{var Fr=Ct.clientY<Oo.top?-20:Ct.clientY>Oo.bottom?20:0;Fr&&setTimeout(Zn(xt,(function(){Ro==_t&&(Vn.scroller.scrollTop+=Fr,t(Ct))})),50)}}(Ct):v(Ct)})),Bo=Zn(xt,v);xt.state.selectingText=Bo,fe(Vn.wrapper.ownerDocument,"mousemove",Io),fe(Vn.wrapper.ownerDocument,"mouseup",Bo)}(xt,$t,Ct,Gn)}(Ct,$t,Gn,xt):Le(xt)==_t.scroller&&we(xt):2==Vn?($t&&ji(Ct.doc,$t),setTimeout((function(){return _t.input.focus()}),20)):3==Vn&&(ts?Ct.display.input.onContextMenu(xt):xn(Ct)))}}function pl(xt,Ct,_t){if("char"==_t)return new wi(Ct,Ct);if("word"==_t)return xt.findWordAt(Ct);if("line"==_t)return new wi(et(Ct.line,0),st(xt.doc,et(Ct.line+1,0)));var $t=_t(xt,Ct);return new wi($t.from,$t.to)}function gl(xt,Ct,_t,$t){var Vn,Gn;if(Ct.touches)Vn=Ct.touches[0].clientX,Gn=Ct.touches[0].clientY;else try{Vn=Ct.clientX,Gn=Ct.clientY}catch(xt){return!1}if(Vn>=Math.floor(xt.display.gutters.getBoundingClientRect().right))return!1;$t&&we(Ct);var or=xt.display,lr=or.lineDiv.getBoundingClientRect();if(Gn>lr.bottom||!ye(xt,_t))return Ce(Ct);Gn-=lr.top-or.viewOffset;for(var Fr=0;Fr<xt.display.gutterSpecs.length;++Fr){var Hr=or.gutters.childNodes[Fr];if(Hr&&Hr.getBoundingClientRect().right>=Vn)return ge(xt,_t,xt,Ze(xt.doc,Gn),xt.display.gutterSpecs[Fr].className,Ct),Ce(Ct)}}function vl(xt,Ct){return gl(xt,Ct,"gutterClick",!0)}function ml(xt,Ct){xr(xt.display,Ct)||function(xt,Ct){return!!ye(xt,"gutterContextMenu")&&gl(xt,Ct,"gutterContextMenu",!1)}(xt,Ct)||ve(xt,Ct,"contextmenu")||ts||xt.display.input.onContextMenu(Ct)}function yl(xt){xt.display.wrapper.className=xt.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+xt.options.theme.replace(/(^|\s)\s*/g," cm-s-"),zr(xt)}fl.prototype.compare=function(xt,Ct,_t){return this.time+400>xt&&0==tt(Ct,this.pos)&&_t==this.button};var Ks={toString:function(){return"CodeMirror.Init"}},Js={},Qs={};function Cl(xt,Ct,_t){if(!Ct!=!(_t&&_t!=Ks)){var $t=xt.display.dragFunctions,Vn=Ct?fe:pe;Vn(xt.display.scroller,"dragstart",$t.start),Vn(xt.display.scroller,"dragenter",$t.enter),Vn(xt.display.scroller,"dragover",$t.over),Vn(xt.display.scroller,"dragleave",$t.leave),Vn(xt.display.scroller,"drop",$t.drop)}}function Sl(xt){xt.options.lineWrapping?(H(xt.display.wrapper,"CodeMirror-wrap"),xt.display.sizer.style.minWidth="",xt.display.sizerWidth=null):(T(xt.display.wrapper,"CodeMirror-wrap"),jt(xt)),ln(xt),un(xt),zr(xt),setTimeout((function(){return zn(xt)}),100)}function Ll(xt,Ct){var _t=this;if(!(this instanceof Ll))return new Ll(xt,Ct);this.options=Ct=Ct?I(Ct):{},I(Js,Ct,!1);var $t=Ct.value;"string"==typeof $t?$t=new No($t,Ct.mode,null,Ct.lineSeparator,Ct.direction):Ct.mode&&($t.modeOption=Ct.mode),this.doc=$t;var Vn=new Ll.inputStyles[Ct.inputStyle](this),Gn=this.display=new di(xt,$t,Vn,Ct);for(var Hr in Gn.wrapper.CodeMirror=this,yl(this),Ct.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Un(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new z,keySeq:null,specialChars:null},Ct.autofocus&&!zo&&Gn.input.focus(),or&&lr<11&&setTimeout((function(){return _t.display.input.reset(!0)}),20),function(xt){var Ct=xt.display;fe(Ct.scroller,"mousedown",Zn(xt,dl)),fe(Ct.scroller,"dblclick",or&&lr<11?Zn(xt,(function(Ct){if(!ve(xt,Ct)){var _t=sn(xt,Ct);if(_t&&!vl(xt,Ct)&&!xr(xt.display,Ct)){we(Ct);var $t=xt.findWordAt(_t);ji(xt.doc,$t.anchor,$t.head)}}})):function(Ct){return ve(xt,Ct)||we(Ct)}),fe(Ct.scroller,"contextmenu",(function(Ct){return ml(xt,Ct)})),fe(Ct.input.getField(),"contextmenu",(function(_t){Ct.scroller.contains(_t.target)||ml(xt,_t)}));var _t,$t={end:0};function i(){Ct.activeTouch&&(_t=setTimeout((function(){return Ct.activeTouch=null}),1e3),($t=Ct.activeTouch).end=+new Date)}function o(xt,Ct){if(null==Ct.left)return!0;var _t=Ct.left-xt.left,$t=Ct.top-xt.top;return _t*_t+$t*$t>400}fe(Ct.scroller,"touchstart",(function(Vn){if(!ve(xt,Vn)&&!function(xt){if(1!=xt.touches.length)return!1;var Ct=xt.touches[0];return Ct.radiusX<=1&&Ct.radiusY<=1}(Vn)&&!vl(xt,Vn)){Ct.input.ensurePolled(),clearTimeout(_t);var Gn=+new Date;Ct.activeTouch={start:Gn,moved:!1,prev:Gn-$t.end<=300?$t:null},1==Vn.touches.length&&(Ct.activeTouch.left=Vn.touches[0].pageX,Ct.activeTouch.top=Vn.touches[0].pageY)}})),fe(Ct.scroller,"touchmove",(function(){Ct.activeTouch&&(Ct.activeTouch.moved=!0)})),fe(Ct.scroller,"touchend",(function(_t){var $t=Ct.activeTouch;if($t&&!xr(Ct,_t)&&null!=$t.left&&!$t.moved&&new Date-$t.start<300){var Vn,Gn=xt.coordsChar(Ct.activeTouch,"page");Vn=!$t.prev||o($t,$t.prev)?new wi(Gn,Gn):!$t.prev.prev||o($t,$t.prev.prev)?xt.findWordAt(Gn):new wi(et(Gn.line,0),st(xt.doc,et(Gn.line+1,0))),xt.setSelection(Vn.anchor,Vn.head),xt.focus(),we(_t)}i()})),fe(Ct.scroller,"touchcancel",i),fe(Ct.scroller,"scroll",(function(){Ct.scroller.clientHeight&&(Hn(xt,Ct.scroller.scrollTop),Pn(xt,Ct.scroller.scrollLeft,!0),ge(xt,"scroll",xt))})),fe(Ct.scroller,"mousewheel",(function(Ct){return yi(xt,Ct)})),fe(Ct.scroller,"DOMMouseScroll",(function(Ct){return yi(xt,Ct)})),fe(Ct.wrapper,"scroll",(function(){return Ct.wrapper.scrollTop=Ct.wrapper.scrollLeft=0})),Ct.dragFunctions={enter:function(Ct){ve(xt,Ct)||Se(Ct)},over:function(Ct){ve(xt,Ct)||(function(xt,Ct){var _t=sn(xt,Ct);if(_t){var $t=document.createDocumentFragment();vn(xt,_t,$t),xt.display.dragCursor||(xt.display.dragCursor=O("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),xt.display.lineSpace.insertBefore(xt.display.dragCursor,xt.display.cursorDiv)),N(xt.display.dragCursor,$t)}}(xt,Ct),Se(Ct))},start:function(Ct){return function(xt,Ct){if(or&&(!xt.state.draggingText||+new Date-Bs<100))Se(Ct);else if(!ve(xt,Ct)&&!xr(xt.display,Ct)&&(Ct.dataTransfer.setData("Text",xt.getSelection()),Ct.dataTransfer.effectAllowed="copyMove",Ct.dataTransfer.setDragImage&&!Mo)){var _t=O("img",null,null,"position: fixed; left: 0; top: 0;");_t.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Eo&&(_t.width=_t.height=1,xt.display.wrapper.appendChild(_t),_t._top=_t.offsetTop),Ct.dataTransfer.setDragImage(_t,0,0),Eo&&_t.parentNode.removeChild(_t)}}(xt,Ct)},drop:Zn(xt,Ao),leave:function(Ct){ve(xt,Ct)||Do(xt)}};var Vn=Ct.input.getField();fe(Vn,"keyup",(function(Ct){return al.call(xt,Ct)})),fe(Vn,"keydown",Zn(xt,sl)),fe(Vn,"keypress",Zn(xt,ul)),fe(Vn,"focus",(function(Ct){return Cn(xt,Ct)})),fe(Vn,"blur",(function(Ct){return Sn(xt,Ct)}))}(this),function Fo(){var xt;$s||(fe(window,"resize",(function(){null==xt&&(xt=setTimeout((function(){xt=null,Wo(Po)}),100))})),fe(window,"blur",(function(){return Wo(Sn)})),$s=!0)}(),Kn(this),this.curOp.forceUpdate=!0,Wi(this,$t),Ct.autofocus&&!zo||this.hasFocus()?setTimeout((function(){_t.hasFocus()&&!_t.state.focused&&Cn(_t)}),20):Sn(this),Qs)Qs.hasOwnProperty(Hr)&&Qs[Hr](this,Ct[Hr],Ks);ui(this),Ct.finishInit&&Ct.finishInit(this);for(var xo=0;xo<ea.length;++xo)ea[xo](this);jn(this),Fr&&Ct.lineWrapping&&"optimizelegibility"==getComputedStyle(Gn.lineDiv).textRendering&&(Gn.lineDiv.style.textRendering="auto")}Ll.defaults=Js,Ll.optionHandlers=Qs;var ea=[];function Tl(xt,Ct,_t,$t){var Vn,Gn=xt.doc;null==_t&&(_t="add"),"smart"==_t&&(Gn.mode.indent?Vn=dt(xt,Ct).state:_t="prev");var or=xt.options.tabSize,lr=Xe(Gn,Ct),Fr=R(lr.text,null,or);lr.stateAfter&&(lr.stateAfter=null);var Hr,xo=lr.text.match(/^\s*/)[0];if($t||/\S/.test(lr.text)){if("smart"==_t&&((Hr=Gn.mode.indent(Vn,lr.text.slice(xo.length),lr.text))==os||Hr>150)){if(!$t)return;_t="prev"}}else Hr=0,_t="not";"prev"==_t?Hr=Ct>Gn.first?R(Xe(Gn,Ct-1).text,null,or):0:"add"==_t?Hr=Fr+xt.options.indentUnit:"subtract"==_t?Hr=Fr-xt.options.indentUnit:"number"==typeof _t&&(Hr=Fr+_t),Hr=Math.max(0,Hr);var Eo="",Mo=0;if(xt.options.indentWithTabs)for(var Oo=Math.floor(Hr/or);Oo;--Oo)Mo+=or,Eo+="\t";if(Mo<Hr&&(Eo+=$(Hr-Mo)),Eo!=xo)return ho(Gn,Eo,et(Ct,0),et(Ct,xo.length),"+input"),lr.stateAfter=null,!0;for(var Ro=0;Ro<Gn.sel.ranges.length;Ro++){var Io=Gn.sel.ranges[Ro];if(Io.head.line==Ct&&Io.head.ch<xo.length){var Bo=et(Ct,xo.length);Yi(Gn,Ro,new wi(Bo,Bo));break}}}Ll.defineInitHook=function(xt){return ea.push(xt)};var ta=null;function Nl(xt){ta=xt}function Ol(xt,Ct,_t,$t,Vn){var Gn=xt.doc;xt.display.shift=!1,$t||($t=Gn.sel);var or=+new Date-200,lr="paste"==Vn||xt.state.pasteIncoming>or,Fr=ys(Ct),Hr=null;if(lr&&$t.ranges.length>1)if(ta&&ta.text.join("\n")==Ct){if($t.ranges.length%ta.text.length==0){Hr=[];for(var xo=0;xo<ta.text.length;xo++)Hr.push(Gn.splitLines(ta.text[xo]))}}else Fr.length==$t.ranges.length&&xt.options.pasteLinesPerSelection&&(Hr=q(Fr,(function(xt){return[xt]})));for(var Eo=xt.curOp.updateInput,Mo=$t.ranges.length-1;Mo>=0;Mo--){var Oo=$t.ranges[Mo],Ro=Oo.from(),Io=Oo.to();Oo.empty()&&(_t&&_t>0?Ro=et(Ro.line,Ro.ch-_t):xt.state.overwrite&&!lr?Io=et(Io.line,Math.min(Xe(Gn,Io.line).text.length,Io.ch+_(Fr).length)):lr&&ta&&ta.lineWise&&ta.text.join("\n")==Fr.join("\n")&&(Ro=Io=et(Ro.line,0)));var Bo={from:Ro,to:Io,text:Hr?Hr[Mo%Hr.length]:Fr,origin:Vn||(lr?"paste":xt.state.cutIncoming>or?"cut":"+input")};lo(xt.doc,Bo),sr(xt,"inputRead",xt,Bo)}Ct&&!lr&&Dl(xt,Ct),On(xt),xt.curOp.updateInput<2&&(xt.curOp.updateInput=Eo),xt.curOp.typing=!0,xt.state.pasteIncoming=xt.state.cutIncoming=-1}function Al(xt,Ct){var _t=xt.clipboardData&&xt.clipboardData.getData("Text");if(_t)return xt.preventDefault(),Ct.isReadOnly()||Ct.options.disableInput||qn(Ct,(function(){return Ol(Ct,_t,0,null,"paste")})),!0}function Dl(xt,Ct){if(xt.options.electricChars&&xt.options.smartIndent)for(var _t=xt.doc.sel,$t=_t.ranges.length-1;$t>=0;$t--){var Vn=_t.ranges[$t];if(!(Vn.head.ch>100||$t&&_t.ranges[$t-1].head.line==Vn.head.line)){var Gn=xt.getModeAt(Vn.head),or=!1;if(Gn.electricChars){for(var lr=0;lr<Gn.electricChars.length;lr++)if(Ct.indexOf(Gn.electricChars.charAt(lr))>-1){or=Tl(xt,Vn.head.line,"smart");break}}else Gn.electricInput&&Gn.electricInput.test(Xe(xt.doc,Vn.head.line).text.slice(0,Vn.head.ch))&&(or=Tl(xt,Vn.head.line,"smart"));or&&sr(xt,"electricInput",xt,Vn.head.line)}}}function Wl(xt){for(var Ct=[],_t=[],$t=0;$t<xt.doc.sel.ranges.length;$t++){var Vn=xt.doc.sel.ranges[$t].head.line,Gn={anchor:et(Vn,0),head:et(Vn+1,0)};_t.push(Gn),Ct.push(xt.getRange(Gn.anchor,Gn.head))}return{text:Ct,ranges:_t}}function Hl(xt,Ct,_t,$t){xt.setAttribute("autocorrect",_t?"":"off"),xt.setAttribute("autocapitalize",$t?"":"off"),xt.setAttribute("spellcheck",!!Ct)}function Fl(){var xt=O("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),Ct=O("div",[xt],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Fr?xt.style.width="1000px":xt.setAttribute("wrap","off"),Io&&(xt.style.border="1px solid black"),Hl(xt),Ct}function Pl(xt,Ct,_t,$t,Vn){var Gn=Ct,or=_t,lr=Xe(xt,Ct.line),Fr=Vn&&"rtl"==xt.direction?-_t:_t;function u(Gn){var or,Hr;if("codepoint"==$t){var xo=lr.text.charCodeAt(Ct.ch+(_t>0?0:-1));if(isNaN(xo))or=null;else{var Eo=_t>0?xo>=55296&&xo<56320:xo>=56320&&xo<57343;or=new et(Ct.line,Math.max(0,Math.min(lr.text.length,Ct.ch+_t*(Eo?2:1))),-_t)}}else or=Vn?function(xt,Ct,_t,$t){var Vn=ce(Ct,xt.doc.direction);if(!Vn)return qo(Ct,_t,$t);_t.ch>=Ct.text.length?(_t.ch=Ct.text.length,_t.sticky="before"):_t.ch<=0&&(_t.ch=0,_t.sticky="after");var Gn=ae(Vn,_t.ch,_t.sticky),or=Vn[Gn];if("ltr"==xt.doc.direction&&or.level%2==0&&($t>0?or.to>_t.ch:or.from<_t.ch))return qo(Ct,_t,$t);var lr,a=function(xt,_t){return _o(Ct,xt instanceof et?xt.ch:xt,_t)},u=function(_t){return xt.options.lineWrapping?(lr=lr||Dr(xt,Ct),Zr(xt,Ct,lr,_t)):{begin:0,end:Ct.text.length}},Fr=u("before"==_t.sticky?a(_t,-1):_t.ch);if("rtl"==xt.doc.direction||1==or.level){var Hr=1==or.level==$t<0,xo=a(_t,Hr?1:-1);if(null!=xo&&(Hr?xo<=or.to&&xo<=Fr.end:xo>=or.from&&xo>=Fr.begin)){var Eo=Hr?"before":"after";return new et(_t.line,xo,Eo)}}var p=function(xt,Ct,$t){for(var o=function(xt,Ct){return Ct?new et(_t.line,a(xt,1),"before"):new et(_t.line,xt,"after")};xt>=0&&xt<Vn.length;xt+=Ct){var Gn=Vn[xt],or=Ct>0==(1!=Gn.level),lr=or?$t.begin:a($t.end,-1);if(Gn.from<=lr&&lr<Gn.to)return o(lr,or);if(lr=or?Gn.from:a(Gn.to,-1),$t.begin<=lr&&lr<$t.end)return o(lr,or)}},Mo=p(Gn+$t,$t,Fr);if(Mo)return Mo;var Oo=$t>0?Fr.end:a(Fr.begin,-1);return null==Oo||$t>0&&Oo==Ct.text.length||!(Mo=p($t>0?0:Vn.length-1,$t,u(Oo)))?null:Mo}(xt.cm,lr,Ct,_t):qo(lr,Ct,_t);if(null==or){if(Gn||(Hr=Ct.line+Fr)<xt.first||Hr>=xt.first+xt.size||(Ct=new et(Hr,Ct.ch,Ct.sticky),!(lr=Xe(xt,Hr))))return!1;Ct=Zo(Vn,xt.cm,lr,Ct.line,Fr)}else Ct=or;return!0}if("char"==$t||"codepoint"==$t)u();else if("column"==$t)u(!0);else if("word"==$t||"group"==$t)for(var Hr=null,xo="group"==$t,Eo=xt.cm&&xt.cm.getHelper(Ct,"wordChars"),Mo=!0;!(_t<0)||u(!Mo);Mo=!1){var Oo=lr.text.charAt(Ct.ch)||"\n",Ro=te(Oo,Eo)?"w":xo&&"\n"==Oo?"n":!xo||/\s/.test(Oo)?null:"p";if(!xo||Mo||Ro||(Ro="s"),Hr&&Hr!=Ro){_t<0&&(_t=1,u(),Ct.sticky="after");break}if(Ro&&(Hr=Ro),_t>0&&!u(!Mo))break}var Io=ro(xt,Ct,Gn,or,!0);return rt(Gn,Io)&&(Io.hitSide=!0),Io}function El(xt,Ct,_t,$t){var Vn,Gn,or=xt.doc,lr=Ct.left;if("page"==$t){var Fr=Math.min(xt.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),Hr=Math.max(Fr-.5*en(xt.display),3);Vn=(_t>0?Ct.bottom:Ct.top)+_t*Hr}else"line"==$t&&(Vn=_t>0?Ct.bottom+3:Ct.top-3);for(;(Gn=_r(xt,lr,Vn)).outside;){if(_t<0?Vn<=0:Vn>=or.height){Gn.hitSide=!0;break}Vn+=5*_t}return Gn}var Il=function(xt){this.cm=xt,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new z,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Rl(xt,Ct){var _t=Ar(xt,Ct.line);if(!_t||_t.hidden)return null;var $t=Xe(xt.doc,Ct.line),Vn=Nr(_t,$t,Ct.line),Gn=ce($t,xt.doc.direction),or="left";Gn&&(or=ae(Gn,Ct.ch)%2?"right":"left");var lr=Pr(Vn.map,Ct.ch,or);return lr.offset="right"==lr.collapse?lr.end:lr.start,lr}function zl(xt,Ct){return Ct&&(xt.bad=!0),xt}function Bl(xt,Ct,_t){var $t;if(Ct==xt.display.lineDiv){if(!($t=xt.display.lineDiv.childNodes[_t]))return zl(xt.clipPos(et(xt.display.viewTo-1)),!0);Ct=null,_t=0}else for($t=Ct;;$t=$t.parentNode){if(!$t||$t==xt.display.lineDiv)return null;if($t.parentNode&&$t.parentNode==xt.display.lineDiv)break}for(var Vn=0;Vn<xt.display.view.length;Vn++){var Gn=xt.display.view[Vn];if(Gn.node==$t)return Gl(Gn,Ct,_t)}}function Gl(xt,Ct,_t){var $t=xt.text.firstChild,Vn=!1;if(!Ct||!D($t,Ct))return zl(et(qe(xt.line),0),!0);if(Ct==$t&&(Vn=!0,Ct=$t.childNodes[_t],_t=0,!Ct)){var Gn=xt.rest?_(xt.rest):xt.line;return zl(et(qe(Gn),Gn.text.length),Vn)}var or=3==Ct.nodeType?Ct:null,lr=Ct;for(or||1!=Ct.childNodes.length||3!=Ct.firstChild.nodeType||(or=Ct.firstChild,_t&&(_t=or.nodeValue.length));lr.parentNode!=$t;)lr=lr.parentNode;var Fr=xt.measure,Hr=Fr.maps;function c(Ct,_t,$t){for(var Vn=-1;Vn<(Hr?Hr.length:0);Vn++)for(var Gn=Vn<0?Fr.map:Hr[Vn],or=0;or<Gn.length;or+=3){var lr=Gn[or+2];if(lr==Ct||lr==_t){var xo=qe(Vn<0?xt.line:xt.rest[Vn]),Eo=Gn[or]+$t;return($t<0||lr!=Ct)&&(Eo=Gn[or+($t?1:0)]),et(xo,Eo)}}}var xo=c(or,lr,_t);if(xo)return zl(xo,Vn);for(var Eo=lr.nextSibling,Mo=or?or.nodeValue.length-_t:0;Eo;Eo=Eo.nextSibling){if(xo=c(Eo,Eo.firstChild,0))return zl(et(xo.line,xo.ch-Mo),Vn);Mo+=Eo.textContent.length}for(var Oo=lr.previousSibling,Ro=_t;Oo;Oo=Oo.previousSibling){if(xo=c(Oo,Oo.firstChild,-1))return zl(et(xo.line,xo.ch+Ro),Vn);Ro+=Oo.textContent.length}}Il.prototype.init=function(xt){var Ct=this,_t=this,$t=_t.cm,Vn=_t.div=xt.lineDiv;function o(xt){for(var Ct=xt.target;Ct;Ct=Ct.parentNode){if(Ct==Vn)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(Ct.className))break}return!1}function l(xt){if(o(xt)&&!ve($t,xt)){if($t.somethingSelected())Nl({lineWise:!1,text:$t.getSelections()}),"cut"==xt.type&&$t.replaceSelection("",null,"cut");else{if(!$t.options.lineWiseCopyCut)return;var Ct=Wl($t);Nl({lineWise:!0,text:Ct.text}),"cut"==xt.type&&$t.operation((function(){$t.setSelections(Ct.ranges,0,is),$t.replaceSelection("",null,"cut")}))}if(xt.clipboardData){xt.clipboardData.clearData();var Gn=ta.text.join("\n");if(xt.clipboardData.setData("Text",Gn),xt.clipboardData.getData("Text")==Gn)return void xt.preventDefault()}var or=Fl(),lr=or.firstChild;$t.display.lineSpace.insertBefore(or,$t.display.lineSpace.firstChild),lr.value=ta.text.join("\n");var Fr=W();P(lr),setTimeout((function(){$t.display.lineSpace.removeChild(or),Fr.focus(),Fr==Vn&&_t.showPrimarySelection()}),50)}}Vn.contentEditable=!0,Hl(Vn,$t.options.spellcheck,$t.options.autocorrect,$t.options.autocapitalize),fe(Vn,"paste",(function(xt){!o(xt)||ve($t,xt)||Al(xt,$t)||lr<=11&&setTimeout(Zn($t,(function(){return Ct.updateFromDOM()})),20)})),fe(Vn,"compositionstart",(function(xt){Ct.composing={data:xt.data,done:!1}})),fe(Vn,"compositionupdate",(function(xt){Ct.composing||(Ct.composing={data:xt.data,done:!1})})),fe(Vn,"compositionend",(function(xt){Ct.composing&&(xt.data!=Ct.composing.data&&Ct.readFromDOMSoon(),Ct.composing.done=!0)})),fe(Vn,"touchstart",(function(){return _t.forceCompositionEnd()})),fe(Vn,"input",(function(){Ct.composing||Ct.readFromDOMSoon()})),fe(Vn,"copy",l),fe(Vn,"cut",l)},Il.prototype.screenReaderLabelChanged=function(xt){xt?this.div.setAttribute("aria-label",xt):this.div.removeAttribute("aria-label")},Il.prototype.prepareSelection=function(){var xt=gn(this.cm,!1);return xt.focus=W()==this.div,xt},Il.prototype.showSelection=function(xt,Ct){xt&&this.cm.display.view.length&&((xt.focus||Ct)&&this.showPrimarySelection(),this.showMultipleSelections(xt))},Il.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Il.prototype.showPrimarySelection=function(){var xt=this.getSelection(),Ct=this.cm,$t=Ct.doc.sel.primary(),Vn=$t.from(),Gn=$t.to();if(Ct.display.viewTo==Ct.display.viewFrom||Vn.line>=Ct.display.viewTo||Gn.line<Ct.display.viewFrom)xt.removeAllRanges();else{var or=Bl(Ct,xt.anchorNode,xt.anchorOffset),lr=Bl(Ct,xt.focusNode,xt.focusOffset);if(!or||or.bad||!lr||lr.bad||0!=tt(ot(or,lr),Vn)||0!=tt(it(or,lr),Gn)){var Fr=Ct.display.view,Hr=Vn.line>=Ct.display.viewFrom&&Rl(Ct,Vn)||{node:Fr[0].measure.map[2],offset:0},xo=Gn.line<Ct.display.viewTo&&Rl(Ct,Gn);if(!xo){var Eo=Fr[Fr.length-1].measure,Mo=Eo.maps?Eo.maps[Eo.maps.length-1]:Eo.map;xo={node:Mo[Mo.length-1],offset:Mo[Mo.length-2]-Mo[Mo.length-3]}}if(Hr&&xo){var Oo,Ro=xt.rangeCount&&xt.getRangeAt(0);try{Oo=ns(Hr.node,Hr.offset,xo.offset,xo.node)}catch(xt){}Oo&&(!_t&&Ct.state.focused?(xt.collapse(Hr.node,Hr.offset),Oo.collapsed||(xt.removeAllRanges(),xt.addRange(Oo))):(xt.removeAllRanges(),xt.addRange(Oo)),Ro&&null==xt.anchorNode?xt.addRange(Ro):_t&&this.startGracePeriod()),this.rememberSelection()}else xt.removeAllRanges()}}},Il.prototype.startGracePeriod=function(){var xt=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){xt.gracePeriod=!1,xt.selectionChanged()&&xt.cm.operation((function(){return xt.cm.curOp.selectionChanged=!0}))}),20)},Il.prototype.showMultipleSelections=function(xt){N(this.cm.display.cursorDiv,xt.cursors),N(this.cm.display.selectionDiv,xt.selection)},Il.prototype.rememberSelection=function(){var xt=this.getSelection();this.lastAnchorNode=xt.anchorNode,this.lastAnchorOffset=xt.anchorOffset,this.lastFocusNode=xt.focusNode,this.lastFocusOffset=xt.focusOffset},Il.prototype.selectionInEditor=function(){var xt=this.getSelection();if(!xt.rangeCount)return!1;var Ct=xt.getRangeAt(0).commonAncestorContainer;return D(this.div,Ct)},Il.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&W()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Il.prototype.blur=function(){this.div.blur()},Il.prototype.getField=function(){return this.div},Il.prototype.supportsTouch=function(){return!0},Il.prototype.receivedFocus=function(){var xt=this,Ct=this;this.selectionInEditor()?setTimeout((function(){return xt.pollSelection()}),20):qn(this.cm,(function(){return Ct.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){Ct.cm.state.focused&&(Ct.pollSelection(),Ct.polling.set(Ct.cm.options.pollInterval,e))}))},Il.prototype.selectionChanged=function(){var xt=this.getSelection();return xt.anchorNode!=this.lastAnchorNode||xt.anchorOffset!=this.lastAnchorOffset||xt.focusNode!=this.lastFocusNode||xt.focusOffset!=this.lastFocusOffset},Il.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var xt=this.getSelection(),Ct=this.cm;if(Bo&&xo&&this.cm.display.gutterSpecs.length&&function(xt){for(var Ct=xt;Ct;Ct=Ct.parentNode)if(/CodeMirror-gutter-wrapper/.test(Ct.className))return!0;return!1}(xt.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var _t=Bl(Ct,xt.anchorNode,xt.anchorOffset),$t=Bl(Ct,xt.focusNode,xt.focusOffset);_t&&$t&&qn(Ct,(function(){qi(Ct.doc,Ci(_t,$t),is),(_t.bad||$t.bad)&&(Ct.curOp.selectionChanged=!0)}))}}},Il.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var xt,Ct,_t,$t=this.cm,Vn=$t.display,Gn=$t.doc.sel.primary(),or=Gn.from(),lr=Gn.to();if(0==or.ch&&or.line>$t.firstLine()&&(or=et(or.line-1,Xe($t.doc,or.line-1).length)),lr.ch==Xe($t.doc,lr.line).text.length&&lr.line<$t.lastLine()&&(lr=et(lr.line+1,0)),or.line<Vn.viewFrom||lr.line>Vn.viewTo-1)return!1;or.line==Vn.viewFrom||0==(xt=an($t,or.line))?(Ct=qe(Vn.view[0].line),_t=Vn.view[0].node):(Ct=qe(Vn.view[xt].line),_t=Vn.view[xt-1].node.nextSibling);var Fr,Hr,xo=an($t,lr.line);if(xo==Vn.view.length-1?(Fr=Vn.viewTo-1,Hr=Vn.lineDiv.lastChild):(Fr=qe(Vn.view[xo+1].line)-1,Hr=Vn.view[xo+1].node.previousSibling),!_t)return!1;for(var Eo=$t.doc.splitLines(function(xt,Ct,_t,$t,Vn){var Gn="",or=!1,lr=xt.doc.lineSeparator(),Fr=!1;function u(){or&&(Gn+=lr,Fr&&(Gn+=lr),or=Fr=!1)}function c(xt){xt&&(u(),Gn+=xt)}function h(Ct){if(1==Ct.nodeType){var _t=Ct.getAttribute("cm-text");if(_t)return void c(_t);var Gn,Hr=Ct.getAttribute("cm-marker");if(Hr){var xo=xt.findMarks(et($t,0),et(Vn+1,0),(Oo=+Hr,function(xt){return xt.id==Oo}));return void(xo.length&&(Gn=xo[0].find(0))&&c(Ye(xt.doc,Gn.from,Gn.to).join(lr)))}if("false"==Ct.getAttribute("contenteditable"))return;var Eo=/^(pre|div|p|li|table|br)$/i.test(Ct.nodeName);if(!/^br$/i.test(Ct.nodeName)&&0==Ct.textContent.length)return;Eo&&u();for(var Mo=0;Mo<Ct.childNodes.length;Mo++)h(Ct.childNodes[Mo]);/^(pre|p)$/i.test(Ct.nodeName)&&(Fr=!0),Eo&&(or=!0)}else 3==Ct.nodeType&&c(Ct.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var Oo}for(;h(Ct),Ct!=_t;)Ct=Ct.nextSibling,Fr=!1;return Gn}($t,_t,Hr,Ct,Fr)),Mo=Ye($t.doc,et(Ct,0),et(Fr,Xe($t.doc,Fr).text.length));Eo.length>1&&Mo.length>1;)if(_(Eo)==_(Mo))Eo.pop(),Mo.pop(),Fr--;else{if(Eo[0]!=Mo[0])break;Eo.shift(),Mo.shift(),Ct++}for(var Oo=0,Ro=0,Io=Eo[0],Bo=Mo[0],zo=Math.min(Io.length,Bo.length);Oo<zo&&Io.charCodeAt(Oo)==Bo.charCodeAt(Oo);)++Oo;for(var Ho=_(Eo),Qo=_(Mo),pi=Math.min(Ho.length-(1==Eo.length?Oo:0),Qo.length-(1==Mo.length?Oo:0));Ro<pi&&Ho.charCodeAt(Ho.length-Ro-1)==Qo.charCodeAt(Qo.length-Ro-1);)++Ro;if(1==Eo.length&&1==Mo.length&&Ct==or.line)for(;Oo&&Oo>or.ch&&Ho.charCodeAt(Ho.length-Ro-1)==Qo.charCodeAt(Qo.length-Ro-1);)Oo--,Ro++;Eo[Eo.length-1]=Ho.slice(0,Ho.length-Ro).replace(/^\u200b+/,""),Eo[0]=Eo[0].slice(Oo).replace(/\u200b+$/,"");var gi=et(Ct,Oo),es=et(Fr,Mo.length?_(Mo).length-Ro:0);return Eo.length>1||Eo[0]||tt(gi,es)?(ho($t.doc,Eo,gi,es,"+input"),!0):void 0},Il.prototype.ensurePolled=function(){this.forceCompositionEnd()},Il.prototype.reset=function(){this.forceCompositionEnd()},Il.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Il.prototype.readFromDOMSoon=function(){var xt=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(xt.readDOMTimeout=null,xt.composing){if(!xt.composing.done)return;xt.composing=null}xt.updateFromDOM()}),80))},Il.prototype.updateFromDOM=function(){var xt=this;!this.cm.isReadOnly()&&this.pollContent()||qn(this.cm,(function(){return un(xt.cm)}))},Il.prototype.setUneditable=function(xt){xt.contentEditable="false"},Il.prototype.onKeyPress=function(xt){0==xt.charCode||this.composing||(xt.preventDefault(),this.cm.isReadOnly()||Zn(this.cm,Ol)(this.cm,String.fromCharCode(null==xt.charCode?xt.keyCode:xt.charCode),0))},Il.prototype.readOnlyChanged=function(xt){this.div.contentEditable=String("nocursor"!=xt)},Il.prototype.onContextMenu=function(){},Il.prototype.resetPosition=function(){},Il.prototype.needsContentAttribute=!0;var Ul=function(xt){this.cm=xt,this.prevInput="",this.pollingFast=!1,this.polling=new z,this.hasSelection=!1,this.composing=null};Ul.prototype.init=function(xt){var Ct=this,_t=this,$t=this.cm;this.createField(xt);var Vn=this.textarea;function o(xt){if(!ve($t,xt)){if($t.somethingSelected())Nl({lineWise:!1,text:$t.getSelections()});else{if(!$t.options.lineWiseCopyCut)return;var Ct=Wl($t);Nl({lineWise:!0,text:Ct.text}),"cut"==xt.type?$t.setSelections(Ct.ranges,null,is):(_t.prevInput="",Vn.value=Ct.text.join("\n"),P(Vn))}"cut"==xt.type&&($t.state.cutIncoming=+new Date)}}xt.wrapper.insertBefore(this.wrapper,xt.wrapper.firstChild),Io&&(Vn.style.width="0px"),fe(Vn,"input",(function(){or&&lr>=9&&Ct.hasSelection&&(Ct.hasSelection=null),_t.poll()})),fe(Vn,"paste",(function(xt){ve($t,xt)||Al(xt,$t)||($t.state.pasteIncoming=+new Date,_t.fastPoll())})),fe(Vn,"cut",o),fe(Vn,"copy",o),fe(xt.scroller,"paste",(function(Ct){if(!xr(xt,Ct)&&!ve($t,Ct)){if(!Vn.dispatchEvent)return $t.state.pasteIncoming=+new Date,void _t.focus();var Gn=new Event("paste");Gn.clipboardData=Ct.clipboardData,Vn.dispatchEvent(Gn)}})),fe(xt.lineSpace,"selectstart",(function(Ct){xr(xt,Ct)||we(Ct)})),fe(Vn,"compositionstart",(function(){var xt=$t.getCursor("from");_t.composing&&_t.composing.range.clear(),_t.composing={start:xt,range:$t.markText(xt,$t.getCursor("to"),{className:"CodeMirror-composing"})}})),fe(Vn,"compositionend",(function(){_t.composing&&(_t.poll(),_t.composing.range.clear(),_t.composing=null)}))},Ul.prototype.createField=function(xt){this.wrapper=Fl(),this.textarea=this.wrapper.firstChild},Ul.prototype.screenReaderLabelChanged=function(xt){xt?this.textarea.setAttribute("aria-label",xt):this.textarea.removeAttribute("aria-label")},Ul.prototype.prepareSelection=function(){var xt=this.cm,Ct=xt.display,_t=xt.doc,$t=gn(xt);if(xt.options.moveInputWithCursor){var Vn=Xr(xt,_t.sel.primary().head,"div"),Gn=Ct.wrapper.getBoundingClientRect(),or=Ct.lineDiv.getBoundingClientRect();$t.teTop=Math.max(0,Math.min(Ct.wrapper.clientHeight-10,Vn.top+or.top-Gn.top)),$t.teLeft=Math.max(0,Math.min(Ct.wrapper.clientWidth-10,Vn.left+or.left-Gn.left))}return $t},Ul.prototype.showSelection=function(xt){var Ct=this.cm.display;N(Ct.cursorDiv,xt.cursors),N(Ct.selectionDiv,xt.selection),null!=xt.teTop&&(this.wrapper.style.top=xt.teTop+"px",this.wrapper.style.left=xt.teLeft+"px")},Ul.prototype.reset=function(xt){if(!this.contextMenuPending&&!this.composing){var Ct=this.cm;if(Ct.somethingSelected()){this.prevInput="";var _t=Ct.getSelection();this.textarea.value=_t,Ct.state.focused&&P(this.textarea),or&&lr>=9&&(this.hasSelection=_t)}else xt||(this.prevInput=this.textarea.value="",or&&lr>=9&&(this.hasSelection=null))}},Ul.prototype.getField=function(){return this.textarea},Ul.prototype.supportsTouch=function(){return!1},Ul.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!zo||W()!=this.textarea))try{this.textarea.focus()}catch(xt){}},Ul.prototype.blur=function(){this.textarea.blur()},Ul.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ul.prototype.receivedFocus=function(){this.slowPoll()},Ul.prototype.slowPoll=function(){var xt=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){xt.poll(),xt.cm.state.focused&&xt.slowPoll()}))},Ul.prototype.fastPoll=function(){var xt=!1,Ct=this;Ct.pollingFast=!0,Ct.polling.set(20,(function r(){Ct.poll()||xt?(Ct.pollingFast=!1,Ct.slowPoll()):(xt=!0,Ct.polling.set(60,r))}))},Ul.prototype.poll=function(){var xt=this,Ct=this.cm,_t=this.textarea,$t=this.prevInput;if(this.contextMenuPending||!Ct.state.focused||bs(_t)&&!$t&&!this.composing||Ct.isReadOnly()||Ct.options.disableInput||Ct.state.keySeq)return!1;var Vn=_t.value;if(Vn==$t&&!Ct.somethingSelected())return!1;if(or&&lr>=9&&this.hasSelection===Vn||Ho&&/[\uf700-\uf7ff]/.test(Vn))return Ct.display.input.reset(),!1;if(Ct.doc.sel==Ct.display.selForContextMenu){var Gn=Vn.charCodeAt(0);if(8203!=Gn||$t||($t="â€‹"),8666==Gn)return this.reset(),this.cm.execCommand("undo")}for(var Fr=0,Hr=Math.min($t.length,Vn.length);Fr<Hr&&$t.charCodeAt(Fr)==Vn.charCodeAt(Fr);)++Fr;return qn(Ct,(function(){Ol(Ct,Vn.slice(Fr),$t.length-Fr,null,xt.composing?"*compose":null),Vn.length>1e3||Vn.indexOf("\n")>-1?_t.value=xt.prevInput="":xt.prevInput=Vn,xt.composing&&(xt.composing.range.clear(),xt.composing.range=Ct.markText(xt.composing.start,Ct.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Ul.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ul.prototype.onKeyPress=function(){or&&lr>=9&&(this.hasSelection=null),this.fastPoll()},Ul.prototype.onContextMenu=function(xt){var Ct=this,_t=Ct.cm,$t=_t.display,Vn=Ct.textarea;Ct.contextMenuPending&&Ct.contextMenuPending();var Gn=sn(_t,xt),Hr=$t.scroller.scrollTop;if(Gn&&!Eo){_t.options.resetSelectionOnContextMenu&&-1==_t.doc.sel.contains(Gn)&&Zn(_t,qi)(_t.doc,Ci(Gn),is);var xo,Mo=Vn.style.cssText,Oo=Ct.wrapper.style.cssText,Ro=Ct.wrapper.offsetParent.getBoundingClientRect();if(Ct.wrapper.style.cssText="position: static",Vn.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(xt.clientY-Ro.top-5)+"px; left: "+(xt.clientX-Ro.left-5)+"px;\n      z-index: 1000; background: "+(or?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Fr&&(xo=window.scrollY),$t.input.focus(),Fr&&window.scrollTo(null,xo),$t.input.reset(),_t.somethingSelected()||(Vn.value=Ct.prevInput=" "),Ct.contextMenuPending=m,$t.selForContextMenu=_t.doc.sel,clearTimeout($t.detectingSelectAll),or&&lr>=9&&v(),ts){Se(xt);var g=function(){pe(window,"mouseup",g),setTimeout(m,20)};fe(window,"mouseup",g)}else setTimeout(m,50)}function v(){if(null!=Vn.selectionStart){var xt=_t.somethingSelected(),Gn="â€‹"+(xt?Vn.value:"");Vn.value="â‡š",Vn.value=Gn,Ct.prevInput=xt?"":"â€‹",Vn.selectionStart=1,Vn.selectionEnd=Gn.length,$t.selForContextMenu=_t.doc.sel}}function m(){if(Ct.contextMenuPending==m&&(Ct.contextMenuPending=!1,Ct.wrapper.style.cssText=Oo,Vn.style.cssText=Mo,or&&lr<9&&$t.scrollbars.setScrollTop($t.scroller.scrollTop=Hr),null!=Vn.selectionStart)){(!or||or&&lr<9)&&v();var xt=0,o=function(){$t.selForContextMenu==_t.doc.sel&&0==Vn.selectionStart&&Vn.selectionEnd>0&&"â€‹"==Ct.prevInput?Zn(_t,io)(_t):xt++<10?$t.detectingSelectAll=setTimeout(o,500):($t.selForContextMenu=null,$t.input.reset())};$t.detectingSelectAll=setTimeout(o,200)}}},Ul.prototype.readOnlyChanged=function(xt){xt||this.reset(),this.textarea.disabled="nocursor"==xt,this.textarea.readOnly=!!xt},Ul.prototype.setUneditable=function(){},Ul.prototype.needsContentAttribute=!1,function(xt){var Ct=xt.optionHandlers;function r(_t,$t,Vn,Gn){xt.defaults[_t]=$t,Vn&&(Ct[_t]=Gn?function(xt,Ct,_t){_t!=Ks&&Vn(xt,Ct,_t)}:Vn)}xt.defineOption=r,xt.Init=Ks,r("value","",(function(xt,Ct){return xt.setValue(Ct)}),!0),r("mode",null,(function(xt,Ct){xt.doc.modeOption=Ct,Mi(xt)}),!0),r("indentUnit",2,Mi,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,(function(xt){Ni(xt),zr(xt),un(xt)}),!0),r("lineSeparator",null,(function(xt,Ct){if(xt.doc.lineSep=Ct,Ct){var _t=[],$t=xt.doc.first;xt.doc.iter((function(xt){for(var Vn=0;;){var Gn=xt.text.indexOf(Ct,Vn);if(-1==Gn)break;Vn=Gn+Ct.length,_t.push(et($t,Gn))}$t++}));for(var Vn=_t.length-1;Vn>=0;Vn--)ho(xt.doc,Ct,_t[Vn],et(_t[Vn].line,_t[Vn].ch+Ct.length))}})),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(xt,Ct,_t){xt.state.specialChars=new RegExp(Ct.source+(Ct.test("\t")?"":"|\t"),"g"),_t!=Ks&&xt.refresh()})),r("specialCharPlaceholder",Qt,(function(xt){return xt.refresh()}),!0),r("electricChars",!0),r("inputStyle",zo?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),r("spellcheck",!1,(function(xt,Ct){return xt.getInputField().spellcheck=Ct}),!0),r("autocorrect",!1,(function(xt,Ct){return xt.getInputField().autocorrect=Ct}),!0),r("autocapitalize",!1,(function(xt,Ct){return xt.getInputField().autocapitalize=Ct}),!0),r("rtlMoveVisually",!pi),r("wholeLineUpdateBefore",!0),r("theme","default",(function(xt){yl(xt),fi(xt)}),!0),r("keyMap","default",(function(xt,Ct,_t){var $t=Yo(Ct),Vn=_t!=Ks&&Yo(_t);Vn&&Vn.detach&&Vn.detach(xt,$t),$t.attach&&$t.attach(xt,Vn||null)})),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,Sl,!0),r("gutters",[],(function(xt,Ct){xt.display.gutterSpecs=ci(Ct,xt.options.lineNumbers),fi(xt)}),!0),r("fixedGutter",!0,(function(xt,Ct){xt.display.gutters.style.left=Ct?nn(xt.display)+"px":"0",xt.refresh()}),!0),r("coverGutterNextToScrollbar",!1,(function(xt){return zn(xt)}),!0),r("scrollbarStyle","native",(function(xt){Un(xt),zn(xt),xt.display.scrollbars.setScrollTop(xt.doc.scrollTop),xt.display.scrollbars.setScrollLeft(xt.doc.scrollLeft)}),!0),r("lineNumbers",!1,(function(xt,Ct){xt.display.gutterSpecs=ci(xt.options.gutters,Ct),fi(xt)}),!0),r("firstLineNumber",1,fi,!0),r("lineNumberFormatter",(function(xt){return xt}),fi,!0),r("showCursorWhenSelecting",!1,pn,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,(function(xt,Ct){"nocursor"==Ct&&(Sn(xt),xt.display.input.blur()),xt.display.input.readOnlyChanged(Ct)})),r("screenReaderLabel",null,(function(xt,Ct){Ct=""===Ct?null:Ct,xt.display.input.screenReaderLabelChanged(Ct)})),r("disableInput",!1,(function(xt,Ct){Ct||xt.display.input.reset()}),!0),r("dragDrop",!0,Cl),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,pn,!0),r("singleCursorHeightPerLine",!0,pn,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,Ni,!0),r("addModeClass",!1,Ni,!0),r("pollInterval",100),r("undoDepth",200,(function(xt,Ct){return xt.doc.history.undoDepth=Ct})),r("historyEventDelay",1250),r("viewportMargin",10,(function(xt){return xt.refresh()}),!0),r("maxHighlightLength",1e4,Ni,!0),r("moveInputWithCursor",!0,(function(xt,Ct){Ct||xt.display.input.resetPosition()})),r("tabindex",null,(function(xt,Ct){return xt.display.input.getField().tabIndex=Ct||""})),r("autofocus",null),r("direction","ltr",(function(xt,Ct){return xt.doc.setDirection(Ct)}),!0),r("phrases",null)}(Ll),function(xt){var Ct=xt.optionHandlers,_t=xt.helpers={};xt.prototype={constructor:xt,focus:function(){window.focus(),this.display.input.focus()},setOption:function(xt,_t){var $t=this.options,Vn=$t[xt];$t[xt]==_t&&"mode"!=xt||($t[xt]=_t,Ct.hasOwnProperty(xt)&&Zn(this,Ct[xt])(this,_t,Vn),ge(this,"optionChange",this,xt))},getOption:function(xt){return this.options[xt]},getDoc:function(){return this.doc},addKeyMap:function(xt,Ct){this.state.keyMaps[Ct?"push":"unshift"](Yo(xt))},removeKeyMap:function(xt){for(var Ct=this.state.keyMaps,_t=0;_t<Ct.length;++_t)if(Ct[_t]==xt||Ct[_t].name==xt)return Ct.splice(_t,1),!0},addOverlay:Qn((function(Ct,_t){var $t=Ct.token?Ct:xt.getMode(this.options,Ct);if($t.startState)throw new Error("Overlays may not be stateful.");!function(xt,Ct,_t){for(var $t=0,Vn=_t(Ct);$t<xt.length&&_t(xt[$t])<=Vn;)$t++;xt.splice($t,0,Ct)}(this.state.overlays,{mode:$t,modeSpec:Ct,opaque:_t&&_t.opaque,priority:_t&&_t.priority||0},(function(xt){return xt.priority})),this.state.modeGen++,un(this)})),removeOverlay:Qn((function(xt){for(var Ct=this.state.overlays,_t=0;_t<Ct.length;++_t){var $t=Ct[_t].modeSpec;if($t==xt||"string"==typeof xt&&$t.name==xt)return Ct.splice(_t,1),this.state.modeGen++,void un(this)}})),indentLine:Qn((function(xt,Ct,_t){"string"!=typeof Ct&&"number"!=typeof Ct&&(Ct=null==Ct?this.options.smartIndent?"smart":"prev":Ct?"add":"subtract"),Qe(this.doc,xt)&&Tl(this,xt,Ct,_t)})),indentSelection:Qn((function(xt){for(var Ct=this.doc.sel.ranges,_t=-1,$t=0;$t<Ct.length;$t++){var Vn=Ct[$t];if(Vn.empty())Vn.head.line>_t&&(Tl(this,Vn.head.line,xt,!0),_t=Vn.head.line,$t==this.doc.sel.primIndex&&On(this));else{var Gn=Vn.from(),or=Vn.to(),lr=Math.max(_t,Gn.line);_t=Math.min(this.lastLine(),or.line-(or.ch?0:1))+1;for(var Fr=lr;Fr<_t;++Fr)Tl(this,Fr,xt);var Hr=this.doc.sel.ranges;0==Gn.ch&&Ct.length==Hr.length&&Hr[$t].from().ch>0&&Yi(this.doc,$t,new wi(Gn,Hr[$t].to()),is)}}})),getTokenAt:function(xt,Ct){return yt(this,xt,Ct)},getLineTokens:function(xt,Ct){return yt(this,et(xt),Ct,!0)},getTokenTypeAt:function(xt){xt=st(this.doc,xt);var Ct,_t=ft(this,Xe(this.doc,xt.line)),$t=0,Vn=(_t.length-1)/2,Gn=xt.ch;if(0==Gn)Ct=_t[2];else for(;;){var or=$t+Vn>>1;if((or?_t[2*or-1]:0)>=Gn)Vn=or;else{if(!(_t[2*or+1]<Gn)){Ct=_t[2*or+2];break}$t=or+1}}var lr=Ct?Ct.indexOf("overlay "):-1;return lr<0?Ct:0==lr?null:Ct.slice(0,lr-1)},getModeAt:function(Ct){var _t=this.doc.mode;return _t.innerMode?xt.innerMode(_t,this.getTokenAt(Ct).state).mode:_t},getHelper:function(xt,Ct){return this.getHelpers(xt,Ct)[0]},getHelpers:function(xt,Ct){var $t=[];if(!_t.hasOwnProperty(Ct))return $t;var Vn=_t[Ct],Gn=this.getModeAt(xt);if("string"==typeof Gn[Ct])Vn[Gn[Ct]]&&$t.push(Vn[Gn[Ct]]);else if(Gn[Ct])for(var or=0;or<Gn[Ct].length;or++){var lr=Vn[Gn[Ct][or]];lr&&$t.push(lr)}else Gn.helperType&&Vn[Gn.helperType]?$t.push(Vn[Gn.helperType]):Vn[Gn.name]&&$t.push(Vn[Gn.name]);for(var Fr=0;Fr<Vn._global.length;Fr++){var Hr=Vn._global[Fr];Hr.pred(Gn,this)&&-1==B($t,Hr.val)&&$t.push(Hr.val)}return $t},getStateAfter:function(xt,Ct){var _t=this.doc;return dt(this,(xt=lt(_t,null==xt?_t.first+_t.size-1:xt))+1,Ct).state},cursorCoords:function(xt,Ct){var _t=this.doc.sel.primary();return Xr(this,null==xt?_t.head:"object"==typeof xt?st(this.doc,xt):xt?_t.from():_t.to(),Ct||"page")},charCoords:function(xt,Ct){return jr(this,st(this.doc,xt),Ct||"page")},coordsChar:function(xt,Ct){return _r(this,(xt=Kr(this,xt,Ct||"page")).left,xt.top)},lineAtHeight:function(xt,Ct){return xt=Kr(this,{top:xt,left:0},Ct||"page").top,Ze(this.doc,xt+this.display.viewOffset)},heightAtLine:function(xt,Ct,_t){var $t,Vn=!1;if("number"==typeof xt){var Gn=this.doc.first+this.doc.size-1;xt<this.doc.first?xt=this.doc.first:xt>Gn&&(xt=Gn,Vn=!0),$t=Xe(this.doc,xt)}else $t=xt;return Vr(this,$t,{top:0,left:0},Ct||"page",_t||Vn).top+(Vn?this.doc.height-Vt($t):0)},defaultTextHeight:function(){return en(this.display)},defaultCharWidth:function(){return tn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(xt,Ct,_t,$t,Vn){var Gn,or,lr=this.display,Fr=(xt=Xr(this,st(this.doc,xt))).bottom,Hr=xt.left;if(Ct.style.position="absolute",Ct.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(Ct),lr.sizer.appendChild(Ct),"over"==$t)Fr=xt.top;else if("above"==$t||"near"==$t){var xo=Math.max(lr.wrapper.clientHeight,this.doc.height),Eo=Math.max(lr.sizer.clientWidth,lr.lineSpace.clientWidth);("above"==$t||xt.bottom+Ct.offsetHeight>xo)&&xt.top>Ct.offsetHeight?Fr=xt.top-Ct.offsetHeight:xt.bottom+Ct.offsetHeight<=xo&&(Fr=xt.bottom),Hr+Ct.offsetWidth>Eo&&(Hr=Eo-Ct.offsetWidth)}Ct.style.top=Fr+"px",Ct.style.left=Ct.style.right="","right"==Vn?(Hr=lr.sizer.clientWidth-Ct.offsetWidth,Ct.style.right="0px"):("left"==Vn?Hr=0:"middle"==Vn&&(Hr=(lr.sizer.clientWidth-Ct.offsetWidth)/2),Ct.style.left=Hr+"px"),_t&&(null!=(or=Mn(Gn=this,{left:Hr,top:Fr,right:Hr+Ct.offsetWidth,bottom:Fr+Ct.offsetHeight})).scrollTop&&Hn(Gn,or.scrollTop),null!=or.scrollLeft&&Pn(Gn,or.scrollLeft))},triggerOnKeyDown:Qn(sl),triggerOnKeyPress:Qn(ul),triggerOnKeyUp:al,triggerOnMouseDown:Qn(dl),execCommand:function(xt){if(Hs.hasOwnProperty(xt))return Hs[xt].call(null,this)},triggerElectric:Qn((function(xt){Dl(this,xt)})),findPosH:function(xt,Ct,_t,$t){var Vn=1;Ct<0&&(Vn=-1,Ct=-Ct);for(var Gn=st(this.doc,xt),or=0;or<Ct&&!(Gn=Pl(this.doc,Gn,Vn,_t,$t)).hitSide;++or);return Gn},moveH:Qn((function(xt,Ct){var _t=this;this.extendSelectionsBy((function($t){return _t.display.shift||_t.doc.extend||$t.empty()?Pl(_t.doc,$t.head,xt,Ct,_t.options.rtlMoveVisually):xt<0?$t.from():$t.to()}),as)})),deleteH:Qn((function(xt,Ct){var _t=this.doc.sel,$t=this.doc;_t.somethingSelected()?$t.replaceSelection("",null,"+delete"):$o(this,(function(_t){var Vn=Pl($t,_t.head,xt,Ct,!1);return xt<0?{from:Vn,to:_t.head}:{from:_t.head,to:Vn}}))})),findPosV:function(xt,Ct,_t,$t){var Vn=1,Gn=$t;Ct<0&&(Vn=-1,Ct=-Ct);for(var or=st(this.doc,xt),lr=0;lr<Ct;++lr){var Fr=Xr(this,or,"div");if(null==Gn?Gn=Fr.left:Fr.left=Gn,(or=El(this,Fr,Vn,_t)).hitSide)break}return or},moveV:Qn((function(xt,Ct){var _t=this,$t=this.doc,Vn=[],Gn=!this.display.shift&&!$t.extend&&$t.sel.somethingSelected();if($t.extendSelectionsBy((function(or){if(Gn)return xt<0?or.from():or.to();var lr=Xr(_t,or.head,"div");null!=or.goalColumn&&(lr.left=or.goalColumn),Vn.push(lr.left);var Fr=El(_t,lr,xt,Ct);return"page"==Ct&&or==$t.sel.primary()&&Nn(_t,jr(_t,Fr,"div").top-lr.top),Fr}),as),Vn.length)for(var or=0;or<$t.sel.ranges.length;or++)$t.sel.ranges[or].goalColumn=Vn[or]})),findWordAt:function(xt){var Ct=Xe(this.doc,xt.line).text,_t=xt.ch,$t=xt.ch;if(Ct){var Vn=this.getHelper(xt,"wordChars");"before"!=xt.sticky&&$t!=Ct.length||!_t?++$t:--_t;for(var Gn=Ct.charAt(_t),or=te(Gn,Vn)?function(xt){return te(xt,Vn)}:/\s/.test(Gn)?function(xt){return/\s/.test(xt)}:function(xt){return!/\s/.test(xt)&&!te(xt)};_t>0&&or(Ct.charAt(_t-1));)--_t;for(;$t<Ct.length&&or(Ct.charAt($t));)++$t}return new wi(et(xt.line,_t),et(xt.line,$t))},toggleOverwrite:function(xt){null!=xt&&xt==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?H(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),ge(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==W()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Qn((function(xt,Ct){An(this,xt,Ct)})),getScrollInfo:function(){var xt=this.display.scroller;return{left:xt.scrollLeft,top:xt.scrollTop,height:xt.scrollHeight-kr(this)-this.display.barHeight,width:xt.scrollWidth-kr(this)-this.display.barWidth,clientHeight:Mr(this),clientWidth:Tr(this)}},scrollIntoView:Qn((function(xt,Ct){null==xt?(xt={from:this.doc.sel.primary().head,to:null},null==Ct&&(Ct=this.options.cursorScrollMargin)):"number"==typeof xt?xt={from:et(xt,0),to:null}:null==xt.from&&(xt={from:xt,to:null}),xt.to||(xt.to=xt.from),xt.margin=Ct||0,null!=xt.from.line?function(xt,Ct){Dn(xt),xt.curOp.scrollToPos=Ct}(this,xt):Wn(this,xt.from,xt.to,xt.margin)})),setSize:Qn((function(xt,Ct){var _t=this,n=function(xt){return"number"==typeof xt||/^\d+$/.test(String(xt))?xt+"px":xt};null!=xt&&(this.display.wrapper.style.width=n(xt)),null!=Ct&&(this.display.wrapper.style.height=n(Ct)),this.options.lineWrapping&&Rr(this);var $t=this.display.viewFrom;this.doc.iter($t,this.display.viewTo,(function(xt){if(xt.widgets)for(var Ct=0;Ct<xt.widgets.length;Ct++)if(xt.widgets[Ct].noHScroll){cn(_t,$t,"widget");break}++$t})),this.curOp.forceUpdate=!0,ge(this,"refresh",this)})),operation:function(xt){return qn(this,xt)},startOperation:function(){return Kn(this)},endOperation:function(){return jn(this)},refresh:Qn((function(){var xt=this.display.cachedTextHeight;un(this),this.curOp.forceUpdate=!0,zr(this),An(this,this.doc.scrollLeft,this.doc.scrollTop),li(this.display),(null==xt||Math.abs(xt-en(this.display))>.5||this.options.lineWrapping)&&ln(this),ge(this,"refresh",this)})),swapDoc:Qn((function(xt){var Ct=this.doc;return Ct.cm=null,this.state.selectingText&&this.state.selectingText(),Wi(this,xt),zr(this),this.display.input.reset(),An(this,xt.scrollLeft,xt.scrollTop),this.curOp.forceScroll=!0,sr(this,"swapDoc",this,Ct),Ct})),phrase:function(xt){var Ct=this.options.phrases;return Ct&&Object.prototype.hasOwnProperty.call(Ct,xt)?Ct[xt]:xt},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},be(xt),xt.registerHelper=function(Ct,$t,Vn){_t.hasOwnProperty(Ct)||(_t[Ct]=xt[Ct]={_global:[]}),_t[Ct][$t]=Vn},xt.registerGlobalHelper=function(Ct,$t,Vn,Gn){xt.registerHelper(Ct,$t,Gn),_t[Ct]._global.push({pred:Vn,val:Gn})}}(Ll);var na="iter insert remove copy getEditor constructor".split(" ");for(var ra in No.prototype)No.prototype.hasOwnProperty(ra)&&B(na,ra)<0&&(Ll.prototype[ra]=function(xt){return function(){return xt.apply(this.doc,arguments)}}(No.prototype[ra]));return be(No),Ll.inputStyles={textarea:Ul,contenteditable:Il},Ll.defineMode=function(xt){Ll.defaults.mode||"null"==xt||(Ll.defaults.mode=xt),function(xt,Ct){arguments.length>2&&(Ct.dependencies=Array.prototype.slice.call(arguments,2)),As[xt]=Ct}.apply(this,arguments)},Ll.defineMIME=function(xt,Ct){Ds[xt]=Ct},Ll.defineMode("null",(function(){return{token:function(xt){return xt.skipToEnd()}}})),Ll.defineMIME("text/plain","null"),Ll.defineExtension=function(xt,Ct){Ll.prototype[xt]=Ct},Ll.defineDocExtension=function(xt,Ct){No.prototype[xt]=Ct},Ll.fromTextArea=function(xt,Ct){if((Ct=Ct?I(Ct):{}).value=xt.value,!Ct.tabindex&&xt.tabIndex&&(Ct.tabindex=xt.tabIndex),!Ct.placeholder&&xt.placeholder&&(Ct.placeholder=xt.placeholder),null==Ct.autofocus){var _t=W();Ct.autofocus=_t==xt||null!=xt.getAttribute("autofocus")&&_t==document.body}function n(){xt.value=or.getValue()}var $t;if(xt.form&&(fe(xt.form,"submit",n),!Ct.leaveSubmitMethodAlone)){var Vn=xt.form;$t=Vn.submit;try{var Gn=Vn.submit=function(){n(),Vn.submit=$t,Vn.submit(),Vn.submit=Gn}}catch(xt){}}Ct.finishInit=function(_t){_t.save=n,_t.getTextArea=function(){return xt},_t.toTextArea=function(){_t.toTextArea=isNaN,n(),xt.parentNode.removeChild(_t.getWrapperElement()),xt.style.display="",xt.form&&(pe(xt.form,"submit",n),Ct.leaveSubmitMethodAlone||"function"!=typeof xt.form.submit||(xt.form.submit=$t))}},xt.style.display="none";var or=Ll((function(Ct){return xt.parentNode.insertBefore(Ct,xt.nextSibling)}),Ct);return or},function(xt){xt.off=pe,xt.on=fe,xt.wheelEventPixels=mi,xt.Doc=No,xt.splitLines=ys,xt.countColumn=R,xt.findColumn=X,xt.isWordChar=ee,xt.Pass=os,xt.signal=ge,xt.Line=Xt,xt.changeEnd=Si,xt.scrollbarModel=js,xt.Pos=et,xt.cmpPos=tt,xt.modes=As,xt.mimeModes=Ds,xt.resolveMode=Re,xt.getMode=ze,xt.modeExtensions=Es,xt.extendMode=Ge,xt.copyState=Ue,xt.startState=Ke,xt.innerMode=Ve,xt.commands=Hs,xt.keyMap=qs,xt.keyName=Xo,xt.isModifierKey=Ko,xt.lookupKey=Vo,xt.normalizeKeyMap=Uo,xt.StringStream=je,xt.SharedTextMarker=Lo,xt.TextMarker=Co,xt.LineWidget=bo,xt.e_preventDefault=we,xt.e_stopPropagation=xe,xt.e_stop=Se,xt.addClass=H,xt.contains=D,xt.rmClass=T,xt.keyNames=zs}(Ll),Ll.version="5.65.2",Ll},"object"==typeof _t&&void 0!==Ct?Ct.exports=Vn():($t=$t||self).CodeMirror=Vn()},{}],724:[function(xt,Ct,_t){var $t;$t=function(xt){"use strict";xt.defineMode("javascript",(function(Ct,_t){var $t,Vn,Gn=Ct.indentUnit,or=_t.statementIndent,lr=_t.jsonld,Fr=_t.json||lr,Hr=!1!==_t.trackScope,xo=_t.typescript,Eo=_t.wordCharacters||/[\w$\xa1-\uffff]/,Mo=function(){function e(xt){return{type:xt,style:"keyword"}}var xt=e("keyword a"),Ct=e("keyword b"),_t=e("keyword c"),$t=e("keyword d"),Vn=e("operator"),Gn={type:"atom",style:"atom"};return{if:e("if"),while:xt,with:xt,else:Ct,do:Ct,try:Ct,finally:Ct,return:$t,break:$t,continue:$t,new:e("new"),delete:_t,void:_t,throw:_t,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:Vn,typeof:Vn,instanceof:Vn,true:Gn,false:Gn,null:Gn,undefined:Gn,NaN:Gn,Infinity:Gn,this:e("this"),class:e("class"),super:e("atom"),yield:_t,export:e("export"),import:e("import"),extends:_t,await:_t}}(),Oo=/[+\-*&%=<>!?|~^@]/,Ro=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function v(xt,Ct,_t){return $t=xt,Vn=_t,Ct}function k(xt,Ct){var _t,$t=xt.next();if('"'==$t||"'"==$t)return Ct.tokenize=(_t=$t,function(xt,Ct){var $t,Vn=!1;if(lr&&"@"==xt.peek()&&xt.match(Ro))return Ct.tokenize=k,v("jsonld-keyword","meta");for(;null!=($t=xt.next())&&($t!=_t||Vn);)Vn=!Vn&&"\\"==$t;return Vn||(Ct.tokenize=k),v("string","string")}),Ct.tokenize(xt,Ct);if("."==$t&&xt.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return v("number","number");if("."==$t&&xt.match(".."))return v("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test($t))return v($t);if("="==$t&&xt.eat(">"))return v("=>","operator");if("0"==$t&&xt.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return v("number","number");if(/\d/.test($t))return xt.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),v("number","number");if("/"==$t)return xt.eat("*")?(Ct.tokenize=y,y(xt,Ct)):xt.eat("/")?(xt.skipToEnd(),v("comment","comment")):Ze(xt,Ct,1)?(function(xt){for(var Ct,_t=!1,$t=!1;null!=(Ct=xt.next());){if(!_t){if("/"==Ct&&!$t)return;"["==Ct?$t=!0:$t&&"]"==Ct&&($t=!1)}_t=!_t&&"\\"==Ct}}(xt),xt.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),v("regexp","string-2")):(xt.eat("="),v("operator","operator",xt.current()));if("`"==$t)return Ct.tokenize=w,w(xt,Ct);if("#"==$t&&"!"==xt.peek())return xt.skipToEnd(),v("meta","meta");if("#"==$t&&xt.eatWhile(Eo))return v("variable","property");if("<"==$t&&xt.match("!--")||"-"==$t&&xt.match("->")&&!/\S/.test(xt.string.slice(0,xt.start)))return xt.skipToEnd(),v("comment","comment");if(Oo.test($t))return">"==$t&&Ct.lexical&&">"==Ct.lexical.type||(xt.eat("=")?"!"!=$t&&"="!=$t||xt.eat("="):/[<>*+\-|&?]/.test($t)&&(xt.eat($t),">"==$t&&xt.eat($t))),"?"==$t&&xt.eat(".")?v("."):v("operator","operator",xt.current());if(Eo.test($t)){xt.eatWhile(Eo);var Vn=xt.current();if("."!=Ct.lastType){if(Mo.propertyIsEnumerable(Vn)){var Gn=Mo[Vn];return v(Gn.type,Gn.style,Vn)}if("async"==Vn&&xt.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return v("async","keyword",Vn)}return v("variable","variable",Vn)}}function y(xt,Ct){for(var _t,$t=!1;_t=xt.next();){if("/"==_t&&$t){Ct.tokenize=k;break}$t="*"==_t}return v("comment","comment")}function w(xt,Ct){for(var _t,$t=!1;null!=(_t=xt.next());){if(!$t&&("`"==_t||"$"==_t&&xt.eat("{"))){Ct.tokenize=k;break}$t=!$t&&"\\"==_t}return v("quasi","string-2",xt.current())}var Io="([{}])";function x(xt,Ct){Ct.fatArrowAt&&(Ct.fatArrowAt=null);var _t=xt.string.indexOf("=>",xt.start);if(!(_t<0)){if(xo){var $t=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(xt.string.slice(xt.start,_t));$t&&(_t=$t.index)}for(var Vn=0,Gn=!1,or=_t-1;or>=0;--or){var lr=xt.string.charAt(or),Fr=Io.indexOf(lr);if(Fr>=0&&Fr<3){if(!Vn){++or;break}if(0==--Vn){"("==lr&&(Gn=!0);break}}else if(Fr>=3&&Fr<6)++Vn;else if(Eo.test(lr))Gn=!0;else if(/["'\/`]/.test(lr))for(;;--or){if(0==or)return;if(xt.string.charAt(or-1)==lr&&"\\"!=xt.string.charAt(or-2)){or--;break}}else if(Gn&&!Vn){++or;break}}Gn&&!Vn&&(Ct.fatArrowAt=or)}}var Bo={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function g(xt,Ct,_t,$t,Vn,Gn){this.indented=xt,this.column=Ct,this.type=_t,this.prev=Vn,this.info=Gn,null!=$t&&(this.align=$t)}function j(xt,Ct){if(!Hr)return!1;for(var _t=xt.localVars;_t;_t=_t.next)if(_t.name==Ct)return!0;for(var $t=xt.context;$t;$t=$t.prev)for(_t=$t.vars;_t;_t=_t.next)if(_t.name==Ct)return!0}function M(xt,Ct,_t,$t,Vn){var Gn=xt.cc;for(zo.state=xt,zo.stream=Vn,zo.marked=null,zo.cc=Gn,zo.style=Ct,xt.lexical.hasOwnProperty("align")||(xt.lexical.align=!0);;)if((Gn.length?Gn.pop():Fr?F:W)(_t,$t)){for(;Gn.length&&Gn[Gn.length-1].lex;)Gn.pop()();return zo.marked?zo.marked:"variable"==_t&&j(xt,$t)?"variable-2":Ct}}var zo={state:null,column:null,marked:null,cc:null};function V(){for(var xt=arguments.length-1;xt>=0;xt--)zo.cc.push(arguments[xt])}function E(){return V.apply(null,arguments),!0}function z(xt,Ct){for(var _t=Ct;_t;_t=_t.next)if(_t.name==xt)return!0;return!1}function I(xt){var Ct=zo.state;if(zo.marked="def",Hr){if(Ct.context)if("var"==Ct.lexical.info&&Ct.context&&Ct.context.block){var $t=function e(xt,Ct){if(Ct){if(Ct.block){var _t=e(xt,Ct.prev);return _t?_t==Ct.prev?Ct:new $(_t,Ct.vars,!0):null}return z(xt,Ct.vars)?Ct:new $(Ct.prev,new q(xt,Ct.vars),!1)}return null}(xt,Ct.context);if(null!=$t)return void(Ct.context=$t)}else if(!z(xt,Ct.localVars))return void(Ct.localVars=new q(xt,Ct.localVars));_t.globalVars&&!z(xt,Ct.globalVars)&&(Ct.globalVars=new q(xt,Ct.globalVars))}}function T(xt){return"public"==xt||"private"==xt||"protected"==xt||"abstract"==xt||"readonly"==xt}function $(xt,Ct,_t){this.prev=xt,this.vars=Ct,this.block=_t}function q(xt,Ct){this.name=xt,this.next=Ct}var Ho=new q("this",new q("arguments",null));function S(){zo.state.context=new $(zo.state.context,zo.state.localVars,!1),zo.state.localVars=Ho}function _(){zo.state.context=new $(zo.state.context,zo.state.localVars,!0),zo.state.localVars=null}function O(){zo.state.localVars=zo.state.context.vars,zo.state.context=zo.state.context.prev}function P(xt,Ct){var r=function(){var _t=zo.state,$t=_t.indented;if("stat"==_t.lexical.type)$t=_t.lexical.indented;else for(var Vn=_t.lexical;Vn&&")"==Vn.type&&Vn.align;Vn=Vn.prev)$t=Vn.indented;_t.lexical=new g($t,zo.stream.column(),xt,null,_t.lexical,Ct)};return r.lex=!0,r}function N(){var xt=zo.state;xt.lexical.prev&&(")"==xt.lexical.type&&(xt.indented=xt.lexical.indented),xt.lexical=xt.lexical.prev)}function U(xt){return function t(Ct){return Ct==xt?E():";"==xt||"}"==Ct||")"==Ct||"]"==Ct?V():E(t)}}function W(xt,Ct){return"var"==xt?E(P("vardef",Ct),Me,U(";"),N):"keyword a"==xt?E(P("form"),D,W,N):"keyword b"==xt?E(P("form"),W,N):"keyword d"==xt?zo.stream.match(/^\s*$/,!1)?E():E(P("stat"),J,U(";"),N):"debugger"==xt?E(U(";")):"{"==xt?E(P("}"),_,se,N,O):";"==xt?E():"if"==xt?("else"==zo.state.lexical.info&&zo.state.cc[zo.state.cc.length-1]==N&&zo.state.cc.pop()(),E(P("form"),D,W,N,Te)):"function"==xt?E(Se):"for"==xt?E(P("form"),_,$e,W,O,N):"class"==xt||xo&&"interface"==Ct?(zo.marked="keyword",E(P("form","class"==xt?xt:Ct),Ue,N)):"variable"==xt?xo&&"declare"==Ct?(zo.marked="keyword",E(W)):xo&&("module"==Ct||"enum"==Ct||"type"==Ct)&&zo.stream.match(/^\s*\w/,!1)?(zo.marked="keyword","enum"==Ct?E(Xe):"type"==Ct?E(Oe,U("operator"),pe,U(";")):E(P("form"),Ae,U("{"),P("}"),se,N,N)):xo&&"namespace"==Ct?(zo.marked="keyword",E(P("form"),F,W,N)):xo&&"abstract"==Ct?(zo.marked="keyword",E(W)):E(P("stat"),te):"switch"==xt?E(P("form"),D,U("{"),P("}","switch"),_,se,N,N,O):"case"==xt?E(F,U(":")):"default"==xt?E(U(":")):"catch"==xt?E(P("form"),S,B,W,N,O):"export"==xt?E(P("stat"),He,N):"import"==xt?E(P("stat"),Ge,N):"async"==xt?E(W):"@"==Ct?E(F,W):V(P("stat"),F,U(";"),N)}function B(xt){if("("==xt)return E(Pe,U(")"))}function F(xt,Ct){return G(xt,Ct,!1)}function H(xt,Ct){return G(xt,Ct,!0)}function D(xt){return"("!=xt?V():E(P(")"),J,U(")"),N)}function G(xt,Ct,_t){if(zo.state.fatArrowAt==zo.stream.start){var $t=_t?Y:X;if("("==xt)return E(S,P(")"),oe(Pe,")"),N,U("=>"),$t,O);if("variable"==xt)return V(S,Ae,U("=>"),$t,O)}var Vn=_t?L:K;return Bo.hasOwnProperty(xt)?E(Vn):"function"==xt?E(Se,Vn):"class"==xt||xo&&"interface"==Ct?(zo.marked="keyword",E(P("form"),Ne,N)):"keyword c"==xt||"async"==xt?E(_t?H:F):"("==xt?E(P(")"),J,U(")"),N,Vn):"operator"==xt||"spread"==xt?E(_t?H:F):"["==xt?E(P("]"),Re,N,Vn):"{"==xt?ce(ne,"}",null,Vn):"quasi"==xt?V(Q,Vn):"new"==xt?E(function(xt){return function(Ct){return"."==Ct?E(xt?ee:Z):"variable"==Ct&&xo?E(he,xt?L:K):V(xt?H:F)}}(_t)):E()}function J(xt){return xt.match(/[;\}\)\],]/)?V():V(F)}function K(xt,Ct){return","==xt?E(J):L(xt,Ct,!1)}function L(xt,Ct,_t){var $t=0==_t?K:L,Vn=0==_t?F:H;return"=>"==xt?E(S,_t?Y:X,O):"operator"==xt?/\+\+|--/.test(Ct)||xo&&"!"==Ct?E($t):xo&&"<"==Ct&&zo.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?E(P(">"),oe(pe,">"),N,$t):"?"==Ct?E(F,U(":"),Vn):E(Vn):"quasi"==xt?V(Q,$t):";"!=xt?"("==xt?ce(H,")","call",$t):"."==xt?E(re,$t):"["==xt?E(P("]"),J,U("]"),N,$t):xo&&"as"==Ct?(zo.marked="keyword",E(pe,$t)):"regexp"==xt?(zo.state.lastType=zo.marked="operator",zo.stream.backUp(zo.stream.pos-zo.stream.start-1),E(Vn)):void 0:void 0}function Q(xt,Ct){return"quasi"!=xt?V():"${"!=Ct.slice(Ct.length-2)?E(Q):E(J,R)}function R(xt){if("}"==xt)return zo.marked="string-2",zo.state.tokenize=w,E(Q)}function X(xt){return x(zo.stream,zo.state),V("{"==xt?W:F)}function Y(xt){return x(zo.stream,zo.state),V("{"==xt?W:H)}function Z(xt,Ct){if("target"==Ct)return zo.marked="keyword",E(K)}function ee(xt,Ct){if("target"==Ct)return zo.marked="keyword",E(L)}function te(xt){return":"==xt?E(N,W):V(K,U(";"),N)}function re(xt){if("variable"==xt)return zo.marked="property",E()}function ne(xt,Ct){return"async"==xt?(zo.marked="property",E(ne)):"variable"==xt||"keyword"==zo.style?(zo.marked="property","get"==Ct||"set"==Ct?E(ae):(xo&&zo.state.fatArrowAt==zo.stream.start&&(_t=zo.stream.match(/^\s*:\s*/,!1))&&(zo.state.fatArrowAt=zo.stream.pos+_t[0].length),E(ie))):"number"==xt||"string"==xt?(zo.marked=lr?"property":zo.style+" property",E(ie)):"jsonld-keyword"==xt?E(ie):xo&&T(Ct)?(zo.marked="keyword",E(ne)):"["==xt?E(F,ue,U("]"),ie):"spread"==xt?E(H,ie):"*"==Ct?(zo.marked="keyword",E(ne)):":"==xt?V(ie):void 0;var _t}function ae(xt){return"variable"!=xt?V(ie):(zo.marked="property",E(Se))}function ie(xt){return":"==xt?E(H):"("==xt?V(Se):void 0}function oe(xt,Ct,_t){function n($t,Vn){if(_t?_t.indexOf($t)>-1:","==$t){var Gn=zo.state.lexical;return"call"==Gn.info&&(Gn.pos=(Gn.pos||0)+1),E((function(_t,$t){return _t==Ct||$t==Ct?V():V(xt)}),n)}return $t==Ct||Vn==Ct?E():_t&&_t.indexOf(";")>-1?V(xt):E(U(Ct))}return function(_t,$t){return _t==Ct||$t==Ct?E():V(xt,n)}}function ce(xt,Ct,_t){for(var $t=3;$t<arguments.length;$t++)zo.cc.push(arguments[$t]);return E(P(Ct,_t),oe(xt,Ct),N)}function se(xt){return"}"==xt?E():V(W,se)}function ue(xt,Ct){if(xo){if(":"==xt)return E(pe);if("?"==Ct)return E(ue)}}function fe(xt,Ct){if(xo&&(":"==xt||"in"==Ct))return E(pe)}function le(xt){if(xo&&":"==xt)return zo.stream.match(/^\s*\w+\s+is\b/,!1)?E(F,de,pe):E(pe)}function de(xt,Ct){if("is"==Ct)return zo.marked="keyword",E()}function pe(xt,Ct){return"keyof"==Ct||"typeof"==Ct||"infer"==Ct||"readonly"==Ct?(zo.marked="keyword",E("typeof"==Ct?H:pe)):"variable"==xt||"void"==Ct?(zo.marked="type",E(xe)):"|"==Ct||"&"==Ct?E(pe):"string"==xt||"number"==xt||"atom"==xt?E(xe):"["==xt?E(P("]"),oe(pe,"]",","),N,xe):"{"==xt?E(P("}"),ve,N,xe):"("==xt?E(oe(be,")"),me,xe):"<"==xt?E(oe(pe,">"),pe):"quasi"==xt?V(ye,xe):void 0}function me(xt){if("=>"==xt)return E(pe)}function ve(xt){return xt.match(/[\}\)\]]/)?E():","==xt||";"==xt?E(ve):V(ke,ve)}function ke(xt,Ct){return"variable"==xt||"keyword"==zo.style?(zo.marked="property",E(ke)):"?"==Ct||"number"==xt||"string"==xt?E(ke):":"==xt?E(pe):"["==xt?E(U("variable"),fe,U("]"),ke):"("==xt?V(_e,ke):xt.match(/[;\}\)\],]/)?void 0:E()}function ye(xt,Ct){return"quasi"!=xt?V():"${"!=Ct.slice(Ct.length-2)?E(ye):E(pe,we)}function we(xt){if("}"==xt)return zo.marked="string-2",zo.state.tokenize=w,E(ye)}function be(xt,Ct){return"variable"==xt&&zo.stream.match(/^\s*[?:]/,!1)||"?"==Ct?E(be):":"==xt?E(pe):"spread"==xt?E(be):V(pe)}function xe(xt,Ct){return"<"==Ct?E(P(">"),oe(pe,">"),N,xe):"|"==Ct||"."==xt||"&"==Ct?E(pe):"["==xt?E(pe,U("]"),xe):"extends"==Ct||"implements"==Ct?(zo.marked="keyword",E(pe)):"?"==Ct?E(pe,U(":"),pe):void 0}function he(xt,Ct){if("<"==Ct)return E(P(">"),oe(pe,">"),N,xe)}function ge(){return V(pe,je)}function je(xt,Ct){if("="==Ct)return E(pe)}function Me(xt,Ct){return"enum"==Ct?(zo.marked="keyword",E(Xe)):V(Ae,ue,ze,Ie)}function Ae(xt,Ct){return xo&&T(Ct)?(zo.marked="keyword",E(Ae)):"variable"==xt?(I(Ct),E()):"spread"==xt?E(Ae):"["==xt?ce(Ee,"]"):"{"==xt?ce(Ve,"}"):void 0}function Ve(xt,Ct){return"variable"!=xt||zo.stream.match(/^\s*:/,!1)?("variable"==xt&&(zo.marked="property"),"spread"==xt?E(Ae):"}"==xt?V():"["==xt?E(F,U("]"),U(":"),Ve):E(U(":"),Ae,ze)):(I(Ct),E(ze))}function Ee(){return V(Ae,ze)}function ze(xt,Ct){if("="==Ct)return E(H)}function Ie(xt){if(","==xt)return E(Me)}function Te(xt,Ct){if("keyword b"==xt&&"else"==Ct)return E(P("form","else"),W,N)}function $e(xt,Ct){return"await"==Ct?E($e):"("==xt?E(P(")"),qe,N):void 0}function qe(xt){return"var"==xt?E(Me,Ce):"variable"==xt?E(Ce):V(Ce)}function Ce(xt,Ct){return")"==xt?E():";"==xt?E(Ce):"in"==Ct||"of"==Ct?(zo.marked="keyword",E(F,Ce)):V(F,Ce)}function Se(xt,Ct){return"*"==Ct?(zo.marked="keyword",E(Se)):"variable"==xt?(I(Ct),E(Se)):"("==xt?E(S,P(")"),oe(Pe,")"),N,le,W,O):xo&&"<"==Ct?E(P(">"),oe(ge,">"),N,Se):void 0}function _e(xt,Ct){return"*"==Ct?(zo.marked="keyword",E(_e)):"variable"==xt?(I(Ct),E(_e)):"("==xt?E(S,P(")"),oe(Pe,")"),N,le,O):xo&&"<"==Ct?E(P(">"),oe(ge,">"),N,_e):void 0}function Oe(xt,Ct){return"keyword"==xt||"variable"==xt?(zo.marked="type",E(Oe)):"<"==Ct?E(P(">"),oe(ge,">"),N):void 0}function Pe(xt,Ct){return"@"==Ct&&E(F,Pe),"spread"==xt?E(Pe):xo&&T(Ct)?(zo.marked="keyword",E(Pe)):xo&&"this"==xt?E(ue,ze):V(Ae,ue,ze)}function Ne(xt,Ct){return"variable"==xt?Ue(xt,Ct):We(xt,Ct)}function Ue(xt,Ct){if("variable"==xt)return I(Ct),E(We)}function We(xt,Ct){return"<"==Ct?E(P(">"),oe(ge,">"),N,We):"extends"==Ct||"implements"==Ct||xo&&","==xt?("implements"==Ct&&(zo.marked="keyword"),E(xo?pe:F,We)):"{"==xt?E(P("}"),Be,N):void 0}function Be(xt,Ct){return"async"==xt||"variable"==xt&&("static"==Ct||"get"==Ct||"set"==Ct||xo&&T(Ct))&&zo.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(zo.marked="keyword",E(Be)):"variable"==xt||"keyword"==zo.style?(zo.marked="property",E(Fe,Be)):"number"==xt||"string"==xt?E(Fe,Be):"["==xt?E(F,ue,U("]"),Fe,Be):"*"==Ct?(zo.marked="keyword",E(Be)):xo&&"("==xt?V(_e,Be):";"==xt||","==xt?E(Be):"}"==xt?E():"@"==Ct?E(F,Be):void 0}function Fe(xt,Ct){if("!"==Ct)return E(Fe);if("?"==Ct)return E(Fe);if(":"==xt)return E(pe,ze);if("="==Ct)return E(H);var _t=zo.state.lexical.prev;return V(_t&&"interface"==_t.info?_e:Se)}function He(xt,Ct){return"*"==Ct?(zo.marked="keyword",E(Qe,U(";"))):"default"==Ct?(zo.marked="keyword",E(F,U(";"))):"{"==xt?E(oe(De,"}"),Qe,U(";")):V(W)}function De(xt,Ct){return"as"==Ct?(zo.marked="keyword",E(U("variable"))):"variable"==xt?V(H,De):void 0}function Ge(xt){return"string"==xt?E():"("==xt?V(F):"."==xt?V(K):V(Je,Ke,Qe)}function Je(xt,Ct){return"{"==xt?ce(Je,"}"):("variable"==xt&&I(Ct),"*"==Ct&&(zo.marked="keyword"),E(Le))}function Ke(xt){if(","==xt)return E(Je,Ke)}function Le(xt,Ct){if("as"==Ct)return zo.marked="keyword",E(Je)}function Qe(xt,Ct){if("from"==Ct)return zo.marked="keyword",E(F)}function Re(xt){return"]"==xt?E():V(oe(H,"]"))}function Xe(){return V(P("form"),Ae,U("{"),P("}"),oe(Ye,"}"),N,N)}function Ye(){return V(Ae,ze)}function Ze(xt,Ct,_t){return Ct.tokenize==k&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Ct.lastType)||"quasi"==Ct.lastType&&/\{\s*$/.test(xt.string.slice(0,xt.pos-(_t||0)))}return S.lex=_.lex=!0,O.lex=!0,N.lex=!0,{startState:function(xt){var Ct={tokenize:k,lastType:"sof",cc:[],lexical:new g((xt||0)-Gn,0,"block",!1),localVars:_t.localVars,context:_t.localVars&&new $(null,null,!1),indented:xt||0};return _t.globalVars&&"object"==typeof _t.globalVars&&(Ct.globalVars=_t.globalVars),Ct},token:function(xt,Ct){if(xt.sol()&&(Ct.lexical.hasOwnProperty("align")||(Ct.lexical.align=!1),Ct.indented=xt.indentation(),x(xt,Ct)),Ct.tokenize!=y&&xt.eatSpace())return null;var _t=Ct.tokenize(xt,Ct);return"comment"==$t?_t:(Ct.lastType="operator"!=$t||"++"!=Vn&&"--"!=Vn?$t:"incdec",M(Ct,_t,$t,Vn,xt))},indent:function(Ct,$t){if(Ct.tokenize==y||Ct.tokenize==w)return xt.Pass;if(Ct.tokenize!=k)return 0;var Vn,lr=$t&&$t.charAt(0),Fr=Ct.lexical;if(!/^\s*else\b/.test($t))for(var Hr=Ct.cc.length-1;Hr>=0;--Hr){var xo=Ct.cc[Hr];if(xo==N)Fr=Fr.prev;else if(xo!=Te&&xo!=O)break}for(;("stat"==Fr.type||"form"==Fr.type)&&("}"==lr||(Vn=Ct.cc[Ct.cc.length-1])&&(Vn==K||Vn==L)&&!/^[,\.=+\-*:?[\(]/.test($t));)Fr=Fr.prev;or&&")"==Fr.type&&"stat"==Fr.prev.type&&(Fr=Fr.prev);var Eo=Fr.type,Mo=lr==Eo;return"vardef"==Eo?Fr.indented+("operator"==Ct.lastType||","==Ct.lastType?Fr.info.length+1:0):"form"==Eo&&"{"==lr?Fr.indented:"form"==Eo?Fr.indented+Gn:"stat"==Eo?Fr.indented+(function(xt,Ct){return"operator"==xt.lastType||","==xt.lastType||Oo.test(Ct.charAt(0))||/[,.]/.test(Ct.charAt(0))}(Ct,$t)?or||Gn:0):"switch"!=Fr.info||Mo||0==_t.doubleIndentSwitch?Fr.align?Fr.column+(Mo?0:1):Fr.indented+(Mo?0:Gn):Fr.indented+(/^(?:case|default)\b/.test($t)?Gn:2*Gn)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Fr?null:"/*",blockCommentEnd:Fr?null:"*/",blockCommentContinue:Fr?null:" * ",lineComment:Fr?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Fr?"json":"javascript",jsonldMode:lr,jsonMode:Fr,expressionAllowed:Ze,skipExpression:function(Ct){M(Ct,"atom","atom","true",new xt.StringStream("",2,null))}}})),xt.registerHelper("wordChars","javascript",/[\w$]/),xt.defineMIME("text/javascript","javascript"),xt.defineMIME("text/ecmascript","javascript"),xt.defineMIME("application/javascript","javascript"),xt.defineMIME("application/x-javascript","javascript"),xt.defineMIME("application/ecmascript","javascript"),xt.defineMIME("application/json",{name:"javascript",json:!0}),xt.defineMIME("application/x-json",{name:"javascript",json:!0}),xt.defineMIME("application/manifest+json",{name:"javascript",json:!0}),xt.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),xt.defineMIME("text/typescript",{name:"javascript",typescript:!0}),xt.defineMIME("application/typescript",{name:"javascript",typescript:!0})},$t("object"==typeof _t&&"object"==typeof Ct?xt("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":723}],725:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0});var $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(xt){return typeof xt}:function(xt){return xt&&"function"==typeof Symbol&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt},Vn=function(){function t(xt,Ct){for(var _t=0;_t<Ct.length;_t++){var $t=Ct[_t];$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(xt,$t.key,$t)}}return function(xt,Ct,_t){return Ct&&t(xt.prototype,Ct),_t&&t(xt,_t),xt}}();function _toConsumableArray(xt){if(Array.isArray(xt)){for(var Ct=0,_t=Array(xt.length);Ct<xt.length;Ct++)_t[Ct]=xt[Ct];return _t}return Array.from(xt)}var Gn=/^:([a-z])(\(([^)]+)\))?/,or="numeric",lr="long",Fr="2-digit",Hr="string",xo="decimal",Eo="currency",Mo="percent",Oo={weekday:void 0,era:void 0,year:void 0,month:lr,day:or,hour:void 0,minute:void 0,second:void 0,timeZoneName:void 0},Ro={weekday:void 0,era:void 0,year:or,month:lr,day:void 0,hour:void 0,minute:void 0,second:void 0,timeZoneName:void 0},Io={d:{weekday:void 0,era:void 0,year:or,month:or,day:or,hour:void 0,minute:void 0,second:void 0,timeZoneName:void 0},D:{weekday:lr,era:void 0,year:or,month:lr,day:or,hour:void 0,minute:void 0,second:void 0,timeZoneName:void 0},f:{weekday:lr,era:void 0,year:or,month:lr,day:or,hour:or,minute:Fr,second:void 0,timeZoneName:void 0},F:{weekday:lr,era:void 0,year:or,month:lr,day:or,hour:or,minute:Fr,second:Fr,timeZoneName:void 0},g:{weekday:void 0,era:void 0,year:or,month:or,day:or,hour:or,minute:Fr,second:void 0,timeZoneName:void 0},G:{weekday:void 0,era:void 0,year:or,month:or,day:or,hour:or,minute:Fr,second:Fr,timeZoneName:void 0},m:Oo,M:Oo,t:{weekday:void 0,era:void 0,year:void 0,month:void 0,day:void 0,hour:or,minute:Fr,second:void 0,timeZoneName:void 0},T:{weekday:void 0,era:void 0,year:void 0,month:void 0,day:void 0,hour:or,minute:Fr,second:Fr,timeZoneName:void 0},y:Ro,Y:Ro},Bo=function(){function t(){var xt=this;(function _classCallCheck(xt,Ct){if(!(xt instanceof Ct))throw new TypeError("Cannot call a class as a function")})(this,t),this.defaultConfig={locales:void 0,translations:{},number:{currency:"USD"},date:{},string:{}},this.configs={"":this.defaultConfig},this.translationCache={},this.keyCache={},this.typeInfoCache={},this._localizers={s:function(Ct,_t,$t){var Vn=void 0;return $t&&null!==(Vn=xt._runCustomFormatters(Ct,Hr,$t,_t))?Vn:_t?_t.toLocaleString(Ct.locales):String(_t)},n:function(Ct,_t,Vn){if("number"!=typeof _t)throw Error("value is not a number. type: "+(void 0===_t?"undefined":$t(_t)));if(Vn){var Gn,or=parseInt(Vn);if(!isNaN(or))return _t.toLocaleString(Ct.locales,Object.assign({},Ct.number,{style:xo,minimumFractionDigits:or,maximumFractionDigits:or}));if(null!==(Gn=xt._runCustomFormatters(Ct,"number",Vn,_t)))return Gn}return _t.toLocaleString(Ct.locales,Object.assign({},Ct.number,{style:xo,minimumFractionDigits:0,maximumFractionDigits:3}))},t:function(Ct,_t,$t){if(!(_t instanceof Date))throw Error("value is not a Date. type: "+_t.constructor.name);if($t){switch($t.toUpperCase()){case"R":return _t.toUTCString();case"O":return _t.toISOString()}var Vn=Io[$t];if(Vn)return _t.toLocaleString(Ct.locales,Object.assign({},Ct.date,Vn));var Gn=xt._runCustomFormatters(Ct,"date",$t,_t);if(null!==Gn)return Gn}return _t.toLocaleString(Ct.locales,Object.assign({},Ct.date))},c:function(xt,Ct,_t){if("number"!=typeof Ct)throw Error("value is not a number. type: "+(void 0===Ct?"undefined":$t(Ct)));return Ct.toLocaleString(xt.locales,_t?Object.assign({},xt.number,{style:Eo,currency:_t}):Object.assign({},xt.number,{style:Eo}))},p:function(xt,Ct,_t){if("number"!=typeof Ct)throw Error("value is not a number. type: "+(void 0===Ct?"undefined":$t(Ct)));return Ct.toLocaleString(xt.locales,_t?Object.assign({},xt.number,{style:Mo,minimumFractionDigits:_t}):Object.assign({},xt.number,{style:Mo}))}},this.i18n=this.i18n.bind(this),this.translate=this.translate.bind(this),this.i18nConfig=this.i18nConfig.bind(this),this._localize=this._localize.bind(this),this._extractTypeInfo=this._extractTypeInfo.bind(this)}return Vn(t,[{key:"i18nConfig",value:function(xt){var Ct=xt.locales,_t=xt.translations,$t=xt.group,Vn=xt.number,Gn=xt.date,or=xt.standardFormatters;this.translationCache={};var lr=this.configs[$t||""]||this.defaultConfig;this.configs[$t||""]=Object.assign({},lr,{locales:Ct||lr.locales,translations:_t||lr.translations,number:Vn||lr.number,date:Gn||lr.date,standardFormatters:or||lr.standardFormatters})}},{key:"i18n",value:function(xt,Ct,_t){for(var $t=this,Vn=this._buildKey(_t),Gn=this._getCachedTranslation(xt,Ct,Vn),or=Gn.configGroup,lr=Gn.translatedKey,Fr=_t.slice(1).map(this._extractTypeInfo),Hr=arguments.length,xo=Array(Hr>3?Hr-3:0),Eo=3;Eo<Hr;Eo++)xo[Eo-3]=arguments[Eo];var Mo=xo.map((function(xt,Ct){return $t._localize(or,xt,Fr[Ct])}));return this._buildMessage.apply(this,[lr].concat(_toConsumableArray(Mo)))}},{key:"translate",value:function(xt,Ct,_t){var $t=this;null==_t?_t="":"string"!=typeof _t&&(_t=String(_t));for(var Vn=this._getCachedTranslation(xt,Ct,_t),Gn=Vn.configGroup,or=Vn.translatedKey,lr=arguments.length,Fr=Array(lr>3?lr-3:0),Hr=3;Hr<lr;Hr++)Fr[Hr-3]=arguments[Hr];var xo=Fr.map((function(xt){return xt instanceof Object&&xt.constructor===Object?$t._localize(Gn,xt.value||"",{type:xt.formatter||"s",options:xt.format}):$t._localize(Gn,xt,{type:"s",options:""})}));return this._buildMessage.apply(this,[or].concat(_toConsumableArray(xo)))}},{key:"_getCachedTranslation",value:function(xt,Ct,_t){var $t=[xt||"",Ct||"",_t].join(),Vn=this.translationCache[$t],Gn=this.configs[Ct||""]||this.defaultConfig;if(Vn)return{configGroup:Gn,translatedKey:Vn};var or=this._getTranslation(xt,Gn,_t);return this.translationCache[$t]=or,{configGroup:Gn,translatedKey:or}}},{key:"_getTranslation",value:function(xt,Ct,_t){var Vn=Ct.translations,Gn=void 0,or=void 0;return(void 0===xt?"undefined":$t(xt))===Hr&&(or=xt),or&&(Gn=Vn[or])instanceof Object&&(Gn=Gn[_t]),Gn||(Gn="string"==typeof Vn[_t]&&Vn[_t]||_t),Gn}},{key:"_runCustomFormatters",value:function(xt,Ct,_t,$t){var Vn=null;if(xt.standardFormatters){var Gn=xt.standardFormatters[Ct];if(Gn){var or=Gn[_t];or&&(Vn=or(xt.locales,xt[Ct],$t))}}return Vn}},{key:"_extractTypeInfo",value:function(xt){var Ct=this.typeInfoCache[xt];if(Ct)return Ct;var _t=Gn.exec(xt);return Ct=_t?{type:_t[1],options:_t[3]}:{type:"s",options:""},this.typeInfoCache[xt]=Ct,Ct}},{key:"_localize",value:function(xt,Ct,_t){var $t=_t.type,Vn=_t.options,Gn=this._localizers[$t];if(Gn)return Gn(xt,Ct,Vn);throw new Error("Type '"+$t+"' is not supported. Supported types are: "+Object.keys(this._localizers).join())}},{key:"_buildKey",value:function(xt){var Ct=xt.join(),_t=this.keyCache[Ct];if(_t)return _t;var i=function(xt){return xt.replace(Gn,"")},$t=i(xt[xt.length-1]),Vn=xt.slice(0,-1).reduceRight((function(xt,Ct,_t){return i(Ct)+"${"+_t+"}"+xt}),$t).replace(/\r\n/g,"\n");return this.keyCache[Ct]=Vn,Vn}},{key:"_buildMessage",value:function(xt){for(var Ct=arguments.length,_t=Array(Ct>1?Ct-1:0),$t=1;$t<Ct;$t++)_t[$t-1]=arguments[$t];return xt.replace(/\${(\d)}/g,(function(xt,Ct){return _t[Number(Ct)]}))}}]),t}(),zo=new Bo,Ho=zo.i18nConfig,i18n=function(xt){for(var Ct=arguments.length,_t=Array(Ct>1?Ct-1:0),$t=1;$t<Ct;$t++)_t[$t-1]=arguments[$t];if("string"==typeof xt){if(_t.length&&"string"==typeof _t[0]){var r=function(Ct){for(var $t=arguments.length,Vn=Array($t>1?$t-1:0),Gn=1;Gn<$t;Gn++)Vn[Gn-1]=arguments[Gn];return zo.i18n.apply(zo,[xt,_t[0],Ct].concat(Vn))};return r.translate=function(Ct){for(var $t=arguments.length,Vn=Array($t>1?$t-1:0),Gn=1;Gn<$t;Gn++)Vn[Gn-1]=arguments[Gn];return zo.translate.apply(zo,[xt,_t[0],Ct].concat(Vn))},r}var o=function(Ct){for(var _t=arguments.length,$t=Array(_t>1?_t-1:0),Vn=1;Vn<_t;Vn++)$t[Vn-1]=arguments[Vn];return zo.i18n.apply(zo,[xt,null,Ct].concat($t))};return o.translate=function(Ct){for(var _t=arguments.length,$t=Array(_t>1?_t-1:0),Vn=1;Vn<_t;Vn++)$t[Vn-1]=arguments[Vn];return zo.translate.apply(zo,[xt,null,Ct].concat($t))},o}return zo.i18n.apply(zo,[null,null,xt].concat(_t))};i18n.translate=function(xt){for(var Ct=arguments.length,_t=Array(Ct>1?Ct-1:0),$t=1;$t<Ct;$t++)_t[$t-1]=arguments[$t];return zo.translate.apply(zo,[null,null,xt].concat(_t))};var i18nGroup=function(xt,Ct){return function(_t){return _t.prototype.i18n=function(_t){for(var $t=arguments.length,Vn=Array($t>1?$t-1:0),Gn=1;Gn<$t;Gn++)Vn[Gn-1]=arguments[Gn];return i18n(xt,Ct).apply(void 0,[_t].concat(Vn))},_t.prototype.i18n.translate=function(_t){for(var $t=arguments.length,Vn=Array($t>1?$t-1:0),Gn=1;Gn<$t;Gn++)Vn[Gn-1]=arguments[Gn];return zo.translate.apply(zo,[xt,Ct,_t].concat(Vn))},_t}};"undefined"!=typeof window&&(window.i18n=i18n,window.i18nConfig=Ho,window.i18nGroup=i18nGroup),_t.default=i18n,_t.i18nConfig=Ho,_t.i18nGroup=i18nGroup},{}],726:[function(xt,Ct,_t){(function(xt){(function(){var $t,Vn;$t=this,Vn=function(){"use strict";function e(xt,Ct,_t){var $t=new XMLHttpRequest;$t.open("GET",xt),$t.responseType="blob",$t.onload=function(){Vn($t.response,Ct,_t)},$t.onerror=function(){console.error("could not download file")},$t.send()}function t(xt){var Ct=new XMLHttpRequest;Ct.open("HEAD",xt,!1);try{Ct.send()}catch(xt){}return 200<=Ct.status&&299>=Ct.status}function n(xt){try{xt.dispatchEvent(new MouseEvent("click"))}catch(_t){var Ct=document.createEvent("MouseEvents");Ct.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),xt.dispatchEvent(Ct)}}var _t="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof xt&&xt.global===xt?xt:void 0,$t=_t.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),Vn=_t.saveAs||("object"!=typeof window||window!==_t?function(){}:"download"in HTMLAnchorElement.prototype&&!$t?function(xt,Ct,$t){var Vn=_t.URL||_t.webkitURL,Gn=document.createElement("a");Ct=Ct||xt.name||"download",Gn.download=Ct,Gn.rel="noopener","string"==typeof xt?(Gn.href=xt,Gn.origin===location.origin?n(Gn):t(Gn.href)?e(xt,Ct,$t):n(Gn,Gn.target="_blank")):(Gn.href=Vn.createObjectURL(xt),setTimeout((function(){Vn.revokeObjectURL(Gn.href)}),4e4),setTimeout((function(){n(Gn)}),0))}:"msSaveOrOpenBlob"in navigator?function(xt,Ct,_t){if(Ct=Ct||xt.name||"download","string"!=typeof xt)navigator.msSaveOrOpenBlob(function(xt,Ct){return void 0===Ct?Ct={autoBom:!1}:"object"!=typeof Ct&&(console.warn("Deprecated: Expected third argument to be a object"),Ct={autoBom:!Ct}),Ct.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(xt.type)?new Blob(["\ufeff",xt],{type:xt.type}):xt}(xt,_t),Ct);else if(t(xt))e(xt,Ct,_t);else{var $t=document.createElement("a");$t.href=xt,$t.target="_blank",setTimeout((function(){n($t)}))}}:function(xt,Ct,Vn,Gn){if((Gn=Gn||open("","_blank"))&&(Gn.document.title=Gn.document.body.innerText="downloading..."),"string"==typeof xt)return e(xt,Ct,Vn);var or="application/octet-stream"===xt.type,lr=/constructor/i.test(_t.HTMLElement)||_t.safari,Fr=/CriOS\/[\d]+/.test(navigator.userAgent);if((Fr||or&&lr||$t)&&"undefined"!=typeof FileReader){var Hr=new FileReader;Hr.onloadend=function(){var xt=Hr.result;xt=Fr?xt:xt.replace(/^data:[^;]*;/,"data:attachment/file;"),Gn?Gn.location.href=xt:location=xt,Gn=null},Hr.readAsDataURL(xt)}else{var xo=_t.URL||_t.webkitURL,Eo=xo.createObjectURL(xt);Gn?Gn.location=Eo:location.href=Eo,Gn=null,setTimeout((function(){xo.revokeObjectURL(Eo)}),4e4)}});_t.saveAs=Vn.saveAs=Vn,void 0!==Ct&&(Ct.exports=Vn)},void 0!==_t?Vn():(Vn(),$t.FileSaver={})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],727:[function(xt,Ct,_t){(function(xt){(function(){Ct.exports=function isElectron(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||!(void 0===xt||"object"!=typeof xt.versions||!xt.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}}).call(this)}).call(this,xt("_process"))},{_process:712}],728:[function(xt,Ct,_t){"use strict";var $t;var Vn="http://www.w3.org/1999/xhtml",Gn="undefined"==typeof document?void 0:document,or=!!Gn&&"content"in Gn.createElement("template"),lr=!!Gn&&Gn.createRange&&"createContextualFragment"in Gn.createRange();function toElement(xt){return xt=xt.trim(),or?function createFragmentFromTemplate(xt){var Ct=Gn.createElement("template");return Ct.innerHTML=xt,Ct.content.childNodes[0]}(xt):lr?function createFragmentFromRange(xt){return $t||($t=Gn.createRange()).selectNode(Gn.body),$t.createContextualFragment(xt).childNodes[0]}(xt):function createFragmentFromWrap(xt){var Ct=Gn.createElement("body");return Ct.innerHTML=xt,Ct.childNodes[0]}(xt)}function compareNodeNames(xt,Ct){var _t,$t,Vn=xt.nodeName,Gn=Ct.nodeName;return Vn===Gn||(_t=Vn.charCodeAt(0),$t=Gn.charCodeAt(0),_t<=90&&$t>=97?Vn===Gn.toUpperCase():$t<=90&&_t>=97&&Gn===Vn.toUpperCase())}function syncBooleanAttrProp(xt,Ct,_t){xt[_t]!==Ct[_t]&&(xt[_t]=Ct[_t],xt[_t]?xt.setAttribute(_t,""):xt.removeAttribute(_t))}var Fr={OPTION:function(xt,Ct){var _t=xt.parentNode;if(_t){var $t=_t.nodeName.toUpperCase();"OPTGROUP"===$t&&($t=(_t=_t.parentNode)&&_t.nodeName.toUpperCase()),"SELECT"!==$t||_t.hasAttribute("multiple")||(xt.hasAttribute("selected")&&!Ct.selected&&(xt.setAttribute("selected","selected"),xt.removeAttribute("selected")),_t.selectedIndex=-1)}syncBooleanAttrProp(xt,Ct,"selected")},INPUT:function(xt,Ct){syncBooleanAttrProp(xt,Ct,"checked"),syncBooleanAttrProp(xt,Ct,"disabled"),xt.value!==Ct.value&&(xt.value=Ct.value),Ct.hasAttribute("value")||xt.removeAttribute("value")},TEXTAREA:function(xt,Ct){var _t=Ct.value;xt.value!==_t&&(xt.value=_t);var $t=xt.firstChild;if($t){var Vn=$t.nodeValue;if(Vn==_t||!_t&&Vn==xt.placeholder)return;$t.nodeValue=_t}},SELECT:function(xt,Ct){if(!Ct.hasAttribute("multiple")){for(var _t,$t,Vn=-1,Gn=0,or=xt.firstChild;or;)if("OPTGROUP"===($t=or.nodeName&&or.nodeName.toUpperCase()))or=(_t=or).firstChild;else{if("OPTION"===$t){if(or.hasAttribute("selected")){Vn=Gn;break}Gn++}!(or=or.nextSibling)&&_t&&(or=_t.nextSibling,_t=null)}xt.selectedIndex=Vn}}};function noop(){}function defaultGetNodeKey(xt){if(xt)return xt.getAttribute&&xt.getAttribute("id")||xt.id}var Hr=function morphdomFactory(xt){return function(Ct,_t,$t){if($t||($t={}),"string"==typeof _t)if("#document"===Ct.nodeName||"HTML"===Ct.nodeName||"BODY"===Ct.nodeName){var or=_t;(_t=Gn.createElement("html")).innerHTML=or}else _t=toElement(_t);var lr=$t.getNodeKey||defaultGetNodeKey,Hr=$t.onBeforeNodeAdded||noop,xo=$t.onNodeAdded||noop,Eo=$t.onBeforeElUpdated||noop,Mo=$t.onElUpdated||noop,Oo=$t.onBeforeNodeDiscarded||noop,Ro=$t.onNodeDiscarded||noop,Io=$t.onBeforeElChildrenUpdated||noop,Bo=!0===$t.childrenOnly,zo=Object.create(null),Ho=[];function p(xt){Ho.push(xt)}function T(xt,Ct,_t){!1!==Oo(xt)&&(Ct&&Ct.removeChild(xt),Ro(xt),function e(xt,Ct){if(1===xt.nodeType)for(var _t=xt.firstChild;_t;){var $t=void 0;Ct&&($t=lr(_t))?p($t):(Ro(_t),_t.firstChild&&e(_t,Ct)),_t=_t.nextSibling}}(xt,_t))}function v(xt){xo(xt);for(var Ct=xt.firstChild;Ct;){var _t=Ct.nextSibling,$t=lr(Ct);if($t){var Vn=zo[$t];Vn&&compareNodeNames(Ct,Vn)?(Ct.parentNode.replaceChild(Vn,Ct),A(Vn,Ct)):v(Ct)}else v(Ct);Ct=_t}}function A(Ct,_t,$t){var Vn=lr(_t);if(Vn&&delete zo[Vn],!$t){if(!1===Eo(Ct,_t))return;if(xt(Ct,_t),Mo(Ct),!1===Io(Ct,_t))return}"TEXTAREA"!==Ct.nodeName?function(xt,Ct){var _t,$t,Vn,or,xo,Eo=Ct.firstChild,Mo=xt.firstChild;e:for(;Eo;){for(or=Eo.nextSibling,_t=lr(Eo);Mo;){if(Vn=Mo.nextSibling,Eo.isSameNode&&Eo.isSameNode(Mo)){Eo=or,Mo=Vn;continue e}$t=lr(Mo);var Oo=Mo.nodeType,Ro=void 0;if(Oo===Eo.nodeType&&(1===Oo?(_t?_t!==$t&&((xo=zo[_t])?Vn===xo?Ro=!1:(xt.insertBefore(xo,Mo),$t?p($t):T(Mo,xt,!0),Mo=xo):Ro=!1):$t&&(Ro=!1),(Ro=!1!==Ro&&compareNodeNames(Mo,Eo))&&A(Mo,Eo)):3!==Oo&&8!=Oo||(Ro=!0,Mo.nodeValue!==Eo.nodeValue&&(Mo.nodeValue=Eo.nodeValue))),Ro){Eo=or,Mo=Vn;continue e}$t?p($t):T(Mo,xt,!0),Mo=Vn}if(_t&&(xo=zo[_t])&&compareNodeNames(xo,Eo))xt.appendChild(xo),A(xo,Eo);else{var Io=Hr(Eo);!1!==Io&&(Io&&(Eo=Io),Eo.actualize&&(Eo=Eo.actualize(xt.ownerDocument||Gn)),xt.appendChild(Eo),v(Eo))}Eo=or,Mo=Vn}!function(xt,Ct,_t){for(;Ct;){var $t=Ct.nextSibling;(_t=lr(Ct))?p(_t):T(Ct,xt,!0),Ct=$t}}(xt,Mo,$t);var Bo=Fr[xt.nodeName];Bo&&Bo(xt,Ct)}(Ct,_t):Fr.TEXTAREA(Ct,_t)}!function e(xt){if(1===xt.nodeType||11===xt.nodeType)for(var Ct=xt.firstChild;Ct;){var _t=lr(Ct);_t&&(zo[_t]=Ct),e(Ct),Ct=Ct.nextSibling}}(Ct);var Qo=Ct,pi=Qo.nodeType,gi=_t.nodeType;if(!Bo)if(1===pi)1===gi?compareNodeNames(Ct,_t)||(Ro(Ct),Qo=function moveChildren(xt,Ct){for(var _t=xt.firstChild;_t;){var $t=_t.nextSibling;Ct.appendChild(_t),_t=$t}return Ct}(Ct,function createElementNS(xt,Ct){return Ct&&Ct!==Vn?Gn.createElementNS(Ct,xt):Gn.createElement(xt)}(_t.nodeName,_t.namespaceURI))):Qo=_t;else if(3===pi||8===pi){if(gi===pi)return Qo.nodeValue!==_t.nodeValue&&(Qo.nodeValue=_t.nodeValue),Qo;Qo=_t}if(Qo===_t)Ro(Ct);else{if(_t.isSameNode&&_t.isSameNode(Qo))return;if(A(Qo,_t,Bo),Ho)for(var es=0,ts=Ho.length;es<ts;es++){var ns=zo[Ho[es]];ns&&T(ns,ns.parentNode,!1)}}return!Bo&&Qo!==Ct&&Ct.parentNode&&(Qo.actualize&&(Qo=Qo.actualize(Ct.ownerDocument||Gn)),Ct.parentNode.replaceChild(Qo,Ct)),Qo}}((function morphAttrs(xt,Ct){var _t,$t,Vn,Gn,or=Ct.attributes;if(11!==Ct.nodeType&&11!==xt.nodeType){for(var lr=or.length-1;lr>=0;lr--)$t=(_t=or[lr]).name,Vn=_t.namespaceURI,Gn=_t.value,Vn?($t=_t.localName||$t,xt.getAttributeNS(Vn,$t)!==Gn&&("xmlns"===_t.prefix&&($t=_t.name),xt.setAttributeNS(Vn,$t,Gn))):xt.getAttribute($t)!==Gn&&xt.setAttribute($t,Gn);for(var Fr=xt.attributes,Hr=Fr.length-1;Hr>=0;Hr--)$t=(_t=Fr[Hr]).name,(Vn=_t.namespaceURI)?($t=_t.localName||$t,Ct.hasAttributeNS(Vn,$t)||xt.removeAttributeNS(Vn,$t)):Ct.hasAttribute($t)||xt.removeAttribute($t)}}));Ct.exports=Hr},{}],729:[function(xt,Ct,_t){"use strict";var $t=function(){function s(xt,Ct){this.source=xt,this.sink=Ct,this.disposed=!1}return s.prototype.dispose=function(){if(!this.disposed)return this.disposed=!0,0===this.source.remove(this.sink)&&this.source._dispose()},s}();_t.ProxyDisposable=$t},{}],730:[function(xt,Ct,_t){"use strict";var $t,Vn=this&&this.__extends||($t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xt,Ct){xt.__proto__=Ct}||function(xt,Ct){for(var _t in Ct)Ct.hasOwnProperty(_t)&&(xt[_t]=Ct[_t])},function(xt,Ct){function o(){this.constructor=xt}$t(xt,Ct),xt.prototype=null===Ct?Object.create(Ct):(o.prototype=Ct.prototype,new o)}),Gn=xt("most"),or=xt("@most/multicast"),lr=xt("./ProxyDisposable"),Fr=Gn.never().source,Hr=function(xt){function r(){var Ct=xt.call(this,Fr)||this;return Ct.attached=!1,Ct.running=!1,Ct.sinks=[],Ct}return Vn(r,xt),r.prototype.run=function(xt,Ct){return this.add(xt),this.attached&&!this.running?(this.running=!0,this._disposable=this.source.run(this,Ct),this._disposable):new lr.ProxyDisposable(this,xt)},r.prototype.attach=function(xt){if(this.attached)throw new Error("Can only proxy 1 stream");this.attached=!0,this.sinks.length?this._disposable=xt.run(this,Gn.defaultScheduler):this.source=xt},r.prototype.end=function(Ct,_t){return this.attached=!1,this.running=!1,xt.prototype.end.call(this,Ct,_t)},r}(or.MulticastSource);_t.ProxySource=Hr},{"./ProxyDisposable":729,"@most/multicast":732,most:770}],731:[function(xt,Ct,_t){"use strict";var $t=xt("most"),Vn=xt("./ProxySource");_t.proxy=function proxy(){var xt=new Vn.ProxySource;return{attach:function(Ct){return xt.attach(Ct.source),Ct},stream:new $t.Stream(xt)}}},{"./ProxySource":730,most:770}],732:[function(xt,Ct,_t){var $t,Vn;$t=this,Vn=function(xt,Ct){"use strict";var s=function(xt,Ct){this.source=xt,this.sink=Ct,this.disposed=!1};function i(xt,Ct,_t){try{_t.event(xt,Ct)}catch(Ct){_t.error(xt,Ct)}}function n(xt,Ct,_t){try{_t.end(xt,Ct)}catch(Ct){_t.error(xt,Ct)}}s.prototype.dispose=function(){if(!this.disposed)return this.disposed=!0,0===this.source.remove(this.sink)&&this.source._dispose()};var o=function(xt){return xt.dispose()},_t={dispose:function(){}},u=function(xt){this.source=xt,this.sinks=[],this._disposable=_t};u.prototype.run=function(xt,Ct){return 1===this.add(xt)&&(this._disposable=this.source.run(this,Ct)),new s(this,xt)},u.prototype._dispose=function(){var xt=this._disposable;return this._disposable=_t,Promise.resolve(xt).then(o)},u.prototype.add=function(xt){return this.sinks=Ct.append(xt,this.sinks),this.sinks.length},u.prototype.remove=function(xt){var _t=Ct.findIndex(xt,this.sinks);return _t>=0&&(this.sinks=Ct.remove(_t,this.sinks)),this.sinks.length},u.prototype.event=function(xt,Ct){var _t=this.sinks;if(1===_t.length)return _t[0].event(xt,Ct);for(var $t=0;$t<_t.length;++$t)i(xt,Ct,_t[$t])},u.prototype.end=function(xt,Ct){for(var _t=this.sinks,$t=0;$t<_t.length;++$t)n(xt,Ct,_t[$t])},u.prototype.error=function(xt,Ct){for(var _t=this.sinks,$t=0;$t<_t.length;++$t)_t[$t].error(xt,Ct)},xt.default=function(xt){var Ct=xt.source;return Ct instanceof u?xt:new xt.constructor(new u(Ct))},xt.MulticastSource=u,Object.defineProperty(xt,"__esModule",{value:!0})},"object"==typeof _t&&void 0!==Ct?Vn(_t,xt("@most/prelude")):Vn($t.mostMulticast=$t.mostMulticast||{},$t.mostPrelude)},{"@most/prelude":733}],733:[function(xt,Ct,_t){var $t,Vn;$t=this,Vn=function(xt){"use strict";function n(xt,Ct){if(xt<0)throw new TypeError("n must be >= 0");var _t=Ct.length;return 0===xt||0===_t?Ct:xt>=_t?[]:function(xt,Ct,_t){for(var $t=new Array(_t),Vn=0;Vn<_t;++Vn)$t[Vn]=Ct[xt+Vn];return $t}(xt,Ct,_t-xt)}function e(xt){return function n(Ct,_t){switch(arguments.length){case 0:return n;case 1:return function(_t){return xt(Ct,_t)};default:return xt(Ct,_t)}}}function t(xt){return function n(Ct,_t,$t){switch(arguments.length){case 0:return n;case 1:return e((function(_t,$t){return xt(Ct,_t,$t)}));case 2:return function($t){return xt(Ct,_t,$t)};default:return xt(Ct,_t,$t)}}}xt.append=function(xt,Ct){for(var _t=Ct.length,$t=new Array(_t+1),Vn=0;Vn<_t;++Vn)$t[Vn]=Ct[Vn];return $t[_t]=xt,$t},xt.apply=function(xt,Ct){return xt(Ct)},xt.compose=function(xt,Ct){return function(_t){return xt(Ct(_t))}},xt.concat=function(xt,Ct){var _t=xt.length,$t=Ct.length,Vn=new Array(_t+$t),Gn=0;for(Gn=0;Gn<_t;Gn++)Vn[Gn]=xt[Gn];for(var or=0;or<$t;or++)Vn[Gn++]=Ct[or];return Vn},xt.cons=function(xt,Ct){var _t=Ct.length,$t=new Array(_t+1);$t[0]=xt;for(var Vn=0;Vn<_t;++Vn)$t[Vn+1]=Ct[Vn];return $t},xt.copy=function(xt){for(var Ct=xt.length,_t=new Array(Ct),$t=0;$t<Ct;++$t)_t[$t]=xt[$t];return _t},xt.curry2=e,xt.curry3=t,xt.curry4=function(xt){return function n(Ct,_t,$t,Vn){switch(arguments.length){case 0:return n;case 1:return t((function(_t,$t,Vn){return xt(Ct,_t,$t,Vn)}));case 2:return e((function($t,Vn){return xt(Ct,_t,$t,Vn)}));case 3:return function(Vn){return xt(Ct,_t,$t,Vn)};default:return xt(Ct,_t,$t,Vn)}}},xt.drop=n,xt.findIndex=function(xt,Ct){for(var _t=0,$t=Ct.length;_t<$t;++_t)if(xt===Ct[_t])return _t;return-1},xt.id=function(xt){return xt},xt.isArrayLike=function(xt){return null!=xt&&"number"==typeof xt.length&&"function"!=typeof xt},xt.map=function(xt,Ct){for(var _t=Ct.length,$t=new Array(_t),Vn=0;Vn<_t;++Vn)$t[Vn]=xt(Ct[Vn]);return $t},xt.reduce=function(xt,Ct,_t){for(var $t=Ct,Vn=0,Gn=_t.length;Vn<Gn;++Vn)$t=xt($t,_t[Vn],Vn);return $t},xt.remove=function(xt,Ct){if(xt<0)throw new TypeError("i must be >= 0");var _t=Ct.length;return 0===_t||xt>=_t?Ct:1===_t?[]:function(xt,Ct,_t){var $t,Vn=new Array(_t);for($t=0;$t<xt;++$t)Vn[$t]=Ct[$t];for($t=xt;$t<_t;++$t)Vn[$t]=Ct[$t+1];return Vn}(xt,Ct,_t-1)},xt.removeAll=function(xt,Ct){for(var _t=Ct.length,$t=new Array(_t),Vn=0,Gn=void 0,or=0;or<_t;++or)xt(Gn=Ct[or])||($t[Vn]=Gn,++Vn);return $t.length=Vn,$t},xt.replace=function(xt,Ct,_t){if(Ct<0)throw new TypeError("i must be >= 0");for(var $t=_t.length,Vn=new Array($t),Gn=0;Gn<$t;++Gn)Vn[Gn]=Ct===Gn?xt:_t[Gn];return Vn},xt.tail=function(xt){return n(1,xt)},Object.defineProperty(xt,"__esModule",{value:!0})},Vn("object"==typeof _t&&void 0!==Ct?_t:($t=$t||self).mostPrelude={})},{}],734:[function(xt,Ct,_t){"use strict";function LinkedList(){this.head=null,this.length=0}Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=LinkedList,LinkedList.prototype.add=function(xt){null!==this.head&&(this.head.prev=xt,xt.next=this.head),this.head=xt,++this.length},LinkedList.prototype.remove=function(xt){--this.length,xt===this.head&&(this.head=this.head.next),null!==xt.next&&(xt.next.prev=xt.prev,xt.next=null),null!==xt.prev&&(xt.prev.next=xt.next,xt.prev=null)},LinkedList.prototype.isEmpty=function(){return 0===this.length},LinkedList.prototype.dispose=function(){if(this.isEmpty())return Promise.resolve();var xt=[],Ct=this.head;for(this.head=null,this.length=0;null!==Ct;)xt.push(Ct.dispose()),Ct=Ct.next;return Promise.all(xt)}},{}],735:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.isPromise=function isPromise(xt){return null!==xt&&"object"==typeof xt&&"function"==typeof xt.then}},{}],736:[function(xt,Ct,_t){"use strict";function Queue(xt){this._capacity=xt||32,this._length=0,this._head=0}Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=Queue,Queue.prototype.push=function(xt){var Ct=this._length;this._checkCapacity(Ct+1),this[this._head+Ct&this._capacity-1]=xt,this._length=Ct+1},Queue.prototype.shift=function(){var xt=this._head,Ct=this[xt];return this[xt]=void 0,this._head=xt+1&this._capacity-1,this._length--,Ct},Queue.prototype.isEmpty=function(){return 0===this._length},Queue.prototype.length=function(){return this._length},Queue.prototype._checkCapacity=function(xt){this._capacity<xt&&this._ensureCapacity(this._capacity<<1)},Queue.prototype._ensureCapacity=function(xt){var Ct=this._capacity;this._capacity=xt;var _t=this._head+this._length;_t>Ct&&function copy(xt,Ct,_t,$t,Vn){for(var Gn=0;Gn<Vn;++Gn)_t[Gn+$t]=xt[Gn+Ct],xt[Gn+Ct]=void 0}(this,0,this,Ct,_t&Ct-1)}},{}],737:[function(xt,Ct,_t){"use strict";function Stream(xt){this.source=xt}Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=Stream,Stream.prototype.run=function(xt,Ct){return this.source.run(xt,Ct)}},{}],738:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.scan=function scan(xt,Ct,_t){return new $t.default(new Scan(xt,Ct,_t.source))},_t.reduce=function reduce(xt,Ct,_t){return(0,Gn.withDefaultScheduler)(new Reduce(xt,Ct,_t.source))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe")),Gn=xt("../runSource"),or=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("../disposable/dispose")),lr=_interopRequireDefault(xt("../scheduler/PropagateTask"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function Scan(xt,Ct,_t){this.source=_t,this.f=xt,this.value=Ct}function ScanSink(xt,Ct,_t){this.f=xt,this.value=Ct,this.sink=_t}function Reduce(xt,Ct,_t){this.source=_t,this.f=xt,this.value=Ct}function ReduceSink(xt,Ct,_t){this.f=xt,this.value=Ct,this.sink=_t}Scan.prototype.run=function(xt,Ct){var _t=Ct.asap(lr.default.event(this.value,xt)),$t=this.source.run(new ScanSink(this.f,this.value,xt),Ct);return or.all([_t,$t])},ScanSink.prototype.event=function(xt,Ct){var _t=this.f;this.value=_t(this.value,Ct),this.sink.event(xt,this.value)},ScanSink.prototype.error=Vn.default.prototype.error,ScanSink.prototype.end=Vn.default.prototype.end,Reduce.prototype.run=function(xt,Ct){return this.source.run(new ReduceSink(this.f,this.value,xt),Ct)},ReduceSink.prototype.event=function(xt,Ct){var _t=this.f;this.value=_t(this.value,Ct),this.sink.event(xt,this.value)},ReduceSink.prototype.error=Vn.default.prototype.error,ReduceSink.prototype.end=function(xt){this.sink.end(xt,this.value)}},{"../Stream":737,"../disposable/dispose":765,"../runSource":776,"../scheduler/PropagateTask":778,"../sink/Pipe":785}],739:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.ap=function ap(xt,Ct){return(0,$t.combine)(Vn.apply,xt,Ct)};var $t=xt("./combine"),Vn=xt("@most/prelude")},{"./combine":741,"@most/prelude":801}],740:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.cons=function cons(xt,Ct){return concat((0,$t.of)(xt),Ct)},_t.concat=concat;var $t=xt("../source/core"),Vn=xt("./continueWith");function concat(xt,Ct){return(0,Vn.continueWith)((function(){return Ct}),xt)}},{"../source/core":789,"./continueWith":743}],741:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.combine=function combine(xt){return combineArray(xt,Mo(arguments))},_t.combineArray=combineArray;var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireWildcard(xt("./transform")),Gn=_interopRequireWildcard(xt("../source/core")),or=_interopRequireDefault(xt("../sink/Pipe")),lr=_interopRequireDefault(xt("../sink/IndexSink")),Fr=_interopRequireWildcard(xt("../disposable/dispose")),Hr=_interopRequireWildcard(xt("@most/prelude")),xo=_interopRequireDefault(xt("../invoke"));function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}var Eo=Hr.map,Mo=Hr.tail;function combineArray(xt,Ct){var _t=Ct.length;return 0===_t?Gn.empty():1===_t?Vn.map(xt,Ct[0]):new $t.default(function combineSources(xt,Ct){return new Combine(xt,Eo(getSource,Ct))}(xt,Ct))}function getSource(xt){return xt.source}function Combine(xt,Ct){this.f=xt,this.sources=Ct}function CombineSink(xt,Ct,_t,$t){this.sink=_t,this.disposables=xt,this.sinks=Ct,this.f=$t;var Vn=Ct.length;this.awaiting=Vn,this.values=new Array(Vn),this.hasValue=new Array(Vn);for(var Gn=0;Gn<Vn;++Gn)this.hasValue[Gn]=!1;this.activeCount=Ct.length}Combine.prototype.run=function(xt,Ct){for(var _t,$t=this.sources.length,Vn=new Array($t),Gn=new Array($t),or=new CombineSink(Vn,Gn,xt,this.f),Hr=0;Hr<$t;++Hr)_t=Gn[Hr]=new lr.default(Hr,or),Vn[Hr]=this.sources[Hr].run(_t,Ct);return Fr.all(Vn)},CombineSink.prototype.error=or.default.prototype.error,CombineSink.prototype.event=function(xt,Ct){var _t=Ct.index,$t=this._updateReady(_t);this.values[_t]=Ct.value,0===$t&&this.sink.event(xt,(0,xo.default)(this.f,this.values))},CombineSink.prototype._updateReady=function(xt){return this.awaiting>0&&(this.hasValue[xt]||(this.hasValue[xt]=!0,this.awaiting-=1)),this.awaiting},CombineSink.prototype.end=function(xt,Ct){Fr.tryDispose(xt,this.disposables[Ct.index],this.sink),0==--this.activeCount&&this.sink.end(xt,Ct.value)}},{"../Stream":737,"../disposable/dispose":765,"../invoke":771,"../sink/IndexSink":784,"../sink/Pipe":785,"../source/core":789,"./transform":761,"@most/prelude":801}],742:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.concatMap=function concatMap(xt,Ct){return(0,$t.mergeMapConcurrently)(xt,1,Ct)};var $t=xt("./mergeConcurrently")},{"./mergeConcurrently":751}],743:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.continueWith=function continueWith(xt,Ct){return new $t.default(new ContinueWith(xt,Ct.source))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe")),Gn=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("../disposable/dispose"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function ContinueWith(xt,Ct){this.f=xt,this.source=Ct}function ContinueWithSink(xt,Ct,_t,$t){this.f=xt,this.sink=_t,this.scheduler=$t,this.active=!0,this.disposable=Gn.once(Ct.run(this,$t))}ContinueWith.prototype.run=function(xt,Ct){return new ContinueWithSink(this.f,this.source,xt,Ct)},ContinueWithSink.prototype.error=Vn.default.prototype.error,ContinueWithSink.prototype.event=function(xt,Ct){this.active&&this.sink.event(xt,Ct)},ContinueWithSink.prototype.end=function(xt,Ct){this.active&&(Gn.tryDispose(xt,this.disposable,this.sink),this._startNext(xt,Ct,this.sink))},ContinueWithSink.prototype._startNext=function(xt,Ct,_t){try{this.disposable=this._continue(this.f,Ct,_t)}catch(Ct){_t.error(xt,Ct)}},ContinueWithSink.prototype._continue=function(xt,Ct,_t){return xt(Ct).source.run(_t,this.scheduler)},ContinueWithSink.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()}},{"../Stream":737,"../disposable/dispose":765,"../sink/Pipe":785}],744:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.delay=function delay(xt,Ct){return xt<=0?Ct:new $t.default(new Delay(xt,Ct.source))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe")),Gn=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("../disposable/dispose")),or=_interopRequireDefault(xt("../scheduler/PropagateTask"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function Delay(xt,Ct){this.dt=xt,this.source=Ct}function DelaySink(xt,Ct,_t){this.dt=xt,this.sink=Ct,this.scheduler=_t}Delay.prototype.run=function(xt,Ct){var _t=new DelaySink(this.dt,xt,Ct);return Gn.all([_t,this.source.run(_t,Ct)])},DelaySink.prototype.dispose=function(){var xt=this;this.scheduler.cancelAll((function(Ct){return Ct.task.sink===xt.sink}))},DelaySink.prototype.event=function(xt,Ct){this.scheduler.delay(this.dt,or.default.event(Ct,this.sink))},DelaySink.prototype.end=function(xt,Ct){this.scheduler.delay(this.dt,or.default.end(Ct,this.sink))},DelaySink.prototype.error=Vn.default.prototype.error},{"../Stream":737,"../disposable/dispose":765,"../scheduler/PropagateTask":778,"../sink/Pipe":785}],745:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.flatMapError=void 0,_t.recoverWith=recoverWith,_t.throwError=function throwError(xt){return new $t.default(new ErrorSource(xt))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/SafeSink")),Gn=_interopRequireWildcard(xt("../disposable/dispose")),or=_interopRequireWildcard(xt("../source/tryEvent")),lr=_interopRequireDefault(xt("../scheduler/PropagateTask"));function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function recoverWith(xt,Ct){return new $t.default(new RecoverWith(xt,Ct.source))}_t.flatMapError=recoverWith;function ErrorSource(xt){this.value=xt}function runError(xt,Ct,_t){_t.error(xt,Ct)}function RecoverWith(xt,Ct){this.f=xt,this.source=Ct}function RecoverWithSink(xt,Ct,_t,$t){this.f=xt,this.sink=new Vn.default(_t),this.scheduler=$t,this.disposable=Ct.run(this,$t)}ErrorSource.prototype.run=function(xt,Ct){return Ct.asap(new lr.default(runError,this.value,xt))},RecoverWith.prototype.run=function(xt,Ct){return new RecoverWithSink(this.f,this.source,xt,Ct)},RecoverWithSink.prototype.event=function(xt,Ct){or.tryEvent(xt,Ct,this.sink)},RecoverWithSink.prototype.end=function(xt,Ct){or.tryEnd(xt,Ct,this.sink)},RecoverWithSink.prototype.error=function(xt,Ct){var _t=this.sink.disable();Gn.tryDispose(xt,this.disposable,this.sink),this._startNext(xt,Ct,_t)},RecoverWithSink.prototype._startNext=function(xt,Ct,_t){try{this.disposable=this._continue(this.f,Ct,_t)}catch(Ct){_t.error(xt,Ct)}},RecoverWithSink.prototype._continue=function(xt,Ct,_t){return xt(Ct).source.run(_t,this.scheduler)},RecoverWithSink.prototype.dispose=function(){return this.disposable.dispose()}},{"../Stream":737,"../disposable/dispose":765,"../scheduler/PropagateTask":778,"../sink/SafeSink":786,"../source/tryEvent":797}],746:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.filter=function filter(xt,Ct){return new $t.default(Gn.default.create(xt,Ct.source))},_t.skipRepeats=function skipRepeats(xt){return skipRepeatsWith(same,xt)},_t.skipRepeatsWith=skipRepeatsWith;var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe")),Gn=_interopRequireDefault(xt("../fusion/Filter"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function skipRepeatsWith(xt,Ct){return new $t.default(new SkipRepeats(xt,Ct.source))}function SkipRepeats(xt,Ct){this.equals=xt,this.source=Ct}function SkipRepeatsSink(xt,Ct){this.equals=xt,this.sink=Ct,this.value=void 0,this.init=!0}function same(xt,Ct){return xt===Ct}SkipRepeats.prototype.run=function(xt,Ct){return this.source.run(new SkipRepeatsSink(this.equals,xt),Ct)},SkipRepeatsSink.prototype.end=Vn.default.prototype.end,SkipRepeatsSink.prototype.error=Vn.default.prototype.error,SkipRepeatsSink.prototype.event=function(xt,Ct){this.init?(this.init=!1,this.value=Ct,this.sink.event(xt,Ct)):this.equals(this.value,Ct)||(this.value=Ct,this.sink.event(xt,Ct))}},{"../Stream":737,"../fusion/Filter":767,"../sink/Pipe":785}],747:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.flatMap=function flatMap(xt,Ct){return(0,$t.mergeMapConcurrently)(xt,1/0,Ct)},_t.join=function join(xt){return(0,$t.mergeConcurrently)(1/0,xt)};var $t=xt("./mergeConcurrently")},{"./mergeConcurrently":751}],748:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.throttle=function throttle(xt,Ct){return new $t.default(throttleSource(xt,Ct.source))},_t.debounce=function debounce(xt,Ct){return new $t.default(new Debounce(xt,Ct.source))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe")),Gn=_interopRequireDefault(xt("../fusion/Map"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function throttleSource(xt,Ct){return Ct instanceof Gn.default?function commuteMapThrottle(xt,Ct){return Gn.default.create(Ct.f,throttleSource(xt,Ct.source))}(xt,Ct):Ct instanceof Throttle?function fuseThrottle(xt,Ct){return new Throttle(Math.max(xt,Ct.period),Ct.source)}(xt,Ct):new Throttle(xt,Ct)}function Throttle(xt,Ct){this.period=xt,this.source=Ct}function ThrottleSink(xt,Ct){this.time=0,this.period=xt,this.sink=Ct}function Debounce(xt,Ct){this.dt=xt,this.source=Ct}function DebounceSink(xt,Ct,_t,$t){this.dt=xt,this.sink=_t,this.scheduler=$t,this.value=void 0,this.timer=null,this.disposable=Ct.run(this,$t)}function DebounceTask(xt,Ct){this.debounce=xt,this.value=Ct}Throttle.prototype.run=function(xt,Ct){return this.source.run(new ThrottleSink(this.period,xt),Ct)},ThrottleSink.prototype.event=function(xt,Ct){xt>=this.time&&(this.time=xt+this.period,this.sink.event(xt,Ct))},ThrottleSink.prototype.end=Vn.default.prototype.end,ThrottleSink.prototype.error=Vn.default.prototype.error,Debounce.prototype.run=function(xt,Ct){return new DebounceSink(this.dt,this.source,xt,Ct)},DebounceSink.prototype.event=function(xt,Ct){this._clearTimer(),this.value=Ct,this.timer=this.scheduler.delay(this.dt,new DebounceTask(this,Ct))},DebounceSink.prototype._event=function(xt,Ct){this._clearTimer(),this.sink.event(xt,Ct)},DebounceSink.prototype.end=function(xt,Ct){this._clearTimer()&&(this.sink.event(xt,this.value),this.value=void 0),this.sink.end(xt,Ct)},DebounceSink.prototype.error=function(xt,Ct){this._clearTimer(),this.sink.error(xt,Ct)},DebounceSink.prototype.dispose=function(){return this._clearTimer(),this.disposable.dispose()},DebounceSink.prototype._clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),this.timer=null,!0)},DebounceTask.prototype.run=function(xt){this.debounce._event(xt,this.value)},DebounceTask.prototype.error=function(xt,Ct){this.debounce.error(xt,Ct)},DebounceTask.prototype.dispose=function(){}},{"../Stream":737,"../fusion/Map":769,"../sink/Pipe":785}],749:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.loop=function loop(xt,Ct,_t){return new $t.default(new Loop(xt,Ct,_t.source))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function Loop(xt,Ct,_t){this.step=xt,this.seed=Ct,this.source=_t}function LoopSink(xt,Ct,_t){this.step=xt,this.seed=Ct,this.sink=_t}Loop.prototype.run=function(xt,Ct){return this.source.run(new LoopSink(this.step,this.seed,xt),Ct)},LoopSink.prototype.error=Vn.default.prototype.error,LoopSink.prototype.event=function(xt,Ct){var _t=this.step(this.seed,Ct);this.seed=_t.seed,this.sink.event(xt,_t.value)},LoopSink.prototype.end=function(xt){this.sink.end(xt,this.seed)}},{"../Stream":737,"../sink/Pipe":785}],750:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.merge=function merge(){return mergeArray(Hr(arguments))},_t.mergeArray=mergeArray;var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe")),Gn=_interopRequireDefault(xt("../sink/IndexSink")),or=xt("../source/core"),lr=_interopRequireWildcard(xt("../disposable/dispose")),Fr=_interopRequireWildcard(xt("@most/prelude"));function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}var Hr=Fr.copy,xo=Fr.reduce;function mergeArray(xt){var Ct=xt.length;return 0===Ct?(0,or.empty)():1===Ct?xt[0]:new $t.default(function mergeSources(xt){return new Merge(xo(appendSources,[],xt))}(xt))}function appendSources(xt,Ct){var _t=Ct.source;return _t instanceof Merge?xt.concat(_t.sources):xt.concat(_t)}function Merge(xt){this.sources=xt}function MergeSink(xt,Ct,_t){this.sink=_t,this.disposables=xt,this.activeCount=Ct.length}Merge.prototype.run=function(xt,Ct){for(var _t,$t=this.sources.length,Vn=new Array($t),or=new Array($t),Fr=new MergeSink(Vn,or,xt),Hr=0;Hr<$t;++Hr)_t=or[Hr]=new Gn.default(Hr,Fr),Vn[Hr]=this.sources[Hr].run(_t,Ct);return lr.all(Vn)},MergeSink.prototype.error=Vn.default.prototype.error,MergeSink.prototype.event=function(xt,Ct){this.sink.event(xt,Ct.value)},MergeSink.prototype.end=function(xt,Ct){lr.tryDispose(xt,this.disposables[Ct.index],this.sink),0==--this.activeCount&&this.sink.end(xt,Ct.value)}},{"../Stream":737,"../disposable/dispose":765,"../sink/IndexSink":784,"../sink/Pipe":785,"../source/core":789,"@most/prelude":801}],751:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.mergeConcurrently=function mergeConcurrently(xt,Ct){return mergeMapConcurrently(or.id,xt,Ct)},_t.mergeMapConcurrently=mergeMapConcurrently;var $t=_interopRequireDefault(xt("../Stream")),Vn=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("../disposable/dispose")),Gn=_interopRequireDefault(xt("../LinkedList")),or=xt("@most/prelude");function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function mergeMapConcurrently(xt,Ct,_t){return new $t.default(new MergeConcurrently(xt,Ct,_t.source))}function MergeConcurrently(xt,Ct,_t){this.f=xt,this.concurrency=Ct,this.source=_t}function Outer(xt,Ct,_t,$t,or){this.f=xt,this.concurrency=Ct,this.sink=$t,this.scheduler=or,this.pending=[],this.current=new Gn.default,this.disposable=Vn.once(_t.run(this,or)),this.active=!0}function Inner(xt,Ct,_t){this.prev=this.next=null,this.time=xt,this.outer=Ct,this.sink=_t,this.disposable=void 0}MergeConcurrently.prototype.run=function(xt,Ct){return new Outer(this.f,this.concurrency,this.source,xt,Ct)},Outer.prototype.event=function(xt,Ct){this._addInner(xt,Ct)},Outer.prototype._addInner=function(xt,Ct){this.current.length<this.concurrency?this._startInner(xt,Ct):this.pending.push(Ct)},Outer.prototype._startInner=function(xt,Ct){try{this._initInner(xt,Ct)}catch(Ct){this.error(xt,Ct)}},Outer.prototype._initInner=function(xt,Ct){var _t=new Inner(xt,this,this.sink);_t.disposable=function mapAndRun(xt,Ct,_t,$t){return xt(Ct).source.run(_t,$t)}(this.f,Ct,_t,this.scheduler),this.current.add(_t)},Outer.prototype.end=function(xt,Ct){this.active=!1,Vn.tryDispose(xt,this.disposable,this.sink),this._checkEnd(xt,Ct)},Outer.prototype.error=function(xt,Ct){this.active=!1,this.sink.error(xt,Ct)},Outer.prototype.dispose=function(){return this.active=!1,this.pending.length=0,Promise.all([this.disposable.dispose(),this.current.dispose()])},Outer.prototype._endInner=function(xt,Ct,_t){this.current.remove(_t),Vn.tryDispose(xt,_t,this),0===this.pending.length?this._checkEnd(xt,Ct):this._startInner(xt,this.pending.shift())},Outer.prototype._checkEnd=function(xt,Ct){!this.active&&this.current.isEmpty()&&this.sink.end(xt,Ct)},Inner.prototype.event=function(xt,Ct){this.sink.event(Math.max(xt,this.time),Ct)},Inner.prototype.end=function(xt,Ct){this.outer._endInner(Math.max(xt,this.time),Ct,this)},Inner.prototype.error=function(xt,Ct){this.outer.error(Math.max(xt,this.time),Ct)},Inner.prototype.dispose=function(){return this.disposable.dispose()}},{"../LinkedList":734,"../Stream":737,"../disposable/dispose":765,"@most/prelude":801}],752:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.observe=function observe(xt,Ct){return drain((0,Vn.tap)(xt,Ct))},_t.drain=drain;var $t=xt("../runSource"),Vn=xt("./transform");function drain(xt){return(0,$t.withDefaultScheduler)(xt.source)}},{"../runSource":776,"./transform":761}],753:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.fromPromise=function fromPromise(xt){return awaitPromises((0,Gn.of)(xt))},_t.awaitPromises=awaitPromises;var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../fatalError")),Gn=xt("../source/core");function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function awaitPromises(xt){return new $t.default(new Await(xt.source))}function Await(xt){this.source=xt}function AwaitSink(xt,Ct){this.sink=xt,this.scheduler=Ct,this.queue=Promise.resolve();var _t=this;this._eventBound=function(xt){_t.sink.event(_t.scheduler.now(),xt)},this._endBound=function(xt){_t.sink.end(_t.scheduler.now(),xt)},this._errorBound=function(xt){_t.sink.error(_t.scheduler.now(),xt)}}Await.prototype.run=function(xt,Ct){return this.source.run(new AwaitSink(xt,Ct),Ct)},AwaitSink.prototype.event=function(xt,Ct){var _t=this;this.queue=this.queue.then((function(){return _t._event(Ct)})).catch(this._errorBound)},AwaitSink.prototype.end=function(xt,Ct){var _t=this;this.queue=this.queue.then((function(){return _t._end(Ct)})).catch(this._errorBound)},AwaitSink.prototype.error=function(xt,Ct){var _t=this;this.queue=this.queue.then((function(){return _t._errorBound(Ct)})).catch(Vn.default)},AwaitSink.prototype._event=function(xt){return xt.then(this._eventBound)},AwaitSink.prototype._end=function(xt){return Promise.resolve(xt).then(this._endBound)}},{"../Stream":737,"../fatalError":766,"../source/core":789}],754:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.sample=function sample(xt,Ct){return sampleArray(xt,Ct,or.drop(2,arguments))},_t.sampleWith=function sampleWith(xt,Ct){return new $t.default(new Sampler(or.id,xt.source,[Ct.source]))},_t.sampleArray=sampleArray;var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe")),Gn=_interopRequireWildcard(xt("../disposable/dispose")),or=_interopRequireWildcard(xt("@most/prelude")),lr=_interopRequireDefault(xt("../invoke"));function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function sampleArray(xt,Ct,_t){return new $t.default(new Sampler(xt,Ct.source,or.map(getSource,_t)))}function getSource(xt){return xt.source}function Sampler(xt,Ct,_t){this.f=xt,this.sampler=Ct,this.sources=_t}function Hold(xt){this.sink=xt,this.hasValue=!1}function SampleSink(xt,Ct,_t){this.f=xt,this.sinks=Ct,this.sink=_t,this.active=!1}function hasValue(xt){return xt.hasValue}function getValue(xt){return xt.value}Sampler.prototype.run=function(xt,Ct){for(var _t,$t=this.sources.length,Vn=new Array($t+1),or=new Array($t),lr=new SampleSink(this.f,or,xt),Fr=0;Fr<$t;++Fr)_t=or[Fr]=new Hold(lr),Vn[Fr]=this.sources[Fr].run(_t,Ct);return Vn[Fr]=this.sampler.run(lr,Ct),Gn.all(Vn)},Hold.prototype.event=function(xt,Ct){this.value=Ct,this.hasValue=!0,this.sink._notify(this)},Hold.prototype.end=function(){},Hold.prototype.error=Vn.default.prototype.error,SampleSink.prototype._notify=function(){this.active||(this.active=this.sinks.every(hasValue))},SampleSink.prototype.event=function(xt){this.active&&this.sink.event(xt,(0,lr.default)(this.f,or.map(getValue,this.sinks)))},SampleSink.prototype.end=Vn.default.prototype.end,SampleSink.prototype.error=Vn.default.prototype.error},{"../Stream":737,"../disposable/dispose":765,"../invoke":771,"../sink/Pipe":785,"@most/prelude":801}],755:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.take=function take(xt,Ct){return slice(0,xt,Ct)},_t.skip=function skip(xt,Ct){return slice(xt,1/0,Ct)},_t.slice=slice,_t.takeWhile=function takeWhile(xt,Ct){return new $t.default(new TakeWhile(xt,Ct.source))},_t.skipWhile=function skipWhile(xt,Ct){return new $t.default(new SkipWhile(xt,Ct.source))},_t.skipAfter=function skipAfter(xt,Ct){return new $t.default(new SkipAfter(xt,Ct.source))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe")),Gn=_interopRequireWildcard(xt("../source/core")),or=_interopRequireWildcard(xt("../disposable/dispose")),lr=_interopRequireDefault(xt("../fusion/Map"));function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function slice(xt,Ct,_t){return Ct<=xt?Gn.empty():new $t.default(sliceSource(xt,Ct,_t.source))}function sliceSource(xt,Ct,_t){return _t instanceof lr.default?function commuteMapSlice(xt,Ct,_t){return lr.default.create(_t.f,sliceSource(xt,Ct,_t.source))}(xt,Ct,_t):_t instanceof Slice?function fuseSlice(xt,Ct,_t){return new Slice(xt+=_t.min,Ct=Math.min(Ct+_t.min,_t.max),_t.source)}(xt,Ct,_t):new Slice(xt,Ct,_t)}function Slice(xt,Ct,_t){this.source=_t,this.min=xt,this.max=Ct}function SliceSink(xt,Ct,_t,$t){this.sink=_t,this.skip=xt,this.take=Ct,this.disposable=$t}function TakeWhile(xt,Ct){this.p=xt,this.source=Ct}function TakeWhileSink(xt,Ct,_t){this.p=xt,this.sink=Ct,this.active=!0,this.disposable=_t}function SkipWhile(xt,Ct){this.p=xt,this.source=Ct}function SkipWhileSink(xt,Ct){this.p=xt,this.sink=Ct,this.skipping=!0}function SkipAfter(xt,Ct){this.p=xt,this.source=Ct}function SkipAfterSink(xt,Ct){this.p=xt,this.sink=Ct,this.skipping=!1}Slice.prototype.run=function(xt,Ct){var _t=or.settable(),$t=new SliceSink(this.min,this.max-this.min,xt,_t);return _t.setDisposable(this.source.run($t,Ct)),_t},SliceSink.prototype.end=Vn.default.prototype.end,SliceSink.prototype.error=Vn.default.prototype.error,SliceSink.prototype.event=function(xt,Ct){this.skip>0?this.skip-=1:0!==this.take&&(this.take-=1,this.sink.event(xt,Ct),0===this.take&&(this.disposable.dispose(),this.sink.end(xt,Ct)))},TakeWhile.prototype.run=function(xt,Ct){var _t=or.settable(),$t=new TakeWhileSink(this.p,xt,_t);return _t.setDisposable(this.source.run($t,Ct)),_t},TakeWhileSink.prototype.end=Vn.default.prototype.end,TakeWhileSink.prototype.error=Vn.default.prototype.error,TakeWhileSink.prototype.event=function(xt,Ct){if(this.active){var _t=this.p;this.active=_t(Ct),this.active?this.sink.event(xt,Ct):(this.disposable.dispose(),this.sink.end(xt,Ct))}},SkipWhile.prototype.run=function(xt,Ct){return this.source.run(new SkipWhileSink(this.p,xt),Ct)},SkipWhileSink.prototype.end=Vn.default.prototype.end,SkipWhileSink.prototype.error=Vn.default.prototype.error,SkipWhileSink.prototype.event=function(xt,Ct){if(this.skipping){var _t=this.p;if(this.skipping=_t(Ct),this.skipping)return}this.sink.event(xt,Ct)},SkipAfter.prototype.run=function(xt,Ct){return this.source.run(new SkipAfterSink(this.p,xt),Ct)},SkipAfterSink.prototype.event=function(xt,Ct){if(!this.skipping){var _t=this.p;this.skipping=_t(Ct),this.sink.event(xt,Ct),this.skipping&&this.sink.end(xt,Ct)}},SkipAfterSink.prototype.end=Vn.default.prototype.end,SkipAfterSink.prototype.error=Vn.default.prototype.error},{"../Stream":737,"../disposable/dispose":765,"../fusion/Map":769,"../sink/Pipe":785,"../source/core":789}],756:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.switch=void 0,_t.switchLatest=switchLatest;var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("../Stream")),Vn=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("../disposable/dispose"));function switchLatest(xt){return new $t.default(new Switch(xt.source))}function Switch(xt){this.source=xt}function SwitchSink(xt,Ct){this.sink=xt,this.scheduler=Ct,this.current=null,this.ended=!1}function Segment(xt,Ct,_t,$t){this.min=xt,this.max=Ct,this.outer=_t,this.sink=$t,this.disposable=Vn.empty()}_t.switch=switchLatest,Switch.prototype.run=function(xt,Ct){var _t=new SwitchSink(xt,Ct);return Vn.all([_t,this.source.run(_t,Ct)])},SwitchSink.prototype.event=function(xt,Ct){this._disposeCurrent(xt),this.current=new Segment(xt,1/0,this,this.sink),this.current.disposable=Ct.source.run(this.current,this.scheduler)},SwitchSink.prototype.end=function(xt,Ct){this.ended=!0,this._checkEnd(xt,Ct)},SwitchSink.prototype.error=function(xt,Ct){this.ended=!0,this.sink.error(xt,Ct)},SwitchSink.prototype.dispose=function(){return this._disposeCurrent(this.scheduler.now())},SwitchSink.prototype._disposeCurrent=function(xt){if(null!==this.current)return this.current._dispose(xt)},SwitchSink.prototype._disposeInner=function(xt,Ct){Ct._dispose(xt),Ct===this.current&&(this.current=null)},SwitchSink.prototype._checkEnd=function(xt,Ct){this.ended&&null===this.current&&this.sink.end(xt,Ct)},SwitchSink.prototype._endInner=function(xt,Ct,_t){this._disposeInner(xt,_t),this._checkEnd(xt,Ct)},SwitchSink.prototype._errorInner=function(xt,Ct,_t){this._disposeInner(xt,_t),this.sink.error(xt,Ct)},Segment.prototype.event=function(xt,Ct){xt<this.max&&this.sink.event(Math.max(xt,this.min),Ct)},Segment.prototype.end=function(xt,Ct){this.outer._endInner(Math.max(xt,this.min),Ct,this)},Segment.prototype.error=function(xt,Ct){this.outer._errorInner(Math.max(xt,this.min),Ct,this)},Segment.prototype._dispose=function(xt){this.max=xt,Vn.tryDispose(xt,this.disposable,this.sink)}},{"../Stream":737,"../disposable/dispose":765}],757:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.thru=function thru(xt,Ct){return xt(Ct)}},{}],758:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.takeUntil=takeUntil,_t.skipUntil=skipUntil,_t.during=function during(xt,Ct){return takeUntil((0,or.join)(xt),skipUntil(xt,Ct))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe")),Gn=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("../disposable/dispose")),or=xt("../combinator/flatMap");function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function takeUntil(xt,Ct){return new $t.default(new Until(xt.source,Ct.source))}function skipUntil(xt,Ct){return new $t.default(new Since(xt.source,Ct.source))}function Until(xt,Ct){this.maxSignal=xt,this.source=Ct}function Since(xt,Ct){this.minSignal=xt,this.source=Ct}function Bound(xt,Ct){this.value=xt,this.sink=Ct}function TimeWindowSink(xt,Ct,_t){this.min=xt,this.max=Ct,this.sink=_t}function LowerBound(xt,Ct,_t){this.value=1/0,this.sink=Ct,this.disposable=xt.run(this,_t)}function UpperBound(xt,Ct,_t){this.value=1/0,this.sink=Ct,this.disposable=xt.run(this,_t)}function noop(){}Until.prototype.run=function(xt,Ct){var _t=new Bound(-1/0,xt),$t=new UpperBound(this.maxSignal,xt,Ct),Vn=this.source.run(new TimeWindowSink(_t,$t,xt),Ct);return Gn.all([_t,$t,Vn])},Since.prototype.run=function(xt,Ct){var _t=new LowerBound(this.minSignal,xt,Ct),$t=new Bound(1/0,xt),Vn=this.source.run(new TimeWindowSink(_t,$t,xt),Ct);return Gn.all([_t,$t,Vn])},Bound.prototype.error=Vn.default.prototype.error,Bound.prototype.event=noop,Bound.prototype.end=noop,Bound.prototype.dispose=noop,TimeWindowSink.prototype.event=function(xt,Ct){xt>=this.min.value&&xt<this.max.value&&this.sink.event(xt,Ct)},TimeWindowSink.prototype.error=Vn.default.prototype.error,TimeWindowSink.prototype.end=Vn.default.prototype.end,LowerBound.prototype.event=function(xt){xt<this.value&&(this.value=xt)},LowerBound.prototype.end=noop,LowerBound.prototype.error=Vn.default.prototype.error,LowerBound.prototype.dispose=function(){return this.disposable.dispose()},UpperBound.prototype.event=function(xt,Ct){xt<this.value&&(this.value=xt,this.sink.end(xt,Ct))},UpperBound.prototype.end=noop,UpperBound.prototype.error=Vn.default.prototype.error,UpperBound.prototype.dispose=function(){return this.disposable.dispose()}},{"../Stream":737,"../combinator/flatMap":747,"../disposable/dispose":765,"../sink/Pipe":785}],759:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.timestamp=function timestamp(xt){return new $t.default(new Timestamp(xt.source))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../sink/Pipe"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function Timestamp(xt){this.source=xt}function TimestampSink(xt){this.sink=xt}Timestamp.prototype.run=function(xt,Ct){return this.source.run(new TimestampSink(xt),Ct)},TimestampSink.prototype.end=Vn.default.prototype.end,TimestampSink.prototype.error=Vn.default.prototype.error,TimestampSink.prototype.event=function(xt,Ct){this.sink.event(xt,{time:xt,value:Ct})}},{"../Stream":737,"../sink/Pipe":785}],760:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.transduce=function transduce(xt,Ct){return new $t.default(new Transduce(xt,Ct.source))};var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("../Stream"));function Transduce(xt,Ct){this.transducer=xt,this.source=Ct}function TransduceSink(xt,Ct){this.xf=xt,this.sink=Ct}function Transformer(xt){this.time=-1/0,this.sink=xt}function TxAdapter(xt){this.tx=xt}function LegacyTxAdapter(xt){this.tx=xt}Transduce.prototype.run=function(xt,Ct){var _t=this.transducer(new Transformer(xt));return this.source.run(new TransduceSink(function getTxHandler(xt){return"function"==typeof xt["@@transducer/step"]?new TxAdapter(xt):new LegacyTxAdapter(xt)}(_t),xt),Ct)},TransduceSink.prototype.event=function(xt,Ct){var _t=this.xf.step(xt,Ct);return this.xf.isReduced(_t)?this.sink.end(xt,this.xf.getResult(_t)):_t},TransduceSink.prototype.end=function(xt,Ct){return this.xf.result(Ct)},TransduceSink.prototype.error=function(xt,Ct){return this.sink.error(xt,Ct)},Transformer.prototype["@@transducer/init"]=Transformer.prototype.init=function(){},Transformer.prototype["@@transducer/step"]=Transformer.prototype.step=function(xt,Ct){return isNaN(xt)||(this.time=Math.max(xt,this.time)),this.sink.event(this.time,Ct)},Transformer.prototype["@@transducer/result"]=Transformer.prototype.result=function(xt){return this.sink.end(this.time,xt)},TxAdapter.prototype.step=function(xt,Ct){return this.tx["@@transducer/step"](xt,Ct)},TxAdapter.prototype.result=function(xt){return this.tx["@@transducer/result"](xt)},TxAdapter.prototype.isReduced=function(xt){return null!=xt&&xt["@@transducer/reduced"]},TxAdapter.prototype.getResult=function(xt){return xt["@@transducer/value"]},LegacyTxAdapter.prototype.step=function(xt,Ct){return this.tx.step(xt,Ct)},LegacyTxAdapter.prototype.result=function(xt){return this.tx.result(xt)},LegacyTxAdapter.prototype.isReduced=function(xt){return null!=xt&&xt.__transducers_reduced__},LegacyTxAdapter.prototype.getResult=function(xt){return xt.value}},{"../Stream":737}],761:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.map=map,_t.constant=function constant(xt,Ct){return map((function(){return xt}),Ct)},_t.tap=function tap(xt,Ct){return new $t.default(new Tap(xt,Ct.source))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../fusion/Map")),Gn=_interopRequireDefault(xt("../sink/Pipe"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function map(xt,Ct){return new $t.default(Vn.default.create(xt,Ct.source))}function Tap(xt,Ct){this.source=Ct,this.f=xt}function TapSink(xt,Ct){this.sink=Ct,this.f=xt}Tap.prototype.run=function(xt,Ct){return this.source.run(new TapSink(this.f,xt),Ct)},TapSink.prototype.end=Gn.default.prototype.end,TapSink.prototype.error=Gn.default.prototype.error,TapSink.prototype.event=function(xt,Ct){(0,this.f)(Ct),this.sink.event(xt,Ct)}},{"../Stream":737,"../fusion/Map":769,"../sink/Pipe":785}],762:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.zip=function zip(xt){return zipArray(xt,Oo(arguments))},_t.zipArray=zipArray;var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireWildcard(xt("./transform")),Gn=_interopRequireWildcard(xt("../source/core")),or=_interopRequireDefault(xt("../sink/Pipe")),lr=_interopRequireDefault(xt("../sink/IndexSink")),Fr=_interopRequireWildcard(xt("../disposable/dispose")),Hr=_interopRequireWildcard(xt("@most/prelude")),xo=_interopRequireDefault(xt("../invoke")),Eo=_interopRequireDefault(xt("../Queue"));function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}var Mo=Hr.map,Oo=Hr.tail;function zipArray(xt,Ct){return 0===Ct.length?Gn.empty():1===Ct.length?Vn.map(xt,Ct[0]):new $t.default(new Zip(xt,Mo(getSource,Ct)))}function getSource(xt){return xt.source}function Zip(xt,Ct){this.f=xt,this.sources=Ct}function ZipSink(xt,Ct,_t,$t){this.f=xt,this.sinks=_t,this.sink=$t,this.buffers=Ct}function head(xt){return xt.shift()}Zip.prototype.run=function(xt,Ct){for(var _t,$t=this.sources.length,Vn=new Array($t),Gn=new Array($t),or=new Array($t),Hr=new ZipSink(this.f,or,Gn,xt),xo=0;xo<$t;++xo)or[xo]=new Eo.default,_t=Gn[xo]=new lr.default(xo,Hr),Vn[xo]=this.sources[xo].run(_t,Ct);return Fr.all(Vn)},ZipSink.prototype.event=function(xt,Ct){var _t=this.buffers,$t=_t[Ct.index];if($t.push(Ct.value),1===$t.length()){if(!function ready(xt){for(var Ct=0,_t=xt.length;Ct<_t;++Ct)if(xt[Ct].isEmpty())return!1;return!0}(this.buffers))return;(function emitZipped(xt,Ct,_t,$t){$t.event(Ct,(0,xo.default)(xt,Mo(head,_t)))})(this.f,xt,_t,this.sink),function ended(xt,Ct){for(var _t=0,$t=xt.length;_t<$t;++_t)if(xt[_t].isEmpty()&&!Ct[_t].active)return!0;return!1}(this.buffers,this.sinks)&&this.sink.end(xt,void 0)}},ZipSink.prototype.end=function(xt,Ct){this.buffers[Ct.index].isEmpty()&&this.sink.end(xt,Ct.value)},ZipSink.prototype.error=or.default.prototype.error},{"../Queue":736,"../Stream":737,"../disposable/dispose":765,"../invoke":771,"../sink/IndexSink":784,"../sink/Pipe":785,"../source/core":789,"./transform":761,"@most/prelude":801}],763:[function(xt,Ct,_t){"use strict";function Disposable(xt,Ct){this._dispose=xt,this._data=Ct}Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=Disposable,Disposable.prototype.dispose=function(){return this._dispose(this._data)}},{}],764:[function(xt,Ct,_t){"use strict";function SettableDisposable(){this.disposable=void 0,this.disposed=!1,this._resolve=void 0;var xt=this;this.result=new Promise((function(Ct){xt._resolve=Ct}))}Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=SettableDisposable,SettableDisposable.prototype.setDisposable=function(xt){if(void 0!==this.disposable)throw new Error("setDisposable called more than once");this.disposable=xt,this.disposed&&this._resolve(xt.dispose())},SettableDisposable.prototype.dispose=function(){return this.disposed||(this.disposed=!0,void 0!==this.disposable&&(this.result=this.disposable.dispose())),this.result}},{}],765:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.tryDispose=function tryDispose(xt,Ct,_t){var $t=disposeSafely(Ct);return(0,Gn.isPromise)($t)?$t.catch((function(Ct){_t.error(xt,Ct)})):$t},_t.create=create,_t.empty=function empty(){return new $t.default(Fr,void 0)},_t.all=function all(xt){return create(disposeAll,xt)},_t.promised=function promised(xt){return create(disposePromise,xt)},_t.settable=function settable(){return new Vn.default},_t.once=once;var $t=_interopRequireDefault(xt("./Disposable")),Vn=_interopRequireDefault(xt("./SettableDisposable")),Gn=xt("../Promise"),or=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("@most/prelude"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}var lr=or.map,Fr=or.id;function create(xt,Ct){return once(new $t.default(xt,Ct))}function disposeAll(xt){return Promise.all(lr(disposeSafely,xt))}function disposeSafely(xt){try{return xt.dispose()}catch(xt){return Promise.reject(xt)}}function disposePromise(xt){return xt.then(disposeOne)}function disposeOne(xt){return xt.dispose()}function once(xt){return new $t.default(disposeMemoized,function memoized(xt){return{disposed:!1,disposable:xt,value:void 0}}(xt))}function disposeMemoized(xt){return xt.disposed||(xt.disposed=!0,xt.value=disposeSafely(xt.disposable),xt.disposable=void 0),xt.value}},{"../Promise":735,"./Disposable":763,"./SettableDisposable":764,"@most/prelude":801}],766:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=function fatalError(xt){setTimeout((function(){throw xt}),0)}},{}],767:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=Filter;var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("../sink/Pipe"));function Filter(xt,Ct){this.p=xt,this.source=Ct}function FilterSink(xt,Ct){this.p=xt,this.sink=Ct}Filter.create=function(xt,Ct){return Ct instanceof Filter?new Filter(function and(xt,Ct){return function(_t){return xt(_t)&&Ct(_t)}}(Ct.p,xt),Ct.source):new Filter(xt,Ct)},Filter.prototype.run=function(xt,Ct){return this.source.run(new FilterSink(this.p,xt),Ct)},FilterSink.prototype.end=$t.default.prototype.end,FilterSink.prototype.error=$t.default.prototype.error,FilterSink.prototype.event=function(xt,Ct){(0,this.p)(Ct)&&this.sink.event(xt,Ct)}},{"../sink/Pipe":785}],768:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=FilterMap;var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("../sink/Pipe"));function FilterMap(xt,Ct,_t){this.p=xt,this.f=Ct,this.source=_t}function FilterMapSink(xt,Ct,_t){this.p=xt,this.f=Ct,this.sink=_t}FilterMap.prototype.run=function(xt,Ct){return this.source.run(new FilterMapSink(this.p,this.f,xt),Ct)},FilterMapSink.prototype.event=function(xt,Ct){var _t=this.f;(0,this.p)(Ct)&&this.sink.event(xt,_t(Ct))},FilterMapSink.prototype.end=$t.default.prototype.end,FilterMapSink.prototype.error=$t.default.prototype.error},{"../sink/Pipe":785}],769:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=Map;var $t=_interopRequireDefault(xt("../sink/Pipe")),Vn=_interopRequireDefault(xt("./Filter")),Gn=_interopRequireDefault(xt("./FilterMap")),or=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("@most/prelude"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function Map(xt,Ct){this.f=xt,this.source=Ct}function MapSink(xt,Ct){this.f=xt,this.sink=Ct}Map.create=function(xt,Ct){return Ct instanceof Map?new Map(or.compose(xt,Ct.f),Ct.source):Ct instanceof Vn.default?new Gn.default(Ct.p,xt,Ct.source):new Map(xt,Ct)},Map.prototype.run=function(xt,Ct){return this.source.run(new MapSink(this.f,xt),Ct)},MapSink.prototype.end=$t.default.prototype.end,MapSink.prototype.error=$t.default.prototype.error,MapSink.prototype.event=function(xt,Ct){var _t=this.f;this.sink.event(xt,_t(Ct))}},{"../sink/Pipe":785,"./Filter":767,"./FilterMap":768,"@most/prelude":801}],770:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.PropagateTask=_t.defaultScheduler=_t.multicast=_t.throwError=_t.flatMapError=_t.recoverWith=_t.await=_t.awaitPromises=_t.fromPromise=_t.debounce=_t.throttle=_t.timestamp=_t.delay=_t.during=_t.since=_t.skipUntil=_t.until=_t.takeUntil=_t.skipAfter=_t.skipWhile=_t.takeWhile=_t.slice=_t.skip=_t.take=_t.distinctBy=_t.skipRepeatsWith=_t.distinct=_t.skipRepeats=_t.filter=_t.switch=_t.switchLatest=_t.zipArray=_t.zip=_t.sampleWith=_t.sampleArray=_t.sample=_t.combineArray=_t.combine=_t.mergeArray=_t.merge=_t.mergeConcurrently=_t.concatMap=_t.flatMapEnd=_t.continueWith=_t.join=_t.chain=_t.flatMap=_t.transduce=_t.ap=_t.tap=_t.constant=_t.map=_t.startWith=_t.concat=_t.generate=_t.iterate=_t.unfold=_t.reduce=_t.scan=_t.loop=_t.drain=_t.forEach=_t.observe=_t.fromEvent=_t.periodic=_t.from=_t.never=_t.empty=_t.just=_t.of=_t.Stream=void 0;var $t=xt("./source/fromEvent");Object.defineProperty(_t,"fromEvent",{enumerable:!0,get:function(){return $t.fromEvent}});var Vn=xt("./source/unfold");Object.defineProperty(_t,"unfold",{enumerable:!0,get:function(){return Vn.unfold}});var Gn=xt("./source/iterate");Object.defineProperty(_t,"iterate",{enumerable:!0,get:function(){return Gn.iterate}});var or=xt("./source/generate");Object.defineProperty(_t,"generate",{enumerable:!0,get:function(){return or.generate}});var lr=_interopRequireDefault(xt("./Stream")),Fr=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("@most/prelude")),Hr=xt("./source/core"),xo=xt("./source/from"),Eo=xt("./source/periodic"),Mo=_interopRequireDefault(xt("symbol-observable")),Oo=xt("./observable/subscribe"),Ro=xt("./combinator/thru"),Io=xt("./combinator/observe"),Bo=xt("./combinator/loop"),zo=xt("./combinator/accumulate"),Ho=xt("./combinator/build"),Qo=xt("./combinator/transform"),pi=xt("./combinator/applicative"),gi=xt("./combinator/transduce"),es=xt("./combinator/flatMap"),ts=xt("./combinator/continueWith"),ns=xt("./combinator/concatMap"),rs=xt("./combinator/mergeConcurrently"),os=xt("./combinator/merge"),is=xt("./combinator/combine"),ss=xt("./combinator/sample"),as=xt("./combinator/zip"),ls=xt("./combinator/switch"),cs=xt("./combinator/filter"),us=xt("./combinator/slice"),fs=xt("./combinator/timeslice"),hs=xt("./combinator/delay"),ps=xt("./combinator/timestamp"),ds=xt("./combinator/limit"),ms=xt("./combinator/promises"),gs=xt("./combinator/errors"),vs=_interopRequireDefault(xt("@most/multicast")),ys=_interopRequireDefault(xt("./scheduler/defaultScheduler")),bs=_interopRequireDefault(xt("./scheduler/PropagateTask"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}_t.Stream=lr.default,lr.default.of=Hr.of,lr.default.empty=Hr.empty,lr.default.from=xo.from,_t.of=Hr.of,_t.just=Hr.of,_t.empty=Hr.empty,_t.never=Hr.never,_t.from=xo.from,_t.periodic=Eo.periodic,lr.default.prototype.subscribe=function(xt){return(0,Oo.subscribe)(xt,this)},lr.default.prototype[Mo.default]=function(){return this},lr.default.prototype.thru=function(xt){return(0,Ro.thru)(xt,this)},_t.observe=Io.observe,_t.forEach=Io.observe,_t.drain=Io.drain,lr.default.prototype.observe=lr.default.prototype.forEach=function(xt){return(0,Io.observe)(xt,this)},lr.default.prototype.drain=function(){return(0,Io.drain)(this)},_t.loop=Bo.loop,lr.default.prototype.loop=function(xt,Ct){return(0,Bo.loop)(xt,Ct,this)},_t.scan=zo.scan,_t.reduce=zo.reduce,lr.default.prototype.scan=function(xt,Ct){return(0,zo.scan)(xt,Ct,this)},lr.default.prototype.reduce=function(xt,Ct){return(0,zo.reduce)(xt,Ct,this)},_t.concat=Ho.concat,_t.startWith=Ho.cons,lr.default.prototype.concat=function(xt){return(0,Ho.concat)(this,xt)},lr.default.prototype.startWith=function(xt){return(0,Ho.cons)(xt,this)},_t.map=Qo.map,_t.constant=Qo.constant,_t.tap=Qo.tap,_t.ap=pi.ap,lr.default.prototype.map=function(xt){return(0,Qo.map)(xt,this)},lr.default.prototype.ap=function(xt){return(0,pi.ap)(this,xt)},lr.default.prototype.constant=function(xt){return(0,Qo.constant)(xt,this)},lr.default.prototype.tap=function(xt){return(0,Qo.tap)(xt,this)},_t.transduce=gi.transduce,lr.default.prototype.transduce=function(xt){return(0,gi.transduce)(xt,this)},_t.flatMap=es.flatMap,_t.chain=es.flatMap,_t.join=es.join,lr.default.prototype.chain=function(xt){return(0,es.flatMap)(xt,this)},lr.default.prototype.flatMap=lr.default.prototype.chain,lr.default.prototype.join=function(){return(0,es.join)(this)},_t.continueWith=ts.continueWith,_t.flatMapEnd=ts.continueWith,lr.default.prototype.continueWith=function(xt){return(0,ts.continueWith)(xt,this)},lr.default.prototype.flatMapEnd=lr.default.prototype.continueWith,_t.concatMap=ns.concatMap,lr.default.prototype.concatMap=function(xt){return(0,ns.concatMap)(xt,this)},_t.mergeConcurrently=rs.mergeConcurrently,lr.default.prototype.mergeConcurrently=function(xt){return(0,rs.mergeConcurrently)(xt,this)},_t.merge=os.merge,_t.mergeArray=os.mergeArray,lr.default.prototype.merge=function(){return(0,os.mergeArray)(Fr.cons(this,arguments))},_t.combine=is.combine,_t.combineArray=is.combineArray,lr.default.prototype.combine=function(xt){return(0,is.combineArray)(xt,Fr.replace(this,0,arguments))},_t.sample=ss.sample,_t.sampleArray=ss.sampleArray,_t.sampleWith=ss.sampleWith,lr.default.prototype.sampleWith=function(xt){return(0,ss.sampleWith)(xt,this)},lr.default.prototype.sample=function(xt){return(0,ss.sampleArray)(xt,this,Fr.tail(arguments))},_t.zip=as.zip,_t.zipArray=as.zipArray,lr.default.prototype.zip=function(xt){return(0,as.zipArray)(xt,Fr.replace(this,0,arguments))},_t.switchLatest=ls.switchLatest,_t.switch=ls.switchLatest,lr.default.prototype.switchLatest=function(){return(0,ls.switchLatest)(this)},lr.default.prototype.switch=lr.default.prototype.switchLatest,_t.filter=cs.filter,_t.skipRepeats=cs.skipRepeats,_t.distinct=cs.skipRepeats,_t.skipRepeatsWith=cs.skipRepeatsWith,_t.distinctBy=cs.skipRepeatsWith,lr.default.prototype.filter=function(xt){return(0,cs.filter)(xt,this)},lr.default.prototype.skipRepeats=function(){return(0,cs.skipRepeats)(this)},lr.default.prototype.skipRepeatsWith=function(xt){return(0,cs.skipRepeatsWith)(xt,this)},_t.take=us.take,_t.skip=us.skip,_t.slice=us.slice,_t.takeWhile=us.takeWhile,_t.skipWhile=us.skipWhile,_t.skipAfter=us.skipAfter,lr.default.prototype.take=function(xt){return(0,us.take)(xt,this)},lr.default.prototype.skip=function(xt){return(0,us.skip)(xt,this)},lr.default.prototype.slice=function(xt,Ct){return(0,us.slice)(xt,Ct,this)},lr.default.prototype.takeWhile=function(xt){return(0,us.takeWhile)(xt,this)},lr.default.prototype.skipWhile=function(xt){return(0,us.skipWhile)(xt,this)},lr.default.prototype.skipAfter=function(xt){return(0,us.skipAfter)(xt,this)},_t.takeUntil=fs.takeUntil,_t.until=fs.takeUntil,_t.skipUntil=fs.skipUntil,_t.since=fs.skipUntil,_t.during=fs.during,lr.default.prototype.until=function(xt){return(0,fs.takeUntil)(xt,this)},lr.default.prototype.takeUntil=lr.default.prototype.until,lr.default.prototype.since=function(xt){return(0,fs.skipUntil)(xt,this)},lr.default.prototype.skipUntil=lr.default.prototype.since,lr.default.prototype.during=function(xt){return(0,fs.during)(xt,this)},_t.delay=hs.delay,lr.default.prototype.delay=function(xt){return(0,hs.delay)(xt,this)},_t.timestamp=ps.timestamp,lr.default.prototype.timestamp=function(){return(0,ps.timestamp)(this)},_t.throttle=ds.throttle,_t.debounce=ds.debounce,lr.default.prototype.throttle=function(xt){return(0,ds.throttle)(xt,this)},lr.default.prototype.debounce=function(xt){return(0,ds.debounce)(xt,this)},_t.fromPromise=ms.fromPromise,_t.awaitPromises=ms.awaitPromises,_t.await=ms.awaitPromises,lr.default.prototype.awaitPromises=function(){return(0,ms.awaitPromises)(this)},lr.default.prototype.await=lr.default.prototype.awaitPromises,_t.recoverWith=gs.recoverWith,_t.flatMapError=gs.flatMapError,_t.throwError=gs.throwError,lr.default.prototype.recoverWith=function(xt){return(0,gs.flatMapError)(xt,this)},lr.default.prototype.flatMapError=lr.default.prototype.recoverWith,_t.multicast=vs.default,lr.default.prototype.multicast=function(){return(0,vs.default)(this)},_t.defaultScheduler=ys.default,_t.PropagateTask=bs.default},{"./Stream":737,"./combinator/accumulate":738,"./combinator/applicative":739,"./combinator/build":740,"./combinator/combine":741,"./combinator/concatMap":742,"./combinator/continueWith":743,"./combinator/delay":744,"./combinator/errors":745,"./combinator/filter":746,"./combinator/flatMap":747,"./combinator/limit":748,"./combinator/loop":749,"./combinator/merge":750,"./combinator/mergeConcurrently":751,"./combinator/observe":752,"./combinator/promises":753,"./combinator/sample":754,"./combinator/slice":755,"./combinator/switch":756,"./combinator/thru":757,"./combinator/timeslice":758,"./combinator/timestamp":759,"./combinator/transduce":760,"./combinator/transform":761,"./combinator/zip":762,"./observable/subscribe":775,"./scheduler/PropagateTask":778,"./scheduler/defaultScheduler":782,"./source/core":789,"./source/from":790,"./source/fromEvent":792,"./source/generate":794,"./source/iterate":795,"./source/periodic":796,"./source/unfold":798,"@most/multicast":800,"@most/prelude":801,"symbol-observable":802}],771:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=function invoke(xt,Ct){switch(Ct.length){case 0:return xt();case 1:return xt(Ct[0]);case 2:return xt(Ct[0],Ct[1]);case 3:return xt(Ct[0],Ct[1],Ct[2]);case 4:return xt(Ct[0],Ct[1],Ct[2],Ct[3]);case 5:return xt(Ct[0],Ct[1],Ct[2],Ct[3],Ct[4]);default:return xt.apply(void 0,Ct)}}},{}],772:[function(xt,Ct,_t){"use strict";var $t;Object.defineProperty(_t,"__esModule",{value:!0}),_t.isIterable=function isIterable(xt){return"function"==typeof xt[$t]},_t.getIterator=function getIterator(xt){return xt[$t]()},_t.makeIterable=function makeIterable(xt,Ct){return Ct[$t]=xt,Ct},$t="function"==typeof Set&&"function"==typeof(new Set)["@@iterator"]?"@@iterator":"function"==typeof Symbol?Symbol.iterator:"_es6shim_iterator_"},{}],773:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.fromObservable=function fromObservable(xt){return new $t.default(new ObservableSource(xt))},_t.ObservableSource=ObservableSource,_t.SubscriberSink=SubscriberSink;var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("../Stream")),Vn=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("../disposable/dispose")),Gn=xt("../source/tryEvent");function ObservableSource(xt){this.observable=xt}function SubscriberSink(xt,Ct){this.sink=xt,this.scheduler=Ct}function unsubscribe(xt){return xt.unsubscribe()}ObservableSource.prototype.run=function(xt,Ct){var _t=this.observable.subscribe(new SubscriberSink(xt,Ct));if("function"==typeof _t)return Vn.create(_t);if(_t&&"function"==typeof _t.unsubscribe)return Vn.create(unsubscribe,_t);throw new TypeError("Observable returned invalid subscription "+String(_t))},SubscriberSink.prototype.next=function(xt){(0,Gn.tryEvent)(this.scheduler.now(),xt,this.sink)},SubscriberSink.prototype.complete=function(xt){(0,Gn.tryEnd)(this.scheduler.now(),xt,this.sink)},SubscriberSink.prototype.error=function(xt){this.sink.error(this.scheduler.now(),xt)}},{"../Stream":737,"../disposable/dispose":765,"../source/tryEvent":797}],774:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=function getObservable(xt){var Ct=null;if(xt){var _t=xt[$t.default];if("function"==typeof _t&&(!(Ct=_t.call(xt))||"function"!=typeof Ct.subscribe))throw new TypeError("invalid observable "+Ct)}return Ct};var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("symbol-observable"))},{"symbol-observable":802}],775:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.subscribe=function subscribe(xt,Ct){if(Object(xt)!==xt)throw new TypeError("subscriber must be an object");var _t=Vn.settable(),or=new SubscribeObserver(Gn.default,xt,_t);return _t.setDisposable(Ct.source.run(or,$t.default)),new Subscription(_t)},_t.SubscribeObserver=SubscribeObserver,_t.Subscription=Subscription;var $t=_interopRequireDefault(xt("../scheduler/defaultScheduler")),Vn=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("../disposable/dispose")),Gn=_interopRequireDefault(xt("../fatalError"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function SubscribeObserver(xt,Ct,_t){this.fatalError=xt,this.subscriber=Ct,this.disposable=_t}function Subscription(xt){this.disposable=xt}function throwError(xt,Ct,_t){if("function"==typeof Ct.error)try{Ct.error(xt)}catch(xt){_t(xt)}else _t(xt)}SubscribeObserver.prototype.event=function(xt,Ct){this.disposable.disposed||"function"!=typeof this.subscriber.next||this.subscriber.next(Ct)},SubscribeObserver.prototype.end=function(xt,Ct){if(!this.disposable.disposed){var _t=this.subscriber,$t=this.fatalError;Promise.resolve(this.disposable.dispose()).then((function(){"function"==typeof _t.complete&&_t.complete(Ct)})).catch((function(xt){throwError(xt,_t,$t)}))}},SubscribeObserver.prototype.error=function(xt,Ct){var _t=this.subscriber,$t=this.fatalError;Promise.resolve(this.disposable.dispose()).then((function(){throwError(Ct,_t,$t)}))},Subscription.prototype.unsubscribe=function(){this.disposable.dispose()}},{"../disposable/dispose":765,"../fatalError":766,"../scheduler/defaultScheduler":782}],776:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.withDefaultScheduler=function withDefaultScheduler(xt){return withScheduler(xt,Vn.default)},_t.withScheduler=withScheduler;var $t=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("./disposable/dispose")),Vn=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("./scheduler/defaultScheduler"));function withScheduler(xt,Ct){return new Promise((function(_t,Vn){!function runSource(xt,Ct,_t,Vn){var Gn=$t.settable(),or=new Drain(_t,Vn,Gn);Gn.setDisposable(xt.run(or,Ct))}(xt,Ct,_t,Vn)}))}function Drain(xt,Ct,_t){this._end=xt,this._error=Ct,this._disposable=_t,this.active=!0}function disposeThen(xt,Ct,_t,$t){Promise.resolve(_t.dispose()).then((function(){xt($t)}),Ct)}Drain.prototype.event=function(xt,Ct){},Drain.prototype.end=function(xt,Ct){this.active&&(this.active=!1,disposeThen(this._end,this._error,this._disposable,Ct))},Drain.prototype.error=function(xt,Ct){this.active=!1,disposeThen(this._error,this._error,this._disposable,Ct)}},{"./disposable/dispose":765,"./scheduler/defaultScheduler":782}],777:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=ClockTimer;var $t=xt("../task");function ClockTimer(){}function Asap(xt){this.f=xt,this.active=!0}ClockTimer.prototype.now=Date.now,ClockTimer.prototype.setTimer=function(xt,Ct){return Ct<=0?function runAsap(xt){var Ct=new Asap(xt);return(0,$t.defer)(Ct),Ct}(xt):setTimeout(xt,Ct)},ClockTimer.prototype.clearTimer=function(xt){return xt instanceof Asap?xt.cancel():clearTimeout(xt)},Asap.prototype.run=function(){return this.active&&this.f()},Asap.prototype.error=function(xt){throw xt},Asap.prototype.cancel=function(){this.active=!1}},{"../task":799}],778:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=PropagateTask;var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("../fatalError"));function PropagateTask(xt,Ct,_t){this._run=xt,this.value=Ct,this.sink=_t,this.active=!0}function error(xt,Ct,_t){_t.error(xt,Ct)}function emit(xt,Ct,_t){_t.event(xt,Ct)}function end(xt,Ct,_t){_t.end(xt,Ct)}PropagateTask.event=function(xt,Ct){return new PropagateTask(emit,xt,Ct)},PropagateTask.end=function(xt,Ct){return new PropagateTask(end,xt,Ct)},PropagateTask.error=function(xt,Ct){return new PropagateTask(error,xt,Ct)},PropagateTask.prototype.dispose=function(){this.active=!1},PropagateTask.prototype.run=function(xt){this.active&&this._run(xt,this.value,this.sink)},PropagateTask.prototype.error=function(xt,Ct){if(!this.active)return(0,$t.default)(Ct);this.sink.error(xt,Ct)}},{"../fatalError":766}],779:[function(xt,Ct,_t){"use strict";function ScheduledTask(xt,Ct,_t,$t){this.time=xt,this.period=Ct,this.task=_t,this.scheduler=$t,this.active=!0}Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=ScheduledTask,ScheduledTask.prototype.run=function(){return this.task.run(this.time)},ScheduledTask.prototype.error=function(xt){return this.task.error(this.time,xt)},ScheduledTask.prototype.dispose=function(){return this.scheduler.cancel(this),this.task.dispose()}},{}],780:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=Scheduler;var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("./ScheduledTask")),Vn=xt("../task");function Scheduler(xt,Ct){this.timer=xt,this.timeline=Ct,this._timer=null,this._nextArrival=1/0;var _t=this;this._runReadyTasksBound=function(){_t._runReadyTasks(_t.now())}}Scheduler.prototype.now=function(){return this.timer.now()},Scheduler.prototype.asap=function(xt){return this.schedule(0,-1,xt)},Scheduler.prototype.delay=function(xt,Ct){return this.schedule(xt,-1,Ct)},Scheduler.prototype.periodic=function(xt,Ct){return this.schedule(0,xt,Ct)},Scheduler.prototype.schedule=function(xt,Ct,_t){var Vn=this.now(),Gn=new $t.default(Vn+Math.max(0,xt),Ct,_t,this);return this.timeline.add(Gn),this._scheduleNextRun(Vn),Gn},Scheduler.prototype.cancel=function(xt){xt.active=!1,this.timeline.remove(xt)&&this._reschedule()},Scheduler.prototype.cancelAll=function(xt){this.timeline.removeAll(xt),this._reschedule()},Scheduler.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun(this.now())},Scheduler.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},Scheduler.prototype._scheduleNextRun=function(xt){if(!this.timeline.isEmpty()){var Ct=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival(Ct,xt):Ct<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(Ct,xt))}},Scheduler.prototype._scheduleNextArrival=function(xt,Ct){this._nextArrival=xt;var _t=Math.max(0,xt-Ct);this._timer=this.timer.setTimer(this._runReadyTasksBound,_t)},Scheduler.prototype._runReadyTasks=function(xt){this._timer=null,this.timeline.runTasks(xt,Vn.runTask),this._scheduleNextRun(this.now())}},{"../task":799,"./ScheduledTask":779}],781:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=Timeline;var $t=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("@most/prelude"));function Timeline(){this.tasks=[]}function runTasks(xt,Ct,_t){for(var $t=Ct.events,Vn=0;Vn<$t.length;++Vn){var Gn=$t[Vn];Gn.active&&(xt(Gn),Gn.period>=0&&Gn.active&&(Gn.time=Gn.time+Gn.period,insertByTime(Gn,_t)))}return _t}function insertByTime(xt,Ct){var _t=Ct.length;if(0!==_t){var $t=binarySearch(xt.time,Ct);$t>=_t?Ct.push(newTimeslot(xt.time,[xt])):xt.time===Ct[$t].time?Ct[$t].events.push(xt):Ct.splice($t,0,newTimeslot(xt.time,[xt]))}else Ct.push(newTimeslot(xt.time,[xt]))}function removeAllFrom(xt,Ct){Ct.events=$t.removeAll(xt,Ct.events)}function binarySearch(xt,Ct){for(var _t,$t,Vn=0,Gn=Ct.length;Vn<Gn;){if(xt===($t=Ct[_t=Math.floor((Vn+Gn)/2)]).time)return _t;xt<$t.time?Gn=_t:Vn=_t+1}return Gn}function newTimeslot(xt,Ct){return{time:xt,events:Ct}}Timeline.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},Timeline.prototype.isEmpty=function(){return 0===this.tasks.length},Timeline.prototype.add=function(xt){insertByTime(xt,this.tasks)},Timeline.prototype.remove=function(xt){var Ct=binarySearch(xt.time,this.tasks);if(Ct>=0&&Ct<this.tasks.length){var _t=$t.findIndex(xt,this.tasks[Ct].events);if(_t>=0)return this.tasks[Ct].events.splice(_t,1),!0}return!1},Timeline.prototype.removeAll=function(xt){for(var Ct=0,_t=this.tasks.length;Ct<_t;++Ct)removeAllFrom(xt,this.tasks[Ct])},Timeline.prototype.runTasks=function(xt,Ct){for(var _t=this.tasks,$t=_t.length,Vn=0;Vn<$t&&_t[Vn].time<=xt;)++Vn;this.tasks=_t.slice(Vn);for(var Gn=0;Gn<Vn;++Gn)this.tasks=runTasks(Ct,_t[Gn],this.tasks)}},{"@most/prelude":801}],782:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0});var $t=_interopRequireDefault(xt("./Scheduler")),Vn=_interopRequireDefault(xt("./ClockTimer")),Gn=_interopRequireDefault(xt("./Timeline"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}var or=new $t.default(new Vn.default,new Gn.default);_t.default=or},{"./ClockTimer":777,"./Scheduler":780,"./Timeline":781}],783:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=DeferredSink;var $t=xt("../task");function DeferredSink(xt){this.sink=xt,this.events=[],this.active=!0}function PropagateAllTask(xt,Ct,_t){this.sink=xt,this.events=_t,this.time=Ct}function EndTask(xt,Ct,_t){this.time=xt,this.value=Ct,this.sink=_t}function ErrorTask(xt,Ct,_t){this.time=xt,this.value=Ct,this.sink=_t}DeferredSink.prototype.event=function(xt,Ct){this.active&&(0===this.events.length&&(0,$t.defer)(new PropagateAllTask(this.sink,xt,this.events)),this.events.push({time:xt,value:Ct}))},DeferredSink.prototype.end=function(xt,Ct){this.active&&this._end(new EndTask(xt,Ct,this.sink))},DeferredSink.prototype.error=function(xt,Ct){this._end(new ErrorTask(xt,Ct,this.sink))},DeferredSink.prototype._end=function(xt){this.active=!1,(0,$t.defer)(xt)},PropagateAllTask.prototype.run=function(){for(var xt,Ct=this.events,_t=this.sink,$t=0,Vn=Ct.length;$t<Vn;++$t)xt=Ct[$t],this.time=xt.time,_t.event(xt.time,xt.value);Ct.length=0},PropagateAllTask.prototype.error=function(xt){this.sink.error(this.time,xt)},EndTask.prototype.run=function(){this.sink.end(this.time,this.value)},EndTask.prototype.error=function(xt){this.sink.error(this.time,xt)},ErrorTask.prototype.run=function(){this.sink.error(this.time,this.value)},ErrorTask.prototype.error=function(xt){throw xt}},{"../task":799}],784:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=IndexSink;var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("./Pipe"));function IndexSink(xt,Ct){this.sink=Ct,this.index=xt,this.active=!0,this.value=void 0}IndexSink.prototype.event=function(xt,Ct){this.active&&(this.value=Ct,this.sink.event(xt,this))},IndexSink.prototype.end=function(xt,Ct){this.active&&(this.active=!1,this.sink.end(xt,{index:this.index,value:Ct}))},IndexSink.prototype.error=$t.default.prototype.error},{"./Pipe":785}],785:[function(xt,Ct,_t){"use strict";function Pipe(xt){this.sink=xt}Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=Pipe,Pipe.prototype.event=function(xt,Ct){return this.sink.event(xt,Ct)},Pipe.prototype.end=function(xt,Ct){return this.sink.end(xt,Ct)},Pipe.prototype.error=function(xt,Ct){return this.sink.error(xt,Ct)}},{}],786:[function(xt,Ct,_t){"use strict";function SafeSink(xt){this.sink=xt,this.active=!0}Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=SafeSink,SafeSink.prototype.event=function(xt,Ct){this.active&&this.sink.event(xt,Ct)},SafeSink.prototype.end=function(xt,Ct){this.active&&(this.disable(),this.sink.end(xt,Ct))},SafeSink.prototype.error=function(xt,Ct){this.disable(),this.sink.error(xt,Ct)},SafeSink.prototype.disable=function(){return this.active=!1,this.sink}},{}],787:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=EventEmitterSource;var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("../sink/DeferredSink")),Vn=_interopRequireWildcard(xt("../disposable/dispose")),Gn=_interopRequireWildcard(xt("./tryEvent"));function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}function EventEmitterSource(xt,Ct){this.event=xt,this.source=Ct}function disposeEventEmitter(xt){var Ct=xt.target;Ct.source.removeListener(Ct.event,xt.addEvent)}EventEmitterSource.prototype.run=function(xt,Ct){var _t=new $t.default(xt);function n(xt){var $t=arguments,Vn=arguments.length;if(Vn>1){for(var or=new Array(Vn),lr=0;lr<Vn;++lr)or[lr]=$t[lr];Gn.tryEvent(Ct.now(),or,_t)}else Gn.tryEvent(Ct.now(),xt,_t)}return this.source.addListener(this.event,n),Vn.create(disposeEventEmitter,{target:this,addEvent:n})}},{"../disposable/dispose":765,"../sink/DeferredSink":783,"./tryEvent":797}],788:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=EventTargetSource;var $t=_interopRequireWildcard(xt("../disposable/dispose")),Vn=_interopRequireWildcard(xt("./tryEvent"));function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}function EventTargetSource(xt,Ct,_t){this.event=xt,this.source=Ct,this.capture=_t}function disposeEventTarget(xt){var Ct=xt.target;Ct.source.removeEventListener(Ct.event,xt.addEvent,Ct.capture)}EventTargetSource.prototype.run=function(xt,Ct){function r(_t){Vn.tryEvent(Ct.now(),_t,xt)}return this.source.addEventListener(this.event,r,this.capture),$t.create(disposeEventTarget,{target:this,addEvent:r})}},{"../disposable/dispose":765,"./tryEvent":797}],789:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.of=function of(xt){return new $t.default(new Just(xt))},_t.empty=function empty(){return or},_t.never=function never(){return lr};var $t=_interopRequireDefault(xt("../Stream")),Vn=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("../disposable/dispose")),Gn=_interopRequireDefault(xt("../scheduler/PropagateTask"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function Just(xt){this.value=xt}function runJust(xt,Ct,_t){_t.event(xt,Ct),_t.end(xt,void 0)}function EmptySource(){}function disposeEmpty(xt){return xt.dispose()}Just.prototype.run=function(xt,Ct){return Ct.asap(new Gn.default(runJust,this.value,xt))},EmptySource.prototype.run=function(xt,Ct){var _t=Gn.default.end(void 0,xt);return Ct.asap(_t),Vn.create(disposeEmpty,_t)};var or=new $t.default(new EmptySource);function NeverSource(){}NeverSource.prototype.run=function(){return Vn.empty()};var lr=new $t.default(new NeverSource)},{"../Stream":737,"../disposable/dispose":765,"../scheduler/PropagateTask":778}],790:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.from=function from(xt){if(xt instanceof $t.default)return xt;var Ct=(0,lr.default)(xt);if(null!=Ct)return(0,Fr.fromObservable)(Ct);if(Array.isArray(xt)||(0,Hr.isArrayLike)(xt))return(0,Vn.fromArray)(xt);if((0,Gn.isIterable)(xt))return(0,or.fromIterable)(xt);throw new TypeError("from(x) must be observable, iterable, or array-like: "+xt)};var $t=_interopRequireDefault(xt("../Stream")),Vn=xt("./fromArray"),Gn=xt("../iterable"),or=xt("./fromIterable"),lr=_interopRequireDefault(xt("../observable/getObservable")),Fr=xt("../observable/fromObservable"),Hr=xt("@most/prelude");function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}},{"../Stream":737,"../iterable":772,"../observable/fromObservable":773,"../observable/getObservable":774,"./fromArray":791,"./fromIterable":793,"@most/prelude":801}],791:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.fromArray=function fromArray(xt){return new $t.default(new ArraySource(xt))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../scheduler/PropagateTask"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function ArraySource(xt){this.array=xt}function runProducer(xt,Ct,_t){for(var $t=0,Vn=Ct.length;$t<Vn&&this.active;++$t)_t.event(xt,Ct[$t]);this.active&&_t.end(xt)}ArraySource.prototype.run=function(xt,Ct){return Ct.asap(new Vn.default(runProducer,this.array,xt))}},{"../Stream":737,"../scheduler/PropagateTask":778}],792:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.fromEvent=function fromEvent(xt,Ct,_t){var or;if("function"==typeof Ct.addEventListener&&"function"==typeof Ct.removeEventListener)arguments.length<3&&(_t=!1),or=new Vn.default(xt,Ct,_t);else{if("function"!=typeof Ct.addListener||"function"!=typeof Ct.removeListener)throw new Error("source must support addEventListener/removeEventListener or addListener/removeListener");or=new Gn.default(xt,Ct)}return new $t.default(or)};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("./EventTargetSource")),Gn=_interopRequireDefault(xt("./EventEmitterSource"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}},{"../Stream":737,"./EventEmitterSource":787,"./EventTargetSource":788}],793:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.fromIterable=function fromIterable(xt){return new $t.default(new IterableSource(xt))};var $t=_interopRequireDefault(xt("../Stream")),Vn=xt("../iterable"),Gn=_interopRequireDefault(xt("../scheduler/PropagateTask"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function IterableSource(xt){this.iterable=xt}function runProducer(xt,Ct,_t){for(var $t=Ct.next();!$t.done&&this.active;)_t.event(xt,$t.value),$t=Ct.next();_t.end(xt,$t.value)}IterableSource.prototype.run=function(xt,Ct){return Ct.asap(new Gn.default(runProducer,(0,Vn.getIterator)(this.iterable),xt))}},{"../Stream":737,"../iterable":772,"../scheduler/PropagateTask":778}],794:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.generate=function generate(xt){return new $t.default(new GenerateSource(xt,Vn.tail(arguments)))};var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("../Stream")),Vn=function _interopRequireWildcard(xt){if(xt&&xt.__esModule)return xt;var Ct={};if(null!=xt)for(var _t in xt)Object.prototype.hasOwnProperty.call(xt,_t)&&(Ct[_t]=xt[_t]);return Ct.default=xt,Ct}(xt("@most/prelude"));function GenerateSource(xt,Ct){this.f=xt,this.args=Ct}function Generate(xt,Ct,_t){this.iterator=xt,this.sink=Ct,this.scheduler=_t,this.active=!0;var $t=this;Promise.resolve(this).then(next).catch((function(xt){$t.sink.error($t.scheduler.now(),xt)}))}function next(xt,Ct){return xt.active?handle(xt,xt.iterator.next(Ct)):Ct}function handle(xt,Ct){return Ct.done?xt.sink.end(xt.scheduler.now(),Ct.value):Promise.resolve(Ct.value).then((function(Ct){return function emit(xt,Ct){return xt.sink.event(xt.scheduler.now(),Ct),next(xt,Ct)}(xt,Ct)}),(function(Ct){return function error(xt,Ct){return handle(xt,xt.iterator.throw(Ct))}(xt,Ct)}))}GenerateSource.prototype.run=function(xt,Ct){return new Generate(this.f.apply(void 0,this.args),xt,Ct)},Generate.prototype.dispose=function(){this.active=!1}},{"../Stream":737,"@most/prelude":801}],795:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.iterate=function iterate(xt,Ct){return new $t.default(new IterateSource(xt,Ct))};var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("../Stream"));function IterateSource(xt,Ct){this.f=xt,this.value=Ct}function Iterate(xt,Ct,_t,$t){this.f=xt,this.sink=_t,this.scheduler=$t,this.active=!0;var Vn=Ct,Gn=this;Promise.resolve(this).then((function(xt){return stepIterate(xt,Vn)})).catch((function(xt){Gn.sink.error(Gn.scheduler.now(),xt)}))}function stepIterate(xt,Ct){if(xt.sink.event(xt.scheduler.now(),Ct),!xt.active)return Ct;var _t=xt.f;return Promise.resolve(_t(Ct)).then((function(Ct){return function continueIterate(xt,Ct){return xt.active?stepIterate(xt,Ct):xt.value}(xt,Ct)}))}IterateSource.prototype.run=function(xt,Ct){return new Iterate(this.f,this.value,xt,Ct)},Iterate.prototype.dispose=function(){this.active=!1}},{"../Stream":737}],796:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.periodic=function periodic(xt,Ct){return new $t.default(new Periodic(xt,Ct))};var $t=_interopRequireDefault(xt("../Stream")),Vn=_interopRequireDefault(xt("../scheduler/PropagateTask"));function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}function Periodic(xt,Ct){this.period=xt,this.value=Ct}Periodic.prototype.run=function(xt,Ct){return Ct.periodic(this.period,Vn.default.event(this.value,xt))}},{"../Stream":737,"../scheduler/PropagateTask":778}],797:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.tryEvent=function tryEvent(xt,Ct,_t){try{_t.event(xt,Ct)}catch(Ct){_t.error(xt,Ct)}},_t.tryEnd=function tryEnd(xt,Ct,_t){try{_t.end(xt,Ct)}catch(Ct){_t.error(xt,Ct)}}},{}],798:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.unfold=function unfold(xt,Ct){return new $t.default(new UnfoldSource(xt,Ct))};var $t=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("../Stream"));function UnfoldSource(xt,Ct){this.f=xt,this.value=Ct}function Unfold(xt,Ct,_t,$t){this.f=xt,this.sink=_t,this.scheduler=$t,this.active=!0;var Vn=this;Promise.resolve(this).then((function(xt){return stepUnfold(xt,Ct)})).catch((function(xt){Vn.sink.error(Vn.scheduler.now(),xt)}))}function stepUnfold(xt,Ct){var _t=xt.f;return Promise.resolve(_t(Ct)).then((function(Ct){return function continueUnfold(xt,Ct){return Ct.done?(xt.sink.end(xt.scheduler.now(),Ct.value),Ct.value):(xt.sink.event(xt.scheduler.now(),Ct.value),xt.active?stepUnfold(xt,Ct.seed):Ct.value)}(xt,Ct)}))}UnfoldSource.prototype.run=function(xt,Ct){return new Unfold(this.f,this.value,xt,Ct)},Unfold.prototype.dispose=function(){this.active=!1}},{"../Stream":737}],799:[function(xt,Ct,_t){"use strict";function runTask(xt){try{return xt.run()}catch(Ct){return xt.error(Ct)}}Object.defineProperty(_t,"__esModule",{value:!0}),_t.defer=function defer(xt){return Promise.resolve(xt).then(runTask)},_t.runTask=runTask},{}],800:[function(xt,Ct,_t){var $t,Vn;$t=this,Vn=function(xt,Ct){"use strict";var s=function(xt,Ct){this.source=xt,this.sink=Ct,this.disposed=!1};function i(xt,Ct,_t){try{_t.event(xt,Ct)}catch(Ct){_t.error(xt,Ct)}}function n(xt,Ct,_t){try{_t.end(xt,Ct)}catch(Ct){_t.error(xt,Ct)}}s.prototype.dispose=function(){if(!this.disposed)return this.disposed=!0,0===this.source.remove(this.sink)&&this.source._dispose()};var o=function(xt){return xt.dispose()},_t={dispose:function(){}},u=function(xt){this.source=xt,this.sinks=[],this._disposable=_t};u.prototype.run=function(xt,Ct){return 1===this.add(xt)&&(this._disposable=this.source.run(this,Ct)),new s(this,xt)},u.prototype._dispose=function(){var xt=this._disposable;return this._disposable=_t,Promise.resolve(xt).then(o)},u.prototype.add=function(xt){return this.sinks=Ct.append(xt,this.sinks),this.sinks.length},u.prototype.remove=function(xt){var _t=Ct.findIndex(xt,this.sinks);return _t>=0&&(this.sinks=Ct.remove(_t,this.sinks)),this.sinks.length},u.prototype.event=function(xt,Ct){var _t=this.sinks;if(1===_t.length)return _t[0].event(xt,Ct);for(var $t=0;$t<_t.length;++$t)i(xt,Ct,_t[$t])},u.prototype.end=function(xt,Ct){for(var _t=this.sinks,$t=0;$t<_t.length;++$t)n(xt,Ct,_t[$t])},u.prototype.error=function(xt,Ct){for(var _t=this.sinks,$t=0;$t<_t.length;++$t)_t[$t].error(xt,Ct)},xt.default=function(xt){var Ct=xt.source;return Ct instanceof u?xt:new xt.constructor(new u(Ct))},xt.MulticastSource=u,Object.defineProperty(xt,"__esModule",{value:!0})},"object"==typeof _t&&void 0!==Ct?Vn(_t,xt("@most/prelude")):Vn($t.mostMulticast=$t.mostMulticast||{},$t.mostPrelude)},{"@most/prelude":801}],801:[function(xt,Ct,_t){var $t,Vn;$t=this,Vn=function(xt){"use strict";function n(xt,Ct){if(xt<0)throw new TypeError("n must be >= 0");var _t=Ct.length;return 0===xt||0===_t?Ct:xt>=_t?[]:function(xt,Ct,_t){for(var $t=new Array(_t),Vn=0;Vn<_t;++Vn)$t[Vn]=Ct[xt+Vn];return $t}(xt,Ct,_t-xt)}function e(xt){return function n(Ct,_t){switch(arguments.length){case 0:return n;case 1:return function(_t){return xt(Ct,_t)};default:return xt(Ct,_t)}}}function t(xt){return function n(Ct,_t,$t){switch(arguments.length){case 0:return n;case 1:return e((function(_t,$t){return xt(Ct,_t,$t)}));case 2:return function($t){return xt(Ct,_t,$t)};default:return xt(Ct,_t,$t)}}}xt.append=function(xt,Ct){for(var _t=Ct.length,$t=new Array(_t+1),Vn=0;Vn<_t;++Vn)$t[Vn]=Ct[Vn];return $t[_t]=xt,$t},xt.apply=function(xt,Ct){return xt(Ct)},xt.compose=function(xt,Ct){return function(_t){return xt(Ct(_t))}},xt.concat=function(xt,Ct){var _t=xt.length,$t=Ct.length,Vn=new Array(_t+$t),Gn=0;for(Gn=0;Gn<_t;Gn++)Vn[Gn]=xt[Gn];for(var or=0;or<$t;or++)Vn[Gn++]=Ct[or];return Vn},xt.cons=function(xt,Ct){var _t=Ct.length,$t=new Array(_t+1);$t[0]=xt;for(var Vn=0;Vn<_t;++Vn)$t[Vn+1]=Ct[Vn];return $t},xt.copy=function(xt){for(var Ct=xt.length,_t=new Array(Ct),$t=0;$t<Ct;++$t)_t[$t]=xt[$t];return _t},xt.curry2=e,xt.curry3=t,xt.curry4=function(xt){return function n(Ct,_t,$t,Vn){switch(arguments.length){case 0:return n;case 1:return t((function(_t,$t,Vn){return xt(Ct,_t,$t,Vn)}));case 2:return e((function($t,Vn){return xt(Ct,_t,$t,Vn)}));case 3:return function(Vn){return xt(Ct,_t,$t,Vn)};default:return xt(Ct,_t,$t,Vn)}}},xt.drop=n,xt.findIndex=function(xt,Ct){for(var _t=0,$t=Ct.length;_t<$t;++_t)if(xt===Ct[_t])return _t;return-1},xt.id=function(xt){return xt},xt.isArrayLike=function(xt){return null!=xt&&"number"==typeof xt.length&&"function"!=typeof xt},xt.map=function(xt,Ct){for(var _t=Ct.length,$t=new Array(_t),Vn=0;Vn<_t;++Vn)$t[Vn]=xt(Ct[Vn]);return $t},xt.reduce=function(xt,Ct,_t){for(var $t=Ct,Vn=0,Gn=_t.length;Vn<Gn;++Vn)$t=xt($t,_t[Vn],Vn);return $t},xt.remove=function(xt,Ct){if(xt<0)throw new TypeError("i must be >= 0");var _t=Ct.length;return 0===_t||xt>=_t?Ct:1===_t?[]:function(xt,Ct,_t){var $t,Vn=new Array(_t);for($t=0;$t<xt;++$t)Vn[$t]=Ct[$t];for($t=xt;$t<_t;++$t)Vn[$t]=Ct[$t+1];return Vn}(xt,Ct,_t-1)},xt.removeAll=function(xt,Ct){for(var _t=Ct.length,$t=new Array(_t),Vn=0,Gn=void 0,or=0;or<_t;++or)xt(Gn=Ct[or])||($t[Vn]=Gn,++Vn);return $t.length=Vn,$t},xt.replace=function(xt,Ct,_t){if(Ct<0)throw new TypeError("i must be >= 0");for(var $t=_t.length,Vn=new Array($t),Gn=0;Gn<$t;++Gn)Vn[Gn]=Ct===Gn?xt:_t[Gn];return Vn},xt.tail=function(xt){return n(1,xt)},Object.defineProperty(xt,"__esModule",{value:!0})},Vn("object"==typeof _t&&void 0!==Ct?_t:($t=$t||self).mostPrelude={})},{}],802:[function(xt,Ct,_t){(function($t){(function(){"use strict";Object.defineProperty(_t,"__esModule",{value:!0});var Vn,Gn=function _interopRequireDefault(xt){return xt&&xt.__esModule?xt:{default:xt}}(xt("./ponyfill.js"));Vn="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==$t?$t:void 0!==Ct?Ct:Function("return this")();var or=(0,Gn.default)(Vn);_t.default=or}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill.js":803}],803:[function(xt,Ct,_t){"use strict";Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=function symbolObservablePonyfill(xt){var Ct,_t=xt.Symbol;return"function"==typeof _t?_t.observable?Ct=_t.observable:(Ct=_t("observable"),_t.observable=Ct):Ct="@@observable",Ct}},{}],804:[function(xt,Ct,_t){"use strict";var $t=/\n[\s]+$/,Vn=/^\n[\s]+/,Gn=/[\s]+$/,or=/^[\s]+/,lr=/[\n\s]+/g,Fr=["a","abbr","b","bdi","bdo","br","cite","data","dfn","em","i","kbd","mark","q","rp","rt","rtc","ruby","s","amp","small","span","strong","sub","sup","time","u","var","wbr"],Hr=["code","pre","textarea"];Ct.exports=function e(xt,Ct){if(Array.isArray(Ct))for(var _t,xo,Eo=xt.nodeName.toLowerCase(),Mo=!1,Oo=0,Ro=Ct.length;Oo<Ro;Oo++){var Io=Ct[Oo];if(Array.isArray(Io))e(xt,Io);else{("number"==typeof Io||"boolean"==typeof Io||"function"==typeof Io||Io instanceof Date||Io instanceof RegExp)&&(Io=Io.toString());var Bo=xt.childNodes[xt.childNodes.length-1];if("string"==typeof Io)Mo=!0,Bo&&"#text"===Bo.nodeName?Bo.nodeValue+=Io:(Io=xt.ownerDocument.createTextNode(Io),xt.appendChild(Io),Bo=Io),Oo===Ro-1&&(Mo=!1,-1===Fr.indexOf(Eo)&&-1===Hr.indexOf(Eo)?""===(_t=Bo.nodeValue.replace(Vn,"").replace(Gn,"").replace($t,"").replace(lr," "))?xt.removeChild(Bo):Bo.nodeValue=_t:-1===Hr.indexOf(Eo)&&(xo=0===Oo?"":" ",_t=Bo.nodeValue.replace(Vn,xo).replace(or," ").replace(Gn,"").replace($t,"").replace(lr," "),Bo.nodeValue=_t));else if(Io&&Io.nodeType){Mo&&(Mo=!1,-1===Fr.indexOf(Eo)&&-1===Hr.indexOf(Eo)?""===(_t=Bo.nodeValue.replace(Vn,"").replace($t," ").replace(lr," "))?xt.removeChild(Bo):Bo.nodeValue=_t:-1===Hr.indexOf(Eo)&&(_t=Bo.nodeValue.replace(or," ").replace(Vn,"").replace($t," ").replace(lr," "),Bo.nodeValue=_t));var zo=Io.nodeName;zo&&(Eo=zo.toLowerCase()),xt.appendChild(Io)}}}}},{}],805:[function(xt,Ct,_t){"use strict";Ct.exports=["async","autofocus","autoplay","checked","controls","default","defaultchecked","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","novalidate","open","playsinline","readonly","required","reversed","selected"]},{}],806:[function(xt,Ct,_t){Ct.exports=xt("./dom")(document)},{"./dom":808}],807:[function(xt,Ct,_t){"use strict";Ct.exports=["indeterminate"]},{}],808:[function(xt,Ct,_t){"use strict";var $t=xt("hyperx"),Vn=xt("./append-child"),Gn=xt("./svg-tags"),or=xt("./bool-props"),lr=xt("./direct-props");Ct.exports=function(xt){function r(Ct,_t,$t){var Fr;-1!==Gn.indexOf(Ct)&&(_t.namespace="http://www.w3.org/2000/svg");var Hr=!1;_t.namespace&&(Hr=_t.namespace,delete _t.namespace);var xo=!1;if(_t.is&&(xo=_t.is,delete _t.is),Hr)Fr=xo?xt.createElementNS(Hr,Ct,{is:xo}):xt.createElementNS(Hr,Ct);else{if("!--"===Ct)return xt.createComment(_t.comment);Fr=xo?xt.createElement(Ct,{is:xo}):xt.createElement(Ct)}for(var Eo in _t)if(_t.hasOwnProperty(Eo)){var Mo=Eo.toLowerCase(),Oo=_t[Eo];if("classname"===Mo&&(Mo="class",Eo="class"),"htmlFor"===Eo&&(Eo="for"),-1!==or.indexOf(Mo))if("true"===String(Oo))Oo=Mo;else if("false"===String(Oo))continue;"on"===Mo.slice(0,2)||-1!==lr.indexOf(Mo)?Fr[Eo]=Oo:Hr?"xlink:href"===Eo?Fr.setAttributeNS("http://www.w3.org/1999/xlink",Eo,Oo):/^xmlns($|:)/i.test(Eo)||Fr.setAttributeNS(null,Eo,Oo):Fr.setAttribute(Eo,Oo)}return Vn(Fr,$t),Fr}var Ct=$t(r,{comments:!0,createFragment:function r(Ct){for(var _t=xt.createDocumentFragment(),$t=0;$t<Ct.length;$t++)null!=Ct[$t]&&(Array.isArray(Ct[$t])?_t.appendChild(r(Ct[$t])):("string"==typeof Ct[$t]&&(Ct[$t]=xt.createTextNode(Ct[$t])),_t.appendChild(Ct[$t])));return _t}});return Ct.default=Ct,Ct.createComment=r,Ct}},{"./append-child":804,"./bool-props":805,"./direct-props":807,"./svg-tags":809,hyperx:811}],809:[function(xt,Ct,_t){"use strict";Ct.exports=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]},{}],810:[function(xt,Ct,_t){Ct.exports=function attributeToProperty(xt){return function(Ct,_t,Vn){for(var Gn in _t)Gn in $t&&(_t[$t[Gn]]=_t[Gn],delete _t[Gn]);return xt(Ct,_t,Vn)}};var $t={class:"className",for:"htmlFor","http-equiv":"httpEquiv"}},{}],811:[function(xt,Ct,_t){var $t=xt("hyperscript-attribute-to-property"),Vn=10,Gn=12,or=13;function quot(xt){return 9===xt||xt===Vn}Ct.exports=function(xt,Ct){Ct||(Ct={});var _t=Ct.concat||function(xt,Ct){return String(xt)+String(Ct)};return!1!==Ct.attrToProp&&(xt=$t(xt)),function($t){for(var lr=1,Fr="",Hr=arguments.length,xo=[],Eo=0;Eo<$t.length;Eo++)if(Eo<Hr-1){var Mo=arguments[Eo+1],Oo=U($t[Eo]),Ro=lr;Ro===Vn&&(Ro=8),9===Ro&&(Ro=8),7===Ro&&(Ro=8),4===Ro&&(Ro=5),2===Ro?"/"===Fr?(Oo.push([2,"/",Mo]),Fr=""):Oo.push([2,Mo]):Ro===or&&Ct.comments?Fr+=String(Mo):Ro!==or&&Oo.push([0,Ro,Mo]),xo.push.apply(xo,Oo)}else xo.push.apply(xo,U($t[Eo]));var Io=[null,{},[]],Bo=[[Io,-1]];for(Eo=0;Eo<xo.length;Eo++){var zo=Bo[Bo.length-1][0],Ho=(Oo=xo[Eo])[0];if(2===Ho&&/^\//.test(Oo[1])){var Qo=Bo[Bo.length-1][1];Bo.length>1&&(Bo.pop(),Bo[Bo.length-1][0][2][Qo]=xt(zo[0],zo[1],zo[2].length?zo[2]:void 0))}else if(2===Ho){var pi=[Oo[1],{},[]];zo[2].push(pi),Bo.push([pi,zo[2].length-1])}else if(5===Ho||0===Ho&&5===Oo[1]){for(var gi,es="";Eo<xo.length;Eo++)if(5===xo[Eo][0])es=_t(es,xo[Eo][1]);else{if(0!==xo[Eo][0]||5!==xo[Eo][1])break;if("object"!=typeof xo[Eo][2]||es)es=_t(es,xo[Eo][2]);else for(gi in xo[Eo][2])xo[Eo][2].hasOwnProperty(gi)&&!zo[1][gi]&&(zo[1][gi]=xo[Eo][2][gi])}11===xo[Eo][0]&&Eo++;for(var ts=Eo;Eo<xo.length;Eo++)if(8===xo[Eo][0]||5===xo[Eo][0])zo[1][es]?""===xo[Eo][1]||(zo[1][es]=_t(zo[1][es],xo[Eo][1])):zo[1][es]=t(xo[Eo][1]);else{if(0!==xo[Eo][0]||8!==xo[Eo][1]&&5!==xo[Eo][1]){!es.length||zo[1][es]||Eo!==ts||3!==xo[Eo][0]&&xo[Eo][0]!==Gn||(zo[1][es]=es.toLowerCase()),3===xo[Eo][0]&&Eo--;break}zo[1][es]?""===xo[Eo][2]||(zo[1][es]=_t(zo[1][es],xo[Eo][2])):zo[1][es]=t(xo[Eo][2])}}else if(5===Ho)zo[1][Oo[1]]=!0;else if(0===Ho&&5===Oo[1])zo[1][Oo[2]]=!0;else if(3===Ho)selfClosing(zo[0])&&Bo.length&&(Qo=Bo[Bo.length-1][1],Bo.pop(),Bo[Bo.length-1][0][2][Qo]=xt(zo[0],zo[1],zo[2].length?zo[2]:void 0));else if(0===Ho&&1===Oo[1])void 0===Oo[2]||null===Oo[2]?Oo[2]="":Oo[2]||(Oo[2]=_t("",Oo[2])),Array.isArray(Oo[2][0])?zo[2].push.apply(zo[2],Oo[2]):zo[2].push(Oo[2]);else if(1===Ho)zo[2].push(Oo[1]);else if(11!==Ho&&Ho!==Gn)throw new Error("unhandled: "+Ho)}if(Io[2].length>1&&/^\s*$/.test(Io[2][0])&&Io[2].shift(),Io[2].length>2||2===Io[2].length&&/\S/.test(Io[2][1])){if(Ct.createFragment)return Ct.createFragment(Io[2]);throw new Error("multiple root elements must be wrapped in an enclosing tag")}return Array.isArray(Io[2][0])&&"string"==typeof Io[2][0][0]&&Array.isArray(Io[2][0][2])&&(Io[2][0]=xt(Io[2][0][0],Io[2][0][1],Io[2][0][2])),Io[2][0];function U(xt){var _t=[];7===lr&&(lr=4);for(var $t=0;$t<xt.length;$t++){var Hr=xt.charAt($t);1===lr&&"<"===Hr?(Fr.length&&_t.push([1,Fr]),Fr="",lr=2):">"!==Hr||quot(lr)||lr===or?lr===or&&/-$/.test(Fr)&&"-"===Hr?(Ct.comments&&_t.push([8,Fr.substr(0,Fr.length-1)]),Fr="",lr=1):2===lr&&/^!--$/.test(Fr)?(Ct.comments&&_t.push([2,Fr],[5,"comment"],[11]),Fr=Hr,lr=or):1===lr||lr===or?Fr+=Hr:2===lr&&"/"===Hr&&Fr.length||(2===lr&&/\s/.test(Hr)?(Fr.length&&_t.push([2,Fr]),Fr="",lr=4):2===lr?Fr+=Hr:4===lr&&/[^\s"'=/]/.test(Hr)?(lr=5,Fr=Hr):4===lr&&/\s/.test(Hr)?(Fr.length&&_t.push([5,Fr]),_t.push([Gn])):5===lr&&/\s/.test(Hr)?(_t.push([5,Fr]),Fr="",lr=6):5===lr&&"="===Hr?(_t.push([5,Fr],[11]),Fr="",lr=7):5===lr?Fr+=Hr:6!==lr&&4!==lr||"="!==Hr?6!==lr&&4!==lr||/\s/.test(Hr)?7===lr&&'"'===Hr?lr=Vn:7===lr&&"'"===Hr?lr=9:lr===Vn&&'"'===Hr||9===lr&&"'"===Hr?(_t.push([8,Fr],[Gn]),Fr="",lr=4):7!==lr||/\s/.test(Hr)?8===lr&&/\s/.test(Hr)?(_t.push([8,Fr],[Gn]),Fr="",lr=4):8!==lr&&9!==lr&&lr!==Vn||(Fr+=Hr):(lr=8,$t--):(_t.push([Gn]),/[\w-]/.test(Hr)?(Fr+=Hr,lr=5):lr=4):(_t.push([11]),lr=7)):(2===lr&&Fr.length?_t.push([2,Fr]):5===lr?_t.push([5,Fr]):8===lr&&Fr.length&&_t.push([8,Fr]),_t.push([3]),Fr="",lr=1)}return 1===lr&&Fr.length?(_t.push([1,Fr]),Fr=""):8===lr&&Fr.length||lr===Vn&&Fr.length||9===lr&&Fr.length?(_t.push([8,Fr]),Fr=""):5===lr&&(_t.push([5,Fr]),Fr=""),_t}};function t(xt){return"function"==typeof xt||"string"==typeof xt||xt&&"object"==typeof xt||null==xt?xt:_t("",xt)}};var lr=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$");function selfClosing(xt){return lr.test(xt)}},{"hyperscript-attribute-to-property":810}],812:[function(xt,Ct,_t){var $t=arguments[3],Vn=arguments[4],Gn=arguments[5],or=JSON.stringify;Ct.exports=function(xt,Ct){for(var _t,lr=Object.keys(Gn),Fr=0,Hr=lr.length;Fr<Hr;Fr++){var xo=lr[Fr],Eo=Gn[xo].exports;if(Eo===xt||Eo&&Eo.default===xt){_t=xo;break}}if(!_t){_t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var Mo={};for(Fr=0,Hr=lr.length;Fr<Hr;Fr++)Mo[xo=lr[Fr]]=xo;Vn[_t]=["function(require,module,exports){"+xt+"(self); }",Mo]}var Oo=Math.floor(Math.pow(16,8)*Math.random()).toString(16),Ro={};Ro[_t]=_t,Vn[Oo]=["function(require,module,exports){var f = require("+or(_t)+");(f.default ? f.default : f)(self);}",Ro];var Io={};!function r(xt){for(var Ct in Io[xt]=!0,Vn[xt][1]){var _t=Vn[xt][1][Ct];Io[_t]||r(_t)}}(Oo);var Bo="("+$t+")({"+Object.keys(Io).map((function(xt){return or(xt)+":["+Vn[xt][0]+","+or(Vn[xt][1])+"]"})).join(",")+"},{},["+or(Oo)+"])",zo=window.URL||window.webkitURL||window.mozURL||window.msURL,Ho=new Blob([Bo],{type:"text/javascript"});if(Ct&&Ct.bare)return Ho;var Qo=zo.createObjectURL(Ho),pi=new Worker(Qo);return pi.objectURL=Qo,pi}},{}],813:[function(xt,Ct,_t){Ct.exports={name:"@jscad/web",version:"2.6.6",description:"Web Application for JSCAD",homepage:"https://openjscad.xyz/",repository:"https://github.com/jscad/OpenJSCAD.org",main:"src/index.js",unpkg:"dist/jscad-web.min.js",scripts:{build:"browserify src/index.js -o dist/jscad-web.min.js -g uglifyify --standalone jscadWeb",dev:"budo demo.js --port=8081 --css ./css/demo.css --live -- -b",postinstall:"node postInstall.js && node -e \"console.log('\\u001b[35m\\u001b[1mLove JSCAD? You can now donate to our open collective:\\u001b[22m\\u001b[39m\\n > \\u001b[34mhttps://opencollective.com/openjscad/donate\\u001b[0m')\"",test:"ava 'src/**/*.test.js' --verbose --timeout 2m",version:"npm run build && git add dist"},contributors:[{name:"Rene K. Mueller",url:"http://renekmueller.com"},{name:"z3dev",url:"http://www.z3d.jp"},{name:"Mark 'kaosat-dev' Moissette",url:"http://kaosat.net"}],keywords:["openjscad","jscad","web","application"],license:"MIT",dependencies:{"@jscad/array-utils":"2.1.4","@jscad/core":"2.6.8","@jscad/examples":"2.4.2","@jscad/io":"2.4.7","@jscad/modeling":"2.12.1","@jscad/regl-renderer":"2.6.8","@most/create":"2.0.1",brace:"0.11.1",codemirror:"5.65.2","es2015-i18n-tag":"1.6.1","file-saver":"2.0.5","is-electron":"2.2.1",morphdom:"2.6.1",most:"1.8.0","most-proxy":"3.3.0",nanohtml:"1.9.1",webworkify:"1.5.0"},devDependencies:{ava:"3.15.0","browser-env":"^3.2.1",browserify:"16.5.1",budo:"11.6.4","copy-dir":"1.3.0",docblock:"0.4.5",uglifyify:"5.0.2"},collective:{type:"opencollective",url:"https://opencollective.com/openjscad",logo:"https://opencollective.com/openjscad/logo.txt"},gitHead:"a90b9bad95a417661c619dc733e62c587dc71a4a"}},{}],814:[function(xt,Ct,_t){const $t=xt("path"),{head:Vn}=xt("@jscad/array-utils"),{formats:Gn,supportedFormatsForObjects:or}=xt("@jscad/io/formats");Ct.exports={availableExportFormatsFromSolids:xt=>{const Ct=["jscad","js"],_t=or(xt).filter((xt=>!Ct.includes(xt))).map((xt=>({name:xt,displayName:Gn[xt].displayName})));return{exportFormat:Vn(_t)?Vn(_t).name:void 0,availableExportFormats:_t}},exportFilePathFromFormatAndDesign:(xt,Ct)=>{const _t=Ct?Gn[Ct].extension:"",Vn=`${xt.name}.${_t}`;return{exportFilePath:$t.join(xt.path,Vn)}}}},{"@jscad/array-utils":525,"@jscad/io/formats":68,path:711}],815:[function(xt,Ct,_t){const $t=xt("nanohtml"),{evaluation:Vn}=xt("@jscad/core"),Gn=xt("./most-utils/callbackToObservable"),or=xt("../package.json"),lr=xt("../data/keybindings.json");let Fr=0;Ct.exports=async(Ct,_t)=>{const{name:Hr,logging:xo}=Object.assign({},{name:"jscad",logging:!1},_t),Eo=$t`<div class='jscad' key=${Hr} tabindex=${Fr}></div>`;Ct.appendChild(Eo);const Mo=xt("./sideEffects/localStorage")({name:Hr,logging:xo}),Oo=xt("./sideEffects/titleBar")({logging:xo}),Ro=xt("./sideEffects/dragDrop")({targetEl:Eo,logging:xo}),Io=xt("./sideEffects/fileDialog")({targetEl:Eo,logging:xo}),Bo=xt("./sideEffects/dom")({targetEl:Eo},xo),zo=xt("./sideEffects/state/index")({logging:xo,packageMetadata:or,keyBindings:lr}),Ho=await xt("./sideEffects/localFs")({logging:xo}),Qo=xt("./sideEffects/http")({logging:xo}),pi=await xt("./sideEffects/dat")({logging:xo}),gi=xt("./sideEffects/i18n")({translations:{en:xt("../locales/en.json"),fr:xt("../locales/fr.json"),de:xt("../locales/de.json"),ja:xt("../locales/ja.json"),hr:xt("../locales/hr.json"),zh:xt("../locales/zh.json")},logging:xo}),es=xt("./sideEffects/worker")(Vn.rebuildGeometryWorker),ts=Gn(),ns=Gn(),rs={paramChanges:ts.stream,editor:ns.stream,state:zo.source(),store:Mo.source(),fs:Ho.source(),http:Qo.source(),https:Qo.source(),drops:Ro.source(),dom:Bo.source(),solidWorker:es.source(),i18n:gi.source(),titleBar:Oo.source(),fileDialog:Io.source(),dat:await pi.source()},os={store:Mo.sink,fs:Ho.sink,http:Qo.sink,https:Qo.sink,i18n:gi.sink,dom:Bo.sink,solidWorker:es.sink,state:zo.sink,fileDialog:Io.sink,dat:pi.sink},is=xt("./ui/flow/flowIn")(rs),ss={jscadEl:Eo,paramsCallbacktoStream:ts,editorCallbackToStream:ns};xt("./ui/flow/flowOut")({sinks:os,sources:rs,outputs$:is,extras:ss}),Fr+=1,setTimeout((()=>{document.getElementById("toggleAxes").click()}),100),setTimeout((()=>{document.getElementById("toggleAxes").click()}),200);const as=Gn();return xt=>{as.callback(xt)}}},{"../data/keybindings.json":633,"../locales/de.json":677,"../locales/en.json":678,"../locales/fr.json":679,"../locales/hr.json":680,"../locales/ja.json":681,"../locales/zh.json":682,"../package.json":813,"./most-utils/callbackToObservable":822,"./sideEffects/dat":827,"./sideEffects/dom":828,"./sideEffects/dragDrop":829,"./sideEffects/fileDialog":830,"./sideEffects/http":831,"./sideEffects/i18n":832,"./sideEffects/localFs":833,"./sideEffects/localStorage":835,"./sideEffects/state/index":836,"./sideEffects/titleBar":837,"./sideEffects/worker":838,"./ui/flow/flowIn":843,"./ui/flow/flowOut":844,"@jscad/core":19,nanohtml:806}],816:[function(xt,Ct,_t){const{merge:$t}=xt("most");let Vn=!1;"undefined"!=typeof window&&(window.addEventListener("pinchStarted",(xt=>{Vn=!0})),window.addEventListener("pinchEnded",(xt=>{Vn=!1})));const mouseDrags=(xt,Ct,_t,$t)=>{const{pixelRatio:Vn}=$t;return xt.flatMap((xt=>{const $t=xt.pageX*Vn,Gn=xt.pageY*Vn;let or=$t,lr=Gn;return _t.map((xt=>{const Ct=xt.pageX*Vn,_t=xt.pageY*Vn,Fr={left:Ct-$t,top:_t-Gn,x:or-Ct,y:_t-lr};return or=Ct,lr=_t,{originalEvents:[xt],delta:Fr,normalized:{x:Ct,y:_t},type:"mouse"}})).takeUntil(Ct)}))},touchDrags=(xt,Ct,_t,$t)=>{const{pixelRatio:Gn}=$t;return xt.filter((xt=>1===xt.touches.length||3===xt.touches.length)).flatMap((xt=>{const $t=xt.touches[0].pageX*Gn,or=xt.touches[0].pageY*Gn;let lr=$t,Fr=or;return _t.takeWhile((xt=>!1===Vn)).map((xt=>{const Ct=xt.touches[0].pageX*Gn,_t=xt.touches[0].pageY*Gn,Vn={left:Ct-$t,top:_t-or,x:lr-Ct,y:_t-Fr};return lr=Ct,Fr=_t,{originalEvents:[xt],delta:Vn,normalized:{x:Ct,y:_t},type:"touch"}})).takeUntil(Ct)}))};Ct.exports={mouseDrags:mouseDrags,touchDrags:touchDrags,drags:({mouseDowns$:xt,mouseUps$:Ct,mouseMoves$:_t,touchStarts$:Vn,touchEnds$:Gn,longTaps$:or,touchMoves$:lr},Fr)=>$t(mouseDrags(xt,Ct,_t,Fr),touchDrags(Vn,Gn,lr,Fr))}},{most:770}],817:[function(xt,Ct,_t){const{fromEvent:$t,merge:Vn}=xt("most"),{normalizeWheel:Gn,preventDefault:or}=xt("./utils"),{presses:lr}=xt("./presses"),{taps:Fr}=xt("./taps"),{drags:Hr}=xt("./drags"),{zooms:xo}=xt("./zooms"),baseInteractionsFromEvents=(xt,Ct)=>{Ct=Object.assign({},{passiveEventsHandlers:!0,preventScroll:!0,preventMenu:!0},Ct);const{passiveEventsHandlers:_t,preventScroll:lr,preventMenu:Fr}=Ct,Hr=$t("mousedown",xt,{passive:_t,capture:!1}),xo=$t("mouseup",xt,{passive:_t,capture:!1}),Eo=$t("mousemove",xt,{passive:_t,capture:!1}),Mo=$t("contextmenu",xt,{passive:!Ct.preventMenu,capture:!1}),Oo=$t("touchstart",xt,{passive:_t,capture:!1}),Ro=$t("touchmove",xt,{passive:_t,capture:!1}),Io=$t("touchend",xt,{passive:_t,capture:!1}),Bo=Vn(Hr,Oo),zo=Vn(xo,Io),Ho=Vn(Eo,Ro.filter((xt=>1===xt.touches.length)));return lr&&(xt=>{$t("mousewheel",xt,{passive:!1,capture:!1}).forEach(or),$t("DOMMouseScroll",xt,{passive:!1,capture:!1}).forEach(or),$t("wheel",xt,{passive:!1,capture:!1}).forEach(or),$t("touchmove",xt,{passive:!1,capture:!1}).forEach(or)})(xt),Fr&&Mo.forEach(or),{mouseDowns$:Hr,mouseUps$:xo,mouseMoves$:Eo,rightClicks$:Mo,wheel$:Vn($t("wheel",xt,{passive:_t,capture:!1}),$t("DOMMouseScroll",xt,{passive:_t,capture:!1}),$t("mousewheel",xt,{passive:_t,capture:!1})).map(Gn),touchStarts$:Oo,touchMoves$:Ro,touchEnds$:Io,pointerDowns$:Bo,pointerUps$:zo,pointerMoves$:Ho}};Ct.exports={baseInteractionsFromEvents:baseInteractionsFromEvents,pointerGestures:(xt,Ct)=>{const _t="addEventListener"in xt?baseInteractionsFromEvents(xt,Ct):xt,$t={multiTapDelay:250,longPressDelay:250,maxStaticDeltaSqr:100,zoomMultiplier:200,pinchThreshold:4e3,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1},Vn=Object.assign({},$t,Ct),Gn=lr(_t,Vn),or=Gn.filter((xt=>xt.timeDelta>Vn.longPressDelay)).filter((xt=>xt.moveDelta.sqrd<Vn.maxStaticDeltaSqr));return{press:Gn,holds:or,taps:Fr(Gn,Vn),drags:Hr(_t,Vn),zooms:xo(_t,Vn)}}}},{"./drags":816,"./presses":818,"./taps":819,"./utils":820,"./zooms":821,most:770}],818:[function(xt,Ct,_t){const{just:$t,merge:Vn}=xt("most"),{exists:Gn}=xt("./utils");Ct.exports={presses:(xt,Ct)=>(({mouseDowns$:xt,mouseUps$:Ct,mouseMoves$:_t,touchStarts$:or,touchEnds$:lr,touchMoves$:Fr},Hr)=>{Fr=Fr.filter((xt=>1===xt.touches.length));const xo=Vn(xt,or),Eo=Vn(Ct,lr);return xo.timestamp().flatMap((xt=>Vn($t(xt),Eo.take(1).timestamp()))).loop(((xt,Ct)=>{let _t;if(1===xt.length){const $t=Ct.time-xt[0].time,Vn="touches"in Ct.value?Ct.value.changedTouches[0].pageX:Ct.value.pageX,Gn="touches"in Ct.value?Ct.value.changedTouches[0].pageY:Ct.value.pageY,or="touches"in xt[0].value?xt[0].value.touches[0].pageX:xt[0].value.pageX,lr="touches"in xt[0].value?xt[0].value.touches[0].pageY:xt[0].value.pageY;let Fr=[Vn-or,Gn-lr];const Hr={x:or-Vn,y:Gn-lr,sqrd:Fr=Fr[0]*Fr[0]+Fr[1]*Fr[1]};_t={value:Ct.value,originalEvent:Ct.value,timeDelta:$t,moveDelta:Hr,x:Vn,y:Gn},xt=[]}else xt.push(Ct);return{seed:xt,value:_t}}),[]).filter(Gn).filter((xt=>void 0!==xt.value)).multicast()})(xt)}},{"./utils":820,most:770}],819:[function(xt,Ct,_t){const{exists:$t}=xt("./utils");Ct.exports={taps:(xt,Ct)=>{const{longPressDelay:_t,maxStaticDeltaSqr:Vn,multiTapDelay:Gn}=Ct;return xt.filter((xt=>xt.timeDelta<=_t)).filter((xt=>xt.moveDelta.sqrd<Vn)).map((xt=>({type:"data",data:xt}))).merge(xt.debounce(Gn).map((xt=>({type:"reset"})))).loop(((xt,{type:Ct,data:_t})=>{let $t;return"data"===Ct?xt.push(_t):($t=xt,xt=[]),{seed:xt,value:$t}}),[]).filter($t).map((xt=>({list:xt,nb:xt.length}))).multicast()}}},{"./utils":820}],820:[function(xt,Ct,_t){const{empty:$t,continueWith:Vn}=xt("most"),repeat=(xt,Ct)=>0===xt?$t():1===xt?Ct:Vn((()=>repeat(xt-1,Ct)),Ct);Ct.exports={repeat:repeat,preventDefault:xt=>(xt.preventDefault(),xt),isMoving:(xt,Ct)=>!0,normalizeWheel:xt=>{let Ct={x:0,y:0};return xt.wheelDelta?Ct=xt.wheelDelta:xt.detail?Ct=-xt.detail:xt.deltaY&&(Ct=-xt.deltaY),Ct>=0?1:-1},exists:xt=>null!=xt}},{most:770}],821:[function(xt,Ct,_t){const{merge:$t}=xt("most"),pinchZooms=({touchStarts$:xt,touchMoves$:Ct,touchEnds$:_t},$t)=>{const{pixelRatio:Vn,pinchThreshold:Gn}=$t;return xt.filter((xt=>2===xt.touches.length)).flatMap((xt=>{const $t=xt.touches[0].pageX*Vn,or=xt.touches[0].pageY*Vn,lr=xt.touches[1].pageX*Vn,Fr=xt.touches[1].pageY*Vn,Hr=($t-lr)*($t-lr)+(or-Fr)*(or-Fr);return Ct.tap((xt=>xt.preventDefault())).filter((xt=>2===xt.touches.length)).tap((xt=>{if("undefined"!=typeof CustomEvent){const xt=new CustomEvent("pinchStarted",{detail:!0});window.dispatchEvent(xt)}})).map((xt=>{const Ct=xt.touches[0].pageX*Vn,_t=xt.touches[0].pageY*Vn,$t=xt.touches[1].pageX*Vn,Gn=xt.touches[1].pageY*Vn;return(Ct-$t)*(Ct-$t)+(_t-Gn)*(_t-Gn)})).loop(((xt,Ct)=>xt?Math.abs(Ct-xt)<Gn?{seed:Ct,value:void 0}:{seed:Ct,value:Ct-xt}:{seed:Ct,value:Ct-Hr}),void 0).filter((xt=>void 0!==xt)).map((xt=>3e-6*xt)).takeUntil(_t.tap((xt=>{if("undefined"!=typeof CustomEvent){const xt=new CustomEvent("pinchEnded",{detail:!0});window.dispatchEvent(xt)}})))}))};Ct.exports={pinchZooms:pinchZooms,zooms:({touchStarts$:xt,touchMoves$:Ct,touchEnds$:_t,wheel$:Vn},Gn)=>$t(pinchZooms({touchStarts$:xt,touchMoves$:Ct,touchEnds$:_t},Gn),Vn).map((xt=>xt*Gn.zoomMultiplier))}},{most:770}],822:[function(xt,Ct,_t){const{create:$t}=xt("@most/create");Ct.exports=()=>{let e=function(){};return{stream:$t(((xt,Ct,_t)=>{e=xt})),callback:xt=>{e(xt)}}}},{"@most/create":683}],823:[function(xt,Ct,_t){const $t=xt("most");Ct.exports=(xt,Ct)=>{const t=(xt,Ct)=>$t.just(Ct).delay(xt),_t=Ct.map(xt);return xt=>$t.combine(t,_t,xt).switchLatest()}},{most:770}],824:[function(xt,Ct,_t){const $t=xt("./withLatestFrom");Ct.exports=xt=>Ct=>Ct.skipUntil(xt).merge(xt.take(1).thru($t((xt=>xt),Ct)))},{"./withLatestFrom":826}],825:[function(xt,Ct,_t){Ct.exports={callbackToObservable:xt("./callbackToObservable"),delayFromObservable:xt("./delayFromObservable"),holdUntil:xt("./holdUntil"),withLatestFrom:xt("./withLatestFrom")}},{"./callbackToObservable":822,"./delayFromObservable":823,"./holdUntil":824,"./withLatestFrom":826}],826:[function(xt,Ct,_t){const $t=xt("most");Ct.exports=(xt,Ct)=>_t=>$t.sample(xt,_t,Ct,_t)},{most:770}],827:[function(xt,Ct,_t){const{getFileExtensionFromString:$t}=xt("@jscad/core").utils,Vn=xt("../../most-utils/callbackToObservable"),Gn=xt("../../utils/logger");Ct.exports=async Ct=>{const _t=Vn(),{logging:or}=Object.assign({},{logging:!1},Ct),lr=Gn({enabled:or});let Fr=!0;const Hr=window.DatArchive;return Hr||(lr.error("Dat archives not supported in this environment!"),Fr=!1),{source:()=>_t.stream.multicast(),sink:Ct=>{let Vn,Gn,or,xo=[];Ct.forEach((Ct=>{const{type:Eo,id:Mo,urls:Oo,path:Ro}=Ct;if(!Fr)return void _t.callback({type:Eo,id:Mo,error:new Error("Dat archives not supported in this environment!")});const Io={unhandled:()=>{_t.callback({type:Eo,id:Mo,error:new Error(`Dat: no handler found for command ${Eo}`)})},read:()=>{Oo.map((async xt=>{xt=xt.replace(" ","+"),Gn=xt,Vn=new Hr(xt,{});const Ct=await Vn.readdir(Ro,{recursive:!0,stat:!0}),lr=await Promise.all(Ct.map((async xt=>{const Ct=`${Ro}/${xt.name}`;if(xt.stat.isFile()&&xt.name.includes("js"))return{content:await Vn.readFile(Ct),name:xt.name,fullPath:xt.name,isFile:!0}}))),Fr=await Vn.getInfo();or=Fr.title||"unnamed";const Oo=lr.filter((xt=>void 0!==xt)).map((xt=>({name:xt.name,ext:$t(xt.name),source:xt.content,fullPath:`/${or}/`+xt.fullPath})));xo=[{children:Oo,fullPath:`/${or}`,name:or}],_t.callback({type:Eo,id:Mo,url:xt,data:xo}),await Vn.history()}))},write:()=>{lr.warning("writing to dat archives is not implemented yet")},watch:()=>{Vn.watch().addEventListener("changed",(async({path:Ct})=>{const $t=await Vn.readFile(Ct),lr={name:xt("path").basename(Ct),ext:"js",source:$t,fullPath:`/${or}`+Ct},Fr=xo[0].children.findIndex((xt=>xt.fullPath===lr.fullPath));(xo=JSON.parse(JSON.stringify(xo)))[0].children[Fr]=lr,_t.callback({type:"read",id:"loadRemote",url:Gn,data:xo})}))}};(Io[Eo]||Io.unhandled)()}))}}}},{"../../most-utils/callbackToObservable":822,"../../utils/logger":865,"@jscad/core":19,path:711}],828:[function(xt,Ct,_t){const $t=xt("most"),Vn=xt("morphdom"),{proxy:Gn}=xt("most-proxy");Ct.exports=({targetEl:xt})=>{const{attach:Ct,stream:_t}=Gn(),or=_t,lr={};return{source:()=>{const t=Ct=>Array.from(xt.querySelectorAll(Ct));return or.forEach((()=>{Object.keys(lr).forEach((xt=>{const[Ct]=xt.split("@@"),_t=t(Ct);if(_t&&_t.length>0){const Ct=lr[xt];if(!1===Ct.live){Ct.live=!0;const xt=_t.map((xt=>$t.fromEvent(Ct.events,xt))),Vn=$t.mergeArray(xt);Ct.observable.attach(Vn)}}}))})),{select:xt=>{const Ct=t(xt);let _t;return{events:function($t){if(!Ct||Ct&&0===Ct.length){const Ct=Gn();_t=Ct.stream,lr[xt+"@@"+$t]={observable:Ct,live:!1}}return lr[xt+"@@"+$t].events=$t,_t.multicast()}}},element:xt}},sink:((xt,_t)=>{let Gn;const or=_t.take(1).map((Ct=>{Gn=Ct,xt.appendChild(Gn)})),lr=_t.skip(1).map((xt=>{Vn(Gn,xt)})),Fr=$t.mergeArray([or,lr]).multicast();Ct(Fr),Fr.forEach((xt=>xt))}).bind(null,xt)}}},{morphdom:728,most:770,"most-proxy":731}],829:[function(xt,Ct,_t){const{fromEvent:$t}=xt("most"),preventDefault=xt=>(xt.preventDefault(),xt),exists=xt=>null!=xt,itemListToArray=xt=>{const Ct=[];for(let _t=0;_t<xt.length;_t++){const $t=xt[_t];Ct.push($t.webkitGetAsEntry?$t.webkitGetAsEntry():$t)}return Ct};Ct.exports=({targetEl:xt})=>({source:()=>{const{dragOvers$:Ct,drops$:_t}=(xt=>({dragOvers$:$t("dragover",xt),drops$:$t("drop",xt)}))(xt);return _t.multicast(),_t.forEach(preventDefault),Ct.forEach(preventDefault),_t.map((xt=>(xt=>{if((xt=>""!==xt)(xt.dataTransfer.getData("url")))return{type:"url",data:xt.dataTransfer.getData("url")};if(xt.dataTransfer.types.includes("text/plain")){const Ct=xt.dataTransfer.getData("text");try{return{type:"url",data:new URL(Ct).href}}catch{return{type:"text",data:Ct}}}return xt.dataTransfer.items&&xt.dataTransfer.items.length>0?{type:"fileOrFolder",data:itemListToArray(xt.dataTransfer.items)}:void 0})(xt))).filter(exists).multicast()}})},{most:770}],830:[function(xt,Ct,_t){const $t=xt("../../most-utils/callbackToObservable");Ct.exports=xt=>{const Ct=$t();return{source:()=>{},sink:xt=>{xt.forEach((xt=>{Ct.callback(xt);const _t=document.createElement("input");_t.id="foo",_t.name="gna",_t.setAttribute("type","file"),_t.click(),_t.addEventListener("change",(()=>{}))}))}}}},{"../../most-utils/callbackToObservable":822}],831:[function(xt,Ct,_t){const $t=xt("path"),{getFileExtensionFromString:Vn}=xt("@jscad/core").utils,{formats:Gn}=xt("@jscad/io/formats"),or=xt("../../most-utils/callbackToObservable"),lr=xt("../../utils/logger"),Fr={stl:"application/sla"},readFile=(xt,Ct,_t)=>{const or=Vn(xt),lr=void 0!==Fr[or];fetch(xt).then((xt=>{if(xt.ok)return lr?xt.arrayBuffer():xt.text();Ct(new Error(`fetch error: ${xt.status} ${xt.statusText}`))})).then((Ct=>{const Vn=$t.basename(xt),lr=`/${Vn}`,Fr=Gn[or]?Gn[or].mimetype:"";_t({name:Vn,ext:or,mimetype:Fr,source:Ct,fullPath:lr})})).catch((xt=>{Ct(xt)}))},readProxy=(xt,Ct,_t)=>{fetch("./remote.pl?url="+xt).then((xt=>{if(xt.ok)return xt.json();Ct(new Error(`fetch error: ${xt.status} ${xt.statusText}`))})).then((xt=>{_t(xt)})).catch((xt=>{Ct(xt)}))};Ct.exports=xt=>{const{logging:Ct}=Object.assign({},{logging:!1},xt),_t=or(),$t=lr({enabled:Ct});return{source:()=>_t.stream.multicast(),sink:xt=>{xt.forEach((xt=>{const{type:Ct,id:Vn,urls:Gn,origin:or,proxy:lr}=xt,Fr={read:()=>{let xt=[];Gn.forEach((Gn=>{const s=xt=>{_t.callback({type:Ct,id:Vn,url:Gn,error:xt}),$t.error(xt)},c=$t=>{xt=xt.concat($t),_t.callback({type:Ct,id:Vn,url:Gn,data:xt})};lr?readProxy(Gn,s,(xt=>{if(xt.file){const Ct=new URL(or),_t=new URL(xt.file,Ct);readFile(_t.toString(),s,c)}})):readFile(Gn,s,c)}))},write:()=>{$t.warning("writing to http is not implemented yet")},watch:()=>{$t.warning("watching http is not implemented yet")},unhandled:()=>{_t.callback({type:Ct,id:Vn,error:new Error(`http: no handler found for command ${Ct}`)})}};(Fr[Ct]||Fr.unhandled)()}))}}}},{"../../most-utils/callbackToObservable":822,"../../utils/logger":865,"@jscad/core":19,"@jscad/io/formats":68,path:711}],832:[function(xt,Ct,_t){const $t=xt("is-electron"),Vn=xt("../../most-utils/callbackToObservable"),Gn={en:"english",de:"german",fr:"french",ja:"japanese",hr:"croatian",zh:"chinese"},getDefaultLocale=()=>{let xt;return $t()||(xt=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language),xt?xt.split("-")[0]:""},or=xt("es2015-i18n-tag"),lr=or.default,{i18nConfig:Fr}=or;Ct.exports=xt=>{const Ct=Vn();let _t=(xt=>{const{translations:Ct}=Object.assign({},{translations:{}},xt);return Ct})(xt);const $t={setAvailableTranslations:xt=>{_t=xt.data},getDefaultLocale:xt=>{Ct.callback({data:getDefaultLocale(),type:xt.type})},changeSettings:xt=>{const $t=xt.data;Fr({locales:$t,translations:_t[$t]}),Ct.callback({data:lr,type:"changeSettings"})},getAvailableLanguages:xt=>{const $t=Object.keys(_t).map((xt=>{let Ct=Gn[xt]?Gn[xt]:"placeholder";const $t=_t[xt];return $t&&"language"in $t&&(Ct=$t.language),{code:xt,fullName:Ct}}));Ct.callback({data:$t,type:"getAvailableLanguages"})}};return{sink:xt=>{xt.forEach((xt=>{const Ct=$t[xt.type];Ct&&Ct(xt)}))},source:()=>Ct.stream.multicast()}}},{"../../most-utils/callbackToObservable":822,"es2015-i18n-tag":725,"is-electron":727}],833:[function(xt,Ct,_t){const{walkFileTree:$t}=xt("@jscad/core").web,Vn=xt("../../most-utils/callbackToObservable"),{changedFiles:Gn,flattenFiles:or}=xt("./utils"),lr=xt("../../../data/localFsOptions.json");Ct.exports=async xt=>{const Ct=Vn();let _t=null,Fr=0;const t=xt=>_t.send(JSON.stringify(xt));return{source:()=>Ct.stream.multicast(),sink:xt=>{let Vn,Hr,xo,Eo=5e3;xt.forEach((xt=>{const{type:Mo,id:Oo,data:Ro,options:Io,path:Bo}=xt,zo={unhandled:()=>{Ct.callback({type:Mo,id:Oo,error:new Error(`LocalFs: no handler found for command ${Mo}`)})},read:async()=>{Vn=void 0,Hr=void 0,xo&&(clearInterval(xo),xo=0,_t&&_t.close()),Ro.length&&Ro[0]instanceof File||(Hr=Ro),Vn=await $t(Ro),Ct.callback({type:Mo,id:Oo,data:Vn})},watch:()=>{if(void 0===Hr)return;const{enabled:xt}=Io;xt?(_t||((_t=new WebSocket(lr.livereloadUrl)).onopen=function(xt){t({command:"hello",protocols:["http://livereload.com/protocols/official-6","http://livereload.com/protocols/official-7"],ver:"2.0.8",ext:"Chrome",extver:"2.1.0"})},_t.onmessage=function(xt){const Ct=JSON.parse(xt.data);"hello"===Ct.command&&t({command:"info",plugins:{less:{disable:!1,version:"1.0"}},url:document.location}),"reload"===Ct.command&&(Fr=0)},_t.onerror=function(xt){console.warn("websocket error",xt)},_t.onclose=function(xt){_t=null}),xo=setInterval((()=>{const xt=Date.now();!Hr||_t&&Fr||xt-Fr<Eo||(Fr=xt,$t(Hr).catch((xt=>{console.error("failed to read files",xt)})).then((_t=>{const $t=or(Vn),lr=or(_t),Fr=Gn($t,lr);Fr.length>0&&(Vn=_t,Ct.callback({type:"read",id:"loadRemote",data:Vn,path:Bo,changed:Fr}));const Hr=Date.now();Eo=Math.max(2*(Hr-xt),1e3)})))}),50)):xo&&(clearInterval(xo),xo=0)},write:()=>{}};(zo[Mo]||zo.unhandled)()}))}}}},{"../../../data/localFsOptions.json":634,"../../most-utils/callbackToObservable":822,"./utils":834,"@jscad/core":19}],834:[function(xt,Ct,_t){const flattenFiles=xt=>{let Ct=[];return xt.forEach((xt=>{xt.children?Ct=Ct.concat(flattenFiles(xt.children)):Ct.push(xt)})),Ct};Ct.exports={changedFiles:(xt,Ct)=>{const _t=xt.slice();return Ct.filter((xt=>{const Ct=_t.findIndex(((Ct,_t)=>((xt,Ct)=>{if(xt.fullPath===Ct.fullPath&&typeof xt.source==typeof Ct.source){if(xt.source.byteLength){const _t=new Uint8Array(xt.source),$t=new Uint8Array(Ct.source);return _t.length===$t.length&&_t.every(((xt,Ct)=>xt===$t[Ct]))}return xt.length===Ct.length&&xt.source===Ct.source}return!1})(Ct,xt)));return Ct<0||(_t.splice(Ct,1),!1)}))},flattenFiles:flattenFiles}},{}],835:[function(xt,Ct,_t){const $t=xt("../../most-utils/callbackToObservable");Ct.exports=({name:xt})=>{const Ct=$t();return{sink:_t=>{let Vn=!0;try{localStorage.getItem("jscad:")}catch(xt){Vn=!1}Vn?_t&&_t.forEach((_t=>{const{type:$t,key:Vn,data:Gn}=_t;if("write"===$t)localStorage.setItem(`jscad:${xt}-${Vn}`,JSON.stringify(Gn));else if("read"===$t){const _t=localStorage.getItem(`jscad:${xt}-${Vn}`),Gn=JSON.parse(_t)||{};Ct.callback({type:$t,key:Vn,data:Gn})}})):$t().callback({type:void 0,id:void 0,error:new Error("Local storage not supported in this environment!")})},source:()=>Ct.stream.multicast()}}},{"../../most-utils/callbackToObservable":822}],836:[function(xt,Ct,_t){const $t=xt("most"),Vn=xt("../../most-utils/callbackToObservable");Ct.exports=xt=>{const{packageMetadata:Ct,keyBindings:_t}=xt,Gn=Vn(),or={appTitle:`jscad v ${Ct.version}`,activeTool:void 0,status:{message:"",error:void 0,busy:!1},shortcuts:_t,storage:{path:""},version:Ct.version};return{source:()=>{const xt=Gn.stream.multicast();return $t.scan(((xt,Ct)=>Object.assign({},xt,Ct.state)),or,xt).startWith(or).skipRepeatsWith(((xt,Ct)=>JSON.stringify(xt)===JSON.stringify(Ct))).multicast()},sink:xt=>{xt.forEach((xt=>{Gn.callback(xt)}))}}}},{"../../most-utils/callbackToObservable":822,most:770}],837:[function(xt,Ct,_t){const $t=xt("most");Ct.exports=()=>({sink:xt=>{xt.forEach((xt=>{document.title=xt}))},source:()=>{const xt=window.location.href;return $t.just(xt).filter((xt=>void 0!==xt)).multicast().skipRepeats()}})},{most:770}],838:[function(xt,Ct,_t){const $t=xt("webworkify"),Vn=xt("../../most-utils/callbackToObservable");Ct.exports=xt=>{const Ct=Vn();let _t=$t(xt,{});return _t.onerror=xt=>Ct.callback({error:xt}),_t.onmessage=xt=>Ct.callback(xt),{sink:Vn=>{Vn.filter((({cmd:xt})=>"cancel"===xt)).forEach((Vn=>{_t.terminate(),(_t=$t(xt)).onerror=xt=>Ct.callback({error:xt}),_t.onmessage=xt=>Ct.callback(xt)})),Vn.filter((({cmd:xt})=>"cancel"!==xt)).forEach((xt=>{_t.postMessage(xt)}))},source:function(){return Ct.stream.multicast()}}}},{"../../most-utils/callbackToObservable":822,webworkify:812}],839:[function(xt,Ct,_t){const $t=xt("most"),{delayFromObservable:Vn,holdUntil:Gn,withLatestFrom:or}=xt("../../most-utils"),{getParameterValuesFromUIControls:lr}=xt("@jscad/core").parameters,{fetchUriParams:Fr,getAllUriParams:Hr}=xt("../../utils/urlUtils"),xo=xt("./reducers"),jsonCompare=(xt,Ct)=>JSON.stringify(xt)===JSON.stringify(Ct);Ct.exports=({sources:xt})=>{const Ct=$t.just({}).thru(or(xo.initialize,xt.state)).map((xt=>({type:"initializeDesign",state:xt,sink:"state"}))).multicast(),_t=Ct.map((xt=>({sink:"store",key:"design",type:"read"}))),Eo=xt.state.filter(xo.isDesignValid).skipRepeatsWith(xo.isDesignTheSameForSerialization).thru(Gn(xt.store.filter((xt=>"design"===xt.key&&"read"===xt.type)))).map(xo.requestSaveSettings).map((xt=>Object.assign({},{data:xt},{sink:"store",key:"design",type:"write"}))).multicast(),Mo=xt.store.filter((xt=>"design"===xt.key&&"read"===xt.type&&void 0!==xt.data)).thru(or(xo.setSettings,xt.state)).map((xt=>({type:"setDesignSettings",state:xt,sink:"state"}))).multicast(),Oo=$t.mergeArray([xt.drops.filter((xt=>"fileOrFolder"===xt.type)).tap((xt=>console.log("dropped file",xt))).map((({data:xt})=>({sink:"fs",data:xt,path:"realFs",urls:[]}))),xt.drops.filter((xt=>"url"===xt.type)).tap((xt=>console.log("dropped url",xt))).map((xt=>{const Ct=window.location.href,_t=xt.data,$t=new URL(_t),Vn=_t?[_t]:[],{protocol:Gn,pathname:or}=$t;return{sink:Gn.replace(":",""),urls:Vn,origin:Ct,path:or,proxy:!0}})),xt.dom.select(".example").events("click").map((xt=>xt.target.dataset.path)).map((xt=>{const Ct=new URL(xt),_t=xt?[xt]:[],{protocol:$t,origin:Vn}=Ct;return{sink:$t.replace(":",""),urls:_t,origin:Vn}})).tap((xt=>console.log("load example",xt))),xt.dom.select("#fileLoader").events("change").tap((xt=>console.log("selected directory",xt))).filter((xt=>xt.target.files.length>0)).map((xt=>{const Ct=xt.target.files,_t=[];for(let xt=0;xt<Ct.length;xt++)_t.push(Ct.item(xt));return{sink:"fs",data:_t,path:"realFs",urls:[]}})),xt.titleBar.filter((xt=>void 0!==xt)).tap((xt=>console.log("window href processing",xt))).map((xt=>{const Ct=xt;let _t=Fr(xt,"uri",void 0);if(!_t){const Ct=new URL(xt);if(0===Ct.hash.length)return;_t=Ct.hash.slice(1)}const $t=new URL(_t),Vn=[_t],{protocol:Gn,pathname:or}=$t;return{sink:Gn.replace(":",""),urls:Vn,origin:Ct,path:or,proxy:!0}}))]).filter((xt=>void 0!==xt)).thru(Gn(Mo)).map((xt=>({type:"read",id:"loadRemote",urls:xt.urls,sink:xt.sink,origin:xt.origin,path:xt.path,data:xt.data,proxy:xt.proxy}))).multicast().skipRepeats(),Ro=$t.mergeArray(Object.values(xt).filter((xt=>void 0!==xt&&"source"in xt))).filter((xt=>!("loadRemote"!==xt.id||"read"!==xt.type||"error"in xt||"sink"in xt))).map((({data:xt})=>({filesAndFolders:xt}))).thru(or(xo.setDesignContent,xt.state)).map((xt=>({type:"setDesignContent",state:xt,sink:"state"}))).multicast(),Io=$t.mergeArray([xt.state.filter(xo.isDesignValid).map((({design:xt})=>({id:"watchScript",path:xt.mainPath,origin:xt.origin,options:{enabled:xt.autoReload}}))).skipRepeatsWith(jsonCompare)]).map((xt=>Object.assign({},{type:"watch",sink:xt.origin},xt))).multicast(),Bo=$t.mergeArray([xt.state.filter(xo.isDesignValid).filter((xt=>void 0!==xt.design.solids)).map((xt=>xt.design.solids)).skipRepeatsWith(jsonCompare)]).thru(or(xo.requestWriteCachedGeometry,xt.state)).map((xt=>Object.assign({},{type:"write",id:"cachedGeometry",sink:xt.origin},xt))).multicast(),zo=$t.mergeArray([Oo.map((({sink:xt})=>xt))]).thru(or(xo.resetDesign,xt.state)).map((xt=>({type:"resetDesign",state:xt,sink:"state"}))).multicast(),Ho=$t.mergeArray([xt.solidWorker.filter((xt=>!("error"in xt)&&xt.data instanceof Object&&"solids"===xt.data.type)).map((xt=>{const{lookupCounts:Ct,lookup:_t,solids:$t}=xt.data;return{solids:$t,lookup:_t,lookupCounts:Ct}})).multicast(),xt.fs.filter((xt=>"read"===xt.type&&"loadCachedGeometry"===xt.id&&xt.data)).map((xt=>({solids:void 0,lookupCounts:void 0,lookup:void xt.data}))).multicast()]).thru(or(xo.setDesignSolids,xt.state)).map((xt=>({type:"setDesignSolids",state:xt,sink:"state"}))).multicast(),Qo=xt.state.skipRepeatsWith(xo.isDesignTheSame).filter(xo.isDesignValid).map(xo.requestGeometryRecompute).map((xt=>Object.assign({},xt,{sink:"geometryWorker",cmd:"generate"}))).multicast(),pi=Qo.thru(Vn((xt=>xt.design.solidsTimeOut),xt.state.filter(xo.isDesignValid))).thru(or(xo.timeoutGeometryRecompute,xt.state)).map((xt=>Object.assign({},{state:xt},{sink:"state",type:"timeOutDesignGeneration"}))).multicast(),gi=pi.filter((({state:xt})=>void 0!==xt.status.error)).map((xt=>Object.assign({},{sink:"geometryWorker",cmd:"cancel"}))).multicast(),es=xt.solidWorker.filter((xt=>!("error"in xt)&&xt.data instanceof Object&&"params"===xt.data.type)).map((({data:xt})=>({parameterDefaults:xt.parameterDefaults,parameterDefinitions:xt.parameterDefinitions,origin:"worker"}))),ts=$t.mergeArray([es]).skipRepeatsWith(jsonCompare).thru(Gn(xt.state.filter(xo.isDesignValid))).thru(or(xo.setDesignParameterDefinitions,xt.state)).map((xt=>({type:"setDesignParameterDefinitions",state:xt,sink:"state"}))).multicast(),y=()=>Array.from(document.getElementById("paramsTable").getElementsByTagName("input")).concat(Array.from(document.getElementById("paramsTable").getElementsByTagName("select"))).concat(Array.from(document.getElementById("paramsTable").getElementsByClassName("groupTitle"))),ns=$t.mergeArray([xt.dom.select("#updateDesignFromParams").events("click").map((()=>{const xt=y();return{parameterValues:lr(xt),origin:"uiManualUpdate"}})),xt.paramChanges.filter((xt=>document.getElementById("instantUpdate").checked)).map((()=>{try{const xt=y();return{parameterValues:lr(xt),origin:"uiInstantUpdate"}}catch(xt){return{error:xt,origin:"instantUpdate"}}}))]).multicast().debounce(10),rs=xt.store.filter((xt=>"design"===xt.key&&"read"===xt.type&&void 0!==xt.data.parameterValues)).map((({data:xt})=>({parameterValues:xt.parameterValues,origin:"store"}))).multicast(),os=xt.titleBar.map((xt=>Hr(xt))).filter((xt=>Object.keys(xt).length>0)).map((xt=>({parameterValues:xt,origin:"titleBar"}))).multicast(),is=xt.state.filter(xo.isDesignValid).multicast(),ss=$t.mergeArray([ns,rs,os,xt.dom.select("#resetDesignToParameterDefaults").events("click").thru(or(((xt,Ct)=>({parameterValues:xt.design.parameterDefaults,origin:"reset"})),xt.state))]).skipRepeatsWith(jsonCompare).thru(Gn(xt.state.filter(xo.isDesignValid))).thru(Gn(is.filter((xt=>xt.design&&Object.keys(xt.design.parameterDefinitions).length>0)))).thru(or(xo.setDesignParameterValues,xt.state)).map((xt=>({type:"setDesignParameterValues",state:xt,sink:"state"}))).multicast().delay(10),as=xt.solidWorker.filter((xt=>xt.data instanceof Object&&"errors"===xt.data.type)).map((({data:xt})=>({error:xt,origin:"worker"})));return{initialize$:Ct,requestLoadDesignContent$:Oo,requestWatchDesign$:Io,requestWriteCachedGeometry$:Bo,resetDesign$:zo,setDesignContent$:Ro,setDesignSolids$:Ho,setDesignParameterDefinitions$:ts,setDesignParameterValues$:ss,reportErrorsFromWorker$:$t.mergeArray([as]).skipRepeatsWith(jsonCompare).tap((xt=>console.log("errors",xt))),requestGeometryRecompute$:Qo,timeoutGeometryRecompute$:pi,cancelGeometryRecompute$:gi,requestLoadSettings$:_t,requestSaveSettings$:Eo,setDesignSettings$:Mo,toggleAutoReload$:$t.mergeArray([xt.dom.select("#toggleAutoReload").events("click").map((xt=>xt.target.checked))]).thru(or(xo.toggleAutoReload,xt.state)).map((xt=>({type:"toggleAutoReload",state:xt,sink:"state"}))),toggleInstantUpdate$:$t.mergeArray([xt.dom.select("#instantUpdate").events("click").map((xt=>xt.target.checked))]).thru(or(xo.toggleInstantUpdate,xt.state)).map((xt=>({type:"toggleInstantUpdate",state:xt,sink:"state"}))),toggleVTreeMode$:$t.mergeArray([xt.dom.select("#toggleVtreeMode").events("click").map((xt=>xt.target.checked))]).thru(or(xo.toggleVtreeMode,xt.state)).map((xt=>({type:"toggleVtreeMode",state:xt,sink:"state"}))),setSolidsTimeout$:$t.mergeArray([xt.dom.select("#solidsTimeout").events("change").map((xt=>xt.target.value)).map((xt=>parseFloat(xt)))]).thru(or(xo.setSolidsTimeout,xt.state)).map((xt=>({type:"setSolidsTimeout",state:xt,sink:"state"})))}}},{"../../most-utils":825,"../../utils/urlUtils":867,"./reducers":846,"@jscad/core":19,most:770}],840:[function(xt,Ct,_t){Ct.exports=({sources:Ct,extras:_t})=>Ct.state.filter((xt=>xt.design&&xt.languages&&xt.viewer)).skipRepeatsWith(((xt,Ct)=>JSON.stringify(xt)===JSON.stringify(Ct))).combine(((Ct,$t)=>xt("../views/main")(Ct,$t,_t.paramsCallbacktoStream,_t.editorCallbackToStream)),Ct.i18n.filter((xt=>"changeSettings"===xt.type)).map((xt=>xt.data)))},{"../views/main":856}],841:[function(xt,Ct,_t){const $t=xt("most"),{withLatestFrom:Vn}=xt("../../most-utils"),reducers_setErrors=(xt,Ct)=>{const{error:_t}=Ct;return{status:Object.assign({},xt.status,{error:_t,busy:!1})}},reducers_clearErrors=(xt,Ct)=>({status:Object.assign({},xt.status,{error:void 0,busy:!1})});Ct.exports=({sources:xt})=>({setErrors$:$t.mergeArray(Object.values(xt).filter((xt=>void 0!==xt&&"source"in xt))).filter((xt=>{try{return"error"in xt}catch(xt){return!1}})).thru(Vn(reducers_setErrors,xt.state)).map((xt=>Object.assign({},{type:"setErrors",sink:"state"},{state:xt}))),clearErrors$:$t.never().thru(Vn(reducers_clearErrors,xt.state)).map((xt=>Object.assign({},{type:"clearErrors",sink:"state"},{state:xt})))})},{"../../most-utils":825,most:770}],842:[function(xt,Ct,_t){const $t=xt("most"),{solidsAsBlob:Vn}=xt("@jscad/io"),{withLatestFrom:Gn}=xt("../../most-utils"),{exportFilePathFromFormatAndDesign:or}=xt("../../core/io/exportUtils"),reducers_initialize=xt=>({io:{exportFormat:"",exportFilePath:"",availableExportFormats:[]}}),reducers_setExportFormat=(xt,Ct)=>({io:Object.assign({},xt.io,or(xt.design,Ct),{exportFormat:Ct})}),reducers_requestExport=Ct=>{const{exportFilePath:_t,exportFormat:$t}=Ct.io,{solids:Gn}=Ct.design,{saveAs:or}=xt("file-saver");or(Vn(Gn,{format:$t}),_t)};Ct.exports=({sources:xt})=>{const Ct=$t.just({}).thru(Gn(reducers_initialize,xt.state)).map((xt=>Object.assign({},{type:"initializeExports",sink:"state"},{state:xt}))),_t=xt.dom.select("#exportFormats").events("change").map((xt=>xt.target.value)).thru(Gn(reducers_setExportFormat,xt.state)).map((xt=>Object.assign({},{type:"changeExportFormat",sink:"state"},{state:xt}))).multicast();return{initializeExports$:Ct,requestExport$:xt.dom.select("#exportBtn").events("click").thru(Gn(reducers_requestExport,xt.state)).map((xt=>({type:"exportRequested",data:xt}))),changeExportFormat$:_t}}},{"../../core/io/exportUtils":814,"../../most-utils":825,"@jscad/io":69,"file-saver":726,most:770}],843:[function(xt,Ct,_t){const $t=xt("most"),{flatten:Vn}=xt("@jscad/array-utils"),{proxy:Gn}=xt("most-proxy");Ct.exports=Ct=>{const{attach:_t,stream:or}=Gn();Ct.actions=or.skipRepeatsWith(((xt,Ct)=>JSON.stringify(xt)===JSON.stringify(Ct))).multicast();const lr=xt("./tools")({sources:Ct}),Fr=xt("./viewer")({sources:Ct}),Hr=xt("./themes")({sources:Ct}),xo=xt("./languages")({sources:Ct}),Eo=xt("./shortcuts")({sources:Ct}),Mo=xt("./errors")({sources:Ct}),Oo=xt("./exports")({sources:Ct}),Ro=[Mo,xt("./design")({sources:Ct}),Oo,lr,Hr,Fr,xo,Eo],Io=$t.mergeArray(Vn(Ro.map((xt=>Object.values(xt))))).skipRepeatsWith(((xt,Ct)=>JSON.stringify(xt)===JSON.stringify(Ct))).multicast().filter((xt=>void 0!==xt));return _t(Io),Io}},{"./design":839,"./errors":841,"./exports":842,"./languages":845,"./shortcuts":847,"./themes":848,"./tools":849,"./viewer":850,"@jscad/array-utils":525,most:770,"most-proxy":731}],844:[function(xt,Ct,_t){Ct.exports=Ct=>{const{sinks:_t,outputs$:$t}=Ct,{store:Vn,fs:Gn,http:or,https:lr,i18n:Fr,dom:Hr,solidWorker:xo,state:Eo,dat:Mo}=_t;Hr(xt("./dom")(Ct)),Fr($t.filter((xt=>"sink"in xt&&"i18n"===xt.sink))),Vn($t.filter((xt=>"sink"in xt&&"store"===xt.sink))),or($t.filter((xt=>"sink"in xt&&"http"===xt.sink))),lr($t.filter((xt=>"sink"in xt&&"https"===xt.sink))),Gn($t.filter((xt=>"sink"in xt&&"fs"===xt.sink))),xo($t.filter((xt=>"sink"in xt&&"geometryWorker"===xt.sink))),Eo($t.filter((xt=>"sink"in xt&&"state"===xt.sink))),Mo($t.filter((xt=>"sink"in xt&&"dat"===xt.sink)))}},{"./dom":840}],845:[function(xt,Ct,_t){const $t=xt("most"),{holdUntil:Vn,withLatestFrom:Gn}=xt("../../most-utils"),reducers_initialize=xt=>({languages:{active:void 0,available:[]}}),reducers_setLanguage=(xt,Ct)=>({languages:Object.assign({},xt.languages,{active:Ct})}),reducers_setAvailableLanguages=(xt,Ct)=>({languages:Object.assign({},xt.languages,{available:Ct})}),reducers_requestSaveSettings=xt=>({active:xt.active});Ct.exports=({sources:xt})=>{const Ct=$t.just({}).thru(Gn(reducers_initialize,xt.state)).map((xt=>Object.assign({},{type:"initializeLanguages",sink:"state"},{state:xt}))),_t=Ct.map((xt=>({type:"getAvailableLanguages",sink:"i18n"}))),or=_t.map((xt=>({type:"getDefaultLocale",sink:"i18n"}))),lr=xt.state.filter((xt=>xt.languages&&void 0!==xt.languages.active)).map((xt=>xt.languages.active)).skipRepeatsWith(((xt,Ct)=>JSON.stringify(xt)===JSON.stringify(Ct))).map((xt=>({type:"changeSettings",data:xt,sink:"i18n"}))),Fr=$t.mergeArray([xt.i18n.filter((xt=>"getAvailableLanguages"===xt.type)).map((xt=>xt.data))]).thru(Gn(reducers_setAvailableLanguages,xt.state)).map((xt=>Object.assign({},{type:"setAvailableLanguages",sink:"state"},{state:xt}))).multicast(),Hr=Ct.map((xt=>({sink:"store",key:"languages",type:"read"}))),xo=xt.i18n.thru(Vn(Fr)).filter((xt=>"getDefaultLocale"===xt.type)).map((xt=>xt.data)).multicast().delay(1),Eo=xt.store.filter((xt=>"languages"===xt.key&&"read"===xt.type)).thru(Vn(xo)).map((xt=>xt.data.active)).filter((xt=>void 0!==xt));return{initialize$:Ct,requestGetAvailableLanguages$:_t,requestGetDefaultLanguage$:or,requestGetLanguageData$:lr,setLanguage$:$t.mergeArray([xo,xt.dom.select("#languageSwitcher").events("change").map((xt=>xt.target.value)),Eo]).thru(Gn(reducers_setLanguage,xt.state)).map((xt=>Object.assign({},{type:"setLanguage",sink:"state"},{state:xt}))),setAvailableLanguages$:Fr,requestLoadSettings$:Hr,requestSaveSettings$:xt.state.filter((xt=>xt.languages)).map((xt=>xt.languages)).thru(Vn(xt.store.filter((xt=>"languages"===xt.key&&"read"===xt.type)))).map(reducers_requestSaveSettings).map((xt=>Object.assign({},{data:xt},{sink:"store",key:"languages",type:"write"}))).multicast()}}},{"../../most-utils":825,most:770}],846:[function(xt,Ct,_t){const $t=xt("path"),{applyParameterDefinitions:Vn}=xt("@jscad/core").parameters,{makeFakeFs:Gn}=xt("@jscad/core").loading,{getDesignEntryPoint:or,getDesignName:lr}=xt("@jscad/core").loading.requireDesignUtilsFs,{keep:Fr}=xt("../../utils/object"),Hr=xt("../../../package.json"),{availableExportFormatsFromSolids:xo,exportFilePathFromFormatAndDesign:Eo}=xt("../../core/io/exportUtils"),Mo=["parameterDefinitions","parameterValues","mainPath","filesAndFolders","vtreeMode"],Oo=["name","mainPath","origin","parameterValues","vtreeMode","autoReload","instantUpdate","solidsTimeOut"],Ro={initialize:()=>({design:{name:"",path:"",mainPath:"",origin:void 0,filesAndFolders:[],instantUpdate:!1,autoReload:!1,parameterDefinitions:[],parameterValues:{},parameterDefaults:{},solidsTimeOut:8e4,solids:[],vtreeMode:!1,lookup:{},lookupCounts:{},debug:{startTime:0,endTime:0,totalTime:0}}}),resetDesign:(xt,Ct)=>{const _t=Object.assign({},xt.design,Fr(["name","path","mainPath","origin","filesAndFolders","parameterDefinitions","parameterValues","parameterDefaults","lookup","lookupCounts","debug","solids"],Ro.initialize().design));return _t.origin=Ct,{design:_t}},setDesignContent:(xt,Ct)=>{const{filesAndFolders:_t}=Ct,Vn=Gn(_t),Fr=_t[0].fullPath,xo=or(Vn,Fr),Eo=lr(Vn,Fr),Mo=$t.dirname(Fr);let Oo=xt.design;const Ro=Object.assign({},xt.design.debug,{startTime:new Date});return{design:Oo=Object.assign({},Oo,{name:Eo,path:Mo,mainPath:xo,filesAndFolders:_t,debug:Ro}),appTitle:`jscad v ${Hr.version}: ${xt.design.name}`,status:Object.assign({},xt.status,{busy:!0,error:void 0})}},setDesignSolids:(xt,{solids:Ct,lookup:_t,lookupCounts:$t})=>{Ct=Ct||[],_t=_t||{},$t=$t||{};const Vn=new Date,Gn=Vn-xt.design.debug.startTime,or=Object.assign({},xt.design.debug,{endTime:Vn,totalTime:Gn});console.warn("total time for design regeneration",Gn,(new Date).getSeconds());const lr=Object.assign({},xt.design,{solids:Ct,lookup:_t,lookupCounts:$t,debug:or}),{exportFormat:Fr,availableExportFormats:Hr}=xo(Ct),Mo={exportFormat:Fr,exportFilePath:Eo(lr,Fr).exportFilePath,availableExportFormats:Hr};return{design:lr,status:Object.assign({},xt.status,{busy:!1}),io:Mo}},setDesignParameterDefinitions:(xt,Ct)=>{const _t=Ct.parameterDefaults||xt.design.parameterDefaults,$t=Ct.parameterDefinitions||xt.design.parameterDefinitions;return{design:Object.assign({},xt.design,{parameterDefaults:_t,parameterDefinitions:$t,parametersOrigin:Ct.origin})}},setDesignParameterValues:(xt,Ct)=>{let _t=Ct.parameterValues;"instantUpdate"!==Ct.origin||xt.design.instantUpdate||(_t=xt.design.parameterValues),_t=_t?Vn(_t,xt.design.parameterDefinitions):_t,_t=Object.assign({},xt.design.parameterValues,_t);let $t=Object.assign({},xt.design,{parameterValues:_t,parametersOrigin:Ct.origin});const Gn=Object.assign({},xt.design.debug,{startTime:new Date});return{design:$t=Object.assign({},$t,{debug:Gn}),status:Object.assign({},xt.status,{busy:!0,error:void 0})}},setSettings:(xt,{data:Ct})=>{const{vtreeMode:_t,autoReload:$t,instantUpdate:Vn,solidsTimeOut:Gn}=Ct;return void 0===_t?{design:xt.design}:{design:Object.assign({},xt.design,{vtreeMode:_t,autoReload:$t,instantUpdate:Vn,solidsTimeOut:Gn})}},requestGeometryRecompute:({design:xt},Ct)=>Fr(["mainPath","parameterValues","filesAndFolders","vtreeMode","lookup","lookupCounts"],xt),timeoutGeometryRecompute:({status:xt},Ct)=>xt.isBusy?Object.assign({},xt,{busy:!1,error:new Error("Failed to generate design within an acceptable time, bailing out")}):{status:xt},requestWriteCachedGeometry:({design:xt},Ct)=>{const _t={};return Object.keys(Ct).forEach((xt=>{_t[xt]=Ct[xt]})),{path:".solidsCache",options:{isRawData:!0},origin:xt.origin}},requestSaveSettings:({design:xt})=>Fr(Oo,xt),isDesignValid:xt=>xt.design&&xt.design.name&&""!==xt.design.path,isDesignTheSame:(xt,Ct)=>{if(!xt.design)return!1;const _t=JSON.stringify(Fr(Mo,Ct.design));return JSON.stringify(Fr(Mo,xt.design))===_t},isDesignTheSameForSerialization:(xt,Ct)=>{if(!xt.design)return!1;const _t=JSON.stringify(Fr(Oo,Ct.design));return JSON.stringify(Fr(Oo,xt.design))===_t},toggleAutoReload:(xt,Ct)=>({design:Object.assign({},xt.design,{autoReload:Ct})}),toggleInstantUpdate:(xt,Ct)=>({design:Object.assign({},xt.design,{instantUpdate:Ct})}),toggleVtreeMode:(xt,Ct)=>({design:Object.assign({},xt.design,{vtreeMode:Ct})}),setSolidsTimeout:(xt,Ct)=>({design:Object.assign({},xt.design,{solidsTimeOut:Ct})})};Ct.exports=Ro},{"../../../package.json":813,"../../core/io/exportUtils":814,"../../utils/object":866,"@jscad/core":19,path:711}],847:[function(xt,Ct,_t){const $t=xt("most"),{head:Vn}=xt("@jscad/array-utils"),{holdUntil:Gn,withLatestFrom:or}=xt("../../most-utils"),{getKeyCombos:lr,isKeyEventScopeValid:Fr,simpleKey:Hr}=xt("../../utils/keys"),{merge:xo}=xt("../../utils/utils"),reducers_initialize=xt=>xt,reducers_setShortcuts=(xt,Ct)=>({shortcuts:xo([],xt.shortcuts,Ct)}),reducers_setShortcut=(xt,Ct)=>{const s=Ct=>xt.shortcuts.filter((xt=>xt.key===Ct)).length>0;return{shortcuts:xt.shortcuts.map((xt=>{if(xt.command===Ct.command&&xt.args===Ct.args){if("inProgress"in Ct){const{inProgress:_t,tmpKey:$t}=Ct;if(_t){const Ct=s($t)?"shortcut already exists":void 0;return Object.assign({},xt,{inProgress:_t,tmpKey:$t,error:Ct})}return Object.assign({},xt,{inProgress:_t,tmpKey:$t})}if(Ct.done&&!s(Ct.key)){const{command:_t,args:$t}=xt;return{key:Ct.key,command:_t,args:$t}}return xt}return xt}))}},reducers_triggerShortcut=(xt,{event:Ct,compositeKey:_t})=>{const $t=Vn(xt.shortcuts.filter((xt=>xt.key.toLowerCase()===_t)));if($t){const{command:xt,args:Ct}=$t;return{type:xt,data:Ct}}},reducers_requestSaveSettings=xt=>xt;Ct.exports=({sources:xt})=>{const Ct=$t.just({}).thru(or(reducers_initialize,xt.state)).map((xt=>Object.assign({},{type:"initializeShortcuts",sink:"state"},{state:xt}))),_t=$t.mergeArray([xt.store.filter((xt=>"shortcuts"===xt.key&&"read"===xt.type&&xt.data&&xt.data.shortcuts)).map((xt=>xt.data.shortcuts))]).thru(or(reducers_setShortcuts,xt.state)).map((xt=>Object.assign({},{type:"setShortcuts",sink:"state"},{state:xt}))),Vn=xt.dom.select(".shortcutCommand").events("keyup").multicast(),xo=xt.dom.select(".shortcutCommand").events("keydown").multicast(),Eo=lr({dropRepeats:!0,endKeys:["enter","escape"]},Vn,xo);Vn.forEach((xt=>(xt.preventDefault(),xt.stopPropagation(),!1))),xo.forEach((xt=>(xt.preventDefault(),xt.stopPropagation(),!1)));const Mo=$t.mergeArray([Eo.map((({event:xt,compositeKey:Ct})=>({event:xt,compositeKey:Ct,inProgress:!0}))).merge(xt.dom.select(".shortcutCommand").events("focus").map((xt=>({event:xt,compositeKey:"",inProgress:!0})))).merge(xt.dom.select(".shortcutCommand").events("blur").map((xt=>({event:xt,compositeKey:"",inProgress:!1})))).merge(Vn.filter((xt=>"escape"===Hr(xt))).map((xt=>({event:xt,compositeKey:"",inProgress:!1})))).merge(Vn.filter((xt=>"enter"===Hr(xt))).map((xt=>({event:xt,done:!0})))).scan(((xt,Ct)=>{const{event:_t,compositeKey:$t,inProgress:Vn,done:Gn}=Ct,or=_t.target.dataset.command,lr=_t.target.dataset.args,Fr=Object.assign({},xt,{command:or,args:lr,inProgress:Vn,done:Gn});return void 0!==$t&&""!==$t&&(Fr.key=$t,Fr.tmpKey=$t),"done"in Fr&&Fr.done&&(delete Fr.inProgress,delete Fr.tmpKey),Fr}),{}).filter((xt=>void 0!==xt))]).thru(or(reducers_setShortcut,xt.state)).map((xt=>({type:"setShortcut",state:xt,sink:"state"}))).multicast(),Oo=xt.dom.element.getAttribute("key"),Ro=$t.fromEvent("keyup",xt.dom.element).filter((xt=>Fr(Oo,xt.target))).multicast(),Io=$t.fromEvent("keydown",xt.dom.element).filter((xt=>Fr(Oo,xt.target))).multicast(),Bo=lr({dropRepeats:!1},Ro,Io).thru(or(reducers_triggerShortcut,xt.state)).filter((xt=>void 0!==xt)),zo=Ct.map((xt=>({sink:"store",key:"shortcuts",type:"read"})));return{initialize$:Ct,setShortcut$:Mo,setShortcuts$:_t,triggerFromShortcut$:Bo,requestLoadSettings$:zo,requestSaveSettings$:xt.state.filter((xt=>xt.shortcuts)).map((xt=>xt.shortcuts)).thru(Gn(xt.store.filter((xt=>"shortcuts"===xt.key&&"read"===xt.type)))).map(reducers_requestSaveSettings).map((xt=>Object.assign({},{data:xt},{sink:"store",key:"shortcuts",type:"write"}))).multicast()}}},{"../../most-utils":825,"../../utils/keys":864,"../../utils/utils":868,"@jscad/array-utils":525,most:770}],848:[function(xt,Ct,_t){const $t=xt("most"),{holdUntil:Vn,withLatestFrom:Gn}=xt("../../most-utils"),{merge:or}=xt("../../utils/utils"),reducers_initialize=xt=>({themes:{active:"light",themeSettings:{mainTextColor:"#FFF"}}}),reducers_setTheme=(Ct,_t)=>{const $t=xt("../../../data/themes"),Vn=$t[_t]?$t[_t]:$t.light;return{viewer:Ct.viewer?or({},Ct.viewer,Vn.viewer):Vn.viewer,themes:Object.assign({},Ct.themes,{available:$t,active:_t,themeSettings:Vn})}},reducers_requestSaveSettings=xt=>({active:xt.active});Ct.exports=({sources:xt})=>{const Ct=$t.just({}).thru(Gn(reducers_initialize,xt.state)).map((xt=>Object.assign({},{type:"initializeThemes",sink:"state"},{state:xt}))),_t=$t.mergeArray([xt.dom.select("#themeSwitcher").events("change").map((xt=>xt.target.value)),xt.store.filter((xt=>"themes"===xt.key&&"read"===xt.type&&xt.data&&xt.data.active)).map((xt=>xt.data.active))]).startWith("light").thru(Gn(reducers_setTheme,xt.state)).map((xt=>Object.assign({},{type:"setTheme",sink:"state"},{state:xt}))),or=Ct.map((xt=>({sink:"store",key:"themes",type:"read"})));return{initialize$:Ct,setTheme$:_t,requestLoadSettings$:or,requestSaveSettings$:xt.state.filter((xt=>xt.themes)).map((xt=>xt.themes)).thru(Vn(xt.store.filter((xt=>"themes"===xt.key&&"read"===xt.type)))).map(reducers_requestSaveSettings).map((xt=>Object.assign({},{data:xt},{sink:"store",key:"themes",type:"write"}))).multicast()}}},{"../../../data/themes":675,"../../most-utils":825,"../../utils/utils":868,most:770}],849:[function(xt,Ct,_t){const $t=xt("most"),{withLatestFrom:Vn}=xt("../../most-utils");Ct.exports=({sources:xt})=>({setActiveTool$:$t.mergeArray([xt.dom.select("#toggleOptions").events("click").map((xt=>"options")),xt.dom.select("#toggleEditor").events("click").map((xt=>"editor")),xt.dom.select("#toggleHelp").events("click").map((xt=>"help")),xt.dom.select(".example").events("mouseup").map((xt=>{}))]).thru(Vn(((xt,Ct)=>({activeTool:xt.activeTool===Ct?void 0:Ct})),xt.state)).map((xt=>Object.assign({},{type:"setActiveTool",sink:"state"},{state:xt})))})},{"../../most-utils":825,most:770}],850:[function(xt,Ct,_t){const $t=xt("most"),{withLatestFrom:Vn}=xt("../../most-utils"),Gn={initialize:xt=>({viewer:{rendering:{background:[1,1,1,1],meshColor:[0,.6,1,1],autoRotate:!1,autoZoom:!1},grid:{show:!1,color:[1,1,1,.1]},axes:{show:!0},camera:{position:""}}}),toggleAutoRotate:(xt,Ct)=>{const _t=Object.assign({},xt.viewer.rendering,{autoRotate:Ct});return{viewer:Object.assign({},xt.viewer,{rendering:_t})}},toggleAutoZoom:(xt,Ct)=>{const _t=Object.assign({},xt.viewer.rendering,{autoZoom:Ct});return{viewer:Object.assign({},xt.viewer,{rendering:_t})}},toggleGrid:(xt,Ct)=>{const _t=Object.assign({},xt.viewer.grid,{show:Ct});return{viewer:Object.assign({},xt.viewer,{grid:_t})}},toggleAxes:(xt,Ct)=>{const _t=Object.assign({},xt.viewer.axes,{show:Ct});return{viewer:Object.assign({},xt.viewer,{axes:_t})}},toPresetView:(xt,Ct)=>{const _t=Object.assign({},xt.viewer.camera,{position:Ct});return{viewer:Object.assign({},xt.viewer,{camera:_t})}},setProjectionType:(xt,Ct)=>({viewer:Object.assign({},xt.viewer,{camera:{projectionType:Ct}})})};Ct.exports=({sources:xt})=>{const Ct=$t.just({}).thru(Vn(Gn.initialize,xt.state)).map((xt=>Object.assign({},{type:"initializeViewer",sink:"state"},{state:xt}))),_t=$t.mergeArray([xt.dom.select("#toggleGrid").events("click").map((xt=>xt.target.checked))]).thru(Vn(Gn.toggleGrid,xt.state)).map((xt=>({type:"toggleGrid",state:xt,sink:"state"}))),or=$t.mergeArray([xt.dom.select("#toggleAxes").events("click").map((xt=>xt.target.checked))]).thru(Vn(Gn.toggleAxes,xt.state)).map((xt=>({type:"toggleAxes",state:xt,sink:"state"}))),lr=$t.mergeArray([xt.dom.select("#toggleAutoRotate").events("click").map((xt=>xt.target.checked))]).thru(Vn(Gn.toggleAutoRotate,xt.state)).map((xt=>({type:"toggleAutoRotate",state:xt,sink:"state"}))),Fr=$t.mergeArray([xt.dom.select("#toggleAutoZoom").events("click").map((xt=>xt.target.checked))]).thru(Vn(Gn.toggleAutoZoom,xt.state)).map((xt=>({type:"toggleAutoZoom",state:xt,sink:"state"}))),Hr=["toPresetView"];return{initializeViewer$:Ct,toggleGrid$:_t,toggleAxes$:or,toggleAutoRotate$:lr,toggleAutoZoom$:Fr,otherViewerActions$:xt.actions.filter((xt=>Hr.includes(xt.type))).thru(Vn(((xt,Ct)=>Gn[Ct.type](xt,Ct.data)),xt.state)).map((xt=>({type:"otherActions",state:xt,sink:"state"})))}}},{"../../most-utils":825,most:770}],851:[function(xt,Ct,_t){const $t=xt("nanohtml"),{createParamControls:Vn}=xt("./parameterControls");Ct.exports=(xt,Ct,_t)=>{const{parameterValues:Gn,parameterDefinitions:or,parameterDefaults:lr}=xt.design;try{const{controls:Fr}=Vn(Object.assign({},lr,Gn),or,Ct.callback);return $t`
    <section id='params' style='visibility:${0===xt.design.parameterDefinitions.length?"hidden":"visible"};color:${xt.themes.themeSettings.secondaryTextColor}'>
      <span id='paramsTable'>
        <table>
              ${Fr}
        </table>
      </span>
      <span id='paramsControls'>
        <button id='updateDesignFromParams'>${_t`update`}</button>
        <button id='resetDesignToParameterDefaults'>${_t`reset`}</button>
        <label for='instantUpdate'>${_t`instant update`}</label>
        <input type='checkbox' checked='${xt.design.instantUpdate}' id='instantUpdate'/>
      </span>
    </section>
  `}catch(Ct){Ct.stack=void 0,xt.status.error=Ct}}},{"./parameterControls":858,nanohtml:806}],852:[function(xt,Ct,_t){const $t=xt("nanohtml"),Vn=xt("codemirror");xt("codemirror/mode/javascript/javascript"),xt("codemirror/addon/hint/javascript-hint");const Gn={mode:"javascript",indentUnit:2,smartIndent:!1,indentWithTabs:!1,lineNumbers:!0,autofocus:!0};let or,lr;Ct.exports={editorWrapper:(xt,Ct)=>{const _t=((xt,Ct)=>{if(!lr){(lr=$t`
      <section class='popup-menu' id='editor' key='editor' style='visibility:${"editor"===xt.activeTool?"visible":"hidden"}'>
      <textarea>
      </textarea>
      <p style='position:absolute;top:0rem;right:1rem;color:gray;user-select:none'>
        Press 'shift + enter' to render!
      </p>
      </section>
      `).onkeydown=xt=>xt.stopPropagation(),lr.onkeyup=xt=>xt.stopPropagation(),(or=Vn.fromTextArea(lr.firstChild,Gn)).setOption("extraKeys",{Tab:xt=>{const Ct=Array(xt.getOption("indentUnit")+1).join(" ");xt.replaceSelection(Ct)}});const Ct=document.getElementsByTagName("HEAD")[0],_t=document.createElement("LINK");_t.rel="stylesheet",_t.href="./css/codemirror.css",Ct.appendChild(_t)}return lr})(xt);if("editor"===xt.activeTool){_t.style.visibility="visible",_t.focus();let $t=xt.shortcuts.find((xt=>"reevaluate"===xt.args));$t||($t={args:"Shift-Enter"});let Vn=$t.key.toUpperCase();const Gn={Tab:xt=>{const Ct=Array(xt.getOption("indentUnit")+1).join(" ");xt.replaceSelection(Ct)}};Gn[Vn=(Vn=(Vn=(Vn=(Vn=Vn.replace(/enter/i,"Enter")).replace(/alt[+-]/i,"Alt-")).replace(/cmd[+-]/i,"Cmd-")).replace(/control[+-]/i,"Ctrl-")).replace(/shift[+-]/i,"Shift-")]=xt=>{const _t=(xt=>{const Ct=xt.getValue();return Ct&&Ct.length>0?[{ext:"js",fullPath:"/changes.js",mimetype:"javascript",name:"changes.js",source:Ct}]:null})(xt);_t&&Ct.callback({type:"read",id:"loadRemote",data:_t})},or.setOption("extraKeys",Gn),or.focus(),or.scrollIntoView({line:0,ch:0}),setTimeout((()=>or.refresh()),0)}else _t.style.visibility="hidden";if(xt.design&&xt.design.filesAndFolders&&1===xt.design.filesAndFolders.length){const Ct=xt.design.filesAndFolders[0];let _t=Ct.source?Ct.source:"";Ct.mimetype?Ct.mimetype.indexOf("javascript")<0&&(_t="// imported from external format"):_t="// imported from project",_t!==or.getValue()&&(or.focus(),or.setValue(_t),or.setCursor(0,0),or.refresh())}return _t}}},{codemirror:723,"codemirror/addon/hint/javascript-hint":722,"codemirror/mode/javascript/javascript":724,nanohtml:806}],853:[function(xt,Ct,_t){const $t=xt("nanohtml"),Vn=xt("path"),Gn=xt("../../../examples/examples.json");Ct.exports=(xt,Ct)=>{const _t=new URL(window.location.href);let or=("null"===_t.origin?"file://":_t.origin)+Vn.dirname(_t.pathname);or=or.endsWith("/")?or:or+Vn.sep;const lr=[];for(const xt in Gn){if(!Object.prototype.hasOwnProperty.call(Gn,xt))continue;const Ct=Gn[xt].map((xt=>$t`<li>
            <a class="example" title="${xt.description}" data-path="${or}${xt.filePath}" href="#"> ${xt.title} </a>
          </li>`));lr.push($t`<li>${xt}<ul class="examples-list">${Ct}</ul></li>`)}return $t`<ul class="examples-group">${lr}</ul>`}},{"../../../examples/examples.json":676,nanohtml:806,path:711}],854:[function(xt,Ct,_t){const $t=xt("nanohtml");Ct.exports=(Ct,_t)=>{const Vn=xt("./examples")(Ct,_t);return $t`
      <section id='help' class="popup-menu" style='visibility:${"help"===Ct.activeTool?"visible":"hidden"};' >
        <div>
          <h2>${_t`JSCAD V${Ct.version}`}</h2>
          <h3>${_t`Documentation`}:</h3>
          <ul>
              <li><a class="navlink external-link" href="guide.html" target="_blank">${_t`User Guide`}</a></li>
              <li><a class="navlink external-link" href="docs/" target="_blank">${_t`API Reference`}</a></li>
              <li><a class="navlink external-link" href="issues.html" target="_blank">${_t`Open Issues`}</a></li>
          </ul>
        </div>
        <div>
          <h3>${_t`Forums`}:</h3>
          <ul>
              <li><a class="navlink external-link" href="forum.html" target="_blank">${_t`User Group`}</a></li>
              <li><a class="navlink external-link" href="discord.html" target="_blank">${_t`Discord Community`}</a></li>
              <li><a class="navlink external-link" href="announcements.html" rel="publisher" target="_blank">${_t`Announcements`}</a></li>
          </ul>
        </div>
        <div>
          <h3>${_t`Examples`}:</h3>
          ${Vn}
        </div>
      </section>
    `}},{"./examples":853,nanohtml:806}],855:[function(xt,Ct,_t){const $t=xt("nanohtml");Ct.exports=(xt,Ct)=>{const _t=xt.io.availableExportFormats.map((({name:_t,displayName:Vn})=>{Vn=Ct.translate(Vn);const Gn=xt.io.exportFormat?xt.io.exportFormat.toLowerCase()===_t.toLowerCase():void 0;return $t`<option value=${_t} selected='${Gn}'>
        ${Vn}
      </option>`})),Vn=xt.io.availableExportFormats.length>0;return $t`
    <span id='io'>
        <input type="file" value="${Ct`load project`}" id="fileLoader" multiple webkitdirectory mozdirectory msdirectory odirectory directory  />
        <label for="fileLoader"> ${Ct`load project`}> </label>
  
        <label for="toggleAutoReload">${Ct`auto reload`}</label>
          <input type="checkbox" id="toggleAutoReload" checked=${xt.design.autoReload}/>
        <span id='exports' style='visibility:${Vn?"visible":"hidden"}'>
          <select id='exportFormats'>
          ${_t}
          </select>
          <input type='button' value="${Ct`export`}" id="exportBtn"/>
        </span>
      </span>
      `}},{nanohtml:806}],856:[function(xt,Ct,_t){const $t=xt("nanohtml");Ct.exports=(Ct,_t,Vn,Gn)=>{const i=xt=>xt;i.translate=xt=>xt,_t=_t||i;const or=xt("./options")(Ct,_t),lr=xt("./designParameters")(Ct,Vn,_t),Fr=xt("./status")(Ct,_t),Hr=xt("./help")(Ct,_t),xo=xt("./io")(Ct,_t),Eo=xt("./editor").editorWrapper(Ct,Gn,_t),Mo=xt("./toolbar")(Ct,_t),Oo=xt("./viewer")(Ct,_t),Ro=xt("./viewerControls")(Ct,_t);if(Ct.themes&&Ct.themes.themeSettings){const{mainTextColor:xt,secondaryTextColor:_t}=Ct.themes.themeSettings,$t=document.body;$t.style.setProperty("--main-text-color",`${xt}`),$t.style.setProperty("--secondary-text-color",`${_t}`)}return $t`
    <div id='container'>
      <div id='header'>
        <span id='jscadName'>
          <h3>JSCAD</h3>
        </span>
        <span id='designName'>
          <h3>${Ct.design.name}</h3>
        </span>
        ${xo}
      </div>
  
      ${Mo}
      ${Ro}
  
      <!-- bare bones essentials -->
      <!--Status information/errors-->
      ${Fr}
  
      <!--Viewer-->
      ${Oo}
  
      <!--Params-->
      ${lr}
      <!-- Options Popup -->
      ${or}
      <!-- Editor Popup -->
      ${"editor"===Ct.activeTool?Eo:""}
      <!-- Help Popup -->
      ${Hr}
  
    </div>
    `}},{"./designParameters":851,"./editor":852,"./help":854,"./io":855,"./options":857,"./status":860,"./toolbar":861,"./viewer":862,"./viewerControls":863,nanohtml:806}],857:[function(xt,Ct,_t){const $t=xt("nanohtml");Ct.exports=(Ct,_t)=>{const Vn=Ct.languages.available.map((xt=>{const Vn=Ct.languages.active===xt.code;return $t`<option value='${xt.code}' selected=${Vn}>${_t.translate(xt.fullName)}</option>`})),Gn=Object.entries(Ct.themes.available).map((xt=>{const _t=xt[0],Vn=xt[1].name,Gn=Ct.themes.active===_t;return $t`<option value='${_t}' selected=${Gn}>${Vn}</option>`})),or=xt("./shortcuts")(Ct,_t);return $t`
    <section class="popup-menu" id='options' style='visibility:${"options"===Ct.activeTool?"visible":"hidden"}; color:${Ct.themes.themeSettings.secondaryTextColor}'>   
  
    <fieldset>
      <legend> <h3> ${_t`Languages`} </h3> </legend>
      <select id='languageSwitcher'>
        ${Vn}  
      </select>
    </fieldset>
  
    <fieldset>
      <legend> <h3> ${_t`Themes`} </h3> </legend>
      <select id='themeSwitcher'>
        ${Gn}
      </select>
    </fieldset>
  
    <fieldset>
      <legend> <h3> ${_t`Generation`}</h3> </legend>
      <label>${_t`timeout for generation`}
        <input id='solidsTimeout' type='number' min=0 max=200000 value=${Ct.design.solidsTimeOut} />
      </label>
    </fieldset>
  
    ${or}
  
  </section>`}},{"./shortcuts":859,nanohtml:806}],858:[function(xt,Ct,_t){const $t=xt("nanohtml");let Vn,Gn,or;const createParamRowFromDefinition=(xt,Ct,_t)=>{const $t=xt.type.toLowerCase();return"group"===$t?createGroupRowFromDefinition(xt,Ct):createInputRowFromDefinition($t,xt,Ct,_t)},createGroupRowFromDefinition=(xt,Ct)=>{let _t=xt.name+":",Vn="";"caption"in xt&&(_t=xt.caption,Vn="caption"),or=xt.name in Ct?"closed"!==Ct[xt.name]:"closed"!==xt.initial,Gn=xt.name;const lr=$t`<tr class=${"groupTitle "+(or?"open":"closed")} data-groupname=${Gn} >
          <td class=${Vn} colspan="2">
              <h1>
                  <svg class="icon icon-open feather feather-chevron-down" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><polyline points="6 9 12 15 18 9"/></svg>
                  <svg class="icon icon-closed feather feather-chevron-right" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><polyline points="9 18 15 12 9 6"/></svg>
                  ${_t}
              </h1>
          </td>
        </tr>`;return lr.onclick=()=>(toggleGroupVisibility(lr),!0),lr.paramName=xt.name,lr.paramType=xt.type,lr},toggleGroupVisibility=xt=>{let Ct;xt.className.includes("open")?(xt.classList.remove("open"),xt.classList.add("closed"),Ct="none"):(xt.classList.remove("closed"),xt.classList.add("open"),Ct="");const _t=document.getElementsByClassName(xt.dataset.groupname);Array.from(_t).forEach((xt=>{xt.style.display=Ct}))},createInputRowFromDefinition=(xt,Ct,_t,lr)=>{let Fr;switch(xt){case"choice":Fr=createChoiceControl(Ct,_t[Ct.name]);break;case"radio":Fr=createRadioControl(Ct,_t[Ct.name]);break;default:Fr=createInputControl(Ct,_t[Ct.name])}let Hr=Ct.name+":",xo="";"caption"in Ct&&(Hr=Ct.caption,xo="caption");let Eo="controlsLine";Gn&&(Eo+=" "+Gn);const Mo=or?"":"display:none";Fr.forEach((xt=>{xt.onchange=()=>{lr&&lr(Vn)}}));const Oo=Fr.map((xt=>$t`<div>${xt} ${"label"in xt?xt.label:""}</div>`)),Ro=$t`<tr class=${Eo} style=${Mo} >
          <td class=${xo}> ${Hr} </td>
          <td colspan="2"> ${Oo}</td>
        </tr>`;return Ro.dataset.groupName=Gn,Ro},createChoiceControl=(xt,Ct)=>{if(!("values"in xt))throw new Error("Definition of choice parameter ("+xt.name+") should include a 'values' parameter");const _t=xt.values,Vn="captions"in xt?xt.captions:xt.values;if(Vn.length!==_t.length)throw new Error("Definition of choice parameter ("+xt.name+") should have the same number of items for 'captions' and 'values'");const Gn=Vn.map(((Vn,Gn)=>{const or=_t[Gn];let lr=!1;return void 0!==Ct?lr=Ct===or:"default"in xt?lr=xt.default===or:"initial"in xt&&(lr=xt.initial===or),$t`<option value=${or} selected=${lr}>
        ${Vn}
      </option>`})),or=$t`<select>
      ${Gn}
    </select`;return or.paramName=xt.name,or.paramType=xt.type,[or]},createRadioControl=(xt,Ct)=>{if(!("values"in xt))throw new Error("Definition of choice parameter ("+xt.name+") should include a 'values' parameter");const _t=xt.values,Vn="captions"in xt?xt.captions:xt.values;if(Vn.length!==_t.length)throw new Error("Definition of choice parameter ("+xt.name+") should have the same number of items for 'captions' and 'values'");return Vn.map(((Vn,Gn)=>{const or=_t[Gn];let lr=!1;void 0!==Ct?lr=Ct===or:"default"in xt?lr=xt.default===or:"initial"in xt&&(lr=xt.initial===or);const Fr=$t`
        <label>
          <input type='radio' value=${or} name=${xt.name} checked=${lr}/>
          ${Vn}
        </label>
      `;return Fr.children[0].paramName=xt.name,Fr.children[0].paramType=xt.type,Fr}))},createInputControl=(xt,Ct)=>{const _t=["type","name","checked","initial","default"];if(!("type"in xt))throw new Error(`Parameter definition (${xt.name}) must include a 'type' parameter`);let Vn=[{type:"text",control:"text",required:["type","name"],initial:""},{type:"int",control:"number",required:["type","name"],initial:0},{type:"float",control:"number",required:["type","name"],initial:0},{type:"number",control:"number",required:["type","name"],initial:0},{type:"checkbox",control:"checkbox",required:["type","name","checked"],initial:""},{type:"radio",control:"radio",required:["type","name","checked"],initial:""},{type:"color",control:"color",required:["type","name"],initial:"#000000"},{type:"date",control:"date",required:["type","name"],initial:""},{type:"email",control:"email",required:["type","name"],initial:""},{type:"password",control:"password",required:["type","name"],initial:""},{type:"url",control:"url",required:["type","name"],initial:""},{type:"slider",control:"range",required:["type","name","min","max"],initial:0,label:!0}].filter((Ct=>xt.type===Ct.type));if(!(Vn=Vn&&Vn.length>0?Vn[0]:void 0))throw new Error(`Parameter definition (${xt.name}), invalid type "${xt.type}"`);const Gn=Object.keys(xt);let or;Vn.required.forEach((Ct=>{if(!Gn.includes(Ct))throw new Error(`Parameter definition of type "${xt.type}" must include a "${Ct}" parameter`)})),or=void 0!==Ct?Ct:"initial"in xt?xt.initial:"default"in xt?xt.default:Vn.initial;const lr=$t`<input
      type=${Vn.control} 
      value=${or} 
      checked=${"checked"in xt?or:""} 
    />`;lr.paramName=xt.name,lr.paramType=xt.type;for(const Ct in xt)Object.prototype.hasOwnProperty.call(xt,Ct)&&_t.indexOf(Ct)<0&&lr.setAttribute(Ct,xt[Ct]);return[lr]};Ct.exports={createParamControls:(xt={},Ct,_t)=>(Vn=[],Gn="",or=!0,{controls:Ct.map((Ct=>createParamRowFromDefinition(Ct,xt,_t)))})}},{nanohtml:806}],859:[function(xt,Ct,_t){const $t=xt("nanohtml");Ct.exports=(xt,Ct)=>{const _t=xt.shortcuts.map(((xt,_t)=>{const{command:Vn,key:Gn,args:or,tmpKey:lr,error:Fr}=xt,Hr=lr&&lr.length>0?lr:Ct.translate("type and hit enter"),xo=xt.inProgress?"":Gn,Eo=or||"";return $t`
      <tr>
          <td>${Ct.translate(Vn)}: ${Ct.translate(Eo)}</td>
          <td>
            <input type='text' class='shortcutCommand ${Fr&&xt.inProgress?"error":""}'
              data-command=${Vn}
              data-args=${or}
              data-index=${_t}
              
              value='${xo}'
              placeholder='${Hr}'
            />
          </td>
          <td>${Ct`always`}</td>
        </tr>
      `}));return $t`
  <section id='shortcuts'>   
    <h3> ${Ct`Shortcuts`} </h3>
    <table>
      <thead>
        <tr>
          <th>${Ct`Command`}</th>
          <th>${Ct`Key Binding`}</th>
          <th>${Ct`When`}</th>
        </tr>
      </thead>
      <tbody>
        ${_t}
      </tbody>
    </table>
  </section>`}},{nanohtml:806}],860:[function(xt,Ct,_t){const $t=xt("nanohtml");Ct.exports=(xt,Ct)=>{const _t=xt.status;let Vn="",Gn="",or="";_t.error&&(_t.error.fileName&&!_t.error.fileName.startsWith("blob")&&(Vn=`${_t.error.fileName}:${_t.error.lineNumber}:${_t.error.columnNumber}`),Gn=`${_t.error.name}: ${_t.error.message}`,_t.error.stack&&(or=_t.error.stack.trim().split("\n").map((xt=>$t`<ul>${xt}</ul>`))));const lr=void 0!==_t.error?$t`<span>
      <div id='errormessage'>
        <p>
          ${Vn}
        </p>
        <p>
          ${Gn}
        </p>
      </div>
      <div id='stacktrace'>
        ${or}
      </div>
    </span>`:"",Fr=_t.busy;return $t`
        <span id='status'>
          ${lr}
          <span id='busy'>${Fr?"processing, please wait":""}</span>
        </span>
    `}},{nanohtml:806}],861:[function(xt,Ct,_t){const $t=xt("nanohtml");Ct.exports=(xt,Ct)=>{const _t=$t`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>`,Vn=$t`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3"><polygon points="14 2 18 6 7 17 3 17 3 13 14 2"/><line x1="3" y1="22" x2="21" y2="22"/></svg>`,Gn=$t`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-help-circle"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12" y2="17"/></svg>`;return $t`<span id='toolbar'>
          <button id='toggleOptions' aria-label='options'>
            ${_t}
          </button>
          <button id='toggleEditor' aria-label='editor'>
            ${Vn}
          </button>
          <button id='toggleHelp' aria-label='help'>
            ${Gn}
          </button>
        </span>`}},{nanohtml:806}],862:[function(xt,Ct,_t){const $t=xt("nanohtml"),Vn=xt("@jscad/regl-renderer"),{pointerGestures:Gn}=xt("../../most-gestures"),{prepareRender:or,drawCommands:lr,cameras:Fr,entitiesFromSolids:Hr}=Vn,xo=Fr.perspective,Eo=Vn.controls.orbit;let Mo,Oo,Ro=xo.defaults,Io=Eo.defaults,Bo=[0,0],zo=[0,0],Ho=0,Qo=!1,pi=!0;const gi={visuals:{drawCmd:"drawGrid",show:!0,color:[0,0,0,1],subColor:[0,0,1,.5],fadeOut:!1,transparent:!0},size:[200,200],ticks:[10,1]},es={visuals:{drawCmd:"drawAxis",show:!0}};let ts,ns=[],rs=[];const setup=xt=>{const Ct=Object.assign({},xo.defaults);Ct.position=[150,-180,233];const{gl:_t,type:$t}=((xt,Ct)=>{const t=Ct=>{try{const _t=xt.getContext(Ct);return _t?{gl:_t,type:Ct}:null}catch(xt){return null}};return t("webgl2")||t("webgl")||t("experimental-webgl")||t("webgl-experimental")})(xt),Vn={glOptions:{gl:_t},camera:Ct,drawCommands:{drawAxis:lr.drawAxis,drawGrid:lr.drawGrid,drawLines:lr.drawLines,drawMesh:lr.drawMesh},entities:[]};return"webgl"===$t&&_t.getExtension("OES_element_index_uint")&&(Vn.glOptions.optionalExtensions=["oes_element_index_uint"]),{viewerOptions:Vn,camera:Ct,error:void 0}},resize=xt=>{const Ct=window.devicePixelRatio||1,_t=xt.getBoundingClientRect(),$t=(_t.right-_t.left)*Ct,Vn=(_t.bottom-_t.top)*Ct,Gn=xt.width,or=xt.height;Gn===$t&&or===Vn||(xt.width=$t,xt.height=Vn,xo.setProjection(Ro,Ro,{width:$t,height:Vn}),xo.update(Ro,Ro))};let os=Date.now();const compareSolids=(xt,Ct)=>(xt=xt.map((xt=>(xt.id||(xt.id=++os),xt))),!!Ct&&xt.length===Ct.length&&xt.reduce(((_t,$t,Vn)=>_t&&xt[Vn].id===Ct[Vn].id),!0));Ct.exports=(xt,Ct)=>{const _t=$t`<canvas id='renderTarget'> </canvas>`;if(Mo){const Ct=xt.design.solids.filter((xt=>xt&&xt instanceof Object));if(ts){const _t=xt.themes.themeSettings.viewer.rendering.meshColor,$t=rs===_t;compareSolids(Ct,ts)&&$t||(ns=Hr({color:_t},Ct),rs=_t,Qo=xt.viewer.rendering.autoZoom)}if(ts=Ct,xt.themes&&xt.themes.themeSettings){const Ct=xt.themes.themeSettings.viewer;gi.visuals.color=Ct.grid.color,gi.visuals.subColor=Ct.grid.subColor,Oo.rendering&&(Oo.rendering.background=Ct.rendering.background,Oo.rendering.meshColor=Ct.rendering.meshColor,pi=!0)}if(Oo.entities=[xt.viewer.grid.show?gi:void 0,xt.viewer.axes.show?es:void 0,...ns].filter((xt=>void 0!==xt)),""!==xt.viewer.camera.position){const Ct=Fr.camera.toPresetView(xt.viewer.camera.position,{camera:Ro});Ro.position=Ct.position,xo.update(Ro),xt.viewer.camera.position=""}xt.viewer.rendering&&(Io.autoRotate.enabled=xt.viewer.rendering.autoRotate)}else{const xt=setup(_t);if(xt.error)return $t`<b style="color:red; background:white; position:fixed; z-index:10; top:50%">${xt.error}</b>`;Oo=xt.viewerOptions,Ro=xt.camera,Mo=or(Oo);const Ct=Gn(_t);window.addEventListener("resize",(xt=>{pi=!0})),Ct.drags.forEach((xt=>{const Ct=xt.originalEvents[0],{x:_t,y:$t}=xt.delta;!0===Ct.shiftKey||Ct.touches&&Ct.touches.length>2?(zo[0]+=_t,zo[1]+=$t):(Bo[0]-=_t,Bo[1]-=$t)})),Ct.zooms.forEach((xt=>{Ho-=xt})),Ct.taps.filter((xt=>2===xt.nb)).forEach((xt=>{Qo=!0}));const o=()=>{if(Bo[0]||Bo[1]){const xt=Eo.rotate({controls:Io,camera:Ro,speed:.002},Bo);Bo=[0,0],Io={...Io,...xt.controls},pi=!0}if(zo[0]||zo[1]){const xt=Eo.pan({controls:Io,camera:Ro,speed:1},zo);zo=[0,0],Ro.position=xt.camera.position,Ro.target=xt.camera.target,pi=!0}if(Ho){const xt=Eo.zoom({controls:Io,camera:Ro,speed:.08},Ho);Io={...Io,...xt.controls},Ho=0,pi=!0}if(Qo){Io.zoomToFit.tightness=1.5;const xt=Eo.zoomToFit({controls:Io,camera:Ro,entities:ns});Io={...Io,...xt.controls},Qo=!1,pi=!0}},a=xt=>{if(o(),pi){const xt=Eo.update({controls:Io,camera:Ro});Io={...Io,...xt.controls},pi=Io.changed,Ro.position=xt.camera.position,xo.update(Ro),resize(_t),Mo(Oo)}window.requestAnimationFrame(a)};window.requestAnimationFrame(a)}return _t}},{"../../most-gestures":817,"@jscad/regl-renderer":619,nanohtml:806}],863:[function(xt,Ct,_t){const $t=xt("nanohtml");Ct.exports=(xt,Ct)=>$t`
  <div id='controls'>
    <label for="toggleGrid">${Ct`grid`}</label>
      <input type="checkbox" id="toggleGrid" checked=${xt.viewer.grid.show} />
    <label for="toggleAxes">${Ct`axes`}</label>
      <input type="checkbox" id="toggleAxes" checked=${xt.viewer.axes.show} />
    <label for="toggleAutoRotate">${Ct`auto rotate`}</label>
      <input type="checkbox" id="toggleAutoRotate" checked=${xt.viewer.rendering.autoRotate}/>
    <label for="toggleAutoZoom">${Ct`auto zoom`}</label>
      <input type="checkbox" id="toggleAutoZoom" checked=${xt.viewer.rendering.autoZoom}/>
  </div>`},{nanohtml:806}],864:[function(xt,Ct,_t){const simpleKey=xt=>xt.key?xt.key.toLowerCase():void 0;Ct.exports={compositeKeyFromKeyEvent:xt=>{const Ct=xt.ctrlKey?"ctrl+":"",_t=xt.shiftKey?"shift+":"",$t=xt.metaKey?"command+":"";let Vn=xt.key.toLowerCase();return Ct&&"control"===Vn&&(Vn=""),_t&&"shift"===Vn&&(Vn=""),$t&&"meta"===Vn&&(Vn=""),`${Ct}${_t}${$t}${Vn}`},getKeyCombos:(xt,Ct,_t)=>{const{dropRepeats:$t,endKeys:Vn}=Object.assign({},{dropRepeats:!1,endKeys:[]},xt);_t=_t.multicast().debounce(10),$t&&(_t=_t.skipRepeatsWith(((xt,Ct)=>simpleKey(xt)===simpleKey(Ct))));const Gn=_t.throttle(1e3).delay(2e3);return _t.merge(Ct.map((xt=>"end"))).merge(Gn.map((xt=>"end"))).loop(((xt,Ct)=>{if("end"===Ct||Vn.includes(simpleKey(Ct)))return{seed:[],value:{event:xt.length>0?xt[0].event:void 0,compositeKey:xt.map((xt=>xt.compositeKey)).join("+")}};{const _t=simpleKey(Ct);xt.push({event:Ct,compositeKey:_t})}return{seed:xt}}),[]).filter((xt=>void 0!==xt)).filter((xt=>void 0!==xt.event)).multicast()},simpleKey:simpleKey,isKeyEventScopeValid:(xt,Ct)=>!(!Ct.className||"jscad"!==Ct.className||Ct.getAttribute("key")!==xt)}},{}],865:[function(xt,Ct,_t){Ct.exports=xt=>{const{enabled:Ct}=Object.assign({},{enabled:!1},xt);return{debug:(...xt)=>{Ct&&console.debug(...xt)},info:Ct?console.info.bind(window.console):()=>{},warning:(...xt)=>{Ct&&console.warn(...xt)},error:(...xt)=>{Ct&&console.error(...xt)}}}},{}],866:[function(xt,Ct,_t){Ct.exports={omit:(xt,Ct)=>Object.keys(Ct).reduce(((_t,$t)=>(xt.includes($t)||(_t[$t]=Ct[$t]),_t)),{}),keep:(xt,Ct)=>Object.keys(Ct).reduce(((_t,$t)=>(xt.includes($t)&&(_t[$t]=Ct[$t]),_t)),{}),atKey:(xt,Ct)=>xt in Ct?xt:{}}},{}],867:[function(xt,Ct,_t){const $t=xt("url");Ct.exports={fetchUriParams:(xt,Ct,_t)=>{const $t=new URL(xt);return $t.searchParams.get(Ct)?$t.searchParams.get(Ct):_t},getAllUriParams:xt=>$t.parse(xt,!0).query}},{url:721}],868:[function(xt,Ct,_t){const merge=(xt={},Ct,_t)=>(xt=Ct,Object.keys(_t).forEach(($t=>{const Vn=_t[$t],Gn="object"==typeof Vn,or="function"==typeof Vn,lr=Array.isArray(Vn);if(or)xt[$t]=_t[$t];else if(lr){const Vn=Ct[$t]||[];xt[$t]=Object.assign([],Vn,_t[$t])}else if(Gn){const _t=Ct[$t]||{};xt[$t]=merge({},_t,Vn)}else xt[$t]=_t[$t]})),xt);Ct.exports={merge:merge}},{}]},{},[815])(815)}));