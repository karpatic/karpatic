var e,t;e=this,t=function(s){"use strict";function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}function n(i){s.defaults=i}s.defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};const i={exec:()=>null};function r(s,i=""){let o="string"==typeof s?s:s.source;const a={replace:(s,i)=>{let c="string"==typeof i?i:i.source;return c=c.replace(l.caret,"$1"),o=o.replace(s,c),a},getRegex:()=>new RegExp(o,i)};return a}const l={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:s=>new RegExp(`^( {0,3}${s})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}#`),htmlBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}<(?:[a-z].*>|!--)`,"i")},o=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,a=/(?:[*+-]|\d{1,9}[.)])/,c=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,h=r(c).replace(/bull/g,a).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),p=r(c).replace(/bull/g,a).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),u=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,g=/(?!\s*\])(?:\\.|[^\[\]\\])+/,k=r(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",g).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),d=r(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,a).getRegex(),f="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",x=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,b=r("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",x).replace("tag",f).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),w=r(u).replace("hr",o).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",f).getRegex(),m={blockquote:r(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",w).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:k,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:o,html:b,lheading:h,list:d,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:w,table:i,text:/^[^\n]+/},y=r("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",o).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",f).getRegex(),$={...m,lheading:p,table:y,paragraph:r(u).replace("hr",o).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",y).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",f).getRegex()},R={...m,html:r("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",x).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:i,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:r(u).replace("hr",o).replace("heading"," *#{1,6} *[^\n]").replace("lheading",h).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},S=/^( {2,}|\\)\n(?!\s*$)/,T=/[\p{P}\p{S}]/u,z=/[\s\p{P}\p{S}]/u,A=/[^\s\p{P}\p{S}]/u,_=r(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,z).getRegex(),P=/(?!~)[\p{P}\p{S}]/u,I=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,L=r(I,"u").replace(/punct/g,T).getRegex(),B=r(I,"u").replace(/punct/g,P).getRegex(),C="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",q=r(C,"gu").replace(/notPunctSpace/g,A).replace(/punctSpace/g,z).replace(/punct/g,T).getRegex(),E=r(C,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,P).getRegex(),Z=r("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,A).replace(/punctSpace/g,z).replace(/punct/g,T).getRegex(),v=r(/\\(punct)/,"gu").replace(/punct/g,T).getRegex(),D=r(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),M=r(x).replace("(?:--\x3e|$)","--\x3e").getRegex(),O=r("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",M).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Q=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,j=r(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Q).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),N=r(/^!?\[(label)\]\[(ref)\]/).replace("label",Q).replace("ref",g).getRegex(),G=r(/^!?\[(ref)\](?:\[\])?/).replace("ref",g).getRegex(),H={_backpedal:i,anyPunctuation:v,autolink:D,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:S,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:i,emStrongLDelim:L,emStrongRDelimAst:q,emStrongRDelimUnd:Z,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:j,nolink:G,punctuation:_,reflink:N,reflinkSearch:r("reflink|nolink(?!\\()","g").replace("reflink",N).replace("nolink",G).getRegex(),tag:O,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:i},X={...H,link:r(/^!?\[(label)\]\((.*?)\)/).replace("label",Q).getRegex(),reflink:r(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Q).getRegex()},F={...H,emStrongRDelimAst:E,emStrongLDelim:B,url:r(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},U={...F,br:r(S).replace("{2,}","*").getRegex(),text:r(F.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},J={normal:m,gfm:$,pedantic:R},K={normal:H,gfm:F,breaks:U,pedantic:X},he={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},V=s=>he[s];function W(s,i){if(i){if(l.escapeTest.test(s))return s.replace(l.escapeReplace,V)}else if(l.escapeTestNoEncode.test(s))return s.replace(l.escapeReplaceNoEncode,V);return s}function Y(s){try{s=encodeURI(s).replace(l.percentDecode,"%")}catch{return null}return s}function ee(s,i){const o=s.replace(l.findPipe,((s,i,l)=>{let o=!1,a=i;for(;--a>=0&&"\\"===l[a];)o=!o;return o?"|":" |"})).split(l.splitPipe);let a=0;if(o[0].trim()||o.shift(),o.length>0&&!o.at(-1)?.trim()&&o.pop(),i)if(o.length>i)o.splice(i);else for(;o.length<i;)o.push("");for(;a<o.length;a++)o[a]=o[a].trim().replace(l.slashPipe,"|");return o}function te(s,i,l){const o=s.length;if(0===o)return"";let a=0;for(;a<o&&s.charAt(o-a-1)===i;)a++;return s.slice(0,o-a)}function ne(s,i,l,o,a){const c=i.href,h=i.title||null,p=s[1].replace(a.other.outputLinkReplace,"$1");if("!"!==s[0].charAt(0)){o.state.inLink=!0;const s={type:"link",raw:l,href:c,title:h,text:p,tokens:o.inlineTokens(p)};return o.state.inLink=!1,s}return{type:"image",raw:l,href:c,title:h,text:p}}class se{options;rules;lexer;constructor(i){this.options=i||s.defaults}space(s){const i=this.rules.block.newline.exec(s);if(i&&i[0].length>0)return{type:"space",raw:i[0]}}code(s){const i=this.rules.block.code.exec(s);if(i){const s=i[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?s:te(s,"\n")}}}fences(s){const i=this.rules.block.fences.exec(s);if(i){const s=i[0],l=function(s,i,l){const o=s.match(l.other.indentCodeCompensation);if(null===o)return i;const a=o[1];return i.split("\n").map((s=>{const i=s.match(l.other.beginningSpace);if(null===i)return s;const[o]=i;return o.length>=a.length?s.slice(a.length):s})).join("\n")}(s,i[3]||"",this.rules);return{type:"code",raw:s,lang:i[2]?i[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):i[2],text:l}}}heading(s){const i=this.rules.block.heading.exec(s);if(i){let s=i[2].trim();if(this.rules.other.endingHash.test(s)){const i=te(s,"#");this.options.pedantic?s=i.trim():i&&!this.rules.other.endingSpaceChar.test(i)||(s=i.trim())}return{type:"heading",raw:i[0],depth:i[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(s){const i=this.rules.block.hr.exec(s);if(i)return{type:"hr",raw:te(i[0],"\n")}}blockquote(s){const i=this.rules.block.blockquote.exec(s);if(i){let s=te(i[0],"\n").split("\n"),l="",o="";const a=[];for(;s.length>0;){let i=!1;const c=[];let h;for(h=0;h<s.length;h++)if(this.rules.other.blockquoteStart.test(s[h]))c.push(s[h]),i=!0;else{if(i)break;c.push(s[h])}s=s.slice(h);const p=c.join("\n"),u=p.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");l=l?`${l}\n${p}`:p,o=o?`${o}\n${u}`:u;const g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,a,!0),this.lexer.state.top=g,0===s.length)break;const k=a.at(-1);if("code"===k?.type)break;if("blockquote"===k?.type){const i=k,c=i.raw+"\n"+s.join("\n"),h=this.blockquote(c);a[a.length-1]=h,l=l.substring(0,l.length-i.raw.length)+h.raw,o=o.substring(0,o.length-i.text.length)+h.text;break}if("list"!==k?.type);else{const i=k,c=i.raw+"\n"+s.join("\n"),h=this.list(c);a[a.length-1]=h,l=l.substring(0,l.length-k.raw.length)+h.raw,o=o.substring(0,o.length-i.raw.length)+h.raw,s=c.substring(a.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:l,tokens:a,text:o}}}list(s){let i=this.rules.block.list.exec(s);if(i){let l=i[1].trim();const o=l.length>1,a={type:"list",raw:"",ordered:o,start:o?+l.slice(0,-1):"",loose:!1,items:[]};l=o?`\\d{1,9}\\${l.slice(-1)}`:`\\${l}`,this.options.pedantic&&(l=o?l:"[*+-]");const c=this.rules.other.listItemRegex(l);let h=!1;for(;s;){let l=!1,o="",p="";if(!(i=c.exec(s)))break;if(this.rules.block.hr.test(s))break;o=i[0],s=s.substring(o.length);let u=i[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(s=>" ".repeat(3*s.length))),g=s.split("\n",1)[0],k=!u.trim(),d=0;if(this.options.pedantic?(d=2,p=u.trimStart()):k?d=i[1].length+1:(d=i[2].search(this.rules.other.nonSpaceChar),d=d>4?1:d,p=u.slice(d),d+=i[1].length),k&&this.rules.other.blankLine.test(g)&&(o+=g+"\n",s=s.substring(g.length+1),l=!0),!l){const i=this.rules.other.nextBulletRegex(d),l=this.rules.other.hrRegex(d),a=this.rules.other.fencesBeginRegex(d),c=this.rules.other.headingBeginRegex(d),h=this.rules.other.htmlBeginRegex(d);for(;s;){const f=s.split("\n",1)[0];let x;if(g=f,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),x=g):x=g.replace(this.rules.other.tabCharGlobal,"    "),a.test(g))break;if(c.test(g))break;if(h.test(g))break;if(i.test(g))break;if(l.test(g))break;if(x.search(this.rules.other.nonSpaceChar)>=d||!g.trim())p+="\n"+x.slice(d);else{if(k)break;if(u.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(a.test(u))break;if(c.test(u))break;if(l.test(u))break;p+="\n"+g}k||g.trim()||(k=!0),o+=f+"\n",s=s.substring(f.length+1),u=x.slice(d)}}a.loose||(h?a.loose=!0:this.rules.other.doubleBlankLine.test(o)&&(h=!0));let f,x=null;this.options.gfm&&(x=this.rules.other.listIsTask.exec(p),x&&(f="[ ] "!==x[0],p=p.replace(this.rules.other.listReplaceTask,""))),a.items.push({type:"list_item",raw:o,task:!!x,checked:f,loose:!1,text:p,tokens:[]}),a.raw+=o}const p=a.items.at(-1);if(!p)return;p.raw=p.raw.trimEnd(),p.text=p.text.trimEnd(),a.raw=a.raw.trimEnd();for(let s=0;s<a.items.length;s++)if(this.lexer.state.top=!1,a.items[s].tokens=this.lexer.blockTokens(a.items[s].text,[]),!a.loose){const i=a.items[s].tokens.filter((s=>"space"===s.type)),l=i.length>0&&i.some((s=>this.rules.other.anyLine.test(s.raw)));a.loose=l}if(a.loose)for(let s=0;s<a.items.length;s++)a.items[s].loose=!0;return a}}html(s){const i=this.rules.block.html.exec(s);if(i)return{type:"html",block:!0,raw:i[0],pre:"pre"===i[1]||"script"===i[1]||"style"===i[1],text:i[0]}}def(s){const i=this.rules.block.def.exec(s);if(i){const s=i[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),l=i[2]?i[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=i[3]?i[3].substring(1,i[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):i[3];return{type:"def",tag:s,raw:i[0],href:l,title:o}}}table(s){const i=this.rules.block.table.exec(s);if(!i)return;if(!this.rules.other.tableDelimiter.test(i[2]))return;const l=ee(i[1]),o=i[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=i[3]?.trim()?i[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],c={type:"table",raw:i[0],header:[],align:[],rows:[]};if(l.length===o.length){for(const s of o)this.rules.other.tableAlignRight.test(s)?c.align.push("right"):this.rules.other.tableAlignCenter.test(s)?c.align.push("center"):this.rules.other.tableAlignLeft.test(s)?c.align.push("left"):c.align.push(null);for(let s=0;s<l.length;s++)c.header.push({text:l[s],tokens:this.lexer.inline(l[s]),header:!0,align:c.align[s]});for(const s of a)c.rows.push(ee(s,c.header.length).map(((s,i)=>({text:s,tokens:this.lexer.inline(s),header:!1,align:c.align[i]}))));return c}}lheading(s){const i=this.rules.block.lheading.exec(s);if(i)return{type:"heading",raw:i[0],depth:"="===i[2].charAt(0)?1:2,text:i[1],tokens:this.lexer.inline(i[1])}}paragraph(s){const i=this.rules.block.paragraph.exec(s);if(i){const s="\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1];return{type:"paragraph",raw:i[0],text:s,tokens:this.lexer.inline(s)}}}text(s){const i=this.rules.block.text.exec(s);if(i)return{type:"text",raw:i[0],text:i[0],tokens:this.lexer.inline(i[0])}}escape(s){const i=this.rules.inline.escape.exec(s);if(i)return{type:"escape",raw:i[0],text:i[1]}}tag(s){const i=this.rules.inline.tag.exec(s);if(i)return!this.lexer.state.inLink&&this.rules.other.startATag.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:i[0]}}link(s){const i=this.rules.inline.link.exec(s);if(i){const s=i[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;const i=te(s.slice(0,-1),"\\");if((s.length-i.length)%2==0)return}else{const s=function(s,i){if(-1===s.indexOf(i[1]))return-1;let l=0;for(let o=0;o<s.length;o++)if("\\"===s[o])o++;else if(s[o]===i[0])l++;else if(s[o]===i[1]&&(l--,l<0))return o;return-1}(i[2],"()");if(s>-1){const l=(0===i[0].indexOf("!")?5:4)+i[1].length+s;i[2]=i[2].substring(0,s),i[0]=i[0].substring(0,l).trim(),i[3]=""}}let l=i[2],o="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(l);s&&(l=s[1],o=s[3])}else o=i[3]?i[3].slice(1,-1):"";return l=l.trim(),this.rules.other.startAngleBracket.test(l)&&(l=this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?l.slice(1):l.slice(1,-1)),ne(i,{href:l?l.replace(this.rules.inline.anyPunctuation,"$1"):l,title:o?o.replace(this.rules.inline.anyPunctuation,"$1"):o},i[0],this.lexer,this.rules)}}reflink(s,i){let l;if((l=this.rules.inline.reflink.exec(s))||(l=this.rules.inline.nolink.exec(s))){const s=i[(l[2]||l[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!s){const s=l[0].charAt(0);return{type:"text",raw:s,text:s}}return ne(l,s,l[0],this.lexer,this.rules)}}emStrong(s,i,l=""){let o=this.rules.inline.emStrongLDelim.exec(s);if(o&&(!o[3]||!l.match(this.rules.other.unicodeAlphaNumeric))&&(!o[1]&&!o[2]||!l||this.rules.inline.punctuation.exec(l))){const l=[...o[0]].length-1;let a,c,h=l,p=0;const u="*"===o[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,i=i.slice(-1*s.length+l);null!=(o=u.exec(i));){if(a=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!a)continue;if(c=[...a].length,o[3]||o[4]){h+=c;continue}if((o[5]||o[6])&&l%3&&!((l+c)%3)){p+=c;continue}if(h-=c,h>0)continue;c=Math.min(c,c+h+p);const i=[...o[0]][0].length,u=s.slice(0,l+o.index+i+c);if(Math.min(l,c)%2){const s=u.slice(1,-1);return{type:"em",raw:u,text:s,tokens:this.lexer.inlineTokens(s)}}const g=u.slice(2,-2);return{type:"strong",raw:u,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(s){const i=this.rules.inline.code.exec(s);if(i){let s=i[2].replace(this.rules.other.newLineCharGlobal," ");const l=this.rules.other.nonSpaceChar.test(s),o=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return l&&o&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:i[0],text:s}}}br(s){const i=this.rules.inline.br.exec(s);if(i)return{type:"br",raw:i[0]}}del(s){const i=this.rules.inline.del.exec(s);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2])}}autolink(s){const i=this.rules.inline.autolink.exec(s);if(i){let s,l;return"@"===i[2]?(s=i[1],l="mailto:"+s):(s=i[1],l=s),{type:"link",raw:i[0],text:s,href:l,tokens:[{type:"text",raw:s,text:s}]}}}url(s){let i;if(i=this.rules.inline.url.exec(s)){let s,l;if("@"===i[2])s=i[0],l="mailto:"+s;else{let o;do{o=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])?.[0]??""}while(o!==i[0]);s=i[0],l="www."===i[1]?"http://"+i[0]:i[0]}return{type:"link",raw:i[0],text:s,href:l,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(s){const i=this.rules.inline.text.exec(s);if(i){const s=this.lexer.state.inRawBlock;return{type:"text",raw:i[0],text:i[0],escaped:s}}}}class re{tokens;options;state;tokenizer;inlineQueue;constructor(i){this.tokens=[],this.tokens.links=Object.create(null),this.options=i||s.defaults,this.options.tokenizer=this.options.tokenizer||new se,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const o={other:l,block:J.normal,inline:K.normal};this.options.pedantic?(o.block=J.pedantic,o.inline=K.pedantic):this.options.gfm&&(o.block=J.gfm,this.options.breaks?o.inline=K.breaks:o.inline=K.gfm),this.tokenizer.rules=o}static get rules(){return{block:J,inline:K}}static lex(s,i){return new re(i).lex(s)}static lexInline(s,i){return new re(i).inlineTokens(s)}lex(s){s=s.replace(l.carriageReturn,"\n"),this.blockTokens(s,this.tokens);for(let s=0;s<this.inlineQueue.length;s++){const i=this.inlineQueue[s];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(s,i=[],o=!1){for(this.options.pedantic&&(s=s.replace(l.tabCharGlobal,"    ").replace(l.spaceLine,""));s;){let l;if(this.options.extensions?.block?.some((o=>!!(l=o.call({lexer:this},s,i))&&(s=s.substring(l.raw.length),i.push(l),!0))))continue;if(l=this.tokenizer.space(s)){s=s.substring(l.raw.length);const o=i.at(-1);1===l.raw.length&&void 0!==o?o.raw+="\n":i.push(l);continue}if(l=this.tokenizer.code(s)){s=s.substring(l.raw.length);const o=i.at(-1);"paragraph"===o?.type||"text"===o?.type?(o.raw+="\n"+l.raw,o.text+="\n"+l.text,this.inlineQueue.at(-1).src=o.text):i.push(l);continue}if(l=this.tokenizer.fences(s)){s=s.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.heading(s)){s=s.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.hr(s)){s=s.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.blockquote(s)){s=s.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.list(s)){s=s.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.html(s)){s=s.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.def(s)){s=s.substring(l.raw.length);const o=i.at(-1);"paragraph"===o?.type||"text"===o?.type?(o.raw+="\n"+l.raw,o.text+="\n"+l.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[l.tag]||(this.tokens.links[l.tag]={href:l.href,title:l.title});continue}if(l=this.tokenizer.table(s)){s=s.substring(l.raw.length),i.push(l);continue}if(l=this.tokenizer.lheading(s)){s=s.substring(l.raw.length),i.push(l);continue}let a=s;if(this.options.extensions?.startBlock){let i=1/0;const l=s.slice(1);let o;this.options.extensions.startBlock.forEach((s=>{o=s.call({lexer:this},l),"number"==typeof o&&o>=0&&(i=Math.min(i,o))})),i<1/0&&i>=0&&(a=s.substring(0,i+1))}if(this.state.top&&(l=this.tokenizer.paragraph(a))){const c=i.at(-1);o&&"paragraph"===c?.type?(c.raw+="\n"+l.raw,c.text+="\n"+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):i.push(l),o=a.length!==s.length,s=s.substring(l.raw.length)}else if(l=this.tokenizer.text(s)){s=s.substring(l.raw.length);const o=i.at(-1);"text"===o?.type?(o.raw+="\n"+l.raw,o.text+="\n"+l.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):i.push(l)}else if(s){const i="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(i);break}throw new Error(i)}}return this.state.top=!0,i}inline(s,i=[]){return this.inlineQueue.push({src:s,tokens:i}),i}inlineTokens(s,i=[]){let l=s,o=null;if(this.tokens.links){const s=Object.keys(this.tokens.links);if(s.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)s.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,c="";for(;s;){let o;if(a||(c=""),a=!1,this.options.extensions?.inline?.some((l=>!!(o=l.call({lexer:this},s,i))&&(s=s.substring(o.raw.length),i.push(o),!0))))continue;if(o=this.tokenizer.escape(s)){s=s.substring(o.raw.length),i.push(o);continue}if(o=this.tokenizer.tag(s)){s=s.substring(o.raw.length),i.push(o);continue}if(o=this.tokenizer.link(s)){s=s.substring(o.raw.length),i.push(o);continue}if(o=this.tokenizer.reflink(s,this.tokens.links)){s=s.substring(o.raw.length);const l=i.at(-1);"text"===o.type&&"text"===l?.type?(l.raw+=o.raw,l.text+=o.text):i.push(o);continue}if(o=this.tokenizer.emStrong(s,l,c)){s=s.substring(o.raw.length),i.push(o);continue}if(o=this.tokenizer.codespan(s)){s=s.substring(o.raw.length),i.push(o);continue}if(o=this.tokenizer.br(s)){s=s.substring(o.raw.length),i.push(o);continue}if(o=this.tokenizer.del(s)){s=s.substring(o.raw.length),i.push(o);continue}if(o=this.tokenizer.autolink(s)){s=s.substring(o.raw.length),i.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(s))){s=s.substring(o.raw.length),i.push(o);continue}let h=s;if(this.options.extensions?.startInline){let i=1/0;const l=s.slice(1);let o;this.options.extensions.startInline.forEach((s=>{o=s.call({lexer:this},l),"number"==typeof o&&o>=0&&(i=Math.min(i,o))})),i<1/0&&i>=0&&(h=s.substring(0,i+1))}if(o=this.tokenizer.inlineText(h)){s=s.substring(o.raw.length),"_"!==o.raw.slice(-1)&&(c=o.raw.slice(-1)),a=!0;const l=i.at(-1);"text"===l?.type?(l.raw+=o.raw,l.text+=o.text):i.push(o)}else if(s){const i="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(i);break}throw new Error(i)}}return i}}class ie{options;parser;constructor(i){this.options=i||s.defaults}space(s){return""}code({text:s,lang:i,escaped:o}){const a=(i||"").match(l.notSpaceStart)?.[0],c=s.replace(l.endingNewline,"")+"\n";return a?'<pre><code class="language-'+W(a)+'">'+(o?c:W(c,!0))+"</code></pre>\n":"<pre><code>"+(o?c:W(c,!0))+"</code></pre>\n"}blockquote({tokens:s}){return`<blockquote>\n${this.parser.parse(s)}</blockquote>\n`}html({text:s}){return s}heading({tokens:s,depth:i}){return`<h${i}>${this.parser.parseInline(s)}</h${i}>\n`}hr(s){return"<hr>\n"}list(s){const i=s.ordered,l=s.start;let o="";for(let i=0;i<s.items.length;i++){const l=s.items[i];o+=this.listitem(l)}const a=i?"ol":"ul";return"<"+a+(i&&1!==l?' start="'+l+'"':"")+">\n"+o+"</"+a+">\n"}listitem(s){let i="";if(s.task){const l=this.checkbox({checked:!!s.checked});s.loose?"paragraph"===s.tokens[0]?.type?(s.tokens[0].text=l+" "+s.tokens[0].text,s.tokens[0].tokens&&s.tokens[0].tokens.length>0&&"text"===s.tokens[0].tokens[0].type&&(s.tokens[0].tokens[0].text=l+" "+W(s.tokens[0].tokens[0].text),s.tokens[0].tokens[0].escaped=!0)):s.tokens.unshift({type:"text",raw:l+" ",text:l+" ",escaped:!0}):i+=l+" "}return i+=this.parser.parse(s.tokens,!!s.loose),`<li>${i}</li>\n`}checkbox({checked:s}){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>\n`}table(s){let i="",l="";for(let i=0;i<s.header.length;i++)l+=this.tablecell(s.header[i]);i+=this.tablerow({text:l});let o="";for(let i=0;i<s.rows.length;i++){const a=s.rows[i];l="";for(let s=0;s<a.length;s++)l+=this.tablecell(a[s]);o+=this.tablerow({text:l})}return o&&(o=`<tbody>${o}</tbody>`),"<table>\n<thead>\n"+i+"</thead>\n"+o+"</table>\n"}tablerow({text:s}){return`<tr>\n${s}</tr>\n`}tablecell(s){const i=this.parser.parseInline(s.tokens),l=s.header?"th":"td";return(s.align?`<${l} align="${s.align}">`:`<${l}>`)+i+`</${l}>\n`}strong({tokens:s}){return`<strong>${this.parser.parseInline(s)}</strong>`}em({tokens:s}){return`<em>${this.parser.parseInline(s)}</em>`}codespan({text:s}){return`<code>${W(s,!0)}</code>`}br(s){return"<br>"}del({tokens:s}){return`<del>${this.parser.parseInline(s)}</del>`}link({href:s,title:i,tokens:l}){const o=this.parser.parseInline(l),a=Y(s);if(null===a)return o;let c='<a href="'+(s=a)+'"';return i&&(c+=' title="'+W(i)+'"'),c+=">"+o+"</a>",c}image({href:s,title:i,text:l}){const o=Y(s);if(null===o)return W(l);let a=`<img src="${s=o}" alt="${l}"`;return i&&(a+=` title="${W(i)}"`),a+=">",a}text(s){return"tokens"in s&&s.tokens?this.parser.parseInline(s.tokens):"escaped"in s&&s.escaped?s.text:W(s.text)}}class le{strong({text:s}){return s}em({text:s}){return s}codespan({text:s}){return s}del({text:s}){return s}html({text:s}){return s}text({text:s}){return s}link({text:s}){return""+s}image({text:s}){return""+s}br(){return""}}class oe{options;renderer;textRenderer;constructor(i){this.options=i||s.defaults,this.options.renderer=this.options.renderer||new ie,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new le}static parse(s,i){return new oe(i).parse(s)}static parseInline(s,i){return new oe(i).parseInline(s)}parse(s,i=!0){let l="";for(let o=0;o<s.length;o++){const a=s[o];if(this.options.extensions?.renderers?.[a.type]){const s=a,i=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==i||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){l+=i||"";continue}}const c=a;switch(c.type){case"space":l+=this.renderer.space(c);continue;case"hr":l+=this.renderer.hr(c);continue;case"heading":l+=this.renderer.heading(c);continue;case"code":l+=this.renderer.code(c);continue;case"table":l+=this.renderer.table(c);continue;case"blockquote":l+=this.renderer.blockquote(c);continue;case"list":l+=this.renderer.list(c);continue;case"html":l+=this.renderer.html(c);continue;case"paragraph":l+=this.renderer.paragraph(c);continue;case"text":{let a=c,h=this.renderer.text(a);for(;o+1<s.length&&"text"===s[o+1].type;)a=s[++o],h+="\n"+this.renderer.text(a);l+=i?this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):h;continue}default:{const s='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return l}parseInline(s,i=this.renderer){let l="";for(let o=0;o<s.length;o++){const a=s[o];if(this.options.extensions?.renderers?.[a.type]){const s=this.options.extensions.renderers[a.type].call({parser:this},a);if(!1!==s||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){l+=s||"";continue}}const c=a;switch(c.type){case"escape":case"text":l+=i.text(c);break;case"html":l+=i.html(c);break;case"link":l+=i.link(c);break;case"image":l+=i.image(c);break;case"strong":l+=i.strong(c);break;case"em":l+=i.em(c);break;case"codespan":l+=i.codespan(c);break;case"br":l+=i.br(c);break;case"del":l+=i.del(c);break;default:{const s='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return l}}class ae{options;block;constructor(i){this.options=i||s.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(s){return s}postprocess(s){return s}processAllTokens(s){return s}provideLexer(){return this.block?re.lex:re.lexInline}provideParser(){return this.block?oe.parse:oe.parseInline}}class ce{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=oe;Renderer=ie;TextRenderer=le;Lexer=re;Tokenizer=se;Hooks=ae;constructor(...s){this.use(...s)}walkTokens(s,i){let l=[];for(const o of s)switch(l=l.concat(i.call(this,o)),o.type){case"table":{const s=o;for(const o of s.header)l=l.concat(this.walkTokens(o.tokens,i));for(const o of s.rows)for(const s of o)l=l.concat(this.walkTokens(s.tokens,i));break}case"list":{const s=o;l=l.concat(this.walkTokens(s.items,i));break}default:{const s=o;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach((o=>{const a=s[o].flat(1/0);l=l.concat(this.walkTokens(a,i))})):s.tokens&&(l=l.concat(this.walkTokens(s.tokens,i)))}}return l}use(...s){const i=this.defaults.extensions||{renderers:{},childTokens:{}};return s.forEach((s=>{const l={...s};if(l.async=this.defaults.async||l.async||!1,s.extensions&&(s.extensions.forEach((s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const l=i.renderers[s.name];i.renderers[s.name]=l?function(...i){let o=s.renderer.apply(this,i);return!1===o&&(o=l.apply(this,i)),o}:s.renderer}if("tokenizer"in s){if(!s.level||"block"!==s.level&&"inline"!==s.level)throw new Error("extension level must be 'block' or 'inline'");const l=i[s.level];l?l.unshift(s.tokenizer):i[s.level]=[s.tokenizer],s.start&&("block"===s.level?i.startBlock?i.startBlock.push(s.start):i.startBlock=[s.start]:"inline"===s.level&&(i.startInline?i.startInline.push(s.start):i.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(i.childTokens[s.name]=s.childTokens)})),l.extensions=i),s.renderer){const i=this.defaults.renderer||new ie(this.defaults);for(const l in s.renderer){if(!(l in i))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;const o=l,a=s.renderer[o],c=i[o];i[o]=(...s)=>{let l=a.apply(i,s);return!1===l&&(l=c.apply(i,s)),l||""}}l.renderer=i}if(s.tokenizer){const i=this.defaults.tokenizer||new se(this.defaults);for(const l in s.tokenizer){if(!(l in i))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;const o=l,a=s.tokenizer[o],c=i[o];i[o]=(...s)=>{let l=a.apply(i,s);return!1===l&&(l=c.apply(i,s)),l}}l.tokenizer=i}if(s.hooks){const i=this.defaults.hooks||new ae;for(const l in s.hooks){if(!(l in i))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;const o=l,a=s.hooks[o],c=i[o];ae.passThroughHooks.has(l)?i[o]=s=>{if(this.defaults.async)return Promise.resolve(a.call(i,s)).then((s=>c.call(i,s)));const l=a.call(i,s);return c.call(i,l)}:i[o]=(...s)=>{let l=a.apply(i,s);return!1===l&&(l=c.apply(i,s)),l}}l.hooks=i}if(s.walkTokens){const i=this.defaults.walkTokens,o=s.walkTokens;l.walkTokens=function(s){let l=[];return l.push(o.call(this,s)),i&&(l=l.concat(i.call(this,s))),l}}this.defaults={...this.defaults,...l}})),this}setOptions(s){return this.defaults={...this.defaults,...s},this}lexer(s,i){return re.lex(s,i??this.defaults)}parser(s,i){return oe.parse(s,i??this.defaults)}parseMarkdown(s){return(i,l)=>{const o={...l},a={...this.defaults,...o},c=this.onError(!!a.silent,!!a.async);if(!0===this.defaults.async&&!1===o.async)return c(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==i)return c(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=s);const h=a.hooks?a.hooks.provideLexer():s?re.lex:re.lexInline,p=a.hooks?a.hooks.provideParser():s?oe.parse:oe.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(i):i).then((s=>h(s,a))).then((s=>a.hooks?a.hooks.processAllTokens(s):s)).then((s=>a.walkTokens?Promise.all(this.walkTokens(s,a.walkTokens)).then((()=>s)):s)).then((s=>p(s,a))).then((s=>a.hooks?a.hooks.postprocess(s):s)).catch(c);try{a.hooks&&(i=a.hooks.preprocess(i));let s=h(i,a);a.hooks&&(s=a.hooks.processAllTokens(s)),a.walkTokens&&this.walkTokens(s,a.walkTokens);let l=p(s,a);return a.hooks&&(l=a.hooks.postprocess(l)),l}catch(s){return c(s)}}}onError(s,i){return l=>{if(l.message+="\nPlease report this to https://github.com/markedjs/marked.",s){const s="<p>An error occurred:</p><pre>"+W(l.message+"",!0)+"</pre>";return i?Promise.resolve(s):s}if(i)return Promise.reject(l);throw l}}}const ue=new ce;function pe(s,i){return ue.parse(s,i)}pe.options=pe.setOptions=function(s){return ue.setOptions(s),pe.defaults=ue.defaults,n(pe.defaults),pe},pe.getDefaults=t,pe.defaults=s.defaults,pe.use=function(...s){return ue.use(...s),pe.defaults=ue.defaults,n(pe.defaults),pe},pe.walkTokens=function(s,i){return ue.walkTokens(s,i)},pe.parseInline=ue.parseInline,pe.Parser=oe,pe.parser=oe.parse,pe.Renderer=ie,pe.TextRenderer=le,pe.Lexer=re,pe.lexer=re.lex,pe.Tokenizer=se,pe.Hooks=ae,pe.parse=pe;const ge=pe.options,ke=pe.setOptions,de=pe.use,fe=pe.walkTokens,xe=pe.parseInline,be=pe,we=oe.parse,me=re.lex;s.Hooks=ae,s.Lexer=re,s.Marked=ce,s.Parser=oe,s.Renderer=ie,s.TextRenderer=le,s.Tokenizer=se,s.getDefaults=t,s.lexer=me,s.marked=pe,s.options=ge,s.parse=be,s.parseInline=xe,s.parser=we,s.setOptions=ke,s.use=de,s.walkTokens=fe},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).marked={});