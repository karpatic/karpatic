import{promises as t}from"fs";import i from"path";const a="./sitemap.txt";let e=[];async function processDirectory(a,r=""){if(!(await t.stat(a)).isDirectory())return void console.log("\n\n UNABLE TO PROCESS DIRECTORY: ",a,r);const o=await t.readdir(a);await Promise.all(o.filter((t=>t.includes("_map.json"))).map((async o=>{const s=i.join(a,o);JSON.parse(await t.readFile(s,"utf-8")).forEach((t=>{t.filename&&e.push(`http://www.charleskarpati.com/${o.split("_")[0].split(".")[0]}/${r?r+"/":""}${t.filename}`)}))}))),await Promise.all(o.filter((t=>!i.extname(t))).map((t=>processDirectory(i.join(a,t),i.join(r,t)))))}(async()=>{await processDirectory("src/client/posts");try{await t.writeFile(a,e.join("\n")+"\n"),console.log("Sitemap file created successfully:",a)}catch(t){console.error(`Error creating or truncating sitemap file: ${a}`,t)}})();