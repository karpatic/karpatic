const CACHE_NAME="cv-website-cache-"+CACHEBUST;self.addEventListener("install",(async e=>{try{console.log("CACHENAME: ",CACHE_NAME);const t=await caches.open(["/"]);await t.addAll(urlsToCache),e.waitUntil(t)}catch(e){}}));const putInCache=async(e,t)=>{const a=await caches.open(CACHE_NAME);await a.put(e,t)},deleteCache=async e=>{await caches.delete(e)},deleteOldCaches=async()=>{const e=[CACHE_NAME],t=(await caches.keys()).filter((t=>!e.includes(t)));await Promise.all(t.map(deleteCache))};self.addEventListener("activate",(e=>{e.waitUntil(deleteOldCaches())}));const cacheFirst=async({request:e,preloadResponsePromise:t})=>{const a=await caches.match(e);if(a)return a;const s=await t;if(s)return console.info("using preload response",s),putInCache(e,s.clone()),s;try{const t=await fetch(e);return putInCache(e,t.clone()),t}catch(e){return new Response("Network error happened",{status:408,headers:{"Content-Type":"text/plain"}})}};self.addEventListener("fetch",(e=>{e.respondWith(cacheFirst({request:e.request,preloadResponsePromise:e.preloadResponse}))}));