$.fn.heatmap=function(t,a){var o,n,e,l,r,i,s,c,h,u,p,d;switch(console.log("called heatmap",{scope:t,opts:a}),null==t&&(t="heatmap"),c=this.data("numrows"),s=this.data("numcols"),console.log("heatmap: ",{numRows:c,numCols:s}),null==(o=null!=a&&null!=(h=a.heatmap)?h.colorScaleGenerator:void 0)&&(o=function(t){var a,o;return o=Math.min.apply(Math,t),a=Math.max.apply(Math,t),function(t){var n;return"rgb(255,"+(n=255-Math.round(255*(t-o)/(a-o)))+","+n+")"}}),d=this,n=function(t){var a,n,e;return console.log("HEATMAPPER",{scope:t},d.find(t)),n=function(o){d.find(t).each((function(){var t=$(this).data("value");if(null!=t&&isFinite(t))if(1===o)e.push(t),console.log({pushThis:t});else if(2===o){let o=a(t),n=$(this).css("background-color",o);return console.log("forEachCell",{x:t,color:o,el:n}),n}}))},e=[],n(1),a=o(e),console.log("colorScale",{colorScale:a}),n(2)},t){case"heatmap":n(".pvtVal");break;case"rowheatmap":for(e=r=0,u=c;0<=u?r<u:r>u;e=0<=u?++r:--r)n(".pvtVal.row"+e);break;case"colheatmap":for(l=i=0,p=s;0<=p?i<p:i>p;l=0<=p?++i:--i)n(".pvtVal.col"+l)}return console.log({ret:this[0]}),this[0]},$.fn.barchart=function(t){var a,o,n,e,l,r;for(e=this.data("numrows"),this.data("numcols"),r=this,a=function(t){var a,o,n,e,l,i;return i=[],(a=function(a){return r.find(t).each((function(){var t;if(null!=(t=$(this).data("value"))&&isFinite(t))return a(t,$(this))}))})((function(t){return i.push(t)})),(o=Math.max.apply(Math,i))<0&&(o=0),e=o,(n=Math.min.apply(Math,i))<0&&(e=o-n),l=function(t){return 100*t/(1.4*e)},a((function(t,a){var o,e,r,i;return r=a.text(),i=$("<div>").css({position:"relative",height:"55px"}),e="gray",o=0,n<0&&(o=l(-n)),t<0&&(o+=l(t),e="darkred",t=-t),i.append($("<div>").css({position:"absolute",bottom:o+"%",left:0,right:0,height:l(t)+"%","background-color":e})),i.append($("<div>").text(r).css({position:"relative","padding-left":"5px","padding-right":"5px"})),a.css({padding:0,"padding-top":"5px","text-align":"center"}).html(i)}))},o=n=0,l=e;0<=l?n<l:n>l;o=0<=l?++n:--n)a(".pvtVal.row"+o);return a(".pvtTotal.colTotal"),this};