<!DOCTYPE html><html><head> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.9/dc.min.css"> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"> <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.9/dc.min.js"></script> </head><body><div id="pie"></div><div id="bar"></div><script>var data=[{book:"A",scores:45},{book:"B",scores:34},{book:"C",scores:54},{book:"D",scores:27},{book:"E",scores:70},{book:"F",scores:25},{book:"G",scores:92},{book:"H",scores:22},{book:"I",scores:40},{book:"J",scores:10},{book:"K",scores:40}],ndx=crossfilter(data),bookDimension=ndx.dimension((function(o){return o.book})),bookscoresGroup=bookDimension.group().reduceSum((function(o){return o.scores})),coreCount=ndx.dimension((function(o){return o.scores>40?"High":"Low"})),coreCountGroup=coreCount.group(),all=ndx.groupAll();dc.pieChart("#pie").width(320).height(320).radius(120).innerRadius(40).dimension(coreCount).group(coreCountGroup).label((function(o){var r=o.key;return all.value()&&(r+="("+Math.floor(o.value/all.value()*100)+"%)"),r})),dc.barChart("#bar").xAxisLabel("book_id").yAxisLabel("score").width(320).height(320).x(d3.scale.ordinal()).xUnits(dc.units.ordinal).dimension(bookDimension).group(bookscoresGroup).colors(["orange"]),dc.renderAll()</script></body></html>