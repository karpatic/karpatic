{"meta":{"filename":"07_javascript_packages","title":"Javascript Packages","summary":"Unique notes about Javascript package creation. Aggregated from a collection of sources.","template":"template_article","sitemap":"dataguide","csp":"img-src 'self' https://charleskarpati.com/ data: https://raw.githubusercontent.com/ https://static.mybinder.org/ https://mybinder.org/ https://pete88b.github.io/ https://badges.frapsoft.com/ https://img.shields.io/ http://img.shields.io/; connect-src 'self';"},"content":"<p>⚠️ This writing is a work in progress.⚠️</p>\n <div class=\"unset\">\n   <style>\n   .unset{padding:0px;}\n   .unset p a img {\n     width: auto;\n   }\n   .unset p{ margin:10px;}\n   </style> <p><a href=\"https://mybinder.org/v2/gh/bnia/dataguide/main?filepath=%2Fnotebooks%2F07_Javascript_Packages.ipynb\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://mybinder.org/badge_logo.svg\" alt=\"Binder\"></a>\n <a href=\"https://colab.research.google.com/github/bnia/dataguide/blob/main/notebooks/07_Javascript_Packages.ipynb\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://pete88b.github.io/fastpages/assets/badges/colab.svg\" alt=\"Binder\"></a>\n <a href=\"https://github.com/bnia/dataguide/tree/main/notebooks/07_Javascript_Packages.ipynb\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://pete88b.github.io/fastpages/assets/badges/github.svg\" alt=\"Binder\"></a>\n <a href=\"https://github.com/ellerbrock/open-source-badges/\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://badges.frapsoft.com/os/v3/open-source.svg?v=103\" alt=\"Open Source Love svg3\"></a></p>\n<p> <a href=\"https://github.com/bnia/dataguide/blob/main/LICENSE\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/npm/l/all-contributors.svg?style=flat\" alt=\"NPM License\"></a>\n <a href=\"https://bnia.github.io\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"http://img.shields.io/badge/Status-Active-green.svg\" alt=\"Active\"></a> \n <a href=\"\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/github/last-commit/bnia/dataguide.svg?style=flat\" alt=\"GitHub last commit\"></a>  </p>\n<p> <a href=\"https://github.com/bnia/dataguide\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/github/stars/bnia/dataguide.svg?style=social&label=Star\" alt=\"GitHub stars\"></a> \n <a href=\"https://github.com/bnia/dataguide\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/github/watchers/bnia/dataguide.svg?style=social&label=Watch\" alt=\"GitHub watchers\"></a> \n <a href=\"https://github.com/bnia/dataguide\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/github/forks/bnia/dataguide.svg?style=social&label=Fork\" alt=\"GitHub forks\"></a> \n <a href=\"https://github.com/bnia/dataguide\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/github/followers/bnia.svg?style=social&label=Follow\" alt=\"GitHub followers\"></a> </p>\n<p> <a href=\"https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataguide%20%F0%9F%A4%97\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/twitter/url/https/github.com/bnia/dataguide.svg?style=social\" alt=\"Tweet\"></a> \n <a href=\"https://twitter.com/bniajfi\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\"><img src=\"https://img.shields.io/twitter/follow/bniajfi.svg?style=social\" alt=\"Twitter Follow\"></a></p>\n </div> <blockquote>\n<p>note: There is a lot of quoting and paraphrasing on this page in particular. Be sure to check the links you want to learn more.</p>\n</blockquote>\n <h2 id=\"packages-and-modules\">Packages and <a href=\"https://docs.npmjs.com/about-packages-and-modules#about-modules\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">Modules</a></h2>\n <p>The following content was pulled from the link in the section header.</p>\n <p>NPMJS <a href=\"npmjs.com\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">website</a> is very clear on these two things:</p>\n <blockquote>\n<p>A package is a file or directory that is described by a package.json file. A package must contain a package.json file in order to be published to the npm registry.\n  A package is any of the following:</p>\n</blockquote>\n<ul>\n<li><p>a) A folder containing a program described by a package.json file.</p></li>\n<li><p>b) A gzipped tarball containing (a).</p></li>\n<li><p>c) A URL that resolves to (b).</p></li>\n<li>d) A git url that, when cloned, results in (a). <blockquote>\n<p>A module is any file or directory in the node_modules directory that can be loaded by the Node.js require() function.  </p>\n<p>To be loaded by the Node.js require() function, a module must be one of the following:</p>\n<p>A folder with a package.json file containing </p>\n</blockquote>\n</li>\n<li><p>a &quot;main&quot; field.</p></li>\n<li><p>A folder with an index.js file in it.</p></li>\n<li>A JavaScript file. <blockquote>\n<p>In the context of a Node program, the module is also the thing that was loaded from a file. For example, in the following program: - <a href=\"https://docs.npmjs.com/about-packages-and-modules#about-modules\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">npmjs.com</a></p>\n</blockquote>\n</li>\n</ul>\n <blockquote>\n<p>Note: Since modules are not required to have a package.json file, not all modules are packages. Only modules that have a package.json file are also packages.</p>\n</blockquote>\n <p>As well its good to know that:</p>\n <pre><code> &lt;!-- This will not execute, as it fails a CORS check --&gt;\n &lt;script type=&quot;module&quot; src=&quot;https://….now.sh/no-cors&quot;&gt;&lt;/script&gt;\n \n &lt;!-- This will not execute, as one of its imports fails a CORS check --&gt;\n &lt;script type=&quot;module&quot;&gt; import &#39;https://….now.sh/no-cors&#39;; &lt;/script&gt;\n \n &lt;!-- This will execute as it passes CORS checks --&gt;\n &lt;script type=&quot;module&quot; src=&quot;https://….now.sh/cors&quot;&gt;&lt;/script&gt;\n</code></pre>\n <p>and that</p>\n<p> Node modules do not add to the global scope without explicetly being pointed to. I.E. &#39;window.variable = hahaha&#39;</p>\n <h2 id=\"example-create-nodejs-modules\">Example: <a href=\"%5D(https://docs.npmjs.com/creating-node-js-modules)\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">Create</a> Node.js Modules</h2>\n <p>The following content was pulled from the link in the section header</p>\n <ol>\n<li><p>Create a package.json file</p></li>\n</ol>\n<ul>\n<li><p>create a package.json file : &#39;npm init&#39;</p></li>\n<li><p>required fields: name, version, &#39;main&#39; fields</p></li>\n<li><p>The default name is index.js.</p></li>\n</ul>\n<ol start=\"2\">\n<li><p>Create the file that will be loaded when your module is required by another application</p></li>\n</ol>\n<ul>\n<li><p>Once your package.json file is created, create the file that will be loaded when your module is required. The default name for this file is index.js.</p>\n</li>\n<li><p>In the file, add a function as a property of the exports object. This will make the function available to other code:</p>\n</li>\n</ul>\n<p> &#39;&#39;&#39;exports.printMsg = function() {\n   console.log(&quot;This is a message from the demo package&quot;);\n }&#39;&#39;&#39;</p>\n<ol start=\"3\">\n<li><p>Test your module</p></li>\n</ol>\n<ul>\n<li><p>Publish: &quot;npm publish --access public&quot;</p></li>\n<li><p>mkdir test-directory</p></li>\n<li><p>cd ../path/to/test-directory</p></li>\n<li><p>npm install <your-module-name></p></li>\n<li><p>create a test.js file which requires your module and calls your module as a method.</p></li>\n</ul>\n<p> &quot;var req = require(&#39;request&#39;)&quot;</p>\n<ul>\n<li><p>On the command line, run node test.js. The message sent to the console.log should appear.</p></li>\n</ul>\n <h2 id=\"example-publish-to-npm\">Example: <a href=\"https://zellwk.com/blog/publish-to-npm/\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">Publish</a> to NPM</h2>\n <p>The following content was pulled from the link in the section header</p>\n  mkdir how-to-publish-to-npm cd how-to-publish-to-npm /content/how-to-publish-to-npm\n !npm init  <p>Heres an <a href=\"https://philipwalton.com/articles/using-native-javascript-modules-in-production-today/\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">article</a> with more instructions and best practices.</p>\n <h2 id=\"packagejson-to-use-git-gists\">Package.json to use Git Gists</h2>\n <p>Git URLs used for npm packages can be formatted in the following ways:</p>\n<ul>\n<li><p>git://github.com/user/project.git#commit-ish</p></li>\n<li><p>git+ssh://user@hostname:project.git#commit-ish</p></li>\n<li><p>git+<a href=\"http://user@hostname/project/blah.git#commit-ish\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">http://user@hostname/project/blah.git#commit-ish</a></p></li>\n<li><p>git+<a href=\"https://user@hostname/project/blah.git#commit-ish\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">https://user@hostname/project/blah.git#commit-ish</a></p></li>\n</ul>\n<p> The commit-ish can be any tag, sha, or branch that can be supplied as an argument to git checkout. The default commit-ish is master.</p>\n <h2 id=\"python-github-gist-javascript\">Python Github Gist Javascript</h2>\n <p>Save a Github Gist using Python.  </p>\n  def readFile(filename):\n   f = open(filename, 'r')\n   content = f.read()\n   f.close()\n   return content\n \n def getFile(url, savesAs, filename):\n   responce = \"wget \"+url+\" ; mv \"+savesAs+\" \"+filename+\"; \"\n   os.system(responce)\n \n def displayCode(url, savesAs, filename):\n   getFile(url, savesAs, filename) \n   display(IPython.display.Javascript( readFile(filename) ) )\n \n def getGitGist(url, folderPath, gistName, filename):\n   responce = \"git clone {}; mv {}/{} {}; rm {} -r\".format(url, folderPath, gistName, filename, folderPath);\n   os.system(responce)\n \n def displayGitGist(url, folderPath, gistName, filename):\n   getGitGist(url, folderPath, gistName, filename)\n   display(IPython.display.Javascript( readFile(filename) ) )\n folderPath = 'c7b95a99dea7a19ceb9a366f0ef2a1ce'\n gistName = 'HelloWorldGist'\n filename = 'gitgist.js'\n displayGitGist(url, folderPath, gistName, filename) <script>document.querySelector(\"#output-area\").appendChild(document.createTextNode(\"Hello World Gist\"));</script> <h2 id=\"observablehq-modules\">ObservableHQ Modules</h2>\n <p>You can use ObservableHQ to create test and export JS Modules</p>\n <p>Here are some more notes on it:</p>\n <p><a href=\"https://observablehq.com/@observablehq/five-minute-introduction\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">Introduction</a> <a href=\"https://observablehq.com/@observablehq/introduction-to-require\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">Require</a> <a href=\"https://observablehq.com/@observablehq/downloading-and-embedding-notebooks\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">Embedding</a> <a href=\"https://observablehq.com/@observablehq/introduction-to-html\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">HTML</a></p>\n <p>And and embedding example:</p>\n  <div id=\"help\"></div>\n<br>\n<div id=\"chart\"></div>\n<link rel=\"stylesheet\" href=\"https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css\"/>\n<script type=\"module\">\n// Get your notebook; compiled as an ES module.\nimport notebook from \"https://api.observablehq.com/@karpatic/my-test-javascript-notebook.js?v=3\";\n// Load the Observable runtime and inspector to use it.\nimport {Runtime, Inspector} from \"https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js\";\nconst runtime = new Runtime();\n\n// Load the notebook, observing its cells with a default Inspector\n// that simply renders the value of each cell into the provided DOM node.\nconst main = runtime.module(notebook, Inspector.into(document.body));\n\n\n\n// If you don’t want to render the entire notebook:\n// Define a custom function to control which cells are rendered and where they go. \n// For example, to render just the cell named “chart” into the DOM element with the same id, say:\nnew runtime.module(notebook, name => { \n    document.querySelector('#help').innerHTML += `${name}, `; \n    if ( [\"text\",\"execute\"].includes(name) ) { \n        return new Inspector(document.querySelector(\"#chart\")); \n    } \n});\n\n</script> <h2 id=\"modules-in-the-browser\">Modules in the browser</h2>\n      import IPython\n def readFile(filename):\n   f = open(filename, 'r')\n   content = f.read()\n   f.close()\n   return content\n \n def getFile(url, savesAs, filename):\n   responce = \"wget \"+url+\" ; mv \"+HelloWorldGist+\" \"+filename+\"; \"\n   os.system(responce)\n \n def displayCode(url, savesAs, filename):\n   getFile(url, savesAs, filename) \n   display(IPython.display.Javascript( readFile(filename) ) )\n \n def getGitGist(url, folderPath, gistName, filename):\n   responce = \"git clone {}; mv {}/{} {}; rm {} -r\".format(url, folderPath, gistName, filename, folderPath);\n   os.system(responce)\n \n def displayGitGist(folderPath, gistName, filename):\n   url = 'https://gist.github.com/'+ folderPath +'.git'\n   getGitGist(url, folderPath, gistName, filename)\n   # return getFile(url, filename, filename)\n   display(IPython.display.Javascript( readFile(filename) ) )\n gistName = 'HelloWorldGist'\n filename = 'index.js'\n displayGitGist(folderPath, gistName, filename) <script>console.log(\"This?\")\n</script>  IPython.display.HTML(filename=\"./index.html\") <button> Click me! </button>\n <p>Safari, Chrome, Firefox and Edge all support the ES6 Modules import syntax.</p>\n  <script type=\"module\">\n  import { tag } from './html.js'\n\n  const h1 = tag('h1', ' Hello Modules!')\n  document.body.appendChild(h1)\n</script>  <script type=\"module\" src=\"app.js\"></script>\n\n<!-- app.js \nimport { tag } from './html.js'\n\nconst h1 = tag('h1', ' Hello Modules!')\ndocument.body.appendChild(h1)\n--> <p>If you want to load ES modules on a different domain, you’ll need to enable CORS.</p>\n<p> Some <a href=\"https://usefulangle.com/post/256/script-type-module-vs-script-javascript\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">more</a> on that:</p>\n <blockquote>\n<p>For information on using module, see our JavaScript modules guide. Unlike classic scripts, module scripts require the use of the CORS protocol for cross-origin fetching - <a href=\"https://javascript.info/modules-intro\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">javascript.info</a></p>\n</blockquote>\n<blockquote>\n<p>Scripts without async , defer or type=&quot;module&quot; attributes, as well as inline scripts, are fetched and executed immediately, before the browser continues to parse the page.</p>\n<p>The script should be served with the text/javascript MIME type, but browsers are lenient and only block them if the script is served with an image type (image/<em>); a video type (video/</em>); an audio (audio/*) type; or text/csv. If the script is blocked, an error is sent to the element, if not a load event is sent. - <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script\" onclick=\"window.sendPing(this)\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">script</a></p>\n</blockquote>\n  \n<!--In a normal <script> tag variables, functions etc have global scope. These are available even inside module script tags.-->\n<script>\n\tfunction myFunc() {\n\t\tconsole.log(\"Will be accessible from anywhere\");\n\t}\n</script>\n\n<script>\n\t// accessible\n\tmyFunc();\n</script>\n\n<!-- The scope of variables, functions etc in a scrpt type=\"module\" tag is limited to that block. -->\n<script type=\"module\">\n\t// accessible\n\tmyFunc();\n\t// this is available only within this block\n\tfunction myFunc2() {\n\t\tconsole.log(\"Will not be accessible from anywhere else\");\n\t}\n</script>\n\n<script>\n\t// reference error : myFunc is not defined\n\tmyFunc2();\n</script>  <!-- Module Script can Import other Javascript Modules -->\n<script type=\"module\">\n\timport {someFunc, someVar} from './js/myModule.js'\n</script>\n\n<!-- In a normal <script> tag, modules cannot be imported. import statement will throw a syntax error. -->\n<script type=\"text/javascript\">\n\t// syntax error\n\timport {someFunc, someVar} from './js/myModule.js'\n</script>  <!-- The value of this at the top-level in a module is undefined.-->\n\n<script type=\"module\">\n\t//undefined\n\tconsole.log(this);\n</script>\n\n<!-- In a regular <script> tag, value of this is the window object (at top-level). -->\n\n<script>\n\t// window\n\tconsole.log(this);\n</script>  "}