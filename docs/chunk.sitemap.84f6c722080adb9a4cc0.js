(self.webpackChunkname=self.webpackChunkname||[]).push([[763],{257:function(e,t,n){const capitalize=e=>e.replace(/\b\w/g,(e=>e.toUpperCase())),formatLink=e=>shorten(capitalize(e.trim().replaceAll(" ","_").replace(/[^a-zA-Z_]/g,""))),shorten=(e,t=12)=>e.slice(0,t)+(e.length>t+1?"...":"");window.toast=()=>{let e=document.getElementById("toast_container");e.style.animation="toast 3s",e.addEventListener("animationend",(()=>{e.style.animation="none"}),{once:!0})},window.addEventListener("refreshTemplate",(async()=>{document.querySelector('meta[name="robots"]')?.setAttribute("content",meta.robots||"index, follow");const populateTemplate=async()=>{let e=window.meta.filename,t=window.meta.sitemap,a="home/";t?a=a+t+(t==e?"":"/"+e):"index"!=e&&(a+=e),a&&(window.meta.breadcrumbs=a.split("/").map(((e,t)=>{let n=window.location.pathname.split("/").length,a=Array(n-1-t).fill("..").join("/");return a&&(a+="/"),a="./"+a,`<a href="${a}${"home"==e?"":e}">${capitalize(e.replaceAll("_"," "))}</a>`})).join(" / ")),["content","title","summary","breadcrumbs"].map((e=>(e=>{if(!meta[e])return;const t=document.getElementById(e);t.innerHTML="",t.appendChild(document.createRange().createContextualFragment(meta[e]))})(e))),function addTocToSiteMap(){window.currentPage?.removeAttribute("id");let e=document.getElementById("toc");e?.remove();const t=document.getElementById("sitemap").querySelector(`a[title="${window.meta.summary}"]`);if(t?.setAttribute("id","currentPage"),!("toc"in window.meta)||"true"!=window.meta.toc)return;let n=[...document.querySelectorAll("h2, h3, h4")].map((e=>{const t=formatLink(e.innerText||e.textContent);return`${"&emsp;".repeat(e.tagName.slice(1)-1)}<a href='#${t}'>${t.replaceAll("_"," ")}</a>`})).join("<br/>");e=document.createElement("div"),e.setAttribute("id","toc"),e.innerHTML=n,t.parentNode.insertBefore(e,t.nextSibling)}(),function addAnchorsToHeaders(){[...document.querySelectorAll("h2, h3, h4")].forEach((e=>{e.id=formatLink(e.innerText||e.textContent);let t=document.createElement("a");t.className="anchor",t.id=t.href="#"+e.id,t.setAttribute("aria-label","Link to "+e.id),t.setAttribute("onclick",`navigator.clipboard.writeText('https://charleskarpati.com${location.pathname+window.location.hash}'); window.toast?.();`),e.parentNode.insertBefore(t,e.nextSibling)}))}(),window.expand&&(window.expand.style.display=document.getElementsByTagName("aside").length>0?"block":"none"),!navEvent&&({handleRoute:window.handleRoute,navEvent:window.navEvent}=await Promise.resolve().then(n.bind(n,751))),updateRedirectListeners(),loadObserver()},e=document.getElementById("page_transition");await(async()=>{sm=window.meta.sitemap;let e=window.meta.filename==sm;if(smel=window.sitemap,smel&&(smel.style.visibility=sm?"visible":"hidden"),!sm)return;let t=`/posts/${sm}_map.json`,n=await(await fetch(t)).json();console.log("createNav: ",{url:t,sitemap:n}),window.lbl||=' \n        <label tabindex="0" for="toggle_sitemap">\n            <div id=\'drag\'>Drag me!</div>\n            <span>&#x21e8;</span> Sitemap <span>&#x2715;</span>\n        </label>\n        <hr/>';let tab=e=>e.tab||e.filename;t=t=>t.filename==sm?"."+(e?"/"+sm:"/../"+sm):`./${e?sm+"/"+t.filename:t.filename}`,n=n.map((e=>`\n        <a id="${tab(e)==window.meta.tab?"currentPage":"link_"+tab(e)}" \n            id='link_${tab(e)}' \n            href="${t(e)}" \n            title="${e.summary}">\n            ${shorten(capitalize(tab(e).replaceAll("_"," ")),20)}\n        </a>`)),smel&&(smel.className=sm,smel.innerHTML=`${lbl}<div id='sitemap-content'>${n.join("")}</div>`)})(),window.newTemplate?(populateTemplate(),document.querySelectorAll("a").forEach((e=>{e.id=e.id||formatLink(e.innerText)+Math.floor(1e6*Math.random())}))):-1==window.location.href.indexOf("#")&&e&&(e.style.animation="page_transition 1s alternate 2, gradient 1s alternate 2",e.addEventListener("animationend",(()=>{e.style.animation="none"}),{once:!0}),setTimeout((async()=>{populateTemplate()}),1100))}),{passive:!0})}}]);