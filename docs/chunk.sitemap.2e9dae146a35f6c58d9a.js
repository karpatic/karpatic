(self.webpackChunkname=self.webpackChunkname||[]).push([[763],{257:function(e,t,n){const createNav=async()=>{const e=!window.meta.hide_sitemap,t=location.pathname.split("/")[1].replace(".html","")||"index",n=window.sitemap;if(n.style.visibility=e?"visible":"hidden",e&&n&&!document.querySelector("style sitemap")){let e=await(await fetch(`${w.location.origin}/templates/${window.meta.template}_sitemap.css`)).text();document.body.insertAdjacentHTML("beforeend",`<style>${e}</style>`)}if(!e)return;window.lbl||=' \n        <label tabindex="0" for="toggle_sitemap">\n            <div id=\'drag\'>Drag me!</div>\n            <span>&#x21e8;</span> Sitemap <span>&#x2715;</span>\n        </label>\n        <hr/>';tab=e=>e.tab||e.filename;let a=`/posts/${t}_map.json`,i=(await(await fetch(a)).json()).map((e=>`\n        <a id="${tab(e)==window.meta.tab?"currentPage":"link_"+tab(e)}" \n            id='link_${tab(e)}' \n            href="${(e=>{let n=window.meta.filename==t;return(e.filename==t?"."+(n?"/"+t:"/../"+t):`./${n?t+"/"+e.filename:e.filename}`)+".html"})(e)}" \n            title="${e.summary}">\n            ${shorten(capitalize(tab(e).replaceAll("_"," ")),20)}\n        </a>`)).join("");n&&(n.className=t,n.innerHTML=`${lbl}<div id='sitemap-content'>${i}</div>`)},capitalize=e=>e.replace(/\b\w/g,(e=>e.toUpperCase())),formatLink=e=>shorten(capitalize(e.trim().replaceAll(" ","_").replace(/[^a-zA-Z_]/g,""))),shorten=(e,t=12)=>e.slice(0,t)+(e.length>t+1?"...":"");window.toast=()=>{let e=document.getElementById("toast_container");e.style.animation="toast 3s",e.addEventListener("animationend",(()=>{e.style.animation="none"}),{once:!0})},window.addEventListener("refreshTemplate",(async()=>{document.querySelector('meta[name="robots"]')?.setAttribute("content",meta.robots||"index, follow");const populateTemplate=async()=>{let e="home";"index"!=window.meta.filename&&(e+=window.location.pathname.replace(".html","")),window.meta.breadcrumbs=e.split("/").map(((e,t)=>{let n=window.location.pathname.split("/").length,a=Array(n-1-t).fill("..").join("/");return a&&(a+="/"),a="./"+a,`<a href="${a}${"home"==e?"index":e}.html">${capitalize(e.replaceAll("_"," "))}</a>`})).join(" / "),["content","title","summary","breadcrumbs"].map((e=>(e=>{if(!meta[e])return;const t=document.getElementById(e);t.innerHTML="",t.appendChild(document.createRange().createContextualFragment(meta[e]))})(e))),function addTocToSiteMap(){window.currentPage?.removeAttribute("id");let e=document.getElementById("toc");e?.remove();const t=document.getElementById("sitemap").querySelector(`a[title="${window.meta.summary}"]`);if(t?.setAttribute("id","currentPage"),!("toc"in window.meta)||"false"==window.meta.toc.toLowerCase())return;let n=[...document.querySelectorAll("h2, h3, h4")].map((e=>{const t=formatLink(e.innerText||e.textContent);return`${"&emsp;".repeat(e.tagName.slice(1)-1)}<a href='#${t}'>${t.replaceAll("_"," ")}</a>`})).join("<br/>");e=document.createElement("div"),e.setAttribute("id","toc"),e.innerHTML=n,t.parentNode.insertBefore(e,t.nextSibling)}(),function addAnchorsToHeaders(){[...document.querySelectorAll("h2, h3, h4")].forEach((e=>{e.id=formatLink(e.innerText||e.textContent);let t=document.createElement("a");t.className="anchor",t.id=t.href="#"+e.id,t.setAttribute("aria-label","Link to "+e.id),t.setAttribute("onclick",`navigator.clipboard.writeText('https://charleskarpati.com${location.pathname+window.location.hash}'); window.toast?.();`),e.parentNode.insertBefore(t,e.nextSibling)}))}(),window.expand&&(window.expand.style.display=document.getElementsByTagName("aside").length>0?"block":"none"),!navEvent&&({handleRoute:window.handleRoute,navEvent:window.navEvent}=await Promise.resolve().then(n.bind(n,751))),updateRedirectListeners(),loadObserver()},e=document.getElementById("page_transition");await createNav(),window.newTemplate?(populateTemplate(),document.querySelectorAll("a").forEach((e=>{e.id=e.id||formatLink(e.innerText)+Math.floor(1e6*Math.random())}))):-1==window.location.href.indexOf("#")&&e&&(e.style.animation="page_transition 1s alternate 2, gradient 1s alternate 2",e.addEventListener("animationend",(()=>{e.style.animation="none"}),{once:!0}),setTimeout((async()=>{populateTemplate()}),1100))}),{passive:!0})}}]);