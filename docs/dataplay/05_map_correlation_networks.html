<!DOCTYPE html><html lang="en" dir="ltr"><head id="head"><meta charset="UTF-8"><title>Correlation Networks</title><link rel="license" href="https://opensource.org/licenses/MIT"><link rel="canonical" href="https://Correlation Networks.com/dataplay/05_map_correlation_networks"><link rel="icon" type="image/ico" sizes="16x16" href="data:image/x-icon;base64,AAABAAEAEBACAAEAAQCLAAAAFgAAAIlQTkcNChoKAAAADUlIRFIAAAAQAAAAEAgGAAAAH/P/YQAAAFJJREFUOI1jZGj5/58BO2CE0v/xiTHh0Ew0oNgAFjQ+I1ZVtHQBOQagBDqpBqDHGCMlXmAkxwUYgBID/pNjAHo0/yfHBSiGUD0lYss4eMHAZyYAshIJp1L2luYAAAAASUVORK5CYII="><meta http-equiv="Content-Security-Policy" content="img-src * data:; connect-src *;"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1"><meta name="author" content="Charles Karpati"><meta name="description" content="My personal site and portfolio"><meta name="theme-color" content="#0080f0"><meta name="robots" content="index, follow"><meta property="og:url" content="http://www.Correlation Networks.com/dataplay/05_map_correlation_networks"><meta property="og:title" content="Correlation Networks"><meta property="og:description" content="This notebook was made to allow visualizing networks."><meta property="og:type" content="city"><meta property="og:site_name" content="CharlesKarpati.com"><meta property="og:locale" content="en_US"><meta property="op:markup_version" content="v1.0"><meta property="fb:article_style" content="default"><meta property="og:image" content="/images/icon300.png"><meta name="twitter:card" content="This notebook was made to allow visualizing networks."><meta name="twitter:site" content="@cvminigames"><meta name="twitter:creator" content="@cvminigames"><style>:root{--canvas:227,227,232;--background:209,209,250;--foreground:240,240,255;--near-black:0,72,72;--near-white:226,226,238;--max-width:min(800px,100vw)}*{box-sizing:border-box;font-family:Georgia,TimesNewRoman,Times,Times New Roman,serif;position:relative;-webkit-user-select:text;-moz-user-select:text;user-select:text}html{font-size:1.125em;line-height:1.625em}body{background:linear-gradient(180deg,#e3e3e8,#e3e3e8);background:linear-gradient(180deg,rgba(var(--canvas)),rgba(var(--canvas)));margin:0;overflow-x:hidden}::-moz-selection{background:#d1d1fa;background:rgb(var(--background))}::selection{background:#d1d1fa;background:rgb(var(--background))}h1,h2{text-align:center;text-shadow:none;transition:all .3s ease-in-out}h2:hover{text-shadow:1px 1px 45px #004848;text-shadow:1px 1px 45px rgb(var(--near-black));transition:all .4s ease-in-out}h1,h2,h3,h4{color:#004848;color:rgb(var(--near-black));font-weight:600}h3,h4{font-size:1.25em}a{color:#004848;color:rgb(var(--near-black))}summary:hover .anchor:after{content:"🔗";height:.8em}.anchor{left:0;position:absolute}#sitemap-content>a,.anchor{text-decoration:none}input{clip:rect(0 0 0 0);overflow:hidden;white-space:nowrap;width:1px}a:before,input{position:absolute}a:before{background-color:#d1d1fa;background-color:rgb(var(--background));content:"";height:0;left:0;transition:all .3s ease-in-out;width:100%;z-index:-1}a:hover:before{bottom:0;height:8px;height:100%}span{font-family:inherit}p{display:block;word-break:break-word}li p,p{margin-bottom:0;margin-top:0}pre{background:#d1d1fa;background:rgb(var(--background));line-height:1.2em;max-width:calc(min(800px,100vw) - 70px);max-width:calc(var(--max-width) - 70px);overflow:auto;padding:12px}blockquote{background-color:#d1d1fa;background-color:rgb(var(--background));border-left:8px solid #f0f0ff;border-left:8px solid rgb(var(--foreground));font-style:italic;margin:32px 24px;padding:12px 5px 1px;position:relative}blockquote:before{color:#f0f0ff;color:rgb(var(--foreground));content:"“";font-size:4em;left:10px;padding-top:6px;position:absolute;top:-12px}ul{padding:0}ul ul{padding-left:10px}ul>li{display:flex;list-style-type:none}ul>li:before{content:"-";margin-right:10px}.details details:nth-child(odd),details details:nth-child(2n),details:nth-child(odd){background:rgba(209,209,250,.4);background:rgba(var(--background),.4)}.details details:nth-child(2n),details details:nth-child(odd){background:rgba(227,227,232,.4);background:rgba(var(--canvas),.4)}details>summary{list-style:none;position:relative}details>summary:before{content:"⇨";display:inline-block;margin-right:8px;transition:transform .3s ease}details[open]>summary:before{transform:rotate(90deg)}details>summary>*{display:inline}summary{cursor:pointer;font-size:1.25em;padding:12px 0;text-align:center}hr{border-top:1px solid rgba(0,72,72,.1);border-top:1px solid rgba(var(--near-black),.1);margin:1px 1px 10px}</style><link rel="preconnect" href="https://cdn.rawgit.com"><link rel="preconnect" href="https://mybinder.org"><link rel="preconnect" href="http://img.shields.io"><link rel="preconnect" href="https://pete88b.github.io"><link rel="preconnect" href="https://badges.frapsoft.com"><link rel="preconnect" href="https://img.shields.io"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="preconnect" href="https://static.mybinder.org"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/prettify.css"></head><body data-template="article"><input type="checkbox" checked="checked" id="toggle_sitemap" aria-label="sitemap"><div id="sitemap" style="visibility:visible"><label tabindex="0" for="toggle_sitemap"><span>⇨</span> Sitemap <span>✕</span></label><hr><div id="sitemap-content"><a id="link_Home" href="./../index.html" title="Home">Home</a> <a id="link_00_dataplay" href="./../dataplay.html" title="00_dataplay">00 Dataplay </a><a id="link_01_download_and_load" href="./01_download_and_load.html" title="01_download_and_load">01 Download And Load </a><a id="link_02_merge_data" href="./02_merge_data.html" title="02_merge_data">02 Merge Data </a><a id="link_03_map_basics_intake_and_operations" href="./03_map_basics_intake_and_operations.html" title="03_map_basics_intake_and_operations">03 Map Basics Intake... </a><a id="link_04_nb_2_html" href="./04_nb_2_html.html" title="04_nb_2_html">04 Nb 2 Html </a><a id="currentPage" href="./05_map_correlation_networks.html" title="05_map_correlation_networks">05 Map Correlation N...</a><div id="toc"> <a href="#About_this_T..." title="About this Tutorial:" id="About_This_T563643" style="animation:.5s ease-in-out 0s 2 normal none running wiggle;text-decoration:line-through">About This T...</a><br>  <a href="#Data_Prep" title="Data Prep" id="Data_Prep754912">Data Prep</a><br> <a href="#A_Calculate_..." title="a. Calculate the correlation matrix" id="A_Calculate_241778">A Calculate ...</a><br> <a href="#B_Create_gra..." title="b. Create graph" id="B_Create_Gra273209">B Create Gra...</a><br> <a href="#C_Styling_th..." title="C. Styling the nodes based on the number of edges linked (degree)" id="C_Styling_Th218688">C Styling Th...</a></div><a id="link_06_timelapse_data_gifs" href="./06_timelapse_data_gifs.html" title="06_timelapse_data_gifs">06 Timelapse Data Gi...</a></div></div><div id="page_transition"><p>Don't Look! I'm changing!</p></div><div id="toast_container"><p>URL Copied</p></div><div id="header"><div id="header_bg_wrapper"><div id="header_bg"></div></div><h1><a href="./../index.html" id="Charles_Karp...641388">Charles Karpati</a> <span id="head_separator">| </span><a href="#title" id="title">Correlation Networks</a></h1><p id="summary">This notebook was made to allow visualizing networks.</p></div><div class="controls_container"><div id="breadcrumbs"><a href="./../index.html" id="Home666589">Home</a>/<a href="./../dataplay.html" id="Dataplay430632">Dataplay</a>/<a href="./05_map_correlation_networks.html" id="_map_correla...755408">05_map_correlation_networks</a></div><div><label for="lightmode" id="light"><input type="checkbox" id="lightmode" aria-label="lightmode"></label> <label for="expandmode" id="expand" style="display:none"><input type="checkbox" id="expandmode" aria-label="expandmode"></label><p id="audio" title="undefined" style="display:none"><span><audio controls="" controlslist="nodownload noplaybackrate" preload="none" loop="" src="undefined"></audio></span>Musical loops</p></div></div><div id="content"><p><a href="https://mybinder.org/v2/gh/bnia/dataplay/main?filepath=%2Fnotebooks%2F05_Map_Correlation_Networks.ipynb" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="556126"><img src="https://mybinder.org/badge_logo.svg" alt="Binder"></a><a href="https://colab.research.google.com/github/bnia/dataplay/blob/main/notebooks/05_Map_Correlation_Networks.ipynb" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="378642"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder"></a><a href="https://github.com/bnia/dataplay/tree/main/notebooks/05_Map_Correlation_Networks.ipynb" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="502058"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder"></a><a href="https://github.com/ellerbrock/open-source-badges/" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="46914"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3"></a></p><p><a href="https://github.com/bnia/dataplay/blob/main/LICENSE" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="126021"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License"></a><a href="https://bnia.github.io" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="169925"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active"></a><a href="https://pypi.python.org/pypi/dataplay/" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="219622"><img src="https://img.shields.io/pypi/pyversions/dataplay.svg" alt="Python Versions"></a><a href="" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="912166"><img src="https://img.shields.io/github/last-commit/bnia/dataplay.svg?style=flat" alt="GitHub last commit"></a></p><p><a href="https://github.com/bnia/dataplay" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="797715"><img src="https://img.shields.io/github/stars/bnia/dataplay.svg?style=social&amp;label=Star" alt="GitHub stars"></a><a href="https://github.com/bnia/dataplay" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="573243"><img src="https://img.shields.io/github/watchers/bnia/dataplay.svg?style=social&amp;label=Watch" alt="GitHub watchers"></a><a href="https://github.com/bnia/dataplay" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="954757"><img src="https://img.shields.io/github/forks/bnia/dataplay.svg?style=social&amp;label=Fork" alt="GitHub forks"></a><a href="https://github.com/bnia/dataplay" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="271646"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers"></a></p><p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataplay%20%F0%9F%A4%97" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="414246"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/dataplay.svg?style=social" alt="Tweet"></a><a href="https://twitter.com/bniajfi" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="251301"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow"></a></p><details open=""><summary style="animation:.5s ease-in-out 0s 2 normal none running wiggle"><h2 id="About_this_T...">About this Tutorial:</h2><a class="anchor" href="#About_this_T..." id="#About_this_T..." aria-label="Link to About_this_T..." onclick="navigator.clipboard.writeText('https://charleskarpati.com/dataplay/05_map_correlation_networks.html'); w.toast?.();"></a></summary><p>⚠️ The writing is a work in progress. The functions work but text retouching⚠️</p><p>Please read everything found on the <a href="https://bniajfi.org/dataplay/" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="Mainpage547891">mainpage</a> before continuing; disclaimer and all.</p><blockquote><p>In graph theory, a clustering coefficient is a measure of the degree to which nodes in a graph tend to cluster together. Evidence suggests that in most real-world networks, and in particular social networks, nodes tend to create tightly knit groups characterized by a relatively high density of ties; this likelihood tends to be greater than the average probability of a tie randomly established between two nodes (Holland and Leinhardt, 1971; Watts and Strogatz, 1998).</p><p>Two versions of this measure exist: the global and the local. The global version was designed to give an overall indication of the clustering in the network, whereas the local gives an indication of the embeddedness of single nodes. - <a href="https://www.geeksforgeeks.org/clustering-coefficient-graph-theory/" onclick="window.pingServer(this)" target="_blank" rel="noopener noreferrer nofollow" id="Geek_for_Gee...347945">Geek for Geeks</a></p></blockquote><pre class="prettyprint prettyprinted" style=""><span class="pln"> </span><span class="com"># this example is from the Geek for Geeks link above</span><span class="pln">
 </span><span class="kwd">def</span><span class="pln"> average_clustering</span><span class="pun">(</span><span class="pln">G</span><span class="pun">,</span><span class="pln"> trials</span><span class="pun">=</span><span class="lit">1000</span><span class="pun">):</span><span class="pln"> 
     </span><span class="str">"""Estimates the average clustering coefficient of G. 
   
     The local clustering of each node in `G` is the  
     fraction of triangles that actually exist over  
     all possible triangles in its neighborhood. 
     The average clustering coefficient of a graph  
     `G` is the mean of local clusterings. 
   
     This function finds an approximate average  
     clustering coefficient for G by repeating `n`  
     times (defined in `trials`) the following 
     experiment: choose a node at random, choose  
     two of its neighbors at random, and check if 
     they are connected. The approximate coefficient  
     is the fraction of triangles found over the  
     number of trials [1]_. 
   
     Parameters 
     ---------- 
     G : NetworkX graph 
   
     trials : integer 
         Number of trials to perform (default 1000). 
   
     Returns 
     ------- 
     c : float 
         Approximated average clustering coefficient. 
   
      
   
     """</span><span class="pln">
     n </span><span class="pun">=</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">G</span><span class="pun">)</span><span class="pln"> 
     triangles </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
     nodes </span><span class="pun">=</span><span class="pln"> G</span><span class="pun">.</span><span class="pln">nodes</span><span class="pun">()</span><span class="pln"> 
     </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">int</span><span class="pun">(</span><span class="pln">random</span><span class="pun">.</span><span class="pln">random</span><span class="pun">()</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> n</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">trials</span><span class="pun">)]:</span><span class="pln"> 
         nbrs </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">G</span><span class="pun">[</span><span class="pln">nodes</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]])</span><span class="pln"> 
         </span><span class="kwd">if</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">nbrs</span><span class="pun">)</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">:</span><span class="pln"> 
             </span><span class="kwd">continue</span><span class="pln">
         u</span><span class="pun">,</span><span class="pln"> v </span><span class="pun">=</span><span class="pln"> random</span><span class="pun">.</span><span class="pln">sample</span><span class="pun">(</span><span class="pln">nbrs</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> 
         </span><span class="kwd">if</span><span class="pln"> u </span><span class="kwd">in</span><span class="pln"> G</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]:</span><span class="pln"> 
             triangles </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
     </span><span class="kwd">return</span><span class="pln"> triangles </span><span class="pun">/</span><span class="pln"> </span><span class="kwd">float</span><span class="pun">(</span><span class="pln">trials</span><span class="pun">)</span><span class="pln"> </span></pre><pre class="prettyprint prettyprinted" style=""><span class="pln">cc</span><span class="pun">=</span><span class="pln">nx</span><span class="pun">.</span><span class="pln">average_clustering</span><span class="pun">(</span><span class="pln">G</span><span class="pun">)</span><span class="pln"> </span></pre><pre class="prettyprint prettyprinted" style=""><span class="pln">c  
 nx</span><span class="pun">.</span><span class="pln">draw</span><span class="pun">(</span><span class="pln">G</span><span class="pun">)</span></pre><details><summary style=""><h3 id="Data_Prep">Data Prep</h3><a class="anchor" href="#Data_Prep" id="#Data_Prep" aria-label="Link to Data_Prep" onclick="navigator.clipboard.writeText('https://charleskarpati.com/dataplay/05_map_correlation_networks.html'); w.toast?.();"></a></summary><pre class="prettyprint prettyprinted" style=""><span class="pln">rdf </span><span class="pun">=</span><span class="pln"> u</span><span class="pun">.</span><span class="pln">getData</span><span class="pun">(</span><span class="str">'https://services1.arcgis.com/mVFRs7NF4iFitgbY/ArcGIS/rest/services/Biz1_/FeatureServer/0/query?where=1%3D1&amp;outFields=*&amp;returnGeometry=true&amp;f=pgeojson'</span><span class="pun">)</span><span class="pln">
 </span><span class="com"># rdf.set_index('CSA2010', drop=True, inplace=True)</span><span class="pln">
 rdf</span><span class="pun">.</span><span class="pln">drop</span><span class="pun">(</span><span class="pln">labels</span><span class="pun">=[</span><span class="str">'OBJECTID_1'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Shape__Area'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Shape__Length'</span><span class="pun">],</span><span class="pln"> axis</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> inplace</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">)</span><span class="pln">
 
 vs10to19Ind </span><span class="pun">=</span><span class="pln"> rdf</span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln">regex</span><span class="pun">=</span><span class="str">'biz1|CSA2010'</span><span class="pun">,</span><span class="pln"> axis</span><span class="pun">=</span><span class="lit">1</span><span class="pun">)</span></pre><p>Get only the columns we want to work with</p><p>What we want is 1 record for every year and every CSA as a column. To do this, transpose the dataset. Set the CSA labels (first row) as our columns, relabel the index (for clarity) and cast our datatypes.</p><pre class="prettyprint prettyprinted" style=""><span class="pln">vs10to19Indt</span><span class="pun">.</span><span class="pln">columns </span><span class="pun">=</span><span class="pln"> vs10to19Indt</span><span class="pun">.</span><span class="pln">iloc</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">
 vs10to19Indt </span><span class="pun">=</span><span class="pln"> vs10to19Indt</span><span class="pun">[</span><span class="lit">1</span><span class="pun">:]</span><span class="pln">
 vs10to19Indt</span><span class="pun">.</span><span class="pln">index</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'variable'</span><span class="pln">
 vs10to19Indt </span><span class="pun">=</span><span class="pln"> vs10to19Indt</span><span class="pun">.</span><span class="pln">astype</span><span class="pun">(</span><span class="str">'float64'</span><span class="pun">)</span></pre></details><details><summary style=""><h2 id="A_Calculate_...">a. Calculate the correlation matrix</h2><a class="anchor" href="#A_Calculate_..." id="#A_Calculate_..." aria-label="Link to A_Calculate_..." onclick="navigator.clipboard.writeText('https://charleskarpati.com/dataplay/05_map_correlation_networks.html'); w.toast?.();"></a></summary><p><em>cor_matrix</em> contains the full correlation matrix. The table below shows a snapshot of the first 5 rows.</p><pre class="prettyprint prettyprinted" style=""><span class="pln">cor_matrix </span><span class="pun">=</span><span class="pln"> vs10to19Indt</span><span class="pun">.</span><span class="pln">iloc</span><span class="pun">[:,:].</span><span class="pln">corr</span><span class="pun">()</span><span class="pln">
 </span><span class="com">#shows the first 5 rows</span><span class="pln">
 cor_matrix</span><span class="pun">.</span><span class="pln">head</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></pre><pre class="prettyprint prettyprinted" style=""><span class="kwd">import</span><span class="pln"> matplotlib</span><span class="pun">.</span><span class="pln">pyplot </span><span class="kwd">as</span><span class="pln"> plt
 f </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">figure</span><span class="pun">(</span><span class="pln">figsize</span><span class="pun">=(</span><span class="lit">19</span><span class="pun">,</span><span class="pln"> </span><span class="lit">15</span><span class="pun">))</span><span class="pln">
 plt</span><span class="pun">.</span><span class="pln">matshow</span><span class="pun">(</span><span class="pln">df</span><span class="pun">.</span><span class="pln">corr</span><span class="pun">(),</span><span class="pln"> fignum</span><span class="pun">=</span><span class="pln">f</span><span class="pun">.</span><span class="pln">number</span><span class="pun">)</span><span class="pln">
 irange </span><span class="pun">=</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">df</span><span class="pun">.</span><span class="pln">select_dtypes</span><span class="pun">([</span><span class="str">'number'</span><span class="pun">]).</span><span class="pln">shape</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln">
 labels </span><span class="pun">=</span><span class="pln"> df</span><span class="pun">.</span><span class="pln">select_dtypes</span><span class="pun">([</span><span class="str">'number'</span><span class="pun">]).</span><span class="pln">columns
 </span><span class="com"># plt.xticks(irange, labels, fontsize=14, rotation=45)</span><span class="pln">
 plt</span><span class="pun">.</span><span class="pln">yticks</span><span class="pun">(</span><span class="pln">irange</span><span class="pun">,</span><span class="pln"> labels</span><span class="pun">,</span><span class="pln"> fontsize</span><span class="pun">=</span><span class="lit">14</span><span class="pun">)</span><span class="pln">
 cb </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">colorbar</span><span class="pun">()</span><span class="pln">
 cb</span><span class="pun">.</span><span class="pln">ax</span><span class="pun">.</span><span class="pln">tick_params</span><span class="pun">(</span><span class="pln">labelsize</span><span class="pun">=</span><span class="lit">14</span><span class="pun">)</span><span class="pln">
 plt</span><span class="pun">.</span><span class="pln">title</span><span class="pun">(</span><span class="str">'Correlation Matrix'</span><span class="pun">,</span><span class="pln"> fontsize</span><span class="pun">=</span><span class="lit">16</span><span class="pun">);</span></pre><pre class="prettyprint prettyprinted" style=""><span class="pln">lblVals </span><span class="pun">=</span><span class="pln"> cor_matrix</span><span class="pun">.</span><span class="pln">index</span><span class="pun">.</span><span class="pln">values</span></pre><pre class="prettyprint prettyprinted" style=""><span class="pln">cor_matrix </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">asmatrix</span><span class="pun">(</span><span class="pln">cor_matrix</span><span class="pun">)</span></pre></details><details><summary style=""><h2 id="B_Create_gra...">b. Create graph</h2><a class="anchor" href="#B_Create_gra..." id="#B_Create_gra..." aria-label="Link to B_Create_gra..." onclick="navigator.clipboard.writeText('https://charleskarpati.com/dataplay/05_map_correlation_networks.html'); w.toast?.();"></a></summary><pre class="prettyprint prettyprinted" style=""><span class="pln">G </span><span class="pun">=</span><span class="pln"> nx</span><span class="pun">.</span><span class="pln">from_numpy_matrix</span><span class="pun">(</span><span class="pln">cor_matrix</span><span class="pun">)</span><span class="pln">
 
 </span><span class="com">#relabels the nodes to match the  stocks names</span><span class="pln">
 G </span><span class="pun">=</span><span class="pln"> nx</span><span class="pun">.</span><span class="pln">relabel_nodes</span><span class="pun">(</span><span class="pln">G</span><span class="pun">,</span><span class="kwd">lambda</span><span class="pln"> x</span><span class="pun">:</span><span class="pln"> lblVals</span><span class="pun">[</span><span class="pln">x</span><span class="pun">])</span><span class="pln">
 
 </span><span class="com">#Shows the first 5 edges with their corresponding edges</span><span class="pln">
 </span><span class="com"># OLD: G.edges(data=True)[:5]</span><span class="pln">
 list</span><span class="pun">(</span><span class="pln">G</span><span class="pun">.</span><span class="pln">edges</span><span class="pun">(</span><span class="pln">data</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">))[</span><span class="lit">0</span><span class="pun">:</span><span class="lit">5</span><span class="pun">]</span></pre></details><details><summary style=""><h2 id="C_Styling_th...">C. Styling the nodes based on the number of edges linked (degree)</h2><a class="anchor" href="#C_Styling_th..." id="#C_Styling_th..." aria-label="Link to C_Styling_th..." onclick="navigator.clipboard.writeText('https://charleskarpati.com/dataplay/05_map_correlation_networks.html'); w.toast?.();"></a></summary><pre class="prettyprint prettyprinted" style=""><span class="com">#function to create and display networks from the correlatin matrix. </span><span class="pln">
 
 </span><span class="kwd">def</span><span class="pln"> create_corr_network_5</span><span class="pun">(</span><span class="pln">G</span><span class="pun">,</span><span class="pln"> corr_direction</span><span class="pun">,</span><span class="pln"> min_correlation</span><span class="pun">):</span><span class="pln">
     </span><span class="com">##Creates a copy of the graph</span><span class="pln">
     H </span><span class="pun">=</span><span class="pln"> G</span><span class="pun">.</span><span class="pln">copy</span><span class="pun">()</span><span class="pln">
     
     </span><span class="com">##Checks all the edges and removes some based on corr_direction</span><span class="pln">
     </span><span class="kwd">for</span><span class="pln"> stock1</span><span class="pun">,</span><span class="pln"> stock2</span><span class="pun">,</span><span class="pln"> weight </span><span class="kwd">in</span><span class="pln"> G</span><span class="pun">.</span><span class="pln">edges</span><span class="pun">(</span><span class="pln">data</span><span class="pun">=</span><span class="kwd">True</span><span class="pun">):</span><span class="pln">
         </span><span class="com">##if we only want to see the positive correlations we then delete the edges with weight smaller than 0        </span><span class="pln">
         </span><span class="kwd">if</span><span class="pln"> corr_direction </span><span class="pun">==</span><span class="pln"> </span><span class="str">"positive"</span><span class="pun">:</span><span class="pln">
             </span><span class="com">####it adds a minimum value for correlation. </span><span class="pln">
             </span><span class="com">####If correlation weaker than the min, then it deletes the edge</span><span class="pln">
             </span><span class="kwd">if</span><span class="pln"> weight</span><span class="pun">[</span><span class="str">"weight"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> weight</span><span class="pun">[</span><span class="str">"weight"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> min_correlation</span><span class="pun">:</span><span class="pln">
                 H</span><span class="pun">.</span><span class="pln">remove_edge</span><span class="pun">(</span><span class="pln">stock1</span><span class="pun">,</span><span class="pln"> stock2</span><span class="pun">)</span><span class="pln">
         </span><span class="com">##this part runs if the corr_direction is negative and removes edges with weights equal or largen than 0</span><span class="pln">
         </span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
             </span><span class="com">####it adds a minimum value for correlation. </span><span class="pln">
             </span><span class="com">####If correlation weaker than the min, then it deletes the edge</span><span class="pln">
             </span><span class="kwd">if</span><span class="pln"> weight</span><span class="pun">[</span><span class="str">"weight"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> weight</span><span class="pun">[</span><span class="str">"weight"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> min_correlation</span><span class="pun">:</span><span class="pln">
                 H</span><span class="pun">.</span><span class="pln">remove_edge</span><span class="pun">(</span><span class="pln">stock1</span><span class="pun">,</span><span class="pln"> stock2</span><span class="pun">)</span><span class="pln">
                 
     
     </span><span class="com">#crates a list for edges and for the weights</span><span class="pln">
     edges</span><span class="pun">,</span><span class="pln">weights </span><span class="pun">=</span><span class="pln"> zip</span><span class="pun">(*</span><span class="pln">nx</span><span class="pun">.</span><span class="pln">get_edge_attributes</span><span class="pun">(</span><span class="pln">H</span><span class="pun">,</span><span class="str">'weight'</span><span class="pun">).</span><span class="pln">items</span><span class="pun">())</span><span class="pln">
     
     </span><span class="com">### increases the value of weights, so that they are more visible in the graph</span><span class="pln">
     weights </span><span class="pun">=</span><span class="pln"> tuple</span><span class="pun">([(</span><span class="lit">1</span><span class="pun">+</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">x</span><span class="pun">))**</span><span class="lit">2</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> x </span><span class="kwd">in</span><span class="pln"> weights</span><span class="pun">])</span><span class="pln">
     
     </span><span class="com">#####calculates the degree of each node</span><span class="pln">
     d </span><span class="pun">=</span><span class="pln"> nx</span><span class="pun">.</span><span class="pln">degree</span><span class="pun">(</span><span class="pln">H</span><span class="pun">)</span><span class="pln">
     </span><span class="com">#####creates list of nodes and a list their degrees that will be used later for their sizes</span><span class="pln">
     nodelist</span><span class="pun">,</span><span class="pln"> node_sizes </span><span class="pun">=</span><span class="pln"> zip</span><span class="pun">(*</span><span class="pln">d</span><span class="pun">)</span><span class="pln">
 
     </span><span class="com">#positions</span><span class="pln">
     positions</span><span class="pun">=</span><span class="pln">nx</span><span class="pun">.</span><span class="pln">circular_layout</span><span class="pun">(</span><span class="pln">H</span><span class="pun">)</span><span class="pln">
     
     </span><span class="com">#Figure size</span><span class="pln">
     plt</span><span class="pun">.</span><span class="pln">figure</span><span class="pun">(</span><span class="pln">figsize</span><span class="pun">=(</span><span class="lit">15</span><span class="pun">,</span><span class="lit">15</span><span class="pun">))</span><span class="pln">
 
     </span><span class="com">#draws nodes</span><span class="pln">
     nx</span><span class="pun">.</span><span class="pln">draw_networkx_nodes</span><span class="pun">(</span><span class="pln">H</span><span class="pun">,</span><span class="pln">positions</span><span class="pun">,</span><span class="pln">node_color</span><span class="pun">=</span><span class="str">'#DA70D6'</span><span class="pun">,</span><span class="pln">nodelist</span><span class="pun">=</span><span class="pln">nodelist</span><span class="pun">,</span><span class="pln">
                            </span><span class="com">#####the node size will be now based on its degree</span><span class="pln">
                            node_size</span><span class="pun">=</span><span class="pln">tuple</span><span class="pun">([</span><span class="pln">x</span><span class="pun">**</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> x </span><span class="kwd">in</span><span class="pln"> node_sizes</span><span class="pun">]),</span><span class="pln">alpha</span><span class="pun">=</span><span class="lit">0.8</span><span class="pun">)</span><span class="pln">
     
     </span><span class="com">#Styling for labels</span><span class="pln">
     nx</span><span class="pun">.</span><span class="pln">draw_networkx_labels</span><span class="pun">(</span><span class="pln">H</span><span class="pun">,</span><span class="pln"> positions</span><span class="pun">,</span><span class="pln"> font_size</span><span class="pun">=</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> 
                             font_family</span><span class="pun">=</span><span class="str">'sans-serif'</span><span class="pun">)</span><span class="pln">
     
     </span><span class="com">###edge colors based on weight direction</span><span class="pln">
     </span><span class="kwd">if</span><span class="pln"> corr_direction </span><span class="pun">==</span><span class="pln"> </span><span class="str">"positive"</span><span class="pun">:</span><span class="pln">
         edge_colour </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">cm</span><span class="pun">.</span><span class="typ">GnBu</span><span class="pln"> 
     </span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
         edge_colour </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">cm</span><span class="pun">.</span><span class="typ">PuRd</span><span class="pln">
         
     </span><span class="com">#draws the edges</span><span class="pln">
     nx</span><span class="pun">.</span><span class="pln">draw_networkx_edges</span><span class="pun">(</span><span class="pln">H</span><span class="pun">,</span><span class="pln"> positions</span><span class="pun">,</span><span class="pln"> edges</span><span class="pun">,</span><span class="pln">style</span><span class="pun">=</span><span class="str">'solid'</span><span class="pun">,</span><span class="pln">
                           </span><span class="com">###adds width=weights and edge_color = weights </span><span class="pln">
                           </span><span class="com">###so that edges are based on the weight parameter </span><span class="pln">
                           </span><span class="com">###edge_cmap is for the color scale based on the weight</span><span class="pln">
                           </span><span class="com">### edge_vmin and edge_vmax assign the min and max weights for the width</span><span class="pln">
                           width</span><span class="pun">=</span><span class="pln">weights</span><span class="pun">,</span><span class="pln"> edge_color </span><span class="pun">=</span><span class="pln"> weights</span><span class="pun">,</span><span class="pln"> edge_cmap </span><span class="pun">=</span><span class="pln"> edge_colour</span><span class="pun">,</span><span class="pln">
                           edge_vmin </span><span class="pun">=</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">weights</span><span class="pun">),</span><span class="pln"> edge_vmax</span><span class="pun">=</span><span class="pln">max</span><span class="pun">(</span><span class="pln">weights</span><span class="pun">))</span><span class="pln">
 
     </span><span class="com"># displays the graph without axis</span><span class="pln">
     plt</span><span class="pun">.</span><span class="pln">axis</span><span class="pun">(</span><span class="str">'off'</span><span class="pun">)</span><span class="pln">
     </span><span class="com">#saves image</span><span class="pln">
     plt</span><span class="pun">.</span><span class="pln">savefig</span><span class="pun">(</span><span class="str">"part5"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> corr_direction </span><span class="pun">+</span><span class="pln"> </span><span class="str">".png"</span><span class="pun">,</span><span class="pln"> format</span><span class="pun">=</span><span class="str">"PNG"</span><span class="pun">)</span><span class="pln">
     plt</span><span class="pun">.</span><span class="pln">show</span><span class="pun">()</span><span class="pln"> </span></pre><p>We want to create a linear regression for each CSA using {X: year, Y: value} for a given indicator</p><pre class="prettyprint prettyprinted" style=""><span class="kwd">import</span><span class="pln"> matplotlib</span><span class="pun">.</span><span class="pln">pyplot </span><span class="kwd">as</span><span class="pln"> plt
 </span><span class="kwd">import</span><span class="pln"> pandas </span><span class="kwd">as</span><span class="pln"> pd
 </span><span class="kwd">from</span><span class="pln"> sklearn</span><span class="pun">.</span><span class="pln">linear_model </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">LinearRegression</span><span class="pln">
 
 </span><span class="com"># Create 3 columns: CSA2010	variable value</span><span class="pln">
 wdf </span><span class="pun">=</span><span class="pln"> vs10to19Ind</span><span class="pun">.</span><span class="pln">melt</span><span class="pun">(</span><span class="pln">id_vars</span><span class="pun">=</span><span class="str">'CSA2010'</span><span class="pun">,</span><span class="pln"> value_vars</span><span class="pun">=</span><span class="pln">vs10to19Ind</span><span class="pun">.</span><span class="pln">columns</span><span class="pun">[</span><span class="lit">1</span><span class="pun">:])</span><span class="pln">
 
 </span><span class="com"># Convert indicator labels into our X (Year) column </span><span class="pln">
 wdf</span><span class="pun">[</span><span class="str">'variable'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> wdf</span><span class="pun">[</span><span class="str">'variable'</span><span class="pun">].</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">lambda</span><span class="pln"> x</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">'biz1_'</span><span class="pun">,</span><span class="str">''</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
 
 findf </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="str">'CSA'</span><span class="pun">:[],</span><span class="pln"> </span><span class="str">'B'</span><span class="pun">:[],</span><span class="pln"> </span><span class="str">'M'</span><span class="pun">:[]</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
 </span><span class="com"># For each CSA </span><span class="pln">
 </span><span class="kwd">for</span><span class="pln"> csa </span><span class="kwd">in</span><span class="pln"> wdf</span><span class="pun">.</span><span class="pln">CSA2010</span><span class="pun">.</span><span class="pln">unique</span><span class="pun">():</span><span class="pln">
   </span><span class="typ">CsaData</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> wdf</span><span class="pun">[</span><span class="pln"> wdf</span><span class="pun">[</span><span class="str">'CSA2010'</span><span class="pun">]==</span><span class="pln">csa</span><span class="pun">]</span><span class="pln">
   X </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CsaData</span><span class="pun">[[</span><span class="str">'variable'</span><span class="pun">]]</span><span class="pln"> </span><span class="com">#.values # returns: [10 11 12 13 14 15 16 17 18 19]</span><span class="pln">
   y </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CsaData</span><span class="pun">[[</span><span class="str">'value'</span><span class="pun">]]</span><span class="pln"> </span><span class="com">#.values</span><span class="pln">
   regressor </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LinearRegression</span><span class="pun">()</span><span class="pln">
   regressor</span><span class="pun">.</span><span class="pln">fit</span><span class="pun">(</span><span class="pln">X</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">)</span><span class="pln">
   y_pred </span><span class="pun">=</span><span class="pln"> regressor</span><span class="pun">.</span><span class="pln">predict</span><span class="pun">(</span><span class="pln">X</span><span class="pun">)</span><span class="pln">
   plt</span><span class="pun">.</span><span class="pln">scatter</span><span class="pun">(</span><span class="pln">X</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> color </span><span class="pun">=</span><span class="pln"> </span><span class="str">'red'</span><span class="pun">)</span><span class="pln">
   plt</span><span class="pun">.</span><span class="pln">plot</span><span class="pun">(</span><span class="pln">X</span><span class="pun">,</span><span class="pln"> regressor</span><span class="pun">.</span><span class="pln">predict</span><span class="pun">(</span><span class="pln">X</span><span class="pun">),</span><span class="pln"> color </span><span class="pun">=</span><span class="pln"> </span><span class="str">'blue'</span><span class="pun">)</span><span class="pln">
   plt</span><span class="pun">.</span><span class="pln">title</span><span class="pun">(</span><span class="str">'biz1: '</span><span class="pun">+</span><span class="pln"> csa</span><span class="pun">)</span><span class="pln">
   plt</span><span class="pun">.</span><span class="pln">xlabel</span><span class="pun">(</span><span class="str">'YEAR'</span><span class="pun">)</span><span class="pln">
   plt</span><span class="pun">.</span><span class="pln">ylabel</span><span class="pun">(</span><span class="str">'VALUE'</span><span class="pun">)</span><span class="pln">
   display</span><span class="pun">(</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">show</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
   display</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">print</span><span class="pun">(</span><span class="str">'B: '</span><span class="pun">,</span><span class="pln"> regressor</span><span class="pun">.</span><span class="pln">coef_</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Y: '</span><span class="pun">,</span><span class="pln"> regressor</span><span class="pun">.</span><span class="pln">intercept_</span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> 
   findf</span><span class="pun">[</span><span class="str">'CSA'</span><span class="pun">].</span><span class="pln">append</span><span class="pun">(</span><span class="pln">csa</span><span class="pun">)</span><span class="pln">
   findf</span><span class="pun">[</span><span class="str">'B'</span><span class="pun">].</span><span class="pln">append</span><span class="pun">(</span><span class="pln">regressor</span><span class="pun">.</span><span class="pln">intercept_</span><span class="pun">[</span><span class="lit">0</span><span class="pun">])</span><span class="pln">
   findf</span><span class="pun">[</span><span class="str">'M'</span><span class="pun">].</span><span class="pln">append</span><span class="pun">(</span><span class="pln">regressor</span><span class="pun">.</span><span class="pln">coef_</span><span class="pun">[</span><span class="lit">0</span><span class="pun">][</span><span class="lit">0</span><span class="pun">])</span></pre><pre class="prettyprint prettyprinted" style=""><span class="pln">lin_reg_dft</span><span class="pun">.</span><span class="pln">columns </span><span class="pun">=</span><span class="pln"> lin_reg_dft</span><span class="pun">.</span><span class="pln">iloc</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln">
 lin_reg_dft </span><span class="pun">=</span><span class="pln"> lin_reg_dft</span><span class="pun">[</span><span class="lit">1</span><span class="pun">:]</span><span class="pln">
 lin_reg_dft</span><span class="pun">.</span><span class="pln">index</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'variable'</span><span class="pln">
 lin_reg_dft </span><span class="pun">=</span><span class="pln"> lin_reg_dft</span><span class="pun">.</span><span class="pln">astype</span><span class="pun">(</span><span class="str">'float64'</span><span class="pun">)</span></pre><p>We may need to normalize the data for this to be useable</p><pre class="prettyprint prettyprinted" style=""><span class="kwd">import</span><span class="pln"> matplotlib</span><span class="pun">.</span><span class="pln">pyplot </span><span class="kwd">as</span><span class="pln"> plt
 f </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">figure</span><span class="pun">(</span><span class="pln">figsize</span><span class="pun">=(</span><span class="lit">19</span><span class="pun">,</span><span class="pln"> </span><span class="lit">15</span><span class="pun">))</span><span class="pln">
 plt</span><span class="pun">.</span><span class="pln">matshow</span><span class="pun">(</span><span class="pln">df</span><span class="pun">.</span><span class="pln">corr</span><span class="pun">(),</span><span class="pln"> fignum</span><span class="pun">=</span><span class="pln">f</span><span class="pun">.</span><span class="pln">number</span><span class="pun">)</span><span class="pln">
 irange </span><span class="pun">=</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">df</span><span class="pun">.</span><span class="pln">select_dtypes</span><span class="pun">([</span><span class="str">'number'</span><span class="pun">]).</span><span class="pln">shape</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln">
 labels </span><span class="pun">=</span><span class="pln"> df</span><span class="pun">.</span><span class="pln">select_dtypes</span><span class="pun">([</span><span class="str">'number'</span><span class="pun">]).</span><span class="pln">columns
 </span><span class="com"># plt.xticks(irange, labels, fontsize=14, rotation=45)</span><span class="pln">
 plt</span><span class="pun">.</span><span class="pln">yticks</span><span class="pun">(</span><span class="pln">irange</span><span class="pun">,</span><span class="pln"> labels</span><span class="pun">,</span><span class="pln"> fontsize</span><span class="pun">=</span><span class="lit">14</span><span class="pun">)</span><span class="pln">
 cb </span><span class="pun">=</span><span class="pln"> plt</span><span class="pun">.</span><span class="pln">colorbar</span><span class="pun">()</span><span class="pln">
 cb</span><span class="pun">.</span><span class="pln">ax</span><span class="pun">.</span><span class="pln">tick_params</span><span class="pun">(</span><span class="pln">labelsize</span><span class="pun">=</span><span class="lit">14</span><span class="pun">)</span><span class="pln">
 plt</span><span class="pun">.</span><span class="pln">title</span><span class="pun">(</span><span class="str">'Correlation Matrix'</span><span class="pun">,</span><span class="pln"> fontsize</span><span class="pun">=</span><span class="lit">16</span><span class="pun">);</span></pre><pre class="prettyprint prettyprinted" style=""><span class="pln">t </span><span class="pun">=</span><span class="pln"> </span><span class="str">""" """</span><span class="pln">
 </span><span class="pun">!</span><span class="pln">pip install nbdev
 </span><span class="kwd">from</span><span class="pln"> google</span><span class="pun">.</span><span class="pln">colab </span><span class="kwd">import</span><span class="pln"> drive
 drive</span><span class="pun">.</span><span class="pln">mount</span><span class="pun">(</span><span class="str">'/content/drive'</span><span class="pun">)</span><span class="pln">
 </span><span class="pun">%</span><span class="pln">cd </span><span class="pun">/</span><span class="pln">content</span><span class="pun">/</span><span class="pln">drive</span><span class="pun">/</span><span class="typ">My</span><span class="pln"> </span><span class="typ">Drive</span><span class="pun">/</span><span class="str">'Software Development Documents'</span><span class="pun">/</span><span class="pln">dataplay</span><span class="pun">/</span><span class="pln">
 
 </span><span class="com"># !pip install dataplay</span></pre></details><link rel="stylesheet" href="https://cdn.rawgit.com/google/code-prettify/master/styles/desert.css"></details></div><div id="footer"><p id="thanks">Thank's for visiting! - <a href="./../legal.html" id="Terms_of_use878038">Terms of use</a></p><div id="footer_bg_wrapper"><div id="footer_bg"></div></div></div><style>:root{--radial1:radial-gradient(at 52%,at 13%,#a0c3f3 0px,transparent 50%),radial-gradient(at 40%,at 33%,#9be8df 0px,transparent 50%),radial-gradient(at 15%,at 92%,#63fdd9 0px,transparent 50%),radial-gradient(at 97%,at 78%,#889dfb 0px,transparent 50%),radial-gradient(at 19%,at 52%,#fea862 0px,transparent 50%),radial-gradient(at 68%,at 16%,#f29cba 0px,transparent 50%),radial-gradient(at 25%,at 1%,#5cb3e6 0px,transparent 50%);--radial1:radial-gradient(at 52% 13%,#a0c3f3 0px,transparent 50%),radial-gradient(at 40% 33%,#9be8df 0px,transparent 50%),radial-gradient(at 15% 92%,#63fdd9 0px,transparent 50%),radial-gradient(at 97% 78%,#889dfb 0px,transparent 50%),radial-gradient(at 19% 52%,#fea862 0px,transparent 50%),radial-gradient(at 68% 16%,#f29cba 0px,transparent 50%),radial-gradient(at 25% 1%,#5cb3e6 0px,transparent 50%);--filterdropshadowover:drop-shadow(4px 4px 10px rgb(var(--foreground)));--filterdropshadowunder:drop-shadow(4px -4px 1px rgb(var(--background)));--path1:path("M 0 0 L 0 2 L 0 0");--path2:0;--bgheader:linear-gradient(70deg,rgba(var(--background),0.5),rgba(var(--foreground),0.5),rgba(var(--background),0.5));--bgfooter:linear-gradient(70deg,rgba(var(--background),0.6),rgba(var(--foreground),0.6),rgba(var(--background),0.6))}h1>a::-moz-selection{color:rgb(var(--near-black))}h1>a::selection{color:rgb(var(--near-black))}h1>a{animation:gradient 5s ease infinite;background:linear-gradient(90deg,rgb(var(--near-black)),rgba(var(--near-black),.4),rgb(var(--near-black)),rgba(var(--near-black),.4));-webkit-background-clip:text;background-clip:text;background-size:300% 100%;color:transparent}@keyframes gradient{0%{background-position:0 0}50%{background-position:100% 100%}to{background-position:0 0}}h2{filter:url(#header)}#header{margin:60px auto 30px;padding:12px;text-align:center;width:-moz-fit-content;width:fit-content;z-index:9}#header_bg_wrapper{filter:drop-shadow(4px 4px 10px rgb(var(--foreground)));filter:var(--filterdropshadowover);height:100%;position:absolute;top:0;width:100%}#header_bg{animation:spin-header 1s linear infinite alternate;background:linear-gradient(70deg,rgba(var(--background),.5),rgba(var(--foreground),.5),rgba(var(--background),.5));background:var(--bgheader);border-radius:50px;-webkit-clip-path:polygon(33% 38%,0 43%,0 0,100% 0,100% 43%,66% 38%,66% 46%,100% 60%,100% 100%,0 100%,0 60%,33% 46%);clip-path:polygon(33% 38%,0 43%,0 0,100% 0,100% 43%,66% 38%,66% 46%,100% 60%,100% 100%,0 100%,0 60%,33% 46%);height:100%;transition-duration:2s;width:100%}#header:hover #header_bg{-webkit-clip-path:polygon(0 15%,15% 15%,15% 0,85% 0,85% 15%,100% 15%,100% 85%,85% 85%,85% 100%,15% 100%,15% 85%,0 85%);clip-path:polygon(0 15%,15% 15%,15% 0,85% 0,85% 15%,100% 15%,100% 85%,85% 85%,85% 100%,15% 100%,15% 85%,0 85%)}@keyframes spin-header{0%{transform:rotate(-4deg)}to{transform:rotate(4deg)}}@keyframes wiggle{0%{transform:translate(0)}50%{transform:translate(5px)}to{transform:translate(0)}}.controls_container{flex-wrap:wrap;justify-content:space-between;margin:0 auto 30px;padding:0 25px}#footer,.controls_container{align-items:flex-end;display:flex;width:min(100vw,800px)}#footer{height:200px;justify-content:center;margin:30px auto 0}#thanks{color:rgb(var(--near-black));font-size:1.25em;padding:10px;text-align:center}#thanks a{font-size:.75em}#footer_bg_wrapper{filter:drop-shadow(4px -4px 1px rgb(var(--background)));filter:var(--filterdropshadowunder);height:100%;position:absolute;top:0;width:100%;z-index:-1}#footer_bg{background:linear-gradient(70deg,rgba(var(--background),.6),rgba(var(--foreground),.6),rgba(var(--background),.6));background:var(--bgfooter);height:100%;width:100%}#content{margin:auto;max-width:var(--max-width)}#content img{max-width:-webkit-fill-available}#content>*,#content>div>*,details>details{margin:0;padding:12px 0 12px 16px}#content>div{padding:0}details>details{border-left:1px solid rgb(var(--near-black))}@media only screen and (max-width:769px){#content>*,details>details{padding-right:2px}#content{border-width:28px 0 28px 8px}#head_separator{display:none}.notebox:checked+aside{align-items:flex-end;flex-direction:column-reverse}#breadcrumbs{padding-bottom:10px}}.twitter-tweet{margin:auto}#expand,#light,.notelbl{cursor:pointer}#light:before{content:"🌜 Dark mode";display:block}html[\:has\(\%23lightmode\:checked\)]{filter:invert(100%)}html:has(#lightmode:checked){filter:invert(100%)}html[\:has\(\%23lightmode\:checked\)] #light:before{content:"🌞 Light mode"}html:has(#lightmode:checked) #light:before{content:"🌞 Light mode"}#audio{align-items:center;display:flex;margin:0 0 0 -7px}audio{height:40px;margin-left:-6px}audio::-webkit-media-controls-panel{background:rgba(var(--background),.5)}#audio>span{border-radius:50%;display:inline-block;height:40px;margin-right:5px;overflow:hidden;width:40px}.notelbl{color:rgb(var(--near-black))}aside{background:rgb(var(--canvas));border-width:medium;border-bottom:0 solid rgb(var(--near-black));border-left:2px solid rgb(var(--near-black));border-radius:7% 7% 0 0;border-right:2px solid rgb(var(--near-black));border-top:10px solid rgb(var(--near-black));box-shadow:2px 2px 4px rgba(0,0,0,.5);margin:auto;padding:20px;z-index:1}.notebox,aside{display:none}.info,.tip,.warning{align-items:center;border:#000;border-radius:5% 5% 5% 5%;color:rgb(var(--near-white));display:flex}.info>*,.tip>*,.warning>*{display:inline}.info a,.tip a,.warning a{color:rgb(var(--near-white))}aside.info:before,aside.tip:before,aside.warning:before{display:inline-block;font-size:1.5em;margin:10px 20px}aside.tip:before{content:"💡"}aside.info:before{content:"ℹ️"}aside.warning:before{content:"⚠️"}aside.tip{background:rgba(var(--near-black),1)}aside.info{background:#087abb}aside.warning{background:#8b0000}.notebox:checked+p+aside{display:block}.notebox:checked+p+aside>.notelbl:after{content:" [X]"}#expand:before{content:"➕ Expand notes"}body[\:has\(\%23expandmode\:checked\)] #expand:before{content:"➖ Collapse notes"}body:has(#expandmode:checked) #expand:before{content:"➖ Collapse notes"}body[\:has\(\%23expandmode\:checked\)] aside{display:block}body:has(#expandmode:checked) aside{display:block}#toast_container{bottom:15%;display:flex;justify-content:center;position:fixed;transform:scale(0);width:100vw;z-index:1}#toast_container>p{background:rgb(var(--near-black));border-radius:50px;color:rgb(var(--foreground));padding:10px;width:-moz-fit-content;width:fit-content}@keyframes toast{0%{transform:scale(0)}20%{transform:scale(1)}80%{transform:scale(1)}to{transform:scale(0)}}#page_transition{align-items:center;background:radial-gradient(at 52%,at 13%,#a0c3f3 0,transparent 50%),radial-gradient(at 40%,at 33%,#9be8df 0,transparent 50%),radial-gradient(at 15%,at 92%,#63fdd9 0,transparent 50%),radial-gradient(at 97%,at 78%,#889dfb 0,transparent 50%),radial-gradient(at 19%,at 52%,#fea862 0,transparent 50%),radial-gradient(at 68%,at 16%,#f29cba 0,transparent 50%),radial-gradient(at 25%,at 1%,#5cb3e6 0,transparent 50%);background:radial-gradient(at 52% 13%,#a0c3f3 0,transparent 50%),radial-gradient(at 40% 33%,#9be8df 0,transparent 50%),radial-gradient(at 15% 92%,#63fdd9 0,transparent 50%),radial-gradient(at 97% 78%,#889dfb 0,transparent 50%),radial-gradient(at 19% 52%,#fea862 0,transparent 50%),radial-gradient(at 68% 16%,#f29cba 0,transparent 50%),radial-gradient(at 25% 1%,#5cb3e6 0,transparent 50%);background:var(--radial1);background-size:100% 200%;border-radius:50px;color:rgb(var(--near-black));display:flex;font-size:1.25em;height:100%;justify-content:center;left:50%;opacity:0;overflow:hidden;position:fixed;top:50%;transform:translate(-50%,-50%) scale(0);width:100%;z-index:100}@keyframes page_transition{0%{opacity:1;transform:translate(-50%,-50%) scale(0)}70%{opacity:1;transform:translate(-50%,-50%) scale(1)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}</style><script>!function(){"use strict";var e,t,n,r,o={},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return o[e](n,n.exports,i),n.exports}i.m=o,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);i.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var c=2&r&&n;"object"==typeof c&&!~e.indexOf(c);c=t(c))Object.getOwnPropertyNames(c).forEach((function(e){a[e]=function(){return n[e]}}));return a.default=function(){return n},i.d(o,a),o},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,n){return i.f[n](e,t),t}),[]))},i.u=function(e){return"chunk."+({156:"convert",233:"template",787:"route"}[e]||e)+"."+{156:"df0c10ce33d3ee94a9a5",212:"cc5a15acf69e27245d38",233:"a19d52f05fa325468cec",787:"e960bd1ae43977fc9361"}[e]+".js"},i.miniCssF=function(e){return"index.css"},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n={},r="karpatic:",i.l=function(e,t,o,a){if(n[e])n[e].push(t);else{var c,u;if(void 0!==o)for(var f=document.getElementsByTagName("script"),l=0;l<f.length;l++){var d=f[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){c=d;break}}c||(u=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.setAttribute("data-webpack",r+o),c.src=e),n[e]=[t];var s=function(t,r){c.onerror=c.onload=null,clearTimeout(p);var o=n[e];if(delete n[e],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(s.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=s.bind(null,c.onerror),c.onload=s.bind(null,c.onload),u&&document.head.appendChild(c)}},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="/",function(){var e={826:0};i.f.j=function(t,n){var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(n,o){r=e[t]=[n,o]}));n.push(r[2]=o);var a=i.p+i.u(t),c=new Error;i.l(a,(function(n){if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",c.name="ChunkLoadError",c.type=o,c.request=a,r[1](c)}}),"chunk-"+t,t)}};var t=function(t,n){var r,o,a=n[0],c=n[1],u=n[2],f=0;if(a.some((function(t){return 0!==e[t]}))){for(r in c)i.o(c,r)&&(i.m[r]=c[r]);u&&u(i)}for(t&&t(n);f<a.length;f++)o=a[f],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkkarpatic=self.webpackChunkkarpatic||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),window.w=window,w.oldRoute=location.pathname,w.isLocal||=!w.content,w.preRendering=/ReactSnap/.test(navigator.userAgent),w.preRendering||(console.log("%c Like what you see?","font-weight: bold; font-size: 50px;color: red; text-shadow: 3px 3px 0 red , 6px 6px 0 green , 9px 9px 0 blue"),console.log("%c Contact me: charleskarpati@gmail.com","color: blue; font-family:sans-serif; font-size: 20px")),w.pingServer=async(e=!1)=>{w.content&&navigator.sendBeacon("https://ping.charleskarpati.com/",`{"from":"${oldRoute||location.href}","to":"${e?.href||e?.target?.href||oldRoute}"}`)},!isLocal&&w.pingServer(),w.redirect=async(e=!1)=>{e?.preventDefault?.(),!w.navEvent&&({handleRoute:w.handleRoute,navEvent:w.navEvent}=await i.e(787).then(i.bind(i,85))),"click"==e.type?(history.pushState({},"",e.target.href),navEvent()):handleRoute()},addEventListener("popstate",redirect)}()</script><script>function loadLazy(){w.loadOnce&&(w.loadOnce=!0)||((document.head||d).appendChild(document.createElement("script")).src=origin+"/templates/article_lazy.js")}[[["scroll","mousedown","touchstart"],w,loadLazy,{once:!0}]].forEach((e=>e[0].forEach((t=>e[1].addEventListener(t,e[2],e[3]||{passive:!1}))))),w.activeHeader=null,w.observer=new IntersectionObserver((e=>{e.forEach((e=>{let t=e.target,n="0.5s ease-in-out 0s 2 normal none running wiggle",a=t.getBoundingClientRect().top,o="SUMMARY"==t.parentNode?.nodeName&&t.parentNode.style||t.style;if(o.animation=n,!e.isIntersecting)return o.animation="";if(a<300||a>300){w.activeHeader&&(w.activeHeader.style.textDecoration="none");let e=document.querySelector(`#sitemap a[href="#${t.id}"]`);e&&(e.style.animation=n,e.style.textDecoration="line-through"),w.activeHeader=e}}))})),(w.loadObserver=e=>{document.querySelectorAll("h2,h3,h4").forEach((e=>observer.observe(e)))})()</script><style>body[\:has\(\%23sitemap\[focus-within\]\)]{overscroll-behavior-y:contain}body:has(#sitemap[focus-within]){overscroll-behavior-y:contain}body[\:has\(\%23sitemap\:focus-within\)]{overscroll-behavior-y:contain}body:has(#sitemap:focus-within){overscroll-behavior-y:contain}#sitemap{backdrop-filter:blur(2px) saturate(100%);-webkit-backdrop-filter:blur(2px) saturate(100%);background-color:rgba(var(--foreground),.6);border-radius:.7rem;border-radius:12px;box-shadow:3px 2px 5px rgb(var(--background)),-3px -2px 20px rgb(var(--near-white)),inset 0 0 10px rgb(var(--near-white));left:0;min-width:8em;overflow:hidden;overflow-x:hidden;padding:0 1rem 1rem;position:fixed;top:0;z-index:999}#toggle_sitemap{visibility:hidden}#toggle_sitemap:not(:checked)~#sitemap{animation:collapse 1s forwards,glow 6s linear infinite}#toggle_sitemap:checked~#sitemap{animation:expand 1s forwards,pulse 6s linear infinite}@keyframes glow{50%{box-shadow:3px 2px 20px rgb(var(--near-white)),-3px -2px 20px rgb(var(--background)),inset 0 0 10px rgb(var(--background))}}@keyframes collapse{0%{max-height:75svh}to{max-height:3em}}@keyframes expand{to{max-height:75svh}0%{max-height:3em}}#sitemap>label{color:rgb(var(--near-black));cursor:grab;display:flex;justify-content:space-between;line-height:3em;width:-webkit-fill-available}#sitemap>label:hover{text-shadow:1px 1px 45px rgb(var(--near-black))}#toggle_sitemap:not(:checked)~#sitemap>label>span{animation:dismiss 1s forwards}#toggle_sitemap:checked~#sitemap>label>span{animation:reveal .5s forwards}#sitemap>label>span:nth-child(2){--rotate:0deg}#sitemap>label>span:nth-child(3){--rotate:45deg}@keyframes reveal{0%{transform:rotate(var(--rotate))}to{transform:rotate(90deg)}}@keyframes dismiss{0%{transform:rotate(90deg)}to{transform:rotate(var(--rotate))}}#sitemap-content{display:grid;max-height:calc(75vh - 6em);overflow-x:hidden}#sitemap-content>a{display:inherit;width:-moz-fit-content;width:fit-content}#sitemap-content>a:hover{animation:shake 1s linear infinite alternate}#currentPage:hover{color:rgb(var(--near-black))}#currentPage+div>a:hover{text-decoration:line-through}#currentPage+div{display:block;font-size:1em;line-height:1em}#currentPage:hover{animation:gradient 4s linear infinite alternate,shake 1s linear infinite alternate}#currentPage{animation:gradient 4s linear infinite alternate;background-image:var(--radial1);background-size:100% 400%;border-radius:5px}@keyframes shake{0%{transform:translate(0);-webkit-transform:translate(0)}50%{transform:translate(4px);-webkit-transform:translate(4px)}to{transform:translate(0);-webkit-transform:translate(0)}}</style></body></html>