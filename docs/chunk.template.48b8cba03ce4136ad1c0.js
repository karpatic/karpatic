(self.webpackChunkkarpatic=self.webpackChunkkarpatic||[]).push([[225],{692:function(){window.w=window;const shorten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return e.trim().slice(0,t)+(e.length>t+1?"...":"")},capitalize=e=>e.replace(/\b\w/g,(e=>e.toUpperCase())),formatLink=e=>shorten(capitalize(e.replaceAll(" ","_").replace(/[^a-zA-Z_]/g,""))),displayLink=e=>capitalize(e.replace(/^\d+/g,"").replaceAll("_"," ")),create_url=(e,t)=>{let a=location.pathname.split("/").length>=3,n=e!=t;return`./${(a&&!n?"../":!a&&n&&!!t&&t+"/")||""}${e}`};w.addEventListener("load_template",(async()=>{if(console.log("Event:LOAD_TEMPLATE"),w.meta.template||="article",meta.template!==document.body.getAttribute("data-template")){let e=`/templates/${meta.template}`;try{console.log("~~~~~~~~~> INSERT_TEMPLATE"),document.body.setAttribute("data-template",meta.template),document.body.innerHTML=await(await fetch(`${e}.html`)).text(),document.body.insertAdjacentHTML("beforeend",`<style>${await(await fetch(`${e}.css`)).text()}</style>`),Array.from(document.getElementsByTagName("script")).forEach((e=>{console.log("~~~~~~~~~> REINJECT_TEMPLATE_SCRIPTS");const t=document.createElement("script");["src","type","async","textContent"].forEach((a=>e[a]&&(t[a]=e[a]))),document.body.appendChild(t),e.parentNode.removeChild(e)}))}catch(e){console.log("~~~~~~~~~> INJECT_SCRIPTS:ERROR:",e)}}let e=location.pathname.split("/")[1].replace(".html","")||"index";if(w.sitemap&&!w.meta.hide_sitemap){let t=!1;try{if(!w.sitemap_content){t=`${location.origin}/templates/${w.meta.template}_sitemap.css`,console.log("~~~~~~~~~> INSERT_SITEMAP_STYLE");let e=await(await fetch(t)).text();document.body.insertAdjacentHTML("beforeend",`<style>${e}</style>`)}w.sm_name!=e&&(w.sm_name=e,t=`${location.origin}/posts/${sm_name}_map.json`,console.log("~~~~~~~~~> GET_SITEMAP_CONTENT"),w.sitemap_content=await(await fetch(t)).json())}catch(e){console.log("~~~~~~~~~> INSERT_SITEMAP:ERROR:",t,e)}}document.title=w.meta.title;const t=w.page_transition;!w.preRendering&&-1==location.href.indexOf("#")&&t?(t.style.animation="page_transition 1s alternate 2, gradient 1s alternate 2",t.addEventListener("animationend",(async()=>t.style.animation="none"),{once:!0}),setTimeout((async()=>{await populateTemplate()}),1100)):populateTemplate()}),{passive:!0});const populateTemplate=async()=>(console.log("~~~~~~~~~~~~> POPULATE_TEMPLATE"),meta.breadcrumbs=['<a href="./../index.html">Home</a>',location.pathname.split("/").slice(1).map(((e,t)=>"index"==(e=e.replace(".html",""))?"":`<a href=${create_url(e,w.sm_name)}.html>${capitalize(e.replace(".html",""))}</a>`)).join("/")].join("/"),["content","title","summary","breadcrumbs"].map((e=>{if(!meta[e])return;const t=document.getElementById(e);t.innerHTML="",t.appendChild(document.createRange().createContextualFragment(meta[e]))})),await createNav(),[...document.querySelectorAll("h2, h3, h4")].forEach((e=>{e.id=formatLink(e.innerText||e.textContent);let t=document.createElement("a");t.className="anchor",t.id=t.href="#"+e.id,t.setAttribute("aria-label","Link to "+e.id),t.setAttribute("onclick",`event?.preventDefault?.(); navigator.clipboard.writeText('https://charleskarpati.com${location.pathname+location.hash}'); w.toast?.();`),e.parentNode.insertBefore(t,e.nextSibling)})),w.expand&&(w.expand.style.display=document.getElementsByTagName("aside").length>0?"block":"none"),w.audio&&(w.audio.style.display=w.meta.audio?"flex":"none",w.audio.title=w.meta.audio,w.audio.querySelector("audio").src=w.meta.audio),loadObserver?.(),document.querySelectorAll("a").forEach((e=>{e.id=e.id||formatLink(e.innerText)+Math.floor(1e6*Math.random())})),w.updateRedirectListeners?.(),!0),createNav=async()=>{let e=w.meta.tab||w.meta.filename;lbl=e=>e.tab||e.filename;const t=w.meta.hide_sitemap;if(w.sitemap&&(w.sitemap.style.visibility=w.meta.hide_sitemap?"hidden":"visible"),!w.sitemap||t)return;console.log("~~~~~~~~~~~~~~~> CREATE_NAV: \n\n",{currentTab:e,sitemap_content:w.sitemap_content});let a=w.sitemap_content.map((t=>`\n  <a id="${lbl(t)==e?"currentPage":"link_"+lbl(t)}" \n      id='link_${lbl(t)}' \n      href="${create_url(t.filename,w.sm_name)}.html" \n      title="${lbl(t)}">\n      ${shorten(displayLink(lbl(t)),20)}\n  </a>`));if(w.sitemap.innerHTML=`\n  <label tabindex="0" for="toggle_sitemap">\n      <span>&#x21e8;</span> Sitemap \n      <span>&#x2715;</span>\n  </label>\n  <hr/>\n  <div id='sitemap-content'>\n    <a id="link_Home" href="./../index.html" title="Home">Home</a>\n    ${a.join("")}\n  </div>`,document.getElementById("toggle_sitemap").checked=!0,!("toc"in w.meta)||"false"==w.meta.toc.toLowerCase())return;let n=w.tocHere||w.toc;console.log({tocNode:n}),n.innerHTML=[...document.querySelectorAll("h2, h3, h4")].map((e=>{let t=e.innerText||e.textContent;const a=formatLink(t);return`${"&emsp;".repeat(e.tagName.slice(1)-1)}<a href='#${a}' title="${t}">${displayLink(t)}</a>`})).join("<br/>"),console.log("YEEEHAW")};w.toast=()=>{let e=document.getElementById("toast_container");e.style.animation="toast 3s",e.addEventListener("animationend",(()=>{e.style.animation="none"}),{once:!0})}}}]);