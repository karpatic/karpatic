const CACHE_NAME="cv-website-cache-v9";self.addEventListener("install",(async e=>{try{console.log("Service worker installing...");const t=await caches.open(["/"]);console.log("Service worker Adding URLS..."),await t.addAll(urlsToCache),console.log("Service worker  - event.waitUntil..."),e.waitUntil(t),console.log("Service worker done installing...")}catch(e){}}));const putInCache=async(e,t)=>{const a=await caches.open(CACHE_NAME);await a.put(e,t)},deleteCache=async e=>{await caches.delete(e)},deleteOldCaches=async()=>{const e=[CACHE_NAME],t=(await caches.keys()).filter((t=>!e.includes(t)));await Promise.all(t.map(deleteCache))};self.addEventListener("activate",(e=>{e.waitUntil(deleteOldCaches())}));const cacheFirst=async({request:e,preloadResponsePromise:t})=>{const a=await caches.match(e);if(a)return a;const s=await t;if(s)return console.info("using preload response",s),putInCache(e,s.clone()),s;try{const t=await fetch(e);return putInCache(e,t.clone()),t}catch(e){return new Response("Network error happened",{status:408,headers:{"Content-Type":"text/plain"}})}};self.addEventListener("fetch",(e=>{e.respondWith(cacheFirst({request:e.request,preloadResponsePromise:e.preloadResponse}))}));